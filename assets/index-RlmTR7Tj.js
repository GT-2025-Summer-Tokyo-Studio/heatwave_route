var k7=(e,n)=>()=>(n||e((n={exports:{}}).exports,n),n.exports);var W6e=k7((au,lu)=>{(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))l(d);new MutationObserver(d=>{for(const m of d)if(m.type==="childList")for(const b of m.addedNodes)b.tagName==="LINK"&&b.rel==="modulepreload"&&l(b)}).observe(document,{childList:!0,subtree:!0});function s(d){const m={};return d.integrity&&(m.integrity=d.integrity),d.referrerPolicy&&(m.referrerPolicy=d.referrerPolicy),d.crossOrigin==="use-credentials"?m.credentials="include":d.crossOrigin==="anonymous"?m.credentials="omit":m.credentials="same-origin",m}function l(d){if(d.ep)return;d.ep=!0;const m=s(d);fetch(d.href,m)}})();/**
* @vue/shared v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function tS(e){const n=Object.create(null);for(const s of e.split(","))n[s]=1;return s=>s in n}const co={},yg=[],ys=()=>{},M7=()=>!1,Xb=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),nS=e=>e.startsWith("onUpdate:"),ca=Object.assign,rS=(e,n)=>{const s=e.indexOf(n);s>-1&&e.splice(s,1)},A7=Object.prototype.hasOwnProperty,Wi=(e,n)=>A7.call(e,n),mn=Array.isArray,bg=e=>Kv(e)==="[object Map]",Jb=e=>Kv(e)==="[object Set]",wf=e=>Kv(e)==="[object Date]",hr=e=>typeof e=="function",ir=e=>typeof e=="string",pc=e=>typeof e=="symbol",Yr=e=>e!==null&&typeof e=="object",yv=e=>(Yr(e)||hr(e))&&hr(e.then)&&hr(e.catch),sR=Object.prototype.toString,Kv=e=>sR.call(e),R7=e=>Kv(e).slice(8,-1),bv=e=>Kv(e)==="[object Object]",iS=e=>ir(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,rv=tS(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Qb=e=>{const n=Object.create(null);return s=>n[s]||(n[s]=e(s))},P7=/-(\w)/g,wl=Qb(e=>e.replace(P7,(n,s)=>s?s.toUpperCase():"")),L7=/\B([A-Z])/g,bh=Qb(e=>e.replace(L7,"-$1").toLowerCase()),Yv=Qb(e=>e.charAt(0).toUpperCase()+e.slice(1)),iv=Qb(e=>e?`on${Yv(e)}`:""),bf=(e,n)=>!Object.is(e,n),R2=(e,...n)=>{for(let s=0;s<e.length;s++)e[s](...n)},C4=(e,n,s,l=!1)=>{Object.defineProperty(e,n,{configurable:!0,enumerable:!1,writable:l,value:s})},E4=e=>{const n=parseFloat(e);return isNaN(n)?e:n},O7=e=>{const n=ir(e)?Number(e):NaN;return isNaN(n)?e:n};let nk;const ex=()=>nk||(nk=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function fr(e){if(mn(e)){const n={};for(let s=0;s<e.length;s++){const l=e[s],d=ir(l)?F7(l):fr(l);if(d)for(const m in d)n[m]=d[m]}return n}else if(ir(e)||Yr(e))return e}const D7=/;(?![^(]*\))/g,z7=/:([^]+)/,N7=/\/\*[^]*?\*\//g;function F7(e){const n={};return e.replace(N7,"").split(D7).forEach(s=>{if(s){const l=s.split(z7);l.length>1&&(n[l[0].trim()]=l[1].trim())}}),n}function ge(e){let n="";if(ir(e))n=e;else if(mn(e))for(let s=0;s<e.length;s++){const l=ge(e[s]);l&&(n+=l+" ")}else if(Yr(e))for(const s in e)e[s]&&(n+=s+" ");return n.trim()}function iu(e){if(!e)return null;let{class:n,style:s}=e;return n&&!ir(n)&&(e.class=ge(n)),s&&(e.style=fr(s)),e}const B7="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",V7=tS(B7);function oR(e){return!!e||e===""}function $7(e,n){if(e.length!==n.length)return!1;let s=!0;for(let l=0;s&&l<e.length;l++)s=Lg(e[l],n[l]);return s}function Lg(e,n){if(e===n)return!0;let s=wf(e),l=wf(n);if(s||l)return s&&l?e.getTime()===n.getTime():!1;if(s=pc(e),l=pc(n),s||l)return e===n;if(s=mn(e),l=mn(n),s||l)return s&&l?$7(e,n):!1;if(s=Yr(e),l=Yr(n),s||l){if(!s||!l)return!1;const d=Object.keys(e).length,m=Object.keys(n).length;if(d!==m)return!1;for(const b in e){const r=e.hasOwnProperty(b),E=n.hasOwnProperty(b);if(r&&!E||!r&&E||!Lg(e[b],n[b]))return!1}}return String(e)===String(n)}function aR(e,n){return e.findIndex(s=>Lg(s,n))}const lR=e=>!!(e&&e.__v_isRef===!0),gn=e=>ir(e)?e:e==null?"":mn(e)||Yr(e)&&(e.toString===sR||!hr(e.toString))?lR(e)?gn(e.value):JSON.stringify(e,uR,2):String(e),uR=(e,n)=>lR(n)?uR(e,n.value):bg(n)?{[`Map(${n.size})`]:[...n.entries()].reduce((s,[l,d],m)=>(s[z3(l,m)+" =>"]=d,s),{})}:Jb(n)?{[`Set(${n.size})`]:[...n.values()].map(s=>z3(s))}:pc(n)?z3(n):Yr(n)&&!mn(n)&&!bv(n)?String(n):n,z3=(e,n="")=>{var s;return pc(e)?`Symbol(${(s=e.description)!=null?s:n})`:e};/**
* @vue/reactivity v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Ja;class cR{constructor(n=!1){this.detached=n,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Ja,!n&&Ja&&(this.index=(Ja.scopes||(Ja.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let n,s;if(this.scopes)for(n=0,s=this.scopes.length;n<s;n++)this.scopes[n].pause();for(n=0,s=this.effects.length;n<s;n++)this.effects[n].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let n,s;if(this.scopes)for(n=0,s=this.scopes.length;n<s;n++)this.scopes[n].resume();for(n=0,s=this.effects.length;n<s;n++)this.effects[n].resume()}}run(n){if(this._active){const s=Ja;try{return Ja=this,n()}finally{Ja=s}}}on(){++this._on===1&&(this.prevScope=Ja,Ja=this)}off(){this._on>0&&--this._on===0&&(Ja=this.prevScope,this.prevScope=void 0)}stop(n){if(this._active){this._active=!1;let s,l;for(s=0,l=this.effects.length;s<l;s++)this.effects[s].stop();for(this.effects.length=0,s=0,l=this.cleanups.length;s<l;s++)this.cleanups[s]();if(this.cleanups.length=0,this.scopes){for(s=0,l=this.scopes.length;s<l;s++)this.scopes[s].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!n){const d=this.parent.scopes.pop();d&&d!==this&&(this.parent.scopes[this.index]=d,d.index=this.index)}this.parent=void 0}}}function H7(e){return new cR(e)}function dR(){return Ja}function hR(e,n=!1){Ja&&Ja.cleanups.push(e)}let go;const N3=new WeakSet;class fR{constructor(n){this.fn=n,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Ja&&Ja.active&&Ja.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,N3.has(this)&&(N3.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||mR(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,rk(this),gR(this);const n=go,s=hc;go=this,hc=!0;try{return this.fn()}finally{_R(this),go=n,hc=s,this.flags&=-3}}stop(){if(this.flags&1){for(let n=this.deps;n;n=n.nextDep)aS(n);this.deps=this.depsTail=void 0,rk(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?N3.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){T4(this)&&this.run()}get dirty(){return T4(this)}}let pR=0,sv,ov;function mR(e,n=!1){if(e.flags|=8,n){e.next=ov,ov=e;return}e.next=sv,sv=e}function sS(){pR++}function oS(){if(--pR>0)return;if(ov){let n=ov;for(ov=void 0;n;){const s=n.next;n.next=void 0,n.flags&=-9,n=s}}let e;for(;sv;){let n=sv;for(sv=void 0;n;){const s=n.next;if(n.next=void 0,n.flags&=-9,n.flags&1)try{n.trigger()}catch(l){e||(e=l)}n=s}}if(e)throw e}function gR(e){for(let n=e.deps;n;n=n.nextDep)n.version=-1,n.prevActiveLink=n.dep.activeLink,n.dep.activeLink=n}function _R(e){let n,s=e.depsTail,l=s;for(;l;){const d=l.prevDep;l.version===-1?(l===s&&(s=d),aS(l),U7(l)):n=l,l.dep.activeLink=l.prevActiveLink,l.prevActiveLink=void 0,l=d}e.deps=n,e.depsTail=s}function T4(e){for(let n=e.deps;n;n=n.nextDep)if(n.dep.version!==n.version||n.dep.computed&&(vR(n.dep.computed)||n.dep.version!==n.version))return!0;return!!e._dirty}function vR(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===xv)||(e.globalVersion=xv,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!T4(e))))return;e.flags|=2;const n=e.dep,s=go,l=hc;go=e,hc=!0;try{gR(e);const d=e.fn(e._value);(n.version===0||bf(d,e._value))&&(e.flags|=128,e._value=d,n.version++)}catch(d){throw n.version++,d}finally{go=s,hc=l,_R(e),e.flags&=-3}}function aS(e,n=!1){const{dep:s,prevSub:l,nextSub:d}=e;if(l&&(l.nextSub=d,e.prevSub=void 0),d&&(d.prevSub=l,e.nextSub=void 0),s.subs===e&&(s.subs=l,!l&&s.computed)){s.computed.flags&=-5;for(let m=s.computed.deps;m;m=m.nextDep)aS(m,!0)}!n&&!--s.sc&&s.map&&s.map.delete(s.key)}function U7(e){const{prevDep:n,nextDep:s}=e;n&&(n.nextDep=s,e.prevDep=void 0),s&&(s.prevDep=n,e.nextDep=void 0)}let hc=!0;const yR=[];function dh(){yR.push(hc),hc=!1}function hh(){const e=yR.pop();hc=e===void 0?!0:e}function rk(e){const{cleanup:n}=e;if(e.cleanup=void 0,n){const s=go;go=void 0;try{n()}finally{go=s}}}let xv=0,j7=class{constructor(n,s){this.sub=n,this.dep=s,this.version=s.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}};class tx{constructor(n){this.computed=n,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(n){if(!go||!hc||go===this.computed)return;let s=this.activeLink;if(s===void 0||s.sub!==go)s=this.activeLink=new j7(go,this),go.deps?(s.prevDep=go.depsTail,go.depsTail.nextDep=s,go.depsTail=s):go.deps=go.depsTail=s,bR(s);else if(s.version===-1&&(s.version=this.version,s.nextDep)){const l=s.nextDep;l.prevDep=s.prevDep,s.prevDep&&(s.prevDep.nextDep=l),s.prevDep=go.depsTail,s.nextDep=void 0,go.depsTail.nextDep=s,go.depsTail=s,go.deps===s&&(go.deps=l)}return s}trigger(n){this.version++,xv++,this.notify(n)}notify(n){sS();try{for(let s=this.subs;s;s=s.prevSub)s.sub.notify()&&s.sub.dep.notify()}finally{oS()}}}function bR(e){if(e.dep.sc++,e.sub.flags&4){const n=e.dep.computed;if(n&&!e.dep.subs){n.flags|=20;for(let l=n.deps;l;l=l.nextDep)bR(l)}const s=e.dep.subs;s!==e&&(e.prevSub=s,s&&(s.nextSub=e)),e.dep.subs=e}}const cb=new WeakMap,Dp=Symbol(""),I4=Symbol(""),wv=Symbol("");function Qa(e,n,s){if(hc&&go){let l=cb.get(e);l||cb.set(e,l=new Map);let d=l.get(s);d||(l.set(s,d=new tx),d.map=l,d.key=s),d.track()}}function rh(e,n,s,l,d,m){const b=cb.get(e);if(!b){xv++;return}const r=E=>{E&&E.trigger()};if(sS(),n==="clear")b.forEach(r);else{const E=mn(e),M=E&&iS(s);if(E&&s==="length"){const A=Number(l);b.forEach((P,D)=>{(D==="length"||D===wv||!pc(D)&&D>=A)&&r(P)})}else switch((s!==void 0||b.has(void 0))&&r(b.get(s)),M&&r(b.get(wv)),n){case"add":E?M&&r(b.get("length")):(r(b.get(Dp)),bg(e)&&r(b.get(I4)));break;case"delete":E||(r(b.get(Dp)),bg(e)&&r(b.get(I4)));break;case"set":bg(e)&&r(b.get(Dp));break}}oS()}function G7(e,n){const s=cb.get(e);return s&&s.get(n)}function ig(e){const n=Os(e);return n===e?n:(Qa(n,"iterate",wv),ku(e)?n:n.map(La))}function nx(e){return Qa(e=Os(e),"iterate",wv),e}const q7={__proto__:null,[Symbol.iterator](){return F3(this,Symbol.iterator,La)},concat(...e){return ig(this).concat(...e.map(n=>mn(n)?ig(n):n))},entries(){return F3(this,"entries",e=>(e[1]=La(e[1]),e))},every(e,n){return Jd(this,"every",e,n,void 0,arguments)},filter(e,n){return Jd(this,"filter",e,n,s=>s.map(La),arguments)},find(e,n){return Jd(this,"find",e,n,La,arguments)},findIndex(e,n){return Jd(this,"findIndex",e,n,void 0,arguments)},findLast(e,n){return Jd(this,"findLast",e,n,La,arguments)},findLastIndex(e,n){return Jd(this,"findLastIndex",e,n,void 0,arguments)},forEach(e,n){return Jd(this,"forEach",e,n,void 0,arguments)},includes(...e){return B3(this,"includes",e)},indexOf(...e){return B3(this,"indexOf",e)},join(e){return ig(this).join(e)},lastIndexOf(...e){return B3(this,"lastIndexOf",e)},map(e,n){return Jd(this,"map",e,n,void 0,arguments)},pop(){return H_(this,"pop")},push(...e){return H_(this,"push",e)},reduce(e,...n){return ik(this,"reduce",e,n)},reduceRight(e,...n){return ik(this,"reduceRight",e,n)},shift(){return H_(this,"shift")},some(e,n){return Jd(this,"some",e,n,void 0,arguments)},splice(...e){return H_(this,"splice",e)},toReversed(){return ig(this).toReversed()},toSorted(e){return ig(this).toSorted(e)},toSpliced(...e){return ig(this).toSpliced(...e)},unshift(...e){return H_(this,"unshift",e)},values(){return F3(this,"values",La)}};function F3(e,n,s){const l=nx(e),d=l[n]();return l!==e&&!ku(e)&&(d._next=d.next,d.next=()=>{const m=d._next();return m.value&&(m.value=s(m.value)),m}),d}const W7=Array.prototype;function Jd(e,n,s,l,d,m){const b=nx(e),r=b!==e&&!ku(e),E=b[n];if(E!==W7[n]){const P=E.apply(e,m);return r?La(P):P}let M=s;b!==e&&(r?M=function(P,D){return s.call(this,La(P),D,e)}:s.length>2&&(M=function(P,D){return s.call(this,P,D,e)}));const A=E.call(b,M,l);return r&&d?d(A):A}function ik(e,n,s,l){const d=nx(e);let m=s;return d!==e&&(ku(e)?s.length>3&&(m=function(b,r,E){return s.call(this,b,r,E,e)}):m=function(b,r,E){return s.call(this,b,La(r),E,e)}),d[n](m,...l)}function B3(e,n,s){const l=Os(e);Qa(l,"iterate",wv);const d=l[n](...s);return(d===-1||d===!1)&&cS(s[0])?(s[0]=Os(s[0]),l[n](...s)):d}function H_(e,n,s=[]){dh(),sS();const l=Os(e)[n].apply(e,s);return oS(),hh(),l}const K7=tS("__proto__,__v_isRef,__isVue"),xR=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(pc));function Y7(e){pc(e)||(e=String(e));const n=Os(this);return Qa(n,"has",e),n.hasOwnProperty(e)}class wR{constructor(n=!1,s=!1){this._isReadonly=n,this._isShallow=s}get(n,s,l){if(s==="__v_skip")return n.__v_skip;const d=this._isReadonly,m=this._isShallow;if(s==="__v_isReactive")return!d;if(s==="__v_isReadonly")return d;if(s==="__v_isShallow")return m;if(s==="__v_raw")return l===(d?m?sV:TR:m?ER:CR).get(n)||Object.getPrototypeOf(n)===Object.getPrototypeOf(l)?n:void 0;const b=mn(n);if(!d){let E;if(b&&(E=q7[s]))return E;if(s==="hasOwnProperty")return Y7}const r=Reflect.get(n,s,Hs(n)?n:l);return(pc(s)?xR.has(s):K7(s))||(d||Qa(n,"get",s),m)?r:Hs(r)?b&&iS(s)?r:r.value:Yr(r)?d?n0(r):ts(r):r}}class SR extends wR{constructor(n=!1){super(!1,n)}set(n,s,l,d){let m=n[s];if(!this._isShallow){const E=Sf(m);if(!ku(l)&&!Sf(l)&&(m=Os(m),l=Os(l)),!mn(n)&&Hs(m)&&!Hs(l))return E?!1:(m.value=l,!0)}const b=mn(n)&&iS(s)?Number(s)<n.length:Wi(n,s),r=Reflect.set(n,s,l,Hs(n)?n:d);return n===Os(d)&&(b?bf(l,m)&&rh(n,"set",s,l):rh(n,"add",s,l)),r}deleteProperty(n,s){const l=Wi(n,s);n[s];const d=Reflect.deleteProperty(n,s);return d&&l&&rh(n,"delete",s,void 0),d}has(n,s){const l=Reflect.has(n,s);return(!pc(s)||!xR.has(s))&&Qa(n,"has",s),l}ownKeys(n){return Qa(n,"iterate",mn(n)?"length":Dp),Reflect.ownKeys(n)}}class Z7 extends wR{constructor(n=!1){super(!0,n)}set(n,s){return!0}deleteProperty(n,s){return!0}}const X7=new SR,J7=new Z7,Q7=new SR(!0),k4=e=>e,i2=e=>Reflect.getPrototypeOf(e);function eV(e,n,s){return function(...l){const d=this.__v_raw,m=Os(d),b=bg(m),r=e==="entries"||e===Symbol.iterator&&b,E=e==="keys"&&b,M=d[e](...l),A=s?k4:n?db:La;return!n&&Qa(m,"iterate",E?I4:Dp),{next(){const{value:P,done:D}=M.next();return D?{value:P,done:D}:{value:r?[A(P[0]),A(P[1])]:A(P),done:D}},[Symbol.iterator](){return this}}}}function s2(e){return function(...n){return e==="delete"?!1:e==="clear"?void 0:this}}function tV(e,n){const s={get(d){const m=this.__v_raw,b=Os(m),r=Os(d);e||(bf(d,r)&&Qa(b,"get",d),Qa(b,"get",r));const{has:E}=i2(b),M=n?k4:e?db:La;if(E.call(b,d))return M(m.get(d));if(E.call(b,r))return M(m.get(r));m!==b&&m.get(d)},get size(){const d=this.__v_raw;return!e&&Qa(Os(d),"iterate",Dp),Reflect.get(d,"size",d)},has(d){const m=this.__v_raw,b=Os(m),r=Os(d);return e||(bf(d,r)&&Qa(b,"has",d),Qa(b,"has",r)),d===r?m.has(d):m.has(d)||m.has(r)},forEach(d,m){const b=this,r=b.__v_raw,E=Os(r),M=n?k4:e?db:La;return!e&&Qa(E,"iterate",Dp),r.forEach((A,P)=>d.call(m,M(A),M(P),b))}};return ca(s,e?{add:s2("add"),set:s2("set"),delete:s2("delete"),clear:s2("clear")}:{add(d){!n&&!ku(d)&&!Sf(d)&&(d=Os(d));const m=Os(this);return i2(m).has.call(m,d)||(m.add(d),rh(m,"add",d,d)),this},set(d,m){!n&&!ku(m)&&!Sf(m)&&(m=Os(m));const b=Os(this),{has:r,get:E}=i2(b);let M=r.call(b,d);M||(d=Os(d),M=r.call(b,d));const A=E.call(b,d);return b.set(d,m),M?bf(m,A)&&rh(b,"set",d,m):rh(b,"add",d,m),this},delete(d){const m=Os(this),{has:b,get:r}=i2(m);let E=b.call(m,d);E||(d=Os(d),E=b.call(m,d)),r&&r.call(m,d);const M=m.delete(d);return E&&rh(m,"delete",d,void 0),M},clear(){const d=Os(this),m=d.size!==0,b=d.clear();return m&&rh(d,"clear",void 0,void 0),b}}),["keys","values","entries",Symbol.iterator].forEach(d=>{s[d]=eV(d,e,n)}),s}function lS(e,n){const s=tV(e,n);return(l,d,m)=>d==="__v_isReactive"?!e:d==="__v_isReadonly"?e:d==="__v_raw"?l:Reflect.get(Wi(s,d)&&d in l?s:l,d,m)}const nV={get:lS(!1,!1)},rV={get:lS(!1,!0)},iV={get:lS(!0,!1)},CR=new WeakMap,ER=new WeakMap,TR=new WeakMap,sV=new WeakMap;function oV(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function aV(e){return e.__v_skip||!Object.isExtensible(e)?0:oV(R7(e))}function ts(e){return Sf(e)?e:uS(e,!1,X7,nV,CR)}function IR(e){return uS(e,!1,Q7,rV,ER)}function n0(e){return uS(e,!0,J7,iV,TR)}function uS(e,n,s,l,d){if(!Yr(e)||e.__v_raw&&!(n&&e.__v_isReactive))return e;const m=aV(e);if(m===0)return e;const b=d.get(e);if(b)return b;const r=new Proxy(e,m===2?l:s);return d.set(e,r),r}function xg(e){return Sf(e)?xg(e.__v_raw):!!(e&&e.__v_isReactive)}function Sf(e){return!!(e&&e.__v_isReadonly)}function ku(e){return!!(e&&e.__v_isShallow)}function cS(e){return e?!!e.__v_raw:!1}function Os(e){const n=e&&e.__v_raw;return n?Os(n):e}function lh(e){return!Wi(e,"__v_skip")&&Object.isExtensible(e)&&C4(e,"__v_skip",!0),e}const La=e=>Yr(e)?ts(e):e,db=e=>Yr(e)?n0(e):e;function Hs(e){return e?e.__v_isRef===!0:!1}function Re(e){return kR(e,!1)}function Zs(e){return kR(e,!0)}function kR(e,n){return Hs(e)?e:new lV(e,n)}class lV{constructor(n,s){this.dep=new tx,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=s?n:Os(n),this._value=s?n:La(n),this.__v_isShallow=s}get value(){return this.dep.track(),this._value}set value(n){const s=this._rawValue,l=this.__v_isShallow||ku(n)||Sf(n);n=l?n:Os(n),bf(n,s)&&(this._rawValue=n,this._value=l?n:La(n),this.dep.trigger())}}function w(e){return Hs(e)?e.value:e}const uV={get:(e,n,s)=>n==="__v_raw"?e:w(Reflect.get(e,n,s)),set:(e,n,s,l)=>{const d=e[n];return Hs(d)&&!Hs(s)?(d.value=s,!0):Reflect.set(e,n,s,l)}};function MR(e){return xg(e)?e:new Proxy(e,uV)}class cV{constructor(n){this.__v_isRef=!0,this._value=void 0;const s=this.dep=new tx,{get:l,set:d}=n(s.track.bind(s),s.trigger.bind(s));this._get=l,this._set=d}get value(){return this._value=this._get()}set value(n){this._set(n)}}function dV(e){return new cV(e)}function da(e){const n=mn(e)?new Array(e.length):{};for(const s in e)n[s]=AR(e,s);return n}class hV{constructor(n,s,l){this._object=n,this._key=s,this._defaultValue=l,this.__v_isRef=!0,this._value=void 0}get value(){const n=this._object[this._key];return this._value=n===void 0?this._defaultValue:n}set value(n){this._object[this._key]=n}get dep(){return G7(Os(this._object),this._key)}}class fV{constructor(n){this._getter=n,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function cs(e,n,s){return Hs(e)?e:hr(e)?new fV(e):Yr(e)&&arguments.length>1?AR(e,n,s):Re(e)}function AR(e,n,s){const l=e[n];return Hs(l)?l:new hV(e,n,s)}class pV{constructor(n,s,l){this.fn=n,this.setter=s,this._value=void 0,this.dep=new tx(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=xv-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!s,this.isSSR=l}notify(){if(this.flags|=16,!(this.flags&8)&&go!==this)return mR(this,!0),!0}get value(){const n=this.dep.track();return vR(this),n&&(n.version=this.dep.version),this._value}set value(n){this.setter&&this.setter(n)}}function mV(e,n,s=!1){let l,d;return hr(e)?l=e:(l=e.get,d=e.set),new pV(l,d,s)}const o2={},hb=new WeakMap;let Tp;function gV(e,n=!1,s=Tp){if(s){let l=hb.get(s);l||hb.set(s,l=[]),l.push(e)}}function _V(e,n,s=co){const{immediate:l,deep:d,once:m,scheduler:b,augmentJob:r,call:E}=s,M=Y=>d?Y:ku(Y)||d===!1||d===0?ih(Y,1):ih(Y);let A,P,D,z,F=!1,N=!1;if(Hs(e)?(P=()=>e.value,F=ku(e)):xg(e)?(P=()=>M(e),F=!0):mn(e)?(N=!0,F=e.some(Y=>xg(Y)||ku(Y)),P=()=>e.map(Y=>{if(Hs(Y))return Y.value;if(xg(Y))return M(Y);if(hr(Y))return E?E(Y,2):Y()})):hr(e)?n?P=E?()=>E(e,2):e:P=()=>{if(D){dh();try{D()}finally{hh()}}const Y=Tp;Tp=A;try{return E?E(e,3,[z]):e(z)}finally{Tp=Y}}:P=ys,n&&d){const Y=P,J=d===!0?1/0:d;P=()=>ih(Y(),J)}const q=dR(),G=()=>{A.stop(),q&&q.active&&rS(q.effects,A)};if(m&&n){const Y=n;n=(...J)=>{Y(...J),G()}}let ie=N?new Array(e.length).fill(o2):o2;const W=Y=>{if(!(!(A.flags&1)||!A.dirty&&!Y))if(n){const J=A.run();if(d||F||(N?J.some((re,he)=>bf(re,ie[he])):bf(J,ie))){D&&D();const re=Tp;Tp=A;try{const he=[J,ie===o2?void 0:N&&ie[0]===o2?[]:ie,z];ie=J,E?E(n,3,he):n(...he)}finally{Tp=re}}}else A.run()};return r&&r(W),A=new fR(P),A.scheduler=b?()=>b(W,!1):W,z=Y=>gV(Y,!1,A),D=A.onStop=()=>{const Y=hb.get(A);if(Y){if(E)E(Y,4);else for(const J of Y)J();hb.delete(A)}},n?l?W(!0):ie=A.run():b?b(W.bind(null,!0),!0):A.run(),G.pause=A.pause.bind(A),G.resume=A.resume.bind(A),G.stop=G,G}function ih(e,n=1/0,s){if(n<=0||!Yr(e)||e.__v_skip||(s=s||new Set,s.has(e)))return e;if(s.add(e),n--,Hs(e))ih(e.value,n,s);else if(mn(e))for(let l=0;l<e.length;l++)ih(e[l],n,s);else if(Jb(e)||bg(e))e.forEach(l=>{ih(l,n,s)});else if(bv(e)){for(const l in e)ih(e[l],n,s);for(const l of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,l)&&ih(e[l],n,s)}return e}/**
* @vue/runtime-core v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Zv(e,n,s,l){try{return l?e(...l):e()}catch(d){rx(d,n,s)}}function mc(e,n,s,l){if(hr(e)){const d=Zv(e,n,s,l);return d&&yv(d)&&d.catch(m=>{rx(m,n,s)}),d}if(mn(e)){const d=[];for(let m=0;m<e.length;m++)d.push(mc(e[m],n,s,l));return d}}function rx(e,n,s,l=!0){const d=n?n.vnode:null,{errorHandler:m,throwUnhandledErrorInProduction:b}=n&&n.appContext.config||co;if(n){let r=n.parent;const E=n.proxy,M=`https://vuejs.org/error-reference/#runtime-${s}`;for(;r;){const A=r.ec;if(A){for(let P=0;P<A.length;P++)if(A[P](e,E,M)===!1)return}r=r.parent}if(m){dh(),Zv(m,null,10,[e,E,M]),hh();return}}vV(e,s,d,l,b)}function vV(e,n,s,l=!0,d=!1){if(d)throw e;console.error(e)}const vl=[];let dd=-1;const wg=[];let ff=null,dg=0;const RR=Promise.resolve();let fb=null;function dr(e){const n=fb||RR;return e?n.then(this?e.bind(this):e):n}function yV(e){let n=dd+1,s=vl.length;for(;n<s;){const l=n+s>>>1,d=vl[l],m=Sv(d);m<e||m===e&&d.flags&2?n=l+1:s=l}return n}function dS(e){if(!(e.flags&1)){const n=Sv(e),s=vl[vl.length-1];!s||!(e.flags&2)&&n>=Sv(s)?vl.push(e):vl.splice(yV(n),0,e),e.flags|=1,PR()}}function PR(){fb||(fb=RR.then(OR))}function bV(e){mn(e)?wg.push(...e):ff&&e.id===-1?ff.splice(dg+1,0,e):e.flags&1||(wg.push(e),e.flags|=1),PR()}function sk(e,n,s=dd+1){for(;s<vl.length;s++){const l=vl[s];if(l&&l.flags&2){if(e&&l.id!==e.uid)continue;vl.splice(s,1),s--,l.flags&4&&(l.flags&=-2),l(),l.flags&4||(l.flags&=-2)}}}function LR(e){if(wg.length){const n=[...new Set(wg)].sort((s,l)=>Sv(s)-Sv(l));if(wg.length=0,ff){ff.push(...n);return}for(ff=n,dg=0;dg<ff.length;dg++){const s=ff[dg];s.flags&4&&(s.flags&=-2),s.flags&8||s(),s.flags&=-2}ff=null,dg=0}}const Sv=e=>e.id==null?e.flags&2?-1:1/0:e.id;function OR(e){try{for(dd=0;dd<vl.length;dd++){const n=vl[dd];n&&!(n.flags&8)&&(n.flags&4&&(n.flags&=-2),Zv(n,n.i,n.i?15:14),n.flags&4||(n.flags&=-2))}}finally{for(;dd<vl.length;dd++){const n=vl[dd];n&&(n.flags&=-2)}dd=-1,vl.length=0,LR(),fb=null,(vl.length||wg.length)&&OR()}}let Sa=null,DR=null;function pb(e){const n=Sa;return Sa=e,DR=e&&e.type.__scopeId||null,n}function mt(e,n=Sa,s){if(!n||e._n)return e;const l=(...d)=>{l._d&&yk(-1);const m=pb(n);let b;try{b=e(...d)}finally{pb(m),l._d&&yk(1)}return b};return l._n=!0,l._c=!0,l._d=!0,l}function Wr(e,n){if(Sa===null)return e;const s=ux(Sa),l=e.dirs||(e.dirs=[]);for(let d=0;d<n.length;d++){let[m,b,r,E=co]=n[d];m&&(hr(m)&&(m={mounted:m,updated:m}),m.deep&&ih(b),l.push({dir:m,instance:s,value:b,oldValue:void 0,arg:r,modifiers:E}))}return e}function xp(e,n,s,l){const d=e.dirs,m=n&&n.dirs;for(let b=0;b<d.length;b++){const r=d[b];m&&(r.oldValue=m[b].value);let E=r.dir[l];E&&(dh(),mc(E,s,8,[e.el,r,e,n]),hh())}}const zR=Symbol("_vte"),NR=e=>e.__isTeleport,av=e=>e&&(e.disabled||e.disabled===""),ok=e=>e&&(e.defer||e.defer===""),ak=e=>typeof SVGElement<"u"&&e instanceof SVGElement,lk=e=>typeof MathMLElement=="function"&&e instanceof MathMLElement,M4=(e,n)=>{const s=e&&e.to;return ir(s)?n?n(s):null:s},FR={name:"Teleport",__isTeleport:!0,process(e,n,s,l,d,m,b,r,E,M){const{mc:A,pc:P,pbc:D,o:{insert:z,querySelector:F,createText:N,createComment:q}}=M,G=av(n.props);let{shapeFlag:ie,children:W,dynamicChildren:Y}=n;if(e==null){const J=n.el=N(""),re=n.anchor=N("");z(J,s,l),z(re,s,l);const he=(ce,me)=>{ie&16&&(d&&d.isCE&&(d.ce._teleportTarget=ce),A(W,ce,me,d,m,b,r,E))},fe=()=>{const ce=n.target=M4(n.props,F),me=BR(ce,n,N,z);ce&&(b!=="svg"&&ak(ce)?b="svg":b!=="mathml"&&lk(ce)&&(b="mathml"),G||(he(ce,me),P2(n,!1)))};G&&(he(s,re),P2(n,!0)),ok(n.props)?(n.el.__isMounted=!1,_l(()=>{fe(),delete n.el.__isMounted},m)):fe()}else{if(ok(n.props)&&e.el.__isMounted===!1){_l(()=>{FR.process(e,n,s,l,d,m,b,r,E,M)},m);return}n.el=e.el,n.targetStart=e.targetStart;const J=n.anchor=e.anchor,re=n.target=e.target,he=n.targetAnchor=e.targetAnchor,fe=av(e.props),ce=fe?s:re,me=fe?J:he;if(b==="svg"||ak(re)?b="svg":(b==="mathml"||lk(re))&&(b="mathml"),Y?(D(e.dynamicChildren,Y,ce,d,m,b,r),vS(e,n,!0)):E||P(e,n,ce,me,d,m,b,r,!1),G)fe?n.props&&e.props&&n.props.to!==e.props.to&&(n.props.to=e.props.to):a2(n,s,J,M,1);else if((n.props&&n.props.to)!==(e.props&&e.props.to)){const we=n.target=M4(n.props,F);we&&a2(n,we,null,M,0)}else fe&&a2(n,re,he,M,1);P2(n,G)}},remove(e,n,s,{um:l,o:{remove:d}},m){const{shapeFlag:b,children:r,anchor:E,targetStart:M,targetAnchor:A,target:P,props:D}=e;if(P&&(d(M),d(A)),m&&d(E),b&16){const z=m||!av(D);for(let F=0;F<r.length;F++){const N=r[F];l(N,n,s,z,!!N.dynamicChildren)}}},move:a2,hydrate:xV};function a2(e,n,s,{o:{insert:l},m:d},m=2){m===0&&l(e.targetAnchor,n,s);const{el:b,anchor:r,shapeFlag:E,children:M,props:A}=e,P=m===2;if(P&&l(b,n,s),(!P||av(A))&&E&16)for(let D=0;D<M.length;D++)d(M[D],n,s,2);P&&l(r,n,s)}function xV(e,n,s,l,d,m,{o:{nextSibling:b,parentNode:r,querySelector:E,insert:M,createText:A}},P){const D=n.target=M4(n.props,E);if(D){const z=av(n.props),F=D._lpa||D.firstChild;if(n.shapeFlag&16)if(z)n.anchor=P(b(e),n,r(e),s,l,d,m),n.targetStart=F,n.targetAnchor=F&&b(F);else{n.anchor=b(e);let N=F;for(;N;){if(N&&N.nodeType===8){if(N.data==="teleport start anchor")n.targetStart=N;else if(N.data==="teleport anchor"){n.targetAnchor=N,D._lpa=n.targetAnchor&&b(n.targetAnchor);break}}N=b(N)}n.targetAnchor||BR(D,n,A,M),P(F&&b(F),n,D,s,l,d,m)}P2(n,z)}return n.anchor&&b(n.anchor)}const wV=FR;function P2(e,n){const s=e.ctx;if(s&&s.ut){let l,d;for(n?(l=e.el,d=e.anchor):(l=e.targetStart,d=e.targetAnchor);l&&l!==d;)l.nodeType===1&&l.setAttribute("data-v-owner",s.uid),l=l.nextSibling;s.ut()}}function BR(e,n,s,l){const d=n.targetStart=s(""),m=n.targetAnchor=s("");return d[zR]=m,e&&(l(d,e),l(m,e)),m}const pf=Symbol("_leaveCb"),l2=Symbol("_enterCb");function VR(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Zr(()=>{e.isMounted=!0}),Ls(()=>{e.isUnmounting=!0}),e}const wu=[Function,Array],$R={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:wu,onEnter:wu,onAfterEnter:wu,onEnterCancelled:wu,onBeforeLeave:wu,onLeave:wu,onAfterLeave:wu,onLeaveCancelled:wu,onBeforeAppear:wu,onAppear:wu,onAfterAppear:wu,onAppearCancelled:wu},HR=e=>{const n=e.subTree;return n.component?HR(n.component):n},SV={name:"BaseTransition",props:$R,setup(e,{slots:n}){const s=oi(),l=VR();return()=>{const d=n.default&&hS(n.default(),!0);if(!d||!d.length)return;const m=UR(d),b=Os(e),{mode:r}=b;if(l.isLeaving)return V3(m);const E=uk(m);if(!E)return V3(m);let M=Cv(E,b,l,s,P=>M=P);E.type!==Qo&&Vp(E,M);let A=s.subTree&&uk(s.subTree);if(A&&A.type!==Qo&&!Ip(E,A)&&HR(s).type!==Qo){let P=Cv(A,b,l,s);if(Vp(A,P),r==="out-in"&&E.type!==Qo)return l.isLeaving=!0,P.afterLeave=()=>{l.isLeaving=!1,s.job.flags&8||s.update(),delete P.afterLeave,A=void 0},V3(m);r==="in-out"&&E.type!==Qo?P.delayLeave=(D,z,F)=>{const N=jR(l,A);N[String(A.key)]=A,D[pf]=()=>{z(),D[pf]=void 0,delete M.delayedLeave,A=void 0},M.delayedLeave=()=>{F(),delete M.delayedLeave,A=void 0}}:A=void 0}else A&&(A=void 0);return m}}};function UR(e){let n=e[0];if(e.length>1){for(const s of e)if(s.type!==Qo){n=s;break}}return n}const CV=SV;function jR(e,n){const{leavingVNodes:s}=e;let l=s.get(n.type);return l||(l=Object.create(null),s.set(n.type,l)),l}function Cv(e,n,s,l,d){const{appear:m,mode:b,persisted:r=!1,onBeforeEnter:E,onEnter:M,onAfterEnter:A,onEnterCancelled:P,onBeforeLeave:D,onLeave:z,onAfterLeave:F,onLeaveCancelled:N,onBeforeAppear:q,onAppear:G,onAfterAppear:ie,onAppearCancelled:W}=n,Y=String(e.key),J=jR(s,e),re=(ce,me)=>{ce&&mc(ce,l,9,me)},he=(ce,me)=>{const we=me[1];re(ce,me),mn(ce)?ce.every(ye=>ye.length<=1)&&we():ce.length<=1&&we()},fe={mode:b,persisted:r,beforeEnter(ce){let me=E;if(!s.isMounted)if(m)me=q||E;else return;ce[pf]&&ce[pf](!0);const we=J[Y];we&&Ip(e,we)&&we.el[pf]&&we.el[pf](),re(me,[ce])},enter(ce){let me=M,we=A,ye=P;if(!s.isMounted)if(m)me=G||M,we=ie||A,ye=W||P;else return;let Ue=!1;const Ne=ce[l2]=Pe=>{Ue||(Ue=!0,Pe?re(ye,[ce]):re(we,[ce]),fe.delayedLeave&&fe.delayedLeave(),ce[l2]=void 0)};me?he(me,[ce,Ne]):Ne()},leave(ce,me){const we=String(e.key);if(ce[l2]&&ce[l2](!0),s.isUnmounting)return me();re(D,[ce]);let ye=!1;const Ue=ce[pf]=Ne=>{ye||(ye=!0,me(),Ne?re(N,[ce]):re(F,[ce]),ce[pf]=void 0,J[we]===e&&delete J[we])};J[we]=e,z?he(z,[ce,Ue]):Ue()},clone(ce){const me=Cv(ce,n,s,l,d);return d&&d(me),me}};return fe}function V3(e){if(ix(e))return e=fh(e),e.children=null,e}function uk(e){if(!ix(e))return NR(e.type)&&e.children?UR(e.children):e;if(e.component)return e.component.subTree;const{shapeFlag:n,children:s}=e;if(s){if(n&16)return s[0];if(n&32&&hr(s.default))return s.default()}}function Vp(e,n){e.shapeFlag&6&&e.component?(e.transition=n,Vp(e.component.subTree,n)):e.shapeFlag&128?(e.ssContent.transition=n.clone(e.ssContent),e.ssFallback.transition=n.clone(e.ssFallback)):e.transition=n}function hS(e,n=!1,s){let l=[],d=0;for(let m=0;m<e.length;m++){let b=e[m];const r=s==null?b.key:String(s)+String(b.key!=null?b.key:m);b.type===cr?(b.patchFlag&128&&d++,l=l.concat(hS(b.children,n,r))):(n||b.type!==Qo)&&l.push(r!=null?fh(b,{key:r}):b)}if(d>1)for(let m=0;m<l.length;m++)l[m].patchFlag=-2;return l}/*! #__NO_SIDE_EFFECTS__ */function xe(e,n){return hr(e)?ca({name:e.name},n,{setup:e}):e}function GR(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function lv(e,n,s,l,d=!1){if(mn(e)){e.forEach((F,N)=>lv(F,n&&(mn(n)?n[N]:n),s,l,d));return}if(Sg(l)&&!d){l.shapeFlag&512&&l.type.__asyncResolved&&l.component.subTree.component&&lv(e,n,s,l.component.subTree);return}const m=l.shapeFlag&4?ux(l.component):l.el,b=d?null:m,{i:r,r:E}=e,M=n&&n.r,A=r.refs===co?r.refs={}:r.refs,P=r.setupState,D=Os(P),z=P===co?()=>!1:F=>Wi(D,F);if(M!=null&&M!==E&&(ir(M)?(A[M]=null,z(M)&&(P[M]=null)):Hs(M)&&(M.value=null)),hr(E))Zv(E,r,12,[b,A]);else{const F=ir(E),N=Hs(E);if(F||N){const q=()=>{if(e.f){const G=F?z(E)?P[E]:A[E]:E.value;d?mn(G)&&rS(G,m):mn(G)?G.includes(m)||G.push(m):F?(A[E]=[m],z(E)&&(P[E]=A[E])):(E.value=[m],e.k&&(A[e.k]=E.value))}else F?(A[E]=b,z(E)&&(P[E]=b)):N&&(E.value=b,e.k&&(A[e.k]=b))};b?(q.id=-1,_l(q,s)):q()}}}ex().requestIdleCallback;ex().cancelIdleCallback;const Sg=e=>!!e.type.__asyncLoader,ix=e=>e.type.__isKeepAlive;function fS(e,n){WR(e,"a",n)}function qR(e,n){WR(e,"da",n)}function WR(e,n,s=Oa){const l=e.__wdc||(e.__wdc=()=>{let d=s;for(;d;){if(d.isDeactivated)return;d=d.parent}return e()});if(sx(n,l,s),s){let d=s.parent;for(;d&&d.parent;)ix(d.parent.vnode)&&EV(l,n,s,d),d=d.parent}}function EV(e,n,s,l){const d=sx(n,e,l,!0);Mf(()=>{rS(l[n],d)},s)}function sx(e,n,s=Oa,l=!1){if(s){const d=s[e]||(s[e]=[]),m=n.__weh||(n.__weh=(...b)=>{dh();const r=Xv(s),E=mc(n,s,e,b);return r(),hh(),E});return l?d.unshift(m):d.push(m),m}}const xh=e=>(n,s=Oa)=>{(!Tv||e==="sp")&&sx(e,(...l)=>n(...l),s)},ox=xh("bm"),Zr=xh("m"),KR=xh("bu"),yc=xh("u"),Ls=xh("bum"),Mf=xh("um"),TV=xh("sp"),IV=xh("rtg"),kV=xh("rtc");function MV(e,n=Oa){sx("ec",e,n)}const pS="components",AV="directives";function fi(e,n){return mS(pS,e,!0,n)||e}const YR=Symbol.for("v-ndc");function si(e){return ir(e)?mS(pS,e,!1)||e:e||YR}function ax(e){return mS(AV,e)}function mS(e,n,s=!0,l=!1){const d=Sa||Oa;if(d){const m=d.type;if(e===pS){const r=p$(m,!1);if(r&&(r===n||r===wl(n)||r===Yv(wl(n))))return m}const b=ck(d[e]||m[e],n)||ck(d.appContext[e],n);return!b&&l?m:b}}function ck(e,n){return e&&(e[n]||e[wl(n)]||e[Yv(wl(n))])}function Ei(e,n,s,l){let d;const m=s,b=mn(e);if(b||ir(e)){const r=b&&xg(e);let E=!1,M=!1;r&&(E=!ku(e),M=Sf(e),e=nx(e)),d=new Array(e.length);for(let A=0,P=e.length;A<P;A++)d[A]=n(E?M?db(La(e[A])):La(e[A]):e[A],A,void 0,m)}else if(typeof e=="number"){d=new Array(e);for(let r=0;r<e;r++)d[r]=n(r+1,r,void 0,m)}else if(Yr(e))if(e[Symbol.iterator])d=Array.from(e,(r,E)=>n(r,E,void 0,m));else{const r=Object.keys(e);d=new Array(r.length);for(let E=0,M=r.length;E<M;E++){const A=r[E];d[E]=n(e[A],A,E,m)}}else d=[];return d}function cu(e,n){for(let s=0;s<n.length;s++){const l=n[s];if(mn(l))for(let d=0;d<l.length;d++)e[l[d].name]=l[d].fn;else l&&(e[l.name]=l.key?(...d)=>{const m=l.fn(...d);return m&&(m.key=l.key),m}:l.fn)}return e}function It(e,n,s={},l,d){if(Sa.ce||Sa.parent&&Sg(Sa.parent)&&Sa.parent.ce)return n!=="default"&&(s.name=n),Z(),Bt(cr,null,[st("slot",s,l&&l())],64);let m=e[n];m&&m._c&&(m._d=!1),Z();const b=m&&ZR(m(s)),r=s.key||b&&b.key,E=Bt(cr,{key:(r&&!pc(r)?r:`_${n}`)+(!b&&l?"_fb":"")},b||(l?l():[]),b&&e._===1?64:-2);return E.scopeId&&(E.slotScopeIds=[E.scopeId+"-s"]),m&&m._c&&(m._d=!0),E}function ZR(e){return e.some(n=>qs(n)?!(n.type===Qo||n.type===cr&&!ZR(n.children)):!0)?e:null}function RV(e,n){const s={};for(const l in e)s[iv(l)]=e[l];return s}const A4=e=>e?mP(e)?ux(e):A4(e.parent):null,uv=ca(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>A4(e.parent),$root:e=>A4(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>QR(e),$forceUpdate:e=>e.f||(e.f=()=>{dS(e.update)}),$nextTick:e=>e.n||(e.n=dr.bind(e.proxy)),$watch:e=>JV.bind(e)}),$3=(e,n)=>e!==co&&!e.__isScriptSetup&&Wi(e,n),PV={get({_:e},n){if(n==="__v_skip")return!0;const{ctx:s,setupState:l,data:d,props:m,accessCache:b,type:r,appContext:E}=e;let M;if(n[0]!=="$"){const z=b[n];if(z!==void 0)switch(z){case 1:return l[n];case 2:return d[n];case 4:return s[n];case 3:return m[n]}else{if($3(l,n))return b[n]=1,l[n];if(d!==co&&Wi(d,n))return b[n]=2,d[n];if((M=e.propsOptions[0])&&Wi(M,n))return b[n]=3,m[n];if(s!==co&&Wi(s,n))return b[n]=4,s[n];R4&&(b[n]=0)}}const A=uv[n];let P,D;if(A)return n==="$attrs"&&Qa(e.attrs,"get",""),A(e);if((P=r.__cssModules)&&(P=P[n]))return P;if(s!==co&&Wi(s,n))return b[n]=4,s[n];if(D=E.config.globalProperties,Wi(D,n))return D[n]},set({_:e},n,s){const{data:l,setupState:d,ctx:m}=e;return $3(d,n)?(d[n]=s,!0):l!==co&&Wi(l,n)?(l[n]=s,!0):Wi(e.props,n)||n[0]==="$"&&n.slice(1)in e?!1:(m[n]=s,!0)},has({_:{data:e,setupState:n,accessCache:s,ctx:l,appContext:d,propsOptions:m}},b){let r;return!!s[b]||e!==co&&Wi(e,b)||$3(n,b)||(r=m[0])&&Wi(r,b)||Wi(l,b)||Wi(uv,b)||Wi(d.config.globalProperties,b)},defineProperty(e,n,s){return s.get!=null?e._.accessCache[n]=0:Wi(s,"value")&&this.set(e,n,s.value,null),Reflect.defineProperty(e,n,s)}};function qo(){return XR().slots}function wh(){return XR().attrs}function XR(){const e=oi();return e.setupContext||(e.setupContext=_P(e))}function dk(e){return mn(e)?e.reduce((n,s)=>(n[s]=null,n),{}):e}let R4=!0;function LV(e){const n=QR(e),s=e.proxy,l=e.ctx;R4=!1,n.beforeCreate&&hk(n.beforeCreate,e,"bc");const{data:d,computed:m,methods:b,watch:r,provide:E,inject:M,created:A,beforeMount:P,mounted:D,beforeUpdate:z,updated:F,activated:N,deactivated:q,beforeDestroy:G,beforeUnmount:ie,destroyed:W,unmounted:Y,render:J,renderTracked:re,renderTriggered:he,errorCaptured:fe,serverPrefetch:ce,expose:me,inheritAttrs:we,components:ye,directives:Ue,filters:Ne}=n;if(M&&OV(M,l,null),b)for(const $e in b){const Te=b[$e];hr(Te)&&(l[$e]=Te.bind(s))}if(d){const $e=d.call(s,s);Yr($e)&&(e.data=ts($e))}if(R4=!0,m)for(const $e in m){const Te=m[$e],Ae=hr(Te)?Te.bind(s,s):hr(Te.get)?Te.get.bind(s,s):ys,Ve=!hr(Te)&&hr(Te.set)?Te.set.bind(s):ys,We=se({get:Ae,set:Ve});Object.defineProperty(l,$e,{enumerable:!0,configurable:!0,get:()=>We.value,set:ft=>We.value=ft})}if(r)for(const $e in r)JR(r[$e],l,s,$e);if(E){const $e=hr(E)?E.call(s):E;Reflect.ownKeys($e).forEach(Te=>{Ti(Te,$e[Te])})}A&&hk(A,e,"c");function ve($e,Te){mn(Te)?Te.forEach(Ae=>$e(Ae.bind(s))):Te&&$e(Te.bind(s))}if(ve(ox,P),ve(Zr,D),ve(KR,z),ve(yc,F),ve(fS,N),ve(qR,q),ve(MV,fe),ve(kV,re),ve(IV,he),ve(Ls,ie),ve(Mf,Y),ve(TV,ce),mn(me))if(me.length){const $e=e.exposed||(e.exposed={});me.forEach(Te=>{Object.defineProperty($e,Te,{get:()=>s[Te],set:Ae=>s[Te]=Ae})})}else e.exposed||(e.exposed={});J&&e.render===ys&&(e.render=J),we!=null&&(e.inheritAttrs=we),ye&&(e.components=ye),Ue&&(e.directives=Ue),ce&&GR(e)}function OV(e,n,s=ys){mn(e)&&(e=P4(e));for(const l in e){const d=e[l];let m;Yr(d)?"default"in d?m=Gn(d.from||l,d.default,!0):m=Gn(d.from||l):m=Gn(d),Hs(m)?Object.defineProperty(n,l,{enumerable:!0,configurable:!0,get:()=>m.value,set:b=>m.value=b}):n[l]=m}}function hk(e,n,s){mc(mn(e)?e.map(l=>l.bind(n.proxy)):e.bind(n.proxy),n,s)}function JR(e,n,s,l){let d=l.includes(".")?cP(s,l):()=>s[l];if(ir(e)){const m=n[e];hr(m)&&on(d,m)}else if(hr(e))on(d,e.bind(s));else if(Yr(e))if(mn(e))e.forEach(m=>JR(m,n,s,l));else{const m=hr(e.handler)?e.handler.bind(s):n[e.handler];hr(m)&&on(d,m,e)}}function QR(e){const n=e.type,{mixins:s,extends:l}=n,{mixins:d,optionsCache:m,config:{optionMergeStrategies:b}}=e.appContext,r=m.get(n);let E;return r?E=r:!d.length&&!s&&!l?E=n:(E={},d.length&&d.forEach(M=>mb(E,M,b,!0)),mb(E,n,b)),Yr(n)&&m.set(n,E),E}function mb(e,n,s,l=!1){const{mixins:d,extends:m}=n;m&&mb(e,m,s,!0),d&&d.forEach(b=>mb(e,b,s,!0));for(const b in n)if(!(l&&b==="expose")){const r=DV[b]||s&&s[b];e[b]=r?r(e[b],n[b]):n[b]}return e}const DV={data:fk,props:pk,emits:pk,methods:Z_,computed:Z_,beforeCreate:ml,created:ml,beforeMount:ml,mounted:ml,beforeUpdate:ml,updated:ml,beforeDestroy:ml,beforeUnmount:ml,destroyed:ml,unmounted:ml,activated:ml,deactivated:ml,errorCaptured:ml,serverPrefetch:ml,components:Z_,directives:Z_,watch:NV,provide:fk,inject:zV};function fk(e,n){return n?e?function(){return ca(hr(e)?e.call(this,this):e,hr(n)?n.call(this,this):n)}:n:e}function zV(e,n){return Z_(P4(e),P4(n))}function P4(e){if(mn(e)){const n={};for(let s=0;s<e.length;s++)n[e[s]]=e[s];return n}return e}function ml(e,n){return e?[...new Set([].concat(e,n))]:n}function Z_(e,n){return e?ca(Object.create(null),e,n):n}function pk(e,n){return e?mn(e)&&mn(n)?[...new Set([...e,...n])]:ca(Object.create(null),dk(e),dk(n??{})):n}function NV(e,n){if(!e)return n;if(!n)return e;const s=ca(Object.create(null),e);for(const l in n)s[l]=ml(e[l],n[l]);return s}function eP(){return{app:null,config:{isNativeTag:M7,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let FV=0;function BV(e,n){return function(l,d=null){hr(l)||(l=ca({},l)),d!=null&&!Yr(d)&&(d=null);const m=eP(),b=new WeakSet,r=[];let E=!1;const M=m.app={_uid:FV++,_component:l,_props:d,_container:null,_context:m,_instance:null,version:g$,get config(){return m.config},set config(A){},use(A,...P){return b.has(A)||(A&&hr(A.install)?(b.add(A),A.install(M,...P)):hr(A)&&(b.add(A),A(M,...P))),M},mixin(A){return m.mixins.includes(A)||m.mixins.push(A),M},component(A,P){return P?(m.components[A]=P,M):m.components[A]},directive(A,P){return P?(m.directives[A]=P,M):m.directives[A]},mount(A,P,D){if(!E){const z=M._ceVNode||st(l,d);return z.appContext=m,D===!0?D="svg":D===!1&&(D=void 0),e(z,A,D),E=!0,M._container=A,A.__vue_app__=M,ux(z.component)}},onUnmount(A){r.push(A)},unmount(){E&&(mc(r,M._instance,16),e(null,M._container),delete M._container.__vue_app__)},provide(A,P){return m.provides[A]=P,M},runWithContext(A){const P=Cg;Cg=M;try{return A()}finally{Cg=P}}};return M}}let Cg=null;function Ti(e,n){if(Oa){let s=Oa.provides;const l=Oa.parent&&Oa.parent.provides;l===s&&(s=Oa.provides=Object.create(l)),s[e]=n}}function Gn(e,n,s=!1){const l=Oa||Sa;if(l||Cg){let d=Cg?Cg._context.provides:l?l.parent==null||l.ce?l.vnode.appContext&&l.vnode.appContext.provides:l.parent.provides:void 0;if(d&&e in d)return d[e];if(arguments.length>1)return s&&hr(n)?n.call(l&&l.proxy):n}}const tP={},nP=()=>Object.create(tP),rP=e=>Object.getPrototypeOf(e)===tP;function VV(e,n,s,l=!1){const d={},m=nP();e.propsDefaults=Object.create(null),iP(e,n,d,m);for(const b in e.propsOptions[0])b in d||(d[b]=void 0);s?e.props=l?d:IR(d):e.type.props?e.props=d:e.props=m,e.attrs=m}function $V(e,n,s,l){const{props:d,attrs:m,vnode:{patchFlag:b}}=e,r=Os(d),[E]=e.propsOptions;let M=!1;if((l||b>0)&&!(b&16)){if(b&8){const A=e.vnode.dynamicProps;for(let P=0;P<A.length;P++){let D=A[P];if(lx(e.emitsOptions,D))continue;const z=n[D];if(E)if(Wi(m,D))z!==m[D]&&(m[D]=z,M=!0);else{const F=wl(D);d[F]=L4(E,r,F,z,e,!1)}else z!==m[D]&&(m[D]=z,M=!0)}}}else{iP(e,n,d,m)&&(M=!0);let A;for(const P in r)(!n||!Wi(n,P)&&((A=bh(P))===P||!Wi(n,A)))&&(E?s&&(s[P]!==void 0||s[A]!==void 0)&&(d[P]=L4(E,r,P,void 0,e,!0)):delete d[P]);if(m!==r)for(const P in m)(!n||!Wi(n,P))&&(delete m[P],M=!0)}M&&rh(e.attrs,"set","")}function iP(e,n,s,l){const[d,m]=e.propsOptions;let b=!1,r;if(n)for(let E in n){if(rv(E))continue;const M=n[E];let A;d&&Wi(d,A=wl(E))?!m||!m.includes(A)?s[A]=M:(r||(r={}))[A]=M:lx(e.emitsOptions,E)||(!(E in l)||M!==l[E])&&(l[E]=M,b=!0)}if(m){const E=Os(s),M=r||co;for(let A=0;A<m.length;A++){const P=m[A];s[P]=L4(d,E,P,M[P],e,!Wi(M,P))}}return b}function L4(e,n,s,l,d,m){const b=e[s];if(b!=null){const r=Wi(b,"default");if(r&&l===void 0){const E=b.default;if(b.type!==Function&&!b.skipFactory&&hr(E)){const{propsDefaults:M}=d;if(s in M)l=M[s];else{const A=Xv(d);l=M[s]=E.call(null,n),A()}}else l=E;d.ce&&d.ce._setProp(s,l)}b[0]&&(m&&!r?l=!1:b[1]&&(l===""||l===bh(s))&&(l=!0))}return l}const HV=new WeakMap;function sP(e,n,s=!1){const l=s?HV:n.propsCache,d=l.get(e);if(d)return d;const m=e.props,b={},r=[];let E=!1;if(!hr(e)){const A=P=>{E=!0;const[D,z]=sP(P,n,!0);ca(b,D),z&&r.push(...z)};!s&&n.mixins.length&&n.mixins.forEach(A),e.extends&&A(e.extends),e.mixins&&e.mixins.forEach(A)}if(!m&&!E)return Yr(e)&&l.set(e,yg),yg;if(mn(m))for(let A=0;A<m.length;A++){const P=wl(m[A]);mk(P)&&(b[P]=co)}else if(m)for(const A in m){const P=wl(A);if(mk(P)){const D=m[A],z=b[P]=mn(D)||hr(D)?{type:D}:ca({},D),F=z.type;let N=!1,q=!0;if(mn(F))for(let G=0;G<F.length;++G){const ie=F[G],W=hr(ie)&&ie.name;if(W==="Boolean"){N=!0;break}else W==="String"&&(q=!1)}else N=hr(F)&&F.name==="Boolean";z[0]=N,z[1]=q,(N||Wi(z,"default"))&&r.push(P)}}const M=[b,r];return Yr(e)&&l.set(e,M),M}function mk(e){return e[0]!=="$"&&!rv(e)}const gS=e=>e[0]==="_"||e==="$stable",_S=e=>mn(e)?e.map(hd):[hd(e)],UV=(e,n,s)=>{if(n._n)return n;const l=mt((...d)=>_S(n(...d)),s);return l._c=!1,l},oP=(e,n,s)=>{const l=e._ctx;for(const d in e){if(gS(d))continue;const m=e[d];if(hr(m))n[d]=UV(d,m,l);else if(m!=null){const b=_S(m);n[d]=()=>b}}},aP=(e,n)=>{const s=_S(n);e.slots.default=()=>s},lP=(e,n,s)=>{for(const l in n)(s||!gS(l))&&(e[l]=n[l])},jV=(e,n,s)=>{const l=e.slots=nP();if(e.vnode.shapeFlag&32){const d=n.__;d&&C4(l,"__",d,!0);const m=n._;m?(lP(l,n,s),s&&C4(l,"_",m,!0)):oP(n,l)}else n&&aP(e,n)},GV=(e,n,s)=>{const{vnode:l,slots:d}=e;let m=!0,b=co;if(l.shapeFlag&32){const r=n._;r?s&&r===1?m=!1:lP(d,n,s):(m=!n.$stable,oP(n,d)),b=n}else n&&(aP(e,n),b={default:1});if(m)for(const r in d)!gS(r)&&b[r]==null&&delete d[r]},_l=s$;function qV(e){return WV(e)}function WV(e,n){const s=ex();s.__VUE__=!0;const{insert:l,remove:d,patchProp:m,createElement:b,createText:r,createComment:E,setText:M,setElementText:A,parentNode:P,nextSibling:D,setScopeId:z=ys,insertStaticContent:F}=e,N=(le,nt,Gt,an=null,Qt=null,Zt=null,rn=void 0,bt=null,fn=!!nt.dynamicChildren)=>{if(le===nt)return;le&&!Ip(le,nt)&&(an=gt(le),ft(le,Qt,Zt,!0),le=null),nt.patchFlag===-2&&(fn=!1,nt.dynamicChildren=null);const{type:pn,ref:Vn,shapeFlag:Nn}=nt;switch(pn){case r0:q(le,nt,Gt,an);break;case Qo:G(le,nt,Gt,an);break;case U3:le==null&&ie(nt,Gt,an,rn);break;case cr:ye(le,nt,Gt,an,Qt,Zt,rn,bt,fn);break;default:Nn&1?J(le,nt,Gt,an,Qt,Zt,rn,bt,fn):Nn&6?Ue(le,nt,Gt,an,Qt,Zt,rn,bt,fn):(Nn&64||Nn&128)&&pn.process(le,nt,Gt,an,Qt,Zt,rn,bt,fn,xn)}Vn!=null&&Qt?lv(Vn,le&&le.ref,Zt,nt||le,!nt):Vn==null&&le&&le.ref!=null&&lv(le.ref,null,Zt,le,!0)},q=(le,nt,Gt,an)=>{if(le==null)l(nt.el=r(nt.children),Gt,an);else{const Qt=nt.el=le.el;nt.children!==le.children&&M(Qt,nt.children)}},G=(le,nt,Gt,an)=>{le==null?l(nt.el=E(nt.children||""),Gt,an):nt.el=le.el},ie=(le,nt,Gt,an)=>{[le.el,le.anchor]=F(le.children,nt,Gt,an,le.el,le.anchor)},W=({el:le,anchor:nt},Gt,an)=>{let Qt;for(;le&&le!==nt;)Qt=D(le),l(le,Gt,an),le=Qt;l(nt,Gt,an)},Y=({el:le,anchor:nt})=>{let Gt;for(;le&&le!==nt;)Gt=D(le),d(le),le=Gt;d(nt)},J=(le,nt,Gt,an,Qt,Zt,rn,bt,fn)=>{nt.type==="svg"?rn="svg":nt.type==="math"&&(rn="mathml"),le==null?re(nt,Gt,an,Qt,Zt,rn,bt,fn):ce(le,nt,Qt,Zt,rn,bt,fn)},re=(le,nt,Gt,an,Qt,Zt,rn,bt)=>{let fn,pn;const{props:Vn,shapeFlag:Nn,transition:Ot,dirs:Bn}=le;if(fn=le.el=b(le.type,Zt,Vn&&Vn.is,Vn),Nn&8?A(fn,le.children):Nn&16&&fe(le.children,fn,null,an,Qt,H3(le,Zt),rn,bt),Bn&&xp(le,null,an,"created"),he(fn,le,le.scopeId,rn,an),Vn){for(const Ur in Vn)Ur!=="value"&&!rv(Ur)&&m(fn,Ur,null,Vn[Ur],Zt,an);"value"in Vn&&m(fn,"value",null,Vn.value,Zt),(pn=Vn.onVnodeBeforeMount)&&ud(pn,an,le)}Bn&&xp(le,null,an,"beforeMount");const Sr=KV(Qt,Ot);Sr&&Ot.beforeEnter(fn),l(fn,nt,Gt),((pn=Vn&&Vn.onVnodeMounted)||Sr||Bn)&&_l(()=>{pn&&ud(pn,an,le),Sr&&Ot.enter(fn),Bn&&xp(le,null,an,"mounted")},Qt)},he=(le,nt,Gt,an,Qt)=>{if(Gt&&z(le,Gt),an)for(let Zt=0;Zt<an.length;Zt++)z(le,an[Zt]);if(Qt){let Zt=Qt.subTree;if(nt===Zt||hP(Zt.type)&&(Zt.ssContent===nt||Zt.ssFallback===nt)){const rn=Qt.vnode;he(le,rn,rn.scopeId,rn.slotScopeIds,Qt.parent)}}},fe=(le,nt,Gt,an,Qt,Zt,rn,bt,fn=0)=>{for(let pn=fn;pn<le.length;pn++){const Vn=le[pn]=bt?mf(le[pn]):hd(le[pn]);N(null,Vn,nt,Gt,an,Qt,Zt,rn,bt)}},ce=(le,nt,Gt,an,Qt,Zt,rn)=>{const bt=nt.el=le.el;let{patchFlag:fn,dynamicChildren:pn,dirs:Vn}=nt;fn|=le.patchFlag&16;const Nn=le.props||co,Ot=nt.props||co;let Bn;if(Gt&&wp(Gt,!1),(Bn=Ot.onVnodeBeforeUpdate)&&ud(Bn,Gt,nt,le),Vn&&xp(nt,le,Gt,"beforeUpdate"),Gt&&wp(Gt,!0),(Nn.innerHTML&&Ot.innerHTML==null||Nn.textContent&&Ot.textContent==null)&&A(bt,""),pn?me(le.dynamicChildren,pn,bt,Gt,an,H3(nt,Qt),Zt):rn||Te(le,nt,bt,null,Gt,an,H3(nt,Qt),Zt,!1),fn>0){if(fn&16)we(bt,Nn,Ot,Gt,Qt);else if(fn&2&&Nn.class!==Ot.class&&m(bt,"class",null,Ot.class,Qt),fn&4&&m(bt,"style",Nn.style,Ot.style,Qt),fn&8){const Sr=nt.dynamicProps;for(let Ur=0;Ur<Sr.length;Ur++){const Kn=Sr[Ur],ui=Nn[Kn],wr=Ot[Kn];(wr!==ui||Kn==="value")&&m(bt,Kn,ui,wr,Qt,Gt)}}fn&1&&le.children!==nt.children&&A(bt,nt.children)}else!rn&&pn==null&&we(bt,Nn,Ot,Gt,Qt);((Bn=Ot.onVnodeUpdated)||Vn)&&_l(()=>{Bn&&ud(Bn,Gt,nt,le),Vn&&xp(nt,le,Gt,"updated")},an)},me=(le,nt,Gt,an,Qt,Zt,rn)=>{for(let bt=0;bt<nt.length;bt++){const fn=le[bt],pn=nt[bt],Vn=fn.el&&(fn.type===cr||!Ip(fn,pn)||fn.shapeFlag&198)?P(fn.el):Gt;N(fn,pn,Vn,null,an,Qt,Zt,rn,!0)}},we=(le,nt,Gt,an,Qt)=>{if(nt!==Gt){if(nt!==co)for(const Zt in nt)!rv(Zt)&&!(Zt in Gt)&&m(le,Zt,nt[Zt],null,Qt,an);for(const Zt in Gt){if(rv(Zt))continue;const rn=Gt[Zt],bt=nt[Zt];rn!==bt&&Zt!=="value"&&m(le,Zt,bt,rn,Qt,an)}"value"in Gt&&m(le,"value",nt.value,Gt.value,Qt)}},ye=(le,nt,Gt,an,Qt,Zt,rn,bt,fn)=>{const pn=nt.el=le?le.el:r(""),Vn=nt.anchor=le?le.anchor:r("");let{patchFlag:Nn,dynamicChildren:Ot,slotScopeIds:Bn}=nt;Bn&&(bt=bt?bt.concat(Bn):Bn),le==null?(l(pn,Gt,an),l(Vn,Gt,an),fe(nt.children||[],Gt,Vn,Qt,Zt,rn,bt,fn)):Nn>0&&Nn&64&&Ot&&le.dynamicChildren?(me(le.dynamicChildren,Ot,Gt,Qt,Zt,rn,bt),(nt.key!=null||Qt&&nt===Qt.subTree)&&vS(le,nt,!0)):Te(le,nt,Gt,Vn,Qt,Zt,rn,bt,fn)},Ue=(le,nt,Gt,an,Qt,Zt,rn,bt,fn)=>{nt.slotScopeIds=bt,le==null?nt.shapeFlag&512?Qt.ctx.activate(nt,Gt,an,rn,fn):Ne(nt,Gt,an,Qt,Zt,rn,fn):Pe(le,nt,fn)},Ne=(le,nt,Gt,an,Qt,Zt,rn)=>{const bt=le.component=c$(le,an,Qt);if(ix(le)&&(bt.ctx.renderer=xn),d$(bt,!1,rn),bt.asyncDep){if(Qt&&Qt.registerDep(bt,ve,rn),!le.el){const fn=bt.subTree=st(Qo);G(null,fn,nt,Gt)}}else ve(bt,le,nt,Gt,Qt,Zt,rn)},Pe=(le,nt,Gt)=>{const an=nt.component=le.component;if(r$(le,nt,Gt))if(an.asyncDep&&!an.asyncResolved){$e(an,nt,Gt);return}else an.next=nt,an.update();else nt.el=le.el,an.vnode=nt},ve=(le,nt,Gt,an,Qt,Zt,rn)=>{const bt=()=>{if(le.isMounted){let{next:Nn,bu:Ot,u:Bn,parent:Sr,vnode:Ur}=le;{const pr=uP(le);if(pr){Nn&&(Nn.el=Ur.el,$e(le,Nn,rn)),pr.asyncDep.then(()=>{le.isUnmounted||bt()});return}}let Kn=Nn,ui;wp(le,!1),Nn?(Nn.el=Ur.el,$e(le,Nn,rn)):Nn=Ur,Ot&&R2(Ot),(ui=Nn.props&&Nn.props.onVnodeBeforeUpdate)&&ud(ui,Sr,Nn,Ur),wp(le,!0);const wr=_k(le),Tr=le.subTree;le.subTree=wr,N(Tr,wr,P(Tr.el),gt(Tr),le,Qt,Zt),Nn.el=wr.el,Kn===null&&i$(le,wr.el),Bn&&_l(Bn,Qt),(ui=Nn.props&&Nn.props.onVnodeUpdated)&&_l(()=>ud(ui,Sr,Nn,Ur),Qt)}else{let Nn;const{el:Ot,props:Bn}=nt,{bm:Sr,m:Ur,parent:Kn,root:ui,type:wr}=le,Tr=Sg(nt);wp(le,!1),Sr&&R2(Sr),!Tr&&(Nn=Bn&&Bn.onVnodeBeforeMount)&&ud(Nn,Kn,nt),wp(le,!0);{ui.ce&&ui.ce._def.shadowRoot!==!1&&ui.ce._injectChildStyle(wr);const pr=le.subTree=_k(le);N(null,pr,Gt,an,le,Qt,Zt),nt.el=pr.el}if(Ur&&_l(Ur,Qt),!Tr&&(Nn=Bn&&Bn.onVnodeMounted)){const pr=nt;_l(()=>ud(Nn,Kn,pr),Qt)}(nt.shapeFlag&256||Kn&&Sg(Kn.vnode)&&Kn.vnode.shapeFlag&256)&&le.a&&_l(le.a,Qt),le.isMounted=!0,nt=Gt=an=null}};le.scope.on();const fn=le.effect=new fR(bt);le.scope.off();const pn=le.update=fn.run.bind(fn),Vn=le.job=fn.runIfDirty.bind(fn);Vn.i=le,Vn.id=le.uid,fn.scheduler=()=>dS(Vn),wp(le,!0),pn()},$e=(le,nt,Gt)=>{nt.component=le;const an=le.vnode.props;le.vnode=nt,le.next=null,$V(le,nt.props,an,Gt),GV(le,nt.children,Gt),dh(),sk(le),hh()},Te=(le,nt,Gt,an,Qt,Zt,rn,bt,fn=!1)=>{const pn=le&&le.children,Vn=le?le.shapeFlag:0,Nn=nt.children,{patchFlag:Ot,shapeFlag:Bn}=nt;if(Ot>0){if(Ot&128){Ve(pn,Nn,Gt,an,Qt,Zt,rn,bt,fn);return}else if(Ot&256){Ae(pn,Nn,Gt,an,Qt,Zt,rn,bt,fn);return}}Bn&8?(Vn&16&&Ct(pn,Qt,Zt),Nn!==pn&&A(Gt,Nn)):Vn&16?Bn&16?Ve(pn,Nn,Gt,an,Qt,Zt,rn,bt,fn):Ct(pn,Qt,Zt,!0):(Vn&8&&A(Gt,""),Bn&16&&fe(Nn,Gt,an,Qt,Zt,rn,bt,fn))},Ae=(le,nt,Gt,an,Qt,Zt,rn,bt,fn)=>{le=le||yg,nt=nt||yg;const pn=le.length,Vn=nt.length,Nn=Math.min(pn,Vn);let Ot;for(Ot=0;Ot<Nn;Ot++){const Bn=nt[Ot]=fn?mf(nt[Ot]):hd(nt[Ot]);N(le[Ot],Bn,Gt,null,Qt,Zt,rn,bt,fn)}pn>Vn?Ct(le,Qt,Zt,!0,!1,Nn):fe(nt,Gt,an,Qt,Zt,rn,bt,fn,Nn)},Ve=(le,nt,Gt,an,Qt,Zt,rn,bt,fn)=>{let pn=0;const Vn=nt.length;let Nn=le.length-1,Ot=Vn-1;for(;pn<=Nn&&pn<=Ot;){const Bn=le[pn],Sr=nt[pn]=fn?mf(nt[pn]):hd(nt[pn]);if(Ip(Bn,Sr))N(Bn,Sr,Gt,null,Qt,Zt,rn,bt,fn);else break;pn++}for(;pn<=Nn&&pn<=Ot;){const Bn=le[Nn],Sr=nt[Ot]=fn?mf(nt[Ot]):hd(nt[Ot]);if(Ip(Bn,Sr))N(Bn,Sr,Gt,null,Qt,Zt,rn,bt,fn);else break;Nn--,Ot--}if(pn>Nn){if(pn<=Ot){const Bn=Ot+1,Sr=Bn<Vn?nt[Bn].el:an;for(;pn<=Ot;)N(null,nt[pn]=fn?mf(nt[pn]):hd(nt[pn]),Gt,Sr,Qt,Zt,rn,bt,fn),pn++}}else if(pn>Ot)for(;pn<=Nn;)ft(le[pn],Qt,Zt,!0),pn++;else{const Bn=pn,Sr=pn,Ur=new Map;for(pn=Sr;pn<=Ot;pn++){const yt=nt[pn]=fn?mf(nt[pn]):hd(nt[pn]);yt.key!=null&&Ur.set(yt.key,pn)}let Kn,ui=0;const wr=Ot-Sr+1;let Tr=!1,pr=0;const Fr=new Array(wr);for(pn=0;pn<wr;pn++)Fr[pn]=0;for(pn=Bn;pn<=Nn;pn++){const yt=le[pn];if(ui>=wr){ft(yt,Qt,Zt,!0);continue}let it;if(yt.key!=null)it=Ur.get(yt.key);else for(Kn=Sr;Kn<=Ot;Kn++)if(Fr[Kn-Sr]===0&&Ip(yt,nt[Kn])){it=Kn;break}it===void 0?ft(yt,Qt,Zt,!0):(Fr[it-Sr]=pn+1,it>=pr?pr=it:Tr=!0,N(yt,nt[it],Gt,null,Qt,Zt,rn,bt,fn),ui++)}const vt=Tr?YV(Fr):yg;for(Kn=vt.length-1,pn=wr-1;pn>=0;pn--){const yt=Sr+pn,it=nt[yt],ln=yt+1<Vn?nt[yt+1].el:an;Fr[pn]===0?N(null,it,Gt,ln,Qt,Zt,rn,bt,fn):Tr&&(Kn<0||pn!==vt[Kn]?We(it,Gt,ln,2):Kn--)}}},We=(le,nt,Gt,an,Qt=null)=>{const{el:Zt,type:rn,transition:bt,children:fn,shapeFlag:pn}=le;if(pn&6){We(le.component.subTree,nt,Gt,an);return}if(pn&128){le.suspense.move(nt,Gt,an);return}if(pn&64){rn.move(le,nt,Gt,xn);return}if(rn===cr){l(Zt,nt,Gt);for(let Nn=0;Nn<fn.length;Nn++)We(fn[Nn],nt,Gt,an);l(le.anchor,nt,Gt);return}if(rn===U3){W(le,nt,Gt);return}if(an!==2&&pn&1&&bt)if(an===0)bt.beforeEnter(Zt),l(Zt,nt,Gt),_l(()=>bt.enter(Zt),Qt);else{const{leave:Nn,delayLeave:Ot,afterLeave:Bn}=bt,Sr=()=>{le.ctx.isUnmounted?d(Zt):l(Zt,nt,Gt)},Ur=()=>{Nn(Zt,()=>{Sr(),Bn&&Bn()})};Ot?Ot(Zt,Sr,Ur):Ur()}else l(Zt,nt,Gt)},ft=(le,nt,Gt,an=!1,Qt=!1)=>{const{type:Zt,props:rn,ref:bt,children:fn,dynamicChildren:pn,shapeFlag:Vn,patchFlag:Nn,dirs:Ot,cacheIndex:Bn}=le;if(Nn===-2&&(Qt=!1),bt!=null&&(dh(),lv(bt,null,Gt,le,!0),hh()),Bn!=null&&(nt.renderCache[Bn]=void 0),Vn&256){nt.ctx.deactivate(le);return}const Sr=Vn&1&&Ot,Ur=!Sg(le);let Kn;if(Ur&&(Kn=rn&&rn.onVnodeBeforeUnmount)&&ud(Kn,nt,le),Vn&6)Mt(le.component,Gt,an);else{if(Vn&128){le.suspense.unmount(Gt,an);return}Sr&&xp(le,null,nt,"beforeUnmount"),Vn&64?le.type.remove(le,nt,Gt,xn,an):pn&&!pn.hasOnce&&(Zt!==cr||Nn>0&&Nn&64)?Ct(pn,nt,Gt,!1,!0):(Zt===cr&&Nn&384||!Qt&&Vn&16)&&Ct(fn,nt,Gt),an&&at(le)}(Ur&&(Kn=rn&&rn.onVnodeUnmounted)||Sr)&&_l(()=>{Kn&&ud(Kn,nt,le),Sr&&xp(le,null,nt,"unmounted")},Gt)},at=le=>{const{type:nt,el:Gt,anchor:an,transition:Qt}=le;if(nt===cr){ct(Gt,an);return}if(nt===U3){Y(le);return}const Zt=()=>{d(Gt),Qt&&!Qt.persisted&&Qt.afterLeave&&Qt.afterLeave()};if(le.shapeFlag&1&&Qt&&!Qt.persisted){const{leave:rn,delayLeave:bt}=Qt,fn=()=>rn(Gt,Zt);bt?bt(le.el,Zt,fn):fn()}else Zt()},ct=(le,nt)=>{let Gt;for(;le!==nt;)Gt=D(le),d(le),le=Gt;d(nt)},Mt=(le,nt,Gt)=>{const{bum:an,scope:Qt,job:Zt,subTree:rn,um:bt,m:fn,a:pn,parent:Vn,slots:{__:Nn}}=le;gk(fn),gk(pn),an&&R2(an),Vn&&mn(Nn)&&Nn.forEach(Ot=>{Vn.renderCache[Ot]=void 0}),Qt.stop(),Zt&&(Zt.flags|=8,ft(rn,le,nt,Gt)),bt&&_l(bt,nt),_l(()=>{le.isUnmounted=!0},nt),nt&&nt.pendingBranch&&!nt.isUnmounted&&le.asyncDep&&!le.asyncResolved&&le.suspenseId===nt.pendingId&&(nt.deps--,nt.deps===0&&nt.resolve())},Ct=(le,nt,Gt,an=!1,Qt=!1,Zt=0)=>{for(let rn=Zt;rn<le.length;rn++)ft(le[rn],nt,Gt,an,Qt)},gt=le=>{if(le.shapeFlag&6)return gt(le.component.subTree);if(le.shapeFlag&128)return le.suspense.next();const nt=D(le.anchor||le.el),Gt=nt&&nt[zR];return Gt?D(Gt):nt};let Ke=!1;const Lt=(le,nt,Gt)=>{le==null?nt._vnode&&ft(nt._vnode,null,null,!0):N(nt._vnode||null,le,nt,null,null,null,Gt),nt._vnode=le,Ke||(Ke=!0,sk(),LR(),Ke=!1)},xn={p:N,um:ft,m:We,r:at,mt:Ne,mc:fe,pc:Te,pbc:me,n:gt,o:e};return{render:Lt,hydrate:void 0,createApp:BV(Lt)}}function H3({type:e,props:n},s){return s==="svg"&&e==="foreignObject"||s==="mathml"&&e==="annotation-xml"&&n&&n.encoding&&n.encoding.includes("html")?void 0:s}function wp({effect:e,job:n},s){s?(e.flags|=32,n.flags|=4):(e.flags&=-33,n.flags&=-5)}function KV(e,n){return(!e||e&&!e.pendingBranch)&&n&&!n.persisted}function vS(e,n,s=!1){const l=e.children,d=n.children;if(mn(l)&&mn(d))for(let m=0;m<l.length;m++){const b=l[m];let r=d[m];r.shapeFlag&1&&!r.dynamicChildren&&((r.patchFlag<=0||r.patchFlag===32)&&(r=d[m]=mf(d[m]),r.el=b.el),!s&&r.patchFlag!==-2&&vS(b,r)),r.type===r0&&(r.el=b.el),r.type===Qo&&!r.el&&(r.el=b.el)}}function YV(e){const n=e.slice(),s=[0];let l,d,m,b,r;const E=e.length;for(l=0;l<E;l++){const M=e[l];if(M!==0){if(d=s[s.length-1],e[d]<M){n[l]=d,s.push(l);continue}for(m=0,b=s.length-1;m<b;)r=m+b>>1,e[s[r]]<M?m=r+1:b=r;M<e[s[m]]&&(m>0&&(n[l]=s[m-1]),s[m]=l)}}for(m=s.length,b=s[m-1];m-- >0;)s[m]=b,b=n[b];return s}function uP(e){const n=e.subTree.component;if(n)return n.asyncDep&&!n.asyncResolved?n:uP(n)}function gk(e){if(e)for(let n=0;n<e.length;n++)e[n].flags|=8}const ZV=Symbol.for("v-scx"),XV=()=>Gn(ZV);function Da(e,n){return yS(e,null,n)}function on(e,n,s){return yS(e,n,s)}function yS(e,n,s=co){const{immediate:l,deep:d,flush:m,once:b}=s,r=ca({},s),E=n&&l||!n&&m!=="post";let M;if(Tv){if(m==="sync"){const z=XV();M=z.__watcherHandles||(z.__watcherHandles=[])}else if(!E){const z=()=>{};return z.stop=ys,z.resume=ys,z.pause=ys,z}}const A=Oa;r.call=(z,F,N)=>mc(z,A,F,N);let P=!1;m==="post"?r.scheduler=z=>{_l(z,A&&A.suspense)}:m!=="sync"&&(P=!0,r.scheduler=(z,F)=>{F?z():dS(z)}),r.augmentJob=z=>{n&&(z.flags|=4),P&&(z.flags|=2,A&&(z.id=A.uid,z.i=A))};const D=_V(e,n,r);return Tv&&(M?M.push(D):E&&D()),D}function JV(e,n,s){const l=this.proxy,d=ir(e)?e.includes(".")?cP(l,e):()=>l[e]:e.bind(l,l);let m;hr(n)?m=n:(m=n.handler,s=n);const b=Xv(this),r=yS(d,m.bind(l),s);return b(),r}function cP(e,n){const s=n.split(".");return()=>{let l=e;for(let d=0;d<s.length&&l;d++)l=l[s[d]];return l}}const QV=(e,n)=>n==="modelValue"||n==="model-value"?e.modelModifiers:e[`${n}Modifiers`]||e[`${wl(n)}Modifiers`]||e[`${bh(n)}Modifiers`];function e$(e,n,...s){if(e.isUnmounted)return;const l=e.vnode.props||co;let d=s;const m=n.startsWith("update:"),b=m&&QV(l,n.slice(7));b&&(b.trim&&(d=s.map(A=>ir(A)?A.trim():A)),b.number&&(d=s.map(E4)));let r,E=l[r=iv(n)]||l[r=iv(wl(n))];!E&&m&&(E=l[r=iv(bh(n))]),E&&mc(E,e,6,d);const M=l[r+"Once"];if(M){if(!e.emitted)e.emitted={};else if(e.emitted[r])return;e.emitted[r]=!0,mc(M,e,6,d)}}function dP(e,n,s=!1){const l=n.emitsCache,d=l.get(e);if(d!==void 0)return d;const m=e.emits;let b={},r=!1;if(!hr(e)){const E=M=>{const A=dP(M,n,!0);A&&(r=!0,ca(b,A))};!s&&n.mixins.length&&n.mixins.forEach(E),e.extends&&E(e.extends),e.mixins&&e.mixins.forEach(E)}return!m&&!r?(Yr(e)&&l.set(e,null),null):(mn(m)?m.forEach(E=>b[E]=null):ca(b,m),Yr(e)&&l.set(e,b),b)}function lx(e,n){return!e||!Xb(n)?!1:(n=n.slice(2).replace(/Once$/,""),Wi(e,n[0].toLowerCase()+n.slice(1))||Wi(e,bh(n))||Wi(e,n))}function _k(e){const{type:n,vnode:s,proxy:l,withProxy:d,propsOptions:[m],slots:b,attrs:r,emit:E,render:M,renderCache:A,props:P,data:D,setupState:z,ctx:F,inheritAttrs:N}=e,q=pb(e);let G,ie;try{if(s.shapeFlag&4){const Y=d||l,J=Y;G=hd(M.call(J,Y,A,P,z,D,F)),ie=r}else{const Y=n;G=hd(Y.length>1?Y(P,{attrs:r,slots:b,emit:E}):Y(P,null)),ie=n.props?r:t$(r)}}catch(Y){cv.length=0,rx(Y,e,1),G=st(Qo)}let W=G;if(ie&&N!==!1){const Y=Object.keys(ie),{shapeFlag:J}=W;Y.length&&J&7&&(m&&Y.some(nS)&&(ie=n$(ie,m)),W=fh(W,ie,!1,!0))}return s.dirs&&(W=fh(W,null,!1,!0),W.dirs=W.dirs?W.dirs.concat(s.dirs):s.dirs),s.transition&&Vp(W,s.transition),G=W,pb(q),G}const t$=e=>{let n;for(const s in e)(s==="class"||s==="style"||Xb(s))&&((n||(n={}))[s]=e[s]);return n},n$=(e,n)=>{const s={};for(const l in e)(!nS(l)||!(l.slice(9)in n))&&(s[l]=e[l]);return s};function r$(e,n,s){const{props:l,children:d,component:m}=e,{props:b,children:r,patchFlag:E}=n,M=m.emitsOptions;if(n.dirs||n.transition)return!0;if(s&&E>=0){if(E&1024)return!0;if(E&16)return l?vk(l,b,M):!!b;if(E&8){const A=n.dynamicProps;for(let P=0;P<A.length;P++){const D=A[P];if(b[D]!==l[D]&&!lx(M,D))return!0}}}else return(d||r)&&(!r||!r.$stable)?!0:l===b?!1:l?b?vk(l,b,M):!0:!!b;return!1}function vk(e,n,s){const l=Object.keys(n);if(l.length!==Object.keys(e).length)return!0;for(let d=0;d<l.length;d++){const m=l[d];if(n[m]!==e[m]&&!lx(s,m))return!0}return!1}function i$({vnode:e,parent:n},s){for(;n;){const l=n.subTree;if(l.suspense&&l.suspense.activeBranch===e&&(l.el=e.el),l===e)(e=n.vnode).el=s,n=n.parent;else break}}const hP=e=>e.__isSuspense;function s$(e,n){n&&n.pendingBranch?mn(e)?n.effects.push(...e):n.effects.push(e):bV(e)}const cr=Symbol.for("v-fgt"),r0=Symbol.for("v-txt"),Qo=Symbol.for("v-cmt"),U3=Symbol.for("v-stc"),cv=[];let su=null;function Z(e=!1){cv.push(su=e?null:[])}function o$(){cv.pop(),su=cv[cv.length-1]||null}let Ev=1;function yk(e,n=!1){Ev+=e,e<0&&su&&n&&(su.hasOnce=!0)}function fP(e){return e.dynamicChildren=Ev>0?su||yg:null,o$(),Ev>0&&su&&su.push(e),e}function ue(e,n,s,l,d,m){return fP(ae(e,n,s,l,d,m,!0))}function Bt(e,n,s,l,d){return fP(st(e,n,s,l,d,!0))}function qs(e){return e?e.__v_isVNode===!0:!1}function Ip(e,n){return e.type===n.type&&e.key===n.key}const pP=({key:e})=>e??null,L2=({ref:e,ref_key:n,ref_for:s})=>(typeof e=="number"&&(e=""+e),e!=null?ir(e)||Hs(e)||hr(e)?{i:Sa,r:e,k:n,f:!!s}:e:null);function ae(e,n=null,s=null,l=0,d=null,m=e===cr?0:1,b=!1,r=!1){const E={__v_isVNode:!0,__v_skip:!0,type:e,props:n,key:n&&pP(n),ref:n&&L2(n),scopeId:DR,slotScopeIds:null,children:s,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:m,patchFlag:l,dynamicProps:d,dynamicChildren:null,appContext:null,ctx:Sa};return r?(bS(E,s),m&128&&e.normalize(E)):s&&(E.shapeFlag|=ir(s)?8:16),Ev>0&&!b&&su&&(E.patchFlag>0||m&6)&&E.patchFlag!==32&&su.push(E),E}const st=a$;function a$(e,n=null,s=null,l=0,d=null,m=!1){if((!e||e===YR)&&(e=Qo),qs(e)){const r=fh(e,n,!0);return s&&bS(r,s),Ev>0&&!m&&su&&(r.shapeFlag&6?su[su.indexOf(e)]=r:su.push(r)),r.patchFlag=-2,r}if(m$(e)&&(e=e.__vccOpts),n){n=vd(n);let{class:r,style:E}=n;r&&!ir(r)&&(n.class=ge(r)),Yr(E)&&(cS(E)&&!mn(E)&&(E=ca({},E)),n.style=fr(E))}const b=ir(e)?1:hP(e)?128:NR(e)?64:Yr(e)?4:hr(e)?2:0;return ae(e,n,s,l,d,b,m,!0)}function vd(e){return e?cS(e)||rP(e)?ca({},e):e:null}function fh(e,n,s=!1,l=!1){const{props:d,ref:m,patchFlag:b,children:r,transition:E}=e,M=n?pi(d||{},n):d,A={__v_isVNode:!0,__v_skip:!0,type:e.type,props:M,key:M&&pP(M),ref:n&&n.ref?s&&m?mn(m)?m.concat(L2(n)):[m,L2(n)]:L2(n):m,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:r,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:n&&e.type!==cr?b===-1?16:b|16:b,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:E,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&fh(e.ssContent),ssFallback:e.ssFallback&&fh(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return E&&l&&Vp(A,E.clone(A)),A}function ei(e=" ",n=0){return st(r0,null,e,n)}function At(e="",n=!1){return n?(Z(),Bt(Qo,null,e)):st(Qo,null,e)}function hd(e){return e==null||typeof e=="boolean"?st(Qo):mn(e)?st(cr,null,e.slice()):qs(e)?mf(e):st(r0,null,String(e))}function mf(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:fh(e)}function bS(e,n){let s=0;const{shapeFlag:l}=e;if(n==null)n=null;else if(mn(n))s=16;else if(typeof n=="object")if(l&65){const d=n.default;d&&(d._c&&(d._d=!1),bS(e,d()),d._c&&(d._d=!0));return}else{s=32;const d=n._;!d&&!rP(n)?n._ctx=Sa:d===3&&Sa&&(Sa.slots._===1?n._=1:(n._=2,e.patchFlag|=1024))}else hr(n)?(n={default:n,_ctx:Sa},s=32):(n=String(n),l&64?(s=16,n=[ei(n)]):s=8);e.children=n,e.shapeFlag|=s}function pi(...e){const n={};for(let s=0;s<e.length;s++){const l=e[s];for(const d in l)if(d==="class")n.class!==l.class&&(n.class=ge([n.class,l.class]));else if(d==="style")n.style=fr([n.style,l.style]);else if(Xb(d)){const m=n[d],b=l[d];b&&m!==b&&!(mn(m)&&m.includes(b))&&(n[d]=m?[].concat(m,b):b)}else d!==""&&(n[d]=l[d])}return n}function ud(e,n,s,l=null){mc(e,n,7,[s,l])}const l$=eP();let u$=0;function c$(e,n,s){const l=e.type,d=(n?n.appContext:e.appContext)||l$,m={uid:u$++,vnode:e,type:l,parent:n,appContext:d,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new cR(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:n?n.provides:Object.create(d.provides),ids:n?n.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:sP(l,d),emitsOptions:dP(l,d),emit:null,emitted:null,propsDefaults:co,inheritAttrs:l.inheritAttrs,ctx:co,data:co,props:co,attrs:co,slots:co,refs:co,setupState:co,setupContext:null,suspense:s,suspenseId:s?s.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return m.ctx={_:m},m.root=n?n.root:m,m.emit=e$.bind(null,m),e.ce&&e.ce(m),m}let Oa=null;const oi=()=>Oa||Sa;let gb,O4;{const e=ex(),n=(s,l)=>{let d;return(d=e[s])||(d=e[s]=[]),d.push(l),m=>{d.length>1?d.forEach(b=>b(m)):d[0](m)}};gb=n("__VUE_INSTANCE_SETTERS__",s=>Oa=s),O4=n("__VUE_SSR_SETTERS__",s=>Tv=s)}const Xv=e=>{const n=Oa;return gb(e),e.scope.on(),()=>{e.scope.off(),gb(n)}},bk=()=>{Oa&&Oa.scope.off(),gb(null)};function mP(e){return e.vnode.shapeFlag&4}let Tv=!1;function d$(e,n=!1,s=!1){n&&O4(n);const{props:l,children:d}=e.vnode,m=mP(e);VV(e,l,m,n),jV(e,d,s||n);const b=m?h$(e,n):void 0;return n&&O4(!1),b}function h$(e,n){const s=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,PV);const{setup:l}=s;if(l){dh();const d=e.setupContext=l.length>1?_P(e):null,m=Xv(e),b=Zv(l,e,0,[e.props,d]),r=yv(b);if(hh(),m(),(r||e.sp)&&!Sg(e)&&GR(e),r){if(b.then(bk,bk),n)return b.then(E=>{xk(e,E)}).catch(E=>{rx(E,e,0)});e.asyncDep=b}else xk(e,b)}else gP(e)}function xk(e,n,s){hr(n)?e.type.__ssrInlineRender?e.ssrRender=n:e.render=n:Yr(n)&&(e.setupState=MR(n)),gP(e)}function gP(e,n,s){const l=e.type;e.render||(e.render=l.render||ys);{const d=Xv(e);dh();try{LV(e)}finally{hh(),d()}}}const f$={get(e,n){return Qa(e,"get",""),e[n]}};function _P(e){const n=s=>{e.exposed=s||{}};return{attrs:new Proxy(e.attrs,f$),slots:e.slots,emit:e.emit,expose:n}}function ux(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(MR(lh(e.exposed)),{get(n,s){if(s in n)return n[s];if(s in uv)return uv[s](e)},has(n,s){return s in n||s in uv}})):e.proxy}function p$(e,n=!0){return hr(e)?e.displayName||e.name:e.name||n&&e.__name}function m$(e){return hr(e)&&"__vccOpts"in e}const se=(e,n)=>mV(e,n,Tv);function xr(e,n,s){const l=arguments.length;return l===2?Yr(n)&&!mn(n)?qs(n)?st(e,null,[n]):st(e,n):st(e,null,n):(l>3?s=Array.prototype.slice.call(arguments,2):l===3&&qs(s)&&(s=[s]),st(e,n,s))}const g$="3.5.17",_$=ys;/**
* @vue/runtime-dom v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let D4;const wk=typeof window<"u"&&window.trustedTypes;if(wk)try{D4=wk.createPolicy("vue",{createHTML:e=>e})}catch{}const vP=D4?e=>D4.createHTML(e):e=>e,v$="http://www.w3.org/2000/svg",y$="http://www.w3.org/1998/Math/MathML",eh=typeof document<"u"?document:null,Sk=eh&&eh.createElement("template"),b$={insert:(e,n,s)=>{n.insertBefore(e,s||null)},remove:e=>{const n=e.parentNode;n&&n.removeChild(e)},createElement:(e,n,s,l)=>{const d=n==="svg"?eh.createElementNS(v$,e):n==="mathml"?eh.createElementNS(y$,e):s?eh.createElement(e,{is:s}):eh.createElement(e);return e==="select"&&l&&l.multiple!=null&&d.setAttribute("multiple",l.multiple),d},createText:e=>eh.createTextNode(e),createComment:e=>eh.createComment(e),setText:(e,n)=>{e.nodeValue=n},setElementText:(e,n)=>{e.textContent=n},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>eh.querySelector(e),setScopeId(e,n){e.setAttribute(n,"")},insertStaticContent(e,n,s,l,d,m){const b=s?s.previousSibling:n.lastChild;if(d&&(d===m||d.nextSibling))for(;n.insertBefore(d.cloneNode(!0),s),!(d===m||!(d=d.nextSibling)););else{Sk.innerHTML=vP(l==="svg"?`<svg>${e}</svg>`:l==="mathml"?`<math>${e}</math>`:e);const r=Sk.content;if(l==="svg"||l==="mathml"){const E=r.firstChild;for(;E.firstChild;)r.appendChild(E.firstChild);r.removeChild(E)}n.insertBefore(r,s)}return[b?b.nextSibling:n.firstChild,s?s.previousSibling:n.lastChild]}},af="transition",U_="animation",Og=Symbol("_vtc"),yP={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},bP=ca({},$R,yP),x$=e=>(e.displayName="Transition",e.props=bP,e),ha=x$((e,{slots:n})=>xr(CV,xP(e),n)),Sp=(e,n=[])=>{mn(e)?e.forEach(s=>s(...n)):e&&e(...n)},Ck=e=>e?mn(e)?e.some(n=>n.length>1):e.length>1:!1;function xP(e){const n={};for(const ye in e)ye in yP||(n[ye]=e[ye]);if(e.css===!1)return n;const{name:s="v",type:l,duration:d,enterFromClass:m=`${s}-enter-from`,enterActiveClass:b=`${s}-enter-active`,enterToClass:r=`${s}-enter-to`,appearFromClass:E=m,appearActiveClass:M=b,appearToClass:A=r,leaveFromClass:P=`${s}-leave-from`,leaveActiveClass:D=`${s}-leave-active`,leaveToClass:z=`${s}-leave-to`}=e,F=w$(d),N=F&&F[0],q=F&&F[1],{onBeforeEnter:G,onEnter:ie,onEnterCancelled:W,onLeave:Y,onLeaveCancelled:J,onBeforeAppear:re=G,onAppear:he=ie,onAppearCancelled:fe=W}=n,ce=(ye,Ue,Ne,Pe)=>{ye._enterCancelled=Pe,cf(ye,Ue?A:r),cf(ye,Ue?M:b),Ne&&Ne()},me=(ye,Ue)=>{ye._isLeaving=!1,cf(ye,P),cf(ye,z),cf(ye,D),Ue&&Ue()},we=ye=>(Ue,Ne)=>{const Pe=ye?he:ie,ve=()=>ce(Ue,ye,Ne);Sp(Pe,[Ue,ve]),Ek(()=>{cf(Ue,ye?E:m),cd(Ue,ye?A:r),Ck(Pe)||Tk(Ue,l,N,ve)})};return ca(n,{onBeforeEnter(ye){Sp(G,[ye]),cd(ye,m),cd(ye,b)},onBeforeAppear(ye){Sp(re,[ye]),cd(ye,E),cd(ye,M)},onEnter:we(!1),onAppear:we(!0),onLeave(ye,Ue){ye._isLeaving=!0;const Ne=()=>me(ye,Ue);cd(ye,P),ye._enterCancelled?(cd(ye,D),z4()):(z4(),cd(ye,D)),Ek(()=>{ye._isLeaving&&(cf(ye,P),cd(ye,z),Ck(Y)||Tk(ye,l,q,Ne))}),Sp(Y,[ye,Ne])},onEnterCancelled(ye){ce(ye,!1,void 0,!0),Sp(W,[ye])},onAppearCancelled(ye){ce(ye,!0,void 0,!0),Sp(fe,[ye])},onLeaveCancelled(ye){me(ye),Sp(J,[ye])}})}function w$(e){if(e==null)return null;if(Yr(e))return[j3(e.enter),j3(e.leave)];{const n=j3(e);return[n,n]}}function j3(e){return O7(e)}function cd(e,n){n.split(/\s+/).forEach(s=>s&&e.classList.add(s)),(e[Og]||(e[Og]=new Set)).add(n)}function cf(e,n){n.split(/\s+/).forEach(l=>l&&e.classList.remove(l));const s=e[Og];s&&(s.delete(n),s.size||(e[Og]=void 0))}function Ek(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let S$=0;function Tk(e,n,s,l){const d=e._endId=++S$,m=()=>{d===e._endId&&l()};if(s!=null)return setTimeout(m,s);const{type:b,timeout:r,propCount:E}=wP(e,n);if(!b)return l();const M=b+"end";let A=0;const P=()=>{e.removeEventListener(M,D),m()},D=z=>{z.target===e&&++A>=E&&P()};setTimeout(()=>{A<E&&P()},r+1),e.addEventListener(M,D)}function wP(e,n){const s=window.getComputedStyle(e),l=F=>(s[F]||"").split(", "),d=l(`${af}Delay`),m=l(`${af}Duration`),b=Ik(d,m),r=l(`${U_}Delay`),E=l(`${U_}Duration`),M=Ik(r,E);let A=null,P=0,D=0;n===af?b>0&&(A=af,P=b,D=m.length):n===U_?M>0&&(A=U_,P=M,D=E.length):(P=Math.max(b,M),A=P>0?b>M?af:U_:null,D=A?A===af?m.length:E.length:0);const z=A===af&&/\b(transform|all)(,|$)/.test(l(`${af}Property`).toString());return{type:A,timeout:P,propCount:D,hasTransform:z}}function Ik(e,n){for(;e.length<n.length;)e=e.concat(e);return Math.max(...n.map((s,l)=>kk(s)+kk(e[l])))}function kk(e){return e==="auto"?0:Number(e.slice(0,-1).replace(",","."))*1e3}function z4(){return document.body.offsetHeight}function C$(e,n,s){const l=e[Og];l&&(n=(n?[n,...l]:[...l]).join(" ")),n==null?e.removeAttribute("class"):s?e.setAttribute("class",n):e.className=n}const _b=Symbol("_vod"),SP=Symbol("_vsh"),Ki={beforeMount(e,{value:n},{transition:s}){e[_b]=e.style.display==="none"?"":e.style.display,s&&n?s.beforeEnter(e):j_(e,n)},mounted(e,{value:n},{transition:s}){s&&n&&s.enter(e)},updated(e,{value:n,oldValue:s},{transition:l}){!n!=!s&&(l?n?(l.beforeEnter(e),j_(e,!0),l.enter(e)):l.leave(e,()=>{j_(e,!1)}):j_(e,n))},beforeUnmount(e,{value:n}){j_(e,n)}};function j_(e,n){e.style.display=n?e[_b]:"none",e[SP]=!n}const E$=Symbol(""),T$=/(^|;)\s*display\s*:/;function I$(e,n,s){const l=e.style,d=ir(s);let m=!1;if(s&&!d){if(n)if(ir(n))for(const b of n.split(";")){const r=b.slice(0,b.indexOf(":")).trim();s[r]==null&&O2(l,r,"")}else for(const b in n)s[b]==null&&O2(l,b,"");for(const b in s)b==="display"&&(m=!0),O2(l,b,s[b])}else if(d){if(n!==s){const b=l[E$];b&&(s+=";"+b),l.cssText=s,m=T$.test(s)}}else n&&e.removeAttribute("style");_b in e&&(e[_b]=m?l.display:"",e[SP]&&(l.display="none"))}const Mk=/\s*!important$/;function O2(e,n,s){if(mn(s))s.forEach(l=>O2(e,n,l));else if(s==null&&(s=""),n.startsWith("--"))e.setProperty(n,s);else{const l=k$(e,n);Mk.test(s)?e.setProperty(bh(l),s.replace(Mk,""),"important"):e[l]=s}}const Ak=["Webkit","Moz","ms"],G3={};function k$(e,n){const s=G3[n];if(s)return s;let l=wl(n);if(l!=="filter"&&l in e)return G3[n]=l;l=Yv(l);for(let d=0;d<Ak.length;d++){const m=Ak[d]+l;if(m in e)return G3[n]=m}return n}const Rk="http://www.w3.org/1999/xlink";function Pk(e,n,s,l,d,m=V7(n)){l&&n.startsWith("xlink:")?s==null?e.removeAttributeNS(Rk,n.slice(6,n.length)):e.setAttributeNS(Rk,n,s):s==null||m&&!oR(s)?e.removeAttribute(n):e.setAttribute(n,m?"":pc(s)?String(s):s)}function Lk(e,n,s,l,d){if(n==="innerHTML"||n==="textContent"){s!=null&&(e[n]=n==="innerHTML"?vP(s):s);return}const m=e.tagName;if(n==="value"&&m!=="PROGRESS"&&!m.includes("-")){const r=m==="OPTION"?e.getAttribute("value")||"":e.value,E=s==null?e.type==="checkbox"?"on":"":String(s);(r!==E||!("_value"in e))&&(e.value=E),s==null&&e.removeAttribute(n),e._value=s;return}let b=!1;if(s===""||s==null){const r=typeof e[n];r==="boolean"?s=oR(s):s==null&&r==="string"?(s="",b=!0):r==="number"&&(s=0,b=!0)}try{e[n]=s}catch{}b&&e.removeAttribute(d||n)}function gf(e,n,s,l){e.addEventListener(n,s,l)}function M$(e,n,s,l){e.removeEventListener(n,s,l)}const Ok=Symbol("_vei");function A$(e,n,s,l,d=null){const m=e[Ok]||(e[Ok]={}),b=m[n];if(l&&b)b.value=l;else{const[r,E]=R$(n);if(l){const M=m[n]=O$(l,d);gf(e,r,M,E)}else b&&(M$(e,r,b,E),m[n]=void 0)}}const Dk=/(?:Once|Passive|Capture)$/;function R$(e){let n;if(Dk.test(e)){n={};let l;for(;l=e.match(Dk);)e=e.slice(0,e.length-l[0].length),n[l[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):bh(e.slice(2)),n]}let q3=0;const P$=Promise.resolve(),L$=()=>q3||(P$.then(()=>q3=0),q3=Date.now());function O$(e,n){const s=l=>{if(!l._vts)l._vts=Date.now();else if(l._vts<=s.attached)return;mc(D$(l,s.value),n,5,[l])};return s.value=e,s.attached=L$(),s}function D$(e,n){if(mn(n)){const s=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{s.call(e),e._stopped=!0},n.map(l=>d=>!d._stopped&&l&&l(d))}else return n}const zk=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,z$=(e,n,s,l,d,m)=>{const b=d==="svg";n==="class"?C$(e,l,b):n==="style"?I$(e,s,l):Xb(n)?nS(n)||A$(e,n,s,l,m):(n[0]==="."?(n=n.slice(1),!0):n[0]==="^"?(n=n.slice(1),!1):N$(e,n,l,b))?(Lk(e,n,l),!e.tagName.includes("-")&&(n==="value"||n==="checked"||n==="selected")&&Pk(e,n,l,b,m,n!=="value")):e._isVueCE&&(/[A-Z]/.test(n)||!ir(l))?Lk(e,wl(n),l,m,n):(n==="true-value"?e._trueValue=l:n==="false-value"&&(e._falseValue=l),Pk(e,n,l,b))};function N$(e,n,s,l){if(l)return!!(n==="innerHTML"||n==="textContent"||n in e&&zk(n)&&hr(s));if(n==="spellcheck"||n==="draggable"||n==="translate"||n==="autocorrect"||n==="form"||n==="list"&&e.tagName==="INPUT"||n==="type"&&e.tagName==="TEXTAREA")return!1;if(n==="width"||n==="height"){const d=e.tagName;if(d==="IMG"||d==="VIDEO"||d==="CANVAS"||d==="SOURCE")return!1}return zk(n)&&ir(s)?!1:n in e}const CP=new WeakMap,EP=new WeakMap,vb=Symbol("_moveCb"),Nk=Symbol("_enterCb"),F$=e=>(delete e.props.mode,e),B$=F$({name:"TransitionGroup",props:ca({},bP,{tag:String,moveClass:String}),setup(e,{slots:n}){const s=oi(),l=VR();let d,m;return yc(()=>{if(!d.length)return;const b=e.moveClass||`${e.name||"v"}-move`;if(!U$(d[0].el,s.vnode.el,b)){d=[];return}d.forEach(V$),d.forEach($$);const r=d.filter(H$);z4(),r.forEach(E=>{const M=E.el,A=M.style;cd(M,b),A.transform=A.webkitTransform=A.transitionDuration="";const P=M[vb]=D=>{D&&D.target!==M||(!D||/transform$/.test(D.propertyName))&&(M.removeEventListener("transitionend",P),M[vb]=null,cf(M,b))};M.addEventListener("transitionend",P)}),d=[]}),()=>{const b=Os(e),r=xP(b);let E=b.tag||cr;if(d=[],m)for(let M=0;M<m.length;M++){const A=m[M];A.el&&A.el instanceof Element&&(d.push(A),Vp(A,Cv(A,r,l,s)),CP.set(A,A.el.getBoundingClientRect()))}m=n.default?hS(n.default()):[];for(let M=0;M<m.length;M++){const A=m[M];A.key!=null&&Vp(A,Cv(A,r,l,s))}return st(E,null,m)}}}),TP=B$;function V$(e){const n=e.el;n[vb]&&n[vb](),n[Nk]&&n[Nk]()}function $$(e){EP.set(e,e.el.getBoundingClientRect())}function H$(e){const n=CP.get(e),s=EP.get(e),l=n.left-s.left,d=n.top-s.top;if(l||d){const m=e.el.style;return m.transform=m.webkitTransform=`translate(${l}px,${d}px)`,m.transitionDuration="0s",e}}function U$(e,n,s){const l=e.cloneNode(),d=e[Og];d&&d.forEach(r=>{r.split(/\s+/).forEach(E=>E&&l.classList.remove(E))}),s.split(/\s+/).forEach(r=>r&&l.classList.add(r)),l.style.display="none";const m=n.nodeType===1?n:n.parentNode;m.appendChild(l);const{hasTransform:b}=wP(l);return m.removeChild(l),b}const Dg=e=>{const n=e.props["onUpdate:modelValue"]||!1;return mn(n)?s=>R2(n,s):n};function j$(e){e.target.composing=!0}function Fk(e){const n=e.target;n.composing&&(n.composing=!1,n.dispatchEvent(new Event("input")))}const uh=Symbol("_assign"),Jv={created(e,{modifiers:{lazy:n,trim:s,number:l}},d){e[uh]=Dg(d);const m=l||d.props&&d.props.type==="number";gf(e,n?"change":"input",b=>{if(b.target.composing)return;let r=e.value;s&&(r=r.trim()),m&&(r=E4(r)),e[uh](r)}),s&&gf(e,"change",()=>{e.value=e.value.trim()}),n||(gf(e,"compositionstart",j$),gf(e,"compositionend",Fk),gf(e,"change",Fk))},mounted(e,{value:n}){e.value=n??""},beforeUpdate(e,{value:n,oldValue:s,modifiers:{lazy:l,trim:d,number:m}},b){if(e[uh]=Dg(b),e.composing)return;const r=(m||e.type==="number")&&!/^0\d/.test(e.value)?E4(e.value):e.value,E=n??"";r!==E&&(document.activeElement===e&&e.type!=="range"&&(l&&n===s||d&&e.value.trim()===E)||(e.value=E))}},yb={deep:!0,created(e,n,s){e[uh]=Dg(s),gf(e,"change",()=>{const l=e._modelValue,d=kP(e),m=e.checked,b=e[uh];if(mn(l)){const r=aR(l,d),E=r!==-1;if(m&&!E)b(l.concat(d));else if(!m&&E){const M=[...l];M.splice(r,1),b(M)}}else if(Jb(l)){const r=new Set(l);m?r.add(d):r.delete(d),b(r)}else b(MP(e,m))})},mounted:Bk,beforeUpdate(e,n,s){e[uh]=Dg(s),Bk(e,n,s)}};function Bk(e,{value:n,oldValue:s},l){e._modelValue=n;let d;if(mn(n))d=aR(n,l.props.value)>-1;else if(Jb(n))d=n.has(l.props.value);else{if(n===s)return;d=Lg(n,MP(e,!0))}e.checked!==d&&(e.checked=d)}const IP={created(e,{value:n},s){e.checked=Lg(n,s.props.value),e[uh]=Dg(s),gf(e,"change",()=>{e[uh](kP(e))})},beforeUpdate(e,{value:n,oldValue:s},l){e[uh]=Dg(l),n!==s&&(e.checked=Lg(n,l.props.value))}};function kP(e){return"_value"in e?e._value:e.value}function MP(e,n){const s=n?"_trueValue":"_falseValue";return s in e?e[s]:n}const G$=["ctrl","shift","alt","meta"],q$={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,n)=>G$.some(s=>e[`${s}Key`]&&!n.includes(s))},Er=(e,n)=>{const s=e._withMods||(e._withMods={}),l=n.join(".");return s[l]||(s[l]=(d,...m)=>{for(let b=0;b<n.length;b++){const r=q$[n[b]];if(r&&r(d,n))return}return e(d,...m)})},W$={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Ps=(e,n)=>{const s=e._withKeys||(e._withKeys={}),l=n.join(".");return s[l]||(s[l]=d=>{if(!("key"in d))return;const m=bh(d.key);if(n.some(b=>b===m||W$[b]===m))return e(d)})},K$=ca({patchProp:z$},b$);let Vk;function AP(){return Vk||(Vk=qV(K$))}const Cf=(...e)=>{AP().render(...e)},RP=(...e)=>{const n=AP().createApp(...e),{mount:s}=n;return n.mount=l=>{const d=Z$(l);if(!d)return;const m=n._component;!hr(m)&&!m.render&&!m.template&&(m.template=d.innerHTML),d.nodeType===1&&(d.textContent="");const b=s(d,!1,Y$(d));return d instanceof Element&&(d.removeAttribute("v-cloak"),d.setAttribute("data-v-app","")),b},n};function Y$(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function Z$(e){return ir(e)?document.querySelector(e):e}function bc(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var D2={exports:{}},X$=D2.exports,$k;function J$(){return $k||($k=1,function(e,n){(function(s,l){e.exports=l()})(X$,function(){var s,l,d;function m(r,E){if(!s)s=E;else if(!l)l=E;else{var M="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/guides/install/#transpiling'); }; var sharedChunk = {}; ("+s+")(sharedChunk); ("+l+")(sharedChunk); self.onerror = null;",A={};s(A),d=E(A),typeof window<"u"&&window&&window.URL&&window.URL.createObjectURL&&(d.workerUrl=window.URL.createObjectURL(new Blob([M],{type:"text/javascript"})))}}m(["exports"],function(r){var E=1e-6,M=typeof Float32Array<"u"?Float32Array:Array;function A(a,t){var o=t[0],c=t[1],h=t[2],_=t[3],y=o*_-h*c;return y?(a[0]=_*(y=1/y),a[1]=-c*y,a[2]=-h*y,a[3]=o*y,a):null}function P(){var a=new M(9);return M!=Float32Array&&(a[1]=0,a[2]=0,a[3]=0,a[5]=0,a[6]=0,a[7]=0),a[0]=1,a[4]=1,a[8]=1,a}function D(a,t){var o=t[0],c=t[1],h=t[2],_=t[3],y=t[4],C=t[5],R=t[6],L=t[7],V=t[8];return a[0]=y*V-C*L,a[1]=h*L-c*V,a[2]=c*C-h*y,a[3]=C*R-_*V,a[4]=o*V-h*R,a[5]=h*_-o*C,a[6]=_*L-y*R,a[7]=c*R-o*L,a[8]=o*y-c*_,a}function z(a,t,o){var c=t[0],h=t[1],_=t[2],y=t[3],C=t[4],R=t[5],L=t[6],V=t[7],$=t[8],U=o[0],X=o[1],ee=o[2],de=o[3],be=o[4],Ie=o[5],Fe=o[6],Be=o[7],pe=o[8];return a[0]=U*c+X*y+ee*L,a[1]=U*h+X*C+ee*V,a[2]=U*_+X*R+ee*$,a[3]=de*c+be*y+Ie*L,a[4]=de*h+be*C+Ie*V,a[5]=de*_+be*R+Ie*$,a[6]=Fe*c+Be*y+pe*L,a[7]=Fe*h+Be*C+pe*V,a[8]=Fe*_+Be*R+pe*$,a}function F(){var a=new M(16);return M!=Float32Array&&(a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[11]=0,a[12]=0,a[13]=0,a[14]=0),a[0]=1,a[5]=1,a[10]=1,a[15]=1,a}function N(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}function q(a,t){var o=t[0],c=t[1],h=t[2],_=t[3],y=t[4],C=t[5],R=t[6],L=t[7],V=t[8],$=t[9],U=t[10],X=t[11],ee=t[12],de=t[13],be=t[14],Ie=t[15],Fe=o*C-c*y,Be=o*R-h*y,pe=o*L-_*y,De=c*R-h*C,He=c*L-_*C,Ze=h*L-_*R,xt=V*de-$*ee,ht=V*be-U*ee,St=V*Ie-X*ee,Rt=$*be-U*de,Yt=$*Ie-X*de,Tn=U*Ie-X*be,hn=Fe*Tn-Be*Yt+pe*Rt+De*St-He*ht+Ze*xt;return hn?(a[0]=(C*Tn-R*Yt+L*Rt)*(hn=1/hn),a[1]=(h*Yt-c*Tn-_*Rt)*hn,a[2]=(de*Ze-be*He+Ie*De)*hn,a[3]=(U*He-$*Ze-X*De)*hn,a[4]=(R*St-y*Tn-L*ht)*hn,a[5]=(o*Tn-h*St+_*ht)*hn,a[6]=(be*pe-ee*Ze-Ie*Be)*hn,a[7]=(V*Ze-U*pe+X*Be)*hn,a[8]=(y*Yt-C*St+L*xt)*hn,a[9]=(c*St-o*Yt-_*xt)*hn,a[10]=(ee*He-de*pe+Ie*Fe)*hn,a[11]=($*pe-V*He-X*Fe)*hn,a[12]=(C*ht-y*Rt-R*xt)*hn,a[13]=(o*Rt-c*ht+h*xt)*hn,a[14]=(de*Be-ee*De-be*Fe)*hn,a[15]=(V*De-$*Be+U*Fe)*hn,a):null}function G(a,t,o){var c=t[0],h=t[1],_=t[2],y=t[3],C=t[4],R=t[5],L=t[6],V=t[7],$=t[8],U=t[9],X=t[10],ee=t[11],de=t[12],be=t[13],Ie=t[14],Fe=t[15],Be=o[0],pe=o[1],De=o[2],He=o[3];return a[0]=Be*c+pe*C+De*$+He*de,a[1]=Be*h+pe*R+De*U+He*be,a[2]=Be*_+pe*L+De*X+He*Ie,a[3]=Be*y+pe*V+De*ee+He*Fe,a[4]=(Be=o[4])*c+(pe=o[5])*C+(De=o[6])*$+(He=o[7])*de,a[5]=Be*h+pe*R+De*U+He*be,a[6]=Be*_+pe*L+De*X+He*Ie,a[7]=Be*y+pe*V+De*ee+He*Fe,a[8]=(Be=o[8])*c+(pe=o[9])*C+(De=o[10])*$+(He=o[11])*de,a[9]=Be*h+pe*R+De*U+He*be,a[10]=Be*_+pe*L+De*X+He*Ie,a[11]=Be*y+pe*V+De*ee+He*Fe,a[12]=(Be=o[12])*c+(pe=o[13])*C+(De=o[14])*$+(He=o[15])*de,a[13]=Be*h+pe*R+De*U+He*be,a[14]=Be*_+pe*L+De*X+He*Ie,a[15]=Be*y+pe*V+De*ee+He*Fe,a}function ie(a,t,o){var c,h,_,y,C,R,L,V,$,U,X,ee,de=o[0],be=o[1],Ie=o[2];return t===a?(a[12]=t[0]*de+t[4]*be+t[8]*Ie+t[12],a[13]=t[1]*de+t[5]*be+t[9]*Ie+t[13],a[14]=t[2]*de+t[6]*be+t[10]*Ie+t[14],a[15]=t[3]*de+t[7]*be+t[11]*Ie+t[15]):(h=t[1],_=t[2],y=t[3],C=t[4],R=t[5],L=t[6],V=t[7],$=t[8],U=t[9],X=t[10],ee=t[11],a[0]=c=t[0],a[1]=h,a[2]=_,a[3]=y,a[4]=C,a[5]=R,a[6]=L,a[7]=V,a[8]=$,a[9]=U,a[10]=X,a[11]=ee,a[12]=c*de+C*be+$*Ie+t[12],a[13]=h*de+R*be+U*Ie+t[13],a[14]=_*de+L*be+X*Ie+t[14],a[15]=y*de+V*be+ee*Ie+t[15]),a}function W(a,t,o){var c=o[0],h=o[1],_=o[2];return a[0]=t[0]*c,a[1]=t[1]*c,a[2]=t[2]*c,a[3]=t[3]*c,a[4]=t[4]*h,a[5]=t[5]*h,a[6]=t[6]*h,a[7]=t[7]*h,a[8]=t[8]*_,a[9]=t[9]*_,a[10]=t[10]*_,a[11]=t[11]*_,a[12]=t[12],a[13]=t[13],a[14]=t[14],a[15]=t[15],a}function Y(a,t,o){var c=Math.sin(o),h=Math.cos(o),_=t[4],y=t[5],C=t[6],R=t[7],L=t[8],V=t[9],$=t[10],U=t[11];return t!==a&&(a[0]=t[0],a[1]=t[1],a[2]=t[2],a[3]=t[3],a[12]=t[12],a[13]=t[13],a[14]=t[14],a[15]=t[15]),a[4]=_*h+L*c,a[5]=y*h+V*c,a[6]=C*h+$*c,a[7]=R*h+U*c,a[8]=L*h-_*c,a[9]=V*h-y*c,a[10]=$*h-C*c,a[11]=U*h-R*c,a}function J(a,t,o){var c=Math.sin(o),h=Math.cos(o),_=t[0],y=t[1],C=t[2],R=t[3],L=t[8],V=t[9],$=t[10],U=t[11];return t!==a&&(a[4]=t[4],a[5]=t[5],a[6]=t[6],a[7]=t[7],a[12]=t[12],a[13]=t[13],a[14]=t[14],a[15]=t[15]),a[0]=_*h-L*c,a[1]=y*h-V*c,a[2]=C*h-$*c,a[3]=R*h-U*c,a[8]=_*c+L*h,a[9]=y*c+V*h,a[10]=C*c+$*h,a[11]=R*c+U*h,a}function re(a,t,o){var c=Math.sin(o),h=Math.cos(o),_=t[0],y=t[1],C=t[2],R=t[3],L=t[4],V=t[5],$=t[6],U=t[7];return t!==a&&(a[8]=t[8],a[9]=t[9],a[10]=t[10],a[11]=t[11],a[12]=t[12],a[13]=t[13],a[14]=t[14],a[15]=t[15]),a[0]=_*h+L*c,a[1]=y*h+V*c,a[2]=C*h+$*c,a[3]=R*h+U*c,a[4]=L*h-_*c,a[5]=V*h-y*c,a[6]=$*h-C*c,a[7]=U*h-R*c,a}function he(a,t){return a[0]=t[0],a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=t[1],a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=t[2],a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}function fe(a,t,o){var c,h,_,y=o[0],C=o[1],R=o[2],L=Math.hypot(y,C,R);return L<E?null:(y*=L=1/L,C*=L,R*=L,c=Math.sin(t),h=Math.cos(t),a[0]=y*y*(_=1-h)+h,a[1]=C*y*_+R*c,a[2]=R*y*_-C*c,a[3]=0,a[4]=y*C*_-R*c,a[5]=C*C*_+h,a[6]=R*C*_+y*c,a[7]=0,a[8]=y*R*_+C*c,a[9]=C*R*_-y*c,a[10]=R*R*_+h,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a)}function ce(a,t){var o=t[0],c=t[1],h=t[2],_=t[3],y=o+o,C=c+c,R=h+h,L=o*y,V=c*y,$=c*C,U=h*y,X=h*C,ee=h*R,de=_*y,be=_*C,Ie=_*R;return a[0]=1-$-ee,a[1]=V+Ie,a[2]=U-be,a[3]=0,a[4]=V-Ie,a[5]=1-L-ee,a[6]=X+de,a[7]=0,a[8]=U+be,a[9]=X-de,a[10]=1-L-$,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}Math.hypot||(Math.hypot=function(){for(var a=0,t=arguments.length;t--;)a+=arguments[t]*arguments[t];return Math.sqrt(a)});var me=G;function we(){var a=new M(3);return M!=Float32Array&&(a[0]=0,a[1]=0,a[2]=0),a}function ye(a){var t=new M(3);return t[0]=a[0],t[1]=a[1],t[2]=a[2],t}function Ue(a){return Math.hypot(a[0],a[1],a[2])}function Ne(a,t,o){var c=new M(3);return c[0]=a,c[1]=t,c[2]=o,c}function Pe(a,t,o){return a[0]=t[0]+o[0],a[1]=t[1]+o[1],a[2]=t[2]+o[2],a}function ve(a,t,o){return a[0]=t[0]-o[0],a[1]=t[1]-o[1],a[2]=t[2]-o[2],a}function $e(a,t,o){return a[0]=t[0]*o[0],a[1]=t[1]*o[1],a[2]=t[2]*o[2],a}function Te(a,t,o){return a[0]=Math.min(t[0],o[0]),a[1]=Math.min(t[1],o[1]),a[2]=Math.min(t[2],o[2]),a}function Ae(a,t,o){return a[0]=Math.max(t[0],o[0]),a[1]=Math.max(t[1],o[1]),a[2]=Math.max(t[2],o[2]),a}function Ve(a,t,o){return a[0]=t[0]*o,a[1]=t[1]*o,a[2]=t[2]*o,a}function We(a,t,o,c){return a[0]=t[0]+o[0]*c,a[1]=t[1]+o[1]*c,a[2]=t[2]+o[2]*c,a}function ft(a,t){var o=t[0]-a[0],c=t[1]-a[1],h=t[2]-a[2];return o*o+c*c+h*h}function at(a){var t=a[0],o=a[1],c=a[2];return t*t+o*o+c*c}function ct(a,t){return a[0]=-t[0],a[1]=-t[1],a[2]=-t[2],a}function Mt(a,t){var o=t[0],c=t[1],h=t[2],_=o*o+c*c+h*h;return _>0&&(_=1/Math.sqrt(_)),a[0]=t[0]*_,a[1]=t[1]*_,a[2]=t[2]*_,a}function Ct(a,t){return a[0]*t[0]+a[1]*t[1]+a[2]*t[2]}function gt(a,t,o){var c=t[0],h=t[1],_=t[2],y=o[0],C=o[1],R=o[2];return a[0]=h*R-_*C,a[1]=_*y-c*R,a[2]=c*C-h*y,a}function Ke(a,t,o,c){var h=t[0],_=t[1],y=t[2];return a[0]=h+c*(o[0]-h),a[1]=_+c*(o[1]-_),a[2]=y+c*(o[2]-y),a}function Lt(a,t,o){var c=t[0],h=t[1],_=t[2],y=o[3]*c+o[7]*h+o[11]*_+o[15];return a[0]=(o[0]*c+o[4]*h+o[8]*_+o[12])/(y=y||1),a[1]=(o[1]*c+o[5]*h+o[9]*_+o[13])/y,a[2]=(o[2]*c+o[6]*h+o[10]*_+o[14])/y,a}function xn(a,t,o){var c=t[0],h=t[1],_=t[2];return a[0]=c*o[0]+h*o[3]+_*o[6],a[1]=c*o[1]+h*o[4]+_*o[7],a[2]=c*o[2]+h*o[5]+_*o[8],a}function Ht(a,t,o){var c=o[0],h=o[1],_=o[2],y=t[0],C=t[1],R=t[2],L=h*R-_*C,V=_*y-c*R,$=c*C-h*y,U=h*$-_*V,X=_*L-c*$,ee=c*V-h*L,de=2*o[3];return V*=de,$*=de,X*=2,ee*=2,a[0]=y+(L*=de)+(U*=2),a[1]=C+V+X,a[2]=R+$+ee,a}function le(a,t){return a[0]===t[0]&&a[1]===t[1]&&a[2]===t[2]}var nt=ve,Gt=$e,an=Ue;function Qt(){var a=new M(4);return M!=Float32Array&&(a[0]=0,a[1]=0,a[2]=0,a[3]=0),a}function Zt(a,t,o){return a[0]=t[0]*o,a[1]=t[1]*o,a[2]=t[2]*o,a[3]=t[3]*o,a}function rn(a,t){var o=t[0],c=t[1],h=t[2],_=t[3],y=o*o+c*c+h*h+_*_;return y>0&&(y=1/Math.sqrt(y)),a[0]=o*y,a[1]=c*y,a[2]=h*y,a[3]=_*y,a}function bt(a,t,o){var c=t[0],h=t[1],_=t[2],y=t[3];return a[0]=o[0]*c+o[4]*h+o[8]*_+o[12]*y,a[1]=o[1]*c+o[5]*h+o[9]*_+o[13]*y,a[2]=o[2]*c+o[6]*h+o[10]*_+o[14]*y,a[3]=o[3]*c+o[7]*h+o[11]*_+o[15]*y,a}function fn(){var a=new M(4);return M!=Float32Array&&(a[0]=0,a[1]=0,a[2]=0),a[3]=1,a}function pn(a){return a[0]=0,a[1]=0,a[2]=0,a[3]=1,a}function Vn(a,t,o){o*=.5;var c=t[0],h=t[1],_=t[2],y=t[3],C=Math.sin(o),R=Math.cos(o);return a[0]=c*R+y*C,a[1]=h*R+_*C,a[2]=_*R-h*C,a[3]=y*R-c*C,a}function Nn(a,t,o){o*=.5;var c=t[0],h=t[1],_=t[2],y=t[3],C=Math.sin(o),R=Math.cos(o);return a[0]=c*R-_*C,a[1]=h*R+y*C,a[2]=_*R+c*C,a[3]=y*R-h*C,a}we(),Qt();var Ot,Bn,Sr,Ur,Kn,ui=rn,wr=(Ot=we(),Bn=Ne(1,0,0),Sr=Ne(0,1,0),function(a,t,o){var c=Ct(t,o);return c<-.999999?(gt(Ot,Bn,t),an(Ot)<1e-6&&gt(Ot,Sr,t),Mt(Ot,Ot),function(h,_,y){y*=.5;var C=Math.sin(y);h[0]=C*_[0],h[1]=C*_[1],h[2]=C*_[2],h[3]=Math.cos(y)}(a,Ot,Math.PI),a):c>.999999?(a[0]=0,a[1]=0,a[2]=0,a[3]=1,a):(gt(Ot,t,o),a[0]=Ot[0],a[1]=Ot[1],a[2]=Ot[2],a[3]=1+c,ui(a,a))});function Tr(){var a=new M(2);return M!=Float32Array&&(a[0]=0,a[1]=0),a}function pr(a,t){var o=new M(2);return o[0]=a,o[1]=t,o}function Fr(a,t,o){return a[0]=t[0]+o[0],a[1]=t[1]+o[1],a}function vt(a,t,o){return a[0]=t[0]-o[0],a[1]=t[1]-o[1],a}function yt(a,t,o){return a[0]=t[0]*o,a[1]=t[1]*o,a}function it(a){return Math.hypot(a[0],a[1])}function ln(a,t){var o=t[0],c=t[1],h=o*o+c*c;return h>0&&(h=1/Math.sqrt(h)),a[0]=t[0]*h,a[1]=t[1]*h,a}function Xn(a,t){return a[0]*t[0]+a[1]*t[1]}function vr(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}fn(),fn(),P(),Tr();var Ii,ds,Qs=function(){if(Kn)return Ur;function a(t,o,c,h){this.cx=3*t,this.bx=3*(c-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*o,this.by=3*(h-o)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=o,this.p2x=c,this.p2y=h}return Kn=1,Ur=a,a.prototype={sampleCurveX:function(t){return((this.ax*t+this.bx)*t+this.cx)*t},sampleCurveY:function(t){return((this.ay*t+this.by)*t+this.cy)*t},sampleCurveDerivativeX:function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},solveCurveX:function(t,o){if(o===void 0&&(o=1e-6),t<0)return 0;if(t>1)return 1;for(var c=t,h=0;h<8;h++){var _=this.sampleCurveX(c)-t;if(Math.abs(_)<o)return c;var y=this.sampleCurveDerivativeX(c);if(Math.abs(y)<1e-6)break;c-=_/y}var C=0,R=1;for(c=t,h=0;h<20&&(_=this.sampleCurveX(c),!(Math.abs(_-t)<o));h++)t>_?C=c:R=c,c=.5*(R-C)+C;return c},solve:function(t,o){return this.sampleCurveY(this.solveCurveX(t,o))}},Ur}(),Xs=vr(Qs);function ks(){if(ds)return Ii;function a(t,o){this.x=t,this.y=o}return ds=1,Ii=a,a.prototype={clone:function(){return new a(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,o){return this.clone()._rotateAround(t,o)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var o=t.x-this.x,c=t.y-this.y;return o*o+c*c},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,o){return Math.atan2(this.x*o-this.y*t,this.x*t+this.y*o)},_matMult:function(t){var o=t[2]*this.x+t[3]*this.y;return this.x=t[0]*this.x+t[1]*this.y,this.y=o,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var o=Math.cos(t),c=Math.sin(t),h=c*this.x+o*this.y;return this.x=o*this.x-c*this.y,this.y=h,this},_rotateAround:function(t,o){var c=Math.cos(t),h=Math.sin(t),_=o.y+h*(this.x-o.x)+c*(this.y-o.y);return this.x=o.x+c*(this.x-o.x)-h*(this.y-o.y),this.y=_,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},a.convert=function(t){return t instanceof a?t:Array.isArray(t)?new a(t[0],t[1]):t},Ii}var Rn=vr(ks());function Ri(a,t){if(Array.isArray(a)){if(!Array.isArray(t)||a.length!==t.length)return!1;for(let o=0;o<a.length;o++)if(!Ri(a[o],t[o]))return!1;return!0}if(typeof a=="object"&&a!==null&&t!==null){if(typeof t!="object"||Object.keys(a).length!==Object.keys(t).length)return!1;for(const o in a)if(!Ri(a[o],t[o]))return!1;return!0}return a===t}const _r=Math.PI/180,pa=180/Math.PI;function gi(a){return a*_r}function Ut(a){return a*pa}const ke=[[0,0],[1,0],[1,1],[0,1]];function Oe(a){if(a<=0)return 0;if(a>=1)return 1;const t=a*a,o=t*a;return 4*(a<.5?o:3*(a-t)+o-.75)}function Ye(a,t,o,c){const h=new Xs(a,t,o,c);return function(_){return h.solve(_)}}const dt=Ye(.25,.1,.25,1);function tt(a,t,o){return Math.min(o,Math.max(t,a))}function Tt(a,t,o){return(o=tt((o-a)/(t-a),0,1))*o*(3-2*o)}function $t(a,t,o){const c=o-t,h=((a-t)%c+c)%c+t;return h===t?o:h}function je(a,t,o){if(!a.length)return o(null,[]);let c=a.length;const h=new Array(a.length);let _=null;a.forEach((y,C)=>{t(y,(R,L)=>{R&&(_=R),h[C]=L,--c==0&&o(_,h)})})}function _t(a,...t){for(const o of t)for(const c in o)a[c]=o[c];return a}let Nt=1;function Ft(){return Nt++}function Sn(a){return a<=1?1:Math.pow(2,Math.ceil(Math.log(a)/Math.LN2))}function qn(a,t){a.forEach(o=>{t[o]&&(t[o]=t[o].bind(t))})}function Wn(a,t,o){const c={};for(const h in a)c[h]=t.call(this,a[h],h,a);return c}function Ir(a,t,o){const c={};for(const h in a)t.call(this,a[h],h,a)&&(c[h]=a[h]);return c}function Mr(a){return Array.isArray(a)?a.map(Mr):typeof a=="object"&&a?Wn(a,Mr):a}function Lr(a,t){for(let o=0;o<a.length;o++)if(t.indexOf(a[o])>=0)return!0;return!1}const jt={};function kn(a){jt[a]||(typeof console<"u"&&console.warn(a),jt[a]=!0)}function br(a,t,o){return(o.y-a.y)*(t.x-a.x)>(t.y-a.y)*(o.x-a.x)}function Rr(a){let t=0;for(let o,c,h=0,_=a.length,y=_-1;h<_;y=h++)o=a[h],c=a[y],t+=(c.x-o.x)*(o.y+c.y);return t}function vi([a,t,o]){const c=gi(t+90),h=gi(o);return{x:a*Math.cos(c)*Math.sin(h),y:a*Math.sin(c)*Math.sin(h),z:a*Math.cos(h),azimuthal:t,polar:o}}function ci(a){return(typeof self<"u"||a!==void 0)&&typeof WorkerGlobalScope<"u"&&(a!==void 0?a:self)instanceof WorkerGlobalScope}function xi(a){const t={};if(a.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(o,c,h,_)=>{const y=h||_;return t[c]=!y||y.toLowerCase(),""}),t["max-age"]){const o=parseInt(t["max-age"],10);isNaN(o)?delete t["max-age"]:t["max-age"]=o}return t}let ns=null;function os(a,t){return[a[4*t],a[4*t+1],a[4*t+2],a[4*t+3]]}function $i(a,t,o,c){for(;t<o;){const h=t+o>>1;a[h]<c?t=h+1:o=h}return t}function Js(a,t,o,c){for(;t<o;){const h=t+o>>1;a[h]<=c?t=h+1:o=h}return t}function Io(a){return a>0?1/(1.001-a):1+a}function io(a){return a>0?1-1/(1.001-a):-a}function zu(a,t,o){return(a-t.min)*(o.max-o.min)/(t.max-t.min)+o.min}const ko={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i},get API_TILEJSON_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/v[0-9]*\/.*\.json.*$)/i},get API_SPRITE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*\/sprite.*\..*$)/i},get API_FONTS_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/fonts\/v[0-9]*\/)(.*\.pbf.*$)/i},get API_STYLE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*$)/i},get API_CDN_URL_REGEX(){return/^((https?:)?\/\/)?api\.mapbox\.c(n|om)(\/mapbox-gl-js\/)(.*$)/i},get EVENTS_URL(){if(!ko.API_URL)return null;try{const a=new URL(ko.API_URL);return a.hostname==="api.mapbox.cn"?"https://events.mapbox.cn/events/v2":a.hostname==="api.mapbox.com"?"https://events.mapbox.com/events/v2":null}catch{return null}},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",RASTERARRAYS_URL_PREFIX:"rasterarrays/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,DEFAULT_STYLE:"mapbox://styles/mapbox/standard",MAX_PARALLEL_IMAGE_REQUESTS:16,DRACO_URL:"https://api.mapbox.com/mapbox-gl-js/draco_decoder_gltf_v1.5.6.wasm",MESHOPT_URL:"https://api.mapbox.com/mapbox-gl-js/meshopt_base_v0.20.wasm",MESHOPT_SIMD_URL:"https://api.mapbox.com/mapbox-gl-js/meshopt_simd_v0.20.wasm",BUILDING_GEN_URL:"https://api.mapbox.com/mapbox-gl-js/building-gen/building_gen_v0.3.0.wasm",GLYPHS_URL:"mapbox://fonts/mapbox/{fontstack}/{range}.pbf",TILES3D_URL_PREFIX:"3dtiles/v1"};function hu(a){return ko.API_URL_REGEX.test(a)}function Th(a){return ko.API_SPRITE_REGEX.test(a)}let Ec,Tc,Nu,Va,ma,Ic;function $l(){return Ec==null&&(Ec=self.OffscreenCanvas&&new OffscreenCanvas(1,1).getContext("2d")&&typeof self.createImageBitmap=="function"),Ec}const sl={now:()=>Va!==void 0?Va:performance.now(),setNow(a){Va=a},restoreNow(){Va=void 0},frame(a){const t=requestAnimationFrame(a);return{cancel:()=>cancelAnimationFrame(t)}},getImageData(a,t=0){const{width:o,height:c}=a;ma||(ma=document.createElement("canvas"));const h=ma.getContext("2d",{willReadFrequently:!0});if(!h)throw new Error("failed to create canvas 2d context");return(o>ma.width||c>ma.height)&&(ma.width=o,ma.height=c),h.clearRect(-t,-t,o+2*t,c+2*t),h.drawImage(a,0,0,o,c),h.getImageData(-t,-t,o+2*t,c+2*t)},resolveURL:a=>(Tc||(Tc=document.createElement("a")),Tc.href=a,Tc.href),get devicePixelRatio(){return window.devicePixelRatio},get prefersReducedMotion(){return!!window.matchMedia&&(Nu==null&&(Nu=window.matchMedia("(prefers-reduced-motion: reduce)")),Nu.matches)},hasCanvasFingerprintNoise(){if(Ic!==void 0)return Ic;if(!$l())return Ic=!1,!1;const a=new OffscreenCanvas(85,1),t=a.getContext("2d",{willReadFrequently:!0});let o=0;for(let h=0;h<a.width;++h)t.fillStyle=`rgba(${o++},${o++},${o++}, 255)`,t.fillRect(h,0,1,1);const c=t.getImageData(0,0,a.width,a.height);o=0;for(let h=0;h<c.data.length;++h)if(h%4!=3&&o++!==c.data[h])return Ic=!0,!0;return Ic=!1,!1}};function Ia(a,t){const o=a.indexOf("?");if(o<0)return`${a}?${new URLSearchParams(t).toString()}`;const c=new URLSearchParams(a.slice(o));for(const h in t)c.set(h,t[h]);return`${a.slice(0,o)}?${c.toString()}`}function $a(a,t={persistentParams:[]}){const o=a.indexOf("?");if(o<0)return a;const c=new URLSearchParams,h=new URLSearchParams(a.slice(o));for(const y of t.persistentParams){const C=h.get(y);C&&c.set(y,C)}const _=c.toString();return`${a.slice(0,o)}${_.length>0?`?${_}`:""}`}const Hl="mapbox-tiles";let Ha=500,ka=50;const kc=["language","worldview","jobid"];let El,Mc;function Fu(){try{return caches}catch{}}function fu(){const a=Fu();a&&El==null&&(El=a.open(Hl))}let eo=1/0;const Ul={supported:!1,testSupport:function(a){!Wo&&jl&&(Bo?Qp(a):ta=a)}};let ta,jl,Wo=!1,Bo=!1;const Md=typeof self<"u"?self:{};function Qp(a){const t=a.createTexture();a.bindTexture(a.TEXTURE_2D,t);try{if(a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,jl),a.isContextLost())return;Ul.supported=!0}catch{}a.deleteTexture(t),Wo=!0}Md.document&&(jl=Md.document.createElement("img"),jl.onload=function(){ta&&Qp(ta),ta=null,Bo=!0},jl.onerror=function(){Wo=!0,ta=null},jl.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const Ad={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Iconset:"Iconset",Image:"Image",Model:"Model"};typeof Object.freeze=="function"&&Object.freeze(Ad);class ki extends Error{constructor(t,o,c){o===401&&hu(c)&&(t+=": you may have provided an invalid Mapbox access token. See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes"),super(t),this.status=o,this.url=c}toString(){return`${this.name}: ${this.message} (${this.status}): ${this.url}`}}const Bu=ci()?()=>self.worker.referrer:()=>(location.protocol==="blob:"?parent:self).location.href,Ac=function(a,t){if(!(/^file:/.test(o=a.url)||/^file:/.test(Bu())&&!/^\w+:/.test(o))){if(self.fetch&&self.Request&&self.AbortController&&Request.prototype.hasOwnProperty("signal"))return function(c,h){const _=new AbortController,y=new Request(c.url,{method:c.method||"GET",body:c.body,credentials:c.credentials,headers:c.headers,referrer:Bu(),referrerPolicy:c.referrerPolicy,signal:_.signal});let C=!1,R=!1;const L=(V=y.url).indexOf("sku=")>0&&hu(V);var V;c.type==="json"&&y.headers.set("Accept","application/json");const $=(X,ee,de)=>{if(R)return;if(X&&X.message!=="SecurityError"&&kn(X.toString()),ee&&de)return U(ee);const be=Date.now();fetch(y).then(Ie=>{if(Ie.ok){const Fe=L?Ie.clone():null;return U(Ie,Fe,be)}return h(new ki(Ie.statusText,Ie.status,c.url))}).catch(Ie=>{Ie.name!=="AbortError"&&h(new Error(`${Ie.message} ${c.url}`))})},U=(X,ee,de)=>{(c.type==="arrayBuffer"?X.arrayBuffer():c.type==="json"?X.json():X.text()).then(be=>{R||(ee&&de&&function(Ie,Fe,Be){if(fu(),El==null)return;const pe=xi(Fe.headers.get("Cache-Control")||"");if(pe["no-store"])return;const De={status:Fe.status,statusText:Fe.statusText,headers:new Headers};Fe.headers.forEach((xt,ht)=>De.headers.set(ht,xt)),pe["max-age"]&&De.headers.set("Expires",new Date(Be+1e3*pe["max-age"]).toUTCString());const He=De.headers.get("Expires");if(!He||new Date(He).getTime()-Be<42e4)return;let Ze=$a(Ie.url,{persistentParams:kc});if(Fe.status===206){const xt=Ie.headers.get("Range");if(!xt)return;De.status=200,Ze=Ia(Ze,{range:xt})}(function(xt,ht){if(Mc===void 0)try{new Response(new ReadableStream),Mc=!0}catch{Mc=!1}Mc?ht(xt.body):xt.blob().then(ht).catch(St=>kn(St.message))})(Fe,xt=>{const ht=new Response((St=Fe.status)!==200&&St!==404&&[101,103,204,205,304].includes(St)?null:xt,De);var St;fu(),El?.then(Rt=>Rt.put(Ze,ht)).catch(Rt=>kn(Rt.message))})}(y,ee,de),C=!0,h(null,be,X.headers.get("Cache-Control"),X.headers.get("Expires")))}).catch(be=>{R||h(new Error(be.message))})};return L?function(X,ee){if(fu(),El==null)return ee(null);El.then(de=>{let be=$a(X.url,{persistentParams:kc});const Ie=X.headers.get("Range");Ie&&(be=Ia(be,{range:Ie})),de.match(be).then(Fe=>{const Be=function(pe){if(!pe)return!1;const De=new Date(pe.headers.get("Expires")||0),He=xi(pe.headers.get("Cache-Control")||"");return Number(De)>Date.now()&&!He["no-cache"]}(Fe);de.delete(be).catch(ee),Be&&de.put(be,Fe.clone()).catch(ee),ee(null,Fe,Be)}).catch(ee)}).catch(ee)}(y,$):$(null,null),{cancel:()=>{R=!0,C||_.abort()}}}(a,t);if(ci(self)&&self.worker.actor)return self.worker.actor.send("getResource",a,t,void 0,!0)}var o;return function(c,h){const _=new XMLHttpRequest;_.open(c.method||"GET",c.url,!0),c.type==="arrayBuffer"&&(_.responseType="arraybuffer");for(const y in c.headers)_.setRequestHeader(y,c.headers[y]);return c.type==="json"&&(_.responseType="text",_.setRequestHeader("Accept","application/json")),_.withCredentials=c.credentials==="include",_.onerror=()=>{h(new Error(_.statusText))},_.onload=()=>{if((_.status>=200&&_.status<300||_.status===0)&&_.response!==null){let y=_.response;if(c.type==="json")try{y=JSON.parse(_.response)}catch(C){return h(C)}h(null,y,_.getResponseHeader("Cache-Control"),_.getResponseHeader("Expires"))}else h(new ki(_.statusText,_.status,c.url))},_.send(c.body),{cancel:()=>_.abort()}}(a,t)},Rc=function(a,t){return Ac(_t(a,{type:"arrayBuffer"}),t)};function zs(a){const t=document.createElement("a");return t.href=a,t.protocol===location.protocol&&t.host===location.host}const ga="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let Gl,ql;Gl=[],ql=0;const Vu=function(a,t){if(Ul.supported&&(a.headers||(a.headers={}),a.headers.accept="image/webp,*/*"),ql>=ko.MAX_PARALLEL_IMAGE_REQUESTS){const _={requestParameters:a,callback:t,cancelled:!1,cancel(){this.cancelled=!0}};return Gl.push(_),_}ql++;let o=!1;const c=()=>{if(!o)for(o=!0,ql--;Gl.length&&ql<ko.MAX_PARALLEL_IMAGE_REQUESTS;){const _=Gl.shift(),{requestParameters:y,callback:C,cancelled:R}=_;R||(_.cancel=Vu(y,C).cancel)}},h=Rc(a,(_,y,C,R)=>{c(),_?t(_):y&&(self.createImageBitmap?function(L,V){const $=new Blob([new Uint8Array(L)],{type:"image/png"});createImageBitmap($).then(U=>{V(null,U)}).catch(U=>{V(new Error(`Could not load image because of ${U.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(y,(L,V)=>t(L,V,C,R)):function(L,V){const $=new Image;$.onload=()=>{V(null,$),URL.revokeObjectURL($.src),$.onload=null,requestAnimationFrame(()=>{$.src=ga})},$.onerror=()=>V(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const U=new Blob([new Uint8Array(L)],{type:"image/png"});$.src=L.byteLength?URL.createObjectURL(U):ga}(y,(L,V)=>t(L,V,C,R)))});return{cancel:()=>{h.cancel(),c()}}};var Ih,yo,Of,ol={exports:{}},Rd={exports:{}},Pd={exports:{}},al=function(){if(Of)return ol.exports;Of=1;var a=(Ih||(Ih=1,Rd.exports=function(o,c){var h,_,y,C,R,L,V,$;for(_=o.length-(h=3&o.length),y=c,R=3432918353,L=461845907,$=0;$<_;)V=255&o.charCodeAt($)|(255&o.charCodeAt(++$))<<8|(255&o.charCodeAt(++$))<<16|(255&o.charCodeAt(++$))<<24,++$,y=27492+(65535&(C=5*(65535&(y=(y^=V=(65535&(V=(V=(65535&V)*R+(((V>>>16)*R&65535)<<16)&4294967295)<<15|V>>>17))*L+(((V>>>16)*L&65535)<<16)&4294967295)<<13|y>>>19))+((5*(y>>>16)&65535)<<16)&4294967295))+((58964+(C>>>16)&65535)<<16);switch(V=0,h){case 3:V^=(255&o.charCodeAt($+2))<<16;case 2:V^=(255&o.charCodeAt($+1))<<8;case 1:y^=V=(65535&(V=(V=(65535&(V^=255&o.charCodeAt($)))*R+(((V>>>16)*R&65535)<<16)&4294967295)<<15|V>>>17))*L+(((V>>>16)*L&65535)<<16)&4294967295}return y^=o.length,y=2246822507*(65535&(y^=y>>>16))+((2246822507*(y>>>16)&65535)<<16)&4294967295,y=3266489909*(65535&(y^=y>>>13))+((3266489909*(y>>>16)&65535)<<16)&4294967295,(y^=y>>>16)>>>0}),Rd.exports),t=(yo||(yo=1,Pd.exports=function(o,c){for(var h,_=o.length,y=c^_,C=0;_>=4;)h=1540483477*(65535&(h=255&o.charCodeAt(C)|(255&o.charCodeAt(++C))<<8|(255&o.charCodeAt(++C))<<16|(255&o.charCodeAt(++C))<<24))+((1540483477*(h>>>16)&65535)<<16),y=1540483477*(65535&y)+((1540483477*(y>>>16)&65535)<<16)^(h=1540483477*(65535&(h^=h>>>24))+((1540483477*(h>>>16)&65535)<<16)),_-=4,++C;switch(_){case 3:y^=(255&o.charCodeAt(C+2))<<16;case 2:y^=(255&o.charCodeAt(C+1))<<8;case 1:y=1540483477*(65535&(y^=255&o.charCodeAt(C)))+((1540483477*(y>>>16)&65535)<<16)}return y=1540483477*(65535&(y^=y>>>13))+((1540483477*(y>>>16)&65535)<<16),(y^=y>>>15)>>>0}),Pd.exports);return ol.exports=a,ol.exports.murmur3=a,ol.exports.murmur2=t,ol.exports}(),Pc=vr(al);class na{constructor(t,...o){_t(this,o[0]||{}),this.type=t}}class $u extends na{constructor(t,o={}){super("error",_t({error:t},o))}}function Df(a,t,o){o[a]&&o[a].indexOf(t)!==-1||(o[a]=o[a]||[],o[a].push(t))}function ra(a,t,o){if(o&&o[a]){const c=o[a].indexOf(t);c!==-1&&o[a].splice(c,1)}}class Ua{on(t,o){return this._listeners=this._listeners||{},Df(t,o,this._listeners),this}off(t,o){return ra(t,o,this._listeners),ra(t,o,this._oneTimeListeners),this}once(t,o){return o?(this._oneTimeListeners=this._oneTimeListeners||{},Df(t,o,this._oneTimeListeners),this):new Promise(c=>{this.once(t,c)})}fire(t,o){const c=typeof t=="string"?new na(t,o):t,h=c.type;if(this.listens(h)){c.target=this;const _=this._listeners&&this._listeners[h]?this._listeners[h].slice():[];for(const R of _)R.call(this,c);const y=this._oneTimeListeners&&this._oneTimeListeners[h]?this._oneTimeListeners[h].slice():[];for(const R of y)ra(h,R,this._oneTimeListeners),R.call(this,c);const C=this._eventedParent;C&&(_t(c,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),C.fire(c))}else c instanceof $u&&console.error(c.error);return this}listens(t){return!!(this._listeners&&this._listeners[t]&&this._listeners[t].length>0||this._oneTimeListeners&&this._oneTimeListeners[t]&&this._oneTimeListeners[t].length>0||this._eventedParent&&this._eventedParent.listens(t))}setEventedParent(t,o){return this._eventedParent=t,this._eventedParentData=o,this}}class _a{constructor(t){typeof t=="string"?this.name=t:(this.name=t.name,this.iconsetId=t.iconsetId)}static from(t){return new _a(t)}static toString(t){return t.iconsetId?`${t.name}${t.iconsetId}`:t.name}static parse(t){const[o,c]=t.split("");return new _a({name:o,iconsetId:c})}static isEqual(t,o){return t.name===o.name&&t.iconsetId===o.iconsetId}toString(){return _a.toString(this)}serialize(){return{name:this.name,iconsetId:this.iconsetId}}}var pu,Hu={},ja=function(){if(pu)return Hu;pu=1;var a={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function t(_){return(_=Math.round(_))<0?0:_>255?255:_}function o(_){return t(_[_.length-1]==="%"?parseFloat(_)/100*255:parseInt(_))}function c(_){return(y=_[_.length-1]==="%"?parseFloat(_)/100:parseFloat(_))<0?0:y>1?1:y;var y}function h(_,y,C){return C<0?C+=1:C>1&&(C-=1),6*C<1?_+(y-_)*C*6:2*C<1?y:3*C<2?_+(y-_)*(2/3-C)*6:_}try{Hu.parseCSSColor=function(_){var y,C=_.replace(/ /g,"").toLowerCase();if(C in a)return a[C].slice();if(C[0]==="#")return C.length===4?(y=parseInt(C.substr(1),16))>=0&&y<=4095?[(3840&y)>>4|(3840&y)>>8,240&y|(240&y)>>4,15&y|(15&y)<<4,1]:null:C.length===7&&(y=parseInt(C.substr(1),16))>=0&&y<=16777215?[(16711680&y)>>16,(65280&y)>>8,255&y,1]:null;var R=C.indexOf("("),L=C.indexOf(")");if(R!==-1&&L+1===C.length){var V=C.substr(0,R),$=C.substr(R+1,L-(R+1)).split(","),U=1;switch(V){case"rgba":if($.length!==4)return null;U=c($.pop());case"rgb":return $.length!==3?null:[o($[0]),o($[1]),o($[2]),U];case"hsla":if($.length!==4)return null;U=c($.pop());case"hsl":if($.length!==3)return null;var X=(parseFloat($[0])%360+360)%360/360,ee=c($[1]),de=c($[2]),be=de<=.5?de*(ee+1):de+ee-de*ee,Ie=2*de-be;return[t(255*h(Ie,be,X+1/3)),t(255*h(Ie,be,X)),t(255*h(Ie,be,X-1/3)),U];default:return null}}return null}}catch{}return Hu}();class Bi{constructor(t,o,c,h=1){this.r=t,this.g=o,this.b=c,this.a=h}static parse(t){if(!t)return;if(t instanceof Bi)return t;if(typeof t!="string")return;const o=ja.parseCSSColor(t);return o?new Bi(o[0]/255,o[1]/255,o[2]/255,o[3]):void 0}toString(){const[t,o,c,h]=[this.r,this.g,this.b,this.a];return`rgba(${Math.round(255*t)},${Math.round(255*o)},${Math.round(255*c)},${h})`}toNonPremultipliedRenderColor(t){const{r:o,g:c,b:h,a:_}=this;return new em(t,o,c,h,_)}toPremultipliedRenderColor(t){const{r:o,g:c,b:h,a:_}=this;return new zf(t,o*_,c*_,h*_,_)}clone(){return new Bi(this.r,this.g,this.b,this.a)}}class So{constructor(t,o,c,h,_,y=!1){if(this.premultiplied=!1,this.premultiplied=y,t){const C=t.image.height,R=C*C;this.premultiplied?(o=_===0?0:o/_*(C-1),c=_===0?0:c/_*(C-1),h=_===0?0:h/_*(C-1)):(o*=C-1,c*=C-1,h*=C-1);const L=Math.floor(o),V=Math.floor(c),$=Math.floor(h),U=Math.ceil(o),X=Math.ceil(c),ee=Math.ceil(h),de=o-L,be=c-V,Ie=h-$,Fe=t.image.data,Be=4*(L+V*R+$*C),pe=4*(L+V*R+ee*C),De=4*(L+X*R+$*C),He=4*(L+X*R+ee*C),Ze=4*(U+V*R+$*C),xt=4*(U+V*R+ee*C),ht=4*(U+X*R+$*C),St=4*(U+X*R+ee*C);if(Be<0||St>=Fe.length)throw new Error("out of range");this.r=Dr(Dr(Dr(Fe[Be],Fe[pe],Ie),Dr(Fe[De],Fe[He],Ie),be),Dr(Dr(Fe[Ze],Fe[xt],Ie),Dr(Fe[ht],Fe[St],Ie),be),de)/255*(this.premultiplied?_:1),this.g=Dr(Dr(Dr(Fe[Be+1],Fe[pe+1],Ie),Dr(Fe[De+1],Fe[He+1],Ie),be),Dr(Dr(Fe[Ze+1],Fe[xt+1],Ie),Dr(Fe[ht+1],Fe[St+1],Ie),be),de)/255*(this.premultiplied?_:1),this.b=Dr(Dr(Dr(Fe[Be+2],Fe[pe+2],Ie),Dr(Fe[De+2],Fe[He+2],Ie),be),Dr(Dr(Fe[Ze+2],Fe[xt+2],Ie),Dr(Fe[ht+2],Fe[St+2],Ie),be),de)/255*(this.premultiplied?_:1),this.a=_}else this.r=o,this.g=c,this.b=h,this.a=_}toArray(){const{r:t,g:o,b:c,a:h}=this;return[255*t,255*o,255*c,h]}toHslaArray(){let{r:t,g:o,b:c,a:h}=this;if(this.premultiplied){if(h===0)return[0,0,0,0];t/=h,o/=h,c/=h}const _=Math.min(Math.max(t,0),1),y=Math.min(Math.max(o,0),1),C=Math.min(Math.max(c,0),1),R=Math.min(_,y,C),L=Math.max(_,y,C),V=(R+L)/2;if(R===L)return[0,0,100*V,h];const $=L-R,U=V>.5?$/(2-L-R):$/(L+R);let X=0;return L===_?X=(y-C)/$+(y<C?6:0):L===y?X=(C-_)/$+2:L===C&&(X=(_-y)/$+4),X*=60,[Math.min(Math.max(X,0),360),Math.min(Math.max(100*U,0),100),Math.min(Math.max(100*V,0),100),h]}toArray01(){const{r:t,g:o,b:c,a:h}=this;return[t,o,c,h]}toArray01Scaled(t){const{r:o,g:c,b:h}=this;return[o*t,c*t,h*t]}toArray01Linear(){const{r:t,g:o,b:c,a:h}=this;return[Math.pow(t,2.2),Math.pow(o,2.2),Math.pow(c,2.2),h]}}class em extends So{constructor(t,o,c,h,_){super(t,o,c,h,_,!1)}}class zf extends So{constructor(t,o,c,h,_){super(t,o,c,h,_,!0)}}function Dr(a,t,o){return a*(1-o)+t*o}function kh(a,t,o){return a.map((c,h)=>Dr(c,t[h],o))}Bi.black=new Bi(0,0,0,1),Bi.white=new Bi(1,1,1,1),Bi.transparent=new Bi(0,0,0,0),Bi.red=new Bi(1,0,0,1),Bi.blue=new Bi(0,0,1,1);var Ld=Object.freeze({__proto__:null,array:kh,color:function(a,t,o){return new Bi(Dr(a.r,t.r,o),Dr(a.g,t.g,o),Dr(a.b,t.b,o),Dr(a.a,t.a,o))},number:Dr});function Uu(a,...t){for(const o of t)for(const c in o)a[c]=o[c];return a}class Ma extends Error{constructor(t,o){super(o),this.message=o,this.key=t}}class Nf{constructor(t,o=[]){this.parent=t,this.bindings={};for(const[c,h]of o)this.bindings[c]=h}concat(t){return new Nf(this,t)}get(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error(`${t} not found in scope.`)}has(t){return!!this.bindings[t]||!!this.parent&&this.parent.has(t)}}const Ga={kind:"null"},nr={kind:"number"},Ui={kind:"string"},Di={kind:"boolean"},va={kind:"color"},ll={kind:"object"},Ni={kind:"value"},Lc={kind:"collator"},Oc={kind:"formatted"},ia={kind:"resolvedImage"};function Vo(a,t){return{kind:"array",itemType:a,N:t}}function hs(a){if(a.kind==="array"){const t=hs(a.itemType);return typeof a.N=="number"?`array<${t}, ${a.N}>`:a.itemType.kind==="value"?"array":`array<${t}>`}return a.kind}const Od=[Ga,nr,Ui,Di,va,Oc,ll,Vo(Ni),ia];function Dc(a,t){if(t.kind==="error")return null;if(a.kind==="array"){if(t.kind==="array"&&(t.N===0&&t.itemType.kind==="value"||!Dc(a.itemType,t.itemType))&&(typeof a.N!="number"||a.N===t.N))return null}else{if(a.kind===t.kind)return null;if(a.kind==="value"){for(const o of Od)if(!Dc(o,t))return null}}return`Expected ${hs(a)} but found ${hs(t)} instead.`}function Wl(a,t){return t.some(o=>o.kind===a.kind)}function zc(a,t){return t.some(o=>o==="null"?a===null:o==="array"?Array.isArray(a):o==="object"?a&&!Array.isArray(a)&&typeof a=="object":o===typeof a)}function Dd(a,t){return a.kind==="array"&&t.kind==="array"?a.N===t.N&&Dd(a.itemType,t.itemType):a.kind===t.kind}class ju{constructor(t,o,c){this.sensitivity=t?o?"variant":"case":o?"accent":"base",this.locale=c,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(t,o){return this.collator.compare(t,o)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Mh{constructor(t,o,c,h,_){this.text=t.normalize?t.normalize():t,this.image=o,this.scale=c,this.fontStack=h,this.textColor=_}}class Ko{constructor(t){this.sections=t}static fromString(t){return new Ko([new Mh(t,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(t=>t.text.length!==0||!!t.image&&t.image.hasPrimary())}static factory(t){return t instanceof Ko?t:Ko.fromString(t)}toString(){return this.sections.length===0?"":this.sections.map(t=>t.text).join("")}serialize(){const t=["format"];for(const o of this.sections){if(o.image){const h=o.image.getPrimary().id.toString();t.push(["image",h]);continue}t.push(o.text);const c={};o.fontStack&&(c["text-font"]=["literal",o.fontStack.split(",")]),o.scale&&(c["font-scale"]=o.scale),o.textColor&&(c["text-color"]=["rgba"].concat(o.textColor.toNonPremultipliedRenderColor(null).toArray())),t.push(c)}return t}}class Kl{constructor(t,o={}){if(this.id=_a.from(t),this.options=Object.assign({},o),o.transform){const{a:c,b:h,c:_,d:y,e:C,f:R}=o.transform;this.options.transform=new DOMMatrix([c,h,_,y,C,R])}else this.options.transform=new DOMMatrix([1,0,0,1,0,0])}toString(){const{a:t,b:o,c,d:h,e:_,f:y}=this.options.transform;return JSON.stringify({name:this.id.name,iconsetId:this.id.iconsetId,params:this.options.params,transform:{a:t,b:o,c,d:h,e:_,f:y}})}static parse(t){let o,c,h,_;try{({name:o,iconsetId:c,params:h,transform:_}=JSON.parse(t)||{})}catch{return null}if(!o)return null;const{a:y,b:C,c:R,d:L,e:V,f:$}=_||{};return new Kl({name:o,iconsetId:c},{params:h,transform:new DOMMatrix([y,C,R,L,V,$])})}scaleSelf(t,o){return this.options.transform.scaleSelf(t,o),this}}class sa{constructor(t,o,c,h,_=!1){this.primaryId=_a.from(t),this.primaryOptions=o,c&&(this.secondaryId=_a.from(c)),this.secondaryOptions=h,this.available=_}toString(){return this.primaryId&&this.secondaryId?`[${this.primaryId.name},${this.secondaryId.name}]`:this.primaryId.name}hasPrimary(){return!!this.primaryId}getPrimary(){return new Kl(this.primaryId,this.primaryOptions)}hasSecondary(){return!!this.secondaryId}getSecondary(){return this.secondaryId?new Kl(this.secondaryId,this.secondaryOptions):null}static from(t){return typeof t=="string"?sa.build({name:t}):t}static build(t,o,c,h){return!t||typeof t=="object"&&!("name"in t)?null:new sa(t,c,o,h)}}function Gu(a,t,o,c){return typeof a=="number"&&a>=0&&a<=255&&typeof t=="number"&&t>=0&&t<=255&&typeof o=="number"&&o>=0&&o<=255?c===void 0||typeof c=="number"&&c>=0&&c<=1?null:`Invalid rgba value [${[a,t,o,c].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof c=="number"?[a,t,o,c]:[a,t,o]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function ai(a){if(a===null||typeof a=="string"||typeof a=="boolean"||typeof a=="number"||a instanceof Bi||a instanceof ju||a instanceof Ko||a instanceof sa)return!0;if(Array.isArray(a)){for(const t of a)if(!ai(t))return!1;return!0}if(typeof a=="object"){for(const t in a)if(!ai(a[t]))return!1;return!0}return!1}function Jn(a){if(a===null)return Ga;if(typeof a=="string")return Ui;if(typeof a=="boolean")return Di;if(typeof a=="number")return nr;if(a instanceof Bi)return va;if(a instanceof ju)return Lc;if(a instanceof Ko)return Oc;if(a instanceof sa)return ia;if(Array.isArray(a)){const t=a.length;let o;for(const c of a){const h=Jn(c);if(o){if(o===h)continue;o=Ni;break}o=h}return Vo(o||Ni,t)}return ll}function qa(a){const t=typeof a;return a===null?"":t==="string"||t==="number"||t==="boolean"?String(a):a instanceof Ko||a instanceof sa||a instanceof Bi?a.toString():JSON.stringify(a)}class Vr{constructor(t,o){this.type=t,this.value=o}static parse(t,o){if(t.length!==2)return o.error(`'literal' expression requires exactly one argument, but found ${t.length-1} instead.`);if(!ai(t[1]))return o.error("invalid value");const c=t[1];let h=Jn(c);const _=o.expectedType;return h.kind!=="array"||h.N!==0||!_||_.kind!=="array"||typeof _.N=="number"&&_.N!==0||(h=_),new Vr(h,c)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof Bi?["rgba"].concat(this.value.toNonPremultipliedRenderColor(null).toArray()):this.value instanceof Ko?this.value.serialize():this.value}}class to{constructor(t){this.name="ExpressionEvaluationError",this.message=t}toJSON(){return this.message}}const Nc={string:Ui,number:nr,boolean:Di,object:ll};class Pr{constructor(t,o){this.type=t,this.args=o}static parse(t,o){if(t.length<2)return o.error("Expected at least one argument.");let c,h=1;const _=t[0];if(_==="array"){let C,R;if(t.length>2){const L=t[1];if(typeof L!="string"||!(L in Nc)||L==="object")return o.error('The item type argument of "array" must be one of string, number, boolean',1);C=Nc[L],h++}else C=Ni;if(t.length>3){if(t[2]!==null&&(typeof t[2]!="number"||t[2]<0||t[2]!==Math.floor(t[2])))return o.error('The length argument to "array" must be a positive integer literal',2);R=t[2],h++}c=Vo(C,R)}else c=Nc[_];const y=[];for(;h<t.length;h++){const C=o.parse(t[h],h,Ni);if(!C)return null;y.push(C)}return new Pr(c,y)}evaluate(t){for(let o=0;o<this.args.length;o++){const c=this.args[o].evaluate(t);if(!Dc(this.type,Jn(c)))return c;if(o===this.args.length-1)throw new to(`The expression ${JSON.stringify(this.args[o].serialize())} evaluated to ${hs(Jn(c))} but was expected to be of type ${hs(this.type)}.`)}return null}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}serialize(){const t=this.type,o=[t.kind];if(t.kind==="array"){const c=t.itemType;if(c.kind==="string"||c.kind==="number"||c.kind==="boolean"){o.push(c.kind);const h=t.N;(typeof h=="number"||this.args.length>1)&&o.push(h)}}return o.concat(this.args.map(c=>c.serialize()))}}class Fc{constructor(t){this.type=Oc,this.sections=t}static parse(t,o){if(t.length<2)return o.error("Expected at least one argument.");const c=t[1];if(!Array.isArray(c)&&typeof c=="object")return o.error("First argument must be an image or text section.");const h=[];let _=!1;for(let y=1;y<=t.length-1;++y){const C=t[y];if(_&&typeof C=="object"&&!Array.isArray(C)){_=!1;let R=null;if(C["font-scale"]&&(R=o.parseObjectValue(C["font-scale"],y,"font-scale",nr),!R))return null;let L=null;if(C["text-font"]&&(L=o.parseObjectValue(C["text-font"],y,"text-font",Vo(Ui)),!L))return null;let V=null;if(C["text-color"]&&(V=o.parseObjectValue(C["text-color"],y,"text-color",va),!V))return null;const $=h[h.length-1];$.scale=R,$.font=L,$.textColor=V}else{const R=o.parse(t[y],y,Ni);if(!R)return null;const L=R.type.kind;if(L!=="string"&&L!=="value"&&L!=="null"&&L!=="resolvedImage")return o.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");_=!0,h.push({content:R,scale:null,font:null,textColor:null})}}return new Fc(h)}evaluate(t){return new Ko(this.sections.map(o=>{const c=o.content.evaluate(t);return Dd(Jn(c),ia)?new Mh("",c,null,null,null):new Mh(qa(c),null,o.scale?o.scale.evaluate(t):null,o.font?o.font.evaluate(t).join(","):null,o.textColor?o.textColor.evaluate(t):null)}))}eachChild(t){for(const o of this.sections)t(o.content),o.scale&&t(o.scale),o.font&&t(o.font),o.textColor&&t(o.textColor)}outputDefined(){return!1}serialize(){const t=["format"];for(const o of this.sections){t.push(o.content.serialize());const c={};o.scale&&(c["font-scale"]=o.scale.serialize()),o.font&&(c["text-font"]=o.font.serialize()),o.textColor&&(c["text-color"]=o.textColor.serialize()),t.push(c)}return t}}class Bc{constructor(t,o,c,h){this._imageWarnHistory={},this.type=ia,this.namePrimary=t,this.nameSecondary=o,c&&(this.paramsPrimary=c.params,this.iconsetIdPrimary=c.iconset?c.iconset.id:void 0),h&&(this.paramsSecondary=h.params,this.iconsetIdSecondary=h.iconset?h.iconset.id:void 0)}static parse(t,o){if(t.length<2)return o.error("Expected two or more arguments.");let c=1;const h=[];function _(){if(c<t.length){const C=o.parse(t[c],c++,Ui);return C?(h.push({image:C,options:{}}),!0):(o.error(h.length?"Secondary image variant is not a string.":"No image name provided."),!1)}return!0}function y(){if(c<t.length){const R=t[c];if((C=R)===null||typeof C!="object"||Array.isArray(C))return!0;const L=R.params,V=R.iconset,$=o.concat(c);if(!L&&!V)return c++,!0;if(L){if(typeof L!="object"||L.constructor!==Object)return $.error('Image options "params" should be an object'),!1;const U={},X=$.concat(void 0,"params");for(const ee in L){if(!ee)return X.error("Image parameter name should be non-empty"),!1;const de=X.concat(void 0,ee).parse(L[ee],void 0,va,void 0,{typeAnnotation:"coerce"});if(!de)return!1;U[ee]=de}h[h.length-1].options.params=U}if(V){if(typeof V!="object"||V.constructor!==Object)return $.error('Image options "iconset" should be an object'),!1;if(!V.id)return $.error('Image options "iconset" should have an "id" property'),!1;h[h.length-1].options.iconset=V}return c++,!0}var C;return!0}for(let C=0;C<2;C++)if(!_()||!y())return;return new Bc(h[0].image,h[1]?h[1].image:void 0,h[0].options,h[1]?h[1].options:void 0)}evaluateParams(t,o){const c={};if(o){for(const h in o)if(o[h])try{c[h]=o[h].evaluate(t)}catch{continue}if(Object.keys(c).length!==0)return{params:c}}}evaluate(t){const o={name:this.namePrimary.evaluate(t),iconsetId:this.iconsetIdPrimary},c=this.nameSecondary?{name:this.nameSecondary.evaluate(t),iconsetId:this.iconsetIdSecondary}:void 0,h=sa.build(o,c,this.paramsPrimary?this.evaluateParams(t,this.paramsPrimary):void 0,this.paramsSecondary?this.evaluateParams(t,this.paramsSecondary):void 0);if(h&&t.availableImages){const _=h.getPrimary().id;if(h.available=t.availableImages.some(y=>_a.isEqual(y,_)),h.available){const y=h.getSecondary()?h.getSecondary().id:null;y&&(h.available=t.availableImages.some(C=>_a.isEqual(C,y)))}}return h}eachChild(t){if(t(this.namePrimary),this.paramsPrimary)for(const o in this.paramsPrimary)this.paramsPrimary[o]&&t(this.paramsPrimary[o]);if(this.nameSecondary&&(t(this.nameSecondary),this.paramsSecondary))for(const o in this.paramsSecondary)this.paramsSecondary[o]&&t(this.paramsSecondary[o])}outputDefined(){return!1}serializeOptions(t,o){const c={};if(o&&(c.iconset={id:o}),t){c.params={};for(const h in t)t[h]&&(c.params[h]=t[h].serialize())}return Object.keys(c).length>0?c:void 0}serialize(){const t=["image",this.namePrimary.serialize()];if(this.paramsPrimary||this.iconsetIdPrimary){const o=this.serializeOptions(this.paramsPrimary,this.iconsetIdPrimary);o&&t.push(o)}if(this.nameSecondary&&(t.push(this.nameSecondary.serialize()),this.paramsSecondary||this.iconsetIdSecondary)){const o=this.serializeOptions(this.paramsSecondary,this.iconsetIdSecondary);o&&t.push(o)}return t}}function mu(a){return a instanceof Number?"number":a instanceof String?"string":a instanceof Boolean?"boolean":Array.isArray(a)?"array":a===null?"null":typeof a}const tm={"to-boolean":Di,"to-color":va,"to-number":nr,"to-string":Ui};class Wa{constructor(t,o){this.type=t,this.args=o}static parse(t,o){if(t.length<2)return o.error("Expected at least one argument.");const c=t[0],h=[];let _=Ga;if(c==="to-array"){if(!Array.isArray(t[1]))return null;const y=t[1].length;if(o.expectedType){if(o.expectedType.kind!=="array")return o.error(`Expected ${o.expectedType.kind} but found array.`);_=Vo(o.expectedType.itemType,y)}else{if(!(y>0&&ai(t[1][0])))return null;_=Vo(Jn(t[1][0]),y)}for(let C=0;C<y;C++){const R=t[1][C];let L;if(mu(R)==="array")L=o.parse(R,void 0,_.itemType);else{const V=mu(R);if(V!==_.itemType.kind)return o.error(`Expected ${_.itemType.kind} but found ${V}.`);L=o.registry.literal.parse(["literal",R===void 0?null:R],o)}if(!L)return null;h.push(L)}}else{if((c==="to-boolean"||c==="to-string")&&t.length!==2)return o.error("Expected one argument.");_=tm[c];for(let y=1;y<t.length;y++){const C=o.parse(t[y],y,Ni);if(!C)return null;h.push(C)}}return new Wa(_,h)}evaluate(t){if(this.type.kind==="boolean")return!!this.args[0].evaluate(t);if(this.type.kind==="color"){let o,c;for(const h of this.args){if(o=h.evaluate(t),c=null,o instanceof Bi)return o;if(typeof o=="string"){const _=t.parseColor(o);if(_)return _}else if(Array.isArray(o)&&(c=o.length<3||o.length>4?`Invalid rbga value ${JSON.stringify(o)}: expected an array containing either three or four numeric values.`:Gu(o[0],o[1],o[2],o[3]),!c))return new Bi(o[0]/255,o[1]/255,o[2]/255,o[3])}throw new to(c||`Could not parse color from value '${typeof o=="string"?o:String(JSON.stringify(o))}'`)}if(this.type.kind==="number"){let o=null;for(const c of this.args){if(o=c.evaluate(t),o===null)return 0;const h=Number(o);if(!isNaN(h))return h}throw new to(`Could not convert ${JSON.stringify(o)} to number.`)}return this.type.kind==="formatted"?Ko.fromString(qa(this.args[0].evaluate(t))):this.type.kind==="resolvedImage"?sa.build(qa(this.args[0].evaluate(t))):this.type.kind==="array"?this.args.map(o=>o.evaluate(t)):qa(this.args[0].evaluate(t))}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}serialize(){if(this.type.kind==="formatted")return new Fc([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new Bc(this.args[0]).serialize();const t=this.type.kind==="array"?[]:[`to-${this.type.kind}`];return this.eachChild(o=>{t.push(o.serialize())}),t}}const Yo=["Unknown","Point","LineString","Polygon"];class Vc{constructor(t,o){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null,this.scope=t,this.options=o}id(){return this.feature&&this.feature.id!==void 0?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Yo[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}measureLight(t){return this.globals.brightness||0}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const t=this.featureDistanceData.center,o=this.featureDistanceData.scale,{x:c,y:h}=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(c*o-t[0])+this.featureDistanceData.bearing[1]*(h*o-t[1])}return 0}parseColor(t){let o=this._parseColorCache[t];return o||(o=this._parseColorCache[t]=Bi.parse(t)),o}getConfig(t){return this.options?this.options.get(t):null}}class bo{constructor(t,o,c,h,_){this.name=t,this.type=o,this._evaluate=c,this.args=h,this._overloadIndex=_}evaluate(t){if(!this._evaluate){const o=bo.definitions[this.name];this._evaluate=Array.isArray(o)?o[2]:o.overloads[this._overloadIndex][1]}return this._evaluate(t,this.args)}eachChild(t){this.args.forEach(t)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(t=>t.serialize()))}static parse(t,o){const c=t[0],h=bo.definitions[c];if(!h)return o.error(`Unknown expression "${c}". If you wanted a literal array, use ["literal", [...]].`,0);const _=Array.isArray(h)?h[0]:h.type,y=Array.isArray(h)?[[h[1],h[2]]]:h.overloads,C=[];let R=null,L=-1;for(const[V,$]of y){if(Array.isArray(V)&&V.length!==t.length-1)continue;C.push(V),L++,R=new cm(o.registry,o.path,null,o.scope,void 0,o._scope,o.options);const U=[];let X=!1;for(let ee=1;ee<t.length;ee++){const de=t[ee],be=Array.isArray(V)?V[ee-1]:V.type,Ie=R.parse(de,1+U.length,be);if(!Ie){X=!0;break}U.push(Ie)}if(!X)if(Array.isArray(V)&&V.length!==U.length)R.error(`Expected ${V.length} arguments, but found ${U.length} instead.`);else{for(let ee=0;ee<U.length;ee++){const de=Array.isArray(V)?V[ee]:V.type,be=U[ee];R.concat(ee+1).checkSubtype(de,be.type)}if(R.errors.length===0)return new bo(c,_,$,U,L)}}if(C.length===1)o.errors.push(...R.errors);else{const V=(C.length?C:y.map(([U])=>U)).map(Ah).join(" | "),$=[];for(let U=1;U<t.length;U++){const X=o.parse(t[U],1+$.length);if(!X)return null;$.push(hs(X.type))}o.error(`Expected arguments of type ${V}, but found (${$.join(", ")}) instead.`)}return null}static register(t,o){bo.definitions=o;for(const c in o)t[c]=bo}}function Ah(a){return Array.isArray(a)?`(${a.map(hs).join(", ")})`:`(${hs(a.type)}...)`}class Tl{constructor(t,o,c){this.type=Lc,this.locale=c,this.caseSensitive=t,this.diacriticSensitive=o}static parse(t,o){if(t.length!==2)return o.error("Expected one argument.");const c=t[1];if(typeof c!="object"||Array.isArray(c))return o.error("Collator options argument must be an object.");const h=c["case-sensitive"]===void 0?o.parse(!1,1,Di):o.parseObjectValue(c["case-sensitive"],1,"case-sensitive",Di);if(!h)return null;const _=c["diacritic-sensitive"]===void 0?o.parse(!1,1,Di):o.parseObjectValue(c["diacritic-sensitive"],1,"diacritic-sensitive",Di);if(!_)return null;let y=null;return c.locale&&(y=o.parseObjectValue(c.locale,1,"locale",Ui),!y)?null:new Tl(h,_,y)}evaluate(t){return new ju(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)}eachChild(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)}outputDefined(){return!1}serialize(){const t={};return t["case-sensitive"]=this.caseSensitive.serialize(),t["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(t.locale=this.locale.serialize()),["collator",t]}}function Oo(a,t,o=0,c=a.length-1,h=v0){for(;c>o;){if(c-o>600){const R=c-o+1,L=t-o+1,V=Math.log(R),$=.5*Math.exp(2*V/3),U=.5*Math.sqrt(V*$*(R-$)/R)*(L-R/2<0?-1:1);Oo(a,t,Math.max(o,Math.floor(t-L*$/R+U)),Math.min(c,Math.floor(t+(R-L)*$/R+U)),h)}const _=a[t];let y=o,C=c;for(qu(a,o,t),h(a[c],_)>0&&qu(a,o,c);y<C;){for(qu(a,y,C),y++,C--;h(a[y],_)<0;)y++;for(;h(a[C],_)>0;)C--}h(a[o],_)===0?qu(a,o,C):(C++,qu(a,C,c)),C<=t&&(o=C+1),t<=C&&(c=C-1)}}function qu(a,t,o){const c=a[t];a[t]=a[o],a[o]=c}function v0(a,t){return a<t?-1:a>t?1:0}function nm(a){let t=0;for(let o,c,h=0,_=a.length,y=_-1;h<_;y=h++)o=a[h],c=a[y],t+=(c.x-o.x)*(o.y+c.y);return t}function Yl(a,t){a[0]=Math.min(a[0],t[0]),a[1]=Math.min(a[1],t[1]),a[2]=Math.max(a[2],t[0]),a[3]=Math.max(a[3],t[1])}function $c(a,t){return!(a[0]<=t[0]||a[2]>=t[2]||a[1]<=t[1]||a[3]>=t[3])}function Wu(a,t,o){const c=a[0]-t[0],h=a[1]-t[1],_=a[0]-o[0],y=a[1]-o[1];return c*y-_*h==0&&c*_<=0&&h*y<=0}function ul(a,t,o=!1){let c=!1;for(let C=0,R=t.length;C<R;C++){const L=t[C];for(let V=0,$=L.length,U=$-1;V<$;U=V++){const X=L[U],ee=L[V];if(Wu(a,X,ee))return o;(_=X)[1]>(h=a)[1]!=(y=ee)[1]>h[1]&&h[0]<(y[0]-_[0])*(h[1]-_[1])/(y[1]-_[1])+_[0]&&(c=!c)}}var h,_,y;return c}function rm(a,t,o,c){const h=c[0]-o[0],_=c[1]-o[1],y=(a[0]-o[0])*_-h*(a[1]-o[1]),C=(t[0]-o[0])*_-h*(t[1]-o[1]);return y>0&&C<0||y<0&&C>0}function zd(a,t,o,c){return(h=[c[0]-o[0],c[1]-o[1]])[0]*(_=[t[0]-a[0],t[1]-a[1]])[1]-h[1]*_[0]!=0&&!(!rm(a,t,o,c)||!rm(o,c,a,t));var h,_}function ya(a){const t=new Rn(Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY),o=new Rn(Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY);for(const c of a[0])t.x>c.x&&(t.x=c.x),t.y>c.y&&(t.y=c.y),o.x<c.x&&(o.x=c.x),o.y<c.y&&(o.y=c.y);return{min:t,max:o}}const Do=8192;function k(a,t){const o=(180+a[0])/360,c=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+a[1]*Math.PI/360)))/360,h=Math.pow(2,t.z);return[Math.round(o*h*Do),Math.round(c*h*Do)]}function g(a,t){for(let o=0;o<t.length;o++)if(ul(a,t[o]))return!0;return!1}function v(a,t,o){for(const c of o)for(let h=0,_=c.length,y=_-1;h<_;y=h++)if(zd(a,t,c[y],c[h]))return!0;return!1}function I(a,t){for(let o=0;o<a.length;++o)if(!ul(a[o],t))return!1;for(let o=0;o<a.length-1;++o)if(v(a[o],a[o+1],t))return!1;return!0}function H(a,t){for(let o=0;o<t.length;o++)if(I(a,t[o]))return!0;return!1}function ne(a,t,o){const c=[];for(let h=0;h<a.length;h++){const _=[];for(let y=0;y<a[h].length;y++){const C=k(a[h][y],o);Yl(t,C),_.push(C)}c.push(_)}return c}function Se(a,t,o){const c=[];for(let h=0;h<a.length;h++){const _=ne(a[h],t,o);c.push(_)}return c}function Le(a,t,o,c){if(a[0]<o[0]||a[0]>o[2]){const h=.5*c;let _=a[0]-o[0]>h?-c:o[0]-a[0]>h?c:0;_===0&&(_=a[0]-o[2]>h?-c:o[2]-a[0]>h?c:0),a[0]+=_}Yl(t,a)}function et(a,t,o,c){const h=Math.pow(2,c.z)*Do,_=[c.x*Do,c.y*Do],y=[];if(!a)return y;for(const C of a)for(const R of C){const L=[R.x+_[0],R.y+_[1]];Le(L,t,o,h),y.push(L)}return y}function Et(a,t,o,c){const h=Math.pow(2,c.z)*Do,_=[c.x*Do,c.y*Do],y=[];if(!a)return y;for(const R of a){const L=[];for(const V of R){const $=[V.x+_[0],V.y+_[1]];Yl(t,$),L.push($)}y.push(L)}if(t[2]-t[0]<=h/2){(C=t)[0]=C[1]=1/0,C[2]=C[3]=-1/0;for(const R of y)for(const L of R)Le(L,t,o,h)}var C;return y}class tn{constructor(t,o){this.type=Di,this.geojson=t,this.geometries=o}static parse(t,o){if(t.length!==2)return o.error(`'within' expression requires exactly one argument, but found ${t.length-1} instead.`);if(ai(t[1])){const c=t[1];if(c.type==="FeatureCollection")for(let h=0;h<c.features.length;++h){const _=c.features[h].geometry.type;if(_==="Polygon"||_==="MultiPolygon")return new tn(c,c.features[h].geometry)}else if(c.type==="Feature"){const h=c.geometry.type;if(h==="Polygon"||h==="MultiPolygon")return new tn(c,c.geometry)}else if(c.type==="Polygon"||c.type==="MultiPolygon")return new tn(c,c)}return o.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(t){if(t.geometry()!=null&&t.canonicalID()!=null){if(t.geometryType()==="Point")return function(o,c){const h=[1/0,1/0,-1/0,-1/0],_=[1/0,1/0,-1/0,-1/0],y=o.canonicalID();if(!y)return!1;if(c.type==="Polygon"){const C=ne(c.coordinates,_,y),R=et(o.geometry(),h,_,y);if(!$c(h,_))return!1;for(const L of R)if(!ul(L,C))return!1}if(c.type==="MultiPolygon"){const C=Se(c.coordinates,_,y),R=et(o.geometry(),h,_,y);if(!$c(h,_))return!1;for(const L of R)if(!g(L,C))return!1}return!0}(t,this.geometries);if(t.geometryType()==="LineString")return function(o,c){const h=[1/0,1/0,-1/0,-1/0],_=[1/0,1/0,-1/0,-1/0],y=o.canonicalID();if(!y)return!1;if(c.type==="Polygon"){const C=ne(c.coordinates,_,y),R=Et(o.geometry(),h,_,y);if(!$c(h,_))return!1;for(const L of R)if(!I(L,C))return!1}if(c.type==="MultiPolygon"){const C=Se(c.coordinates,_,y),R=Et(o.geometry(),h,_,y);if(!$c(h,_))return!1;for(const L of R)if(!H(L,C))return!1}return!0}(t,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}const vn={kilometers:1,miles:1e3/1609.344,nauticalmiles:1e3/1852,meters:1e3,metres:1e3,yards:1e3/.9144,feet:1e3/.3048,inches:1e3/.0254},or=1/298.257223563,$r=or*(2-or),Xr=Math.PI/180;class _i{static fromTile(t,o,c){const h=Math.PI*(1-2*(t+.5)/Math.pow(2,o)),_=Math.atan(.5*(Math.exp(h)-Math.exp(-h)))/Xr;return new _i(_,c)}static get units(){return vn}constructor(t,o){if(t===void 0)throw new Error("No latitude given.");if(o&&!vn[o])throw new Error(`Unknown unit ${o}. Use one of: ${Object.keys(vn).join(", ")}`);const c=6378.137*Xr*(o?vn[o]:1),h=Math.cos(t*Xr),_=1/(1-$r*(1-h*h)),y=Math.sqrt(_);this.kx=c*y*h,this.ky=c*y*_*(1-$r)}distance(t,o){const c=rs(t[0]-o[0])*this.kx,h=(t[1]-o[1])*this.ky;return Math.sqrt(c*c+h*h)}bearing(t,o){const c=rs(o[0]-t[0])*this.kx;return Math.atan2(c,(o[1]-t[1])*this.ky)/Xr}destination(t,o,c){const h=c*Xr;return this.offset(t,Math.sin(h)*o,Math.cos(h)*o)}offset(t,o,c){return[t[0]+o/this.kx,t[1]+c/this.ky]}lineDistance(t){let o=0;for(let c=0;c<t.length-1;c++)o+=this.distance(t[c],t[c+1]);return o}area(t){let o=0;for(let c=0;c<t.length;c++){const h=t[c];for(let _=0,y=h.length,C=y-1;_<y;C=_++)o+=rs(h[_][0]-h[C][0])*(h[_][1]+h[C][1])*(c?-1:1)}return Math.abs(o)/2*this.kx*this.ky}along(t,o){let c=0;if(o<=0)return t[0];for(let h=0;h<t.length-1;h++){const _=t[h],y=t[h+1],C=this.distance(_,y);if(c+=C,c>o)return ss(_,y,(o-(c-C))/C)}return t[t.length-1]}pointToSegmentDistance(t,o,c){let[h,_]=o,y=rs(c[0]-h)*this.kx,C=(c[1]-_)*this.ky;if(y!==0||C!==0){const R=(rs(t[0]-h)*this.kx*y+(t[1]-_)*this.ky*C)/(y*y+C*C);R>1?(h=c[0],_=c[1]):R>0&&(h+=y/this.kx*R,_+=C/this.ky*R)}return y=rs(t[0]-h)*this.kx,C=(t[1]-_)*this.ky,Math.sqrt(y*y+C*C)}pointOnLine(t,o){let c=1/0,h=t[0][0],_=t[0][1],y=0,C=0;for(let R=0;R<t.length-1;R++){let L=t[R][0],V=t[R][1],$=rs(t[R+1][0]-L)*this.kx,U=(t[R+1][1]-V)*this.ky,X=0;$===0&&U===0||(X=(rs(o[0]-L)*this.kx*$+(o[1]-V)*this.ky*U)/($*$+U*U),X>1?(L=t[R+1][0],V=t[R+1][1]):X>0&&(L+=$/this.kx*X,V+=U/this.ky*X)),$=rs(o[0]-L)*this.kx,U=(o[1]-V)*this.ky;const ee=$*$+U*U;ee<c&&(c=ee,h=L,_=V,y=R,C=X)}return{point:[h,_],index:y,t:Math.max(0,Math.min(1,C))}}lineSlice(t,o,c){let h=this.pointOnLine(c,t),_=this.pointOnLine(c,o);if(h.index>_.index||h.index===_.index&&h.t>_.t){const L=h;h=_,_=L}const y=[h.point],C=h.index+1,R=_.index;!fs(c[C],y[0])&&C<=R&&y.push(c[C]);for(let L=C+1;L<=R;L++)y.push(c[L]);return fs(c[R],_.point)||y.push(_.point),y}lineSliceAlong(t,o,c){let h=0;const _=[];for(let y=0;y<c.length-1;y++){const C=c[y],R=c[y+1],L=this.distance(C,R);if(h+=L,h>t&&_.length===0&&_.push(ss(C,R,(t-(h-L))/L)),h>=o)return _.push(ss(C,R,(o-(h-L))/L)),_;h>t&&_.push(R)}return _}bufferPoint(t,o){const c=o/this.ky,h=o/this.kx;return[t[0]-h,t[1]-c,t[0]+h,t[1]+c]}bufferBBox(t,o){const c=o/this.ky,h=o/this.kx;return[t[0]-h,t[1]-c,t[2]+h,t[3]+c]}insideBBox(t,o){return rs(t[0]-o[0])>=0&&rs(t[0]-o[2])<=0&&t[1]>=o[1]&&t[1]<=o[3]}}function fs(a,t){return a[0]===t[0]&&a[1]===t[1]}function ss(a,t,o){const c=rs(t[0]-a[0]);return[a[0]+c*o,a[1]+(t[1]-a[1])*o]}function rs(a){for(;a<-180;)a+=360;for(;a>180;)a-=360;return a}class Co{constructor(t=[],o=(c,h)=>c<h?-1:c>h?1:0){if(this.data=t,this.length=this.data.length,this.compare=o,this.length>0)for(let c=(this.length>>1)-1;c>=0;c--)this._down(c)}push(t){this.data.push(t),this._up(this.length++)}pop(){if(this.length===0)return;const t=this.data[0],o=this.data.pop();return--this.length>0&&(this.data[0]=o,this._down(0)),t}peek(){return this.data[0]}_up(t){const{data:o,compare:c}=this,h=o[t];for(;t>0;){const _=t-1>>1,y=o[_];if(c(h,y)>=0)break;o[t]=y,t=_}o[t]=h}_down(t){const{data:o,compare:c}=this,h=this.length>>1,_=o[t];for(;t<h;){let y=1+(t<<1);const C=y+1;if(C<this.length&&c(o[C],o[y])<0&&(y=C),c(o[y],_)>=0)break;o[t]=o[y],t=y}o[t]=_}}var Pn=8192;function Zl(a,t){return t.dist-a.dist}const Il=100,Ku=50;function Hc(a){const t=[1/0,1/0,-1/0,-1/0];if(t.length!==a.length)return!1;for(let o=0;o<t.length;o++)if(t[o]!==a[o])return!1;return!0}function Uc(a){return a[1]-a[0]+1}function cl(a,t){const o=a[1]>=a[0]&&a[1]<t;return o||console.warn("Distance Expression: Index is out of range"),o}function Nd(a,t){if(a[0]>a[1])return[null,null];const o=Uc(a);if(t){if(o===2)return[a,null];const c=Math.floor(o/2);return[[a[0],a[0]+c],[a[0]+c,a[1]]]}{if(o===1)return[a,null];const c=Math.floor(o/2)-1;return[[a[0],a[0]+c],[a[0]+c+1,a[1]]]}}function Aa(a,t){const o=[1/0,1/0,-1/0,-1/0];if(!cl(t,a.length))return o;for(let c=t[0];c<=t[1];++c)Yl(o,a[c]);return o}function yi(a){const t=[1/0,1/0,-1/0,-1/0];for(let o=0;o<a.length;++o)for(let c=0;c<a[o].length;++c)Yl(t,a[o][c]);return t}function gu(a,t,o){if(Hc(a)||Hc(t))return NaN;let c=0,h=0;return a[2]<t[0]&&(c=t[0]-a[2]),a[0]>t[2]&&(c=a[0]-t[2]),a[1]>t[3]&&(h=a[1]-t[3]),a[3]<t[1]&&(h=t[1]-a[3]),o.distance([0,0],[c,h])}function Ux(a){return 360*a-180}function jx(a){return 360/Math.PI*Math.atan(Math.exp((180-360*a)*Math.PI/180))-90}function im(a,t){const o=Math.pow(2,t.z),c=(a.y/Pn+t.y)/o;return[Ux((a.x/Pn+t.x)/o),jx(c)]}function Gx(a,t){const o=[];for(let c=0;c<a.length;++c)o.push(im(a[c],t));return o}function Ns(a,t,o){const c=o.pointOnLine(t,a).point;return o.distance(a,c)}function gy(a,t,o,c,h){const _=o.slice(c[0],c[1]+1);let y=1/0;for(let C=t[0];C<=t[1];++C)if((y=Math.min(y,Ns(a[C],_,h)))===0)return 0;return y}function y0(a,t,o,c,h){const _=Math.min(h.pointToSegmentDistance(a,o,c),h.pointToSegmentDistance(t,o,c)),y=Math.min(h.pointToSegmentDistance(o,a,t),h.pointToSegmentDistance(c,a,t));return Math.min(_,y)}function qx(a,t,o,c,h){if(!cl(t,a.length)||!cl(c,o.length))return NaN;let _=1/0;for(let y=t[0];y<t[1];++y)for(let C=c[0];C<c[1];++C){if(zd(a[y],a[y+1],o[C],o[C+1]))return 0;_=Math.min(_,y0(a[y],a[y+1],o[C],o[C+1],h))}return _}function Wx(a,t,o,c,h){if(!cl(t,a.length)||!cl(c,o.length))return NaN;let _=1/0;for(let y=t[0];y<=t[1];++y)for(let C=c[0];C<=c[1];++C)if((_=Math.min(_,h.distance(a[y],o[C])))===0)return _;return _}function Kx(a,t,o){if(ul(a,t,!0))return 0;let c=1/0;for(const h of t){const _=h.length;if(_<2)return console.warn("Distance Expression: Invalid polygon!"),NaN;if(h[0]!==h[_-1]&&(c=Math.min(c,o.pointToSegmentDistance(a,h[_-1],h[0])))===0||(c=Math.min(c,Ns(a,h,o)))===0)return c}return c}function Yx(a,t,o,c){if(!cl(t,a.length))return NaN;for(let _=t[0];_<=t[1];++_)if(ul(a[_],o,!0))return 0;let h=1/0;for(let _=t[0];_<t[1];++_)for(const y of o)for(let C=0,R=y.length,L=R-1;C<R;L=C++){if(zd(a[_],a[_+1],y[L],y[C]))return 0;h=Math.min(h,y0(a[_],a[_+1],y[L],y[C],c))}return h}function _y(a,t){for(const o of a)for(let c=0;c<=o.length-1;++c)if(ul(o[c],t,!0))return!0;return!1}function Zx(a,t,o,c=1/0){const h=yi(a),_=yi(t);if(c!==1/0&&gu(h,_,o)>=c)return c;if($c(h,_)){if(_y(a,t))return 0}else if(_y(t,a))return 0;let y=c;for(const C of a)for(let R=0,L=C.length,V=L-1;R<L;V=R++)for(const $ of t)for(let U=0,X=$.length,ee=X-1;U<X;ee=U++){if(zd(C[V],C[R],$[ee],$[U]))return 0;y=Math.min(y,y0(C[V],C[R],$[ee],$[U],o))}return y}function sm(a,t,o,c,h,_,y){if(_===null||y===null)return;const C=gu(Aa(c,_),Aa(h,y),o);C<t&&a.push({dist:C,range1:_,range2:y})}function Xx(a,t,o,c,h=1/0){let _=Math.min(c.distance(a[0],o[0][0]),h);if(_===0)return _;const y=new Co([{dist:0,range1:[0,a.length-1],range2:[0,0]}],Zl),C=t?Ku:Il,R=yi(o);for(;y.length;){const L=y.pop();if(L.dist>=_)continue;const V=L.range1;if(Uc(V)<=C){if(!cl(V,a.length))return NaN;if(t){const $=Yx(a,V,o,c);if((_=Math.min(_,$))===0)return _}else for(let $=V[0];$<=V[1];++$){const U=Kx(a[$],o,c);if((_=Math.min(_,U))===0)return _}}else{const $=Nd(V,t);if($[0]!==null){const U=gu(Aa(a,$[0]),R,c);U<_&&y.push({dist:U,range1:$[0],range2:[0,0]})}if($[1]!==null){const U=gu(Aa(a,$[1]),R,c);U<_&&y.push({dist:U,range1:$[1],range2:[0,0]})}}}return _}function vy(a,t,o,c,h,_=1/0){let y=Math.min(_,h.distance(a[0],o[0]));if(y===0)return y;const C=new Co([{dist:0,range1:[0,a.length-1],range2:[0,o.length-1]}],Zl),R=t?Ku:Il,L=c?Ku:Il;for(;C.length;){const V=C.pop();if(V.dist>=y)continue;const $=V.range1,U=V.range2;if(Uc($)<=R&&Uc(U)<=L){if(!cl($,a.length)||!cl(U,o.length))return NaN;if(t&&c?y=Math.min(y,qx(a,$,o,U,h)):t||c?t&&!c?y=Math.min(y,gy(o,U,a,$,h)):!t&&c&&(y=Math.min(y,gy(a,$,o,U,h))):y=Math.min(y,Wx(a,$,o,U,h)),y===0)return y}else{const X=Nd($,t),ee=Nd(U,c);sm(C,y,h,a,o,X[0],ee[0]),sm(C,y,h,a,o,X[0],ee[1]),sm(C,y,h,a,o,X[1],ee[0]),sm(C,y,h,a,o,X[1],ee[1])}}return y}function b0(a,t,o,c,h=1/0){let _=h;const y=Aa(a,[0,a.length-1]);for(const C of o)if(!(_!==1/0&&gu(y,Aa(C,[0,C.length-1]),c)>=_)&&(_=Math.min(_,vy(a,t,C,!0,c,_)),_===0))return _;return _}function om(a,t,o,c,h=1/0){let _=h;const y=Aa(a,[0,a.length-1]);for(const C of o){if(_!==1/0&&gu(y,yi(C),c)>=_)continue;const R=Xx(a,t,C,c,_);if(isNaN(R))return R;if((_=Math.min(_,R))===0)return _}return _}function x0(a){return a==="Point"||a==="MultiPoint"||a==="LineString"||a==="MultiLineString"||a==="Polygon"||a==="MultiPolygon"}class Fd{constructor(t,o){this.type=nr,this.geojson=t,this.geometries=o}static parse(t,o){if(t.length!==2)return o.error(`'distance' expression requires either one argument, but found ' ${t.length-1} instead.`);if(ai(t[1])){const c=t[1];if(c.type==="FeatureCollection"){for(let h=0;h<c.features.length;++h)if(x0(c.features[h].geometry.type))return new Fd(c,c.features[h].geometry)}else if(c.type==="Feature"){if(x0(c.geometry.type))return new Fd(c,c.geometry)}else if(x0(c.type))return new Fd(c,c)}return o.error("'distance' expression needs to be an array with format ['Distance', GeoJSONObj].")}evaluate(t){const o=t.geometry(),c=t.canonicalID();if(o!=null&&c!=null){if(t.geometryType()==="Point")return function(h,_,y){const C=[];for(const L of h)for(const V of L)C.push(im(V,_));const R=new _i(C[0][1],"meters");return y.type==="Point"||y.type==="MultiPoint"||y.type==="LineString"?vy(C,!1,y.type==="Point"?[y.coordinates]:y.coordinates,y.type==="LineString",R):y.type==="MultiLineString"?b0(C,!1,y.coordinates,R):y.type==="Polygon"||y.type==="MultiPolygon"?om(C,!1,y.type==="Polygon"?[y.coordinates]:y.coordinates,R):null}(o,c,this.geometries);if(t.geometryType()==="LineString")return function(h,_,y){const C=[];for(const L of h){const V=[];for(const $ of L)V.push(im($,_));C.push(V)}const R=new _i(C[0][0][1],"meters");if(y.type==="Point"||y.type==="MultiPoint"||y.type==="LineString")return b0(y.type==="Point"?[y.coordinates]:y.coordinates,y.type==="LineString",C,R);if(y.type==="MultiLineString"){let L=1/0;for(let V=0;V<y.coordinates.length;V++){const $=b0(y.coordinates[V],!0,C,R,L);if(isNaN($))return $;if((L=Math.min(L,$))===0)return L}return L}if(y.type==="Polygon"||y.type==="MultiPolygon"){let L=1/0;for(let V=0;V<C.length;V++){const $=om(C[V],!0,y.type==="Polygon"?[y.coordinates]:y.coordinates,R,L);if(isNaN($))return $;if((L=Math.min(L,$))===0)return L}return L}return null}(o,c,this.geometries);if(t.geometryType()==="Polygon")return function(h,_,y){const C=[];for(const L of function(V,$){const U=V.length;if(U<=1)return[V];const X=[];let ee,de;for(let be=0;be<U;be++){const Ie=nm(V[be]);Ie!==0&&(V[be].area=Math.abs(Ie),de===void 0&&(de=Ie<0),de===Ie<0?(ee&&X.push(ee),ee=[V[be]]):ee.push(V[be]))}return ee&&X.push(ee),X}(h)){const V=[];for(let $=0;$<L.length;++$)V.push(Gx(L[$],_));C.push(V)}const R=new _i(C[0][0][0][1],"meters");if(y.type==="Point"||y.type==="MultiPoint"||y.type==="LineString")return om(y.type==="Point"?[y.coordinates]:y.coordinates,y.type==="LineString",C,R);if(y.type==="MultiLineString"){let L=1/0;for(let V=0;V<y.coordinates.length;V++){const $=om(y.coordinates[V],!0,C,R,L);if(isNaN($))return $;if((L=Math.min(L,$))===0)return L}return L}return y.type==="Polygon"||y.type==="MultiPolygon"?function(L,V,$){let U=1/0;for(const X of L)for(const ee of V){const de=Zx(X,ee,$,U);if(isNaN(de))return de;if((U=Math.min(U,de))===0)return U}return U}(y.type==="Polygon"?[y.coordinates]:y.coordinates,C,R):null}(o,c,this.geometries);console.warn("Distance Expression: currently only evaluates valid Point/LineString/Polygon geometries.")}else console.warn("Distance Expression: requirs valid feature and canonical information.");return null}eachChild(){}outputDefined(){return!0}serialize(){return["distance",this.geojson]}}function Rh(a){if(a instanceof bo&&(a.name==="get"&&a.args.length===1||a.name==="feature-state"||a.name==="has"&&a.args.length===1||a.name==="properties"||a.name==="geometry-type"||a.name==="id"||/^filter-/.test(a.name))||a instanceof tn||a instanceof Fd)return!1;if(a instanceof Lh)return a.featureConstant;let t=!0;return a.eachChild(o=>{t&&!Rh(o)&&(t=!1)}),t}function am(a){if(a instanceof bo&&a.name==="feature-state")return!1;let t=!0;return a.eachChild(o=>{t&&!am(o)&&(t=!1)}),t}function lm(a){if(a instanceof Lh)return new Set([a.key]);let t=new Set;return a.eachChild(o=>{t=new Set([...t,...lm(o)])}),t}function Ph(a,t){if(a instanceof bo&&t.indexOf(a.name)>=0)return!1;let o=!0;return a.eachChild(c=>{o&&!Ph(c,t)&&(o=!1)}),o}function yy(a,t,o){return[a,t,o].filter(Boolean).join("")}function w0(a,t){switch(a){case"string":return qa(t);case"number":return+t;case"boolean":return!!t;case"color":return Bi.parse(t);case"formatted":return Ko.fromString(qa(t));case"resolvedImage":return sa.build(qa(t))}return t}function by(a,t,o,c){return c!==void 0&&(a=c*Math.round(a/c)),t!==void 0&&a<t&&(a=t),o!==void 0&&a>o&&(a=o),a}class Lh{constructor(t,o,c,h=!1){this.type=t,this.key=o,this.scope=c,this.featureConstant=h}static parse(t,o){let c=o.expectedType;if(c==null&&(c=Ni),t.length<2||t.length>3)return o.error("Invalid number of arguments for 'config' expression.");const h=o.parse(t[1],1);if(!(h instanceof Vr))return o.error("Key name of 'config' expression must be a string literal.");let _,y=!0;const C=qa(h.value);if(t.length>=3){const R=o.parse(t[2],2);if(!(R instanceof Vr))return o.error("Scope of 'config' expression must be a string literal.");_=qa(R.value)}if(o.options){const R=yy(C,_,o._scope),L=o.options.get(R);L&&(y=Rh(L.value||L.default))}return new Lh(c,C,_,y)}evaluate(t){const o=yy(this.key,this.scope,t.scope),c=t.getConfig(o);if(!c)return null;const{type:h,value:_,values:y,minValue:C,maxValue:R,stepValue:L}=c,V=c.default.evaluate(t);let $=V;if(_){const U=t.scope;t.scope=(U||"").split("").slice(1).join(""),$=_.evaluate(t),t.scope=U}return h&&($=w0(h,$)),$===void 0||C===void 0&&R===void 0&&L===void 0||(typeof $=="number"?$=by($,C,R,L):Array.isArray($)&&($=$.map(U=>typeof U=="number"?by(U,C,R,L):U))),_!==void 0&&$!==void 0&&y&&!y.includes($)&&($=V,h&&($=w0(h,$))),(h&&h!==this.type||$!==void 0&&!Dd(Jn($),this.type))&&($=w0(this.type.kind,$)),$}eachChild(){}outputDefined(){return!1}serialize(){const t=["config",this.key];return this.scope&&t.concat(this.scope),t}}class um{constructor(t,o){this.type=o.type,this.name=t,this.boundExpression=o}static parse(t,o){if(t.length!==2||typeof t[1]!="string")return o.error("'var' expression requires exactly one string literal argument.");const c=t[1];return o.scope.has(c)?new um(c,o.scope.get(c)):o.error(`Unknown variable "${c}". Make sure "${c}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(t){return this.boundExpression.evaluate(t)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}class cm{constructor(t,o=[],c,h=new Nf,_=[],y,C){this.registry=t,this.path=o,this.key=o.map(R=>typeof R=="string"?`['${R}']`:`[${R}]`).join(""),this.scope=h,this.errors=_,this.expectedType=c,this._scope=y,this.options=C}parse(t,o,c,h,_={}){return o||c?this.concat(o,null,c,h)._parse(t,_):this._parse(t,_)}parseObjectValue(t,o,c,h,_,y={}){return this.concat(o,c,h,_)._parse(t,y)}_parse(t,o){function c(h,_,y){return y==="assert"?new Pr(_,[h]):y==="coerce"?new Wa(_,[h]):h}if(t!==null&&typeof t!="string"&&typeof t!="boolean"&&typeof t!="number"||(t=["literal",t]),Array.isArray(t)){if(t.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const h=typeof t[0]=="string"?this.registry[t[0]]:void 0;if(h){let _=h.parse(t,this);if(!_)return null;if(this.expectedType){const y=this.expectedType,C=_.type;if(y.kind!=="string"&&y.kind!=="number"&&y.kind!=="boolean"&&y.kind!=="object"&&y.kind!=="array"||C.kind!=="value")if(y.kind!=="color"&&y.kind!=="formatted"&&y.kind!=="resolvedImage"||C.kind!=="value"&&C.kind!=="string"){if(this.checkSubtype(y,C))return null}else _=c(_,y,o.typeAnnotation||"coerce");else _=c(_,y,o.typeAnnotation||"assert")}if(!(_ instanceof Vr)&&_.type.kind!=="resolvedImage"&&S0(_)){const y=new Vc(this._scope,this.options);try{_=new Vr(_.type,_.evaluate(y))}catch(C){return this.error(C.message),null}}return _}return Wa.parse(["to-array",t],this)}return this.error(t===void 0?"'undefined' value invalid. Use null instead.":typeof t=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof t} instead.`)}concat(t,o,c,h){let _=typeof t=="number"?this.path.concat(t):this.path;_=typeof o=="string"?_.concat(o):_;const y=h?this.scope.concat(h):this.scope;return new cm(this.registry,_,c||null,y,this.errors,this._scope,this.options)}error(t,...o){const c=`${this.key}${o.map(h=>`[${h}]`).join("")}`;this.errors.push(new Ma(c,t))}checkSubtype(t,o){const c=Dc(t,o);return c&&this.error(c),c}}function S0(a){if(a instanceof um)return S0(a.boundExpression);if(a instanceof bo&&a.name==="error"||a instanceof Tl||a instanceof tn||a instanceof Fd||a instanceof Lh)return!1;const t=a instanceof Wa||a instanceof Pr;let o=!0;return a.eachChild(c=>{o=t?o&&S0(c):o&&c instanceof Vr}),!!o&&Rh(a)&&Ph(a,["zoom","heatmap-density","worldview","line-progress","raster-value","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center","measure-light","raster-particle-speed"])}function dm(a,t){const o=a.length-1;let c,h,_=0,y=o,C=0;for(;_<=y;)if(C=Math.floor((_+y)/2),c=a[C],h=a[C+1],c<=t){if(C===o||t<h)return C;_=C+1}else{if(!(c>t))throw new to("Input is not a number.");y=C-1}return 0}class Ff{constructor(t,o,c){this.type=t,this.input=o,this.labels=[],this.outputs=[];for(const[h,_]of c)this.labels.push(h),this.outputs.push(_)}static parse(t,o){if(t.length-1<4)return o.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!=0)return o.error("Expected an even number of arguments.");const c=o.parse(t[1],1,nr);if(!c)return null;const h=[];let _=null;o.expectedType&&o.expectedType.kind!=="value"&&(_=o.expectedType);for(let y=1;y<t.length;y+=2){const C=y===1?-1/0:t[y],R=t[y+1],L=y,V=y+1;if(typeof C!="number")return o.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',L);if(h.length&&h[h.length-1][0]>=C)return o.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',L);const $=o.parse(R,V,_);if(!$)return null;_=_||$.type,h.push([C,$])}return new Ff(_,c,h)}evaluate(t){const o=this.labels,c=this.outputs;if(o.length===1)return c[0].evaluate(t);const h=this.input.evaluate(t);if(h<=o[0])return c[0].evaluate(t);const _=o.length;return h>=o[_-1]?c[_-1].evaluate(t):c[dm(o,h)].evaluate(t)}eachChild(t){t(this.input);for(const o of this.outputs)t(o)}outputDefined(){return this.outputs.every(t=>t.outputDefined())}serialize(){const t=["step",this.input.serialize()];for(let o=0;o<this.labels.length;o++)o>0&&t.push(this.labels[o]),t.push(this.outputs[o].serialize());return t}}const xy=.95047,wy=1.08883,Sy=4/29,jc=6/29,Cy=3*jc*jc,Ey=jc*jc*jc,Jx=Math.PI/180,Qx=180/Math.PI;function C0(a){return a>Ey?Math.pow(a,1/3):a/Cy+Sy}function hm(a){return a>jc?a*a*a:Cy*(a-Sy)}function fm(a){return 255*(a<=.0031308?12.92*a:1.055*Math.pow(a,1/2.4)-.055)}function Gc(a){return(a/=255)<=.04045?a/12.92:Math.pow((a+.055)/1.055,2.4)}function E0(a){const t=Gc(a.r),o=Gc(a.g),c=Gc(a.b),h=C0((.4124564*t+.3575761*o+.1804375*c)/xy),_=C0((.2126729*t+.7151522*o+.072175*c)/1);return{l:116*_-16,a:500*(h-_),b:200*(_-C0((.0193339*t+.119192*o+.9503041*c)/wy)),alpha:a.a}}function T0(a){let t=(a.l+16)/116,o=isNaN(a.a)?t:t+a.a/500,c=isNaN(a.b)?t:t-a.b/200;return t=1*hm(t),o=xy*hm(o),c=wy*hm(c),new Bi(fm(3.2404542*o-1.5371385*t-.4985314*c),fm(-.969266*o+1.8760108*t+.041556*c),fm(.0556434*o-.2040259*t+1.0572252*c),a.alpha)}function ew(a,t,o){const c=t-a;return a+o*(c>180||c<-180?c-360*Math.round(c/360):c)}const Bd={forward:E0,reverse:T0,interpolate:function(a,t,o){return{l:Dr(a.l,t.l,o),a:Dr(a.a,t.a,o),b:Dr(a.b,t.b,o),alpha:Dr(a.alpha,t.alpha,o)}}},Vd={forward:function(a){const{l:t,a:o,b:c}=E0(a),h=Math.atan2(c,o)*Qx;return{h:h<0?h+360:h,c:Math.sqrt(o*o+c*c),l:t,alpha:a.a}},reverse:function(a){const t=a.h*Jx,o=a.c;return T0({l:a.l,a:Math.cos(t)*o,b:Math.sin(t)*o,alpha:a.alpha})},interpolate:function(a,t,o){return{h:ew(a.h,t.h,o),c:Dr(a.c,t.c,o),l:Dr(a.l,t.l,o),alpha:Dr(a.alpha,t.alpha,o)}}};var Ty=Object.freeze({__proto__:null,hcl:Vd,lab:Bd});class dl{constructor(t,o,c,h,_){this.type=t,this.operator=o,this.interpolation=c,this.input=h,this.labels=[],this.outputs=[];for(const[y,C]of _)this.labels.push(y),this.outputs.push(C)}static interpolationFactor(t,o,c,h){let _=0;if(t.name==="exponential")_=pm(o,t.base,c,h);else if(t.name==="linear")_=pm(o,1,c,h);else if(t.name==="cubic-bezier"){const y=t.controlPoints;_=new Xs(y[0],y[1],y[2],y[3]).solve(pm(o,1,c,h))}return _}static parse(t,o){let[c,h,_,...y]=t;if(!Array.isArray(h)||h.length===0)return o.error("Expected an interpolation type expression.",1);if(h[0]==="linear")h={name:"linear"};else if(h[0]==="exponential"){const L=h[1];if(typeof L!="number")return o.error("Exponential interpolation requires a numeric base.",1,1);h={name:"exponential",base:L}}else{if(h[0]!=="cubic-bezier")return o.error(`Unknown interpolation type ${String(h[0])}`,1,0);{const L=h.slice(1);if(L.length!==4||L.some(V=>typeof V!="number"||V<0||V>1))return o.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);h={name:"cubic-bezier",controlPoints:L}}}if(t.length-1<4)return o.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if(t.length-1>3&&(t.length-1)%2!=0)return o.error("Expected an even number of arguments.");if(_=o.parse(_,2,nr),!_)return null;const C=[];let R=null;c==="interpolate-hcl"||c==="interpolate-lab"?R=va:o.expectedType&&o.expectedType.kind!=="value"&&(R=o.expectedType);for(let L=0;L<y.length;L+=2){const V=y[L],$=y[L+1],U=L+3,X=L+4;if(typeof V!="number")return o.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',U);if(C.length&&C[C.length-1][0]>=V)return o.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',U);const ee=o.parse($,X,R);if(!ee)return null;R=R||ee.type,C.push([V,ee])}return R.kind==="number"||R.kind==="color"||R.kind==="array"&&R.itemType.kind==="number"&&typeof R.N=="number"?new dl(R,c,h,_,C):o.error(`Type ${hs(R)} is not interpolatable.`)}evaluate(t){const o=this.labels,c=this.outputs;if(o.length===1)return c[0].evaluate(t);const h=this.input.evaluate(t);if(h<=o[0])return c[0].evaluate(t);const _=o.length;if(h>=o[_-1])return c[_-1].evaluate(t);const y=dm(o,h),C=dl.interpolationFactor(this.interpolation,h,o[y],o[y+1]),R=c[y].evaluate(t),L=c[y+1].evaluate(t);return this.operator==="interpolate"?Ld[this.type.kind.toLowerCase()](R,L,C):this.operator==="interpolate-hcl"?Vd.reverse(Vd.interpolate(Vd.forward(R),Vd.forward(L),C)):Bd.reverse(Bd.interpolate(Bd.forward(R),Bd.forward(L),C))}eachChild(t){t(this.input);for(const o of this.outputs)t(o)}outputDefined(){return this.outputs.every(t=>t.outputDefined())}serialize(){let t;t=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier",...this.interpolation.controlPoints];const o=[this.operator,t,this.input.serialize()];for(let c=0;c<this.labels.length;c++)o.push(this.labels[c],this.outputs[c].serialize());return o}}function pm(a,t,o,c){const h=c-o,_=a-o;return h===0?0:t===1?_/h:(Math.pow(t,_)-1)/(Math.pow(t,h)-1)}class Bf{constructor(t,o){this.type=t,this.args=o}static parse(t,o){if(t.length<2)return o.error("Expectected at least one argument.");let c=null;const h=o.expectedType;h&&h.kind!=="value"&&(c=h);const _=[];for(const C of t.slice(1)){const R=o.parse(C,1+_.length,c,void 0,{typeAnnotation:"omit"});if(!R)return null;c=c||R.type,_.push(R)}const y=h&&_.some(C=>Dc(h,C.type));return new Bf(y?Ni:c,_)}evaluate(t){let o,c=null,h=0;for(const _ of this.args){if(h++,c=_.evaluate(t),c&&c instanceof sa&&!c.available&&(o||(o=c),c=null,h===this.args.length))return o;if(c!==null)break}return c}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}serialize(){const t=["coalesce"];return this.eachChild(o=>{t.push(o.serialize())}),t}}class mm{constructor(t,o){this.type=o.type,this.bindings=[].concat(t),this.result=o}evaluate(t){return this.result.evaluate(t)}eachChild(t){for(const o of this.bindings)t(o[1]);t(this.result)}static parse(t,o){if(t.length<4)return o.error(`Expected at least 3 arguments, but found ${t.length-1} instead.`);const c=[];for(let _=1;_<t.length-1;_+=2){const y=t[_];if(typeof y!="string")return o.error(`Expected string, but found ${typeof y} instead.`,_);if(/[^a-zA-Z0-9_]/.test(y))return o.error("Variable names must contain only alphanumeric characters or '_'.",_);const C=o.parse(t[_+1],_+1);if(!C)return null;c.push([y,C])}const h=o.parse(t[t.length-1],t.length-1,o.expectedType,c);return h?new mm(c,h):null}outputDefined(){return this.result.outputDefined()}serialize(){const t=["let"];for(const[o,c]of this.bindings)t.push(o,c.serialize());return t.push(this.result.serialize()),t}}class I0{constructor(t,o,c){this.type=t,this.index=o,this.input=c}static parse(t,o){if(t.length!==3)return o.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const c=o.parse(t[1],1,nr),h=o.parse(t[2],2,Vo(o.expectedType||Ni));return c&&h?new I0(h.type.itemType,c,h):null}evaluate(t){const o=this.index.evaluate(t),c=this.input.evaluate(t);if(o<0)throw new to(`Array index out of bounds: ${o} < 0.`);if(o>=c.length)throw new to(`Array index out of bounds: ${o} > ${c.length-1}.`);if(o!==Math.floor(o))throw new to(`Array index must be an integer, but found ${o} instead. Use at-interpolated to retrieve interpolated result with a fractional index.`);return c[o]}eachChild(t){t(this.index),t(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}class k0{constructor(t,o,c){this.type=t,this.index=o,this.input=c}static parse(t,o){if(t.length!==3)return o.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const c=o.parse(t[1],1,nr),h=o.parse(t[2],2,Vo(o.expectedType||Ni));return c&&h?new k0(h.type.itemType,c,h):null}evaluate(t){const o=this.index.evaluate(t),c=this.input.evaluate(t);if(o<0)throw new to(`Array index out of bounds: ${o} < 0.`);if(o>c.length-1)throw new to(`Array index out of bounds: ${o} > ${c.length-1}.`);if(o===Math.floor(o))return c[o];const h=Math.floor(o),_=Math.ceil(o),y=c[h],C=c[_];if(typeof y!="number"||typeof C!="number")throw new to(`Cannot interpolate between non-number values at index ${o}.`);const R=o-h;return y*(1-R)+C*R}eachChild(t){t(this.index),t(this.input)}outputDefined(){return!1}serialize(){return["at-interpolated",this.index.serialize(),this.input.serialize()]}}class gm{constructor(t,o){this.type=Di,this.needle=t,this.haystack=o}static parse(t,o){if(t.length!==3)return o.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const c=o.parse(t[1],1,Ni),h=o.parse(t[2],2,Ni);return c&&h?Wl(c.type,[Di,Ui,nr,Ga,Ni])?new gm(c,h):o.error(`Expected first argument to be of type boolean, string, number or null, but found ${hs(c.type)} instead`):null}evaluate(t){const o=this.needle.evaluate(t),c=this.haystack.evaluate(t);if(c==null)return!1;if(!zc(o,["boolean","string","number","null"]))throw new to(`Expected first argument to be of type boolean, string, number or null, but found ${hs(Jn(o))} instead.`);if(!zc(c,["string","array"]))throw new to(`Expected second argument to be of type array or string, but found ${hs(Jn(c))} instead.`);return c.indexOf(o)>=0}eachChild(t){t(this.needle),t(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}class Vf{constructor(t,o,c){this.type=nr,this.needle=t,this.haystack=o,this.fromIndex=c}static parse(t,o){if(t.length<=2||t.length>=5)return o.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const c=o.parse(t[1],1,Ni),h=o.parse(t[2],2,Ni);if(!c||!h)return null;if(!Wl(c.type,[Di,Ui,nr,Ga,Ni]))return o.error(`Expected first argument to be of type boolean, string, number or null, but found ${hs(c.type)} instead`);if(t.length===4){const _=o.parse(t[3],3,nr);return _?new Vf(c,h,_):null}return new Vf(c,h)}evaluate(t){const o=this.needle.evaluate(t),c=this.haystack.evaluate(t);if(!zc(o,["boolean","string","number","null"]))throw new to(`Expected first argument to be of type boolean, string, number or null, but found ${hs(Jn(o))} instead.`);if(!zc(c,["string","array"]))throw new to(`Expected second argument to be of type array or string, but found ${hs(Jn(c))} instead.`);if(this.fromIndex){const h=this.fromIndex.evaluate(t);return c.indexOf(o,h)}return c.indexOf(o)}eachChild(t){t(this.needle),t(this.haystack),this.fromIndex&&t(this.fromIndex)}outputDefined(){return!1}serialize(){if(this.fromIndex!=null&&this.fromIndex!==void 0){const t=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),t]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}class Oh{constructor(t,o,c,h,_,y){this.inputType=t,this.type=o,this.input=c,this.cases=h,this.outputs=_,this.otherwise=y}static parse(t,o){if(t.length<5)return o.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if(t.length%2!=1)return o.error("Expected an even number of arguments.");let c,h;o.expectedType&&o.expectedType.kind!=="value"&&(h=o.expectedType);const _={},y=[];for(let L=2;L<t.length-1;L+=2){let V=t[L];const $=t[L+1];Array.isArray(V)||(V=[V]);const U=o.concat(L);if(V.length===0)return U.error("Expected at least one branch label.");for(const ee of V){if(typeof ee!="number"&&typeof ee!="string")return U.error("Branch labels must be numbers or strings.");if(typeof ee=="number"&&Math.abs(ee)>Number.MAX_SAFE_INTEGER)return U.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof ee=="number"&&Math.floor(ee)!==ee)return U.error("Numeric branch labels must be integer values.");if(c){if(U.checkSubtype(c,Jn(ee)))return null}else c=Jn(ee);if(_[String(ee)]!==void 0)return U.error("Branch labels must be unique.");_[String(ee)]=y.length}const X=o.parse($,L,h);if(!X)return null;h=h||X.type,y.push(X)}const C=o.parse(t[1],1,Ni);if(!C)return null;const R=o.parse(t[t.length-1],t.length-1,h);return R?C.type.kind!=="value"&&o.concat(1).checkSubtype(c,C.type)?null:new Oh(c,h,C,_,y,R):null}evaluate(t){const o=this.input.evaluate(t);return(Dd(Jn(o),this.inputType)&&this.outputs[this.cases[o]]||this.otherwise).evaluate(t)}eachChild(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)}outputDefined(){return this.outputs.every(t=>t.outputDefined())&&this.otherwise.outputDefined()}serialize(){const t=["match",this.input.serialize()],o=Object.keys(this.cases).sort(),c=[],h={};for(const y of o){const C=h[this.cases[y]];C===void 0?(h[this.cases[y]]=c.length,c.push([this.cases[y],[y]])):c[C][1].push(y)}const _=y=>this.inputType.kind==="number"?Number(y):y;for(const[y,C]of c)t.push(C.length===1?_(C[0]):C.map(_)),t.push(this.outputs[y].serialize());return t.push(this.otherwise.serialize()),t}}class M0{constructor(t,o,c){this.type=t,this.branches=o,this.otherwise=c}static parse(t,o){if(t.length<4)return o.error(`Expected at least 3 arguments, but found only ${t.length-1}.`);if(t.length%2!=0)return o.error("Expected an odd number of arguments.");let c;o.expectedType&&o.expectedType.kind!=="value"&&(c=o.expectedType);const h=[];for(let y=1;y<t.length-1;y+=2){const C=o.parse(t[y],y,Di);if(!C)return null;const R=o.parse(t[y+1],y+1,c);if(!R)return null;h.push([C,R]),c=c||R.type}const _=o.parse(t[t.length-1],t.length-1,c);return _?new M0(c,h,_):null}evaluate(t){for(const[o,c]of this.branches)if(o.evaluate(t))return c.evaluate(t);return this.otherwise.evaluate(t)}eachChild(t){for(const[o,c]of this.branches)t(o),t(c);t(this.otherwise)}outputDefined(){return this.branches.every(([t,o])=>o.outputDefined())&&this.otherwise.outputDefined()}serialize(){const t=["case"];return this.eachChild(o=>{t.push(o.serialize())}),t}}class $f{constructor(t,o,c,h){this.type=t,this.input=o,this.beginIndex=c,this.endIndex=h}static parse(t,o){if(t.length<=2||t.length>=5)return o.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const c=o.parse(t[1],1,Ni),h=o.parse(t[2],2,nr);if(!c||!h)return null;if(!Wl(c.type,[Vo(Ni),Ui,Ni]))return o.error(`Expected first argument to be of type array or string, but found ${hs(c.type)} instead`);if(t.length===4){const _=o.parse(t[3],3,nr);return _?new $f(c.type,c,h,_):null}return new $f(c.type,c,h)}evaluate(t){const o=this.input.evaluate(t),c=this.beginIndex.evaluate(t);if(!zc(o,["string","array"]))throw new to(`Expected first argument to be of type array or string, but found ${hs(Jn(o))} instead.`);if(this.endIndex){const h=this.endIndex.evaluate(t);return o.slice(c,h)}return o.slice(c)}eachChild(t){t(this.input),t(this.beginIndex),this.endIndex&&t(this.endIndex)}outputDefined(){return!1}serialize(){if(this.endIndex!=null&&this.endIndex!==void 0){const t=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),t]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}function Iy(a,t){return a==="=="||a==="!="?t.kind==="boolean"||t.kind==="string"||t.kind==="number"||t.kind==="null"||t.kind==="value":t.kind==="string"||t.kind==="number"||t.kind==="value"}function ky(a,t,o,c){return c.compare(t,o)===0}function $d(a,t,o){const c=a!=="=="&&a!=="!=";return class PP{constructor(_,y,C){this.type=Di,this.lhs=_,this.rhs=y,this.collator=C,this.hasUntypedArgument=_.type.kind==="value"||y.type.kind==="value"}static parse(_,y){if(_.length!==3&&_.length!==4)return y.error("Expected two or three arguments.");const C=_[0];let R=y.parse(_[1],1,Ni);if(!R)return null;if(!Iy(C,R.type))return y.concat(1).error(`"${C}" comparisons are not supported for type '${hs(R.type)}'.`);let L=y.parse(_[2],2,Ni);if(!L)return null;if(!Iy(C,L.type))return y.concat(2).error(`"${C}" comparisons are not supported for type '${hs(L.type)}'.`);if(R.type.kind!==L.type.kind&&R.type.kind!=="value"&&L.type.kind!=="value")return y.error(`Cannot compare types '${hs(R.type)}' and '${hs(L.type)}'.`);c&&(R.type.kind==="value"&&L.type.kind!=="value"?R=new Pr(L.type,[R]):R.type.kind!=="value"&&L.type.kind==="value"&&(L=new Pr(R.type,[L])));let V=null;if(_.length===4){if(R.type.kind!=="string"&&L.type.kind!=="string"&&R.type.kind!=="value"&&L.type.kind!=="value")return y.error("Cannot use collator to compare non-string types.");if(V=y.parse(_[3],3,Lc),!V)return null}return new PP(R,L,V)}evaluate(_){const y=this.lhs.evaluate(_),C=this.rhs.evaluate(_);if(c&&this.hasUntypedArgument){const R=Jn(y),L=Jn(C);if(R.kind!==L.kind||R.kind!=="string"&&R.kind!=="number")throw new to(`Expected arguments for "${a}" to be (string, string) or (number, number), but found (${R.kind}, ${L.kind}) instead.`)}if(this.collator&&!c&&this.hasUntypedArgument){const R=Jn(y),L=Jn(C);if(R.kind!=="string"||L.kind!=="string")return t(_,y,C)}return this.collator?o(_,y,C,this.collator.evaluate(_)):t(_,y,C)}eachChild(_){_(this.lhs),_(this.rhs),this.collator&&_(this.collator)}outputDefined(){return!0}serialize(){const _=[a];return this.eachChild(y=>{_.push(y.serialize())}),_}}}const My=$d("==",function(a,t,o){return t===o},ky),tw=$d("!=",function(a,t,o){return t!==o},function(a,t,o,c){return!ky(0,t,o,c)}),nw=$d("<",function(a,t,o){return t<o},function(a,t,o,c){return c.compare(t,o)<0}),rw=$d(">",function(a,t,o){return t>o},function(a,t,o,c){return c.compare(t,o)>0}),_m=$d("<=",function(a,t,o){return t<=o},function(a,t,o,c){return c.compare(t,o)<=0}),iw=$d(">=",function(a,t,o){return t>=o},function(a,t,o,c){return c.compare(t,o)>=0});class vm{constructor(t,o,c,h,_,y){this.type=Ui,this.number=t,this.locale=o,this.currency=c,this.unit=h,this.minFractionDigits=_,this.maxFractionDigits=y}static parse(t,o){if(t.length!==3)return o.error("Expected two arguments.");const c=o.parse(t[1],1,nr);if(!c)return null;const h=t[2];if(typeof h!="object"||Array.isArray(h))return o.error("NumberFormat options argument must be an object.");let _=null;if(h.locale&&(_=o.parseObjectValue(h.locale,2,"locale",Ui),!_))return null;let y=null;if(h.currency&&(y=o.parseObjectValue(h.currency,2,"currency",Ui),!y))return null;let C=null;if(h.unit&&(C=o.parseObjectValue(h.unit,2,"unit",Ui),!C))return null;let R=null;if(h["min-fraction-digits"]&&(R=o.parseObjectValue(h["min-fraction-digits"],2,"min-fraction-digits",nr),!R))return null;let L=null;return h["max-fraction-digits"]&&(L=o.parseObjectValue(h["max-fraction-digits"],2,"max-fraction-digits",nr),!L)?null:new vm(c,_,y,C,R,L)}evaluate(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(t):void 0,unit:this.unit?this.unit.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):void 0}).format(this.number.evaluate(t))}eachChild(t){t(this.number),this.locale&&t(this.locale),this.currency&&t(this.currency),this.unit&&t(this.unit),this.minFractionDigits&&t(this.minFractionDigits),this.maxFractionDigits&&t(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const t={};return this.locale&&(t.locale=this.locale.serialize()),this.currency&&(t.currency=this.currency.serialize()),this.unit&&(t.unit=this.unit.serialize()),this.minFractionDigits&&(t["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(t["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),t]}}class A0{constructor(t){this.type=nr,this.input=t}static parse(t,o){if(t.length!==2)return o.error(`Expected 1 argument, but found ${t.length-1} instead.`);const c=o.parse(t[1],1);return c?c.type.kind!=="array"&&c.type.kind!=="string"&&c.type.kind!=="value"?o.error(`Expected argument of type string or array, but found ${hs(c.type)} instead.`):new A0(c):null}evaluate(t){const o=this.input.evaluate(t);if(typeof o=="string"||Array.isArray(o))return o.length;throw new to(`Expected value to be of type string or array, but found ${hs(Jn(o))} instead.`)}eachChild(t){t(this.input)}outputDefined(){return!1}serialize(){const t=["length"];return this.eachChild(o=>{t.push(o.serialize())}),t}}function Ay(a){return function(){a=1831565813+(a|=0)|0;let t=Math.imul(a^a>>>15,1|a);return t=t+Math.imul(t^t>>>7,61|t)^t,((t^t>>>14)>>>0)/4294967296}}const Hd={"==":My,"!=":tw,">":rw,"<":nw,">=":iw,"<=":_m,array:Pr,at:I0,"at-interpolated":k0,boolean:Pr,case:M0,coalesce:Bf,collator:Tl,format:Fc,image:Bc,in:gm,"index-of":Vf,interpolate:dl,"interpolate-hcl":dl,"interpolate-lab":dl,length:A0,let:mm,literal:Vr,match:Oh,number:Pr,"number-format":vm,object:Pr,slice:$f,step:Ff,string:Pr,"to-boolean":Wa,"to-color":Wa,"to-number":Wa,"to-string":Wa,var:um,within:tn,distance:Fd,config:Lh};function R0(a,[t,o,c,h]){t=t.evaluate(a),o=o.evaluate(a),c=c.evaluate(a);const _=h?h.evaluate(a):1,y=Gu(t,o,c,_);if(y)throw new to(y);return new Bi(t/255,o/255,c/255,_)}function P0(a,[t,o,c,h]){t=t.evaluate(a),o=o.evaluate(a),c=c.evaluate(a);const _=h?h.evaluate(a):1,y=function(L,V,$,U){return typeof L=="number"&&L>=0&&L<=360?typeof V=="number"&&V>=0&&V<=100&&typeof $=="number"&&$>=0&&$<=100?U===void 0||typeof U=="number"&&U>=0&&U<=1?null:`Invalid hsla value [${[L,V,$,U].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid hsla value [${(typeof U=="number"?[L,V,$,U]:[L,V,$]).join(", ")}]: 's', and 'l' must be between 0 and 100.`:`Invalid hsla value [${(typeof U=="number"?[L,V,$,U]:[L,V,$]).join(", ")}]: 'h' must be between 0 and 360.`}(t,o,c,_);if(y)throw new to(y);const C=`hsla(${t}, ${o}%, ${c}%, ${_})`,R=Bi.parse(C);if(!R)throw new to(`Failed to parse HSLA color: ${C}`);return R}function Ry(a,t){return a in t}function qc(a,t){const o=t[a];return o===void 0?null:o}function Ud(a){return{type:a}}function Py(a){return{result:"success",value:a}}function Wc(a){return{result:"error",value:a}}function ym(a,t){return!!a&&!!a.parameters&&a.parameters.indexOf(t)>-1}function Hf(a){return a["property-type"]==="data-driven"}function L0(a){return ym(a.expression,"measure-light")}function O0(a){return ym(a.expression,"zoom")}function Uf(a){return!!a.expression&&a.expression.interpolated}function jf(a){return typeof a=="object"&&a!==null&&!Array.isArray(a)}function Ly(a){return a}function Oy(a,t){const o=t.type==="color",c=a.stops&&typeof a.stops[0][0]=="object",h=c||!(c||a.property!==void 0),_=a.type||(Uf(t)?"exponential":"interval");if(o&&((a=Uu({},a)).stops&&(a.stops=a.stops.map(L=>[L[0],Bi.parse(L[1])])),a.default=Bi.parse(a.default?a.default:t.default)),a.colorSpace&&a.colorSpace!=="rgb"&&!Ty[a.colorSpace])throw new Error(`Unknown color space: ${a.colorSpace}`);let y,C,R;if(_==="exponential")y=D0;else if(_==="interval")y=ow;else if(_==="categorical"){y=sw,C=Object.create(null);for(const L of a.stops)C[L[0]]=L[1];R=typeof a.stops[0][0]}else{if(_!=="identity")throw new Error(`Unknown function type "${_}"`);y=aw}if(c){const L={},V=[];for(let X=0;X<a.stops.length;X++){const ee=a.stops[X],de=ee[0].zoom;L[de]===void 0&&(L[de]={zoom:de,type:a.type,property:a.property,default:a.default,stops:[]},V.push(de)),L[de].stops.push([ee[0].value,ee[1]])}const $=[];for(const X of V)$.push([L[X].zoom,Oy(L[X],t)]);const U={name:"linear"};return{kind:"composite",interpolationType:U,interpolationFactor:dl.interpolationFactor.bind(void 0,U),zoomStops:$.map(X=>X[0]),evaluate:({zoom:X},ee)=>D0({stops:$,base:a.base},t,X).evaluate(X,ee)}}if(h){const L=_==="exponential"?{name:"exponential",base:a.base!==void 0?a.base:1}:null;return{kind:"camera",interpolationType:L,interpolationFactor:dl.interpolationFactor.bind(void 0,L),zoomStops:a.stops.map(V=>V[0]),evaluate:({zoom:V})=>y(a,t,V,C,R)}}return{kind:"source",evaluate(L,V){const $=V&&V.properties?V.properties[a.property]:void 0;return $===void 0?kl(a.default,t.default):y(a,t,$,C,R)}}}function kl(a,t,o){return a!==void 0?a:t!==void 0?t:o!==void 0?o:void 0}function sw(a,t,o,c,h){return kl(typeof o===h?c[o]:void 0,a.default,t.default)}function ow(a,t,o){if(mu(o)!=="number")return kl(a.default,t.default);const c=a.stops.length;if(c===1||o<=a.stops[0][0])return a.stops[0][1];if(o>=a.stops[c-1][0])return a.stops[c-1][1];const h=dm(a.stops.map(_=>_[0]),o);return a.stops[h][1]}function D0(a,t,o){const c=a.base!==void 0?a.base:1;if(mu(o)!=="number")return kl(a.default,t.default);const h=a.stops.length;if(h===1||o<=a.stops[0][0])return a.stops[0][1];if(o>=a.stops[h-1][0])return a.stops[h-1][1];const _=dm(a.stops.map(V=>V[0]),o),y=function(V,$,U,X){const ee=X-U,de=V-U;return ee===0?0:$===1?de/ee:(Math.pow($,de)-1)/(Math.pow($,ee)-1)}(o,c,a.stops[_][0],a.stops[_+1][0]),C=a.stops[_][1],R=a.stops[_+1][1];let L=Ld[t.type]||Ly;if(a.colorSpace&&a.colorSpace!=="rgb"){const V=Ty[a.colorSpace];L=($,U)=>V.reverse(V.interpolate(V.forward($),V.forward(U),y))}return typeof C.evaluate=="function"?{evaluate(...V){const $=C.evaluate.apply(void 0,V),U=R.evaluate.apply(void 0,V);if($!==void 0&&U!==void 0)return L($,U,y)}}:L(C,R,y)}function aw(a,t,o){return t.type==="color"?o=Bi.parse(o):t.type==="formatted"?o=Ko.fromString(o.toString()):t.type==="resolvedImage"?o=sa.build(o.toString()):mu(o)===t.type||t.type==="enum"&&t.values[o]||(o=void 0),kl(o,a.default,t.default)}bo.register(Hd,{error:[{kind:"error"},[Ui],(a,[t])=>{throw new to(t.evaluate(a))}],typeof:[Ui,[Ni],(a,[t])=>hs(Jn(t.evaluate(a)))],"to-rgba":[Vo(nr,4),[va],(a,[t])=>t.evaluate(a).toNonPremultipliedRenderColor(null).toArray()],"to-hsla":[Vo(nr,4),[va],(a,[t])=>t.evaluate(a).toNonPremultipliedRenderColor(null).toHslaArray()],rgb:[va,[nr,nr,nr],R0],rgba:[va,[nr,nr,nr,nr],R0],hsl:[va,[nr,nr,nr],P0],hsla:[va,[nr,nr,nr,nr],P0],has:{type:Di,overloads:[[[Ui],(a,[t])=>Ry(t.evaluate(a),a.properties())],[[Ui,ll],(a,[t,o])=>Ry(t.evaluate(a),o.evaluate(a))]]},get:{type:Ni,overloads:[[[Ui],(a,[t])=>qc(t.evaluate(a),a.properties())],[[Ui,ll],(a,[t,o])=>qc(t.evaluate(a),o.evaluate(a))]]},"feature-state":[Ni,[Ui],(a,[t])=>qc(t.evaluate(a),a.featureState||{})],properties:[ll,[],a=>a.properties()],"geometry-type":[Ui,[],a=>a.geometryType()],worldview:[Ui,[],a=>a.globals.worldview||""],id:[Ni,[],a=>a.id()],zoom:[nr,[],a=>a.globals.zoom],pitch:[nr,[],a=>a.globals.pitch||0],"distance-from-center":[nr,[],a=>a.distanceFromCenter()],"measure-light":[nr,[Ui],(a,[t])=>a.measureLight(t.evaluate(a))],"heatmap-density":[nr,[],a=>a.globals.heatmapDensity||0],"line-progress":[nr,[],a=>a.globals.lineProgress||0],"raster-value":[nr,[],a=>a.globals.rasterValue||0],"raster-particle-speed":[nr,[],a=>a.globals.rasterParticleSpeed||0],"sky-radial-progress":[nr,[],a=>a.globals.skyRadialProgress||0],accumulated:[Ni,[],a=>a.globals.accumulated===void 0?null:a.globals.accumulated],"+":[nr,Ud(nr),(a,t)=>{let o=0;for(const c of t)o+=c.evaluate(a);return o}],"*":[nr,Ud(nr),(a,t)=>{let o=1;for(const c of t)o*=c.evaluate(a);return o}],"-":{type:nr,overloads:[[[nr,nr],(a,[t,o])=>t.evaluate(a)-o.evaluate(a)],[[nr],(a,[t])=>-t.evaluate(a)]]},"/":[nr,[nr,nr],(a,[t,o])=>t.evaluate(a)/o.evaluate(a)],"%":[nr,[nr,nr],(a,[t,o])=>t.evaluate(a)%o.evaluate(a)],ln2:[nr,[],()=>Math.LN2],pi:[nr,[],()=>Math.PI],e:[nr,[],()=>Math.E],"^":[nr,[nr,nr],(a,[t,o])=>Math.pow(t.evaluate(a),o.evaluate(a))],sqrt:[nr,[nr],(a,[t])=>Math.sqrt(t.evaluate(a))],log10:[nr,[nr],(a,[t])=>Math.log(t.evaluate(a))/Math.LN10],ln:[nr,[nr],(a,[t])=>Math.log(t.evaluate(a))],log2:[nr,[nr],(a,[t])=>Math.log(t.evaluate(a))/Math.LN2],sin:[nr,[nr],(a,[t])=>Math.sin(t.evaluate(a))],cos:[nr,[nr],(a,[t])=>Math.cos(t.evaluate(a))],tan:[nr,[nr],(a,[t])=>Math.tan(t.evaluate(a))],asin:[nr,[nr],(a,[t])=>Math.asin(t.evaluate(a))],acos:[nr,[nr],(a,[t])=>Math.acos(t.evaluate(a))],atan:[nr,[nr],(a,[t])=>Math.atan(t.evaluate(a))],min:[nr,Ud(nr),(a,t)=>Math.min(...t.map(o=>o.evaluate(a)))],max:[nr,Ud(nr),(a,t)=>Math.max(...t.map(o=>o.evaluate(a)))],abs:[nr,[nr],(a,[t])=>Math.abs(t.evaluate(a))],round:[nr,[nr],(a,[t])=>{const o=t.evaluate(a);return o<0?-Math.round(-o):Math.round(o)}],floor:[nr,[nr],(a,[t])=>Math.floor(t.evaluate(a))],ceil:[nr,[nr],(a,[t])=>Math.ceil(t.evaluate(a))],"filter-==":[Di,[Ui,Ni],(a,[t,o])=>a.properties()[t.value]===o.value],"filter-id-==":[Di,[Ni],(a,[t])=>a.id()===t.value],"filter-type-==":[Di,[Ui],(a,[t])=>a.geometryType()===t.value],"filter-<":[Di,[Ui,Ni],(a,[t,o])=>{const c=a.properties()[t.value],h=o.value;return typeof c==typeof h&&c<h}],"filter-id-<":[Di,[Ni],(a,[t])=>{const o=a.id(),c=t.value;return typeof o==typeof c&&o<c}],"filter->":[Di,[Ui,Ni],(a,[t,o])=>{const c=a.properties()[t.value],h=o.value;return typeof c==typeof h&&c>h}],"filter-id->":[Di,[Ni],(a,[t])=>{const o=a.id(),c=t.value;return typeof o==typeof c&&o>c}],"filter-<=":[Di,[Ui,Ni],(a,[t,o])=>{const c=a.properties()[t.value],h=o.value;return typeof c==typeof h&&c<=h}],"filter-id-<=":[Di,[Ni],(a,[t])=>{const o=a.id(),c=t.value;return typeof o==typeof c&&o<=c}],"filter->=":[Di,[Ui,Ni],(a,[t,o])=>{const c=a.properties()[t.value],h=o.value;return typeof c==typeof h&&c>=h}],"filter-id->=":[Di,[Ni],(a,[t])=>{const o=a.id(),c=t.value;return typeof o==typeof c&&o>=c}],"filter-has":[Di,[Ni],(a,[t])=>t.value in a.properties()],"filter-has-id":[Di,[],a=>a.id()!==null&&a.id()!==void 0],"filter-type-in":[Di,[Vo(Ui)],(a,[t])=>t.value.indexOf(a.geometryType())>=0],"filter-id-in":[Di,[Vo(Ni)],(a,[t])=>t.value.indexOf(a.id())>=0],"filter-in-small":[Di,[Ui,Vo(Ni)],(a,[t,o])=>o.value.indexOf(a.properties()[t.value])>=0],"filter-in-large":[Di,[Ui,Vo(Ni)],(a,[t,o])=>function(c,h,_,y){for(;_<=y;){const C=_+y>>1;if(h[C]===c)return!0;h[C]>c?y=C-1:_=C+1}return!1}(a.properties()[t.value],o.value,0,o.value.length-1)],all:{type:Di,overloads:[[[Di,Di],(a,[t,o])=>t.evaluate(a)&&o.evaluate(a)],[Ud(Di),(a,t)=>{for(const o of t)if(!o.evaluate(a))return!1;return!0}]]},any:{type:Di,overloads:[[[Di,Di],(a,[t,o])=>t.evaluate(a)||o.evaluate(a)],[Ud(Di),(a,t)=>{for(const o of t)if(o.evaluate(a))return!0;return!1}]]},"!":[Di,[Di],(a,[t])=>!t.evaluate(a)],"is-supported-script":[Di,[Ui],(a,[t])=>{const o=a.globals&&a.globals.isSupportedScript;return!o||o(t.evaluate(a))}],upcase:[Ui,[Ui],(a,[t])=>t.evaluate(a).toUpperCase()],downcase:[Ui,[Ui],(a,[t])=>t.evaluate(a).toLowerCase()],concat:[Ui,Ud(Ni),(a,t)=>t.map(o=>qa(o.evaluate(a))).join("")],"resolved-locale":[Ui,[Lc],(a,[t])=>t.evaluate(a).resolvedLocale()],random:[nr,[nr,nr,Ni],(a,t)=>{const[o,c,h]=t.map(y=>y.evaluate(a));if(o>c||o===c)return o;let _;if(typeof h=="string")_=function(y){let C=0;if(y.length===0)return C;for(let R=0;R<y.length;R++)C=(C<<5)-C+y.charCodeAt(R),C|=0;return C}(h);else{if(typeof h!="number")throw new to(`Invalid seed input: ${h}`);_=h}return o+Ay(_)()*(c-o)}]});class Dh{constructor(t,o,c,h){this.expression=t,this._warningHistory={},this._evaluator=new Vc(c,h),this._defaultValue=o?function(_){return _.type==="color"&&(jf(_.default)||Array.isArray(_.default))?new Bi(0,0,0,0):_.type==="color"?Bi.parse(_.default)||null:_.default===void 0?null:_.default}(o):null,this._enumValues=o&&o.type==="enum"?o.values:null,this.configDependencies=lm(t)}evaluateWithoutErrorHandling(t,o,c,h,_,y,C,R){return this._evaluator.globals=t,this._evaluator.feature=o,this._evaluator.featureState=c,this._evaluator.canonical=h||null,this._evaluator.availableImages=_||null,this._evaluator.formattedSection=y,this._evaluator.featureTileCoord=C||null,this._evaluator.featureDistanceData=R||null,this.expression.evaluate(this._evaluator)}evaluate(t,o,c,h,_,y,C,R){this._evaluator.globals=t,this._evaluator.feature=o||null,this._evaluator.featureState=c||null,this._evaluator.canonical=h||null,this._evaluator.availableImages=_||null,this._evaluator.formattedSection=y||null,this._evaluator.featureTileCoord=C||null,this._evaluator.featureDistanceData=R||null;try{const L=this.expression.evaluate(this._evaluator);if(L==null||typeof L=="number"&&L!=L)return this._defaultValue;if(this._enumValues&&!(L in this._enumValues))throw new to(`Expected value to be one of ${Object.keys(this._enumValues).map(V=>JSON.stringify(V)).join(", ")}, but found ${JSON.stringify(L)} instead.`);return L}catch(L){return this._warningHistory[L.message]||(this._warningHistory[L.message]=!0,typeof console<"u"&&console.warn(`Failed to evaluate expression "${JSON.stringify(this.expression.serialize())}". ${L.message}`)),this._defaultValue}}}function bm(a){return Array.isArray(a)&&a.length>0&&typeof a[0]=="string"&&a[0]in Hd}function Yu(a,t,o,c){const h=new cm(Hd,[],t?function(y){const C={color:va,string:Ui,number:nr,enum:Ui,boolean:Di,formatted:Oc,resolvedImage:ia};return y.type==="array"?Vo(C[y.value]||Ni,y.length):C[y.type]}(t):void 0,void 0,void 0,o,c),_=h.parse(a,void 0,void 0,void 0,t&&t.type==="string"?{typeAnnotation:"coerce"}:void 0);return _?Py(new Dh(_,t,o,c)):Wc(h.errors)}class Gf{constructor(t,o,c,h){this.kind=t,this._styleExpression=o,this.isLightConstant=c,this.isLineProgressConstant=h,this.isStateDependent=t!=="constant"&&!am(o.expression),this.configDependencies=lm(o.expression)}evaluateWithoutErrorHandling(t,o,c,h,_,y){return this._styleExpression.evaluateWithoutErrorHandling(t,o,c,h,_,y)}evaluate(t,o,c,h,_,y){return this._styleExpression.evaluate(t,o,c,h,_,y)}}class qf{constructor(t,o,c,h,_,y){this.kind=t,this.zoomStops=c,this._styleExpression=o,this.isStateDependent=t!=="camera"&&!am(o.expression),this.isLightConstant=_,this.isLineProgressConstant=y,this.configDependencies=lm(o.expression),this.interpolationType=h}evaluateWithoutErrorHandling(t,o,c,h,_,y){return this._styleExpression.evaluateWithoutErrorHandling(t,o,c,h,_,y)}evaluate(t,o,c,h,_,y){return this._styleExpression.evaluate(t,o,c,h,_,y)}interpolationFactor(t,o,c){return this.interpolationType?dl.interpolationFactor(this.interpolationType,t,o,c):0}}function Dy(a,t,o,c){if((a=Yu(a,t,o,c)).result==="error")return a;const h=a.value.expression,_=Rh(h);if(!_&&!Hf(t))return Wc([new Ma("","data expressions not supported")]);const y=Ph(h,["zoom","pitch","distance-from-center"]);if(!y&&!O0(t))return Wc([new Ma("","zoom expressions not supported")]);const C=Ph(h,["measure-light"]);if(!C&&!L0(t))return Wc([new Ma("","measure-light expression not supported")]);const R=Ph(h,["line-progress"]);if(!R&&!function($){return ym($.expression,"line-progress")}(t))return Wc([new Ma("","line-progress expression not supported")]);const L=t.expression&&t.expression.relaxZoomRestriction,V=Nh(h);return V||y||L?V instanceof Ma?Wc([V]):V instanceof dl&&!Uf(t)?Wc([new Ma("",'"interpolate" expressions cannot be used with this property')]):Py(V?new qf(_&&R?"camera":"composite",a.value,V.labels,V instanceof dl?V.interpolation:void 0,C,R):new Gf(_&&R?"constant":"source",a.value,C,R)):Wc([new Ma("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression, or in the properties of atmosphere.')])}class zh{constructor(t,o){this._parameters=t,this._specification=o,Uu(this,Oy(this._parameters,this._specification))}static deserialize(t){return new zh(t._parameters,t._specification)}static serialize(t){return{_parameters:t._parameters,_specification:t._specification}}}function Nh(a){let t=null;if(a instanceof mm)t=Nh(a.result);else if(a instanceof Bf){for(const o of a.args)if(t=Nh(o),t)break}else(a instanceof Ff||a instanceof dl)&&a.input instanceof bo&&a.input.name==="zoom"&&(t=a);return t instanceof Ma||a.eachChild(o=>{const c=Nh(o);c instanceof Ma?t=c:t&&c&&t!==c&&(t=new Ma("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),t}var xm,z0,N0=function(){if(z0)return xm;z0=1,xm=t;var a=3;function t(o,c,h){var _=this.cells=[];if(o instanceof ArrayBuffer){this.arrayBuffer=o;var y=new Int32Array(this.arrayBuffer);o=y[0],this.d=(c=y[1])+2*(h=y[2]);for(var C=0;C<this.d*this.d;C++){var R=y[a+C],L=y[a+C+1];_.push(R===L?null:y.subarray(R,L))}var V=y[a+_.length+1];this.keys=y.subarray(y[a+_.length],V),this.bboxes=y.subarray(V),this.insert=this._insertReadonly}else{this.d=c+2*h;for(var $=0;$<this.d*this.d;$++)_.push([]);this.keys=[],this.bboxes=[]}this.n=c,this.extent=o,this.padding=h,this.scale=c/o,this.uid=0;var U=h/c*o;this.min=-U,this.max=o+U}return t.prototype.insert=function(o,c,h,_,y){this._forEachCell(c,h,_,y,this._insertCell,this.uid++),this.keys.push(o),this.bboxes.push(c),this.bboxes.push(h),this.bboxes.push(_),this.bboxes.push(y)},t.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},t.prototype._insertCell=function(o,c,h,_,y,C){this.cells[y].push(C)},t.prototype.query=function(o,c,h,_,y){var C=this.min,R=this.max;if(o<=C&&c<=C&&R<=h&&R<=_&&!y)return Array.prototype.slice.call(this.keys);var L=[];return this._forEachCell(o,c,h,_,this._queryCell,L,{},y),L},t.prototype._queryCell=function(o,c,h,_,y,C,R,L){var V=this.cells[y];if(V!==null)for(var $=this.keys,U=this.bboxes,X=0;X<V.length;X++){var ee=V[X];if(R[ee]===void 0){var de=4*ee;(L?L(U[de+0],U[de+1],U[de+2],U[de+3]):o<=U[de+2]&&c<=U[de+3]&&h>=U[de+0]&&_>=U[de+1])?(R[ee]=!0,C.push($[ee])):R[ee]=!1}}},t.prototype._forEachCell=function(o,c,h,_,y,C,R,L){for(var V=this._convertToCellCoord(o),$=this._convertToCellCoord(c),U=this._convertToCellCoord(h),X=this._convertToCellCoord(_),ee=V;ee<=U;ee++)for(var de=$;de<=X;de++){var be=this.d*de+ee;if((!L||L(this._convertFromCellCoord(ee),this._convertFromCellCoord(de),this._convertFromCellCoord(ee+1),this._convertFromCellCoord(de+1)))&&y.call(this,o,c,h,_,be,C,R,L))return}},t.prototype._convertFromCellCoord=function(o){return(o-this.padding)/this.scale},t.prototype._convertToCellCoord=function(o){return Math.max(0,Math.min(this.d-1,Math.floor(o*this.scale)+this.padding))},t.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var o=this.cells,c=a+this.cells.length+1+1,h=0,_=0;_<this.cells.length;_++)h+=this.cells[_].length;var y=new Int32Array(c+h+this.keys.length+this.bboxes.length);y[0]=this.extent,y[1]=this.n,y[2]=this.padding;for(var C=c,R=0;R<o.length;R++){var L=o[R];y[a+R]=C,y.set(L,C),C+=L.length}return y[a+o.length]=C,y.set(this.keys,C),y[a+o.length+1]=C+=this.keys.length,y.set(this.bboxes,C),C+=this.bboxes.length,y.buffer},xm}(),Zu=vr(N0);const Xu={};function Qn(a,t,o={}){Object.defineProperty(a,"_classRegistryKey",{value:t,writable:!1}),Xu[t]={klass:a,omit:o.omit||[]}}Qn(Object,"Object"),Zu.serialize=function(a,t){const o=a.toArrayBuffer();return t&&t.add(o),{buffer:o}},Zu.deserialize=function(a){return new Zu(a.buffer)},Object.defineProperty(Zu,"name",{value:"Grid"}),Qn(Zu,"Grid"),typeof DOMMatrix<"u"&&Qn(DOMMatrix,"DOMMatrix"),Qn(Bi,"Color"),Qn(Error,"Error"),Qn(Ko,"Formatted"),Qn(Mh,"FormattedSection"),Qn(ki,"AJAXError"),Qn(sa,"ResolvedImage"),Qn(zh,"StylePropertyFunction"),Qn(Dh,"StyleExpression",{omit:["_evaluator"]}),Qn(_a,"ImageId"),Qn(Kl,"ImageVariant"),Qn(qf,"ZoomDependentExpression"),Qn(Gf,"ZoomConstantExpression"),Qn(bo,"CompoundExpression",{omit:["_evaluate"]});for(const a in Hd)Xu[Hd[a]._classRegistryKey]||Qn(Hd[a],`Expression${a}`);function zy(a){return a&&typeof ArrayBuffer<"u"&&(a instanceof ArrayBuffer||a.constructor&&a.constructor.name==="ArrayBuffer")}function Ny(a){return self.ImageBitmap&&a instanceof ImageBitmap}function Kc(a,t){if(a==null||typeof a=="boolean"||typeof a=="number"||typeof a=="string"||a instanceof Boolean||a instanceof Number||a instanceof String||a instanceof Date||a instanceof RegExp)return a;if(zy(a)||Ny(a))return t&&t.add(a),a;if(ArrayBuffer.isView(a))return t&&t.add(a.buffer),a;if(a instanceof ImageData)return t&&t.add(a.data.buffer),a;if(Array.isArray(a)){const o=[];for(const c of a)o.push(Kc(c,t));return o}if(a instanceof Map){const o={$name:"Map",entries:[]};for(const[c,h]of a.entries())o.entries.push(Kc(c),Kc(h,t));return o}if(a instanceof Set){const o={$name:"Set"};let c=0;for(const h of a.values())o[++c]=Kc(h);return o}if(a instanceof DOMMatrix){const o={$name:"DOMMatrix"},c=["is2D","m11","m12","m13","m14","m21","m22","m23","m24","m31","m32","m33","m34","m41","m42","m43","m44","a","b","c","d","e","f"];for(const h of c)o[h]=a[h];return o}if(typeof a=="bigint")return{$name:"BigInt",value:a.toString()};if(typeof a=="object"){const o=a.constructor,c=o._classRegistryKey;if(!c)throw new Error(`Can't serialize object of unregistered class "${o.name}".`);const h=o.serialize?o.serialize(a,t):{};if(!o.serialize){for(const _ in a)a.hasOwnProperty(_)&&(Xu[c].omit.indexOf(_)>=0||(h[_]=Kc(a[_],t)));a instanceof Error&&(h.message=a.message)}if(h.$name)throw new Error("$name property is reserved for worker serialization logic.");return c!=="Object"&&(h.$name=c),h}throw new Error("can't serialize object of type "+typeof a)}function Yc(a){if(a==null||typeof a=="boolean"||typeof a=="number"||typeof a=="string"||a instanceof Boolean||a instanceof Number||a instanceof String||a instanceof Date||a instanceof RegExp||zy(a)||Ny(a)||ArrayBuffer.isView(a)||a instanceof ImageData)return a;if(Array.isArray(a))return a.map(Yc);if(typeof a=="object"){const t=a.$name||"Object";if(t==="Map"){const h=a.entries||[],_=new Map;for(let y=0;y<h.length;y+=2)_.set(Yc(h[y]),Yc(h[y+1]));return _}if(t==="Set"){const h=new Set;for(const _ of Object.keys(a))_!=="$name"&&h.add(Yc(a[_]));return h}if(t==="DOMMatrix"){let h;return h=a.is2D?[a.a,a.b,a.c,a.d,a.e,a.f]:[a.m11,a.m12,a.m13,a.m14,a.m21,a.m22,a.m23,a.m24,a.m31,a.m32,a.m33,a.m34,a.m41,a.m42,a.m43,a.m44],new DOMMatrix(h)}if(t==="BigInt")return BigInt(a.value);const{klass:o}=Xu[t];if(!o)throw new Error(`Can't deserialize unregistered class "${t}".`);if(o.deserialize)return o.deserialize(a);const c=Object.create(o.prototype);for(const h of Object.keys(a))h!=="$name"&&(c[h]=Yc(a[h]));return c}throw new Error("can't deserialize object of type "+typeof a)}const Ar={"Latin-1 Supplement":a=>a>=128&&a<=255,Arabic:a=>a>=1536&&a<=1791,"Arabic Supplement":a=>a>=1872&&a<=1919,"Arabic Extended-A":a=>a>=2208&&a<=2303,"Hangul Jamo":a=>a>=4352&&a<=4607,"Unified Canadian Aboriginal Syllabics":a=>a>=5120&&a<=5759,Khmer:a=>a>=6016&&a<=6143,"Unified Canadian Aboriginal Syllabics Extended":a=>a>=6320&&a<=6399,"General Punctuation":a=>a>=8192&&a<=8303,"Letterlike Symbols":a=>a>=8448&&a<=8527,"Number Forms":a=>a>=8528&&a<=8591,"Miscellaneous Technical":a=>a>=8960&&a<=9215,"Control Pictures":a=>a>=9216&&a<=9279,"Optical Character Recognition":a=>a>=9280&&a<=9311,"Enclosed Alphanumerics":a=>a>=9312&&a<=9471,"Geometric Shapes":a=>a>=9632&&a<=9727,"Miscellaneous Symbols":a=>a>=9728&&a<=9983,"Miscellaneous Symbols and Arrows":a=>a>=11008&&a<=11263,"CJK Radicals Supplement":a=>a>=11904&&a<=12031,"Kangxi Radicals":a=>a>=12032&&a<=12255,"Ideographic Description Characters":a=>a>=12272&&a<=12287,"CJK Symbols and Punctuation":a=>a>=12288&&a<=12351,Hiragana:a=>a>=12352&&a<=12447,Katakana:a=>a>=12448&&a<=12543,Bopomofo:a=>a>=12544&&a<=12591,"Hangul Compatibility Jamo":a=>a>=12592&&a<=12687,Kanbun:a=>a>=12688&&a<=12703,"Bopomofo Extended":a=>a>=12704&&a<=12735,"CJK Strokes":a=>a>=12736&&a<=12783,"Katakana Phonetic Extensions":a=>a>=12784&&a<=12799,"Enclosed CJK Letters and Months":a=>a>=12800&&a<=13055,"CJK Compatibility":a=>a>=13056&&a<=13311,"CJK Unified Ideographs Extension A":a=>a>=13312&&a<=19903,"Yijing Hexagram Symbols":a=>a>=19904&&a<=19967,"CJK Unified Ideographs":a=>a>=19968&&a<=40959,"Yi Syllables":a=>a>=40960&&a<=42127,"Yi Radicals":a=>a>=42128&&a<=42191,"Hangul Jamo Extended-A":a=>a>=43360&&a<=43391,"Hangul Syllables":a=>a>=44032&&a<=55215,"Hangul Jamo Extended-B":a=>a>=55216&&a<=55295,"Private Use Area":a=>a>=57344&&a<=63743,"CJK Compatibility Ideographs":a=>a>=63744&&a<=64255,"Arabic Presentation Forms-A":a=>a>=64336&&a<=65023,"Vertical Forms":a=>a>=65040&&a<=65055,"CJK Compatibility Forms":a=>a>=65072&&a<=65103,"Small Form Variants":a=>a>=65104&&a<=65135,"Arabic Presentation Forms-B":a=>a>=65136&&a<=65279,"Halfwidth and Fullwidth Forms":a=>a>=65280&&a<=65519,Osage:a=>a>=66736&&a<=66815,"CJK Unified Ideographs Extension B":a=>a>=131072&&a<=173791};function Wf(a){for(const t of a)if(F0(t.charCodeAt(0)))return!0;return!1}function lw(a){for(const t of a)if(!uw(t.charCodeAt(0)))return!1;return!0}function uw(a){return!(Ar.Arabic(a)||Ar["Arabic Supplement"](a)||Ar["Arabic Extended-A"](a)||Ar["Arabic Presentation Forms-A"](a)||Ar["Arabic Presentation Forms-B"](a))}function F0(a){return!(a!==746&&a!==747&&(a<4352||!(Ar["Bopomofo Extended"](a)||Ar.Bopomofo(a)||Ar["CJK Compatibility Forms"](a)&&!(a>=65097&&a<=65103)||Ar["CJK Compatibility Ideographs"](a)||Ar["CJK Compatibility"](a)||Ar["CJK Radicals Supplement"](a)||Ar["CJK Strokes"](a)||!(!Ar["CJK Symbols and Punctuation"](a)||a>=12296&&a<=12305||a>=12308&&a<=12319||a===12336)||Ar["CJK Unified Ideographs Extension A"](a)||Ar["CJK Unified Ideographs"](a)||Ar["Enclosed CJK Letters and Months"](a)||Ar["Hangul Compatibility Jamo"](a)||Ar["Hangul Jamo Extended-A"](a)||Ar["Hangul Jamo Extended-B"](a)||Ar["Hangul Jamo"](a)||Ar["Hangul Syllables"](a)||Ar.Hiragana(a)||Ar["Ideographic Description Characters"](a)||Ar.Kanbun(a)||Ar["Kangxi Radicals"](a)||Ar["Katakana Phonetic Extensions"](a)||Ar.Katakana(a)&&a!==12540||!(!Ar["Halfwidth and Fullwidth Forms"](a)||a===65288||a===65289||a===65293||a>=65306&&a<=65310||a===65339||a===65341||a===65343||a>=65371&&a<=65503||a===65507||a>=65512&&a<=65519)||!(!Ar["Small Form Variants"](a)||a>=65112&&a<=65118||a>=65123&&a<=65126)||Ar["Unified Canadian Aboriginal Syllabics"](a)||Ar["Unified Canadian Aboriginal Syllabics Extended"](a)||Ar["Vertical Forms"](a)||Ar["Yijing Hexagram Symbols"](a)||Ar["Yi Syllables"](a)||Ar["Yi Radicals"](a))))}function Fy(a){return!(F0(a)||function(t){return!!(Ar["Latin-1 Supplement"](t)&&(t===167||t===169||t===174||t===177||t===188||t===189||t===190||t===215||t===247)||Ar["General Punctuation"](t)&&(t===8214||t===8224||t===8225||t===8240||t===8241||t===8251||t===8252||t===8258||t===8263||t===8264||t===8265||t===8273)||Ar["Letterlike Symbols"](t)||Ar["Number Forms"](t)||Ar["Miscellaneous Technical"](t)&&(t>=8960&&t<=8967||t>=8972&&t<=8991||t>=8996&&t<=9e3||t===9003||t>=9085&&t<=9114||t>=9150&&t<=9165||t===9167||t>=9169&&t<=9179||t>=9186&&t<=9215)||Ar["Control Pictures"](t)&&t!==9251||Ar["Optical Character Recognition"](t)||Ar["Enclosed Alphanumerics"](t)||Ar["Geometric Shapes"](t)||Ar["Miscellaneous Symbols"](t)&&!(t>=9754&&t<=9759)||Ar["Miscellaneous Symbols and Arrows"](t)&&(t>=11026&&t<=11055||t>=11088&&t<=11097||t>=11192&&t<=11243)||Ar["CJK Symbols and Punctuation"](t)||Ar.Katakana(t)||Ar["Private Use Area"](t)||Ar["CJK Compatibility Forms"](t)||Ar["Small Form Variants"](t)||Ar["Halfwidth and Fullwidth Forms"](t)||t===8734||t===8756||t===8757||t>=9984&&t<=10087||t>=10102&&t<=10131||t===65532||t===65533)}(a))}function cw(a){return Ar.Arabic(a)||Ar["Arabic Supplement"](a)||Ar["Arabic Extended-A"](a)||Ar["Arabic Presentation Forms-A"](a)||Ar["Arabic Presentation Forms-B"](a)}function By(a){return a>=1424&&a<=2303||Ar["Arabic Presentation Forms-A"](a)||Ar["Arabic Presentation Forms-B"](a)}function dw(a,t){return!(!t&&By(a)||a>=2304&&a<=3583||a>=3840&&a<=4255||Ar.Khmer(a))}function hw(a){for(const t of a)if(By(t.charCodeAt(0)))return!0;return!1}const Ka={unavailable:"unavailable",deferred:"deferred",loading:"loading",parsing:"parsing",parsed:"parsed",loaded:"loaded",error:"error"};let B0=null,ba=Ka.unavailable,Ju=null;const jd=function(a){a&&typeof a=="string"&&a.indexOf("NetworkError")>-1&&(ba=Ka.error),B0&&B0(a)};function wm(){Sm.fire(new na("pluginStateChange",{pluginStatus:ba,pluginURL:Ju}))}const Sm=new Ua,Fh=function(){return ba},Vy=function(){if(ba!==Ka.deferred||!Ju)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");ba=Ka.loading,wm(),Ju&&Rc({url:Ju},a=>{a?jd(a):(ba=Ka.loaded,wm())})},Qu={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>ba===Ka.loaded||Qu.applyArabicShaping!=null,isLoading:()=>ba===Ka.loading,setState(a){ba=a.pluginStatus,Ju=a.pluginURL},isParsing:()=>ba===Ka.parsing,isParsed:()=>ba===Ka.parsed,getPluginURL:()=>Ju};class Qi{constructor(t,o){this.zoom=t,o?(this.now=o.now,this.fadeDuration=o.fadeDuration,this.transition=o.transition,this.pitch=o.pitch,this.brightness=o.brightness,this.worldview=o.worldview):(this.now=0,this.fadeDuration=0,this.transition={},this.pitch=0,this.brightness=0)}isSupportedScript(t){return function(o,c){for(const h of o)if(!dw(h.charCodeAt(0),c))return!1;return!0}(t,Qu.isLoaded())}}class Kf{constructor(t,o,c,h){this.property=t,this.value=o,this.expression=function(_,y,C,R){if(jf(_))return new zh(_,y);if(bm(_)||Array.isArray(_)&&_.length>0){const L=Dy(_,y,C,R);if(L.result==="error")throw new Error(L.value.map(V=>`${V.key}: ${V.message}`).join(", "));return L.value}{let L=_;return typeof _=="string"&&y.type==="color"&&(L=Bi.parse(_)),{kind:"constant",configDependencies:new Set,evaluate:()=>L}}}(o===void 0?t.specification.default:o,t.specification,c,h)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(t,o,c){return this.property.possiblyEvaluate(this,t,o,c)}}class Zc{constructor(t,o,c){this.property=t,this.value=new Kf(t,void 0,o,c)}transitioned(t,o){return new Hy(this.property,this.value,o,_t({},t.transition,this.transition),t.now)}untransitioned(){return new Hy(this.property,this.value,null,{},0)}}class $y{constructor(t,o,c){this._properties=t,this._values=Object.create(t.defaultTransitionablePropertyValues),this._scope=o,this._options=c,this.configDependencies=new Set}getValue(t){return Mr(this._values[t].value.value)}setValue(t,o){this._values.hasOwnProperty(t)||(this._values[t]=new Zc(this._values[t].property,this._scope,this._options)),this._values[t].value=new Kf(this._values[t].property,o===null?void 0:Mr(o),this._scope,this._options),this._values[t].value.expression.configDependencies&&(this.configDependencies=new Set([...this.configDependencies,...this._values[t].value.expression.configDependencies]))}setTransitionOrValue(t,o){o&&(this._options=o);const c=this._properties.properties;if(t)for(const h in t){const _=t[h];if(h.endsWith("-transition")){const y=h.slice(0,-11);c[y]&&this.setTransition(y,_)}else c.hasOwnProperty(h)&&this.setValue(h,_)}}getTransition(t){return Mr(this._values[t].transition)}setTransition(t,o){this._values.hasOwnProperty(t)||(this._values[t]=new Zc(this._values[t].property)),this._values[t].transition=Mr(o)||void 0}serialize(){const t={};for(const o of Object.keys(this._values)){const c=this.getValue(o);c!==void 0&&(t[o]=c);const h=this.getTransition(o);h!==void 0&&(t[`${o}-transition`]=h)}return t}transitioned(t,o){const c=new Uy(this._properties);for(const h of Object.keys(this._values))c._values[h]=this._values[h].transitioned(t,o._values[h]);return c}untransitioned(){const t=new Uy(this._properties);for(const o of Object.keys(this._values))t._values[o]=this._values[o].untransitioned();return t}}class Hy{constructor(t,o,c,h,_){const y=h.delay||0,C=h.duration||0;_=_||0,this.property=t,this.value=o,this.begin=_+y,this.end=this.begin+C,t.specification.transition&&(h.delay||h.duration)&&(this.prior=c)}possiblyEvaluate(t,o,c){const h=t.now||0,_=this.value.possiblyEvaluate(t,o,c),y=this.prior;if(y){if(h>this.end)return this.prior=null,_;if(this.value.isDataDriven())return this.prior=null,_;if(h<this.begin)return y.possiblyEvaluate(t,o,c);{const C=(h-this.begin)/(this.end-this.begin);return this.property.interpolate(y.possiblyEvaluate(t,o,c),_,Oe(C))}}return _}}class Uy{constructor(t){this._properties=t,this._values=Object.create(t.defaultTransitioningPropertyValues)}possiblyEvaluate(t,o,c){const h=new Gd(this._properties);for(const _ of Object.keys(this._values))h._values[_]=this._values[_].possiblyEvaluate(t,o,c);return h}hasTransition(){for(const t of Object.keys(this._values))if(this._values[t].prior)return!0;return!1}}class fw{constructor(t,o,c){this._properties=t,this._values=Object.create(t.defaultPropertyValues),this._scope=o,this._options=c,this.configDependencies=new Set}getValue(t){return Mr(this._values[t].value)}setValue(t,o){this._values[t]=new Kf(this._values[t].property,o===null?void 0:Mr(o),this._scope,this._options),this._values[t].expression.configDependencies&&(this.configDependencies=new Set([...this.configDependencies,...this._values[t].expression.configDependencies]))}serialize(){const t={};for(const o of Object.keys(this._values)){const c=this.getValue(o);c!==void 0&&(t[o]=c)}return t}possiblyEvaluate(t,o,c){const h=new Gd(this._properties);for(const _ of Object.keys(this._values))h._values[_]=this._values[_].possiblyEvaluate(t,o,c);return h}}class Bh{constructor(t,o,c){this.property=t,this.value=o,this.parameters=c}isConstant(){return this.value.kind==="constant"}constantOr(t){return this.value.kind==="constant"?this.value.value:t}evaluate(t,o,c,h){return this.property.evaluate(this.value,this.parameters,t,o,c,h)}}class Gd{constructor(t){this._properties=t,this._values=Object.create(t.defaultPossiblyEvaluatedValues)}get(t){return this._values[t]}}class Mn{constructor(t){this.specification=t}possiblyEvaluate(t,o){return t.expression.evaluate(o)}interpolate(t,o,c){const h=Ld[this.specification.type];return h?h(t,o,c):t}}class Yn{constructor(t,o){this.specification=t,this.overrides=o}possiblyEvaluate(t,o,c,h){return new Bh(this,t.expression.kind==="constant"||t.expression.kind==="camera"?{kind:"constant",value:t.expression.evaluate(o,null,{},c,h)}:t.expression,o)}interpolate(t,o,c){if(t.value.kind!=="constant"||o.value.kind!=="constant")return t;if(t.value.value===void 0||o.value.value===void 0)return new Bh(this,{kind:"constant",value:void 0},t.parameters);const h=Ld[this.specification.type];return h?new Bh(this,{kind:"constant",value:h(t.value.value,o.value.value,c)},t.parameters):t}evaluate(t,o,c,h,_,y){return t.kind==="constant"?t.value:t.evaluate(o,c,h,_,y)}}class qd{constructor(t){this.specification=t}possiblyEvaluate(t,o,c,h){return!!t.expression.evaluate(o,null,{},c,h)}interpolate(){return!1}}class Vs{constructor(t){this.properties=t,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];const o=new Qi(0,{});for(const c in t){const h=t[c];h.specification.overridable&&this.overridableProperties.push(c);const _=this.defaultPropertyValues[c]=new Kf(h,void 0),y=this.defaultTransitionablePropertyValues[c]=new Zc(h);this.defaultTransitioningPropertyValues[c]=y.untransitioned(),this.defaultPossiblyEvaluatedValues[c]=_.possiblyEvaluate(o)}}}Qn(Yn,"DataDrivenProperty"),Qn(Mn,"DataConstantProperty"),Qn(qd,"ColorRampProperty");var Dt=JSON.parse('{"$version":8,"$root":{"version":{"type":"enum","values":[8]},"fragment":{"type":"boolean"},"name":{"type":"string"},"metadata":{"type":"*"},"center":{"type":"array","value":"number"},"zoom":{"type":"number"},"bearing":{"type":"number","default":0,"period":360},"pitch":{"type":"number","default":0},"light":{"type":"light"},"lights":{"type":"array","value":"light-3d"},"terrain":{"type":"terrain","optional":true},"fog":{"type":"fog"},"snow":{"type":"snow"},"rain":{"type":"rain"},"camera":{"type":"camera"},"color-theme":{"type":"colorTheme"},"indoor":{"type":"indoor"},"imports":{"type":"array","value":"import"},"iconsets":{"type":"iconsets"},"schema":{"type":"schema"},"sources":{"type":"sources"},"sprite":{"type":"string"},"glyphs":{"type":"string","default":"mapbox://fonts/mapbox/{fontstack}/{range}.pbf"},"transition":{"type":"transition"},"projection":{"type":"projection"},"layers":{"type":"array","value":"layer"},"models":{"type":"models"},"featuresets":{"type":"featuresets"}},"featuresets":{"*":{"type":"featureset"}},"featureset":{"metadata":{"type":"*"},"selectors":{"type":"array","value":"selector"}},"selector":{"layer":{"type":"string"},"properties":{"type":"selectorProperty"},"featureNamespace":{"type":"string"},"_uniqueFeatureID":{"type":"boolean"}},"selectorProperty":{"*":{"type":"*"}},"model":{"type":"string"},"import":{"id":{"type":"string"},"url":{"type":"string"},"config":{"type":"config"},"data":{"type":"$root"},"color-theme":{"type":"colorTheme","optional":true}},"config":{"*":{"type":"*"}},"schema":{"*":{"type":"option"}},"option":{"default":{"type":"*","expression":{}},"type":{"type":"enum","values":{"string":1,"number":1,"boolean":1,"color":1}},"array":{"type":"boolean"},"minValue":{"type":"number"},"maxValue":{"type":"number"},"stepValue":{"type":"number"},"values":{"type":"array","value":"*"},"metadata":{"type":"*"}},"models":{"*":{"type":"model"}},"light-3d":{"id":{"type":"string"},"properties":{"type":"properties"},"type":{"type":"enum","values":{"ambient":{},"directional":{},"flat":{}}}},"properties":["properties_light_directional","properties_light_ambient","properties_light_flat"],"properties_light_directional":{"direction":{"type":"array","default":[210,30],"minimum":[0,0],"maximum":[360,90],"length":2,"value":"number","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"use-theme":true,"transition":true},"intensity":{"type":"number","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"cast-shadows":{"type":"boolean","default":false},"shadow-quality":{"type":"number","default":1,"minimum":0,"maximum":1,"expression":{"parameters":["zoom"]}},"shadow-intensity":{"type":"number","default":1,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"properties_light_ambient":{"color":{"type":"color","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"use-theme":true,"transition":true},"intensity":{"type":"number","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"properties_light_flat":{"anchor":{"type":"enum","default":"viewport","values":{"map":1,"viewport":1},"expression":{"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"use-theme":true,"transition":true},"intensity":{"type":"number","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"iconsets":{"*":{"type":"iconset"}},"iconset":["iconset_sprite","iconset_source"],"iconset_sprite":{"type":{"type":"enum","values":{"sprite":1}},"url":{"type":"string"}},"iconset_source":{"type":{"type":"enum","values":{"source":1}},"source":{"type":"string"}},"sources":{"*":{"type":"source"}},"source":["source_vector","source_raster","source_raster_dem","source_raster_array","source_geojson","source_video","source_image","source_model"],"source_vector":{"type":{"type":"enum","values":{"vector":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"extra_bounds":{"type":"array","value":{"type":"array","value":"number","length":4}},"scheme":{"type":"enum","values":{"xyz":1,"tms":1},"default":"xyz"},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"attribution":{"type":"string"},"promoteId":{"type":"promoteId"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster":{"type":{"type":"enum","values":{"raster":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"extra_bounds":{"type":"array","value":{"type":"array","value":"number","length":4}},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512},"scheme":{"type":"enum","values":{"xyz":1,"tms":1},"default":"xyz"},"attribution":{"type":"string"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_dem":{"type":{"type":"enum","values":{"raster-dem":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"extra_bounds":{"type":"array","value":{"type":"array","value":"number","length":4}},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512},"attribution":{"type":"string"},"encoding":{"type":"enum","values":{"terrarium":1,"mapbox":1},"default":"mapbox"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_array":{"type":{"type":"enum","values":{"raster-array":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"extra_bounds":{"type":"array","value":{"type":"array","value":"number","length":4}},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512},"attribution":{"type":"string"},"rasterLayers":{"type":"*"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_geojson":{"type":{"type":"enum","values":{"geojson":1}},"data":{"type":"*"},"maxzoom":{"type":"number","default":18},"minzoom":{"type":"number","default":0},"attribution":{"type":"string"},"buffer":{"type":"number","default":128,"maximum":512,"minimum":0},"filter":{"type":"*"},"tolerance":{"type":"number","default":0.375},"cluster":{"type":"boolean","default":false},"clusterRadius":{"type":"number","default":50,"minimum":0},"clusterMaxZoom":{"type":"number"},"clusterMinPoints":{"type":"number"},"clusterProperties":{"type":"*"},"lineMetrics":{"type":"boolean","default":false},"generateId":{"type":"boolean","default":false},"promoteId":{"type":"promoteId"},"dynamic":{"type":"boolean","default":false}},"source_video":{"type":{"type":"enum","values":{"video":1}},"urls":{"type":"array","value":"string"},"coordinates":{"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_image":{"type":{"type":"enum","values":{"image":1}},"url":{"type":"string"},"coordinates":{"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_model":{"type":{"type":"enum","values":{"model":1,"batched-model":1}},"maxzoom":{"type":"number","default":18},"minzoom":{"type":"number","default":0},"tiles":{"type":"array","value":"string"}},"layer":{"id":{"type":"string"},"type":{"type":"enum","values":{"fill":{},"line":{},"symbol":{},"circle":{},"heatmap":{},"fill-extrusion":{},"building":{},"raster":{},"raster-particle":{},"hillshade":{},"model":{},"background":{},"sky":{},"slot":{},"clip":{}}},"metadata":{"type":"*"},"source":{"type":"string"},"source-layer":{"type":"string"},"slot":{"type":"string"},"minzoom":{"type":"number","minimum":0,"maximum":24},"maxzoom":{"type":"number","minimum":0,"maximum":24},"filter":{"type":"filter"},"layout":{"type":"layout"},"paint":{"type":"paint"}},"layout":["layout_clip","layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_building","layout_symbol","layout_raster","layout_raster-particle","layout_hillshade","layout_background","layout_sky","layout_model"],"layout_background":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{}}},"layout_sky":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{}}},"layout_model":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{}},"model-id":{"type":"string","default":"","property-type":"data-driven","expression":{"parameters":["zoom","feature"]}}},"layout_clip":{"clip-layer-types":{"type":"array","value":"enum","values":{"model":1,"symbol":1},"default":[],"expression":{}},"clip-layer-scope":{"type":"array","value":"string","default":[],"expression":{}}},"layout_fill":{"fill-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{}},"fill-elevation-reference":{"type":"enum","values":{"none":1,"hd-road-base":1,"hd-road-markup":1},"default":"none","expression":{}},"fill-construct-bridge-guard-rail":{"type":"boolean","default":"true","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"}},"layout_circle":{"circle-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"circle-elevation-reference":{"type":"enum","values":{"none":1,"hd-road-markup":1},"default":"none","expression":{}},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{}}},"layout_heatmap":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{}}},"layout_fill-extrusion":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{}},"fill-extrusion-edge-radius":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{}}},"layout_building":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{}},"building-roof-shape":{"type":"enum","values":{"flat":1,"hipped":1,"gabled":1,"parapet":1,"mansard":1,"skillion":1,"pyramidal":1},"default":"flat","expression":{"parameters":["feature"]},"property-type":"data-driven"},"building-height":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{},"property-type":"data-driven"},"building-base":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{},"property-type":"data-driven"}},"layout_line":{"line-cap":{"type":"enum","values":{"butt":1,"round":1,"square":1},"default":"butt","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-join":{"type":"enum","values":{"bevel":1,"round":1,"miter":1,"none":1},"default":"miter","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{"type":"number","default":2,"expression":{"interpolated":true,"parameters":["zoom"]}},"line-round-limit":{"type":"number","default":1.05,"expression":{"interpolated":true,"parameters":["zoom"]}},"line-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-z-offset":{"type":"number","default":0,"expression":{"parameters":["zoom","feature","line-progress"]},"property-type":"data-driven"},"line-elevation-reference":{"type":"enum","values":{"none":1,"sea":1,"ground":1,"hd-road-markup":1},"default":"none","expression":{}},"line-cross-slope":{"type":"number","expression":{}},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{}},"line-width-unit":{"type":"enum","values":{"pixels":1,"meters":1},"default":"pixels","expression":{"parameters":["zoom"]}}},"layout_symbol":{"symbol-placement":{"type":"enum","values":{"point":1,"line":1,"line-center":1},"default":"point","expression":{"parameters":["zoom"]}},"symbol-spacing":{"type":"number","default":250,"minimum":1,"expression":{"interpolated":true,"parameters":["zoom"]}},"symbol-avoid-edges":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]}},"symbol-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":1,"viewport-y":1,"source":1},"default":"auto","expression":{"parameters":["zoom"]}},"symbol-z-elevate":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]}},"symbol-elevation-reference":{"type":"enum","values":{"sea":1,"ground":1,"hd-road-markup":1},"default":"ground","expression":{"parameters":["zoom"]}},"icon-allow-overlap":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]}},"icon-ignore-placement":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]}},"icon-optional":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]}},"icon-rotation-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]}},"icon-size":{"type":"number","default":1,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-size-scale-range":{"type":"array","value":"number","length":2,"default":[0.8,2],"minimum":0.1,"maximum":10,"expression":{}},"icon-text-fit":{"type":"enum","values":{"none":1,"width":1,"height":1,"both":1},"default":"none","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-image":{"type":"resolvedImage","tokens":true,"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"number","default":2,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]}},"icon-keep-upright":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]}},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":1,"left":1,"right":1,"top":1,"bottom":1,"top-left":1,"top-right":1,"bottom-left":1,"bottom-right":1},"default":"center","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]}},"text-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]}},"text-rotation-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]}},"text-field":{"type":"formatted","default":"","tokens":true,"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size-scale-range":{"type":"array","value":"number","length":2,"default":[0.8,2],"minimum":0.1,"maximum":10,"expression":{}},"text-max-width":{"type":"number","default":10,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{"type":"number","default":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":1,"left":1,"center":1,"right":1},"default":"center","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","default":0,"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":1,"left":1,"right":1,"top":1,"bottom":1,"top-left":1,"top-right":1,"bottom-left":1,"bottom-right":1},"expression":{"parameters":["zoom"]}},"text-anchor":{"type":"enum","values":{"center":1,"left":1,"right":1,"top":1,"bottom":1,"top-left":1,"top-right":1,"bottom-left":1,"bottom-right":1},"default":"center","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"expression":{"interpolated":true,"parameters":["zoom"]}},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":1,"vertical":1},"expression":{"parameters":["zoom"]}},"text-rotate":{"type":"number","default":0,"period":360,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]}},"text-keep-upright":{"type":"boolean","default":true,"expression":{"parameters":["zoom"]}},"text-transform":{"type":"enum","values":{"none":1,"uppercase":1,"lowercase":1},"default":"none","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","value":"number","length":2,"default":[0,0],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]}},"text-ignore-placement":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]}},"text-optional":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]}},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{}}},"layout_raster":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{}}},"layout_raster-particle":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{}}},"layout_hillshade":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{}}},"filter":{"type":"array","value":"*"},"filter_symbol":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature","pitch","distance-from-center"]}},"filter_fill":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_hillshade":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_raster":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_raster-particle":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_clip":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_model":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_line":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_circle":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_fill-extrusion":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_building":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_heatmap":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_operator":{"type":"enum","values":{"==":1,"!=":1,">":1,">=":1,"<":1,"<=":1,"in":1,"!in":1,"all":1,"any":1,"none":1,"has":1,"!has":1}},"geometry_type":{"type":"enum","values":{"Point":1,"LineString":1,"Polygon":1}},"function":{"expression":{"type":"expression"},"stops":{"type":"array","value":"function_stop"},"base":{"type":"number","default":1,"minimum":0},"property":{"type":"string","default":"$zoom"},"type":{"type":"enum","values":{"identity":1,"exponential":1,"interval":1,"categorical":1},"default":"exponential"},"colorSpace":{"type":"enum","values":{"rgb":1,"lab":1,"hcl":1},"default":"rgb"},"default":{"type":"*"}},"function_stop":{"type":"array","minimum":0,"maximum":24,"value":["number","color"],"length":2},"expression":{"type":"array","value":"*","minimum":1},"fog":{"range":{"type":"array","default":[0.5,10],"minimum":-20,"maximum":20,"length":2,"value":"number","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true}},"color":{"type":"color","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"use-theme":true,"transition":true},"high-color":{"type":"color","default":"#245cdf","expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"use-theme":true,"transition":true},"space-color":{"type":"color","default":["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"use-theme":true,"transition":true},"horizon-blend":{"type":"number","default":["interpolate",["linear"],["zoom"],4,0.2,7,0.1],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"star-intensity":{"type":"number","default":["interpolate",["linear"],["zoom"],5,0.35,6,0],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"vertical-range":{"type":"array","default":[0,0],"minimum":0,"length":2,"value":"number","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true}}},"snow":{"density":{"type":"number","default":["interpolate",["linear"],["zoom"],11,0,13,0.85],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"intensity":{"type":"number","default":1,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"color":{"type":"color","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"use-theme":true,"transition":true},"opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"vignette":{"type":"number","default":["interpolate",["linear"],["zoom"],11,0,13,0.3],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"vignette-color":{"type":"color","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"use-theme":true,"transition":true},"center-thinning":{"type":"number","default":0.4,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"direction":{"type":"array","default":[0,50],"minimum":0,"maximum":360,"length":2,"value":"number","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true}},"flake-size":{"type":"number","default":0.71,"minimum":0,"maximum":5,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true}},"rain":{"density":{"type":"number","default":["interpolate",["linear"],["zoom"],11,0,13,0.5],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"intensity":{"type":"number","default":1,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"color":{"type":"color","default":["interpolate",["linear"],["measure-light","brightness"],0,"#03113d",0.3,"#a8adbc"],"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"use-theme":true,"transition":true},"opacity":{"type":"number","default":["interpolate",["linear"],["measure-light","brightness"],0,0.88,1,0.7],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"vignette":{"type":"number","default":["interpolate",["linear"],["zoom"],11,0,13,1],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"vignette-color":{"type":"color","default":["interpolate",["linear"],["measure-light","brightness"],0,"#001736",0.3,"#464646"],"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"use-theme":true,"transition":true},"center-thinning":{"type":"number","default":0.57,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"direction":{"type":"array","default":[0,80],"minimum":0,"maximum":360,"length":2,"value":"number","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true}},"droplet-size":{"type":"array","default":[2.6,18.2],"minimum":0,"maximum":50,"length":2,"value":"number","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true}},"distortion-strength":{"type":"number","default":0.7,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true}},"camera":{"camera-projection":{"type":"enum","values":{"perspective":1,"orthographic":1},"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"default":"perspective"}},"colorTheme":{"data":{"type":"string","expression":{}}},"indoor":{"floorplanFeaturesetId":{"type":"string","expression":{}},"buildingFeaturesetId":{"type":"string","expression":{}}},"light":{"anchor":{"type":"enum","default":"viewport","values":{"map":1,"viewport":1},"expression":{"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"use-theme":true,"transition":true},"intensity":{"type":"number","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"projection":{"name":{"type":"enum","values":{"albers":1,"equalEarth":1,"equirectangular":1,"lambertConformalConic":1,"mercator":1,"naturalEarth":1,"winkelTripel":1,"globe":1},"default":"mercator"},"center":{"type":"array","length":2,"value":"number","minimum":[-180,-90],"maximum":[180,90]},"parallels":{"type":"array","length":2,"value":"number","minimum":[-90,-90],"maximum":[90,90]}},"terrain":{"source":{"type":"string"},"exaggeration":{"type":"number","default":1,"minimum":0,"maximum":1000,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"paint":["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_building","paint_symbol","paint_raster","paint_raster-particle","paint_hillshade","paint_background","paint_sky","paint_model"],"paint_fill":{"fill-antialias":{"type":"boolean","default":true,"expression":{"parameters":["zoom"]}},"fill-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-color":{"type":"color","default":"#000000","use-theme":true,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-outline-color":{"type":"color","use-theme":true,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]}},"fill-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-pattern-cross-fade":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"fill-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"fill-z-offset":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-bridge-guard-rail-color":{"type":"color","default":"rgba(241, 236, 225, 255)","use-theme":true,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light","feature"]},"property-type":"data-driven"},"fill-tunnel-structure-color":{"type":"color","default":"rgba(241, 236, 225, 255)","use-theme":true,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light","feature"]},"property-type":"data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-extrusion-color":{"type":"color","default":"#000000","use-theme":true,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-extrusion-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-extrusion-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]}},"fill-extrusion-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-pattern-cross-fade":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"fill-extrusion-height":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-height-alignment":{"type":"enum","values":{"terrain":1,"flat":1},"default":"flat"},"fill-extrusion-base-alignment":{"type":"enum","values":{"terrain":1,"flat":1},"default":"terrain"},"fill-extrusion-vertical-gradient":{"type":"boolean","default":true,"expression":{"parameters":["zoom"]}},"fill-extrusion-ambient-occlusion-intensity":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-radius":{"type":"number","default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-wall-radius":{"type":"number","default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-ground-radius":{"type":"number","default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-ground-attenuation":{"type":"number","default":0.69,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-extrusion-flood-light-color":{"type":"color","default":"#ffffff","use-theme":true,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"fill-extrusion-flood-light-intensity":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"fill-extrusion-flood-light-wall-radius":{"property-type":"data-driven","type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["feature","feature-state"]}},"fill-extrusion-flood-light-ground-radius":{"property-type":"data-driven","type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["feature","feature-state"]}},"fill-extrusion-flood-light-ground-attenuation":{"type":"number","default":0.69,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-extrusion-vertical-scale":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-extrusion-rounded-roof":{"type":"boolean","default":true,"expression":{"parameters":["zoom"]}},"fill-extrusion-cutoff-fade-range":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{}},"fill-extrusion-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light","feature-state"]},"property-type":"data-driven"},"fill-extrusion-line-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-extrusion-cast-shadows":{"type":"boolean","default":true}},"paint_building":{"building-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"building-ambient-occlusion-wall-intensity":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"building-ambient-occlusion-ground-intensity":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"building-ambient-occlusion-ground-radius":{"type":"number","default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"building-ambient-occlusion-ground-attenuation":{"type":"number","default":0.69,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"building-vertical-scale":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"building-cast-shadows":{"type":"boolean","default":true},"building-color":{"type":"color","default":"rgba(193, 154, 127, 1)","use-theme":true,"expression":{"interpolated":true,"parameters":["feature","feature-state"]},"property-type":"data-driven"},"building-emissive-strength":{"type":"number","default":0,"minimum":0,"expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light"]},"property-type":"data-driven"}},"paint_line":{"line-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-color":{"type":"color","default":"#000000","use-theme":true,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"line-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]}},"line-width":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light","line-progress"]},"property-type":"data-driven"},"line-gap-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-offset":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-blur":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-dasharray":{"type":"array","value":"number","minimum":0,"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-pattern-cross-fade":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"line-gradient":{"type":"color","use-theme":true,"expression":{"interpolated":true,"parameters":["line-progress"]}},"line-trim-offset":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1]},"line-trim-fade-range":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"line-trim-color":{"type":"color","default":"transparent","use-theme":true,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"line-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"line-border-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-border-color":{"type":"color","default":"rgba(0, 0, 0, 0)","use-theme":true,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-occlusion-opacity":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"paint_circle":{"circle-radius":{"type":"number","default":5,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-color":{"type":"color","default":"#000000","use-theme":true,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-blur":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"circle-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]}},"circle-pitch-scale":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]}},"circle-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1},"default":"viewport","expression":{"parameters":["zoom"]}},"circle-stroke-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-stroke-color":{"type":"color","default":"#000000","use-theme":true,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-stroke-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}}},"paint_heatmap":{"heatmap-radius":{"type":"number","default":30,"minimum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"heatmap-weight":{"type":"number","default":1,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"heatmap-intensity":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"heatmap-color":{"type":"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"use-theme":true,"expression":{"interpolated":true,"parameters":["heatmap-density"]}},"heatmap-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}}},"paint_symbol":{"icon-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-occlusion-opacity":{"type":"number","minimum":0,"maximum":1,"default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-emissive-strength":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light","feature-state"]},"property-type":"data-driven"},"text-emissive-strength":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light","feature-state"]},"property-type":"data-driven"},"icon-color":{"type":"color","default":"#000000","use-theme":true,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","use-theme":true,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"icon-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]}},"icon-image-cross-fade":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"text-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-occlusion-opacity":{"type":"number","minimum":0,"maximum":1,"default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-color":{"type":"color","default":"#000000","use-theme":true,"transition":true,"overridable":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","use-theme":true,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"text-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]}},"icon-color-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"expression":{}},"icon-color-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"expression":{}},"icon-color-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{}},"icon-color-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"expression":{}},"symbol-z-offset":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"}},"paint_raster":{"raster-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-color":{"type":"color","use-theme":true,"expression":{"interpolated":true,"parameters":["raster-value"]}},"raster-color-mix":{"type":"array","default":[0.2126,0.7152,0.0722,0],"length":4,"value":"number","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-color-range":{"type":"array","length":2,"value":"number","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-hue-rotate":{"type":"number","default":0,"period":360,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-resampling":{"type":"enum","values":{"linear":1,"nearest":1},"default":"linear","expression":{"parameters":["zoom"]}},"raster-fade-duration":{"type":"number","default":300,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"raster-array-band":{"type":"string"},"raster-elevation":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}}},"paint_raster-particle":{"raster-particle-array-band":{"type":"string"},"raster-particle-count":{"type":"number","default":512,"minimum":1},"raster-particle-color":{"type":"color","use-theme":true,"expression":{"interpolated":true,"parameters":["raster-particle-speed"]}},"raster-particle-max-speed":{"type":"number","default":1,"minimum":1},"raster-particle-speed-factor":{"type":"number","default":0.2,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-particle-fade-opacity-factor":{"type":"number","default":0.98,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-particle-reset-rate-factor":{"type":"number","default":0.8,"minimum":0,"maximum":1},"raster-particle-elevation":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}}},"paint_hillshade":{"hillshade-illumination-direction":{"type":"number","default":335,"minimum":0,"maximum":359,"expression":{"interpolated":true,"parameters":["zoom"]}},"hillshade-illumination-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"viewport","expression":{"parameters":["zoom"]}},"hillshade-exaggeration":{"type":"number","default":0.5,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"hillshade-shadow-color":{"type":"color","default":"#000000","use-theme":true,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"hillshade-highlight-color":{"type":"color","default":"#FFFFFF","use-theme":true,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"hillshade-accent-color":{"type":"color","default":"#000000","use-theme":true,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"hillshade-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}}},"paint_background":{"background-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":[]}},"background-color":{"type":"color","default":"#000000","use-theme":true,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"background-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom"]}},"background-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"background-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}}},"paint_sky":{"sky-type":{"type":"enum","values":{"gradient":1,"atmosphere":1},"default":"atmosphere","expression":{"parameters":["zoom"]}},"sky-atmosphere-sun":{"type":"array","value":"number","length":2,"minimum":[0,0],"maximum":[360,180],"expression":{"parameters":["zoom"]}},"sky-atmosphere-sun-intensity":{"type":"number","default":10,"minimum":0,"maximum":100},"sky-gradient-center":{"type":"array","value":"number","default":[0,0],"length":2,"minimum":[0,0],"maximum":[360,180],"expression":{"parameters":["zoom"]}},"sky-gradient-radius":{"type":"number","default":90,"minimum":0,"maximum":180,"expression":{"parameters":["zoom"]}},"sky-gradient":{"type":"color","default":["interpolate",["linear"],["sky-radial-progress"],0.8,"#87ceeb",1,"white"],"use-theme":true,"expression":{"interpolated":true,"parameters":["sky-radial-progress"]}},"sky-atmosphere-halo-color":{"type":"color","default":"white","use-theme":true},"sky-atmosphere-color":{"type":"color","default":"white","use-theme":true},"sky-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}}},"paint_model":{"model-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["feature","feature-state","zoom"]},"property-type":"data-driven"},"model-rotation":{"type":"array","value":"number","length":3,"default":[0,0,0],"period":360,"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","zoom"]},"transition":true},"model-scale":{"type":"array","value":"number","length":3,"default":[1,1,1],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","zoom"]},"transition":true},"model-translation":{"type":"array","value":"number","length":3,"default":[0,0,0],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","zoom"]},"transition":true},"model-color":{"type":"color","default":"#ffffff","property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light","zoom"]},"use-theme":true,"transition":true},"model-color-mix-intensity":{"type":"number","property-type":"data-driven","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light"]},"transition":true},"model-type":{"type":"enum","values":{"common-3d":1,"location-indicator":1},"default":"common-3d"},"model-cast-shadows":{"type":"boolean","default":true},"model-receive-shadows":{"type":"boolean","default":true},"model-ambient-occlusion-intensity":{"type":"number","default":1,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"model-emissive-strength":{"type":"number","property-type":"data-driven","default":0,"minimum":0,"maximum":5,"expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light"]},"transition":true},"model-roughness":{"type":"number","default":1,"minimum":0,"maximum":1,"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state"]},"transition":true},"model-height-based-emissive-strength-multiplier":{"type":"array","default":[1,1,1,1,0],"length":5,"value":"number","property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light"]},"transition":true},"model-cutoff-fade-range":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{}},"model-front-cutoff":{"type":"array","value":"number","expression":{"interpolated":true,"parameters":["zoom"]},"length":3,"default":[0,0,1],"minimum":[0,0,0],"maximum":[1,1,1]}},"transition":{"duration":{"type":"number","default":300,"minimum":0},"delay":{"type":"number","default":0,"minimum":0}},"promoteId":{"*":{"type":"*"}}}');function Xl(a){return a instanceof Number||a instanceof String||a instanceof Boolean?a.valueOf():a}function Cm(a){if(Array.isArray(a))return a.map(Cm);if(a instanceof Object&&!(a instanceof Number||a instanceof String||a instanceof Boolean)){const t={};for(const o in a)t[o]=Cm(a[o]);return t}return Xl(a)}function Em(a){if(a===!0||a===!1)return!0;if(!Array.isArray(a)||a.length===0)return!1;switch(a[0]){case"has":return a.length>=2&&a[1]!=="$id"&&a[1]!=="$type";case"in":return a.length>=3&&(typeof a[1]!="string"||Array.isArray(a[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return a.length!==3||Array.isArray(a[1])||Array.isArray(a[2]);case"any":case"all":for(const t of a.slice(1))if(!Em(t)&&typeof t!="boolean")return!1;return!0;default:return!0}}function V0(a,t="",o=null,c="fill"){if(a==null)return{filter:()=>!0,needGeometry:!1,needFeature:!1};Em(a)||(a=Tm(a));const h=a;let _=!0;try{_=function(V){if(!Vh(V))return V;let $=Cm(V);return Gy($),$=jy($),$}(h)}catch{console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.
This is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md
and paste the contents of this message in the report.
Thank you!
Filter Expression:
${JSON.stringify(h,null,2)}
        `)}let y=null,C=null;if(c!=="background"&&c!=="sky"&&c!=="slot"){C=Dt[`filter_${c}`];const V=Yu(_,C,t,o);if(V.result==="error")throw new Error(V.value.map($=>`${$.key}: ${$.message}`).join(", "));y=($,U,X)=>V.value.evaluate($,U,{},X)}let R=null,L=null;if(_!==h){const V=Yu(h,C,t,o);if(V.result==="error")throw new Error(V.value.map($=>`${$.key}: ${$.message}`).join(", "));R=($,U,X,ee,de)=>V.value.evaluate($,U,{},X,void 0,void 0,ee,de),L=!Rh(V.value.expression)}return{filter:y,dynamicFilter:R||void 0,needGeometry:qy(_),needFeature:!!L}}function jy(a){if(!Array.isArray(a))return a;const t=function(o){if(pw.has(o[0])){for(let c=1;c<o.length;c++)if(Vh(o[c]))return!0}return o}(a);return t===!0?t:t.map(o=>jy(o))}function Gy(a){let t=!1;const o=[];if(a[0]==="case"){for(let c=1;c<a.length-1;c+=2)t=t||Vh(a[c]),o.push(a[c+1]);o.push(a[a.length-1])}else if(a[0]==="match"){t=t||Vh(a[1]);for(let c=2;c<a.length-1;c+=2)o.push(a[c+1]);o.push(a[a.length-1])}else if(a[0]==="step"){t=t||Vh(a[1]);for(let c=1;c<a.length-1;c+=2)o.push(a[c+1])}t&&(a.length=0,a.push("any",...o));for(let c=1;c<a.length;c++)Gy(a[c])}function Vh(a){if(!Array.isArray(a))return!1;if((t=a[0])==="pitch"||t==="distance-from-center")return!0;var t;for(let o=1;o<a.length;o++)if(Vh(a[o]))return!0;return!1}const pw=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function mw(a,t){return a<t?-1:a>t?1:0}function qy(a){if(!Array.isArray(a))return!1;if(a[0]==="within"||a[0]==="distance")return!0;for(let t=1;t<a.length;t++)if(qy(a[t]))return!0;return!1}function Tm(a){if(!a)return!0;const t=a[0];return a.length<=1?t!=="any":t==="=="?$0(a[1],a[2],"=="):t==="!="?Im($0(a[1],a[2],"==")):t==="<"||t===">"||t==="<="||t===">="?$0(a[1],a[2],t):t==="any"?(o=a.slice(1),["any"].concat(o.map(Tm))):t==="all"?["all"].concat(a.slice(1).map(Tm)):t==="none"?["all"].concat(a.slice(1).map(Tm).map(Im)):t==="in"?H0(a[1],a.slice(2)):t==="!in"?Im(H0(a[1],a.slice(2))):t==="has"?Wy(a[1]):t!=="!has"||Im(Wy(a[1]));var o}function $0(a,t,o){switch(a){case"$type":return[`filter-type-${o}`,t];case"$id":return[`filter-id-${o}`,t];default:return[`filter-${o}`,a,t]}}function H0(a,t){if(t.length===0)return!1;switch(a){case"$type":return["filter-type-in",["literal",t]];case"$id":return["filter-id-in",["literal",t]];default:return t.length>200&&!t.some(o=>typeof o!=typeof t[0])?["filter-in-large",a,["literal",t.sort(mw)]]:["filter-in-small",a,["literal",t]]}}function Wy(a){switch(a){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",a]}}function Im(a){return["!",a]}const Yf="";function Wd(a,t){return t?`${a}${Yf}${t}`:a}const U0="-transition",Xc=new Set(["fill","line","background","hillshade","raster"]);class oa extends Ua{constructor(t,o,c,h,_){if(super(),this.id=t.id,this.fqid=Wd(this.id,c),this.type=t.type,this.scope=c,this.lut=h,this.options=_,this._featureFilter={filter:()=>!0,needGeometry:!1,needFeature:!1},this._filterCompiled=!1,this.configDependencies=new Set,t.type!=="custom"){if(this.metadata=t.metadata,this.minzoom=t.minzoom,this.maxzoom=t.maxzoom,t.type&&t.type!=="background"&&t.type!=="sky"&&t.type!=="slot"){this.source=t.source,this.sourceLayer=t["source-layer"],this.filter=t.filter;const y=Yu(this.filter,Dt[`filter_${t.type}`]);y.result!=="error"&&(this.configDependencies=new Set([...this.configDependencies,...y.value.configDependencies]))}if(t.slot&&(this.slot=t.slot),o.layout&&(this._unevaluatedLayout=new fw(o.layout,this.scope,_),this.configDependencies=new Set([...this.configDependencies,...this._unevaluatedLayout.configDependencies])),o.paint){this._transitionablePaint=new $y(o.paint,this.scope,_);for(const y in t.paint)this.setPaintProperty(y,t.paint[y]);for(const y in t.layout)this.setLayoutProperty(y,t.layout[y]);this.configDependencies=new Set([...this.configDependencies,...this._transitionablePaint.configDependencies]),this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Gd(o.paint)}}}onAdd(t){}onRemove(t){}isDraped(t){return!this.is3D(!0)&&Xc.has(this.type)}getLayoutProperty(t){return t==="visibility"?this.visibility:this._unevaluatedLayout.getValue(t)}setLayoutProperty(t,o){if(this.type==="custom"&&t==="visibility")return void(this.visibility=o);const c=this._unevaluatedLayout;c._properties.properties[t]&&(c.setValue(t,o),this.configDependencies=new Set([...this.configDependencies,...c.configDependencies]),t==="visibility"&&this.possiblyEvaluateVisibility())}possiblyEvaluateVisibility(){this._unevaluatedLayout._values.visibility&&(this.visibility=this._unevaluatedLayout._values.visibility.possiblyEvaluate({zoom:0}))}getPaintProperty(t){return t.endsWith(U0)?this._transitionablePaint.getTransition(t.slice(0,-11)):this._transitionablePaint.getValue(t)}setPaintProperty(t,o){const c=this._transitionablePaint,h=c._properties.properties;if(t.endsWith(U0)){const $=t.slice(0,-11);return h[$]&&c.setTransition($,o||void 0),!1}if(!h[t])return!1;const _=c._values[t],y=_.value.isDataDriven(),C=_.value;c.setValue(t,o),this.configDependencies=new Set([...this.configDependencies,...c.configDependencies]),this._handleSpecialPaintPropertyUpdate(t);const R=c._values[t].value,L=R.isDataDriven(),V=t.endsWith("pattern")||t==="line-dasharray";return L||y||V||this._handleOverridablePaintPropertyUpdate(t,C,R)}_handleSpecialPaintPropertyUpdate(t){}getProgramIds(){return null}getDefaultProgramParams(t,o,c){return null}_handleOverridablePaintPropertyUpdate(t,o,c){return!1}isHidden(t){return!!(this.minzoom&&t<this.minzoom)||!!(this.maxzoom&&t>=this.maxzoom)||this.visibility==="none"}updateTransitions(t){this._transitioningPaint=this._transitionablePaint.transitioned(t,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(t,o){this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(t,void 0,o)),this.paint=this._transitioningPaint.possiblyEvaluate(t,void 0,o)}serialize(){return Ir({id:this.id,type:this.type,slot:this.slot,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()},(t,o)=>!(t===void 0||o==="layout"&&!Object.keys(t).length||o==="paint"&&!Object.keys(t).length))}is3D(t){return!1}hasElevation(){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}hasShadowPass(){return!1}canCastShadows(){return!1}hasLightBeamPass(){return!1}cutoffRange(){return 0}tileCoverLift(){return 0}resize(){}isStateDependent(){for(const t in this.paint._values){const o=this.paint.get(t);if(o instanceof Bh&&Hf(o.property.specification)&&(o.value.kind==="source"||o.value.kind==="composite")&&o.value.isStateDependent)return!0}return!1}compileFilter(t){this._filterCompiled||(this._featureFilter=V0(this.filter,this.scope,t),this._filterCompiled=!0)}invalidateCompiledFilter(){this._filterCompiled=!1}dynamicFilter(){return this._featureFilter.dynamicFilter}dynamicFilterNeedsFeature(){return this._featureFilter.needFeature}getLayerRenderingStats(){return this._stats}resetLayerRenderingStats(t){this._stats&&(t.renderPass==="shadow"?this._stats.numRenderedVerticesInShadowPass=0:this._stats.numRenderedVerticesInTransparentPass=0)}queryRadius(t){}queryIntersectsFeature(t,o,c,h,_,y,C,R,L){}}const gw={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Zf{constructor(t,o){this._structArray=t,this._pos1=o*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Ms{constructor(){this.capacity=-1,this.resize(0)}static serialize(t,o){return t._trim(),o&&o.add(t.arrayBuffer),{length:t.length,arrayBuffer:t.arrayBuffer}}static deserialize(t){const o=Object.create(this.prototype);return o.arrayBuffer=t.arrayBuffer,o.length=t.length,o.capacity=t.arrayBuffer.byteLength/o.bytesPerElement,o._refreshViews(),o}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(t){this.reserve(t),this.length=t}reserve(t){if(t>this.capacity){this.capacity=Math.max(t,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const o=this.uint8;this._refreshViews(),o&&this.uint8.set(o)}}_refreshViews(){throw new Error("StructArray#_refreshViews() must be implemented by each concrete StructArray layout")}emplace(...t){throw new Error("StructArray#emplace() must be implemented by each concrete StructArray layout")}emplaceBack(...t){throw new Error("StructArray#emplaceBack() must be implemented by each concrete StructArray layout")}destroy(){this.int8=this.uint8=this.int16=this.uint16=this.int32=this.uint32=this.float32=null,this.arrayBuffer=null}}function zi(a,t=1){let o=0,c=0;return{members:a.map(h=>{const _=gw[h.type].BYTES_PER_ELEMENT,y=o=j0(o,Math.max(t,_)),C=h.components||1;return c=Math.max(c,_),o+=_*C,{name:h.name,type:h.type,components:C,offset:y}}),size:j0(o,Math.max(c,t)),alignment:t}}function j0(a,t){return Math.ceil(a/t)*t}class ec extends Ms{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,o){const c=this.length;return this.resize(c+1),this.emplace(c,t,o)}emplace(t,o,c){const h=2*t;return this.int16[h+0]=o,this.int16[h+1]=c,t}}ec.prototype.bytesPerElement=4,Qn(ec,"StructArrayLayout2i4");class Xf extends Ms{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,o,c){const h=this.length;return this.resize(h+1),this.emplace(h,t,o,c)}emplace(t,o,c,h){const _=3*t;return this.int16[_+0]=o,this.int16[_+1]=c,this.int16[_+2]=h,t}}Xf.prototype.bytesPerElement=6,Qn(Xf,"StructArrayLayout3i6");class $h extends Ms{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,o,c,h){const _=this.length;return this.resize(_+1),this.emplace(_,t,o,c,h)}emplace(t,o,c,h,_){const y=4*t;return this.int16[y+0]=o,this.int16[y+1]=c,this.int16[y+2]=h,this.int16[y+3]=_,t}}$h.prototype.bytesPerElement=8,Qn($h,"StructArrayLayout4i8");class Jc extends Ms{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t){const o=this.length;return this.resize(o+1),this.emplace(o,t)}emplace(t,o){return this.float32[1*t+0]=o,t}}Jc.prototype.bytesPerElement=4,Qn(Jc,"StructArrayLayout1f4");class G0 extends Ms{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,o,c){const h=this.length;return this.resize(h+1),this.emplace(h,t,o,c)}emplace(t,o,c,h){const _=4*t,y=2*t;return this.int16[_+0]=o,this.int16[_+1]=c,this.float32[y+1]=h,t}}G0.prototype.bytesPerElement=8,Qn(G0,"StructArrayLayout2i1f8");class km extends Ms{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,o,c){const h=this.length;return this.resize(h+1),this.emplace(h,t,o,c)}emplace(t,o,c,h){const _=4*t;return this.int16[_+0]=o,this.int16[_+1]=c,this.int16[_+2]=h,t}}km.prototype.bytesPerElement=8,Qn(km,"StructArrayLayout3i8");class Hh extends Ms{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,o,c,h,_){const y=this.length;return this.resize(y+1),this.emplace(y,t,o,c,h,_)}emplace(t,o,c,h,_,y){const C=5*t;return this.int16[C+0]=o,this.int16[C+1]=c,this.int16[C+2]=h,this.int16[C+3]=_,this.int16[C+4]=y,t}}Hh.prototype.bytesPerElement=10,Qn(Hh,"StructArrayLayout5i10");class q0 extends Ms{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,o,c,h,_,y,C){const R=this.length;return this.resize(R+1),this.emplace(R,t,o,c,h,_,y,C)}emplace(t,o,c,h,_,y,C,R){const L=6*t,V=12*t,$=3*t;return this.int16[L+0]=o,this.int16[L+1]=c,this.uint8[V+4]=h,this.uint8[V+5]=_,this.uint8[V+6]=y,this.uint8[V+7]=C,this.float32[$+2]=R,t}}q0.prototype.bytesPerElement=12,Qn(q0,"StructArrayLayout2i4ub1f12");class _u extends Ms{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,o,c){const h=this.length;return this.resize(h+1),this.emplace(h,t,o,c)}emplace(t,o,c,h){const _=3*t;return this.float32[_+0]=o,this.float32[_+1]=c,this.float32[_+2]=h,t}}_u.prototype.bytesPerElement=12,Qn(_u,"StructArrayLayout3f12");class Qc extends Ms{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,o,c,h,_){const y=this.length;return this.resize(y+1),this.emplace(y,t,o,c,h,_)}emplace(t,o,c,h,_,y){const C=6*t,R=3*t;return this.uint16[C+0]=o,this.uint16[C+1]=c,this.uint16[C+2]=h,this.uint16[C+3]=_,this.float32[R+2]=y,t}}Qc.prototype.bytesPerElement=12,Qn(Qc,"StructArrayLayout4ui1f12");class Jf extends Ms{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,o,c,h){const _=this.length;return this.resize(_+1),this.emplace(_,t,o,c,h)}emplace(t,o,c,h,_){const y=4*t;return this.uint16[y+0]=o,this.uint16[y+1]=c,this.uint16[y+2]=h,this.uint16[y+3]=_,t}}Jf.prototype.bytesPerElement=8,Qn(Jf,"StructArrayLayout4ui8");class Mm extends Ms{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,o,c,h,_,y){const C=this.length;return this.resize(C+1),this.emplace(C,t,o,c,h,_,y)}emplace(t,o,c,h,_,y,C){const R=6*t;return this.int16[R+0]=o,this.int16[R+1]=c,this.int16[R+2]=h,this.int16[R+3]=_,this.int16[R+4]=y,this.int16[R+5]=C,t}}Mm.prototype.bytesPerElement=12,Qn(Mm,"StructArrayLayout6i12");class Uh extends Ms{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,o,c,h,_,y,C,R,L,V,$,U){const X=this.length;return this.resize(X+1),this.emplace(X,t,o,c,h,_,y,C,R,L,V,$,U)}emplace(t,o,c,h,_,y,C,R,L,V,$,U,X){const ee=12*t;return this.int16[ee+0]=o,this.int16[ee+1]=c,this.int16[ee+2]=h,this.int16[ee+3]=_,this.uint16[ee+4]=y,this.uint16[ee+5]=C,this.uint16[ee+6]=R,this.uint16[ee+7]=L,this.int16[ee+8]=V,this.int16[ee+9]=$,this.int16[ee+10]=U,this.int16[ee+11]=X,t}}Uh.prototype.bytesPerElement=24,Qn(Uh,"StructArrayLayout4i4ui4i24");class jh extends Ms{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,o,c,h,_,y){const C=this.length;return this.resize(C+1),this.emplace(C,t,o,c,h,_,y)}emplace(t,o,c,h,_,y,C){const R=10*t,L=5*t;return this.int16[R+0]=o,this.int16[R+1]=c,this.int16[R+2]=h,this.float32[L+2]=_,this.float32[L+3]=y,this.float32[L+4]=C,t}}jh.prototype.bytesPerElement=20,Qn(jh,"StructArrayLayout3i3f20");class $o extends Ms{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,o,c,h){const _=this.length;return this.resize(_+1),this.emplace(_,t,o,c,h)}emplace(t,o,c,h,_){const y=4*t;return this.float32[y+0]=o,this.float32[y+1]=c,this.float32[y+2]=h,this.float32[y+3]=_,t}}$o.prototype.bytesPerElement=16,Qn($o,"StructArrayLayout4f16");class Gh extends Ms{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(t){const o=this.length;return this.resize(o+1),this.emplace(o,t)}emplace(t,o){return this.uint32[1*t+0]=o,t}}Gh.prototype.bytesPerElement=4,Qn(Gh,"StructArrayLayout1ul4");class ed extends Ms{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,o){const c=this.length;return this.resize(c+1),this.emplace(c,t,o)}emplace(t,o,c){const h=2*t;return this.uint16[h+0]=o,this.uint16[h+1]=c,t}}ed.prototype.bytesPerElement=4,Qn(ed,"StructArrayLayout2ui4");class W0 extends Ms{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,o,c,h,_,y,C,R,L,V,$,U,X){const ee=this.length;return this.resize(ee+1),this.emplace(ee,t,o,c,h,_,y,C,R,L,V,$,U,X)}emplace(t,o,c,h,_,y,C,R,L,V,$,U,X,ee){const de=20*t,be=10*t;return this.int16[de+0]=o,this.int16[de+1]=c,this.int16[de+2]=h,this.int16[de+3]=_,this.int16[de+4]=y,this.float32[be+3]=C,this.float32[be+4]=R,this.float32[be+5]=L,this.float32[be+6]=V,this.int16[de+14]=$,this.uint32[be+8]=U,this.uint16[de+18]=X,this.uint16[de+19]=ee,t}}W0.prototype.bytesPerElement=40,Qn(W0,"StructArrayLayout5i4f1i1ul2ui40");class Am extends Ms{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,o,c,h,_,y,C){const R=this.length;return this.resize(R+1),this.emplace(R,t,o,c,h,_,y,C)}emplace(t,o,c,h,_,y,C,R){const L=8*t;return this.int16[L+0]=o,this.int16[L+1]=c,this.int16[L+2]=h,this.int16[L+4]=_,this.int16[L+5]=y,this.int16[L+6]=C,this.int16[L+7]=R,t}}Am.prototype.bytesPerElement=16,Qn(Am,"StructArrayLayout3i2i2i16");class K0 extends Ms{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,o,c,h,_){const y=this.length;return this.resize(y+1),this.emplace(y,t,o,c,h,_)}emplace(t,o,c,h,_,y){const C=4*t,R=8*t;return this.float32[C+0]=o,this.float32[C+1]=c,this.float32[C+2]=h,this.int16[R+6]=_,this.int16[R+7]=y,t}}K0.prototype.bytesPerElement=16,Qn(K0,"StructArrayLayout2f1f2i16");class Qf extends Ms{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,o,c,h,_,y){const C=this.length;return this.resize(C+1),this.emplace(C,t,o,c,h,_,y)}emplace(t,o,c,h,_,y,C){const R=20*t,L=5*t;return this.uint8[R+0]=o,this.uint8[R+1]=c,this.float32[L+1]=h,this.float32[L+2]=_,this.float32[L+3]=y,this.float32[L+4]=C,t}}Qf.prototype.bytesPerElement=20,Qn(Qf,"StructArrayLayout2ub4f20");class Ho extends Ms{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,o,c){const h=this.length;return this.resize(h+1),this.emplace(h,t,o,c)}emplace(t,o,c,h){const _=3*t;return this.uint16[_+0]=o,this.uint16[_+1]=c,this.uint16[_+2]=h,t}}Ho.prototype.bytesPerElement=6,Qn(Ho,"StructArrayLayout3ui6");class ep extends Ms{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(t,o,c,h,_,y,C,R,L,V,$,U,X,ee,de,be,Ie,Fe,Be,pe,De){const He=this.length;return this.resize(He+1),this.emplace(He,t,o,c,h,_,y,C,R,L,V,$,U,X,ee,de,be,Ie,Fe,Be,pe,De)}emplace(t,o,c,h,_,y,C,R,L,V,$,U,X,ee,de,be,Ie,Fe,Be,pe,De,He){const Ze=30*t,xt=15*t,ht=60*t;return this.int16[Ze+0]=o,this.int16[Ze+1]=c,this.int16[Ze+2]=h,this.float32[xt+2]=_,this.float32[xt+3]=y,this.uint16[Ze+8]=C,this.uint16[Ze+9]=R,this.uint32[xt+5]=L,this.uint32[xt+6]=V,this.uint32[xt+7]=$,this.uint16[Ze+16]=U,this.uint16[Ze+17]=X,this.uint16[Ze+18]=ee,this.float32[xt+10]=de,this.float32[xt+11]=be,this.uint8[ht+48]=Ie,this.uint8[ht+49]=Fe,this.uint8[ht+50]=Be,this.uint32[xt+13]=pe,this.int16[Ze+28]=De,this.uint8[ht+58]=He,t}}ep.prototype.bytesPerElement=60,Qn(ep,"StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60");class Y0 extends Ms{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(t,o,c,h,_,y,C,R,L,V,$,U,X,ee,de,be,Ie,Fe,Be,pe,De,He,Ze,xt,ht,St,Rt,Yt,Tn,hn,Cn,In,Jt){const yn=this.length;return this.resize(yn+1),this.emplace(yn,t,o,c,h,_,y,C,R,L,V,$,U,X,ee,de,be,Ie,Fe,Be,pe,De,He,Ze,xt,ht,St,Rt,Yt,Tn,hn,Cn,In,Jt)}emplace(t,o,c,h,_,y,C,R,L,V,$,U,X,ee,de,be,Ie,Fe,Be,pe,De,He,Ze,xt,ht,St,Rt,Yt,Tn,hn,Cn,In,Jt,yn){const Wt=20*t,Xt=40*t,Ln=80*t;return this.float32[Wt+0]=o,this.float32[Wt+1]=c,this.int16[Xt+4]=h,this.int16[Xt+5]=_,this.int16[Xt+6]=y,this.int16[Xt+7]=C,this.int16[Xt+8]=R,this.int16[Xt+9]=L,this.int16[Xt+10]=V,this.int16[Xt+11]=$,this.int16[Xt+12]=U,this.uint16[Xt+13]=X,this.uint16[Xt+14]=ee,this.uint16[Xt+15]=de,this.uint16[Xt+16]=be,this.uint16[Xt+17]=Ie,this.uint16[Xt+18]=Fe,this.uint16[Xt+19]=Be,this.uint16[Xt+20]=pe,this.uint16[Xt+21]=De,this.uint16[Xt+22]=He,this.uint16[Xt+23]=Ze,this.uint16[Xt+24]=xt,this.uint16[Xt+25]=ht,this.uint16[Xt+26]=St,this.uint16[Xt+27]=Rt,this.uint32[Wt+14]=Yt,this.float32[Wt+15]=Tn,this.float32[Wt+16]=hn,this.float32[Wt+17]=Cn,this.float32[Wt+18]=In,this.uint8[Ln+76]=Jt,this.uint16[Xt+39]=yn,t}}Y0.prototype.bytesPerElement=80,Qn(Y0,"StructArrayLayout2f9i15ui1ul4f1ub1ui80");class Z0 extends Ms{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,o,c,h,_,y){const C=this.length;return this.resize(C+1),this.emplace(C,t,o,c,h,_,y)}emplace(t,o,c,h,_,y,C){const R=6*t;return this.float32[R+0]=o,this.float32[R+1]=c,this.float32[R+2]=h,this.float32[R+3]=_,this.float32[R+4]=y,this.float32[R+5]=C,t}}Z0.prototype.bytesPerElement=24,Qn(Z0,"StructArrayLayout6f24");class td extends Ms{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,o,c,h,_){const y=this.length;return this.resize(y+1),this.emplace(y,t,o,c,h,_)}emplace(t,o,c,h,_,y){const C=5*t;return this.float32[C+0]=o,this.float32[C+1]=c,this.float32[C+2]=h,this.float32[C+3]=_,this.float32[C+4]=y,t}}td.prototype.bytesPerElement=20,Qn(td,"StructArrayLayout5f20");class tp extends Ms{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,o,c,h,_,y,C){const R=this.length;return this.resize(R+1),this.emplace(R,t,o,c,h,_,y,C)}emplace(t,o,c,h,_,y,C,R){const L=7*t;return this.float32[L+0]=o,this.float32[L+1]=c,this.float32[L+2]=h,this.float32[L+3]=_,this.float32[L+4]=y,this.float32[L+5]=C,this.float32[L+6]=R,t}}tp.prototype.bytesPerElement=28,Qn(tp,"StructArrayLayout7f28");class X0 extends Ms{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,o,c,h,_,y,C,R,L,V,$){const U=this.length;return this.resize(U+1),this.emplace(U,t,o,c,h,_,y,C,R,L,V,$)}emplace(t,o,c,h,_,y,C,R,L,V,$,U){const X=11*t;return this.float32[X+0]=o,this.float32[X+1]=c,this.float32[X+2]=h,this.float32[X+3]=_,this.float32[X+4]=y,this.float32[X+5]=C,this.float32[X+6]=R,this.float32[X+7]=L,this.float32[X+8]=V,this.float32[X+9]=$,this.float32[X+10]=U,t}}X0.prototype.bytesPerElement=44,Qn(X0,"StructArrayLayout11f44");class Rm extends Ms{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,o,c,h,_,y,C,R,L){const V=this.length;return this.resize(V+1),this.emplace(V,t,o,c,h,_,y,C,R,L)}emplace(t,o,c,h,_,y,C,R,L,V){const $=9*t;return this.float32[$+0]=o,this.float32[$+1]=c,this.float32[$+2]=h,this.float32[$+3]=_,this.float32[$+4]=y,this.float32[$+5]=C,this.float32[$+6]=R,this.float32[$+7]=L,this.float32[$+8]=V,t}}Rm.prototype.bytesPerElement=36,Qn(Rm,"StructArrayLayout9f36");class Kd extends Ms{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,o){const c=this.length;return this.resize(c+1),this.emplace(c,t,o)}emplace(t,o,c){const h=2*t;return this.float32[h+0]=o,this.float32[h+1]=c,t}}Kd.prototype.bytesPerElement=8,Qn(Kd,"StructArrayLayout2f8");class J0 extends Ms{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,o,c,h){const _=this.length;return this.resize(_+1),this.emplace(_,t,o,c,h)}emplace(t,o,c,h,_){const y=6*t;return this.uint32[3*t+0]=o,this.uint16[y+2]=c,this.uint16[y+3]=h,this.uint16[y+4]=_,t}}J0.prototype.bytesPerElement=12,Qn(J0,"StructArrayLayout1ul3ui12");class np extends Ms{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t){const o=this.length;return this.resize(o+1),this.emplace(o,t)}emplace(t,o){return this.uint16[1*t+0]=o,t}}np.prototype.bytesPerElement=2,Qn(np,"StructArrayLayout1ui2");class qh extends Ms{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,o,c,h,_,y,C,R,L,V,$,U,X,ee,de,be){const Ie=this.length;return this.resize(Ie+1),this.emplace(Ie,t,o,c,h,_,y,C,R,L,V,$,U,X,ee,de,be)}emplace(t,o,c,h,_,y,C,R,L,V,$,U,X,ee,de,be,Ie){const Fe=16*t;return this.float32[Fe+0]=o,this.float32[Fe+1]=c,this.float32[Fe+2]=h,this.float32[Fe+3]=_,this.float32[Fe+4]=y,this.float32[Fe+5]=C,this.float32[Fe+6]=R,this.float32[Fe+7]=L,this.float32[Fe+8]=V,this.float32[Fe+9]=$,this.float32[Fe+10]=U,this.float32[Fe+11]=X,this.float32[Fe+12]=ee,this.float32[Fe+13]=de,this.float32[Fe+14]=be,this.float32[Fe+15]=Ie,t}}qh.prototype.bytesPerElement=64,Qn(qh,"StructArrayLayout16f64");class rp extends Ms{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,o,c,h,_,y,C){const R=this.length;return this.resize(R+1),this.emplace(R,t,o,c,h,_,y,C)}emplace(t,o,c,h,_,y,C,R){const L=10*t,V=5*t;return this.uint16[L+0]=o,this.uint16[L+1]=c,this.uint16[L+2]=h,this.uint16[L+3]=_,this.float32[V+2]=y,this.float32[V+3]=C,this.float32[V+4]=R,t}}rp.prototype.bytesPerElement=20,Qn(rp,"StructArrayLayout4ui3f20");class Q0 extends Ms{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t){const o=this.length;return this.resize(o+1),this.emplace(o,t)}emplace(t,o){return this.int16[1*t+0]=o,t}}Q0.prototype.bytesPerElement=2,Qn(Q0,"StructArrayLayout1i2");class Pm extends Ms{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer)}emplaceBack(t){const o=this.length;return this.resize(o+1),this.emplace(o,t)}emplace(t,o){return this.uint8[1*t+0]=o,t}}Pm.prototype.bytesPerElement=1,Qn(Pm,"StructArrayLayout1ub1");class Ky extends Zf{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.int16[this._pos2+3]}get tileAnchorY(){return this._structArray.int16[this._pos2+4]}get x1(){return this._structArray.float32[this._pos4+3]}get y1(){return this._structArray.float32[this._pos4+4]}get x2(){return this._structArray.float32[this._pos4+5]}get y2(){return this._structArray.float32[this._pos4+6]}get padding(){return this._structArray.int16[this._pos2+14]}get featureIndex(){return this._structArray.uint32[this._pos4+8]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+18]}get bucketIndex(){return this._structArray.uint16[this._pos2+19]}}Ky.prototype.size=40;class Lm extends W0{get(t){return new Ky(this,t)}}Qn(Lm,"CollisionBoxArray");class Yy extends Zf{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+8]}get numGlyphs(){return this._structArray.uint16[this._pos2+9]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+5]}get lineStartIndex(){return this._structArray.uint32[this._pos4+6]}get lineLength(){return this._structArray.uint32[this._pos4+7]}get segment(){return this._structArray.uint16[this._pos2+16]}get lowerSize(){return this._structArray.uint16[this._pos2+17]}get upperSize(){return this._structArray.uint16[this._pos2+18]}get lineOffsetX(){return this._structArray.float32[this._pos4+10]}get lineOffsetY(){return this._structArray.float32[this._pos4+11]}get writingMode(){return this._structArray.uint8[this._pos1+48]}get placedOrientation(){return this._structArray.uint8[this._pos1+49]}set placedOrientation(t){this._structArray.uint8[this._pos1+49]=t}get hidden(){return this._structArray.uint8[this._pos1+50]}set hidden(t){this._structArray.uint8[this._pos1+50]=t}get crossTileID(){return this._structArray.uint32[this._pos4+13]}set crossTileID(t){this._structArray.uint32[this._pos4+13]=t}get associatedIconIndex(){return this._structArray.int16[this._pos2+28]}get flipState(){return this._structArray.uint8[this._pos1+58]}set flipState(t){this._structArray.uint8[this._pos1+58]=t}}Yy.prototype.size=60;class Zy extends ep{get(t){return new Yy(this,t)}}Qn(Zy,"PlacedSymbolArray");class Xy extends Zf{get tileAnchorX(){return this._structArray.float32[this._pos4+0]}get tileAnchorY(){return this._structArray.float32[this._pos4+1]}get projectedAnchorX(){return this._structArray.int16[this._pos2+4]}get projectedAnchorY(){return this._structArray.int16[this._pos2+5]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+6]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+7]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+8]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+9]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+10]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+11]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+12]}get key(){return this._structArray.uint16[this._pos2+13]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+14]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+15]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+16]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+17]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+18]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+19]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+20]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+21]}get featureIndex(){return this._structArray.uint16[this._pos2+22]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+23]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+24]}get numIconVertices(){return this._structArray.uint16[this._pos2+25]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+26]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+27]}get crossTileID(){return this._structArray.uint32[this._pos4+14]}set crossTileID(t){this._structArray.uint32[this._pos4+14]=t}get textOffset0(){return this._structArray.float32[this._pos4+15]}get textOffset1(){return this._structArray.float32[this._pos4+16]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+17]}get zOffset(){return this._structArray.float32[this._pos4+18]}set zOffset(t){this._structArray.float32[this._pos4+18]=t}get hasIconTextFit(){return this._structArray.uint8[this._pos1+76]}get elevationFeatureIndex(){return this._structArray.uint16[this._pos2+39]}}Xy.prototype.size=80;class Jy extends Y0{get(t){return new Xy(this,t)}}Qn(Jy,"SymbolInstanceArray");class e_ extends Jc{getoffsetX(t){return this.float32[1*t+0]}}Qn(e_,"GlyphOffsetArray");class Qy extends ec{getx(t){return this.int16[2*t+0]}gety(t){return this.int16[2*t+1]}}Qn(Qy,"SymbolLineVertexArray");class e1 extends Zf{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}e1.prototype.size=12;class t1 extends J0{get(t){return new e1(this,t)}}Qn(t1,"FeatureIndexArray");class n1 extends ed{geta_centroid_pos0(t){return this.uint16[2*t+0]}geta_centroid_pos1(t){return this.uint16[2*t+1]}}Qn(n1,"FillExtrusionCentroidArray");class r1 extends Zf{get a_join_normal_inside0(){return this._structArray.int16[this._pos2+0]}get a_join_normal_inside1(){return this._structArray.int16[this._pos2+1]}get a_join_normal_inside2(){return this._structArray.int16[this._pos2+2]}}r1.prototype.size=6;class i1 extends Xf{get(t){return new r1(this,t)}}Qn(i1,"FillExtrusionWallArray");const _w=zi([{name:"a_pos",components:2,type:"Int16"}],4),vw=zi([{name:"a_circle_z_offset",components:1,type:"Float32"}],4),Om=zi([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]);class Us{constructor(t=[]){this.segments=t}_prepareSegment(t,o,c,h){let _=this.segments[this.segments.length-1];return t>Us.MAX_VERTEX_ARRAY_LENGTH&&kn(`Max vertices per segment is ${Us.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${t}`),(!_||_.vertexLength+t>Us.MAX_VERTEX_ARRAY_LENGTH||_.sortKey!==h)&&(_={vertexOffset:o,primitiveOffset:c,vertexLength:0,primitiveLength:0},h!==void 0&&(_.sortKey=h),this.segments.push(_)),_}prepareSegment(t,o,c,h){return this._prepareSegment(t,o.length,c.length,h)}get(){return this.segments}destroy(){for(const t of this.segments)for(const o in t.vaos)t.vaos[o].destroy()}static simpleSegment(t,o,c,h){return new Us([{vertexOffset:t,primitiveOffset:o,vertexLength:c,primitiveLength:h,vaos:{},sortKey:0}])}}function s1(a,t){return 256*(a=tt(Math.floor(a),0,255))+tt(Math.floor(t),0,255)}Us.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Qn(Us,"SegmentVector");const Dm=zi([{name:"a_pattern",components:4,type:"Uint16"},{name:"a_pixel_ratio",components:1,type:"Float32"}]),t_=zi([{name:"a_pattern_b",components:4,type:"Uint16"}]),o1=zi([{name:"a_dash",components:4,type:"Uint16"}]);class ip{constructor(){this.ids=[],this.uniqueIds=[],this.positions=[],this.indexed=!1}add(t,o,c,h){this.ids.push(n_(t)),this.positions.push(o,c,h)}eachPosition(t,o){const c=n_(t);let h=0,_=this.ids.length-1;for(;h<_;){const y=h+_>>1;this.ids[y]>=c?_=y:h=y+1}for(;this.ids[h]===c;)o(this.positions[3*h],this.positions[3*h+1],this.positions[3*h+2]),h++}static serialize(t,o){const c=new Float64Array(t.ids),h=new Uint32Array(t.positions);return zm(c,h,0,c.length-1),o&&(o.add(c.buffer),o.add(h.buffer)),{ids:c,positions:h}}static deserialize(t){const o=new ip;let c;o.ids=t.ids,o.positions=t.positions;for(const h of o.ids)h!==c&&o.uniqueIds.push(h),c=h;return o.indexed=!0,o}}function n_(a){const t=+a;return!isNaN(t)&&Number.MIN_SAFE_INTEGER<=t&&t<=Number.MAX_SAFE_INTEGER?t:Pc(String(a))}function zm(a,t,o,c){for(;o<c;){const h=a[o+c>>1];let _=o-1,y=c+1;for(;;){do _++;while(a[_]<h);do y--;while(a[y]>h);if(_>=y)break;sp(a,_,y),sp(t,3*_,3*y),sp(t,3*_+1,3*y+1),sp(t,3*_+2,3*y+2)}y-o<c-y?(zm(a,t,o,y),o=y+1):(zm(a,t,y+1,c),c=y)}}function sp(a,t,o){const c=a[t];a[t]=a[o],a[o]=c}Qn(ip,"FeaturePositionMap");class tc{constructor(t){this.gl=t.gl,this.initialized=!1}fetchUniformLocation(t,o){return this.location||this.initialized||(this.location=this.gl.getUniformLocation(t,o),this.initialized=!0),!!this.location}set(t,o,c){throw new Error("Uniform#set() must be implemented by each concrete Uniform")}}class Nm extends tc{constructor(t){super(t),this.current=0}set(t,o,c){this.fetchUniformLocation(t,o)&&this.current!==c&&(this.current=c,this.gl.uniform1i(this.location,c))}}class no extends tc{constructor(t){super(t),this.current=0}set(t,o,c){this.fetchUniformLocation(t,o)&&this.current!==c&&(this.current=c,this.gl.uniform1f(this.location,c))}}class vu extends tc{constructor(t){super(t),this.current=[0,0]}set(t,o,c){this.fetchUniformLocation(t,o)&&(c[0]===this.current[0]&&c[1]===this.current[1]||(this.current=c,this.gl.uniform2f(this.location,c[0],c[1])))}}class op extends tc{constructor(t){super(t),this.current=[0,0,0]}set(t,o,c){this.fetchUniformLocation(t,o)&&(c[0]===this.current[0]&&c[1]===this.current[1]&&c[2]===this.current[2]||(this.current=c,this.gl.uniform3f(this.location,c[0],c[1],c[2])))}}class Fm extends tc{constructor(t){super(t),this.current=[0,0,0,0]}set(t,o,c){this.fetchUniformLocation(t,o)&&(c[0]===this.current[0]&&c[1]===this.current[1]&&c[2]===this.current[2]&&c[3]===this.current[3]||(this.current=c,this.gl.uniform4f(this.location,c[0],c[1],c[2],c[3])))}}class a1 extends tc{constructor(t){super(t),this.current=Bi.transparent.toPremultipliedRenderColor(null)}set(t,o,c){this.fetchUniformLocation(t,o)&&(c.r===this.current.r&&c.g===this.current.g&&c.b===this.current.b&&c.a===this.current.a||(this.current=c,this.gl.uniform4f(this.location,c.r,c.g,c.b,c.a)))}}const yw=new Float32Array(16);class Wh extends tc{constructor(t){super(t),this.current=yw}set(t,o,c){if(this.fetchUniformLocation(t,o)){if(c[12]!==this.current[12]||c[0]!==this.current[0])return this.current=c,void this.gl.uniformMatrix4fv(this.location,!1,c);for(let h=1;h<16;h++)if(c[h]!==this.current[h]){this.current=c,this.gl.uniformMatrix4fv(this.location,!1,c);break}}}}const r_=new Float32Array(9),yu=new Float32Array(4);class ap extends tc{constructor(t){super(t),this.current=yu}set(t,o,c){if(this.fetchUniformLocation(t,o)){for(let h=0;h<4;h++)if(c[h]!==this.current[h]){this.current=c,this.gl.uniformMatrix2fv(this.location,!1,c);break}}}}function i_(a){return[s1(255*a.r,255*a.g),s1(255*a.b,255*a.a)]}class lp{constructor(t,o,c,h){this.value=t,this.uniformNames=o.map(_=>`u_${_}`),this.type=c,this.context=h}setUniform(t,o,c,h,_){const y=h.constantOr(this.value);o.set(t,_,y instanceof Bi?y.toPremultipliedRenderColor(this.lutExpression&&this.lutExpression.value==="none"?null:this.context.lut):y)}getBinding(t,o){return this.type==="color"?new a1(t):new no(t)}}class Kh{constructor(t,o){this.uniformNames=o.map(c=>`u_${c}`),this.pattern=null,this.patternTransition=null,this.pixelRatio=1}setConstantPatternPositions(t,o){this.pixelRatio=t.pixelRatio||1,this.pattern=t.tl.concat(t.br),this.patternTransition=o?o.tl.concat(o.br):this.pattern}setUniform(t,o,c,h,_){let y=null;_!=="u_pattern"&&_!=="u_dash"||(y=this.pattern),_==="u_pattern_b"&&(y=this.patternTransition),_==="u_pixel_ratio"&&(y=this.pixelRatio),y&&o.set(t,_,y)}getBinding(t,o){return o==="u_pattern"||o==="u_pattern_b"||o==="u_dash"?new Fm(t):new no(t)}}class nc{constructor(t,o,c,h){this.expression=t,this.type=c,this.maxValue=0,this.paintVertexAttributes=o.map(_=>({name:`a_${_}`,type:"Float32",components:c==="color"?2:1,offset:0})),this.paintVertexArray=new h}populatePaintArray(t,o,c,h,_,y,C,R){const L=this.paintVertexArray.length,V=this.expression.kind==="composite"||this.expression.kind==="source"?this.expression.evaluate(new Qi(0,{brightness:y,worldview:R}),o,{},_,h,C):this.expression.kind==="constant"&&this.expression.value,$=!!this.lutExpression&&(this.lutExpression.kind==="composite"||this.lutExpression.kind==="source"?this.lutExpression.evaluate(new Qi(0,{brightness:y,worldview:R}),o,{},_,h,C):this.lutExpression.value)==="none";this.paintVertexArray.resize(t),this._setPaintValue(L,t,V,$?null:this.context.lut)}updatePaintArray(t,o,c,h,_,y,C,R){const L=this.expression.kind==="composite"||this.expression.kind==="source"?this.expression.evaluate({zoom:0,brightness:C,worldview:R},c,h,void 0,_):this.expression.kind==="constant"&&this.expression.value,V=!!this.lutExpression&&(this.lutExpression.kind==="composite"||this.lutExpression.kind==="source"?this.lutExpression.evaluate(new Qi(0,{brightness:C,worldview:R}),c,h,void 0,_):this.lutExpression.value)==="none";this._setPaintValue(t,o,L,V?null:this.context.lut)}_setPaintValue(t,o,c,h){if(this.type==="color"){const _=i_(c.toPremultipliedRenderColor(h));for(let y=t;y<o;y++)this.paintVertexArray.emplace(y,_[0],_[1])}else{for(let _=t;_<o;_++)this.paintVertexArray.emplace(_,c);this.maxValue=Math.max(this.maxValue,Math.abs(c))}}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.lutExpression&&this.lutExpression.kind!=="constant"&&(this.lutExpression.isStateDependent||!this.lutExpression.isLightConstant)||this.expression.kind!=="constant"&&(this.expression.isStateDependent||!this.expression.isLightConstant)))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Jl{constructor(t,o,c,h,_,y){this.expression=t,this.uniformNames=o.map(C=>`u_${C}_t`),this.type=c,this.useIntegerZoom=h,this.context=_,this.maxValue=0,this.paintVertexAttributes=o.map(C=>({name:`a_${C}`,type:"Float32",components:c==="color"?4:2,offset:0})),this.paintVertexArray=new y}populatePaintArray(t,o,c,h,_,y,C,R){const L=this.expression.evaluate(new Qi(this.context.zoom,{brightness:y,worldview:R}),o,{},_,h,C),V=this.expression.evaluate(new Qi(this.context.zoom+1,{brightness:y,worldview:R}),o,{},_,h,C),$=!!this.lutExpression&&(this.lutExpression.kind==="composite"||this.lutExpression.kind==="source"?this.lutExpression.evaluate(new Qi(0,{brightness:y,worldview:R}),o,{},_,h,C):this.lutExpression.value)==="none",U=this.paintVertexArray.length;this.paintVertexArray.resize(t),this._setPaintValue(U,t,L,V,$?null:this.context.lut)}updatePaintArray(t,o,c,h,_,y,C,R){const L=this.expression.evaluate({zoom:this.context.zoom,brightness:C,worldview:R},c,h,void 0,_),V=this.expression.evaluate({zoom:this.context.zoom+1,brightness:C,worldview:R},c,h,void 0,_),$=!!this.lutExpression&&(this.lutExpression.kind==="composite"||this.lutExpression.kind==="source"?this.lutExpression.evaluate(new Qi(0,{brightness:C,worldview:R}),c,h,void 0,_):this.lutExpression.value)==="none";this._setPaintValue(t,o,L,V,$?null:this.context.lut)}_setPaintValue(t,o,c,h,_){if(this.type==="color"){const y=i_(c.toPremultipliedRenderColor(_)),C=i_(c.toPremultipliedRenderColor(_));for(let R=t;R<o;R++)this.paintVertexArray.emplace(R,y[0],y[1],C[0],C[1])}else{for(let y=t;y<o;y++)this.paintVertexArray.emplace(y,c,h);this.maxValue=Math.max(this.maxValue,Math.abs(c),Math.abs(h))}}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent||!this.expression.isLightConstant))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(t,o,c,h,_){const y=this.useIntegerZoom?Math.floor(c.zoom):c.zoom,C=tt(this.expression.interpolationFactor(y,this.context.zoom,this.context.zoom+1),0,1);o.set(t,_,C)}getBinding(t,o){return new no(t)}}class Ml{constructor(t,o,c,h,_){this.expression=t,this.layerId=_,this.paintVertexAttributes=(c==="array"?o1:Dm).members;for(let y=0;y<o.length;++y);this.paintVertexArray=new h,this.paintTransitionVertexArray=new Jf}populatePaintArray(t,o,c,h){const _=this.paintVertexArray.length;this.paintVertexArray.resize(t),this._setPaintValues(_,t,o.patterns&&o.patterns[this.layerId],c)}updatePaintArray(t,o,c,h,_,y,C){this._setPaintValues(t,o,c.patterns&&c.patterns[this.layerId],y)}_setPaintValues(t,o,c,h){if(!h||!c)return;const _=h[c[0]],y=h[c[1]];if(_){if(_){const{tl:C,br:R,pixelRatio:L}=_;for(let V=t;V<o;V++)this.paintVertexArray.emplace(V,C[0],C[1],R[0],R[1],L)}if(y){this.paintTransitionVertexArray.resize(this.paintVertexArray.length);const{tl:C,br:R}=y;for(let L=t;L<o;L++)this.paintTransitionVertexArray.emplace(L,C[0],C[1],R[0],R[1])}}}upload(t){const o=this.expression.isStateDependent||!this.expression.isLightConstant;this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,o)),this.paintTransitionVertexArray&&this.paintTransitionVertexArray.length&&(this.paintTransitionVertexBuffer=t.createVertexBuffer(this.paintTransitionVertexArray,t_.members,o))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy(),this.paintTransitionVertexBuffer&&this.paintTransitionVertexBuffer.destroy()}}class Yh{constructor(t,o,c=()=>!0){this.binders={},this._buffers=[],this.context=o;const h=[];for(const _ in t.paint._values){const y=t.paint.get(_);if(_.endsWith("-use-theme")||!c(_)||!(y instanceof Bh&&Hf(y.property.specification)))continue;const C=u(_,t.type),R=y.value,L=y.property.specification.type,V=!!y.property.useIntegerZoom,$=_==="line-dasharray"||_.endsWith("pattern"),U=t.paint.get(`${_}-use-theme`),X=_==="line-dasharray"&&t.layout.get("line-cap").value.kind!=="constant"||U&&U.value.kind!=="constant";if(R.kind!=="constant"||X)if(R.kind==="source"||X||$){const ee=S(_,L,"source");this.binders[_]=$?new Ml(R,C,L,ee,t.id):new nc(R,C,L,ee),h.push(`/a_${_}`)}else{const ee=S(_,L,"composite");this.binders[_]=new Jl(R,C,L,V,o,ee),h.push(`/z_${_}`)}else this.binders[_]=$?new Kh(R.value,C):new lp(R.value,C,L,o),h.push(`/u_${_}`);U&&(this.binders[_].lutExpression=U.value)}this.cacheKey=h.sort().join("")}getMaxValue(t){const o=this.binders[t];return o instanceof nc||o instanceof Jl?o.maxValue:0}populatePaintArrays(t,o,c,h,_,y,C,R){for(const L in this.binders){const V=this.binders[L];V.context=this.context,(V instanceof nc||V instanceof Jl||V instanceof Ml)&&V.populatePaintArray(t,o,c,h,_,y,C,R)}}setConstantPatternPositions(t,o){for(const c in this.binders){const h=this.binders[c];h instanceof Kh&&h.setConstantPatternPositions(t,o)}}getPatternTransitionVertexBuffer(t){const o=this.binders[t];return o instanceof Ml?o.paintTransitionVertexBuffer:null}updatePaintArrays(t,o,c,h,_,y,C,R,L,V){let $=!1;const U=Object.keys(t),X=U.length!==0&&!R,ee=X?U:o.uniqueIds;this.context.lut=_.lut;for(const de in this.binders){const be=this.binders[de];if(be.context=this.context,(be instanceof nc||be instanceof Jl||be instanceof Ml)&&be.expression&&be.expression.kind&&be.expression.kind!=="constant"&&(be.expression.isStateDependent===!0||be.expression.isLightConstant===!1)){const Ie=_.paint.get(de);be.expression=Ie.value;for(const Fe of ee){const Be=t[Fe.toString()];o.eachPosition(Fe,(pe,De,He)=>{const Ze=h.feature(pe);be.updatePaintArray(De,He,Ze,Be,y,C,L,V)})}if(!X)for(const Fe of c.uniqueIds){const Be=t[Fe.toString()];c.eachPosition(Fe,(pe,De,He)=>{const Ze=h.feature(pe);be.updatePaintArray(De,He,Ze,Be,y,C,L,V)})}$=!0}}return $}defines(){const t=[];for(const o in this.binders){const c=this.binders[o];(c instanceof lp||c instanceof Kh)&&t.push(...c.uniformNames.map(h=>`#define HAS_UNIFORM_${h}`))}return t}getBinderAttributes(){const t=[];for(const o in this.binders){const c=this.binders[o];if(c instanceof nc||c instanceof Jl||c instanceof Ml)for(let h=0;h<c.paintVertexAttributes.length;h++)t.push(c.paintVertexAttributes[h].name);if(c instanceof Ml)for(let h=0;h<t_.members.length;h++)t.push(t_.members[h].name)}return t}getBinderUniforms(){const t=[];for(const o in this.binders){const c=this.binders[o];if(c instanceof lp||c instanceof Kh||c instanceof Jl)for(const h of c.uniformNames)t.push(h)}return t}getPaintVertexBuffers(){return this._buffers}getUniforms(t){const o=[];for(const c in this.binders){const h=this.binders[c];if(h instanceof lp||h instanceof Kh||h instanceof Jl)for(const _ of h.uniformNames)o.push({name:_,property:c,binding:h.getBinding(t,_)})}return o}setUniforms(t,o,c,h,_){for(const{name:y,property:C,binding:R}of c)this.binders[C].setUniform(t,R,_,h.get(C),y)}updatePaintBuffers(){this._buffers=[];for(const t in this.binders){const o=this.binders[t];(o instanceof nc||o instanceof Jl||o instanceof Ml)&&o.paintVertexBuffer&&this._buffers.push(o.paintVertexBuffer),o instanceof Ml&&o.paintTransitionVertexBuffer&&this._buffers.push(o.paintTransitionVertexBuffer)}}upload(t){for(const o in this.binders){const c=this.binders[o];(c instanceof nc||c instanceof Jl||c instanceof Ml)&&c.upload(t)}this.updatePaintBuffers()}destroy(){for(const t in this.binders){const o=this.binders[t];(o instanceof nc||o instanceof Jl||o instanceof Ml)&&o.destroy()}}}class f{constructor(t,o,c=()=>!0){this.programConfigurations={};for(const h of t)this.programConfigurations[h.id]=new Yh(h,o,c);this.needsUpload=!1,this._featureMap=new ip,this._featureMapWithoutIds=new ip,this._bufferOffset=0,this._idlessCounter=0}populatePaintArrays(t,o,c,h,_,y,C,R,L){for(const V in this.programConfigurations)this.programConfigurations[V].populatePaintArrays(t,o,h,_,y,C,R,L);o.id!==void 0?this._featureMap.add(o.id,c,this._bufferOffset,t):(this._featureMapWithoutIds.add(this._idlessCounter,c,this._bufferOffset,t),this._idlessCounter+=1),this._bufferOffset=t,this.needsUpload=!0}updatePaintArrays(t,o,c,h,_,y,C,R){for(const L of c)this.needsUpload=this.programConfigurations[L.id].updatePaintArrays(t,this._featureMap,this._featureMapWithoutIds,o,L,h,_,y,C||0,R)||this.needsUpload}get(t){return this.programConfigurations[t]}upload(t){if(this.needsUpload){for(const o in this.programConfigurations)this.programConfigurations[o].upload(t);this.needsUpload=!1}}destroy(){for(const t in this.programConfigurations)this.programConfigurations[t].destroy()}}const i={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-occlusion-opacity":["occlusion_opacity"],"icon-occlusion-opacity":["occlusion_opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-emissive-strength":["emissive_strength"],"icon-emissive-strength":["emissive_strength"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"symbol-z-offset":["z_offset"],"line-gap-width":["gapwidth"],"line-pattern":["pattern","pixel_ratio","pattern_b"],"fill-pattern":["pattern","pixel_ratio","pattern_b"],"fill-extrusion-pattern":["pattern","pixel_ratio","pattern_b"],"line-dasharray":["dash"],"fill-bridge-guard-rail-color":["structure_color"],"fill-tunnel-structure-color":["structure_color"]};function u(a,t){return i[a]||[a.replace(`${t}-`,"").replace(/-/g,"_")]}const p={"line-pattern":{source:Qc,composite:Qc},"fill-pattern":{source:Qc,composite:Qc},"fill-extrusion-pattern":{source:Qc,composite:Qc},"line-dasharray":{source:Jf,composite:Jf}},x={color:{source:Kd,composite:$o},number:{source:Jc,composite:Kd}};function S(a,t,o){const c=p[a];return c&&c[o]||x[t][o]}Qn(lp,"ConstantBinder"),Qn(Kh,"PatternConstantBinder"),Qn(nc,"SourceExpressionBinder"),Qn(Ml,"PatternCompositeBinder"),Qn(Jl,"CompositeExpressionBinder"),Qn(Yh,"ProgramConfiguration",{omit:["_buffers"]}),Qn(f,"ProgramConfigurationSet");const T=Pn/Math.PI/2,O=5,B=6,j=16383,K=64,te=[K,32,16],Q=-T,oe=T;function Ce(a,t,o,c=T){return o=gi(o),[a*Math.sin(o)*c,-t*c,a*Math.cos(o)*c]}function _e(a,t,o){return Ce(Math.cos(gi(a)),Math.sin(gi(a)),t,o)}const Ee=63710088e-1,Me=2*Math.PI*Ee;class ze{constructor(t,o){if(isNaN(t)||isNaN(o))throw new Error(`Invalid LngLat object: (${t}, ${o})`);if(this.lng=+t,this.lat=+o,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new ze($t(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(t){const o=Math.PI/180,c=this.lat*o,h=t.lat*o,_=Math.sin(c)*Math.sin(h)+Math.cos(c)*Math.cos(h)*Math.cos((t.lng-this.lng)*o);return Ee*Math.acos(Math.min(_,1))}toBounds(t=0){const o=360*t/40075017,c=o/Math.cos(Math.PI/180*this.lat);return new qe({lng:this.lng-c,lat:this.lat-o},{lng:this.lng+c,lat:this.lat+o})}toEcef(t){return _e(this.lat,this.lng,T+t*T/Ee)}static convert(t){if(t instanceof ze)return t;if(Array.isArray(t)&&(t.length===2||t.length===3))return new ze(Number(t[0]),Number(t[1]));if(!Array.isArray(t)&&typeof t=="object"&&t!==null)return new ze(Number("lng"in t?t.lng:t.lon),Number(t.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}class qe{constructor(t,o){if(t)if(o)this.setSouthWest(t).setNorthEast(o);else if(t.length===4){const c=t;this.setSouthWest([c[0],c[1]]).setNorthEast([c[2],c[3]])}else{const c=t;this.setSouthWest(c[0]).setNorthEast(c[1])}}setNorthEast(t){return this._ne=t instanceof ze?new ze(t.lng,t.lat):ze.convert(t),this}setSouthWest(t){return this._sw=t instanceof ze?new ze(t.lng,t.lat):ze.convert(t),this}extend(t){const o=this._sw,c=this._ne;let h,_;if(t instanceof ze)h=t,_=t;else{if(!(t instanceof qe))return Array.isArray(t)?t.length===4||t.every(Array.isArray)?this.extend(qe.convert(t)):this.extend(ze.convert(t)):typeof t=="object"&&t!==null&&t.hasOwnProperty("lat")&&(t.hasOwnProperty("lon")||t.hasOwnProperty("lng"))?this.extend(ze.convert(t)):this;if(h=t._sw,_=t._ne,!h||!_)return this}return o||c?(o.lng=Math.min(h.lng,o.lng),o.lat=Math.min(h.lat,o.lat),c.lng=Math.max(_.lng,c.lng),c.lat=Math.max(_.lat,c.lat)):(this._sw=new ze(h.lng,h.lat),this._ne=new ze(_.lng,_.lat)),this}getCenter(){return new ze((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new ze(this.getWest(),this.getNorth())}getSouthEast(){return new ze(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(t){const{lng:o,lat:c}=ze.convert(t);let h=this._sw.lng<=o&&o<=this._ne.lng;return this._sw.lng>this._ne.lng&&(h=this._sw.lng>=o&&o>=this._ne.lng),this._sw.lat<=c&&c<=this._ne.lat&&h}static convert(t){if(t)return t instanceof qe?t:new qe(t)}}const Je=0,lt=25.5;function ot(a){return Me*Math.cos(a*Math.PI/180)}function rt(a){return(180+a)/360}function Qe(a){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+a*Math.PI/360)))/360}function ut(a,t){return a/ot(t)}function pt(a){return 360*a-180}function zt(a){return 360/Math.PI*Math.atan(Math.exp((180-360*a)*Math.PI/180))-90}function Vt(a,t){return a*ot(zt(t))}const nn=85.051129;function sn(a){return Math.cos(gi(tt(a,-85.051129,nn)))}function wn(a,t){const o=tt(t,Je,lt),c=Math.pow(2,o);return sn(a)*Me/(512*c)}function Pt(a){return 1/Math.cos(a*Math.PI/180)}function Kt(a,t=0){const o=Math.exp(Math.PI*(1-(a.y+t/Pn)/(1<<a.z)*2));return 80150034*o/(o*o+1)/Pn/(1<<a.z)}class kt{constructor(t,o,c=0){this.x=+t,this.y=+o,this.z=+c}static fromLngLat(t,o=0){const c=ze.convert(t);return new kt(rt(c.lng),Qe(c.lat),ut(o,c.lat))}toLngLat(){return new ze(pt(this.x),zt(this.y))}toAltitude(){return Vt(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/Me*Pt(zt(this.y))}}function cn(a,t,o,c,h,_,y,C,R){const L=(t+c)/2,V=(o+h)/2,$=new Rn(L,V);C($),function(U,X,ee,de,be,Ie){const Fe=ee-be,Be=de-Ie;return Math.abs((de-X)*Fe-(ee-U)*Be)/Math.hypot(Fe,Be)}($.x,$.y,_.x,_.y,y.x,y.y)>=R?(cn(a,t,o,L,V,_,$,C,R),cn(a,L,V,c,h,$,y,C,R)):a.push(y)}function qt(a,t,o){let c=a[0],h=c.x,_=c.y;t(c);const y=[c];for(let C=1;C<a.length;C++){const R=a[C],{x:L,y:V}=R;t(R),cn(y,h,_,L,V,c,R,t,o),h=L,_=V,c=R}return y}function _n(a,t,o,c){if(c(t,o)){const h=t.add(o)._mult(.5);_n(a,t,h,c),_n(a,h,o,c)}else a.push(o)}function zn(a,t){let o=a[0];const c=[o];for(let h=1;h<a.length;h++){const _=a[h];_n(c,o,_,t),o=_}return c}const un=Math.pow(2,14)-1,On=-un-1;function er(a,t){const o=Math.round(a.x*t),c=Math.round(a.y*t);return a.x=tt(o,On,un),a.y=tt(c,On,un),(o<a.x||o>a.x+1||c<a.y||c>a.y+1)&&kn("Geometry exceeds allowed extent, reduce your vector tile buffer size"),a}function tr(a,t,o){const c=a.loadGeometry(),h=a.extent,_=Pn/h;if(t&&o&&o.projection.isReprojectedInTileSpace){const y=1<<t.z,{scale:C,x:R,y:L,projection:V}=o,$=U=>{const X=pt((t.x+U.x/h)/y),ee=zt((t.y+U.y/h)/y),de=V.project(X,ee);U.x=(de.x*C-R)*h,U.y=(de.y*C-L)*h};for(let U=0;U<c.length;U++)if(a.type!==1)c[U]=qt(c[U],$,1);else{const X=[];for(const ee of c[U])ee.x<0||ee.x>=h||ee.y<0||ee.y>=h||($(ee),X.push(ee));c[U]=X}}for(const y of c)for(const C of y)er(C,_);return c}function Zn(a,t){return{type:a.type,id:a.id,properties:a.properties,geometry:t?tr(a):[]}}var mr,yr,kr,Hr,ti,ji,ps,Yi={};function Xi(){if(yr)return mr;yr=1;var a=ks();function t(h,_,y,C,R){this.properties={},this.extent=y,this.type=0,this._pbf=h,this._geometry=-1,this._keys=C,this._values=R,h.readFields(o,this,_)}function o(h,_,y){h==1?_.id=y.readVarint():h==2?function(C,R){for(var L=C.readVarint()+C.pos;C.pos<L;){var V=R._keys[C.readVarint()],$=R._values[C.readVarint()];R.properties[V]=$}}(y,_):h==3?_.type=y.readVarint():h==4&&(_._geometry=y.pos)}function c(h){for(var _,y,C=0,R=0,L=h.length,V=L-1;R<L;V=R++)C+=((y=h[V]).x-(_=h[R]).x)*(_.y+y.y);return C}return mr=t,t.types=["Unknown","Point","LineString","Polygon"],t.prototype.loadGeometry=function(){var h=this._pbf;h.pos=this._geometry;for(var _,y=h.readVarint()+h.pos,C=1,R=0,L=0,V=0,$=[];h.pos<y;){if(R<=0){var U=h.readVarint();C=7&U,R=U>>3}if(R--,C===1||C===2)L+=h.readSVarint(),V+=h.readSVarint(),C===1&&(_&&$.push(_),_=[]),_.push(new a(L,V));else{if(C!==7)throw new Error("unknown command "+C);_&&_.push(_[0].clone())}}return _&&$.push(_),$},t.prototype.bbox=function(){var h=this._pbf;h.pos=this._geometry;for(var _=h.readVarint()+h.pos,y=1,C=0,R=0,L=0,V=1/0,$=-1/0,U=1/0,X=-1/0;h.pos<_;){if(C<=0){var ee=h.readVarint();y=7&ee,C=ee>>3}if(C--,y===1||y===2)(R+=h.readSVarint())<V&&(V=R),R>$&&($=R),(L+=h.readSVarint())<U&&(U=L),L>X&&(X=L);else if(y!==7)throw new Error("unknown command "+y)}return[V,U,$,X]},t.prototype.toGeoJSON=function(h,_,y){var C,R,L=this.extent*Math.pow(2,y),V=this.extent*h,$=this.extent*_,U=this.loadGeometry(),X=t.types[this.type];function ee(Ie){for(var Fe=0;Fe<Ie.length;Fe++){var Be=Ie[Fe];Ie[Fe]=[360*(Be.x+V)/L-180,360/Math.PI*Math.atan(Math.exp((180-360*(Be.y+$)/L)*Math.PI/180))-90]}}switch(this.type){case 1:var de=[];for(C=0;C<U.length;C++)de[C]=U[C][0];ee(U=de);break;case 2:for(C=0;C<U.length;C++)ee(U[C]);break;case 3:for(U=function(Ie){var Fe=Ie.length;if(Fe<=1)return[Ie];for(var Be,pe,De=[],He=0;He<Fe;He++){var Ze=c(Ie[He]);Ze!==0&&(pe===void 0&&(pe=Ze<0),pe===Ze<0?(Be&&De.push(Be),Be=[Ie[He]]):Be.push(Ie[He]))}return Be&&De.push(Be),De}(U),C=0;C<U.length;C++)for(R=0;R<U[C].length;R++)ee(U[C][R])}U.length===1?U=U[0]:X="Multi"+X;var be={type:"Feature",geometry:{type:X,coordinates:U},properties:this.properties};return"id"in this&&(be.id=this.id),be},mr}function Ws(){if(Hr)return kr;Hr=1;var a=Xi();function t(c,h){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=c,this._keys=[],this._values=[],this._features=[],c.readFields(o,this,h),this.length=this._features.length}function o(c,h,_){c===15?h.version=_.readVarint():c===1?h.name=_.readString():c===5?h.extent=_.readVarint():c===2?h._features.push(_.pos):c===3?h._keys.push(_.readString()):c===4&&h._values.push(function(y){for(var C=null,R=y.readVarint()+y.pos;y.pos<R;){var L=y.readVarint()>>3;C=L===1?y.readString():L===2?y.readFloat():L===3?y.readDouble():L===4?y.readVarint64():L===5?y.readVarint():L===6?y.readSVarint():L===7?y.readBoolean():null}return C}(_))}return kr=t,t.prototype.feature=function(c){if(c<0||c>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[c];var h=this._pbf.readVarint()+this._pbf.pos;return new a(this._pbf,h,this.extent,this._keys,this._values)},kr}function Kr(){return ps||(ps=1,Yi.VectorTile=function(){if(ji)return ti;ji=1;var a=Ws();function t(o,c,h){if(o===3){var _=new a(h,h.readVarint()+h.pos);_.length&&(c[_.name]=_)}}return ti=function(o,c){this.layers=o.readFields(t,{},c)},ti}(),Yi.VectorTileFeature=Xi(),Yi.VectorTileLayer=Ws()),Yi}var ii=Kr();const bi="3d_elevation_id",xs="level";class lo{constructor(){this._valid=!1}reset(t){return this.feature=t,this._valid=!0,this._geometry=t.loadGeometry(),this._geometry.length!==0&&this._geometry[0].length!==0||(this._valid=!1),this}geometry(t,o){return this._valid&&t(o(this._geometry)),this}require(t,o,c){return this.get(t,!0,o,c)}optional(t,o,c){return this.get(t,!1,o,c)}success(){return this._valid}get(t,o,c,h){const _=this.feature.properties.hasOwnProperty(t)?+this.feature.properties[t]:void 0;return this._valid&&_!==void 0&&!Number.isNaN(_)?c(h?h(_):_):o&&(this._valid=!1),this}}class ms{constructor(t,o){this.featureFunc=t,this.vertexFunc=o}parseFeature(t,o,c){return this.featureFunc(t,o,c)}parseVertex(t,o,c){return this.vertexFunc(t,o,c)}}const Vi=new ms((a,t,o)=>a.reset(t).require(bi,c=>{o.id=c}).optional("fixed_height_relative",c=>{o.constantHeight=c},Mi.decodeRelativeHeight).geometry(c=>{o.bounds=c},ya).success(),(a,t,o)=>a.reset(t).require(bi,c=>{o.id=c}).require("elevation_idx",c=>{o.idx=c}).require("extent",c=>{o.extent=c}).require("height_relative",c=>{o.height=c},Mi.decodeRelativeHeight).geometry(c=>{o.position=c},Mi.getPoint).success()),$s=new ms((a,t,o)=>a.reset(t).require(bi,c=>{o.id=c}).optional("fixed_height",c=>{o.constantHeight=c},Mi.decodeMetricHeight).geometry(c=>{o.bounds=c},ya).success(),(a,t,o)=>a.reset(t).require(bi,c=>{o.id=c}).require("elevation_idx",c=>{o.idx=c}).require("extent",c=>{o.extent=c}).require("height",c=>{o.height=c},Mi.decodeMetricHeight).geometry(c=>{o.position=c},Mi.getPoint).success());class Mi{static getPoint(t){return pr(t[0][0].x,t[0][0].y)}static decodeRelativeHeight(t){return 1e-4*t*5}static decodeMetricHeight(t){return 1e-4*t}static parse(t){const o=[],c=[],h=t.length,_=new lo;for(let C=0;C<h;C++){const R=t.feature(C),L=R.properties.hasOwnProperty("version")?String(R.properties.version):void 0,V=(y=L)?y==="1.0.1"?$s:void 0:Vi;if(V===void 0){kn(`Unknown elevation feature version number ${L||"(unknown)"}`);continue}const $=R.properties.hasOwnProperty("type")?R.properties.type:void 0;if($){if(ii.VectorTileFeature.types[R.type]==="Point"&&$==="curve_point"){const U={};V.parseVertex(_,R,U)&&o.push(U)}else if(ii.VectorTileFeature.types[R.type]==="Polygon"&&$==="curve_meta"){const U={};V.parseFeature(_,R,U)&&c.push(U)}}}var y;return{vertices:o,features:c}}}class ro{constructor(t,o){this.pos=t,this.dir=o}intersectsPlane(t,o,c){const h=Xn(o,this.dir);if(Math.abs(h)<1e-6)return!1;const _=((t[0]-this.pos[0])*o[0]+(t[1]-this.pos[1])*o[1])/h;return c[0]=this.pos[0]+this.dir[0]*_,c[1]=this.pos[1]+this.dir[1]*_,!0}}class ws{constructor(t,o){this.pos=t,this.dir=o}intersectsPlane(t,o,c){const h=Ct(o,this.dir);if(Math.abs(h)<1e-6)return!1;const _=((t[0]-this.pos[0])*o[0]+(t[1]-this.pos[1])*o[1]+(t[2]-this.pos[2])*o[2])/h;return c[0]=this.pos[0]+this.dir[0]*_,c[1]=this.pos[1]+this.dir[1]*_,c[2]=this.pos[2]+this.dir[2]*_,!0}closestPointOnSphere(t,o,c){if(function(X,ee){var de=X[0],be=X[1],Ie=X[2],Fe=ee[0],Be=ee[1],pe=ee[2];return Math.abs(de-Fe)<=E*Math.max(1,Math.abs(de),Math.abs(Fe))&&Math.abs(be-Be)<=E*Math.max(1,Math.abs(be),Math.abs(Be))&&Math.abs(Ie-pe)<=E*Math.max(1,Math.abs(Ie),Math.abs(pe))}(this.pos,t)||o===0)return c[0]=c[1]=c[2]=0,!1;const[h,_,y]=this.dir,C=this.pos[0]-t[0],R=this.pos[1]-t[1],L=this.pos[2]-t[2],V=h*h+_*_+y*y,$=2*(C*h+R*_+L*y),U=$*$-4*V*(C*C+R*R+L*L-o*o);if(U<0){const X=Math.max(-$/2,0),ee=C+h*X,de=R+_*X,be=L+y*X,Ie=Math.hypot(ee,de,be);return c[0]=ee*o/Ie,c[1]=de*o/Ie,c[2]=be*o/Ie,!1}{const X=(-$-Math.sqrt(U))/(2*V);if(X<0){const ee=Math.hypot(C,R,L);return c[0]=C*o/ee,c[1]=R*o/ee,c[2]=L*o/ee,!1}return c[0]=C+h*X,c[1]=R+_*X,c[2]=L+y*X,!0}}}class as{constructor(t,o,c,h,_){this.TL=t,this.TR=o,this.BR=c,this.BL=h,this.horizon=_}static fromInvProjectionMatrix(t,o,c){const h=[-1,1,1],_=[1,1,1],y=[1,-1,1],C=[-1,-1,1],R=Lt(h,h,t),L=Lt(_,_,t),V=Lt(y,y,t),$=Lt(C,C,t);return new as(R,L,V,$,o/c)}}function Ss(a,t,o){let c=1/0,h=-1/0;const _=[];for(const y of a){nt(_,y,t);const C=Ct(_,o);c=Math.min(c,C),h=Math.max(h,C)}return[c,h]}function Hi(a,t){let o=!0;for(let c=0;c<a.planes.length;c++){const h=a.planes[c];let _=0;for(let y=0;y<t.length;y++)_+=Ct(h,t[y])+h[3]>=0;if(_===0)return 0;_!==t.length&&(o=!1)}return o?2:1}function js(a,t){for(const o of a.projections){const c=Ss(t,a.points[0],o.axis);if(o.projection[1]<c[0]||o.projection[0]>c[1])return 0}return 1}function Uo(a,t){let o=0;const c=[0,0,0,0];for(let y=0;y<a.length;y++)c[0]=a[y][0],c[1]=a[y][1],c[2]=a[y][2],c[3]=1,(h=c)[0]*(_=t)[0]+h[1]*_[1]+h[2]*_[2]+h[3]*_[3]>=0&&o++;var h,_;return o}class As{constructor(t,o){this.points=t||new Array(8).fill([0,0,0]),this.planes=o||new Array(6).fill([0,0,0,0]),this.bounds=Fi.fromPoints(this.points),this.projections=[],this.frustumEdges=[nt([],this.points[2],this.points[3]),nt([],this.points[0],this.points[3]),nt([],this.points[4],this.points[0]),nt([],this.points[5],this.points[1]),nt([],this.points[6],this.points[2]),nt([],this.points[7],this.points[3])];for(const c of this.frustumEdges){const h=[0,-c[2],c[1]],_=[c[2],0,-c[0]];this.projections.push({axis:h,projection:Ss(this.points,this.points[0],h)}),this.projections.push({axis:_,projection:Ss(this.points,this.points[0],_)})}}static fromInvProjectionMatrix(t,o,c,h){const _=Math.pow(2,c),y=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(L=>{const V=bt([],L,t),$=1/V[3]/o*_;return(U=V)[0]=(X=V)[0]*(ee=[$,$,h?1/V[3]:$,$])[0],U[1]=X[1]*ee[1],U[2]=X[2]*ee[2],U[3]=X[3]*ee[3],U;var U,X,ee}),C=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(L=>{const V=Mt([],gt([],nt([],y[L[0]],y[L[1]]),nt([],y[L[2]],y[L[1]]))),$=-Ct(V,y[L[1]]);return V.concat($)}),R=[];for(let L=0;L<y.length;L++)R.push([y[L][0],y[L][1],y[L][2]]);return new As(R,C)}intersectsPrecise(t,o,c){for(let h=0;h<o.length;h++)if(!Uo(t,o[h]))return 0;for(let h=0;h<this.planes.length;h++)if(!Uo(t,this.planes[h]))return 0;for(const h of c)for(const _ of this.frustumEdges){const y=gt([],h,_),C=Ue(y);if(C===0)continue;Ve(y,y,1/C);const R=Ss(this.points,this.points[0],y),L=Ss(t,this.points[0],y);if(R[0]>L[1]||L[0]>R[1])return 0}return 1}containsPoint(t){for(const o of this.planes){const c=o[3];if(Ct([o[0],o[1],o[2]],t)+c<0)return!1}return!0}}class Fi{static fromPoints(t){const o=[1/0,1/0,1/0],c=[-1/0,-1/0,-1/0];for(const h of t)Te(o,o,h),Ae(c,c,h);return new Fi(o,c)}static fromTileIdAndHeight(t,o,c){const h=1<<t.canonical.z,_=t.canonical.x,y=t.canonical.y;return new Fi([_/h,y/h,o],[(_+1)/h,(y+1)/h,c])}static applyTransform(t,o){const c=t.getCorners();for(let h=0;h<c.length;++h)Lt(c[h],c[h],o);return Fi.fromPoints(c)}static applyTransformFast(t,o){const c=[o[12],o[13],o[14]],h=[...c];for(let _=0;_<3;_++)for(let y=0;y<3;y++){const C=o[4*y+_],R=C*t.min[y],L=C*t.max[y];c[_]+=Math.min(R,L),h[_]+=Math.max(R,L)}return new Fi(c,h)}static projectAabbCorners(t,o){const c=t.getCorners();for(let h=0;h<c.length;++h)Lt(c[h],c[h],o);return c}constructor(t,o){this.min=t,this.max=o,this.center=Ve([],Pe([],this.min,this.max),.5)}quadrant(t){const o=[t%2==0,t<2],c=ye(this.min),h=ye(this.max);for(let _=0;_<o.length;_++)c[_]=o[_]?this.min[_]:this.center[_],h[_]=o[_]?this.center[_]:this.max[_];return h[2]=this.max[2],new Fi(c,h)}distanceX(t){return Math.max(Math.min(this.max[0],t[0]),this.min[0])-t[0]}distanceY(t){return Math.max(Math.min(this.max[1],t[1]),this.min[1])-t[1]}distanceZ(t){return Math.max(Math.min(this.max[2],t[2]),this.min[2])-t[2]}getCorners(){const t=this.min,o=this.max;return[[t[0],t[1],t[2]],[o[0],t[1],t[2]],[o[0],o[1],t[2]],[t[0],o[1],t[2]],[t[0],t[1],o[2]],[o[0],t[1],o[2]],[o[0],o[1],o[2]],[t[0],o[1],o[2]]]}intersects(t){return this.intersectsAabb(t.bounds)?Hi(t,this.getCorners()):0}intersectsFlat(t){return this.intersectsAabb(t.bounds)?Hi(t,[[this.min[0],this.min[1],0],[this.max[0],this.min[1],0],[this.max[0],this.max[1],0],[this.min[0],this.max[1],0]]):0}intersectsPrecise(t,o){return o||this.intersects(t)?js(t,this.getCorners()):0}intersectsPreciseFlat(t,o){return o||this.intersectsFlat(t)?js(t,[[this.min[0],this.min[1],0],[this.max[0],this.min[1],0],[this.max[0],this.max[1],0],[this.min[0],this.max[1],0]]):0}intersectsAabb(t){for(let o=0;o<3;++o)if(this.min[o]>t.max[o]||t.min[o]>this.max[o])return!1;return!0}intersectsAabbXY(t){return!(this.min[0]>t.max[0]||t.min[0]>this.max[0]||this.min[1]>t.max[1]||t.min[1]>this.max[1])}encapsulate(t){for(let o=0;o<3;o++)this.min[o]=Math.min(this.min[o],t.min[o]),this.max[o]=Math.max(this.max[o],t.max[o])}encapsulatePoint(t){for(let o=0;o<3;o++)this.min[o]=Math.min(this.min[o],t[o]),this.max[o]=Math.max(this.max[o],t[o])}closestPoint(t){return[Math.max(Math.min(this.max[0],t[0]),this.min[0]),Math.max(Math.min(this.max[1],t[1]),this.min[1]),Math.max(Math.min(this.max[2],t[2]),this.min[2])]}}Qn(Fi,"Aabb");class Ya{constructor(t,o){this.feature=t,this.metersToTile=o,this.index=0}get(){const t=this.feature.vertices[this.index],o=this.feature.vertexProps[this.index].dir,c=o[1],h=-o[0],_=(t.extent+1)*this.metersToTile;return[new Rn(Math.trunc(t.position[0]+c*_),Math.trunc(t.position[1]+h*_)),new Rn(Math.trunc(t.position[0]-c*_),Math.trunc(t.position[1]-h*_))]}next(){this.index++}valid(){return this.index<this.feature.vertices.length}}class Ra{constructor(t,o,c,h,_,y){if(this.vertices=new Array,this.vertexProps=new Array,this.edges=new Array,this.edgeProps=new Array,this.id=t,this.heightRange={min:c,max:c},this.safeArea=o,this.constantHeight=c,this.constantHeight==null&&(this.constantHeight!=null||h.length!==0)){this.vertices=h,this.edges=_,this.edges=this.edges.filter(C=>{return C.a<this.vertices.length&&C.b<this.vertices.length&&!((R=this.vertices[C.a].position)[0]===(L=this.vertices[C.b].position)[0]&&R[1]===L[1]);var R,L}),this.heightRange={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};for(const C of this.vertices)this.vertexProps.push({dir:pr(0,0)}),this.heightRange.min=Math.min(this.heightRange.min,C.height),this.heightRange.max=Math.max(this.heightRange.max,C.height);for(const C of this.edges){const R=this.vertices[C.a].position,L=this.vertices[C.b].position,V=vt(Tr(),L,R),$=it(V),U=yt(Tr(),V,1/$);this.edgeProps.push({vec:V,dir:U,len:$});const X=this.vertexProps[C.a].dir,ee=this.vertexProps[C.b].dir;Fr(X,X,U),Fr(ee,ee,U)}for(const C of this.vertexProps)C.dir[0]===0&&C.dir[1]===0||ln(C.dir,C.dir);this.tessellate(y)}}pointElevation(t){if(this.constantHeight!=null)return this.constantHeight;const o=this.getClosestEdge(t);if(o==null)return 0;const[c,h]=o;return Dr(this.vertices[this.edges[c].a].height,this.vertices[this.edges[c].b].height,h)}computeSlopeNormal(t,o){const c=this.getClosestEdge(t);if(!c)return Ne(0,0,1);const h=c[0],_=this.edges[h],y=this.edgeProps[h].vec,C=Ne(y[0],y[1],(this.vertices[_.b].height-this.vertices[_.a].height)*o),R=Ne(C[1],-C[0],0);gt(R,R,C);const L=Ue(R);return L>0?Ve(R,R,1/L):Ne(0,0,1)}getSafeArea(){return this.safeArea}isTunnel(){return this.heightRange.max<=-5}getClosestEdge(t){if(this.edges.length===0)return;let o=0,c=Number.POSITIVE_INFINITY,h=0;const _=pr(t.x,t.y);for(let y=0;y<this.edges.length;y++){const C=this.edges[y],R=this.edgeProps[y].dir,L=new ro(_,this.edgeProps[y].dir),V=this.vertices[C.a].position,$=this.vertices[C.b].position,U=Tr(),X=Tr(),ee=L.intersectsPlane(V,this.vertexProps[C.a].dir,U),de=L.intersectsPlane($,this.vertexProps[C.b].dir,X);if(!ee||!de)continue;const be=vt(Tr(),X,U),Ie=vt(Tr(),_,U),Fe=Xn(be,be),Be=Fe>0?Xn(Ie,be)/Fe:0,pe=tt(Be,0,1),De=Math.abs((Be-pe)*this.edgeProps[y].len),He=vt(Tr(),_,V),Ze=De+Math.abs(Xn(He,pr(R[1],-R[0])));Ze<c&&(o=y,c=Ze,h=pe)}return[o,h]}tessellate(t){for(let o=this.edges.length-1;o>=0;--o){const c=this.edges[o].a,h=this.edges[o].b,{position:_,height:y,extent:C}=this.vertices[c],{position:R,height:L,extent:V}=this.vertices[h],$=this.vertexProps[c].dir,U=this.vertexProps[h].dir,X=Ne(_[0]/t,_[1]/t,y),ee=Ne(R[0]/t,R[1]/t,L),de=Ne($[1],-$[0],0);Ve(de,de,C);const be=Ne(U[1],-U[0],0);if(Ve(be,be,V),this.distSqLines(Ne(X[0]+.5*de[0],X[1]+.5*de[1],X[2]+.5*de[2]),Ne(ee[0]-.5*be[0],ee[1]-.5*be[1],ee[2]-.5*be[2]),Ne(X[0]-.5*de[0],X[1]-.5*de[1],X[2]-.5*de[2]),Ne(ee[0]+.5*be[0],ee[1]+.5*be[1],ee[2]+.5*be[2]))<=.0025000000000000005)continue;const Ie=this.vertices.length,Fe=Fr(Tr(),_,R);this.vertices.push({position:yt(Fe,Fe,.5),height:.5*(y+L),extent:.5*(C+V)});const Be=Fr(Tr(),$,U);this.vertexProps.push({dir:ln(Be,Be)}),this.edges.splice(o,1),this.edgeProps.splice(o,1),this.edges.push({a:c,b:Ie}),this.edges.push({a:Ie,b:h});const pe=vt(Tr(),this.vertices[Ie].position,_),De=it(pe),He={vec:pe,dir:yt(Tr(),pe,1/De),len:De};this.edgeProps.push(He),this.edgeProps.push(He)}}distSqLines(t,o,c,h){const _=ve(we(),o,t),y=ve(we(),h,c),C=ve(we(),t,c),R=Ct(_,_),L=Ct(_,y),V=Ct(_,C),$=Ct(y,y),U=Ct(y,C),X=R*$-L*L;if(X===0){const be=Ct(C,y)/Ct(y,y);return ft(Ke(we(),c,h,be),t)}const ee=(L*U-V*$)/X,de=(R*U-L*V)/X;return ft(Ke(we(),t,o,ee),Ke(we(),c,h,de))}}class hl{static parseFrom(t,o){const c=Mi.parse(t);if(!c)return[];let{vertices:h,features:_}=c;const y=1/Kt(o);_.sort((V,$)=>V.id-$.id),h.sort((V,$)=>V.id-$.id||V.idx-$.idx),h=h.filter((V,$,U)=>$===U.findIndex(X=>X.id===V.id&&X.idx===V.idx));const C=new Array;let R=0;const L=h.length;for(const V of _){if(V.constantHeight){C.push(new Ra(V.id,V.bounds,V.constantHeight));continue}for(;R!==L&&h[R].id<V.id;)R++;if(R===L||h[R].id!==V.id)continue;const $=new Array,U=new Array,X=R;for(;R!==L&&h[R].id===V.id;){const ee=h[R];if($.push({position:ee.position,height:ee.height,extent:ee.extent}),R!==X&&h[R-1].idx===ee.idx-1){const de=R-X;U.push({a:de-1,b:de})}R++}C.push(new Ra(V.id,V.bounds,void 0,$,U,y))}return C}static getElevationFeature(t,o){if(!o)return;const c=+t.properties[bi];return Number.isNaN(c)?void 0:o.find(h=>h.id===c)}}class Ql{constructor(t,o){this.zScale=1,this.xOffset=0,this.yOffset=0,t.equals(o)||(this.zScale=Math.pow(2,o.z-t.z),this.xOffset=(t.x*this.zScale-o.x)*Pn,this.yOffset=(t.y*this.zScale-o.y)*Pn)}constantElevation(t,o){if(t.constantHeight!=null)return this.computeBiasedHeight(t.constantHeight,o)}pointElevation(t,o,c){const h=this.constantElevation(o,c);return h??(t.x=t.x*this.zScale+this.xOffset,t.y=t.y*this.zScale+this.yOffset,this.computeBiasedHeight(o.pointElevation(t),c))}computeBiasedHeight(t,o){return o<=0?t:t+o*Tt(0,o,t>=0?t:Math.abs(.5*t))}}Qn(Ra,"ElevationFeature");class Al{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(o=>o.fqid),this.index=t.index,this.hasPattern=!1,this.projection=t.projection,this.layoutVertexArray=new ec,this.indexArray=new Ho,this.segments=new Us,this.programConfigurations=new f(t.layers,{zoom:t.zoom,lut:t.lut}),this.stateDependentLayerIds=this.layers.filter(o=>o.isStateDependent()).map(o=>o.id),this.elevationMode=this.layers[0].layout.get("circle-elevation-reference"),this.hasElevation=!1,this.elevationMode!=="none"&&(this.elevatedLayoutVertexArray=new Jc),this.worldview=t.worldview}updateFootprints(t,o){}populate(t,o,c,h){const _=this.layers[0],y=[];let C=null;_.type==="circle"&&(C=_.layout.get("circle-sort-key"));for(const{feature:L,id:V,index:$,sourceLayerIndex:U}of t){const X=this.layers[0]._featureFilter.needGeometry,ee=Zn(L,X);if(!this.layers[0]._featureFilter.filter(new Qi(this.zoom,{worldview:this.worldview}),ee,c))continue;const de=C?C.evaluate(ee,{},c):void 0,be={id:V,properties:L.properties,type:L.type,sourceLayerIndex:U,index:$,geometry:X?ee.geometry:tr(L,c,h),patterns:{},sortKey:de};y.push(be)}C&&y.sort((L,V)=>L.sortKey-V.sortKey);let R=null;h.projection.name==="globe"&&(this.globeExtVertexArray=new Mm,R=h.projection);for(const L of y){const{geometry:V,index:$,sourceLayerIndex:U}=L,X=t[$].feature;this.addFeature(L,V,$,o.availableImages,c,R,o.brightness,o.elevationFeatures),o.featureIndex.insert(X,V,$,U,this.index)}this.hasElevation||(this.elevatedLayoutVertexArray=void 0)}update(t,o,c,h,_,y,C){this.programConfigurations.updatePaintArrays(t,o,_,c,h,y,C,this.worldview)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,_w.members),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.globeExtVertexArray&&(this.globeExtVertexBuffer=t.createVertexBuffer(this.globeExtVertexArray,Om.members)),this.elevatedLayoutVertexArray&&(this.elevatedLayoutVertexBuffer=t.createVertexBuffer(this.elevatedLayoutVertexArray,vw.members))),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy(),this.elevatedLayoutVertexBuffer&&this.elevatedLayoutVertexBuffer.destroy())}addFeature(t,o,c,h,_,y,C,R){let L;this.elevationMode!=="none"&&(L=hl.getElevationFeature(t,R));for(const V of o)for(const $ of V){const U=$.x,X=$.y;if(U<0||U>=Pn||X<0||X>=Pn)continue;if(y){const be=y.projectTilePoint(U,X,_),Ie=y.upVector(_,U,X);this.addGlobeExtVertex(be,Ie),this.addGlobeExtVertex(be,Ie),this.addGlobeExtVertex(be,Ie),this.addGlobeExtVertex(be,Ie)}const ee=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,t.sortKey),de=ee.vertexLength;if(this.addCircleVertex(U,X,-1,-1),this.addCircleVertex(U,X,1,-1),this.addCircleVertex(U,X,1,1),this.addCircleVertex(U,X,-1,1),this.elevationMode!=="none"){const be=L?L.pointElevation(new Rn(U,X)):0;this.hasElevation=this.hasElevation||be!==0;for(let Ie=0;Ie<4;Ie++)this.elevatedLayoutVertexArray.emplaceBack(be)}this.indexArray.emplaceBack(de,de+1,de+2),this.indexArray.emplaceBack(de,de+2,de+3),ee.vertexLength+=4,ee.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,c,{},h,_,C,void 0,this.worldview)}addCircleVertex(t,o,c,h){this.layoutVertexArray.emplaceBack(2*t+(c+1)/2,2*o+(h+1)/2)}addGlobeExtVertex(t,o){this.globeExtVertexArray.emplaceBack(t.x,t.y,t.z,o[0]*16384,o[1]*16384,o[2]*16384)}}function Pa(a,t){for(let o=0;o<a.length;o++)if(bu(t,a[o]))return!0;for(let o=0;o<t.length;o++)if(bu(a,t[o]))return!0;return!!up(a,t)}function nd(a,t,o){return!!bu(a,t)||!!cp(t,a,o)}function eu(a,t){if(a.length===1)return Vm(t,a[0]);for(let o=0;o<t.length;o++){const c=t[o];for(let h=0;h<c.length;h++)if(bu(a,c[h]))return!0}for(let o=0;o<a.length;o++)if(Vm(t,a[o]))return!0;for(let o=0;o<t.length;o++)if(up(a,t[o]))return!0;return!1}function rd(a,t,o){if(a.length>1){if(up(a,t))return!0;for(let c=0;c<t.length;c++)if(cp(t[c],a,o))return!0}for(let c=0;c<a.length;c++)if(cp(a[c],t,o))return!0;return!1}function up(a,t){if(a.length===0||t.length===0)return!1;for(let o=0;o<a.length-1;o++){const c=a[o],h=a[o+1];for(let _=0;_<t.length-1;_++)if(s_(c,h,t[_],t[_+1]))return!0}return!1}function s_(a,t,o,c){return br(a,o,c)!==br(t,o,c)&&br(a,t,o)!==br(a,t,c)}function Zh(a,t,o){return(a.x-o.x)*(t.y-o.y)-(a.y-o.y)*(t.x-o.x)}function o_(a,t,o,c){const h=Zh(a,t,c),_=Zh(a,t,o);if(Math.sign(h)===Math.sign(_))return;const y=Zh(o,c,a),C=y+_-h;return Math.sign(y)!==Math.sign(C)?[y/(y-C),_/(_-h)]:void 0}function cp(a,t,o){const c=o*o;if(t.length===1)return a.distSqr(t[0])<c;for(let h=1;h<t.length;h++)if(Bm(a,t[h-1],t[h])<c)return!0;return!1}function Bm(a,t,o){const c=t.distSqr(o);if(c===0)return a.distSqr(t);const h=((a.x-t.x)*(o.x-t.x)+(a.y-t.y)*(o.y-t.y))/c;return a.distSqr(h<0?t:h>1?o:o.sub(t)._mult(h)._add(t))}function Vm(a,t){let o,c,h,_=!1;for(let y=0;y<a.length;y++){o=a[y];for(let C=0,R=o.length-1;C<o.length;R=C++)c=o[C],h=o[R],c.y>t.y!=h.y>t.y&&t.x<(h.x-c.x)*(t.y-c.y)/(h.y-c.y)+c.x&&(_=!_)}return _}function bu(a,t){let o=!1;for(let c=0,h=a.length-1;c<a.length;h=c++){const _=a[c],y=a[h];_.y>t.y!=y.y>t.y&&t.x<(y.x-_.x)*(t.y-_.y)/(y.y-_.y)+_.x&&(o=!o)}return o}function Xh(a,t,o,c,h){for(const y of a)if(t<=y.x&&o<=y.y&&c>=y.x&&h>=y.y)return!0;const _=[new Rn(t,o),new Rn(t,h),new Rn(c,h),new Rn(c,o)];if(a.length>2){for(const y of _)if(bu(a,y))return!0}for(let y=0;y<a.length-1;y++)if(Yd(a[y],a[y+1],_))return!0;return!1}function Yd(a,t,o){const c=o[0],h=o[2];if(a.x<c.x&&t.x<c.x||a.x>h.x&&t.x>h.x||a.y<c.y&&t.y<c.y||a.y>h.y&&t.y>h.y)return!1;const _=br(a,t,o[0]);return _!==br(a,t,o[1])||_!==br(a,t,o[2])||_!==br(a,t,o[3])}function id(a,t,o,c,h,_){let y=t.y-a.y,C=a.x-t.x;if(_=_||0){const R=y*y+C*C;if(R===0)return!0;const L=Math.sqrt(R);y/=L,C/=L}return!((o.x-a.x)*y+(o.y-a.y)*C-_<0||(c.x-a.x)*y+(c.y-a.y)*C-_<0||(h.x-a.x)*y+(h.y-a.y)*C-_<0)}function bw(a,t,o,c,h,_,y){return!(id(a,t,c,h,_,y)||id(t,o,c,h,_,y)||id(o,a,c,h,_,y)||id(c,h,a,t,o,y)||id(h,_,a,t,o,y)||id(_,c,a,t,o,y))}function $m(a,t,o){const c=t.paint.get(a).value;return c.kind==="constant"?c.value:o.programConfigurations.get(t.id).getMaxValue(a)}function l1(a){return Math.sqrt(a[0]*a[0]+a[1]*a[1])}function cC(a,t,o,c,h){if(!t[0]&&!t[1])return a;const _=Rn.convert(t)._mult(h);o==="viewport"&&_._rotate(-c);const y=[];for(let C=0;C<a.length;C++)y.push(a[C].sub(_));return y}function dC(a,t,o,c){const h=Rn.convert(a)._mult(c);return t==="viewport"&&h._rotate(-o),h}let hC,fC;function pC(a,t,o){var c=2*Math.PI*6378137/256/Math.pow(2,o);return[a*c-2*Math.PI*6378137/2,t*c-2*Math.PI*6378137/2]}Qn(Al,"CircleBucket",{omit:["layers"]});class dp{constructor(t,o,c){this.z=t,this.x=o,this.y=c,this.key=Hm(0,t,t,o,c)}equals(t){return this.z===t.z&&this.x===t.x&&this.y===t.y}url(t,o){const c=function(_,y,C){var R=pC(256*_,256*(y=Math.pow(2,C)-y-1),C),L=pC(256*(_+1),256*(y+1),C);return R[0]+","+R[1]+","+L[0]+","+L[1]}(this.x,this.y,this.z),h=function(_,y,C){let R,L="";for(let V=_;V>0;V--)R=1<<V-1,L+=(y&R?1:0)+(C&R?2:0);return L}(this.z,this.x,this.y);return t[(this.x+this.y)%t.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(o==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",h).replace("{bbox-epsg-3857}",c)}toString(){return`${this.z}/${this.x}/${this.y}`}}class mC{constructor(t,o){this.wrap=t,this.canonical=o,this.key=Hm(t,o.z,o.z,o.x,o.y)}}class xa{constructor(t,o,c,h,_){this.overscaledZ=t,this.wrap=o,this.canonical=new dp(c,+h,+_),this.key=o===0&&t===c?this.canonical.key:Hm(o,t,c,h,_)}equals(t){return this.overscaledZ===t.overscaledZ&&this.wrap===t.wrap&&this.canonical.equals(t.canonical)}scaledTo(t){const o=this.canonical.z-t;return t>this.canonical.z?new xa(t,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new xa(t,this.wrap,t,this.canonical.x>>o,this.canonical.y>>o)}calculateScaledKey(t,o=!0){if(this.overscaledZ===t&&o)return this.key;if(t>this.canonical.z)return Hm(this.wrap*+o,t,this.canonical.z,this.canonical.x,this.canonical.y);{const c=this.canonical.z-t;return Hm(this.wrap*+o,t,t,this.canonical.x>>c,this.canonical.y>>c)}}isChildOf(t){if(t.wrap!==this.wrap)return!1;const o=this.canonical.z-t.canonical.z;return t.overscaledZ===0||t.overscaledZ<this.overscaledZ&&t.canonical.z<this.canonical.z&&t.canonical.x===this.canonical.x>>o&&t.canonical.y===this.canonical.y>>o}children(t){if(this.overscaledZ>=t)return[new xa(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const o=this.canonical.z+1,c=2*this.canonical.x,h=2*this.canonical.y;return[new xa(o,this.wrap,o,c,h),new xa(o,this.wrap,o,c+1,h),new xa(o,this.wrap,o,c,h+1),new xa(o,this.wrap,o,c+1,h+1)]}isLessThan(t){return this.wrap<t.wrap||!(this.wrap>t.wrap)&&(this.overscaledZ<t.overscaledZ||!(this.overscaledZ>t.overscaledZ)&&(this.canonical.x<t.canonical.x||!(this.canonical.x>t.canonical.x)&&this.canonical.y<t.canonical.y))}wrapped(){return new xa(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(t){return new xa(this.overscaledZ,t,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new mC(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}}function Hm(a,t,o,c,h){const _=1<<Math.min(o,22);let y=_*(h%_)+c%_;return a&&o<22&&(y+=_*_*((a<0?-2*a-1:2*a)%(1<<2*(22-o)))),16*(32*y+o)+(t-o)}const hN=[a=>{let t=a.canonical.x-1,o=a.wrap;return t<0&&(t=(1<<a.canonical.z)-1,o--),new xa(a.overscaledZ,o,a.canonical.z,t,a.canonical.y)},a=>{let t=a.canonical.x+1,o=a.wrap;return t===1<<a.canonical.z&&(t=0,o++),new xa(a.overscaledZ,o,a.canonical.z,t,a.canonical.y)},a=>new xa(a.overscaledZ,a.wrap,a.canonical.z,a.canonical.x,(a.canonical.y===0?1<<a.canonical.z:a.canonical.y)-1),a=>new xa(a.overscaledZ,a.wrap,a.canonical.z,a.canonical.x,a.canonical.y===(1<<a.canonical.z)-1?0:a.canonical.y+1)];Qn(dp,"CanonicalTileID"),Qn(xa,"OverscaledTileID",{omit:["projMatrix","expandedProjMatrix"]});const fN=zi([{type:"Float32",name:"a_globe_pos",components:3},{type:"Float32",name:"a_uv",components:2}]),{members:u1}=fN,pN=zi([{name:"a_pos_3",components:3,type:"Int16"}]);var gC=zi([{name:"a_pos",type:"Int16",components:2}]);function c1(a){return a*T/Ee}const mN=[new Fi([Q,Q,Q],[oe,oe,oe]),new Fi([Q,Q,Q],[0,0,oe]),new Fi([0,Q,Q],[oe,0,oe]),new Fi([Q,0,Q],[0,oe,oe]),new Fi([0,0,Q],[oe,oe,oe])];function _C(a,t,o,c=!0){const h=Ve([],a._camera.position,a.worldSize),_=[t,o,1,1];bt(_,_,a.pixelMatrixInverse),Zt(_,_,1/_[3]);const y=Mt([],nt([],_,h)),C=a.globeMatrix,R=[C[12],C[13],C[14]],L=nt([],R,h),V=Ue(L),$=Mt([],L),U=a.worldSize/(2*Math.PI),X=Ct($,y),ee=Math.asin(U/V);if(ee<Math.acos(X)){if(!c)return null;const St=[],Rt=[];Ve(St,y,V/X),Mt(Rt,nt(Rt,St,L)),Mt(y,Pe(y,L,Ve(y,Rt,Math.tan(ee)*V)))}const de=[];new ws(h,y).closestPointOnSphere(R,U,de);const be=Mt([],os(C,0)),Ie=Mt([],os(C,1)),Fe=Mt([],os(C,2)),Be=Ct(be,de),pe=Ct(Ie,de),De=Ct(Fe,de),He=Ut(Math.asin(-pe/U));let Ze=Ut(Math.atan2(Be,De));Ze=a.center.lng+function(St,Rt){const Yt=(Rt-St+180)%360-180;return Yt<-180?Yt+360:Yt}(a.center.lng,Ze);const xt=rt(Ze),ht=tt(Qe(He),0,1);return new kt(xt,ht)}class gN{constructor(t,o,c){this.a=nt([],t,c),this.b=nt([],o,c),this.center=c;const h=Mt([],this.a),_=Mt([],this.b);this.angle=Math.acos(Ct(h,_))}}function xw(a,t){if(a.angle===0)return null;let o;return o=a.a[t]===0?1/a.angle*.5*Math.PI:1/a.angle*Math.atan(a.b[t]/a.a[t]/Math.sin(a.angle)-1/Math.tan(a.angle)),o<0||o>1?null:function(c,h,_,y){const C=Math.sin(_);return c*(Math.sin((1-y)*_)/C)+h*(Math.sin(y*_)/C)}(a.a[t],a.b[t],a.angle,tt(o,0,1))+a.center[t]}function sd(a){if(a.z<=1)return mN[a.z+2*a.y+a.x];const t=ww(d1(a));return Fi.fromPoints(t)}function Zd(a,t,o){return Ve(a,a,1-o),We(a,a,t,o)}function vC(a,t,o){for(const c of a)Lt(c,c,t),Ve(c,c,o)}function yC(a,t,o,c){const h=t/a.worldSize,_=a.globeMatrix;if(o.z<=1){const ht=sd(o).getCorners();return vC(ht,_,h),Fi.fromPoints(ht)}const y=d1(o,c),C=ww(y,T+c1(a._tileCoverLift));vC(C,_,h);const R=Number.MAX_VALUE,L=[-R,-R,-R],V=[R,R,R];if(y.contains(a.center)){for(const Rt of C)Te(V,V,Rt),Ae(L,L,Rt);L[2]=0;const ht=a.point,St=[ht.x*h,ht.y*h,0];return Te(V,V,St),Ae(L,L,St),new Fi(V,L)}if(a._tileCoverLift>0){for(const ht of C)Te(V,V,ht),Ae(L,L,ht);return new Fi(V,L)}const $=[_[12]*h,_[13]*h,_[14]*h],U=y.getCenter(),X=tt(a.center.lat,-85.051129,nn),ee=tt(U.lat,-85.051129,nn),de=rt(a.center.lng),be=Qe(X);let Ie=de-rt(U.lng);const Fe=be-Qe(ee);Ie>.5?Ie-=1:Ie<-.5&&(Ie+=1);let Be=0;Math.abs(Ie)>Math.abs(Fe)?Be=Ie>=0?1:3:(Be=Fe>=0?0:2,We($,$,[_[4]*h,_[5]*h,_[6]*h],-Math.sin(gi(Fe>=0?y.getSouth():y.getNorth()))*T));const pe=C[Be],De=C[(Be+1)%4],He=new gN(pe,De,$),Ze=[xw(He,0)||pe[0],xw(He,1)||pe[1],xw(He,2)||pe[2]],xt=Jh(a.zoom);if(xt>0){const ht=function({x:Rt,y:Yt,z:Tn},hn,Cn,In,Jt){const yn=1/(1<<Tn);let Wt=Rt*yn,Xt=Wt+yn,Ln=Yt*yn,Dn=Ln+yn,Cr=0;const lr=(Wt+Xt)/2-In;return lr>.5?Cr=-1:lr<-.5&&(Cr=1),Wt=((Wt+Cr)*hn-(In*=hn))*Cn+In,Xt=((Xt+Cr)*hn-In)*Cn+In,Ln=(Ln*hn-(Jt*=hn))*Cn+Jt,Dn=(Dn*hn-Jt)*Cn+Jt,[[Wt,Dn,0],[Xt,Dn,0],[Xt,Ln,0],[Wt,Ln,0]]}(o,t,a._pixelsPerMercatorPixel,de,be);for(let Rt=0;Rt<C.length;Rt++)Zd(C[Rt],ht[Rt],xt);const St=Pe([],ht[Be],ht[(Be+1)%4]);Ve(St,St,.5),Zd(Ze,St,xt)}for(const ht of C)Te(V,V,ht),Ae(L,L,ht);return V[2]=Math.min(pe[2],De[2]),Te(V,V,Ze),Ae(L,L,Ze),new Fi(V,L)}function d1({x:a,y:t,z:o},c=!1){const h=1/(1<<o),_=new ze(pt(a*h),t===(1<<o)-1&&c?-90:zt((t+1)*h)),y=new ze(pt((a+1)*h),t===0&&c?90:zt(t*h));return new qe(_,y)}function ww(a,t=T){const o=gi(a.getNorth()),c=gi(a.getSouth()),h=Math.cos(o),_=Math.cos(c),y=Math.sin(o),C=Math.sin(c),R=a.getWest(),L=a.getEast();return[Ce(_,C,R,t),Ce(_,C,L,t),Ce(h,y,L,t),Ce(h,y,R,t)]}function a_(a,t,o,c){const h=1<<o.z,_=(a/Pn+o.x)/h;return _e(zt((t/Pn+o.y)/h),pt(_),c)}function h1({min:a,max:t}){return j/Math.max(t[0]-a[0],t[1]-a[1],t[2]-a[2])}const bC=new Float64Array(16);function f1(a){const t=h1(a),o=he(bC,[t,t,t]);return ie(o,o,ct([],a.min))}function Sw(a){const t=(c=a.min,(o=bC)[0]=1,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=1,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=1,o[11]=0,o[12]=c[0],o[13]=c[1],o[14]=c[2],o[15]=1,o);var o,c;const h=1/h1(a);return W(t,t,[h,h,h])}function Cw(a){const t=Pn/(2*Math.PI);return a/(2*Math.PI)/t}function xC(a,t){return Pn/(512*Math.pow(2,a))*h1(sd(t))}function wC(a,t,o,c,h){const _=Cw(o),y=[a,t,-o/(2*Math.PI)],C=N(new Float64Array(16));return ie(C,C,y),W(C,C,[_,_,_]),Y(C,C,gi(-h)),J(C,C,gi(-c)),C}function Jh(a){return Tt(O,B,a)}function SC(a,t){const o=_e(t.lat,t.lng),c=function(ee){const de=_e(ee._center.lat,ee._center.lng);let be=gt([],Ne(0,1,0),de);const Ie=fe([],-ee.angle,de);be=Lt(be,be,Ie),fe(Ie,-ee._pitch,be);const Fe=Mt([],de);return Ve(Fe,Fe,c1(ee.cameraToCenterDistance/ee.pixelsPerMeter)),Lt(Fe,Fe,Ie),Pe([],de,Fe)}(a);return y=(h=ve([],c,o))[0],C=h[1],R=h[2],L=(_=o)[0],V=_[1],$=_[2],X=(U=Math.sqrt(y*y+C*C+R*R)*Math.sqrt(L*L+V*V+$*$))&&Ct(h,_)/U,Math.acos(Math.min(Math.max(X,-1),1));var h,_,y,C,R,L,V,$,U,X}function Ew(a,t){return SC(a,t)>Math.PI/2*1.01}const CC=gi(85),_N=Math.cos(CC),vN=Math.sin(CC),yN=F(),EC=a=>{const t=[];return a.paint.get("circle-pitch-alignment")==="map"&&t.push("PITCH_WITH_MAP"),a.paint.get("circle-pitch-scale")==="map"&&t.push("SCALE_WITH_MAP"),t};function TC(a,t,o,c,h,_,y,C,R){if(_&&a.queryGeometry.isAboveHorizon)return!1;_&&(R*=a.pixelToTileUnitsFactor);const L=a.tileID.canonical,V=o.projection.upVectorScale(L,o.center.lat,o.worldSize).metersToTile;for(const $ of t)for(const U of $){const X=U.add(C),ee=h&&o.elevation?o.elevation.exaggeration()*h.getElevationAt(X.x,X.y,!0):0,de=o.projection.projectTilePoint(X.x,X.y,L);if(ee>0){const Be=o.projection.upVector(L,X.x,X.y);de.x+=Be[0]*V*ee,de.y+=Be[1]*V*ee,de.z+=Be[2]*V*ee}const be=_?X:bN(de.x,de.y,de.z,c),Ie=_?a.tilespaceRays.map(Be=>wN(Be,ee)):a.queryGeometry.screenGeometry,Fe=bt([],[de.x,de.y,de.z,1],c);if(!y&&_?R*=Fe[3]/o.cameraToCenterDistance:y&&!_&&(R*=o.cameraToCenterDistance/Fe[3]),_){const Be=zt((U.y/Pn+L.y)/(1<<L.z));R/=o.projection.pixelsPerMeter(Be,1)/ut(1,Be)}if(nd(Ie,be,R))return!0}return!1}function bN(a,t,o,c){const h=bt([],[a,t,o,1],c);return new Rn(h[0]/h[3],h[1]/h[3])}const IC=Ne(0,0,0),xN=Ne(0,0,1);function wN(a,t){const o=we();return IC[2]=t,a.intersectsPlane(IC,xN,o),new Rn(o[0],o[1])}class kC extends Al{}let MC,AC,RC,PC;function LC(a,{width:t,height:o},c,h){if(h){if(h instanceof Uint8ClampedArray)h=new Uint8Array(h.buffer);else if(h.length!==t*o*c)throw new RangeError("mismatched image size")}else h=new Uint8Array(t*o*c);return a.width=t,a.height=o,a.data=h,a}function OC(a,t,o){const{width:c,height:h}=t;c===a.width&&h===a.height||(Tw(a,t,{x:0,y:0},{x:0,y:0},{width:Math.min(a.width,c),height:Math.min(a.height,h)},o,null),a.width=c,a.height=h,a.data=t.data)}function Tw(a,t,o,c,h,_,y,C){if(h.width===0||h.height===0)return t;if(h.width>a.width||h.height>a.height||o.x>a.width-h.width||o.y>a.height-h.height)throw new RangeError("out of range source coordinates for image copy");if(h.width>t.width||h.height>t.height||c.x>t.width-h.width||c.y>t.height-h.height)throw new RangeError("out of range destination coordinates for image copy");const R=a.data,L=t.data,V=_===4&&C;for(let $=0;$<h.height;$++){const U=((o.y+$)*a.width+o.x)*_,X=((c.y+$)*t.width+c.x)*_;if(V)for(let ee=0;ee<h.width;ee++){const de=U+ee*_+3,be=X+ee*_;L[be+0]=255,L[be+1]=255,L[be+2]=255,L[be+3]=R[de]}else if(y)for(let ee=0;ee<h.width;ee++){const de=U+ee*_,be=X+ee*_,Ie=new Bi(R[de+0]/255,R[de+1]/255,R[de+2]/255,R[de+3]).toNonPremultipliedRenderColor(y).toArray();L[be+0]=Ie[0],L[be+1]=Ie[1],L[be+2]=Ie[2],L[be+3]=Ie[3]}else for(let ee=0;ee<h.width*_;ee++)L[X+ee]=R[U+ee]}return t}Qn(kC,"HeatmapBucket",{omit:["layers"]});class Qh{constructor(t,o){LC(this,t,1,o)}resize(t){OC(this,new Qh(t),1)}clone(){return new Qh({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(t,o,c,h,_){Tw(t,o,c,h,_,1,null)}}class Zo{constructor(t,o){LC(this,t,4,o)}resize(t){OC(this,new Zo(t),4)}replace(t,o){o?this.data.set(t):this.data=t instanceof Uint8ClampedArray?new Uint8Array(t.buffer):t}clone(){return new Zo({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(t,o,c,h,_,y,C){Tw(t,o,c,h,_,4,y,C)}}class DC{constructor(t,o){this.width=t.width,this.height=t.height,this.data=o instanceof Uint8Array?new Float32Array(o.buffer):o}}function l_(a){const t={},o=a.resolution||256,c=a.clips?a.clips.length:1,h=a.image||new Zo({width:o,height:c}),_=(y,C,R)=>{t[a.evaluationKey]=R;const L=a.expression.evaluate(t),V=L?L.toNonPremultipliedRenderColor(null):null;V&&(h.data[y+C+0]=Math.floor(255*V.r),h.data[y+C+1]=Math.floor(255*V.g),h.data[y+C+2]=Math.floor(255*V.b),h.data[y+C+3]=Math.floor(255*V.a))};if(a.clips)for(let y=0,C=0;y<c;++y,C+=4*o)for(let R=0,L=0;R<o;R++,L+=4){const V=R/(o-1),{start:$,end:U}=a.clips[y];_(C,L,$*(1-V)+U*V)}else for(let y=0,C=0;y<o;y++,C+=4)_(0,C,y/(o-1));return h}Qn(Qh,"AlphaImage"),Qn(Zo,"RGBAImage");const SN=zi([{name:"a_pos",components:2,type:"Int16"}],4),CN=zi([{name:"a_road_z_offset",components:1,type:"Float32"}],4),EN=zi([{name:"a_pos",components:2,type:"Int16"},{name:"a_height",components:1,type:"Float32"}],4),TN=zi([{name:"a_pos_normal_3",components:3,type:"Int16"}],4);function u_(a,t,o=2){const c=t&&t.length,h=c?t[0]*o:a.length;let _=zC(a,0,h,o,!0);const y=[];if(!_||_.next===_.prev)return y;let C,R,L;if(c&&(_=function(V,$,U,X){const ee=[];for(let de=0,be=$.length;de<be;de++){const Ie=zC(V,$[de]*X,de<be-1?$[de+1]*X:V.length,X,!1);Ie===Ie.next&&(Ie.steiner=!0),ee.push(ON(Ie))}ee.sort(RN);for(let de=0;de<ee.length;de++)U=PN(ee[de],U);return U}(a,t,_,o)),a.length>80*o){C=1/0,R=1/0;let V=-1/0,$=-1/0;for(let U=o;U<h;U+=o){const X=a[U],ee=a[U+1];X<C&&(C=X),ee<R&&(R=ee),X>V&&(V=X),ee>$&&($=ee)}L=Math.max(V-C,$-R),L=L!==0?32767/L:0}return c_(_,y,o,C,R,L,0),y}function zC(a,t,o,c,h){let _;if(h===function(y,C,R,L){let V=0;for(let $=C,U=R-L;$<R;$+=L)V+=(y[U]-y[$])*(y[$+1]+y[U+1]),U=$;return V}(a,t,o,c)>0)for(let y=t;y<o;y+=c)_=VC(y/c|0,a[y],a[y+1],_);else for(let y=o-c;y>=t;y-=c)_=VC(y/c|0,a[y],a[y+1],_);return _&&Um(_,_.next)&&(f_(_),_=_.next),_}function hp(a,t){if(!a)return a;t||(t=a);let o,c=a;do if(o=!1,c.steiner||!Um(c,c.next)&&Mo(c.prev,c,c.next)!==0)c=c.next;else{if(f_(c),c=t=c.prev,c===c.next)break;o=!0}while(o||c!==t);return t}function c_(a,t,o,c,h,_,y){if(!a)return;!y&&_&&function(R,L,V,$){let U=R;do U.z===0&&(U.z=Iw(U.x,U.y,L,V,$)),U.prevZ=U.prev,U.nextZ=U.next,U=U.next;while(U!==R);U.prevZ.nextZ=null,U.prevZ=null,function(X){let ee,de=1;do{let be,Ie=X;X=null;let Fe=null;for(ee=0;Ie;){ee++;let Be=Ie,pe=0;for(let He=0;He<de&&(pe++,Be=Be.nextZ,Be);He++);let De=de;for(;pe>0||De>0&&Be;)pe!==0&&(De===0||!Be||Ie.z<=Be.z)?(be=Ie,Ie=Ie.nextZ,pe--):(be=Be,Be=Be.nextZ,De--),Fe?Fe.nextZ=be:X=be,be.prevZ=Fe,Fe=be;Ie=Be}Fe.nextZ=null,de*=2}while(ee>1)}(U)}(a,c,h,_);let C=a;for(;a.prev!==a.next;){const R=a.prev,L=a.next;if(_?kN(a,c,h,_):IN(a))t.push(R.i,a.i,L.i),f_(a),a=L.next,C=L.next;else if((a=L)===C){y?y===1?c_(a=MN(hp(a),t),t,o,c,h,_,2):y===2&&AN(a,t,o,c,h,_):c_(hp(a),t,o,c,h,_,1);break}}}function IN(a){const t=a.prev,o=a,c=a.next;if(Mo(t,o,c)>=0)return!1;const h=t.x,_=o.x,y=c.x,C=t.y,R=o.y,L=c.y,V=Math.min(h,_,y),$=Math.min(C,R,L),U=Math.max(h,_,y),X=Math.max(C,R,L);let ee=c.next;for(;ee!==t;){if(ee.x>=V&&ee.x<=U&&ee.y>=$&&ee.y<=X&&d_(h,C,_,R,y,L,ee.x,ee.y)&&Mo(ee.prev,ee,ee.next)>=0)return!1;ee=ee.next}return!0}function kN(a,t,o,c){const h=a.prev,_=a,y=a.next;if(Mo(h,_,y)>=0)return!1;const C=h.x,R=_.x,L=y.x,V=h.y,$=_.y,U=y.y,X=Math.min(C,R,L),ee=Math.min(V,$,U),de=Math.max(C,R,L),be=Math.max(V,$,U),Ie=Iw(X,ee,t,o,c),Fe=Iw(de,be,t,o,c);let Be=a.prevZ,pe=a.nextZ;for(;Be&&Be.z>=Ie&&pe&&pe.z<=Fe;){if(Be.x>=X&&Be.x<=de&&Be.y>=ee&&Be.y<=be&&Be!==h&&Be!==y&&d_(C,V,R,$,L,U,Be.x,Be.y)&&Mo(Be.prev,Be,Be.next)>=0||(Be=Be.prevZ,pe.x>=X&&pe.x<=de&&pe.y>=ee&&pe.y<=be&&pe!==h&&pe!==y&&d_(C,V,R,$,L,U,pe.x,pe.y)&&Mo(pe.prev,pe,pe.next)>=0))return!1;pe=pe.nextZ}for(;Be&&Be.z>=Ie;){if(Be.x>=X&&Be.x<=de&&Be.y>=ee&&Be.y<=be&&Be!==h&&Be!==y&&d_(C,V,R,$,L,U,Be.x,Be.y)&&Mo(Be.prev,Be,Be.next)>=0)return!1;Be=Be.prevZ}for(;pe&&pe.z<=Fe;){if(pe.x>=X&&pe.x<=de&&pe.y>=ee&&pe.y<=be&&pe!==h&&pe!==y&&d_(C,V,R,$,L,U,pe.x,pe.y)&&Mo(pe.prev,pe,pe.next)>=0)return!1;pe=pe.nextZ}return!0}function MN(a,t){let o=a;do{const c=o.prev,h=o.next.next;!Um(c,h)&&FC(c,o,o.next,h)&&h_(c,h)&&h_(h,c)&&(t.push(c.i,o.i,h.i),f_(o),f_(o.next),o=a=h),o=o.next}while(o!==a);return hp(o)}function AN(a,t,o,c,h,_){let y=a;do{let C=y.next.next;for(;C!==y.prev;){if(y.i!==C.i&&DN(y,C)){let R=BC(y,C);return y=hp(y,y.next),R=hp(R,R.next),c_(y,t,o,c,h,_,0),void c_(R,t,o,c,h,_,0)}C=C.next}y=y.next}while(y!==a)}function RN(a,t){let o=a.x-t.x;return o===0&&(o=a.y-t.y,o===0)&&(o=(a.next.y-a.y)/(a.next.x-a.x)-(t.next.y-t.y)/(t.next.x-t.x)),o}function PN(a,t){const o=function(h,_){let y=_;const C=h.x,R=h.y;let L,V=-1/0;if(Um(h,y))return y;do{if(Um(h,y.next))return y.next;if(R<=y.y&&R>=y.next.y&&y.next.y!==y.y){const de=y.x+(R-y.y)*(y.next.x-y.x)/(y.next.y-y.y);if(de<=C&&de>V&&(V=de,L=y.x<y.next.x?y:y.next,de===C))return L}y=y.next}while(y!==_);if(!L)return null;const $=L,U=L.x,X=L.y;let ee=1/0;y=L;do{if(C>=y.x&&y.x>=U&&C!==y.x&&NC(R<X?C:V,R,U,X,R<X?V:C,R,y.x,y.y)){const de=Math.abs(R-y.y)/(C-y.x);h_(y,h)&&(de<ee||de===ee&&(y.x>L.x||y.x===L.x&&LN(L,y)))&&(L=y,ee=de)}y=y.next}while(y!==$);return L}(a,t);if(!o)return t;const c=BC(o,a);return hp(c,c.next),hp(o,o.next)}function LN(a,t){return Mo(a.prev,a,t.prev)<0&&Mo(t.next,a,a.next)<0}function Iw(a,t,o,c,h){return(a=1431655765&((a=858993459&((a=252645135&((a=16711935&((a=(a-o)*h|0)|a<<8))|a<<4))|a<<2))|a<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-c)*h|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function ON(a){let t=a,o=a;do(t.x<o.x||t.x===o.x&&t.y<o.y)&&(o=t),t=t.next;while(t!==a);return o}function NC(a,t,o,c,h,_,y,C){return(h-y)*(t-C)>=(a-y)*(_-C)&&(a-y)*(c-C)>=(o-y)*(t-C)&&(o-y)*(_-C)>=(h-y)*(c-C)}function d_(a,t,o,c,h,_,y,C){return!(a===y&&t===C)&&NC(a,t,o,c,h,_,y,C)}function DN(a,t){return a.next.i!==t.i&&a.prev.i!==t.i&&!function(o,c){let h=o;do{if(h.i!==o.i&&h.next.i!==o.i&&h.i!==c.i&&h.next.i!==c.i&&FC(h,h.next,o,c))return!0;h=h.next}while(h!==o);return!1}(a,t)&&(h_(a,t)&&h_(t,a)&&function(o,c){let h=o,_=!1;const y=(o.x+c.x)/2,C=(o.y+c.y)/2;do h.y>C!=h.next.y>C&&h.next.y!==h.y&&y<(h.next.x-h.x)*(C-h.y)/(h.next.y-h.y)+h.x&&(_=!_),h=h.next;while(h!==o);return _}(a,t)&&(Mo(a.prev,a,t.prev)||Mo(a,t.prev,t))||Um(a,t)&&Mo(a.prev,a,a.next)>0&&Mo(t.prev,t,t.next)>0)}function Mo(a,t,o){return(t.y-a.y)*(o.x-t.x)-(t.x-a.x)*(o.y-t.y)}function Um(a,t){return a.x===t.x&&a.y===t.y}function FC(a,t,o,c){const h=m1(Mo(a,t,o)),_=m1(Mo(a,t,c)),y=m1(Mo(o,c,a)),C=m1(Mo(o,c,t));return h!==_&&y!==C||!(h!==0||!p1(a,o,t))||!(_!==0||!p1(a,c,t))||!(y!==0||!p1(o,a,c))||!(C!==0||!p1(o,t,c))}function p1(a,t,o){return t.x<=Math.max(a.x,o.x)&&t.x>=Math.min(a.x,o.x)&&t.y<=Math.max(a.y,o.y)&&t.y>=Math.min(a.y,o.y)}function m1(a){return a>0?1:a<0?-1:0}function h_(a,t){return Mo(a.prev,a,a.next)<0?Mo(a,t,a.next)>=0&&Mo(a,a.prev,t)>=0:Mo(a,t,a.prev)<0||Mo(a,a.next,t)<0}function BC(a,t){const o=kw(a.i,a.x,a.y),c=kw(t.i,t.x,t.y),h=a.next,_=t.prev;return a.next=t,t.prev=a,o.next=h,h.prev=o,c.next=o,o.prev=c,_.next=c,c.prev=_,c}function VC(a,t,o,c){const h=kw(a,t,o);return c?(h.next=c.next,h.prev=c,c.next.prev=h,c.next=h):(h.prev=h,h.next=h),h}function f_(a){a.next.prev=a.prev,a.prev.next=a.next,a.prevZ&&(a.prevZ.nextZ=a.nextZ),a.nextZ&&(a.nextZ.prevZ=a.prevZ)}function kw(a,t,o){return{i:a,x:t,y:o,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function g1(a,t){const o=a.length;if(o<=1)return[a];const c=[];let h,_;for(let y=0;y<o;y++){const C=Rr(a[y]);C!==0&&(a[y].area=Math.abs(C),_===void 0&&(_=C<0),_===C<0?(h&&c.push(h),h=[a[y]]):h.push(a[y]))}if(h&&c.push(h),t>1)for(let y=0;y<c.length;y++)c[y].length<=t||(Oo(c[y],t,1,c[y].length-1,zN),c[y]=c[y].slice(0,t));return c}function zN(a,t){return t.area-a.area}function $C(a,t,o=1){if(!a)return null;const c=typeof a=="string"?sa.from(a).getPrimary():a.getPrimary(),h=typeof a=="string"?null:a.getSecondary();for(const _ of[c,h]){if(!_)continue;const y=_.id.toString();t.has(y)||t.set(y,[]),_.scaleSelf(o),t.get(y).push(_)}return{primary:c.toString(),secondary:h?h.toString():null}}function Mw(a,t,o,c){const h=c.patternDependencies;let _=!1;for(const y of t){const C=y.paint.get(`${a}-pattern`);C.isConstant()||(_=!0),$C(C.constantOr(null),h,o)&&(_=!0)}return _}function Aw(a,t,o,c,h,_){const y=_.patternDependencies;for(const C of t){const R=C.paint.get(`${a}-pattern`).value;if(R.kind!=="constant"){let L=R.evaluate({zoom:c},o,{},_.availableImages);L=L&&L.name?L.name:L;const V=$C(L,y,h);if(!V)continue;const{primary:$,secondary:U}=V;$&&(o.patterns[C.id]=[$,U].filter(Boolean))}}return o}class HC{constructor(){this.polygons=new Map}add(t,...o){this.polygons.has(t)?this.polygons.get(t).push(...o):this.polygons.set(t,o)}merge(t){for(const[o,c]of t.polygons)this.add(o,...c)}}class fp{constructor(){this.portals=[]}static evaluate(t){if(t.length===0)return new fp;let o=[];for(const L of t)o.push(...L.portals);if(o.length===0)return new fp;const c=(L,V)=>L<=0&&V<=0||L>=Pn&&V>=Pn;for(const L of o){const V=L.va,$=L.vb;(c(V.x,$.x)||c(V.y,$.y))&&(L.type="border")}const h=o.filter(L=>L.type!=="unevaluated"),_=o.filter(L=>L.type==="unevaluated");if(_.length===0)return new fp;_.sort((L,V)=>L.hash===V.hash?L.isTunnel===V.isTunnel?0:L.isTunnel?-1:1:L.hash<V.hash?1:-1),o=h.concat(_);let y=h.length,C=y,R=y;do if(C++,C===o.length||o[y].hash!==o[C].hash){if(C-y==2){R<y&&(o[R]=o[y],o[y]=null);const L=o[R],V=o[C-1];L.type=L.isTunnel!==V.isTunnel?"tunnel":"polygon",L.connection={a:L.connection.a,b:V.connection.a},R++}y=C}while(y!==o.length);return o.splice(R),o.sort((L,V)=>L.hash<V.hash?1:-1),{portals:o}}}Qn(fp,"ElevationPortalGraph"),Qn(HC,"ElevationPolygons");class NN{constructor(t,o,c){this.outPositions=t,this.outNormals=o,this.outIndices=c,this.vertexLookup=new Map,this.buffer=new ArrayBuffer(4),this.view=new DataView(this.buffer)}addVertex(t,o,c){let h=t[2];c!=null&&(h*=c);const _=this.getVec3Bits(t)<<96n|this.getVec3Bits(o),y=this.vertexLookup.get(_);if(y!=null)return y;const C=this.outPositions.length;this.vertexLookup.set(_,C);const R=Math.trunc(16384*o[0]),L=Math.trunc(16384*o[1]),V=Math.trunc(16384*o[2]);return this.outPositions.emplaceBack(t[0],t[1],h),this.outNormals.emplaceBack(R,L,V),C}addVertices(t,o,...c){const h=[];for(const _ of c){const y=this.addVertex(_,t,o);h.push(y)}return h}addTriangles(t,o,c){if(o&&c){const h=c.length===1,_=Ne(0,0,0);for(let y=0;y<t.length;y+=3){const C=o[t[y+0]],R=o[t[y+1]],L=o[t[y+2]],V=h?c[0]:c[t[y+1]],$=h?c[0]:c[t[y+2]],U=this.addVertex(Ne(C.x,C.y,h?c[0]:c[t[y+0]]),_),X=this.addVertex(Ne(R.x,R.y,V),_),ee=this.addVertex(Ne(L.x,L.y,$),_);this.outIndices.emplaceBack(U,X,ee)}}else for(let h=0;h<t.length;h+=3)this.outIndices.emplaceBack(t[h+0],t[h+1],t[h+2])}addQuad(t,o){const c=this.addVertices(o,void 0,...t.map(R=>Ne(R.coord.x,R.coord.y,R.height))),[h,_,y,C]=c;this.addTriangles([h,_,y,y,C,h])}getVertexCount(){return this.outPositions.length}clearVertexLookup(){this.vertexLookup.clear()}getBits(t){return this.view.setFloat32(0,t),BigInt(this.view.getUint32(0))}getVec3Bits(t){return this.getBits(t[0])<<64n|this.getBits(t[1])<<32n|this.getBits(t[2])}}class Rl{constructor(t,o,c,h){this.unevaluatedPortals=new fp,this.portalPolygons=new HC,this.bridgeFeatureSections=[],this.tunnelFeatureSections=[],this.vertexHashLookup=new Map,this.unevalVertices=[],this.unevalHeights=[],this.unevalTriangles=[],this.unevalTunnelTriangles=[],this.unevalEdges=[],this.vertexPositions=new G0,this.vertexNormals=new km,this.indexArray=new Ho,this.tileToMeters=Kt(t),this.bridgeProgramConfigurations=new f(o,{zoom:c,lut:h},_=>_!=="fill-tunnel-structure-color"),this.tunnelProgramConfigurations=new f(o,{zoom:c,lut:h},_=>_!=="fill-bridge-guard-rail-color")}addVertices(t,o){const c=this.unevalVertices.length;for(let h=0;h<t.length;h++)this.unevalVertices.push(t[h]),this.unevalHeights.push(o[h]);return c}addTriangles(t,o,c){const h=c?this.unevalTunnelTriangles:this.unevalTriangles;for(const _ of t)h.push(_+o)}addRenderableRing(t,o,c,h,_,y){const C=[new Rn(_.min.x,_.min.y),new Rn(_.max.x,_.min.y),new Rn(_.max.x,_.max.y),new Rn(_.min.x,_.max.y)];for(let R=0;R<c-1;R++){const L=o+R,V=L+1,$=this.unevalVertices[L],U=this.unevalVertices[V];if(!($.x>=_.min.x&&$.x<=_.max.x&&$.y>=_.min.y&&$.y<=_.max.y||U.x>=_.min.x&&U.x<=_.max.x&&U.y>=_.min.y&&U.y<=_.max.y||Yd($,U,C))||this.isOnBorder($.x,U.x)||this.isOnBorder($.y,U.y))continue;const X=Rl.computeEdgeHash(this.unevalVertices[L],this.unevalVertices[V]);let ee,de=this.vertexHashLookup.get(Rl.computePosHash($));de!=null?ee=de.next:(de=this.vertexHashLookup.get(Rl.computePosHash(U)),ee=de!=null?de.prev:X),this.unevalEdges.push({polygonIdx:t,a:L,b:V,hash:X,portalHash:ee,isTunnel:h,type:"unevaluated",featureInfo:y})}}addPortalCandidates(t,o,c,h,_){if(o.length===0)return;this.portalPolygons.add(t,{geometry:o,zLevel:_});const y=o[0];this.vertexHashLookup.clear();let C=Rl.computeEdgeHash(y[y.length-2],y[y.length-1]);for(let R=0;R<y.length-1;R++){const L=y[R+0],V=y[R+1],$=pr(V.x-L.x,V.y-L.y),U=it($);if(U===0)continue;let X="unevaluated";const ee=h.pointElevation(L),de=h.pointElevation(V);Math.abs(ee)<.01&&Math.abs(de)<.01?X="entrance":(this.isOnBorder(L.x,V.x)||this.isOnBorder(L.y,V.y))&&(X="border");const be=Rl.computeEdgeHash(L,V);this.unevaluatedPortals.portals.push({connection:{a:t,b:void 0},va:L,vb:V,vab:$,length:U,hash:be,isTunnel:c,type:X});const Ie=Rl.computePosHash(L);this.vertexHashLookup.set(Ie,{prev:C,next:be}),C=be}}construct(t){if(this.unevalVertices.length===0)return;const o=()=>({vertexOffset:0,primitiveOffset:this.indexArray.length}),c=U=>{U.primitiveLength=this.indexArray.length-U.primitiveOffset},h=new NN(this.vertexPositions,this.vertexNormals,this.indexArray);this.prepareEdges(t.portals,this.unevalEdges);const _=o(),y=o(),C=o(),R=(U,X)=>{U.sort((de,be)=>de.type===X&&be.type!==X?-1:de.type!==X&&be.type===X?1:0);const ee=U.findIndex(de=>de.type!==X);return ee>=0?ee:U.length};let L=0;this.unevalEdges.length>0&&(L=R(this.unevalEdges,"none"),this.constructBridgeStructures(h,this.unevalVertices,this.unevalHeights,this.unevalEdges,{min:0,max:L},this.tileToMeters)),c(C);const V=o(),$=o();if(this.unevalEdges.length>0){const U=this.unevalEdges.splice(L),X=R(U,"tunnel")+L;this.unevalEdges.push(...U),this.constructTunnelStructures(h,this.unevalVertices,this.unevalHeights,this.unevalEdges,{min:0,max:L},{min:L,max:X})}c(V),h.addTriangles(this.unevalTriangles,this.unevalVertices,this.unevalHeights),c($),h.addTriangles(this.unevalTunnelTriangles,this.unevalVertices,this.unevalHeights),c(y),h.addTriangles(this.unevalTunnelTriangles,this.unevalVertices,[-.1]),c(_),this.maskSegments=Us.simpleSegment(0,$.primitiveOffset,0,$.primitiveLength),this.depthSegments=Us.simpleSegment(0,y.primitiveOffset,0,y.primitiveLength),this.renderableBridgeSegments=Us.simpleSegment(0,C.primitiveOffset,0,C.primitiveLength),this.renderableTunnelSegments=Us.simpleSegment(0,V.primitiveOffset,0,V.primitiveLength),this.shadowCasterSegments=Us.simpleSegment(0,_.primitiveOffset,0,_.primitiveLength)}update(t,o,c,h,_,y,C,R){this.bridgeProgramConfigurations.updatePaintArrays(t,o,_,c,h,y,C,R),this.tunnelProgramConfigurations.updatePaintArrays(t,o,_,c,h,y,C,R)}upload(t){this.vertexBuffer||this.vertexPositions.length===0||this.vertexNormals.length===0||this.indexArray.length===0||(this.vertexBuffer=t.createVertexBuffer(this.vertexPositions,EN.members),this.vertexBufferNormal=t.createVertexBuffer(this.vertexNormals,TN.members),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.bridgeProgramConfigurations.upload(t),this.tunnelProgramConfigurations.upload(t))}destroy(){this.vertexBuffer&&(this.vertexBuffer.destroy(),this.vertexBufferNormal.destroy(),this.indexBuffer.destroy()),this.maskSegments&&(this.maskSegments.destroy(),this.depthSegments.destroy(),this.renderableBridgeSegments.destroy(),this.renderableTunnelSegments.destroy(),this.shadowCasterSegments.destroy()),this.bridgeProgramConfigurations.destroy(),this.tunnelProgramConfigurations.destroy()}populatePaintArrays(t,o,c,h,_){const y=(C,R)=>{for(let L=0;L<R.length-1;L++){const V=R[L].featureIndex,$=R[L+1].vertexStart,U=t.feature(V);C.populatePaintArrays($,U,V,{},c,o,h,void 0,_)}};y(this.bridgeProgramConfigurations,this.bridgeFeatureSections),y(this.tunnelProgramConfigurations,this.tunnelFeatureSections)}computeVertexConnections(t,o,c,h,_){const y=new Map;for(let C=h;C<_;C++){const R=c[C],L=R.a,V=R.b,$=Rl.computePosHash(t[L]),U=Rl.computePosHash(t[V]);y.has($)||y.set($,{}),y.has(U)||y.set(U,{});const X=y.get($),ee=y.get(U);o[L]<=0&&o[V]<=0||(X.to=V,ee.from=L)}return y}constructBridgeStructures(t,o,c,h,_,y){t.clearVertexLookup();const C=this.computeVertexConnections(o,c,h,_.min,_.max),R=1/y,L=.5*R,V=X=>Ne(o[X].x,o[X].y,c[X]*R),$=X=>{const ee=C.get(Rl.computePosHash(o[X])),de=ee.from,be=ee.to;if(!de||!be)return;const Ie=V(de),Fe=V(X),Be=V(be),pe=Ne(0,0,0);if(!le(Ie,Fe)){const He=nt(we(),Fe,Ie);Pe(pe,pe,Mt(He,He))}if(!le(Be,Fe)){const He=nt(we(),Be,Fe);Pe(pe,pe,Mt(He,He))}const De=an(pe);return De>0?Ve(pe,pe,1/De):void 0};let U=Number.POSITIVE_INFINITY;this.sortSubarray(h,_.min,_.max,(X,ee)=>X.featureInfo.featureIndex-ee.featureInfo.featureIndex);for(let X=_.min;X<_.max;X++){const ee=h[X];if(!ee.featureInfo.guardRailEnabled)continue;const de=this.prepareEdgePoints(o,c,ee,(qr,ar)=>qr>ar);if(de==null)continue;const be=de[0],Ie=de[1],Fe=Ne(be.coord.x,be.coord.y,R*be.height),Be=Ne(Ie.coord.x,Ie.coord.y,R*Ie.height);if(le(Fe,Be))continue;const pe=nt(we(),Be,Fe);Mt(pe,pe);const De=qr=>Mt(qr,qr),He=$(ee.a)||pe,Ze=$(ee.b)||pe,xt=De(Ne(He[1],-He[0],0)),ht=De(Ne(Ze[1],-Ze[0],0)),St=De(gt(we(),xt,He)),Rt=De(gt(we(),ht,Ze)),Yt=we(),Tn=[Pe(we(),Fe,Ve(Yt,nt(Yt,xt,St),L)),Pe(we(),Fe,Ve(Yt,Pe(Yt,xt,St),L)),Pe(we(),Fe,Ve(Yt,St,L)),Fe],hn=[Pe(we(),Be,Ve(Yt,nt(Yt,ht,Rt),L)),Pe(we(),Be,Ve(Yt,Pe(Yt,ht,Rt),L)),Pe(we(),Be,Ve(Yt,Rt,L)),Be];U=this.addFeatureSection(ee.featureInfo.featureIndex,U,this.bridgeFeatureSections,t);const[Cn,In]=t.addVertices(xt,y,Tn[0],Tn[1]),[Jt,yn]=t.addVertices(ht,y,hn[0],hn[1]);t.addTriangles([Cn,In,Jt,In,yn,Jt]);const[Wt,Xt]=t.addVertices(St,y,Tn[1],Tn[2]),[Ln,Dn]=t.addVertices(Rt,y,hn[1],hn[2]);t.addTriangles([Wt,Xt,Ln,Xt,Dn,Ln]);const[Cr,lr]=t.addVertices(ct(xt,xt),y,Tn[2],Tn[3]),[Hn,An]=t.addVertices(ct(ht,ht),y,hn[2],hn[3]);t.addTriangles([Cr,lr,Hn,lr,An,Hn])}this.bridgeFeatureSections.push({featureIndex:Number.POSITIVE_INFINITY,vertexStart:t.getVertexCount()})}constructTunnelStructures(t,o,c,h,_,y){t.clearVertexLookup();let C=Number.POSITIVE_INFINITY;const R=(V,$)=>V.featureInfo.featureIndex-$.featureInfo.featureIndex;this.sortSubarray(h,_.min,_.max,R),this.sortSubarray(h,y.min,y.max,R);const L=V=>Mt(V,V);for(let V=_.min;V<_.max;V++){const $=this.prepareEdgePoints(o,c,h[V],(de,be)=>de<be);if($==null)continue;const[U,X]=$,ee=L(Ne(-(X.coord.y-U.coord.y),X.coord.x-U.coord.x,0));C=this.addFeatureSection(h[V].featureInfo.featureIndex,C,this.tunnelFeatureSections,t),t.addQuad([U,X,{coord:X.coord,height:h[V].isTunnel?-.1:0},{coord:U.coord,height:h[V].isTunnel?-.1:0}],ee)}for(let V=y.min;V<y.max;V++){const $=h[V];$.isTunnel&&([$.a,$.b]=[$.b,$.a]);const U=o[$.a],X=o[$.b],ee=L(Ne(-(X.y-U.y),X.x-U.x,0));C=this.addFeatureSection($.featureInfo.featureIndex,C,this.tunnelFeatureSections,t),t.addQuad([{coord:X,height:0},{coord:U,height:0},{coord:U,height:c[$.a]+4},{coord:X,height:c[$.b]+4}],ee),t.addQuad([{coord:U,height:0},{coord:X,height:0},{coord:X,height:c[$.b]+4},{coord:U,height:c[$.a]+4}],ee)}this.tunnelFeatureSections.push({featureIndex:Number.POSITIVE_INFINITY,vertexStart:t.getVertexCount()})}prepareEdgePoints(t,o,c,h){let _=o[c.a],y=o[c.b];const C=h(_,0),R=h(y,0);if(C&&R)return[{coord:t[c.a],height:_},{coord:t[c.b],height:y}];if(!C&&!R)return;const L=t[c.a].clone(),V=t[c.b].clone();if(C){if(!R){const $=y/(y-_);V.x=Dr(V.x,L.x,$),V.y=Dr(V.y,L.y,$),y=Dr(y,_,$)}}else{const $=_/(_-y);L.x=Dr(L.x,V.x,$),L.y=Dr(L.y,V.y,$),_=Dr(_,y,$)}return[{coord:L,height:_},{coord:V,height:y}]}prepareEdges(t,o){if(o.length===0)return;o.sort((C,R)=>C.hash===R.hash?R.polygonIdx-C.polygonIdx:R.hash>C.hash?1:-1);let c=0,h=0,_=0,y=o[c].polygonIdx;do h++,(h===o.length||o[c].hash!==o[h].hash)&&((h-c==1||o[h-1].polygonIdx!==y)&&(_<c&&(o[_]=o[c],o[c]=null),o[_].type="none",_++),c=h,c!==o.length&&(y=o[c].polygonIdx));while(c!==o.length);if(o.splice(_),o.length!==0&&t.length!==0){o.sort((L,V)=>L.portalHash<V.portalHash?1:-1);let C=0,R=0;for(;C!==o.length&&R!==t.length;){const L=o[C],V=t[R];L.portalHash>V.hash?C++:V.hash>L.portalHash?R++:(L.type=V.type,C++)}}}isOnBorder(t,o){return t<=0&&o<=0||t>=Pn&&o>=Pn}addFeatureSection(t,o,c,h){return t!==o&&(o=t,c.push({featureIndex:t,vertexStart:h.getVertexCount()}),h.clearVertexLookup()),o}sortSubarray(t,o,c,h){const _=t.slice(o,c);_.sort(h),t.splice(o,_.length,..._)}static computeEdgeHash(t,o){return(t.y===o.y&&t.x>o.x||t.y>o.y)&&([t,o]=[o,t]),BigInt(Rl.computePosHash(t))<<32n|BigInt(Rl.computePosHash(o))}static computePosHash(t){return((65535&t.x)<<16|65535&t.y)>>>0}}var UC,jC={exports:{}},GC=(UC||(UC=1,function(a,t){(function(o){function c(Ge,Xe){return Ge>Xe?1:Ge<Xe?-1:0}var h=function(Ge,Xe){Ge===void 0&&(Ge=c),Xe===void 0&&(Xe=!1),this._compare=Ge,this._root=null,this._size=0,this._noDuplicates=!!Xe},_={size:{configurable:!0}};function y(Ge,Xe,en,Fn,jn){var $n=jn-Fn;if($n>0){var sr=Fn+Math.floor($n/2),zr={key:Xe[sr],data:en[sr],parent:Ge};return zr.left=y(zr,Xe,en,Fn,sr),zr.right=y(zr,Xe,en,sr+1,jn),zr}return null}function C(Ge,Xe,en,Fn,jn){if(!(en>=Fn)){for(var $n=Ge[en+Fn>>1],sr=en-1,zr=Fn+1;;){do sr++;while(jn(Ge[sr],$n)<0);do zr--;while(jn(Ge[zr],$n)>0);if(sr>=zr)break;var wi=Ge[sr];Ge[sr]=Ge[zr],Ge[zr]=wi,wi=Xe[sr],Xe[sr]=Xe[zr],Xe[zr]=wi}C(Ge,Xe,en,zr,jn),C(Ge,Xe,zr+1,Fn,jn)}}h.prototype.rotateLeft=function(Ge){var Xe=Ge.right;Xe&&(Ge.right=Xe.left,Xe.left&&(Xe.left.parent=Ge),Xe.parent=Ge.parent),Ge.parent?Ge===Ge.parent.left?Ge.parent.left=Xe:Ge.parent.right=Xe:this._root=Xe,Xe&&(Xe.left=Ge),Ge.parent=Xe},h.prototype.rotateRight=function(Ge){var Xe=Ge.left;Xe&&(Ge.left=Xe.right,Xe.right&&(Xe.right.parent=Ge),Xe.parent=Ge.parent),Ge.parent?Ge===Ge.parent.left?Ge.parent.left=Xe:Ge.parent.right=Xe:this._root=Xe,Xe&&(Xe.right=Ge),Ge.parent=Xe},h.prototype._splay=function(Ge){for(;Ge.parent;){var Xe=Ge.parent;Xe.parent?Xe.left===Ge&&Xe.parent.left===Xe?(this.rotateRight(Xe.parent),this.rotateRight(Xe)):Xe.right===Ge&&Xe.parent.right===Xe?(this.rotateLeft(Xe.parent),this.rotateLeft(Xe)):Xe.left===Ge&&Xe.parent.right===Xe?(this.rotateRight(Xe),this.rotateLeft(Xe)):(this.rotateLeft(Xe),this.rotateRight(Xe)):Xe.left===Ge?this.rotateRight(Xe):this.rotateLeft(Xe)}},h.prototype.splay=function(Ge){for(var Xe,en,Fn,jn,$n;Ge.parent;)(en=(Xe=Ge.parent).parent)&&en.parent?((Fn=en.parent).left===en?Fn.left=Ge:Fn.right=Ge,Ge.parent=Fn):(Ge.parent=null,this._root=Ge),jn=Ge.left,$n=Ge.right,Ge===Xe.left?(en&&(en.left===Xe?(Xe.right?(en.left=Xe.right,en.left.parent=en):en.left=null,Xe.right=en,en.parent=Xe):(jn?(en.right=jn,jn.parent=en):en.right=null,Ge.left=en,en.parent=Ge)),$n?(Xe.left=$n,$n.parent=Xe):Xe.left=null,Ge.right=Xe,Xe.parent=Ge):(en&&(en.right===Xe?(Xe.left?(en.right=Xe.left,en.right.parent=en):en.right=null,Xe.left=en,en.parent=Xe):($n?(en.left=$n,$n.parent=en):en.left=null,Ge.right=en,en.parent=Ge)),jn?(Xe.right=jn,jn.parent=Xe):Xe.right=null,Ge.left=Xe,Xe.parent=Ge)},h.prototype.replace=function(Ge,Xe){Ge.parent?Ge===Ge.parent.left?Ge.parent.left=Xe:Ge.parent.right=Xe:this._root=Xe,Xe&&(Xe.parent=Ge.parent)},h.prototype.minNode=function(Ge){if(Ge===void 0&&(Ge=this._root),Ge)for(;Ge.left;)Ge=Ge.left;return Ge},h.prototype.maxNode=function(Ge){if(Ge===void 0&&(Ge=this._root),Ge)for(;Ge.right;)Ge=Ge.right;return Ge},h.prototype.insert=function(Ge,Xe){var en=this._root,Fn=null,jn=this._compare;if(this._noDuplicates)for(;en;){if(Fn=en,jn(en.key,Ge)===0)return;en=jn(en.key,Ge)<0?en.right:en.left}else for(;en;)Fn=en,en=jn(en.key,Ge)<0?en.right:en.left;return en={key:Ge,data:Xe,left:null,right:null,parent:Fn},Fn?jn(Fn.key,en.key)<0?Fn.right=en:Fn.left=en:this._root=en,this.splay(en),this._size++,en},h.prototype.find=function(Ge){for(var Xe=this._root,en=this._compare;Xe;){var Fn=en(Xe.key,Ge);if(Fn<0)Xe=Xe.right;else{if(!(Fn>0))return Xe;Xe=Xe.left}}return null},h.prototype.contains=function(Ge){for(var Xe=this._root,en=this._compare;Xe;){var Fn=en(Ge,Xe.key);if(Fn===0)return!0;Xe=Fn<0?Xe.left:Xe.right}return!1},h.prototype.remove=function(Ge){var Xe=this.find(Ge);if(!Xe)return!1;if(this.splay(Xe),Xe.left)if(Xe.right){var en=this.minNode(Xe.right);en.parent!==Xe&&(this.replace(en,en.right),en.right=Xe.right,en.right.parent=en),this.replace(Xe,en),en.left=Xe.left,en.left.parent=en}else this.replace(Xe,Xe.left);else this.replace(Xe,Xe.right);return this._size--,!0},h.prototype.removeNode=function(Ge){if(!Ge)return!1;if(this.splay(Ge),Ge.left)if(Ge.right){var Xe=this.minNode(Ge.right);Xe.parent!==Ge&&(this.replace(Xe,Xe.right),Xe.right=Ge.right,Xe.right.parent=Xe),this.replace(Ge,Xe),Xe.left=Ge.left,Xe.left.parent=Xe}else this.replace(Ge,Ge.left);else this.replace(Ge,Ge.right);return this._size--,!0},h.prototype.erase=function(Ge){var Xe=this.find(Ge);if(Xe){this.splay(Xe);var en=Xe.left,Fn=Xe.right,jn=null;en&&(en.parent=null,jn=this.maxNode(en),this.splay(jn),this._root=jn),Fn&&(en?jn.right=Fn:this._root=Fn,Fn.parent=jn),this._size--}},h.prototype.pop=function(){var Ge=this._root,Xe=null;if(Ge){for(;Ge.left;)Ge=Ge.left;Xe={key:Ge.key,data:Ge.data},this.remove(Ge.key)}return Xe},h.prototype.next=function(Ge){var Xe=Ge;if(Xe)if(Xe.right)for(Xe=Xe.right;Xe&&Xe.left;)Xe=Xe.left;else for(Xe=Ge.parent;Xe&&Xe.right===Ge;)Ge=Xe,Xe=Xe.parent;return Xe},h.prototype.prev=function(Ge){var Xe=Ge;if(Xe)if(Xe.left)for(Xe=Xe.left;Xe&&Xe.right;)Xe=Xe.right;else for(Xe=Ge.parent;Xe&&Xe.left===Ge;)Ge=Xe,Xe=Xe.parent;return Xe},h.prototype.forEach=function(Ge){for(var Xe=this._root,en=[],Fn=!1,jn=0;!Fn;)Xe?(en.push(Xe),Xe=Xe.left):en.length>0?(Ge(Xe=en.pop(),jn++),Xe=Xe.right):Fn=!0;return this},h.prototype.range=function(Ge,Xe,en,Fn){for(var jn=[],$n=this._compare,sr=this._root;jn.length!==0||sr;)if(sr)jn.push(sr),sr=sr.left;else{if($n((sr=jn.pop()).key,Xe)>0)break;if($n(sr.key,Ge)>=0&&en.call(Fn,sr))return this;sr=sr.right}return this},h.prototype.keys=function(){for(var Ge=this._root,Xe=[],en=[],Fn=!1;!Fn;)Ge?(Xe.push(Ge),Ge=Ge.left):Xe.length>0?(Ge=Xe.pop(),en.push(Ge.key),Ge=Ge.right):Fn=!0;return en},h.prototype.values=function(){for(var Ge=this._root,Xe=[],en=[],Fn=!1;!Fn;)Ge?(Xe.push(Ge),Ge=Ge.left):Xe.length>0?(Ge=Xe.pop(),en.push(Ge.data),Ge=Ge.right):Fn=!0;return en},h.prototype.at=function(Ge){for(var Xe=this._root,en=[],Fn=!1,jn=0;!Fn;)if(Xe)en.push(Xe),Xe=Xe.left;else if(en.length>0){if(Xe=en.pop(),jn===Ge)return Xe;jn++,Xe=Xe.right}else Fn=!0;return null},h.prototype.load=function(Ge,Xe,en){if(Ge===void 0&&(Ge=[]),Xe===void 0&&(Xe=[]),en===void 0&&(en=!1),this._size!==0)throw new Error("bulk-load: tree is not empty");var Fn=Ge.length;return en&&C(Ge,Xe,0,Fn-1,this._compare),this._root=y(null,Ge,Xe,0,Fn),this._size=Fn,this},h.prototype.min=function(){var Ge=this.minNode(this._root);return Ge?Ge.key:null},h.prototype.max=function(){var Ge=this.maxNode(this._root);return Ge?Ge.key:null},h.prototype.isEmpty=function(){return this._root===null},_.size.get=function(){return this._size},h.createTree=function(Ge,Xe,en,Fn,jn){return new h(en,jn).load(Ge,Xe,Fn)},Object.defineProperties(h.prototype,_);var R=0,L=1,V=2,$=3,U=0,X=1,ee=2,de=3;function be(Ge,Xe,en){Xe===null?(Ge.inOut=!1,Ge.otherInOut=!0):(Ge.isSubject===Xe.isSubject?(Ge.inOut=!Xe.inOut,Ge.otherInOut=Xe.otherInOut):(Ge.inOut=!Xe.otherInOut,Ge.otherInOut=Xe.isVertical()?!Xe.inOut:Xe.inOut),Xe&&(Ge.prevInResult=!Ie(Xe,en)||Xe.isVertical()?Xe.prevInResult:Xe));var Fn=Ie(Ge,en);Ge.resultTransition=Fn?function(jn,$n){var sr,zr=!jn.inOut,wi=!jn.otherInOut;switch($n){case U:sr=zr&&wi;break;case X:sr=zr||wi;break;case de:sr=zr^wi;break;case ee:sr=jn.isSubject?zr&&!wi:wi&&!zr}return sr?1:-1}(Ge,en):0}function Ie(Ge,Xe){switch(Ge.type){case R:switch(Xe){case U:return!Ge.otherInOut;case X:return Ge.otherInOut;case ee:return Ge.isSubject&&Ge.otherInOut||!Ge.isSubject&&!Ge.otherInOut;case de:return!0}break;case V:return Xe===U||Xe===X;case $:return Xe===ee;case L:return!1}return!1}var Fe=function(Ge,Xe,en,Fn,jn){this.left=Xe,this.point=Ge,this.otherEvent=en,this.isSubject=Fn,this.type=jn||R,this.inOut=!1,this.otherInOut=!1,this.prevInResult=null,this.resultTransition=0,this.otherPos=-1,this.outputContourId=-1,this.isExteriorRing=!0},Be={inResult:{configurable:!0}};function pe(Ge,Xe){return Ge[0]===Xe[0]&&Ge[1]===Xe[1]}Fe.prototype.isBelow=function(Ge){var Xe=this.point,en=this.otherEvent.point;return this.left?(Xe[0]-Ge[0])*(en[1]-Ge[1])-(en[0]-Ge[0])*(Xe[1]-Ge[1])>0:(en[0]-Ge[0])*(Xe[1]-Ge[1])-(Xe[0]-Ge[0])*(en[1]-Ge[1])>0},Fe.prototype.isAbove=function(Ge){return!this.isBelow(Ge)},Fe.prototype.isVertical=function(){return this.point[0]===this.otherEvent.point[0]},Be.inResult.get=function(){return this.resultTransition!==0},Fe.prototype.clone=function(){var Ge=new Fe(this.point,this.left,this.otherEvent,this.isSubject,this.type);return Ge.contourId=this.contourId,Ge.resultTransition=this.resultTransition,Ge.prevInResult=this.prevInResult,Ge.isExteriorRing=this.isExteriorRing,Ge.inOut=this.inOut,Ge.otherInOut=this.otherInOut,Ge},Object.defineProperties(Fe.prototype,Be);var De=11102230246251565e-32,He=134217729,Ze=(3+8*De)*De;function xt(Ge,Xe,en,Fn,jn){var $n,sr,zr,wi,Si=Xe[0],ri=Fn[0],Zi=0,ls=0;ri>Si==ri>-Si?($n=Si,Si=Xe[++Zi]):($n=ri,ri=Fn[++ls]);var Ci=0;if(Zi<Ge&&ls<en)for(ri>Si==ri>-Si?(zr=$n-((sr=Si+$n)-Si),Si=Xe[++Zi]):(zr=$n-((sr=ri+$n)-ri),ri=Fn[++ls]),$n=sr,zr!==0&&(jn[Ci++]=zr);Zi<Ge&&ls<en;)ri>Si==ri>-Si?(zr=$n-((sr=$n+Si)-(wi=sr-$n))+(Si-wi),Si=Xe[++Zi]):(zr=$n-((sr=$n+ri)-(wi=sr-$n))+(ri-wi),ri=Fn[++ls]),$n=sr,zr!==0&&(jn[Ci++]=zr);for(;Zi<Ge;)zr=$n-((sr=$n+Si)-(wi=sr-$n))+(Si-wi),Si=Xe[++Zi],$n=sr,zr!==0&&(jn[Ci++]=zr);for(;ls<en;)zr=$n-((sr=$n+ri)-(wi=sr-$n))+(ri-wi),ri=Fn[++ls],$n=sr,zr!==0&&(jn[Ci++]=zr);return $n===0&&Ci!==0||(jn[Ci++]=$n),Ci}function ht(Ge){return new Float64Array(Ge)}var St=33306690738754716e-32,Rt=22204460492503146e-32,Yt=11093356479670487e-47,Tn=ht(4),hn=ht(8),Cn=ht(12),In=ht(16),Jt=ht(4);function yn(Ge,Xe,en){var Fn=function(jn,$n,sr,zr,wi,Si){var ri=($n-Si)*(sr-wi),Zi=(jn-wi)*(zr-Si),ls=ri-Zi;if(ri===0||Zi===0||ri>0!=Zi>0)return ls;var Ci=Math.abs(ri+Zi);return Math.abs(ls)>=St*Ci?ls:-function(Fs,_s,qi,Ks,Cs,us,vs){var Ji,li,es,Bs,Or,Ai,Es,Gs,Rs,fo,is,uo,Za,Xo,jo,Xa,ld,po,Eo=Fs-Cs,Jo=qi-Cs,wa=_s-us,aa=Ks-us;Tn[0]=(jo=(Gs=Eo-(Es=(Ai=He*Eo)-(Ai-Eo)))*(fo=aa-(Rs=(Ai=He*aa)-(Ai-aa)))-((Xo=Eo*aa)-Es*Rs-Gs*Rs-Es*fo))-((is=jo-(ld=(Gs=wa-(Es=(Ai=He*wa)-(Ai-wa)))*(fo=Jo-(Rs=(Ai=He*Jo)-(Ai-Jo)))-((Xa=wa*Jo)-Es*Rs-Gs*Rs-Es*fo)))+(Or=jo-is))+(Or-ld),Tn[1]=(Za=Xo-((uo=Xo+is)-(Or=uo-Xo))+(is-Or))-((is=Za-Xa)+(Or=Za-is))+(Or-Xa),Tn[2]=uo-((po=uo+is)-(Or=po-uo))+(is-Or),Tn[3]=po;var of=function(K6e,ek){for(var tk=ek[0],D3=1;D3<4;D3++)tk+=ek[D3];return tk}(0,Tn),$_=Rt*vs;if(of>=$_||-of>=$_||(Ji=Fs-(Eo+(Or=Fs-Eo))+(Or-Cs),es=qi-(Jo+(Or=qi-Jo))+(Or-Cs),li=_s-(wa+(Or=_s-wa))+(Or-us),Bs=Ks-(aa+(Or=Ks-aa))+(Or-us),Ji===0&&li===0&&es===0&&Bs===0)||($_=Yt*vs+Ze*Math.abs(of),(of+=Eo*Bs+aa*Ji-(wa*es+Jo*li))>=$_||-of>=$_))return of;Jt[0]=(jo=(Gs=Ji-(Es=(Ai=He*Ji)-(Ai-Ji)))*(fo=aa-(Rs=(Ai=He*aa)-(Ai-aa)))-((Xo=Ji*aa)-Es*Rs-Gs*Rs-Es*fo))-((is=jo-(ld=(Gs=li-(Es=(Ai=He*li)-(Ai-li)))*(fo=Jo-(Rs=(Ai=He*Jo)-(Ai-Jo)))-((Xa=li*Jo)-Es*Rs-Gs*Rs-Es*fo)))+(Or=jo-is))+(Or-ld),Jt[1]=(Za=Xo-((uo=Xo+is)-(Or=uo-Xo))+(is-Or))-((is=Za-Xa)+(Or=Za-is))+(Or-Xa),Jt[2]=uo-((po=uo+is)-(Or=po-uo))+(is-Or),Jt[3]=po;var E7=xt(4,Tn,4,Jt,hn);Jt[0]=(jo=(Gs=Eo-(Es=(Ai=He*Eo)-(Ai-Eo)))*(fo=Bs-(Rs=(Ai=He*Bs)-(Ai-Bs)))-((Xo=Eo*Bs)-Es*Rs-Gs*Rs-Es*fo))-((is=jo-(ld=(Gs=wa-(Es=(Ai=He*wa)-(Ai-wa)))*(fo=es-(Rs=(Ai=He*es)-(Ai-es)))-((Xa=wa*es)-Es*Rs-Gs*Rs-Es*fo)))+(Or=jo-is))+(Or-ld),Jt[1]=(Za=Xo-((uo=Xo+is)-(Or=uo-Xo))+(is-Or))-((is=Za-Xa)+(Or=Za-is))+(Or-Xa),Jt[2]=uo-((po=uo+is)-(Or=po-uo))+(is-Or),Jt[3]=po;var T7=xt(E7,hn,4,Jt,Cn);Jt[0]=(jo=(Gs=Ji-(Es=(Ai=He*Ji)-(Ai-Ji)))*(fo=Bs-(Rs=(Ai=He*Bs)-(Ai-Bs)))-((Xo=Ji*Bs)-Es*Rs-Gs*Rs-Es*fo))-((is=jo-(ld=(Gs=li-(Es=(Ai=He*li)-(Ai-li)))*(fo=es-(Rs=(Ai=He*es)-(Ai-es)))-((Xa=li*es)-Es*Rs-Gs*Rs-Es*fo)))+(Or=jo-is))+(Or-ld),Jt[1]=(Za=Xo-((uo=Xo+is)-(Or=uo-Xo))+(is-Or))-((is=Za-Xa)+(Or=Za-is))+(Or-Xa),Jt[2]=uo-((po=uo+is)-(Or=po-uo))+(is-Or),Jt[3]=po;var I7=xt(T7,Cn,4,Jt,In);return In[I7-1]}(jn,$n,sr,zr,wi,Si,Ci)}(Ge[0],Ge[1],Xe[0],Xe[1],en[0],en[1]);return Fn>0?-1:Fn<0?1:0}function Wt(Ge,Xe){var en=Ge.point,Fn=Xe.point;return en[0]>Fn[0]?1:en[0]<Fn[0]?-1:en[1]!==Fn[1]?en[1]>Fn[1]?1:-1:function(jn,$n,sr,zr){return jn.left!==$n.left?jn.left?1:-1:yn(sr,jn.otherEvent.point,$n.otherEvent.point)!==0?jn.isBelow($n.otherEvent.point)?-1:1:!jn.isSubject&&$n.isSubject?1:-1}(Ge,Xe,en)}function Xt(Ge,Xe,en){var Fn=new Fe(Xe,!1,Ge,Ge.isSubject),jn=new Fe(Xe,!0,Ge.otherEvent,Ge.isSubject);return pe(Ge.point,Ge.otherEvent.point)&&console.warn("what is that, a collapsed segment?",Ge),Fn.contourId=jn.contourId=Ge.contourId,Wt(jn,Ge.otherEvent)>0&&(Ge.otherEvent.left=!0,jn.left=!1),Ge.otherEvent.otherEvent=jn,Ge.otherEvent=Fn,en.push(jn),en.push(Fn),en}function Ln(Ge,Xe){return Ge[0]*Xe[1]-Ge[1]*Xe[0]}function Dn(Ge,Xe){return Ge[0]*Xe[0]+Ge[1]*Xe[1]}function Cr(Ge,Xe,en){var Fn=function(wi,Si,ri,Zi,ls){var Ci=[Si[0]-wi[0],Si[1]-wi[1]],Fs=[Zi[0]-ri[0],Zi[1]-ri[1]];function _s(Ai,Es,Gs){return[Ai[0]+Es*Gs[0],Ai[1]+Es*Gs[1]]}var qi=[ri[0]-wi[0],ri[1]-wi[1]],Ks=Ln(Ci,Fs),Cs=Ks*Ks,us=Dn(Ci,Ci);if(Cs>0){var vs=Ln(qi,Fs)/Ks;if(vs<0||vs>1)return null;var Ji=Ln(qi,Ci)/Ks;return Ji<0||Ji>1?null:vs===0||vs===1?[_s(wi,vs,Ci)]:Ji===0||Ji===1?[_s(ri,Ji,Fs)]:[_s(wi,vs,Ci)]}if((Cs=(Ks=Ln(qi,Ci))*Ks)>0)return null;var li=Dn(Ci,qi)/us,es=li+Dn(Ci,Fs)/us,Bs=Math.min(li,es),Or=Math.max(li,es);return Bs<=1&&Or>=0?Bs===1?[_s(wi,Bs>0?Bs:0,Ci)]:Or===0?[_s(wi,Or<1?Or:1,Ci)]:[_s(wi,Bs>0?Bs:0,Ci),_s(wi,Or<1?Or:1,Ci)]:null}(Ge.point,Ge.otherEvent.point,Xe.point,Xe.otherEvent.point),jn=Fn?Fn.length:0;if(jn===0||jn===1&&(pe(Ge.point,Xe.point)||pe(Ge.otherEvent.point,Xe.otherEvent.point))||jn===2&&Ge.isSubject===Xe.isSubject)return 0;if(jn===1)return pe(Ge.point,Fn[0])||pe(Ge.otherEvent.point,Fn[0])||Xt(Ge,Fn[0],en),pe(Xe.point,Fn[0])||pe(Xe.otherEvent.point,Fn[0])||Xt(Xe,Fn[0],en),1;var $n=[],sr=!1,zr=!1;return pe(Ge.point,Xe.point)?sr=!0:Wt(Ge,Xe)===1?$n.push(Xe,Ge):$n.push(Ge,Xe),pe(Ge.otherEvent.point,Xe.otherEvent.point)?zr=!0:Wt(Ge.otherEvent,Xe.otherEvent)===1?$n.push(Xe.otherEvent,Ge.otherEvent):$n.push(Ge.otherEvent,Xe.otherEvent),sr&&zr||sr?(Xe.type=L,Ge.type=Xe.inOut===Ge.inOut?V:$,sr&&!zr&&Xt($n[1].otherEvent,$n[0].point,en),2):zr?(Xt($n[0],$n[1].point,en),3):$n[0]!==$n[3].otherEvent?(Xt($n[0],$n[1].point,en),Xt($n[1],$n[2].point,en),3):(Xt($n[0],$n[1].point,en),Xt($n[3].otherEvent,$n[2].point,en),3)}function lr(Ge,Xe){if(Ge===Xe)return 0;if(yn(Ge.point,Ge.otherEvent.point,Xe.point)!==0||yn(Ge.point,Ge.otherEvent.point,Xe.otherEvent.point)!==0)return pe(Ge.point,Xe.point)?Ge.isBelow(Xe.otherEvent.point)?-1:1:Ge.point[0]===Xe.point[0]?Ge.point[1]<Xe.point[1]?-1:1:Wt(Ge,Xe)===1?Xe.isAbove(Ge.point)?-1:1:Ge.isBelow(Xe.point)?-1:1;if(Ge.isSubject!==Xe.isSubject)return Ge.isSubject?-1:1;var en=Ge.point,Fn=Xe.point;return en[0]===Fn[0]&&en[1]===Fn[1]?(en=Ge.otherEvent.point)[0]===(Fn=Xe.otherEvent.point)[0]&&en[1]===Fn[1]?0:Ge.contourId>Xe.contourId?1:-1:Wt(Ge,Xe)===1?1:-1}var Hn=function(){this.points=[],this.holeIds=[],this.holeOf=null,this.depth=null};function An(Ge,Xe,en,Fn){var jn,$n=Ge+1,sr=Xe[Ge].point,zr=Xe.length;for($n<zr&&(jn=Xe[$n].point);$n<zr&&jn[0]===sr[0]&&jn[1]===sr[1];){if(!en[$n])return $n;++$n<zr&&(jn=Xe[$n].point)}for($n=Ge-1;en[$n]&&$n>Fn;)$n--;return $n}Hn.prototype.isExterior=function(){return this.holeOf==null};var qr=ur,ar=ur;function ur(Ge,Xe){if(!(this instanceof ur))return new ur(Ge,Xe);if(this.data=Ge||[],this.length=this.data.length,this.compare=Xe||Br,this.length>0)for(var en=(this.length>>1)-1;en>=0;en--)this._down(en)}function Br(Ge,Xe){return Ge<Xe?-1:Ge>Xe?1:0}ur.prototype={push:function(Ge){this.data.push(Ge),this.length++,this._up(this.length-1)},pop:function(){if(this.length!==0){var Ge=this.data[0];return this.length--,this.length>0&&(this.data[0]=this.data[this.length],this._down(0)),this.data.pop(),Ge}},peek:function(){return this.data[0]},_up:function(Ge){for(var Xe=this.data,en=this.compare,Fn=Xe[Ge];Ge>0;){var jn=Ge-1>>1,$n=Xe[jn];if(en(Fn,$n)>=0)break;Xe[Ge]=$n,Ge=jn}Xe[Ge]=Fn},_down:function(Ge){for(var Xe=this.data,en=this.compare,Fn=this.length>>1,jn=Xe[Ge];Ge<Fn;){var $n=1+(Ge<<1),sr=$n+1,zr=Xe[$n];if(sr<this.length&&en(Xe[sr],zr)<0&&($n=sr,zr=Xe[sr]),en(zr,jn)>=0)break;Xe[Ge]=zr,Ge=$n}Xe[Ge]=jn}},qr.default=ar;var Qr=Math.max,Jr=Math.min,di=0;function ni(Ge,Xe,en,Fn,jn,$n){var sr,zr,wi,Si,ri,Zi;for(sr=0,zr=Ge.length-1;sr<zr;sr++)if(Si=Ge[sr+1],ri=new Fe(wi=Ge[sr],!1,void 0,Xe),Zi=new Fe(Si,!1,ri,Xe),ri.otherEvent=Zi,wi[0]!==Si[0]||wi[1]!==Si[1]){ri.contourId=Zi.contourId=en,$n||(ri.isExteriorRing=!1,Zi.isExteriorRing=!1),Wt(ri,Zi)>0?Zi.left=!0:ri.left=!0;var ls=wi[0],Ci=wi[1];jn[0]=Jr(jn[0],ls),jn[1]=Jr(jn[1],Ci),jn[2]=Qr(jn[2],ls),jn[3]=Qr(jn[3],Ci),Fn.push(ri),Fn.push(Zi)}}var hi=[];function Gi(Ge,Xe,en){typeof Ge[0][0][0]=="number"&&(Ge=[Ge]),typeof Xe[0][0][0]=="number"&&(Xe=[Xe]);var Fn=function(Ci,Fs,_s){var qi=null;return Ci.length*Fs.length==0&&(_s===U?qi=hi:_s===ee?qi=Ci:_s!==X&&_s!==de||(qi=Ci.length===0?Fs:Ci)),qi}(Ge,Xe,en);if(Fn)return Fn===hi?null:Fn;var jn=[1/0,1/0,-1/0,-1/0],$n=[1/0,1/0,-1/0,-1/0],sr=function(Ci,Fs,_s,qi,Ks){var Cs,us,vs,Ji,li,es,Bs=new qr(null,Wt);for(vs=0,Ji=Ci.length;vs<Ji;vs++)for(li=0,es=(Cs=Ci[vs]).length;li<es;li++)(us=li===0)&&di++,ni(Cs[li],!0,di,Bs,_s,us);for(vs=0,Ji=Fs.length;vs<Ji;vs++)for(li=0,es=(Cs=Fs[vs]).length;li<es;li++)us=li===0,Ks===ee&&(us=!1),us&&di++,ni(Cs[li],!1,di,Bs,qi,us);return Bs}(Ge,Xe,jn,$n,en);if(Fn=function(Ci,Fs,_s,qi,Ks){var Cs=null;return(_s[0]>qi[2]||qi[0]>_s[2]||_s[1]>qi[3]||qi[1]>_s[3])&&(Ks===U?Cs=hi:Ks===ee?Cs=Ci:Ks!==X&&Ks!==de||(Cs=Ci.concat(Fs))),Cs}(Ge,Xe,jn,$n,en))return Fn===hi?null:Fn;for(var zr=function(Ci){var Fs,_s,qi=function(vs){var Ji,li,es,Bs,Or=[];for(li=0,es=vs.length;li<es;li++)((Ji=vs[li]).left&&Ji.inResult||!Ji.left&&Ji.otherEvent.inResult)&&Or.push(Ji);for(var Ai=!1;!Ai;)for(Ai=!0,li=0,es=Or.length;li<es;li++)li+1<es&&Wt(Or[li],Or[li+1])===1&&(Bs=Or[li],Or[li]=Or[li+1],Or[li+1]=Bs,Ai=!1);for(li=0,es=Or.length;li<es;li++)(Ji=Or[li]).otherPos=li;for(li=0,es=Or.length;li<es;li++)(Ji=Or[li]).left||(Bs=Ji.otherPos,Ji.otherPos=Ji.otherEvent.otherPos,Ji.otherEvent.otherPos=Bs);return Or}(Ci),Ks={},Cs=[],us=function(){if(!Ks[Fs]){var vs=Cs.length,Ji=function(Or,Ai,Es){var Gs=new Hn;if(Or.prevInResult!=null){var Rs=Or.prevInResult,fo=Rs.outputContourId;if(Rs.resultTransition>0){var is=Ai[fo];if(is.holeOf!=null){var uo=is.holeOf;Ai[uo].holeIds.push(Es),Gs.holeOf=uo,Gs.depth=Ai[fo].depth}else Ai[fo].holeIds.push(Es),Gs.holeOf=fo,Gs.depth=Ai[fo].depth+1}else Gs.holeOf=null,Gs.depth=Ai[fo].depth}else Gs.holeOf=null,Gs.depth=0;return Gs}(qi[Fs],Cs,vs),li=function(Or){Ks[Or]=!0,Or<qi.length&&qi[Or]&&(qi[Or].outputContourId=vs)},es=Fs,Bs=Fs;for(Ji.points.push(qi[Fs].point);li(es),li(es=qi[es].otherPos),Ji.points.push(qi[es].point),!((es=An(es,qi,Ks,Bs))==Bs||es>=qi.length)&&qi[es];);Cs.push(Ji)}};for(Fs=0,_s=qi.length;Fs<_s;Fs++)us();return Cs}(function(Ci,Fs,_s,qi,Ks,Cs){for(var us,vs,Ji,li=new h(lr),es=[],Bs=Math.min(qi[2],Ks[2]);Ci.length!==0;){var Or=Ci.pop();if(es.push(Or),Cs===U&&Or.point[0]>Bs||Cs===ee&&Or.point[0]>qi[2])break;if(Or.left){vs=us=li.insert(Or),us=us!==(Ji=li.minNode())?li.prev(us):null,vs=li.next(vs);var Ai=us?us.key:null;if(be(Or,Ai,Cs),vs&&Cr(Or,vs.key,Ci)===2&&(be(Or,Ai,Cs),be(vs.key,Or,Cs)),us&&Cr(us.key,Or,Ci)===2){var Es=us;be(Ai,(Es=Es!==Ji?li.prev(Es):null)?Es.key:null,Cs),be(Or,Ai,Cs)}}else vs=us=li.find(Or=Or.otherEvent),us&&vs&&(us=us!==Ji?li.prev(us):null,vs=li.next(vs),li.remove(Or),vs&&us&&Cr(us.key,vs.key,Ci))}return es}(sr,0,0,jn,$n,en)),wi=[],Si=0;Si<zr.length;Si++){var ri=zr[Si];if(ri.isExterior()){for(var Zi=[ri.points],ls=0;ls<ri.holeIds.length;ls++)Zi.push(zr[ri.holeIds[ls]].points);wi.push(Zi)}}return wi}var gs={UNION:X,DIFFERENCE:ee,INTERSECTION:U,XOR:de};o.diff=function(Ge,Xe){return Gi(Ge,Xe,ee)},o.intersection=function(Ge,Xe){return Gi(Ge,Xe,U)},o.operations=gs,o.union=function(Ge,Xe){return Gi(Ge,Xe,X)},o.xor=function(Ge,Xe){return Gi(Ge,Xe,de)},Object.defineProperty(o,"__esModule",{value:!0})})(t)}(0,jC.exports)),jC.exports);/**
 * martinez v0.7.4
 * Martinez polygon clipping algorithm, does boolean operation on polygons (multipolygons, polygons with holes etc): intersection, union, difference, xor
 *
 * @author Alex Milevski <info@w8r.name>
 * @license MIT
 * @preserve
 */function _1(a,t,o,c){const h=[],_=c===0?(y,C,R,L,V,$)=>{y.push(new Rn($,R+($-C)/(L-C)*(V-R)))}:(y,C,R,L,V,$)=>{y.push(new Rn(C+($-R)/(V-R)*(L-C),$))};for(const y of a){const C=[];for(const R of y){if(R.length<=2)continue;const L=[];for(let U=0;U<R.length-1;U++){const X=R[U].x,ee=R[U].y,de=R[U+1].x,be=R[U+1].y,Ie=c===0?X:ee,Fe=c===0?de:be;Ie<t?Fe>t&&_(L,X,ee,de,be,t):Ie>o?Fe<o&&_(L,X,ee,de,be,o):L.push(R[U]),Fe<t&&Ie>=t&&_(L,X,ee,de,be,t),Fe>o&&Ie<=o&&_(L,X,ee,de,be,o)}let V=R[R.length-1];const $=c===0?V.x:V.y;$>=t&&$<=o&&L.push(V),L.length&&(V=L[L.length-1],L[0].x===V.x&&L[0].y===V.y||L.push(L[0]),C.push(L))}C.length&&h.push(C)}return h}function FN(a,t){const o=Rw(a),c=Rw([t]),h=GC.intersection(o,c);return h==null?[]:qC(h)}function BN(a,t){let c=Rw(a,65536);for(;t.valid();t.next()){const[h,_]=t.get(),y=h.x*65536,C=h.y*65536,R=_.x*65536,L=_.y*65536,V=R-y,$=L-C,U=Math.hypot(V,$),X=Math.trunc($/U*3),ee=-Math.trunc(V/U*3);c=GC.diff(c,[[[y,C],[R,L],[R+X,L+ee],[y+X,C+ee],[y,C]]])}return qC(c,1/65536)}function Rw(a,t=1){return[a.map(o=>o.map(c=>[c.x*t,c.y*t]))]}function qC(a,t=1){return a.map(o=>o.map((c,h)=>{const _=c.map(y=>new Rn(y[0]*t,y[1]*t).round());return h>0&&_.reverse(),_}))}class Pw{constructor(t,o){this.layoutVertexArray=new ec,this.indexArray=new Ho,this.lineIndexArray=new ed,this.triangleSegments=new Us,this.lineSegments=new Us,this.programConfigurations=new f(t.layers,{zoom:t.zoom,lut:t.lut}),this.uploaded=!1,o&&(this.elevatedLayoutVertexArray=new Jc)}update(t,o,c,h,_,y,C,R){this.programConfigurations.updatePaintArrays(t,o,_,c,h,y,C,R)}isEmpty(){return this.layoutVertexArray.length===0}needsUpload(){return this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,SN.members),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.lineIndexBuffer=t.createIndexBuffer(this.lineIndexArray),this.elevatedLayoutVertexArray&&this.elevatedLayoutVertexArray.length>0&&(this.elevatedLayoutVertexBuffer=t.createVertexBuffer(this.elevatedLayoutVertexArray,CN.members))),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.elevatedLayoutVertexBuffer&&this.elevatedLayoutVertexBuffer.destroy(),this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.lineIndexBuffer.destroy(),this.programConfigurations.destroy(),this.triangleSegments.destroy(),this.lineSegments.destroy())}populatePaintArrays(t,o,c,h,_,y,C){this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,o,c,h,_,y,void 0,C)}}class Lw{constructor(t){this.zoom=t.zoom,this.pixelRatio=t.pixelRatio,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(o=>o.fqid),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.lut=t.lut,this.bufferData=new Pw(t,!1),this.elevationBufferData=new Pw(t,!0),this.stateDependentLayerIds=this.layers.filter(o=>o.isStateDependent()).map(o=>o.id),this.projection=t.projection,this.elevationMode=this.layers[0].layout.get("fill-elevation-reference"),this.sourceLayerIndex=t.sourceLayerIndex,this.worldview=t.worldview}updateFootprints(t,o){}populate(t,o,c,h){this.hasPattern=Mw("fill",this.layers,this.pixelRatio,o);const _=this.layers[0].layout.get("fill-sort-key"),y=[];for(const{feature:C,id:R,index:L,sourceLayerIndex:V}of t){const $=this.layers[0]._featureFilter.needGeometry,U=Zn(C,$);if(!this.layers[0]._featureFilter.filter(new Qi(this.zoom,{worldview:this.worldview}),U,c))continue;const X=_?_.evaluate(U,{},c,o.availableImages):void 0,ee={id:R,properties:C.properties,type:C.type,sourceLayerIndex:V,index:L,geometry:$?U.geometry:tr(C,c,h),patterns:{},sortKey:X};y.push(ee)}_&&y.sort((C,R)=>C.sortKey-R.sortKey);for(const C of y){const{geometry:R,index:L,sourceLayerIndex:V}=C;if(this.hasPattern){const $=Aw("fill",this.layers,C,this.zoom,this.pixelRatio,o);this.patternFeatures.push($)}else this.addFeature(C,R,L,c,{},o.availableImages,o.brightness,o.elevationFeatures);o.featureIndex.insert(t[L].feature,R,L,V,this.index)}}update(t,o,c,h,_,y,C){this.bufferData.update(t,o,c,h,_,y,C,this.worldview),this.elevationBufferData.update(t,o,c,h,_,y,C,this.worldview),this.elevatedStructures&&this.elevatedStructures.update(t,o,c,h,_,y,C,this.worldview)}addFeatures(t,o,c,h,_,y){for(const C of this.patternFeatures)this.addFeature(C,C.geometry,C.index,o,c,h,y,t.elevationFeatures)}isEmpty(){return this.bufferData.isEmpty()&&this.elevationBufferData.isEmpty()}uploadPending(){return!this.uploaded||this.bufferData.needsUpload()||this.elevationBufferData.needsUpload()}upload(t){this.bufferData.upload(t),this.elevationBufferData.upload(t),this.elevatedStructures&&this.elevatedStructures.upload(t)}destroy(){this.bufferData.destroy(),this.elevationBufferData.destroy(),this.elevatedStructures&&this.elevatedStructures.destroy()}addFeature(t,o,c,h,_,y=[],C,R){const L=g1(o,500);this.elevationMode!=="none"?this.addElevatedRoadFeature(t,L,h,c,R):this.addGeometry(L,this.bufferData),this.bufferData.populatePaintArrays(t,c,_,y,h,C,this.worldview),this.elevationBufferData.populatePaintArrays(t,c,_,y,h,C,this.worldview)}getUnevaluatedPortalGraph(){return this.elevatedStructures?this.elevatedStructures.unevaluatedPortals:void 0}getElevationPolygons(){return this.elevatedStructures?this.elevatedStructures.portalPolygons:void 0}setEvaluatedPortalGraph(t,o,c,h,_){this.elevatedStructures&&(this.elevatedStructures.construct(t),this.elevatedStructures.populatePaintArrays(o,c,h,_,this.worldview))}addElevatedRoadFeature(t,o,c,h,_){const y=new Array,C=hl.getElevationFeature(t,_);if(!C)return void this.addGeometry(o,this.bufferData);{const L=this.clipPolygonsToTile(o,1);L.length>0&&y.push({polygons:L,elevationFeature:C,elevationTileID:c})}const R={guardRailEnabled:this.layers[0].layout.get("fill-construct-bridge-guard-rail").evaluate(t,{},c),featureIndex:h};for(const L of y)if(L.elevationFeature){if(this.elevationMode==="hd-road-base"){this.elevatedStructures||(this.elevatedStructures=new Rl(L.elevationTileID,this.layers,this.zoom,this.lut));const $=L.elevationFeature.isTunnel();let U=0;t.properties.hasOwnProperty(xs)&&(U=+t.properties[xs]);for(const X of L.polygons)this.elevatedStructures.addPortalCandidates(L.elevationFeature.id,X,$,L.elevationFeature,U)}L.elevationFeature.constantHeight==null&&(L.polygons=this.prepareElevatedPolygons(L.polygons,L.elevationFeature,L.elevationTileID));const V=new Ql(c,L.elevationTileID);this.addElevatedGeometry(L.polygons,V,L.elevationFeature,this.elevationMode==="hd-road-base"?0:.05,h,R)}}addElevatedGeometry(t,o,c,h,_,y){const C={elevation:c,elevationSampler:o,bias:h,index:_,featureInfo:y},[R,L]=this.addGeometry(t,this.elevationBufferData,C);this.elevationBufferData.heightRange==null?this.elevationBufferData.heightRange={min:R,max:L}:(this.elevationBufferData.heightRange.min=Math.min(this.elevationBufferData.heightRange.min,R),this.elevationBufferData.heightRange.max=Math.max(this.elevationBufferData.heightRange.max,L))}addGeometry(t,o,c){let h=Number.POSITIVE_INFINITY,_=Number.NEGATIVE_INFINITY,y=null;c&&(y=c.elevationSampler.constantElevation(c.elevation,c.bias),y!=null&&(h=y,_=y));const C=(R,L,V)=>{if(c!=null)if(L.push(R),y!=null)o.elevatedLayoutVertexArray.emplaceBack(y),V.push(y);else{const $=c.elevationSampler.pointElevation(R,c.elevation,c.bias);o.elevatedLayoutVertexArray.emplaceBack($),V.push($),h=Math.min(h,$),_=Math.max(_,$)}};for(const R of t){let L=0;for(const Be of R)L+=Be.length;const V=o.triangleSegments.prepareSegment(L,o.layoutVertexArray,o.indexArray),$=V.vertexLength,U=[],X=[],ee=[],de=[],be=[],Ie=o.layoutVertexArray.length;for(const Be of R){if(Be.length===0)continue;Be!==R[0]&&X.push(U.length/2);const pe=o.lineSegments.prepareSegment(Be.length,o.layoutVertexArray,o.lineIndexArray),De=pe.vertexLength;c&&be.push(o.layoutVertexArray.length-Ie),C(Be[0],ee,de),o.layoutVertexArray.emplaceBack(Be[0].x,Be[0].y),o.lineIndexArray.emplaceBack(De+Be.length-1,De),U.push(Be[0].x),U.push(Be[0].y);for(let He=1;He<Be.length;He++)C(Be[He],ee,de),o.layoutVertexArray.emplaceBack(Be[He].x,Be[He].y),o.lineIndexArray.emplaceBack(De+He-1,De+He),U.push(Be[He].x),U.push(Be[He].y);pe.vertexLength+=Be.length,pe.primitiveLength+=Be.length}const Fe=u_(U,X);for(let Be=0;Be<Fe.length;Be+=3)o.indexArray.emplaceBack($+Fe[Be],$+Fe[Be+1],$+Fe[Be+2]);if(Fe.length>0&&c&&this.elevationMode==="hd-road-base"){const Be=c.elevation.isTunnel(),pe=c.elevation.safeArea,De=this.elevatedStructures.addVertices(ee,de);this.elevatedStructures.addTriangles(Fe,De,Be);const He=be.length;if(He>0){for(let Ze=0;Ze<He-1;Ze++)this.elevatedStructures.addRenderableRing(c.index,be[Ze]+De,be[Ze+1]-be[Ze],Be,pe,c.featureInfo);this.elevatedStructures.addRenderableRing(c.index,be[He-1]+De,ee.length-be[He-1],Be,pe,c.featureInfo)}}V.vertexLength+=L,V.primitiveLength+=Fe.length/3}return[h,_]}prepareElevatedPolygons(t,o,c){const h=1/Kt(c),_=[];for(const y of t){const C=BN(y,new Ya(o,h));_.push(...C)}return _}clipPolygonsToTile(t,o){const c=-o,h=-o,_=Pn+o,y=Pn+o;let C=0;const R=[],L=[];for(;C<t.length;C++){const U=t[C],X=ya(U);(X.min.x>=c&&X.max.x<=_&&X.min.y>=h&&X.max.y<=y?R:L).push(U)}if(R.length===t.length)return t;const V=[new Rn(c,h),new Rn(_,h),new Rn(_,y),new Rn(c,y),new Rn(c,h)],$=R;for(const U of L)$.push(...FN(U,V));return $}}let WC,KC,YC,ZC;Qn(Lw,"FillBucket",{omit:["layers","patternFeatures"]}),Qn(Pw,"FillBufferData"),Qn(Rl,"ElevatedStructures");class Ow{constructor(t,o,c,h){if(this.triangleCount=o.length/3,this.min=new Rn(0,0),this.max=new Rn(0,0),this.xScale=0,this.yScale=0,this.cellsX=0,this.cellsY=0,this.cells=[],this.payload=[],this.triangleCount===0||t.length===0)return;const[_,y]=[t[0].clone(),t[0].clone()];for(let $=1;$<t.length;++$){const U=t[$];_.x=Math.min(_.x,U.x),_.y=Math.min(_.y,U.y),y.x=Math.max(y.x,U.x),y.y=Math.max(y.y,U.y)}if(h){const $=Math.ceil(Math.max(y.x-_.x,y.y-_.y)/h);c=Math.max(c,$)}if(c===0)return;this.min=_,this.max=y;const C=this.max.sub(this.min);C.x=Math.max(C.x,1),C.y=Math.max(C.y,1);const R=Math.max(C.x,C.y)/c;this.cellsX=Math.max(1,Math.ceil(C.x/R)),this.cellsY=Math.max(1,Math.ceil(C.y/R)),this.xScale=1/R,this.yScale=1/R;const L=[];for(let $=0;$<this.triangleCount;$++){const U=t[o[3*$+0]].sub(this.min),X=t[o[3*$+1]].sub(this.min),ee=t[o[3*$+2]].sub(this.min),de=od(Math.floor(Math.min(U.x,X.x,ee.x)),this.xScale,this.cellsX),be=od(Math.floor(Math.max(U.x,X.x,ee.x)),this.xScale,this.cellsX),Ie=od(Math.floor(Math.min(U.y,X.y,ee.y)),this.yScale,this.cellsY),Fe=od(Math.floor(Math.max(U.y,X.y,ee.y)),this.yScale,this.cellsY),Be=new Rn(0,0),pe=new Rn(0,0),De=new Rn(0,0),He=new Rn(0,0);for(let Ze=Ie;Ze<=Fe;++Ze){Be.y=pe.y=Ze*R,De.y=He.y=(Ze+1)*R;for(let xt=de;xt<=be;++xt)Be.x=De.x=xt*R,pe.x=He.x=(xt+1)*R,(bw(U,X,ee,Be,pe,He)||bw(U,X,ee,Be,He,De))&&L.push({cellIdx:Ze*this.cellsX+xt,triIdx:$})}}if(L.length===0)return;L.sort(($,U)=>$.cellIdx-U.cellIdx||$.triIdx-U.triIdx);let V=0;for(;V<L.length;){const $=L[V].cellIdx,U={start:this.payload.length,len:0};for(;V<L.length&&L[V].cellIdx===$;)++U.len,this.payload.push(L[V++].triIdx);this.cells[$]=U}}_lazyInitLookup(){this.lookup||(this.lookup=new Uint8Array(Math.ceil(this.triangleCount/8))),this.lookup.fill(0)}queryPoint(t,o){if(this.triangleCount===0||this.cells.length===0||t.x>this.max.x||this.min.x>t.x||t.y>this.max.y||this.min.y>t.y)return;const c=od(t.x-this.min.x,this.xScale,this.cellsX),h=od(t.y-this.min.y,this.yScale,this.cellsY),_=this.cells[h*this.cellsX+c];if(_){this._lazyInitLookup();for(let y=0;y<_.len;y++){const C=this.payload[_.start+y],R=Math.floor(C/8),L=1<<C%8;if(!(this.lookup[R]&L)&&(this.lookup[R]|=L,o.push(C),o.length===this.triangleCount))return}}}query(t,o,c){if(this.triangleCount===0||this.cells.length===0||t.x>this.max.x||this.min.x>o.x||t.y>this.max.y||this.min.y>o.y)return;this._lazyInitLookup();const h=od(t.x-this.min.x,this.xScale,this.cellsX),_=od(o.x-this.min.x,this.xScale,this.cellsX),y=od(t.y-this.min.y,this.yScale,this.cellsY),C=od(o.y-this.min.y,this.yScale,this.cellsY);for(let R=y;R<=C;R++)for(let L=h;L<=_;L++){const V=this.cells[R*this.cellsX+L];if(V)for(let $=0;$<V.len;$++){const U=this.payload[V.start+$],X=Math.floor(U/8),ee=1<<U%8;if(!(this.lookup[X]&ee)&&(this.lookup[X]|=ee,c.push(U),c.length===this.triangleCount))return}}}}function od(a,t,o){return Math.max(0,Math.min(o-1,Math.floor(a*t)))}Qn(Ow,"TriangleGridIndex");class XC{constructor(t){this.zoom=t.zoom,this.layers=t.layers,this.layerIds=this.layers.map(o=>o.fqid),this.index=t.index,this.hasPattern=!1,this.stateDependentLayerIds=this.layers.filter(o=>o.isStateDependent()).map(o=>o.id),this.footprints=[],this.worldview=t.worldview}updateFootprints(t,o){for(const c of this.footprints)o.push({footprint:c,id:t})}populate(t,o,c,h){const _=[];for(const{feature:y,id:C,index:R,sourceLayerIndex:L}of t){const V=this.layers[0]._featureFilter.needGeometry,$=Zn(y,V);if(!this.layers[0]._featureFilter.filter(new Qi(this.zoom,{worldview:this.worldview}),$,c))continue;const U={id:C,properties:y.properties,type:y.type,sourceLayerIndex:L,index:R,geometry:V?$.geometry:tr(y,c,h),patterns:{}};_.push(U)}for(const y of _){const{geometry:C,index:R,sourceLayerIndex:L}=y;this.addFeature(y,C,R,c,{},o.availableImages,o.brightness),o.featureIndex.insert(t[R].feature,C,R,L,this.index)}}isEmpty(){return this.footprints.length===0}uploadPending(){return!1}upload(t){}update(t,o,c,h,_,y,C){}destroy(){}addFeature(t,o,c,h,_,y=[],C){for(const R of g1(o,2)){const L=[],V=[],$=[],U=new Rn(1/0,1/0),X=new Rn(-1/0,-1/0);for(const be of R)if(be.length!==0){be!==R[0]&&$.push(V.length/2);for(let Ie=0;Ie<be.length;Ie++)V.push(be[Ie].x),V.push(be[Ie].y),L.push(be[Ie]),U.x=Math.min(U.x,be[Ie].x),U.y=Math.min(U.y,be[Ie].y),X.x=Math.max(X.x,be[Ie].x),X.y=Math.max(X.y,be[Ie].y)}const ee=u_(V,$),de=new Ow(L,ee,8,256);this.footprints.push({vertices:L,indices:ee,grid:de,min:U,max:X})}}}Qn(XC,"ClipBucket",{omit:["layers"]});const VN=zi([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),$N=zi([{name:"a_pos_end",components:4,type:"Int16"},{name:"a_angular_offset_factor",components:1,type:"Int16"}]),HN=zi([{name:"a_centroid_pos",components:2,type:"Uint16"}]),UN=zi([{name:"a_join_normal_inside",components:3,type:"Int16"}]),jN=zi([{name:"a_hidden_by_landmark",components:1,type:"Uint8"}]),GN=zi([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),{members:qN}=VN,v1=Number.MAX_SAFE_INTEGER;function JC(a,t,o,c){return a.order<t||a.order===v1||!(a.clipMask&o)||function(h,_){return _.length!==0&&_.find(y=>y===h)===void 0}(c,a.clipScope)}function y1(a,t){return a.x-t.x||a.y-t.y}function QC(a,t){return y1(a.min,t.min)===0&&y1(a.max,t.max)===0}function Dw(a,t){return!(a.min.x>t.max.x||a.max.x<t.min.x||a.min.y>t.max.y||a.max.y<t.min.y)}function zw(a,t){if(a.length!==t.length)return!1;for(let o=0;o<a.length;o++)if(a[o].sourceId!==t[o].sourceId||!QC(a[o],t[o])||a[o].order!==t[o].order||a[o].clipMask!==t[o].clipMask||!Ri(a[o].clipScope,t[o].clipScope))return!1;return!0}function eE(a,t,o){const c=1/Pn,h=1/(1<<o.canonical.z),_=(t.x*c+o.canonical.x)*h+o.wrap,y=(t.y*c+o.canonical.y)*h;return{min:new Rn((a.x*c+o.canonical.x)*h+o.wrap,(a.y*c+o.canonical.y)*h),max:new Rn(_,y)}}function WN(a,t,o){const c=1<<o.canonical.z,h=((t.x-o.wrap)*c-o.canonical.x)*Pn,_=(t.y*c-o.canonical.y)*Pn;return{min:new Rn(((a.x-o.wrap)*c-o.canonical.x)*Pn,(a.y*c-o.canonical.y)*Pn),max:new Rn(h,_)}}function tE(a,t,o,c,h,_,y){const C=a.indices,R=a.vertices,L=[];for(let V=c;V<c+h;V+=3){const $=t[o[V+0]+_],U=t[o[V+1]+_],X=t[o[V+2]+_],ee=Math.min($.x,U.x,X.x),de=Math.max($.x,U.x,X.x),be=Math.min($.y,U.y,X.y),Ie=Math.max($.y,U.y,X.y);L.length=0,a.grid.query(new Rn(ee,be),new Rn(de,Ie),L);for(let Fe=0;Fe<L.length;Fe++){const Be=L[Fe];if(bw(R[C[3*Be+0]],R[C[3*Be+1]],R[C[3*Be+2]],$,U,X,y))return!0}}return!1}function nE(a,t,o,c){if(!a||!o)return!1;let h=a.vertices;if(!t.canonical.equals(c.canonical)||t.wrap!==c.wrap){if(o.vertices.length<a.vertices.length)return nE(o,c,a,t);const _=t.canonical,y=c.canonical,C=Math.pow(2,y.z-_.z);h=a.vertices.map(R=>new Rn((R.x+_.x*Pn)*C-y.x*Pn,(R.y+_.y*Pn)*C-y.y*Pn))}return tE(o,h,a.indices,0,a.indices.length,0,0)}function rE(a,t,o,c){const h=Math.pow(2,c.z-o.z);return new Rn((a+o.x*Pn)*h-c.x*Pn,(t+o.y*Pn)*h-c.y*Pn)}function iE(a,t){const o=[];t.grid.queryPoint(a,o);const c=t.indices,h=t.vertices;for(let _=0;_<o.length;_++){const y=o[_];if(bu([h[c[3*y+0]],h[c[3*y+1]],h[c[3*y+2]]],a))return!0}return!1}const Nw=[new Rn(0,0),new Rn(Pn,0),new Rn(Pn,Pn),new Rn(0,Pn)];function sE(a,t){const o=[];let c=[];if(!t||a.length<2)return[a];if(a.length===2)return Yd(a[0],a[1],Nw)?[a]:[];for(let h=0;h<a.length+2;h++){const _=a[h%a.length],y=a[(h+1)%a.length],C=Yd(h===0?a[a.length-1]:a[(h-1)%a.length],_,Nw),R=Yd(_,y,Nw),L=C||R;L&&c.push(_),L&&R||c.length>0&&(c.length>1&&o.push(c),c=[])}return c.length>1&&o.push(c),o}const Fw=ii.VectorTileFeature.types,KN=["fill-extrusion-base","fill-extrusion-height","fill-extrusion-color","fill-extrusion-pattern","fill-extrusion-flood-light-wall-radius","fill-extrusion-line-width","fill-extrusion-emissive-strength"],YN=["fill-extrusion-flood-light-ground-radius"],ZN=Math.pow(2,13),XN=Math.pow(2,15)-1,oE=new Rn(0,1),ef=2147483648;function p_(a,t,o,c,h,_,y,C){a.emplaceBack((t<<1)+y,(o<<1)+_,(Math.floor(c*ZN)<<1)+h,Math.round(C))}function m_(a,t,o){a.emplaceBack(t.x*Pn,t.y*Pn,o?1:0)}function b1(a,t,o,c,h,_){a.emplaceBack(t.x,t.y,(o.x<<1)+c,(o.y<<1)+h,_)}function g_(a,t,o){a.emplaceBack(t.x,t.y,t.z,o[0]*16384,o[1]*16384,o[2]*16384)}class aE{constructor(){this.vertexOffset=0,this.vertexCount=0,this.indexOffset=0,this.indexCount=0}}class lE{constructor(){this.centroidXY=new Rn(0,0),this.vertexArrayOffset=0,this.vertexCount=0,this.groundVertexArrayOffset=0,this.groundVertexCount=0,this.flags=0,this.footprintSegIdx=-1,this.footprintSegLen=0,this.polygonSegIdx=-1,this.polygonSegLen=0,this.min=new Rn(Number.MAX_VALUE,Number.MAX_VALUE),this.max=new Rn(-Number.MAX_VALUE,-Number.MAX_VALUE),this.height=0}span(){return new Rn(this.max.x-this.min.x,this.max.y-this.min.y)}}class uE{constructor(){this.acc=new Rn(0,0),this.accCount=0,this.centroidDataIndex=0}startRing(t,o){t.min.x===Number.MAX_VALUE&&(t.min.x=t.max.x=o.x,t.min.y=t.max.y=o.y)}appendEdge(t,o,c){this.accCount++,this.acc._add(o);let h=!!this.borders;o.x<t.min.x?(t.min.x=o.x,h=!0):o.x>t.max.x&&(t.max.x=o.x,h=!0),o.y<t.min.y?(t.min.y=o.y,h=!0):o.y>t.max.y&&(t.max.y=o.y,h=!0),((o.x===0||o.x===Pn)&&o.x===c.x)!=((o.y===0||o.y===Pn)&&o.y===c.y)&&this.processBorderOverlap(o,c),h&&this.checkBorderIntersection(o,c)}checkBorderIntersection(t,o){o.x<0!=t.x<0&&this.addBorderIntersection(0,Dr(o.y,t.y,(0-o.x)/(t.x-o.x))),o.x>Pn!=t.x>Pn&&this.addBorderIntersection(1,Dr(o.y,t.y,(Pn-o.x)/(t.x-o.x))),o.y<0!=t.y<0&&this.addBorderIntersection(2,Dr(o.x,t.x,(0-o.y)/(t.y-o.y))),o.y>Pn!=t.y>Pn&&this.addBorderIntersection(3,Dr(o.x,t.x,(Pn-o.y)/(t.y-o.y)))}addBorderIntersection(t,o){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const c=this.borders[t];o<c[0]&&(c[0]=o),o>c[1]&&(c[1]=o)}processBorderOverlap(t,o){if(t.x===o.x){if(t.y===o.y)return;const c=t.x===0?0:1;this.addBorderIntersection(c,o.y),this.addBorderIntersection(c,t.y)}else{const c=t.y===0?2:3;this.addBorderIntersection(c,o.x),this.addBorderIntersection(c,t.x)}}centroid(){return this.accCount===0?new Rn(0,0):new Rn(Math.floor(Math.max(0,this.acc.x)/this.accCount),Math.floor(Math.max(0,this.acc.y)/this.accCount))}intersectsCount(){return this.borders?this.borders.reduce((t,o)=>t+ +(o[0]!==Number.MAX_VALUE),0):0}}function cE(a,t){const o=a.add(t)._unit(),c=tt(a.x*o.x+a.y*o.y,-1,1);var h,_,y;return h=Math.acos(c),Math.min(4,Math.max(-4,Math.tan(h)))/4*XN*((_=a).x*(y=t).y-_.y*y.x<0?-1:1)}const JN=[a=>a.x<0,a=>a.x>Pn,a=>a.y<0,a=>a.y>Pn];function QN(a,t,o,c){const h=[4];if(c===0)return h;o._mult(c);const _=a.sub(o),y=t.sub(o),C=[a,t,_,y];for(let R=0;R<4;R++)for(const L of C)if(JN[R](L)){h.push(R);break}return h}class dE{constructor(t){this.vertexArray=new Hh,this.indexArray=new Ho,this.programConfigurations=new f(t.layers,{zoom:t.zoom,lut:t.lut},o=>YN.includes(o)),this._segments=new Us,this.hiddenByLandmarkVertexArray=new Pm,this._segmentToGroundQuads={},this._segmentToGroundQuads[0]=[],this._segmentToRegionTriCounts={},this._segmentToRegionTriCounts[0]=[0,0,0,0,0],this.regionSegments={},this.regionSegments[4]=new Us}getDefaultSegment(){return this.regionSegments[4]}hasData(){return this.vertexArray.length!==0}addData(t,o,c,h=!1){const _=t.length;if(_>2){let y=Math.max(0,this._segments.get().length-1);const C=this._segments._prepareSegment(4*_,this.vertexArray.length,2*this._segmentToGroundQuads[y].length);let R;y!==this._segments.get().length-1&&(y++,this._segmentToGroundQuads[y]=[],this._segmentToRegionTriCounts[y]=[0,0,0,0,0]);{const L=t[0],V=t[1];R=cE(L.sub(t[_-1])._perp()._unit(),V.sub(L)._perp()._unit())}for(let L=0;L<_;L++){const V=L===_-1?0:L+1,$=t[L],U=t[V],X=t[V===_-1?0:V+1],ee=U.sub($)._perp()._unit(),de=cE(ee,X.sub(U)._perp()._unit()),be=R,Ie=de;if(Bw($,U,o)||h&&pE($,o)&&pE(U,o)){R=de;continue}const Fe=C.vertexLength;b1(this.vertexArray,$,U,1,1,be),b1(this.vertexArray,$,U,1,0,be),b1(this.vertexArray,$,U,0,1,Ie),b1(this.vertexArray,$,U,0,0,Ie),C.vertexLength+=4;const Be=QN($,U,ee,c);for(const pe of Be)this._segmentToGroundQuads[y].push({id:Fe,region:pe}),this._segmentToRegionTriCounts[y][pe]+=2,C.primitiveLength+=2;R=de}}}prepareBorderSegments(){if(!this.hasData())return;const t=this._segments.get(),o=t.length;for(let c=0;c<o;c++)this._segmentToGroundQuads[c].sort((h,_)=>h.region-_.region);for(let c=0;c<o;c++){const h=this._segmentToGroundQuads[c],_=t[c],y=this._segmentToRegionTriCounts[c];y.reduce((R,L)=>R+L,0);let C=0;for(let R=0;R<=4;R++){const L=y[R];if(L!==0){let V=this.regionSegments[R];V||(V=this.regionSegments[R]=new Us);const $={vertexOffset:_.vertexOffset,primitiveOffset:_.primitiveOffset+C,vertexLength:_.vertexLength,primitiveLength:L};V.get().push($)}C+=L}for(let R=0;R<h.length;R++){const L=h[R].id;this.indexArray.emplaceBack(L,L+1,L+3),this.indexArray.emplaceBack(L,L+3,L+2)}}this._segmentToGroundQuads=null,this._segmentToRegionTriCounts=null,this._segments.destroy(),this._segments=null}addPaintPropertiesData(t,o,c,h,_,y,C){this.hasData()&&this.programConfigurations.populatePaintArrays(this.vertexArray.length,t,o,c,h,_,y,void 0,C)}upload(t){this.hasData()&&(this.vertexBuffer=t.createVertexBuffer(this.vertexArray,$N.members),this.indexBuffer=t.createIndexBuffer(this.indexArray))}uploadPaintProperties(t){this.hasData()&&this.programConfigurations.upload(t)}update(t,o,c,h,_,y,C,R){this.hasData()&&this.programConfigurations.updatePaintArrays(t,o,c,h,_,y,C,R)}updateHiddenByLandmark(t){if(!this.hasData())return;const o=t.groundVertexCount+t.groundVertexArrayOffset;if(t.groundVertexCount===0)return;const c=t.flags&ef?1:0;for(let h=t.groundVertexArrayOffset;h<o;++h)this.hiddenByLandmarkVertexArray.emplace(h,c);this._needsHiddenByLandmarkUpdate=!0}uploadHiddenByLandmark(t){this.hasData()&&this._needsHiddenByLandmarkUpdate&&(!this.hiddenByLandmarkVertexBuffer&&this.hiddenByLandmarkVertexArray.length>0?this.hiddenByLandmarkVertexBuffer=t.createVertexBuffer(this.hiddenByLandmarkVertexArray,jN.members,!0):this.hiddenByLandmarkVertexBuffer&&this.hiddenByLandmarkVertexBuffer.updateData(this.hiddenByLandmarkVertexArray),this._needsHiddenByLandmarkUpdate=!1)}destroy(){if(this.vertexBuffer){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.hiddenByLandmarkVertexBuffer&&this.hiddenByLandmarkVertexBuffer.destroy(),this._segments&&this._segments.destroy(),this.programConfigurations.destroy();for(let t=0;t<=4;t++){const o=this.regionSegments[t];o&&o.destroy()}}}}class x1{constructor(t){this.zoom=t.zoom,this.canonical=t.canonical,this.overscaling=t.overscaling,this.layers=t.layers,this.pixelRatio=t.pixelRatio,this.layerIds=this.layers.map(o=>o.fqid),this.index=t.index,this.hasPattern=!1,this.edgeRadius=0,this.projection=t.projection,this.activeReplacements=[],this.replacementUpdateTime=0,this.centroidData=[],this.footprintIndices=new Ho,this.footprintVertices=new ec,this.footprintSegments=[],this.layoutVertexArray=new $h,this.centroidVertexArray=new n1,this.wallVertexArray=new i1,this.indexArray=new Ho,this.programConfigurations=new f(t.layers,{zoom:t.zoom,lut:t.lut},o=>KN.includes(o)),this.segments=new Us,this.stateDependentLayerIds=this.layers.filter(o=>o.isStateDependent()).map(o=>o.id),this.groundEffect=new dE(t),this.maxHeight=0,this.partLookup={},this.triangleSubSegments=[],this.polygonSegments=[],this.worldview=t.worldview}updateFootprints(t,o){}populate(t,o,c,h){this.features=[],this.hasPattern=Mw("fill-extrusion",this.layers,this.pixelRatio,o),this.featuresOnBorder=[],this.borderFeatureIndices=[[],[],[],[]],this.borderDoneWithNeighborZ=[-1,-1,-1,-1],this.selfDEMTileTimestamp=Number.MAX_VALUE,this.borderDEMTileTimestamp=[Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE],this.tileToMeter=Kt(c),this.edgeRadius=this.layers[0].layout.get("fill-extrusion-edge-radius")/this.tileToMeter,this.wallMode=this.layers[0].paint.get("fill-extrusion-line-width").constantOr(1)!==0;for(const{feature:_,id:y,index:C,sourceLayerIndex:R}of t){const L=this.layers[0]._featureFilter.needGeometry,V=Zn(_,L);if(!this.layers[0]._featureFilter.filter(new Qi(this.zoom,{worldview:this.worldview}),V,c))continue;const $={id:y,sourceLayerIndex:R,index:C,geometry:L?V.geometry:tr(_,c,h),properties:_.properties,type:_.type,patterns:{}},U=this.layoutVertexArray.length,X=Fw[$.type]==="Polygon";if(this.hasPattern)this.features.push(Aw("fill-extrusion",this.layers,$,this.zoom,this.pixelRatio,o));else if(this.wallMode)for(const ee of $.geometry)for(const de of sE(ee,X))this.addFeature($,[de],C,c,{},o.availableImages,h,o.brightness);else this.addFeature($,$.geometry,C,c,{},o.availableImages,h,o.brightness);o.featureIndex.insert(_,$.geometry,C,R,this.index,U)}this.sortBorders(),this.projection.name==="mercator"&&this.splitToSubtiles(),this.groundEffect.prepareBorderSegments(),this.polygonSegments.length=0}addFeatures(t,o,c,h,_,y){for(const C of this.features){const R=Fw[C.type]==="Polygon",{geometry:L}=C;if(this.wallMode)for(const V of L)for(const $ of sE(V,R))this.addFeature(C,[$],C.index,o,c,h,_,y);else this.addFeature(C,L,C.index,o,c,h,_,y)}this.sortBorders(),this.projection.name==="mercator"&&this.splitToSubtiles()}update(t,o,c,h,_,y,C){this.programConfigurations.updatePaintArrays(t,o,_,c,h,y,C,this.worldview),this.groundEffect.update(t,o,_,c,h,y,C,this.worldview)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload||this.groundEffect.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,qN),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.wallVertexBuffer=t.createVertexBuffer(this.wallVertexArray,UN.members),this.layoutVertexExtArray&&(this.layoutVertexExtBuffer=t.createVertexBuffer(this.layoutVertexExtArray,GN.members,!0)),this.groundEffect.upload(t)),this.groundEffect.uploadPaintProperties(t),this.programConfigurations.upload(t),this.uploaded=!0}uploadCentroid(t){this.groundEffect.uploadHiddenByLandmark(t),this.needsCentroidUpdate&&(!this.centroidVertexBuffer&&this.centroidVertexArray.length>0?this.centroidVertexBuffer=t.createVertexBuffer(this.centroidVertexArray,HN.members,!0):this.centroidVertexBuffer&&this.centroidVertexBuffer.updateData(this.centroidVertexArray),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.layoutVertexExtBuffer&&this.layoutVertexExtBuffer.destroy(),this.groundEffect.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(t,o,c,h,_,y,C,R){const L=this.layers[0].paint.get("fill-extrusion-flood-light-ground-radius").evaluate(t,{})/this.tileToMeter,V=[new Rn(0,0),new Rn(Pn,Pn)],$=C.projection,U=$.name==="globe",X=this.wallMode||Fw[t.type]==="Polygon",ee=new uE;ee.centroidDataIndex=this.centroidData.length;const de=new lE,be=this.layers[0].paint.get("fill-extrusion-base").evaluate(t,{},h)<=0,Ie=this.layers[0].paint.get("fill-extrusion-height").evaluate(t,{},h);let Fe;if(de.height=Ie,de.vertexArrayOffset=this.layoutVertexArray.length,de.groundVertexArrayOffset=this.groundEffect.vertexArray.length,U&&!this.layoutVertexExtArray&&(this.layoutVertexExtArray=new Mm),this.wallMode){if(U)return void kn("Non zero fill-extrusion-line-width is not yet supported on globe.");if(o.length!==1)return;Fe=function(St){const Rt=St[0].x===St[St.length-1].x&&St[0].y===St[St.length-1].y;(function(Hn){let An=0;const qr=Hn.length;for(let ar=0;ar<qr;ar++)An+=(Hn[(ar+1)%qr].x-Hn[ar].x)*(Hn[(ar+1)%qr].y+Hn[ar].y);return An>=0})(St)||(St=St.reverse());const Tn={geometry:[],joinNormals:[],indices:[]},hn=[],Cn=[],In=[];let Jt=St.length;for(;Jt>=2&&St[Jt-1].equals(St[Jt-2]);)Jt--;if(Jt<(Rt?3:2))return Tn;let yn,Wt,Xt,Ln,Dn,Cr=0;for(;Cr<Jt-1&&St[Cr].equals(St[Cr+1]);)Cr++;Rt&&(yn=St[Jt-2],Dn=St[Cr].sub(yn)._unit()._perp());for(let Hn=Cr;Hn<Jt;Hn++){if(Xt=Hn===Jt-1?Rt?St[Cr+1]:void 0:St[Hn+1],Xt&&St[Hn].equals(Xt))continue;Dn&&(Ln=Dn),yn&&(Wt=yn),yn=St[Hn],Dn=Xt?Xt.sub(yn)._unit()._perp():Ln,Ln=Ln||Dn;let An=Ln.add(Dn);An.x===0&&An.y===0||An._unit();const qr=An.x*Dn.x+An.y*Dn.y,ar=qr!==0?1/qr:1/0,ur=Ln.x*Dn.y-Ln.y*Dn.x>0;let Br="miter";const Qr=2;Br==="miter"&&ar>Qr&&(Br="bevel"),Br==="bevel"&&(ar>100&&(Br="flipbevel"),ar<Qr&&(Br="miter"));const Jr=(di,ni,hi,Gi)=>{const gs=new Rn(di.x,di.y),Ge=new Rn(di.x,di.y);gs.x+=ni.x*Gi,gs.y+=ni.y*Gi,Ge.x-=ni.x*Math.max(hi,1),Ge.y-=ni.y*Math.max(hi,1),In.push(ni),hn.push(gs),Cn.push(Ge)};if(Br==="miter")An._mult(ar),Jr(yn,An,0,0);else if(Br==="flipbevel")An=Dn.mult(-1),Jr(yn,An,0,0),Jr(yn,An.mult(-1),0,0);else{const di=-Math.sqrt(ar*ar-1),ni=ur?di:0,hi=ur?0:di;Wt&&Jr(yn,Ln,ni,hi),Xt&&Jr(yn,Dn,ni,hi)}}Tn.geometry=[...hn,...Cn.reverse(),hn[0]],Tn.joinNormals=[...In,...In.reverse(),In[In.length-1]];const lr=Tn.geometry.length-1;for(let Hn=0;Hn<lr/2;Hn++)if(Hn+1<lr/2){let An=Hn,qr=Hn+1,ar=lr-1-Hn,ur=lr-2-Hn;An=An===0?lr-1:An-1,qr=qr===0?lr-1:qr-1,ar=ar===0?lr-1:ar-1,ur=ur===0?lr-1:ur-1,Tn.indices.push(ar),Tn.indices.push(qr),Tn.indices.push(An),Tn.indices.push(ar),Tn.indices.push(ur),Tn.indices.push(qr)}return Tn}(o[0]),o=[Fe.geometry]}const Be=(St,Rt)=>St<(Rt.length-1)/2||St===Rt.length-1,pe=this.wallMode?[o]:g1(o,500);for(let St=pe.length-1;St>=0;St--){const Rt=pe[St];(Rt.length===0||(De=Rt[0]).every(Yt=>Yt.x<=0)||De.every(Yt=>Yt.x>=Pn)||De.every(Yt=>Yt.y<=0)||De.every(Yt=>Yt.y>=Pn))&&pe.splice(St,1)}var De;let He;if(U)He=vE(pe,V,h);else{He=[];for(const St of pe)He.push({polygon:St,bounds:V})}const Ze=X?this.edgeRadius:0,xt=Ze>0&&this.zoom<17,ht=(St,Rt)=>{if(St.length===0)return!1;const Yt=St[St.length-1];return Rt.x===Yt.x&&Rt.y===Yt.y};for(const{polygon:St,bounds:Rt}of He){let Yt=0,Tn=0;for(const Jt of St)X&&!Jt[0].equals(Jt[Jt.length-1])&&Jt.push(Jt[0]),Tn+=X?Jt.length-1:Jt.length;const hn=this.segments.prepareSegment((X?5:4)*Tn,this.layoutVertexArray,this.indexArray);de.footprintSegIdx<0&&(de.footprintSegIdx=this.footprintSegments.length),de.polygonSegIdx<0&&(de.polygonSegIdx=this.polygonSegments.length);const Cn={triangleArrayOffset:this.indexArray.length,triangleCount:0,triangleSegIdx:this.segments.segments.length-1},In=new aE;if(In.vertexOffset=this.footprintVertices.length,In.indexOffset=3*this.footprintIndices.length,In.ringIndices=[],X){const Jt=[],yn=[];Yt=hn.vertexLength;for(let Xt=0;Xt<St.length;Xt++){const Ln=St[Xt];Ln.length&&Xt!==0&&yn.push(Jt.length/2);const Dn=[];let Cr,lr;Cr=Ln[1].sub(Ln[0])._perp()._unit(),In.ringIndices.push(Ln.length-1);for(let Hn=1;Hn<Ln.length;Hn++){const An=Ln[Hn],qr=Ln[Hn===Ln.length-1?1:Hn+1],ar=An.clone();if(Ze){lr=qr.sub(An)._perp()._unit();const ur=Cr.add(lr)._unit(),Br=Ze*Math.min(4,1/(Cr.x*ur.x+Cr.y*ur.y));ar.x+=Br*ur.x,ar.y+=Br*ur.y,ar.x=Math.round(ar.x),ar.y=Math.round(ar.y),Cr=lr}if(!be||Ze!==0&&!xt||ht(Dn,ar)||Dn.push(ar),p_(this.layoutVertexArray,ar.x,ar.y,0,0,1,1,0),this.wallMode){const ur=Be(Hn,Ln);m_(this.wallVertexArray,Fe.joinNormals[Hn],!ur)}hn.vertexLength++,this.footprintVertices.emplaceBack(An.x,An.y),Jt.push(An.x,An.y),U&&g_(this.layoutVertexExtArray,$.projectTilePoint(ar.x,ar.y,h),$.upVector(h,ar.x,ar.y))}be&&(Ze===0||xt)&&(Dn.length!==0&&ht(Dn,Dn[0])&&Dn.pop(),this.groundEffect.addData(Dn,Rt,L))}const Wt=this.wallMode?Fe.indices:u_(Jt,yn);for(let Xt=0;Xt<Wt.length;Xt+=3)this.footprintIndices.emplaceBack(In.vertexOffset+Wt[Xt+0],In.vertexOffset+Wt[Xt+1],In.vertexOffset+Wt[Xt+2]),this.indexArray.emplaceBack(Yt+Wt[Xt],Yt+Wt[Xt+2],Yt+Wt[Xt+1]),hn.primitiveLength++;In.indexCount+=Wt.length,In.vertexCount+=this.footprintVertices.length-In.vertexOffset}for(let Jt=0;Jt<St.length;Jt++){const yn=St[Jt];ee.startRing(de,yn[0]);let Wt=yn.length>4&&mE(yn[yn.length-2],yn[0],yn[1]),Xt=Ze?eF(yn[yn.length-2],yn[0],yn[1],Ze):0;const Ln=[];let Dn,Cr,lr;Cr=yn[1].sub(yn[0])._perp()._unit();let Hn=!0;for(let An=1,qr=0;An<yn.length;An++){let ar=yn[An-1],ur=yn[An];const Br=yn[An===yn.length-1?1:An+1];if(ee.appendEdge(de,ur,ar),Bw(ur,ar,Rt)){Ze&&(Cr=Br.sub(ur)._perp()._unit(),Hn=!Hn);continue}const Qr=ur.sub(ar)._perp(),Jr=Qr.x/(Math.abs(Qr.x)+Math.abs(Qr.y)),di=Qr.y>0?1:0,ni=ar.dist(ur);if(qr+ni>32768&&(qr=0),Ze){lr=Br.sub(ur)._perp()._unit();let Ge=fE(ar,ur,Br,hE(Cr,lr),Ze);isNaN(Ge)&&(Ge=0);const Xe=ur.sub(ar)._unit();ar=ar.add(Xe.mult(Xt))._round(),ur=ur.add(Xe.mult(-Ge))._round(),Xt=Ge,Cr=lr,be&&this.zoom>=17&&(ht(Ln,ar)||Ln.push(ar),ht(Ln,ur)||Ln.push(ur))}const hi=hn.vertexLength,Gi=yn.length>4&&mE(ar,ur,Br);let gs=gE(qr,Wt,Hn);if(p_(this.layoutVertexArray,ar.x,ar.y,Jr,di,0,0,gs),p_(this.layoutVertexArray,ar.x,ar.y,Jr,di,0,1,gs),this.wallMode){const Ge=Be(An-1,yn),Xe=Fe.joinNormals[An-1];m_(this.wallVertexArray,Xe,Ge),m_(this.wallVertexArray,Xe,Ge)}if(qr+=ni,gs=gE(qr,Gi,!Hn),Wt=Gi,p_(this.layoutVertexArray,ur.x,ur.y,Jr,di,0,0,gs),p_(this.layoutVertexArray,ur.x,ur.y,Jr,di,0,1,gs),this.wallMode){const Ge=Be(An,yn),Xe=Fe.joinNormals[An];m_(this.wallVertexArray,Xe,Ge),m_(this.wallVertexArray,Xe,Ge)}if(hn.vertexLength+=4,this.indexArray.emplaceBack(hi+0,hi+1,hi+2),this.indexArray.emplaceBack(hi+1,hi+3,hi+2),hn.primitiveLength+=2,Ze){const Ge=Yt+(An===1?yn.length-2:An-2),Xe=An===1?Yt:Ge+1;if(this.indexArray.emplaceBack(hi+1,Ge,hi+3),this.indexArray.emplaceBack(Ge,Xe,hi+3),hn.primitiveLength+=2,Dn===void 0&&(Dn=hi),!Bw(Br,yn[An],Rt)){const en=An===yn.length-1?Dn:hn.vertexLength;this.indexArray.emplaceBack(hi+2,hi+3,en),this.indexArray.emplaceBack(hi+3,en+1,en),this.indexArray.emplaceBack(hi+3,Xe,en+1),hn.primitiveLength+=3}Hn=!Hn}if(U){const Ge=this.layoutVertexExtArray,Xe=$.projectTilePoint(ar.x,ar.y,h),en=$.projectTilePoint(ur.x,ur.y,h),Fn=$.upVector(h,ar.x,ar.y),jn=$.upVector(h,ur.x,ur.y);g_(Ge,Xe,Fn),g_(Ge,Xe,Fn),g_(Ge,en,jn),g_(Ge,en,jn)}}X&&(Yt+=yn.length-1),be&&Ze&&this.zoom>=17&&(Ln.length!==0&&ht(Ln,Ln[0])&&Ln.pop(),this.groundEffect.addData(Ln,Rt,L,Ze>0))}this.footprintSegments.push(In),Cn.triangleCount=this.indexArray.length-Cn.triangleArrayOffset,this.polygonSegments.push(Cn),++de.footprintSegLen,++de.polygonSegLen}if(de.vertexCount=this.layoutVertexArray.length-de.vertexArrayOffset,de.groundVertexCount=this.groundEffect.vertexArray.length-de.groundVertexArrayOffset,de.vertexCount!==0){if(de.centroidXY=ee.borders?oE:this.encodeCentroid(ee,de),this.centroidData.push(de),ee.borders){this.featuresOnBorder.push(ee);const St=this.featuresOnBorder.length-1;for(let Rt=0;Rt<ee.borders.length;Rt++)ee.borders[Rt][0]!==Number.MAX_VALUE&&this.borderFeatureIndices[Rt].push(St)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,c,_,y,h,R,void 0,this.worldview),this.groundEffect.addPaintPropertiesData(t,c,_,y,h,R,this.worldview),this.maxHeight=Math.max(this.maxHeight,Ie)}}sortBorders(){for(let t=0;t<this.borderFeatureIndices.length;t++)this.borderFeatureIndices[t].sort((o,c)=>this.featuresOnBorder[o].borders[t][0]-this.featuresOnBorder[c].borders[t][0])}splitToSubtiles(){const t=[];for(let C=0;C<this.centroidData.length;C++){const R=this.centroidData[C],L=+(R.min.y+R.max.y>Pn),V=2*L+(+(R.min.x+R.max.x>Pn)^L);for(let $=0;$<R.polygonSegLen;$++){const U=R.polygonSegIdx+$;t.push({centroidIdx:C,subtile:V,polygonSegmentIdx:U,triangleSegmentIdx:this.polygonSegments[U].triangleSegIdx})}}const o=new Ho;t.sort((C,R)=>C.triangleSegmentIdx===R.triangleSegmentIdx?C.subtile-R.subtile:C.triangleSegmentIdx-R.triangleSegmentIdx);let c=0,h=0,_=0;for(const C of t){if(C.triangleSegmentIdx!==c)break;_++}const y=t.length;for(;h!==t.length;){c=t[h].triangleSegmentIdx;let C=0,R=h,L=h;for(let V=R;V<_&&t[V].subtile===C;V++)L++;for(;R!==_;){const V=t[R];C=V.subtile;const $=this.centroidData[V.centroidIdx].min.clone(),U=this.centroidData[V.centroidIdx].max.clone(),X={vertexOffset:this.segments.segments[c].vertexOffset,primitiveOffset:o.length,vertexLength:this.segments.segments[c].vertexLength,primitiveLength:0,sortKey:void 0,vaos:{}};for(let ee=R;ee<L;ee++){const de=t[ee],be=this.polygonSegments[de.polygonSegmentIdx],Ie=this.centroidData[de.centroidIdx].min,Fe=this.centroidData[de.centroidIdx].max,Be=this.indexArray.uint16;for(let pe=be.triangleArrayOffset;pe<be.triangleArrayOffset+be.triangleCount;pe++)o.emplaceBack(Be[3*pe],Be[3*pe+1],Be[3*pe+2]);X.primitiveLength+=be.triangleCount,$.x=Math.min($.x,Ie.x),$.y=Math.min($.y,Ie.y),U.x=Math.max(U.x,Fe.x),U.y=Math.max(U.y,Fe.y)}X.primitiveLength>0&&this.triangleSubSegments.push({segment:X,min:$,max:U}),R=L;for(let ee=R;ee<_&&t[ee].subtile===t[R].subtile;ee++)L++}h=_;for(let V=h;V<y&&t[V].triangleSegmentIdx===t[h].triangleSegmentIdx;V++)_++}o._trim(),this.indexArray=o}getVisibleSegments(t,o,c){const h=new Us;if(this.wallMode){for(const de of this.triangleSubSegments)h.segments.push(de.segment);return h}let _=0,y=0;const C=1<<t.canonical.z;if(o){const de=o.getMinMaxForTile(t);de&&(_=de.min,y=de.max)}y+=this.maxHeight;const R=t.toUnwrapped();let L;const V=[R.canonical.x/C+R.wrap,R.canonical.y/C],$=[(R.canonical.x+1)/C+R.wrap,(R.canonical.y+1)/C],U=(de,be,Ie)=>[de[0]*(1-Ie[0])+be[0]*Ie[0],de[1]*(1-Ie[1])+be[1]*Ie[1]],X=[],ee=[];for(const de of this.triangleSubSegments){X[0]=de.min.x/Pn,X[1]=de.min.y/Pn,ee[0]=de.max.x/Pn,ee[1]=de.max.y/Pn;const be=U(V,$,X),Ie=U(V,$,ee);if(new Fi([be[0],be[1],_],[Ie[0],Ie[1],y]).intersectsPrecise(c)===0){L&&(h.segments.push(L),L=void 0);continue}const Fe=de.segment;L&&L.vertexOffset!==Fe.vertexOffset&&(h.segments.push(L),L=void 0),L?(L.vertexLength+=Fe.vertexLength,L.primitiveLength+=Fe.primitiveLength):L={vertexOffset:Fe.vertexOffset,primitiveLength:Fe.primitiveLength,vertexLength:Fe.vertexLength,primitiveOffset:Fe.primitiveOffset,sortKey:void 0,vaos:{}}}return L&&h.segments.push(L),h}encodeCentroid(t,o){const c=t.centroid(),h=o.span(),_=Math.min(7,Math.round(h.x*this.tileToMeter/10)),y=Math.min(7,Math.round(h.y*this.tileToMeter/10));return new Rn(tt(c.x,1,Pn-1)<<3|_,tt(c.y,1,Pn-1)<<3|y)}encodeBorderCentroid(t){if(!t.borders)return new Rn(0,0);const o=t.borders,c=Number.MAX_VALUE;if(o[0][0]!==c||o[1][0]!==c){const h=o[0][0]!==c?0:1;return new Rn(6|(o[0][0]!==c?0:65528),(o[h][0]+o[h][1])/2<<3|6)}{const h=o[2][0]!==c?2:3;return new Rn((o[h][0]+o[h][1])/2<<3|6,6|(o[2][0]!==c?0:65528))}}showCentroid(t){const o=this.centroidData[t.centroidDataIndex];o.flags&=ef,o.centroidXY.x=0,o.centroidXY.y=0,this.writeCentroidToBuffer(o)}writeCentroidToBuffer(t){this.groundEffect.updateHiddenByLandmark(t);const o=t.vertexArrayOffset,c=t.vertexCount+t.vertexArrayOffset,h=t.flags&ef?oE:t.centroidXY,_=this.centroidVertexArray.geta_centroid_pos0(o);if(this.centroidVertexArray.geta_centroid_pos1(o)!==h.y||_!==h.x){for(let y=o;y<c;++y)this.centroidVertexArray.emplace(y,h.x,h.y);this.needsCentroidUpdate=!0}}createCentroidsBuffer(){this.centroidVertexArray.resize(this.layoutVertexArray.length),this.groundEffect.hiddenByLandmarkVertexArray.resize(this.groundEffect.vertexArray.length);for(const t of this.centroidData)this.writeCentroidToBuffer(t)}updateReplacement(t,o,c){if(o.updateTime===this.replacementUpdateTime)return;this.replacementUpdateTime=o.updateTime;const h=o.getReplacementRegionsForTile(t.toUnwrapped());if(zw(this.activeReplacements,h))return;if(this.activeReplacements=h,this.centroidVertexArray.length===0)this.createCentroidsBuffer();else for(const y of this.centroidData)y.flags&=2147483647;const _=[];for(const y of this.activeReplacements){if(y.order<c)continue;const C=Math.max(1,Math.pow(2,y.footprintTileId.canonical.z-t.canonical.z));for(const R of this.centroidData)if(!(R.flags&ef||y.min.x>R.max.x||R.min.x>y.max.x||y.min.y>R.max.y||R.min.y>y.max.y))for(let L=0;L<R.footprintSegLen;L++){const V=this.footprintSegments[R.footprintSegIdx+L];if(_.length=0,tF(this.footprintVertices,V.vertexOffset,V.vertexCount,y.footprintTileId.canonical,t.canonical,_),tE(y.footprint,_,this.footprintIndices.uint16,V.indexOffset,V.indexCount,-V.vertexOffset,-C)){R.flags|=ef;break}}}for(const y of this.centroidData)this.writeCentroidToBuffer(y);this.borderDoneWithNeighborZ=[-1,-1,-1,-1]}footprintContainsPoint(t,o,c){let h=!1;for(let _=0;_<c.footprintSegLen;_++){const y=this.footprintSegments[c.footprintSegIdx+_];let C=0;for(const R of y.ringIndices){for(let L=C,V=R+C-1;L<R+C;V=L++){const $=this.footprintVertices.int16[2*(L+y.vertexOffset)+0],U=this.footprintVertices.int16[2*(L+y.vertexOffset)+1],X=this.footprintVertices.int16[2*(V+y.vertexOffset)+1];U>o!=X>o&&t<(this.footprintVertices.int16[2*(V+y.vertexOffset)+0]-$)*(o-U)/(X-U)+$&&(h=!h)}C=R}}return h}getHeightAtTileCoord(t,o){let c=Number.NEGATIVE_INFINITY,h=!0;const _=4*(t+Pn)*Pn+(o+Pn);if(this.partLookup.hasOwnProperty(_)){const y=this.partLookup[_];return y?{height:y.height,hidden:!!(y.flags&ef)}:void 0}for(const y of this.centroidData)t>y.max.x||y.min.x>t||o>y.max.y||y.min.y>o||this.footprintContainsPoint(t,o,y)&&y&&y.height>c&&(c=y.height,this.partLookup[_]=y,h=!!(y.flags&ef));if(c!==Number.NEGATIVE_INFINITY)return{height:c,hidden:h};this.partLookup[_]=void 0}}function hE(a,t){const o=a.add(t)._unit();return a.x*o.x+a.y*o.y}function eF(a,t,o,c){const h=t.sub(a)._perp()._unit(),_=o.sub(t)._perp()._unit();return fE(a,t,o,hE(h,_),c)}function fE(a,t,o,c,h){const _=Math.sqrt(1-c*c);return Math.min(a.dist(t)/3,t.dist(o)/3,h*_/c)}function Bw(a,t,o){return a.x<o[0].x&&t.x<o[0].x||a.x>o[1].x&&t.x>o[1].x||a.y<o[0].y&&t.y<o[0].y||a.y>o[1].y&&t.y>o[1].y}function pE(a,t){return a.x<t[0].x||a.x>t[1].x||a.y<t[0].y||a.y>t[1].y}function mE(a,t,o){if(a.x<0||a.x>=Pn||t.x<0||t.x>=Pn||o.x<0||o.x>=Pn)return!1;const c=o.sub(t),h=c.perp(),_=a.sub(t);return(c.x*_.x+c.y*_.y)/Math.sqrt((c.x*c.x+c.y*c.y)*(_.x*_.x+_.y*_.y))>-.866&&h.x*_.x+h.y*_.y<0}function gE(a,t,o){const c=t?2|a:-3&a;return o?1|c:-2&c}function _E(){const a=Math.PI/32,t=Math.tan(a),o=Ee;return o*Math.sqrt(1+2*t*t)-o}function vE(a,t,o){const c=1<<o.z,h=pt(o.x/c),_=pt((o.x+1)/c),y=zt(o.y/c),C=zt((o.y+1)/c);return function(R,L,V,$,U=0,X){const ee=[];if(!R.length||!V||!$)return ee;const de=(He,Ze)=>{for(const xt of He)ee.push({polygon:xt,bounds:Ze})},be=Math.ceil(Math.log2(V)),Ie=Math.ceil(Math.log2($)),Fe=be-Ie,Be=[];for(let He=0;He<Math.abs(Fe);He++)Be.push(Fe>0?0:1);for(let He=0;He<Math.min(be,Ie);He++)Be.push(0),Be.push(1);let pe=R;if(pe=_1(pe,L[0].y-U,L[1].y+U,1),pe=_1(pe,L[0].x-U,L[1].x+U,0),!pe.length)return ee;const De=[];for(Be.length?De.push({polygons:pe,bounds:L,depth:0}):de(pe,L);De.length;){const He=De.pop(),Ze=He.depth,xt=Be[Ze],ht=He.bounds[0],St=He.bounds[1],Rt=xt===0?ht.x:ht.y,Yt=xt===0?St.x:St.y,Tn=X?X(xt,Rt,Yt):.5*(Rt+Yt),hn=_1(He.polygons,Rt-U,Tn+U,xt),Cn=_1(He.polygons,Tn-U,Yt+U,xt);if(hn.length){const In=[ht,new Rn(xt===0?Tn:St.x,xt===1?Tn:St.y)];Be.length>Ze+1?De.push({polygons:hn,bounds:In,depth:Ze+1}):de(hn,In)}if(Cn.length){const In=[new Rn(xt===0?Tn:ht.x,xt===1?Tn:ht.y),St];Be.length>Ze+1?De.push({polygons:Cn,bounds:In,depth:Ze+1}):de(Cn,In)}}return ee}(a,t,Math.ceil((_-h)/11.25),Math.ceil((y-C)/11.25),1,(R,L,V)=>{if(R===0)return .5*(L+V);{const $=zt((o.y+L/Pn)/c);return(Qe(.5*(zt((o.y+V/Pn)/c)+$))*c-o.y)*Pn}})}function tF(a,t,o,c,h,_){const y=Math.pow(2,c.z-h.z);for(let C=0;C<o;C++){let R=a.int16[2*(C+t)+0],L=a.int16[2*(C+t)+1];R=(R+h.x*Pn)*y-c.x*Pn,L=(L+h.y*Pn)*y-c.y*Pn,_.push(new Rn(R,L))}}let yE,bE;Qn(x1,"FillExtrusionBucket",{omit:["layers","features"]}),Qn(lE,"PartData"),Qn(aE,"FootprintSegment"),Qn(uE,"BorderCentroidData"),Qn(dE,"GroundEffect");class pp extends Rn{constructor(t,o,c){super(t,o),this.z=c}}class xE extends pp{constructor(t,o,c,h){super(t,o,c),this.w=h}}function wE(a,t,o,c){const h=o==="x"?"y":"x",_=(c-a[o])/(t[o]-a[o]);a[h]=Math.round(a[h]+(t[h]-a[h])*_),a[o]=c,a.hasOwnProperty("z")&&(a.z=Dr(a.z,t.z,_)),a.hasOwnProperty("w")&&(a.w=Dr(a.w,t.w,_))}function SE(a,t,o,c){const h=o,_=c;for(const y of["x","y"]){let C=a,R=t;C[y]>=R[y]&&(C=t,R=a),C[y]<h&&R[y]>h&&wE(C,R,y,h),C[y]<_&&R[y]>_&&wE(R,C,y,_)}}function w1(a,t,o,c,h,_){const y=[];for(let C=0;C<a.length;C++){const R=a[C];let L;const V=y.length;let $=0;for(let U=0;U<R.length-1;U++){let X=R[U],ee=R[U+1],de=0;const be=$;let Ie,Fe;_&&(de=Math.hypot(ee.x-X.x,ee.y-X.y),$+=de,Ie=X,Fe=ee),X.x<t&&ee.x<t||(X.x<t?X=new Rn(t,X.y+(t-X.x)/(ee.x-X.x)*(ee.y-X.y))._round():ee.x<t&&(ee=new Rn(t,X.y+(t-X.x)/(ee.x-X.x)*(ee.y-X.y))._round()),X.y<o&&ee.y<o||(X.y<o?X=new Rn(X.x+(o-X.y)/(ee.y-X.y)*(ee.x-X.x),o)._round():ee.y<o&&(ee=new Rn(X.x+(o-X.y)/(ee.y-X.y)*(ee.x-X.x),o)._round()),X.x>=c&&ee.x>=c||(X.x>=c?X=new Rn(c,X.y+(c-X.x)/(ee.x-X.x)*(ee.y-X.y))._round():ee.x>=c&&(ee=new Rn(c,X.y+(c-X.x)/(ee.x-X.x)*(ee.y-X.y))._round()),X.y>=h&&ee.y>=h||(X.y>=h?X=new Rn(X.x+(h-X.y)/(ee.y-X.y)*(ee.x-X.x),h)._round():ee.y>=h&&(ee=new Rn(X.x+(h-X.y)/(ee.y-X.y)*(ee.x-X.x),h)._round()),L&&X.equals(L[L.length-1])||(L=[X],y.push(L),_&&_.push({progress:{min:be+CE(Ie,Fe,X)*de,max:1},parentIndex:C,prevPoint:Ie,nextPoint:Fe})),L.push(ee),_&&(_[_.length-1].progress.max=be+CE(Ie,Fe,ee)*de,_[_.length-1].nextPoint=Fe)))))}if(_&&$>0)for(let U=V;U<y.length;U++)_[U].progress.min/=$,_[U].progress.max/=$}return y}function nF(a,t,o,c,h){if(a.length<2)return void c.push(a);const _=[];for(;t.valid();){const[L,V]=t.get();for(let $=0;$<a.length-1;$++){const U=a[$],X=a[$+1],ee=o_(U,X,L,V);if(ee){const[de]=ee,be=new Rn(Dr(U.x,X.x,de),Dr(U.y,X.y,de));_.push({t:$+de,distance:0,point:be})}}t.next()}if(_.length===0)return void c.push(a);_.sort((L,V)=>L.t-V.t);let y=0,C=0,R=[];for(c.push(R);y!==a.length;){if(C===_.length){for(;y!==a.length;)R.length!==0&&R[R.length-1].equals(a[y])||R.push(a[y]),y++;break}_[C].t<=y?(R.length!==0&&R[R.length-1].equals(_[C].point)||R.push(_[C].point),Math.trunc(_[C].t),C++):(R.length!==0&&R[R.length-1].equals(a[y])||R.push(a[y]),y++)}}function CE(a,t,o){return a.x!==t.x?(o.x-a.x)/(t.x-a.x):a.y!==t.y?(o.y-a.y)/(t.y-a.y):0}function __(a,t){return a.x*t.x+a.y*t.y}function EE(a,t){if(a.length===1){let o=0;const c=t[o++];let h;for(;!h||c.equals(h);)if(h=t[o++],!h)return 1/0;for(;o<t.length;o++){const _=t[o],y=a[0],C=h.sub(c),R=_.sub(c),L=y.sub(c),V=__(C,C),$=__(C,R),U=__(R,R),X=__(L,C),ee=__(L,R),de=V*U-$*$,be=(U*X-$*ee)/de,Ie=(V*ee-$*X)/de,Fe=c.z*(1-be-Ie)+h.z*be+_.z*Ie;if(isFinite(Fe))return Fe}return 1/0}{let o=1/0;for(const c of t)o=Math.min(o,c.z);return o}}function TE(a,t,o,c,h,_,y,C){const R=y*h.getElevationAt(a,t,!0,!0),L=_[0]!==0,V=L?_[1]===0?y*(_[0]/7-450):y*function($,U,X){const ee=Math.floor(U[0]/8),de=Math.floor(U[1]/8),be=10*(U[0]-8*ee),Ie=10*(U[1]-8*de),Fe=$.getElevationAt(ee,de,!0,!0),Be=$.getMeterToDEM(X),pe=Math.floor(.5*(be*Be-1)),De=Math.floor(.5*(Ie*Be-1)),He=$.tileCoordToPixel(ee,de),Ze=2*pe+1,xt=2*De+1,ht=function(Cn,In,Jt,yn,Wt){return[Cn.getElevationAtPixel(In,Jt,!0),Cn.getElevationAtPixel(In+Wt,Jt,!0),Cn.getElevationAtPixel(In,Jt+Wt,!0),Cn.getElevationAtPixel(In+yn,Jt+Wt,!0)]}($,He.x-pe,He.y-De,Ze,xt),St=Math.abs(ht[0]-ht[1]),Rt=Math.abs(ht[2]-ht[3]),Yt=Math.abs(ht[0]-ht[2])+Math.abs(ht[1]-ht[3]),Tn=Math.min(.25,.5*Be*(St+Rt)/Ze),hn=Math.min(.25,.5*Be*Yt/xt);return Fe+Math.max(Tn*be,hn*Ie)}(h,_,C):R;return{base:R+(o===0?-1:o),top:L?Math.max(V+c,R+o+2):R+c}}class rF{constructor(t){this._callback=t,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){this._channel=void 0,this._callback=()=>{}}}class iF{constructor(){this.tasks={},this.taskQueue=[],qn(["process"],this),this.invoker=new rF(this.process),this.nextId=0}add(t,o){const c=this.nextId++,h=function({type:_,isSymbolTile:y,zoom:C}){return C=C||0,_==="message"?0:_!=="maybePrepare"||y?_!=="parseTile"||y?_==="parseTile"&&y?300-C:_==="maybePrepare"&&y?400-C:500:200-C:100-C}(o);if(h===0){try{t()}finally{}return null}return this.tasks[c]={fn:t,metadata:o,priority:h,id:c},this.taskQueue.push(c),this.invoker.trigger(),{cancel:()=>{delete this.tasks[c]}}}process(){try{if(this.taskQueue=this.taskQueue.filter(c=>!!this.tasks[c]),!this.taskQueue.length)return;const t=this.pick();if(t===null)return;const o=this.tasks[t];if(delete this.tasks[t],this.taskQueue.length&&this.invoker.trigger(),!o)return;o.fn()}finally{}}pick(){let t=null,o=1/0;for(let h=0;h<this.taskQueue.length;h++){const _=this.tasks[this.taskQueue[h]];_.priority<o&&(o=_.priority,t=h)}if(t===null)return null;const c=this.taskQueue[t];return this.taskQueue.splice(t,1),c}remove(){this.invoker.remove()}}class IE{constructor(t,o,c){this.target=t,this.parent=o,this.mapId=c,this.callbacks={},this.cancelCallbacks={},qn(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.scheduler=new iF}send(t,o,c,h,_=!1,y){const C=Math.round(1e18*Math.random()).toString(36).substring(0,10);c&&(c.metadata=y,this.callbacks[C]=c);const R=new Set;return this.target.postMessage({id:C,type:t,hasCallback:!!c,targetMapId:h,mustQueue:_,sourceMapId:this.mapId,data:Kc(o,R)},R),{cancel:()=>{c&&delete this.callbacks[C],this.target.postMessage({id:C,type:"<cancel>",targetMapId:h,sourceMapId:this.mapId})}}}receive(t){const o=t.data;if(!o)return;const c=o.id;if(c&&(!o.targetMapId||this.mapId===o.targetMapId))if(o.type==="<cancel>"){const h=this.cancelCallbacks[c];delete this.cancelCallbacks[c],h&&h.cancel()}else if(o.mustQueue||ci(self)){const h=this.callbacks[c],_=this.scheduler.add(()=>this.processTask(c,o),h&&h.metadata||{type:"message"});_&&(this.cancelCallbacks[c]=_)}else this.processTask(c,o)}processTask(t,o){if(delete this.cancelCallbacks[t],o.type==="<response>"){const c=this.callbacks[t];delete this.callbacks[t],c&&(o.error?c(Yc(o.error)):c(null,Yc(o.data)))}else{const c=new Set,h=o.hasCallback?(y,C)=>{this.target.postMessage({id:t,type:"<response>",sourceMapId:this.mapId,error:y?Kc(y):null,data:Kc(C,c)},c)}:()=>{},_=Yc(o.data);if(this.parent[o.type])this.parent[o.type](o.sourceMapId,_,h);else if(this.parent.getWorkerSource){const y=o.type.split("."),{source:C,scope:R}=_;this.parent.getWorkerSource(o.sourceMapId,y[0],C,R)[y[1]](_,h)}else h(new Error(`Could not find function ${o.type}`))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}}var v_={workerUrl:"",workerClass:null,workerParams:void 0};const Vw="mapboxgl_preloaded_worker_pool";class mp{constructor(){this.active={}}acquire(t,o=mp.workerCount){if(!this.workers)for(this.workers=[];this.workers.length<o;)this.workers.push(v_.workerClass!=null?new v_.workerClass:new self.Worker(v_.workerUrl,v_.workerParams));return this.active[t]=!0,this.workers.slice()}release(t){delete this.active[t],this.workers&&this.numActive()===0&&(this.workers.forEach(o=>{o.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Vw]}numActive(){return Object.keys(this.active).length}}mp.workerCount=2;class jm{constructor(t,o,c="Worker",h=mp.workerCount){this.workerPool=t,this.actors=[],this.currentActor=0,this.id=Ft();const _=this.workerPool.acquire(this.id,h);for(let y=0;y<_.length;y++){const C=new jm.Actor(_[y],o,this.id);C.name=`${c} ${y}`,this.actors.push(C)}this.ready=!1,this.broadcast("checkIfReady",null,()=>{this.ready=!0})}broadcast(t,o,c){je(this.actors,(h,_)=>{h.send(t,o,_)},c=c||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(t=>{t.remove()}),this.actors=[],this.workerPool.release(this.id)}}let y_,$w;function S1(){return y_||(y_=new mp),y_}jm.Actor=IE;class sF{constructor(t){this.module=t}createIntArray(t){const o=new Int32Array(t),c=this.module.malloc(o.length*o.BYTES_PER_ELEMENT);return this.module.heap32.set(o,c/o.BYTES_PER_ELEMENT),c}createFloatArray(t){const o=new Float32Array(t),c=this.module.malloc(o.length*o.BYTES_PER_ELEMENT);return this.module.heapF32.set(o,c/o.BYTES_PER_ELEMENT),c}createStringBuffer(t){const o=this.module.malloc(t.length+1);for(let c=0;c<t.length;++c)this.module.heapU8[o+c]=t.charCodeAt(c);return this.module.heapU8[o+t.length]=0,o}readStringBuffer(t){let o="";for(;this.module.heapU8[t]!==0;)o+=String.fromCharCode(this.module.heapU8[t]),++t;return o}setStyle(t){const o=t.entranceColorRgb,c=t.facadeGlazingColorRgb,h=t.roofColorRgb,_=t.wallColorRgb,y=t.normalScale;this.module.setStyle(o[0],o[1],o[2],c[0],c[1],c[2],h[0],h[1],h[2],_[0],_[1],_[2],y[0],y[1],y[2],t.tileToMeters)}setAOOptions(t,o){this.module.setAOOptions(t?1:0,o)}setMetricOptions(t,o){this.module.setMetricOptions(t?1:0,o)}setFacadeOptions(t,o,c){this.module.setFacadeOptions(t,o,c)}generateMesh(t,o){for(const C of t){const R=this.createStringBuffer(C.roofType),L=[0],V=[];for(const X of C.coordinates)if(Array.isArray(X)){for(const ee of X)V.push(ee.x),V.push(ee.y);L.push(V.length)}const $=this.createIntArray(L),U=this.createFloatArray(V);this.module.addFeature(C.id,C.sourceId,C.minHeight,C.height,R,C.roofType.length,U,$,L.length-1),this.module.free(R),this.module.free($),this.module.free(U)}for(const C of o){let R;R=C.entrances?JSON.parse(C.entrances):[];const L=this.createFloatArray(R),V=[];for(const U of C.coordinates)V.push(U.x),V.push(U.y);const $=this.createFloatArray(V);this.module.addFacade(C.sourceId,C.crossPerc,C.distanceToRoad,L,R.length,$,V.length),this.module.free(L),this.module.free($)}if(!this.module.generateMesh()){const C=this.module.getLastError();return this.readStringBuffer(C)}const c=this.module.getMeshCount(),h=new Array(c);for(let C=0;C<c;C++){const R=this.module.getPositionsPtr(C),L=this.module.getPositionsLength(C),V=new Float32Array(this.module.heapF32.buffer,R,L),$=this.module.getNormalsPtr(C),U=this.module.getNormalsLength(C),X=new Float32Array(this.module.heapF32.buffer,$,U),ee=this.module.getColorsPtr(C),de=this.module.getColorsLength(C),be=new Uint8Array(this.module.heapU8.buffer,ee,de),Ie=this.module.getAOPtr(C),Fe=this.module.getAOLength(C),Be=new Float32Array(this.module.heapF32.buffer,Ie,Fe),pe=this.module.getIndicesPtr(C),De=this.module.getIndicesLength(C),He=new Int32Array(this.module.heap32.buffer,pe,De),Ze=this.module.getBuildingPart(C),xt=this.readStringBuffer(Ze);h[C]={positions:V,normals:X,colors:be,ao:Be,indices:He,buildingPart:xt}}const _=this.module.getRingCount(),y=[];for(let C=0;C<_;C++){const R=this.module.getRingPtr(C),L=this.module.getRingLength(C),V=new Float32Array(this.module.heapF32.buffer,R,L);y.push(V)}return{meshes:h,modifiedPolygonRings:y}}}let b_,Hw,rc,Gm,Uw,qm=null,Wm=null,kE=null,jw=null;function ME(){return ci(self)&&self.worker.dracoUrl?self.worker.dracoUrl:Hw||ko.DRACO_URL}function AE(){if(ci(self)&&self.worker.meshoptUrl)return self.worker.meshoptUrl;if(Gm)return Gm;const a=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]);if(typeof WebAssembly!="object")throw new Error("WebAssembly not supported, cannot instantiate meshoptimizer");return Gm=WebAssembly.validate(a)?ko.MESHOPT_SIMD_URL:ko.MESHOPT_URL,Gm}const C1={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},oF={5120:"DT_INT8",5121:"DT_UINT8",5122:"DT_INT16",5123:"DT_UINT16",5125:"DT_UINT32",5126:"DT_FLOAT32"},x_={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16};function RE(a,t,o){const c=o.json.bufferViews.length,h=o.buffers.length;t.bufferView=c,o.json.bufferViews[c]={buffer:h,byteLength:a.byteLength},o.buffers[h]=a}const Gw="KHR_draco_mesh_compression";function aF(a,t){const o=a.extensions&&a.extensions[Gw];if(!o)return;const c=new rc.Decoder,h=DE(t,o.bufferView),_=new rc.Mesh;if(!c.DecodeArrayToMesh(h,h.byteLength,_))throw new Error("Failed to decode Draco mesh");const y=t.json.accessors[a.indices],C=C1[y.componentType],R=y.count*C.BYTES_PER_ELEMENT,L=rc._malloc(R);C===Uint16Array?c.GetTrianglesUInt16Array(_,R,L):c.GetTrianglesUInt32Array(_,R,L),RE(rc.memory.buffer.slice(L,L+R),y,t),rc._free(L);for(const V of Object.keys(o.attributes)){const $=c.GetAttributeByUniqueId(_,o.attributes[V]),U=t.json.accessors[a.attributes[V]],X=oF[U.componentType],ee=U.count*x_[U.type]*C1[U.componentType].BYTES_PER_ELEMENT,de=rc._malloc(ee);c.GetAttributeDataArrayForAllPoints(_,$,rc[X],ee,de),RE(rc.memory.buffer.slice(de,de+ee),U,t),rc._free(de)}c.destroy(),_.destroy(),delete a.extensions[Gw]}const E1="EXT_meshopt_compression";function lF(a,t){if(!a.extensions||!a.extensions[E1])return;const o=a.extensions[E1],c=new Uint8Array(t.buffers[o.buffer],o.byteOffset||0,o.byteLength||0),h=new Uint8Array(o.count*o.byteStride);Uw.decodeGltfBuffer(h,o.count,o.byteStride,c,o.mode,o.filter),a.buffer=t.buffers.length,a.byteOffset=0,t.buffers[a.buffer]=h.buffer,delete a.extensions[E1]}const PE=1179937895,LE=new TextDecoder("utf8");function OE(a,t){return new URL(a,t).href}function uF(a,t,o,c){return fetch(OE(a.uri,c)).then(h=>h.arrayBuffer()).then(h=>{t.buffers[o]=h})}function DE(a,t){const o=a.json.bufferViews[t];return new Uint8Array(a.buffers[o.buffer],o.byteOffset||0,o.byteLength)}function cF(a,t,o,c){if(a.uri){const h=OE(a.uri,c);return fetch(h).then(_=>_.blob()).then(_=>createImageBitmap(_)).then(_=>{t.images[o]=_})}if(a.bufferView!==void 0){const h=DE(t,a.bufferView),_=new Blob([h],{type:a.mimeType});return createImageBitmap(_).then(y=>{t.images[o]=y})}}function zE(a,t=0,o){const c={json:null,images:[],buffers:[]};if(new Uint32Array(a,t,1)[0]===PE){const V=new Uint32Array(a,t);let $=2;const U=(V[$++]>>2)-3,X=V[$++]>>2;if($++,c.json=JSON.parse(LE.decode(V.subarray($,$+X))),$+=X,$<U){const ee=V[$++];$++;const de=t+($<<2);c.buffers[0]=a.slice(de,de+ee)}}else c.json=JSON.parse(LE.decode(new Uint8Array(a,t)));const{buffers:h,images:_,meshes:y,extensionsUsed:C,bufferViews:R}=c.json;let L=Promise.resolve();if(h){const V=[];for(let $=0;$<h.length;$++){const U=h[$];U.uri?V.push(uF(U,c,$,o)):c.buffers[$]||(c.buffers[$]=null)}L=Promise.all(V)}return L.then(()=>{const V=[],$=C&&C.includes(Gw),U=C&&C.includes(E1);if($&&V.push(function(){if(!rc)return b_??(b_=function(X){let ee,de=null;function be(){ee=new Uint8Array(de.buffer)}function Ie(){throw new Error("Unexpected Draco error.")}const Fe={a:{a:Ie,d:function(Be,pe,De){return ee.copyWithin(Be,pe,pe+De)},c:function(Be){const pe=ee.length,De=Math.max(Be>>>0,Math.ceil(1.2*pe)),He=Math.ceil((De-pe)/65536);try{return de.grow(He),be(),!0}catch{return!1}},b:Ie}};return(WebAssembly.instantiateStreaming?WebAssembly.instantiateStreaming(X,Fe):X.then(Be=>Be.arrayBuffer()).then(Be=>WebAssembly.instantiate(Be,Fe))).then(Be=>{const{Rb:pe,Qb:De,P:He,T:Ze,X:xt,Ja:ht,La:St,Qa:Rt,Va:Yt,Wa:Tn,eb:hn,jb:Cn,f:In,e:Jt,yb:yn,zb:Wt,Ab:Xt,Bb:Ln,Db:Dn,Gb:Cr}=Be.instance.exports;de=Jt;const lr=(()=>{let Hn=0,An=0,qr=0,ar=0;return ur=>{qr&&(pe(ar),pe(Hn),An+=qr,qr=Hn=0),Hn||(An+=128,Hn=De(An));const Br=ur.length+7&-8;let Qr=Hn;Br>=An&&(qr=Br,Qr=ar=De(Br));for(let Jr=0;Jr<ur.length;Jr++)ee[Qr+Jr]=ur[Jr];return Qr}})();return be(),In(),{memory:Jt,_free:pe,_malloc:De,Mesh:class{constructor(){this.ptr=He()}destroy(){Ze(this.ptr)}},Decoder:class{constructor(){this.ptr=ht()}destroy(){Cn(this.ptr)}DecodeArrayToMesh(Hn,An,qr){const ar=lr(Hn),ur=St(this.ptr,ar,An,qr.ptr);return!!xt(ur)}GetAttributeByUniqueId(Hn,An){return{ptr:Rt(this.ptr,Hn.ptr,An)}}GetTrianglesUInt16Array(Hn,An,qr){Yt(this.ptr,Hn.ptr,An,qr)}GetTrianglesUInt32Array(Hn,An,qr){Tn(this.ptr,Hn.ptr,An,qr)}GetAttributeDataArrayForAllPoints(Hn,An,qr,ar,ur){hn(this.ptr,Hn.ptr,An.ptr,qr,ar,ur)}},DT_INT8:yn(),DT_UINT8:Wt(),DT_INT16:Xt(),DT_UINT16:Ln(),DT_UINT32:Dn(),DT_FLOAT32:Cr()}})}(fetch(ME())),b_.then(X=>{rc=X,b_=void 0}))}()),U&&V.push(function(){if(Uw)return;const X=function(ee){let de;const be=WebAssembly.instantiateStreaming(ee,{}).then(Be=>{de=Be.instance,de.exports.__wasm_call_ctors()}),Ie={NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},Fe={ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return{ready:be,supported:!0,decodeGltfBuffer(Be,pe,De,He,Ze,xt){(function(ht,St,Rt,Yt,Tn,hn,Cn){const In=ht.exports.sbrk,Jt=Yt+3&-4,yn=In(Jt*Tn),Wt=In(hn.length),Xt=new Uint8Array(ht.exports.memory.buffer);Xt.set(hn,Wt);const Ln=St(yn,Yt,Tn,Wt,hn.length);if(Ln===0&&Cn&&Cn(yn,Jt,Tn),Rt.set(Xt.subarray(yn,yn+Yt*Tn)),In(yn-In(0)),Ln!==0)throw new Error(`Malformed buffer data: ${Ln}`)})(de,de.exports[Fe[Ze]],Be,pe,De,He,de.exports[Ie[xt]])}}}(fetch(AE()));return X.ready.then(()=>{Uw=X})}()),_)for(let X=0;X<_.length;X++)V.push(cF(_[X],c,X,o));return(V.length?Promise.all(V):Promise.resolve()).then(()=>{if($&&y)for(const{primitives:X}of y)for(const ee of X)aF(ee,c);if(U&&y&&R)for(const X of R)lF(X,c);return c})})}class NE{constructor(t){this.layers=t.layers,this.layerIds=this.layers.map(o=>o.fqid),this.hasPattern=!1,this.worldview=t.worldview}updateFootprints(t,o){}prepare(){return function(){if(jw!=null||kE!=null)return null;if(Wm!=null)return Wm;const t=fetch(ko.BUILDING_GEN_URL);return Wm=function(o){let c,h,_,y;function C(){c=new Uint8Array(y.buffer),h=new Int32Array(y.buffer),_=new Float32Array(y.buffer)}function R(){throw new Error("Unexpected BuildingGen error.")}const L=()=>{},V={a:{a:R,f:function($){const U=c.length,X=Math.max($>>>0,Math.ceil(1.2*U)),ee=Math.ceil((X-U)/65536);try{return y.grow(ee),C(),!0}catch{return!1}},g:R,b:L,c:L,d:L,e:L}};return(WebAssembly.instantiateStreaming?WebAssembly.instantiateStreaming(o,V):o.then($=>$.arrayBuffer()).then($=>WebAssembly.instantiate($,V))).then($=>{const U=$.instance.exports;return(0,U.g)(),y=U.f,C(),new sF({setStyle:U.h,setAOOptions:U.i,setMetricOptions:U.j,setFacadeOptions:U.k,addFeature:U.l,addFacade:U.m,generateMesh:U.n,getLastError:U.o,getMeshCount:U.p,getPositionsPtr:U.q,getPositionsLength:U.r,getNormalsPtr:U.s,getNormalsLength:U.t,getColorsPtr:U.u,getColorsLength:U.v,getAOPtr:U.w,getAOLength:U.x,getIndicesPtr:U.y,getIndicesLength:U.z,getBuildingPart:U.A,getRingCount:U.B,getRingPtr:U.C,getRingLength:U.D,free:U.E,malloc:U.F,heapU8:c,heap32:h,heapF32:_})})}(t).then(o=>(Wm=null,jw=o,jw)).catch(o=>{kn("Could not load building-gen"),Wm=null,kE=o}),Wm}()}populate(t,o,c,h){}update(t,o,c,h,_,y,C){}isEmpty(){return!1}uploadPending(){return!1}upload(t){}destroy(){}getHeightAtTileCoord(t,o){return{height:Number.NEGATIVE_INFINITY,hidden:!0}}}let FE,BE;Qn(NE,"BuildingBucket",{omit:["layers"]});const dF=zi([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),hF=zi([{name:"a_z_offset_width",components:3,type:"Float32"}],4),{members:fF}=dF,pF=zi([{name:"a_packed",components:3,type:"Float32"}]),{members:mF}=pF,gF=zi([{name:"a_pattern_data",components:3,type:"Float32"}]),{members:_F}=gF;class VE{constructor(t,o){this.width=t,this.height=o,this.nextRow=0,this.image=new Qh({width:t,height:o}),this.positions={},this.uploaded=!1}getDash(t,o){const c=this.getKey(t,o);return this.positions[c]}trim(){const t=this.width,o=this.height=Sn(this.nextRow);this.image.resize({width:t,height:o})}getKey(t,o){return t.join(",")+o}getDashRanges(t,o,c){const h=[];let _=t.length%2==1?-t[t.length-1]*c:0,y=t[0]*c,C=!0;h.push({left:_,right:y,isDash:C,zeroLength:t[0]===0});let R=t[0];for(let L=1;L<t.length;L++){C=!C;const V=t[L];_=R*c,R+=V,y=R*c,h.push({left:_,right:y,isDash:C,zeroLength:V===0})}return h}addRoundDash(t,o,c){const h=o/2;for(let _=-c;_<=c;_++){const y=this.width*(this.nextRow+c+_);let C=0,R=t[C];for(let L=0;L<this.width;L++){L/R.right>1&&(R=t[++C]);const V=Math.abs(L-R.left),$=Math.abs(L-R.right),U=Math.min(V,$);let X;const ee=_/c*(h+1);if(R.isDash){const de=h-Math.abs(ee);X=Math.sqrt(U*U+de*de)}else X=h-Math.sqrt(U*U+ee*ee);this.image.data[y+L]=Math.max(0,Math.min(255,X+128))}}}addRegularDash(t,o){for(let R=t.length-1;R>=0;--R){const L=t[R],V=t[R+1];L.zeroLength?t.splice(R,1):V&&V.isDash===L.isDash&&(V.left=L.left,t.splice(R,1))}const c=t[0],h=t[t.length-1];c.isDash===h.isDash&&(c.left=h.left-this.width,h.right=c.right+this.width);const _=this.width*this.nextRow;let y=0,C=t[y];for(let R=0;R<this.width;R++){R/C.right>1&&(C=t[++y]);const L=Math.abs(R-C.left),V=Math.abs(R-C.right),$=Math.min(L,V);this.image.data[_+R]=Math.max(0,Math.min(255,(C.isDash?$:-$)+o+128))}}addDash(t,o){const c=this.getKey(t,o);if(this.positions[c])return this.positions[c];const h=o==="round",_=h?7:0,y=2*_+1;if(this.nextRow+y>this.height)return kn("LineAtlas out of space"),null;t.length===0&&t.push(1);let C=0;for(let V=0;V<t.length;V++)t[V]<0&&(kn("Negative value is found in line dasharray, replacing values with 0"),t[V]=0),C+=t[V];if(C!==0){const V=this.width/C,$=this.getDashRanges(t,this.width,V);h?this.addRoundDash($,V,_):this.addRegularDash($,o==="square"?.5*V:0)}const R=this.nextRow+_;this.nextRow+=y;const L={tl:[R,_],br:[C,0]};return this.positions[c]=L,L}}Qn(VE,"LineAtlas");const vF=ii.VectorTileFeature.types,yF=Math.cos(Math.PI/180*37.5),bF=Math.cos(Math.PI/180*5);class qw{constructor(t){this.evaluationGlobals={zoom:0,lineProgress:void 0},this.elevationType="none",this.zoom=t.zoom,this.evaluationGlobals.zoom=this.zoom,this.overscaling=t.overscaling,this.pixelRatio=t.pixelRatio,this.layers=t.layers,this.layerIds=this.layers.map(o=>o.fqid),this.index=t.index,this.projection=t.projection,this.hasPattern=!1,this.hasCrossSlope=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(o=>{this.gradients[o.id]={}}),this.layoutVertexArray=new q0,this.layoutVertexArray2=new _u,this.patternVertexArray=new _u,this.indexArray=new Ho,this.programConfigurations=new f(t.layers,{zoom:t.zoom,lut:t.lut}),this.segments=new Us,this.maxLineLength=0,this.zOffsetVertexArray=new _u,this.stateDependentLayerIds=this.layers.filter(o=>o.isStateDependent()).map(o=>o.id),this.tessellationStep=t.tessellationStep?t.tessellationStep:Pn/64,this.worldview=t.worldview}updateFootprints(t,o){}populate(t,o,c,h){this.hasPattern=Mw("line",this.layers,this.pixelRatio,o);const _=this.layers[0].layout.get("line-sort-key");this.tileToMeter=Kt(c);const y=this.layers[0].layout.get("line-elevation-reference");if(y==="hd-road-markup")this.elevationType="road";else{const U=this.layers[0].layout.get("line-z-offset"),X=U.isConstant()&&!U.constantOr(0);this.elevationType=y!=="sea"&&y!=="ground"&&X?"none":"offset",this.elevationType==="offset"&&y==="none"&&kn(`line-elevation-reference: ground is used for the layer ${this.layerIds[0]} because non-zero line-z-offset value was found.`)}const C=this.layers[0].layout.get("line-cross-slope");this.hasCrossSlope=this.elevationType==="offset"&&C!==void 0;const R=[];for(const{feature:U,id:X,index:ee,sourceLayerIndex:de}of t){const be=this.layers[0]._featureFilter.needGeometry,Ie=Zn(U,be);if(!this.layers[0]._featureFilter.filter(new Qi(this.zoom,{worldview:this.worldview}),Ie,c))continue;const Fe=_?_.evaluate(Ie,{},c):void 0,Be={id:X,properties:U.properties,type:U.type,sourceLayerIndex:de,index:ee,geometry:be?Ie.geometry:tr(U,c,h),patterns:{},sortKey:Fe};R.push(Be)}_&&R.sort((U,X)=>U.sortKey-X.sortKey);const{lineAtlas:L,featureIndex:V}=o,$=this.addConstantDashes(L);for(const U of R){const{geometry:X,index:ee,sourceLayerIndex:de}=U;if($&&this.addFeatureDashes(U,L),this.hasPattern){const be=Aw("line",this.layers,U,this.zoom,this.pixelRatio,o);this.patternFeatures.push(be)}else this.addFeature(U,X,ee,c,L.positions,o.availableImages,o.brightness,o.elevationFeatures);V.insert(t[ee].feature,X,ee,de,this.index)}}addConstantDashes(t){let o=!1;for(const c of this.layers){const h=c.paint.get("line-dasharray").value,_=c.layout.get("line-cap").value;if(h.kind!=="constant"||_.kind!=="constant")o=!0;else{const y=_.value,C=h.value;if(!C)continue;t.addDash(C,y)}}return o}addFeatureDashes(t,o){const c=this.zoom;for(const h of this.layers){const _=h.paint.get("line-dasharray").value,y=h.layout.get("line-cap").value;if(_.kind==="constant"&&y.kind==="constant")continue;let C,R;if(_.kind==="constant"){if(C=_.value,!C)continue}else C=_.evaluate({zoom:c},t);R=y.kind==="constant"?y.value:y.evaluate({zoom:c},t),o.addDash(C,R),t.patterns[h.id]=[o.getKey(C,R)]}}update(t,o,c,h,_,y,C,R){this.programConfigurations.updatePaintArrays(t,o,_,c,h,y,C,R)}addFeatures(t,o,c,h,_,y){for(const C of this.patternFeatures)this.addFeature(C,C.geometry,C.index,o,c,h,y)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=t.createVertexBuffer(this.layoutVertexArray2,mF)),this.patternVertexArray.length!==0&&(this.patternVertexBuffer=t.createVertexBuffer(this.patternVertexArray,_F)),!this.zOffsetVertexBuffer&&this.zOffsetVertexArray.length>0&&(this.zOffsetVertexBuffer=t.createVertexBuffer(this.zOffsetVertexArray,hF.members,!0)),this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,fF),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.zOffsetVertexBuffer&&this.zOffsetVertexBuffer.destroy(),this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(t){if(t.properties&&t.properties.hasOwnProperty("mapbox_clip_start")&&t.properties.hasOwnProperty("mapbox_clip_end"))return{start:+t.properties.mapbox_clip_start,end:+t.properties.mapbox_clip_end}}addFeature(t,o,c,h,_,y,C,R){const L=this.layers[0].layout,V=L.get("line-join").evaluate(t,{}),$=L.get("line-cap").evaluate(t,{}),U=L.get("line-miter-limit"),X=L.get("line-round-limit");this.lineClips=this.lineFeatureClips(t),this.lineFeature=t,this.zOffsetValue=L.get("line-z-offset").value;const ee=this.layers[0].paint.get("line-width").value;if(ee.kind!=="constant"&&ee.isLineProgressConstant===!1&&(this.variableWidthValue=ee),this.elevationType==="road"){const de=this.layoutVertexArray.length;if(!this.addElevatedRoadFeature(t,o,h,R,V,$,U,X)){const[be,Ie]=this.clipRuntimeLinesToTile(o,1);for(let Fe=0;Fe<be.length;Fe++){const Be=be[Fe],pe=Ie[Fe],De={progress:{min:pe.progress.min,max:pe.progress.max},nextDir:this.computeSegNextDir(pe,Be),prevDir:this.computeSegPrevDir(pe,Be)};this.addLine(Be,t,h,V,$,U,X,De)}this.fillNonElevatedRoadSegment(de)}}else for(const de of o)this.addLine(de,t,h,V,$,U,X);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,c,_,y,h,C,void 0,this.worldview)}computeSegNextDir(t,o){return t.nextPoint.sub(o.at(-2)).unit()}computeSegPrevDir(t,o){return o[1].sub(t.prevPoint).unit()}clipLinesToTile(t,o){return w1(t,-o,-o,Pn+o,Pn+o)}clipRuntimeLinesToTile(t,o){const c=[];return[w1(t,-o,-o,Pn+o,Pn+o,c),c]}addElevatedRoadFeature(t,o,c,h,_,y,C,R){const L=[],V=hl.getElevationFeature(t,h);if(V){const $=this.clipLinesToTile(o,1),U=this.prepareElevatedLines($,V,c);for(const X of U)L.push({geometry:X,elevation:V,elevationTileID:c,segment:{progress:{min:0,max:1},nextDir:void 0,prevDir:void 0}})}if(L.length===0)return!1;for(const $ of L){const U=this.layoutVertexArray.length;this.addLine($.geometry,t,c,_,y,C,R);const X=new Ql(c,$.elevationTileID);if($.elevation)for(let ee=U;ee<this.layoutVertexArray.length;ee++){const de=new Rn(this.layoutVertexArray.int16[6*ee]>>1,this.layoutVertexArray.int16[6*ee+1]>>1),be=X.pointElevation(de,$.elevation,.05);this.updateHeightRange(be),this.zOffsetVertexArray.emplaceBack(be,0,0)}else this.fillNonElevatedRoadSegment(U)}return!0}prepareElevatedLines(t,o,c){if(o.constantHeight!=null)return t;const h=[],_=1/Kt(c);for(const y of t)nF(y,new Ya(o,_),0,h);return h}fillNonElevatedRoadSegment(t){for(let o=t;o<this.layoutVertexArray.length;o++)this.zOffsetVertexArray.emplaceBack(0,0,0)}updateHeightRange(t){this.heightRange?(this.heightRange.min=Math.min(this.heightRange.min,t),this.heightRange.max=Math.max(this.heightRange.max,t)):this.heightRange={min:t,max:t}}addLine(t,o,c,h,_,y,C,R){this.distance=0,this.prevDistance=0,this.scaledDistance=0,this.totalDistance=0,this.totalFeatureLength=0,this.lineSoFar=0,this.currentVertex=void 0;const L=h==="none";this.patternJoinNone=this.hasPattern&&L,this.segmentStart=0,this.segmentStartf32=0,this.segmentPoints=[];const V=R&&R.progress.min>0,$=R&&R.progress.max<1;if(this.lineClips){let xt={min:this.lineClips.start,max:this.lineClips.end},ht=1;if(R){const Yt=this.lineClips.end-this.lineClips.start;xt=function(Tn,hn,Cn){return{min:zu(Tn.min,hn,Cn),max:zu(Tn.max,hn,Cn)}}(R.progress,{min:0,max:1},xt),Yt>0&&(ht=(xt.max-xt.min)/Yt)}const St=+o.properties.mapbox_clip_feature_len,Rt=+o.properties.mapbox_clip_seg_len;if(Number.isNaN(St)||Number.isNaN(Rt)){for(let Tn=0;Tn<t.length-1;Tn++)this.totalDistance+=t[Tn].dist(t[Tn+1]);const Yt=this.totalDistance/(xt.max-xt.min);this.totalFeatureLength=Number.isFinite(Yt)?Yt:0,this.lineClips.start=xt.min,this.lineClips.end=xt.max,this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}else this.totalFeatureLength=St,this.distance=Rt*ht,this.lineClips.start=xt.min,this.lineClips.end=xt.max,this.maxLineLength=Math.max(this.maxLineLength,this.distance);this.lineClipsArray.push(this.lineClips),this.updateScaledDistance()}const U=vF[o.type]==="Polygon";let X=t.length;for(;X>=2&&t[X-1].equals(t[X-2]);)X--;let ee=0;for(;ee<X-1&&t[ee].equals(t[ee+1]);)ee++;if(X<(U?3:2))return;h==="bevel"&&(y=1.05);const de=this.segments.prepareSegment(10*X,this.layoutVertexArray,this.indexArray);let be,Ie,Fe,Be,pe,De,He,Ze;R&&R.prevDir&&(De=R.prevDir.perp()),R&&R.nextDir&&(He=R.nextDir.perp()),this.e1=this.e2=-1,U&&(be=t[X-2],pe=t[ee].sub(be)._unit()._perp());for(let xt=ee;xt<X;xt++){if(Fe=xt===X-1?U?t[ee+1]:void 0:t[xt+1],Fe&&t[xt].equals(Fe))continue;pe&&(Be=pe),be&&(Ie=be),be=t[xt],Ze=this.evaluateLineProgressFeatures(Ie?Ie.dist(be):0),pe=Fe?Fe.sub(be)._unit()._perp():Be,Be=Be||pe;const ht=Ie&&Fe;let St=ht?h:U||L?"butt":_;const Rt=Be.x*pe.x+Be.y*pe.y;if(L){const Wt=function(Xt){if(Xt.patternJoinNone){const Ln=Xt.segmentPoints.length/2,Dn=Xt.lineSoFar-Xt.segmentStart;for(let Cr=0;Cr<Ln;++Cr){const lr=Xt.segmentPoints[2*Cr+1],Hn=Math.round(Xt.segmentPoints[2*Cr])+.5+.25*lr;Xt.patternVertexArray.emplaceBack(Hn,Dn,Xt.segmentStart),Xt.patternVertexArray.emplaceBack(Hn,Dn,Xt.segmentStart)}Xt.segmentPoints.length=0}Xt.e1=Xt.e2=-1};if(ht&&Rt<bF){this.updateDistance(Ie,be),this.addCurrentVertex(be,Be,1,1,de,Ze),Wt(this),this.addCurrentVertex(be,pe,-1,-1,de,Ze);continue}if(Ie){if(!Fe){this.updateDistance(Ie,be),this.addCurrentVertex(be,Be,1,1,de,Ze),Wt(this);continue}St="miter"}}let Yt=Be.add(pe);Yt.x===0&&Yt.y===0||Yt._unit();const Tn=Yt.x*pe.x+Yt.y*pe.y,hn=Tn!==0?1/Tn:1/0,Cn=2*Math.sqrt(2-2*Tn),In=Tn<yF&&Ie&&Fe,Jt=Be.x*pe.y-Be.y*pe.x>0,yn=this.overscaling<=16?15*Pn/(512*this.overscaling):0;if(ht&&St==="round"){if(hn<C)St="miter";else if(hn<=2){const Wt=Ww(be,-10,Pn+10);St=this.elevationType==="offset"&&(Wt||this.hasCrossSlope)?"miter":"fakeround"}}if(St==="miter"&&hn>y&&(St="bevel"),St==="bevel"&&(hn>2&&(St="flipbevel"),hn<y&&(St="miter")),Ie&&!(St==="miter"&&In)&&this.updateDistance(Ie,be),St==="miter")if(In){const Wt=be.dist(Ie);if(Wt>2*yn){const Ln=be.sub(be.sub(Ie)._mult(yn/Wt)._round());this.updateDistance(Ie,Ln),this.addCurrentVertex(Ln,Be,0,0,de,Ze),Ie=Ln}this.updateDistance(Ie,be),Yt._mult(hn),this.addCurrentVertex(be,Yt,0,0,de,Ze);const Xt=be.dist(Fe);if(Xt>2*yn){const Ln=be.add(Fe.sub(be)._mult(yn/Xt)._round());this.updateDistance(be,Ln),this.addCurrentVertex(Ln,pe,0,0,de,Ze),be=Ln}}else Yt._mult(hn),this.addCurrentVertex(be,Yt,0,0,de,Ze);else if(St==="flipbevel"){if(hn>100)Yt=pe.mult(-1);else{const Wt=hn*Be.add(pe).mag()/Be.sub(pe).mag();Yt._perp()._mult(Wt*(Jt?-1:1))}this.addCurrentVertex(be,Yt,0,0,de,Ze),this.addCurrentVertex(be,Yt.mult(-1),0,0,de,Ze)}else if(St==="bevel"||St==="fakeround"){Ze!=null&&Ie&&this.addCurrentVertex(be,He||Be,-1,-1,de,Ze);const Wt=be.dist(Ie)<=2*yn&&St!=="bevel",Xt=Yt.mult(Jt?1:-1);Xt._mult(hn);const Ln=pe.mult(Jt?-1:1),Dn=Be.mult(Jt?-1:1),Cr=this.evaluateLineProgressFeatures(this.distance);if(Ze==null&&(this.addHalfVertex(be,Xt.x,Xt.y,!1,!Jt,0,de,Cr),Wt||this.addHalfVertex(be,Xt.x+2*Dn.x,Xt.y+2*Dn.y,!1,Jt,0,de,Cr)),St==="fakeround"){const lr=Math.round(180*Cn/Math.PI/20);this.addHalfVertex(be,Dn.x,Dn.y,!1,Jt,0,de,Cr);for(let Hn=0;Hn<lr;Hn++){let An=Hn/lr;if(An!==.5){const ar=An-.5;An+=An*ar*(An-1)*((1.0904+Rt*(Rt*(3.55645-1.43519*Rt)-3.2452))*ar*ar+(.848013+Rt*(.215638*Rt-1.06021)))}const qr=Ln.sub(Dn)._mult(An)._add(Dn)._unit();this.addHalfVertex(be,qr.x,qr.y,!1,Jt,0,de,Cr)}this.addHalfVertex(be,Ln.x,Ln.y,!1,Jt,0,de,Cr)}Wt||Ze!=null||this.addHalfVertex(be,Xt.x+2*Ln.x,Xt.y+2*Ln.y,!1,Jt,0,de,Cr),Ze!=null&&Fe&&this.addCurrentVertex(be,De||pe,1,1,de,Ze)}else if(St==="butt")this.addCurrentVertex(be,Yt,0,0,de,Ze);else if(St==="square"){if(!Ie){const Wt=V?0:-1;this.addCurrentVertex(be,Yt,Wt,Wt,de,Ze)}if(this.addCurrentVertex(be,Yt,0,0,de,Ze),Ie){const Wt=$?0:1;this.addCurrentVertex(be,Yt,Wt,Wt,de,Ze)}}else if(St==="round"){if(Ie){const Wt=!ht&&He?He:Be;this.addCurrentVertex(be,Wt,0,0,de,Ze),!ht&&$||this.addCurrentVertex(be,Wt,1,1,de,Ze,!0)}if(Fe){const Wt=!ht&&De?De:pe;!ht&&V||this.addCurrentVertex(be,Wt,-1,-1,de,Ze,!0),this.addCurrentVertex(be,Wt,0,0,de,Ze)}}}}addVerticesTo(t,o,c,h,_,y,C,R,L,V){const $=(o.w-t.w)/this.tessellationStep|0;let U=0;const X=this.scaledDistance;if($>1){this.lineSoFar=t.w;const de=(o.x-t.x)/$,be=(o.y-t.y)/$,Ie=(o.z-t.z)/$,Fe=(o.w-t.w)/$;for(let Be=1;Be<$;++Be){t.x+=de,t.y+=be,t.z+=Ie,this.lineSoFar+=Fe,U+=Fe;const pe=this.evaluateLineProgressFeatures(this.prevDistance+U);this.scaledDistance=(this.prevDistance+U)/this.totalDistance,this.addHalfVertex(t,c,h,V,!1,C,L,pe),this.addHalfVertex(t,_,y,V,!0,-R,L,pe)}}this.lineSoFar=o.w,this.scaledDistance=X;const ee=this.evaluateLineProgressFeatures(this.distance);this.addHalfVertex(o,c,h,V,!1,C,L,ee),this.addHalfVertex(o,_,y,V,!0,-R,L,ee)}evaluateLineProgressFeatures(t){if(!this.variableWidthValue&&this.elevationType!=="offset")return null;this.evaluationGlobals.lineProgress=0,this.lineClips?this.evaluationGlobals.lineProgress=Math.min(1,(this.totalFeatureLength*this.lineClips.start+t)/this.totalFeatureLength):kn(`line-progress evaluation for ${this.layerIds[0]} requires enabling 'lineMetrics' for the source.`);let o=0;return this.variableWidthValue&&this.variableWidthValue.kind!=="constant"&&(o=this.variableWidthValue.evaluate(this.evaluationGlobals,this.lineFeature)||0),this.elevationType!=="offset"?{zOffset:0,variableWidth:o}:this.zOffsetValue.kind==="constant"?{zOffset:this.zOffsetValue.value,variableWidth:o}:{zOffset:this.zOffsetValue.evaluate(this.evaluationGlobals,this.lineFeature)||0,variableWidth:o}}addCurrentVertex(t,o,c,h,_,y,C=!1){const R=o.x+o.y*c,L=o.y-o.x*c,V=o.y*h-o.x,$=-o.y-o.x*h;if(y!=null){const U=this.elevationType==="offset",X=-10,ee=Pn+10,de=y.zOffset,be=new xE(t.x,t.y,de,this.lineSoFar),Ie=!!U&&Ww(t,X,ee),Fe=this.lineSoFar,Be=this.distance;if(this.currentVertex)if(Ie){const pe=this.currentVertexIsOutside,De=this.currentVertex,He=new xE(t.x,t.y,de,this.lineSoFar);if(SE(De,He,X,ee),!Ww(He,X,ee)){if(pe){this.e1=this.e2=-1,this.distance-=De.dist(be),this.lineSoFar=De.w;const Ze=this.evaluateLineProgressFeatures(De.w-this.totalFeatureLength*(this.lineClips?this.lineClips.start:0));this.addHalfVertex(De,R,L,C,!1,c,_,Ze),this.addHalfVertex(De,V,$,C,!0,-h,_,Ze),this.prevDistance=this.distance}this.distance=this.prevDistance+De.dist(He),this.scaledDistance=this.distance/this.totalDistance,this.addVerticesTo(De,He,R,L,V,$,c,h,_,C),this.distance=Be,this.scaledDistance=this.distance/this.totalDistance}}else{const pe=this.currentVertex;if(this.currentVertexIsOutside){SE(pe,be,X,ee),this.e1=this.e2=-1,this.distance-=pe.dist(be),this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=pe.w;const De=this.evaluateLineProgressFeatures(pe.w-this.totalFeatureLength*(this.lineClips?this.lineClips.start:0));this.addHalfVertex(pe,R,L,C,!1,c,_,De),this.addHalfVertex(pe,V,$,C,!0,-h,_,De),this.prevDistance=this.distance,this.distance=Be,this.scaledDistance=this.distance/this.totalDistance}this.addVerticesTo(pe,be,R,L,V,$,c,h,_,C)}else Ie||(this.addHalfVertex(t,R,L,C,!1,c,_,y),this.addHalfVertex(t,V,$,C,!0,-h,_,y));this.currentVertex=be,this.currentVertexIsOutside=Ie,this.lineSoFar=Fe}else this.addHalfVertex(t,R,L,C,!1,c,_,y),this.addHalfVertex(t,V,$,C,!0,-h,_,y)}addHalfVertex({x:t,y:o},c,h,_,y,C,R,L){if(this.patternJoinNone&&(this.segmentPoints.length===0&&(this.segmentStart=this.lineSoFar,this.segmentStartf32=Math.fround(this.lineSoFar)),y||this.segmentPoints.push(this.lineSoFar-this.segmentStart,C)),this.layoutVertexArray.emplaceBack((t<<1)+(_?1:0),(o<<1)+(y?1:0),Math.round(63*c)+128,Math.round(63*h)+128,1+(C===0?0:C<0?-1:1),0,this.lineSoFar-this.segmentStartf32),this.lineClips){const $=Dr(this.lineClips.start,this.lineClips.end,this.scaledDistance);this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,$)}const V=R.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,V),R.primitiveLength++),y?this.e2=V:this.e1=V,L!=null&&this.zOffsetVertexArray.emplaceBack(L.zOffset,L.variableWidth,L.variableWidth)}updateScaledDistance(){this.lineClips?(this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=this.totalFeatureLength*this.lineClips.start+this.distance):this.lineSoFar=this.distance}updateDistance(t,o){this.prevDistance=this.distance,this.distance+=t.dist(o),this.updateScaledDistance()}}function Ww(a,t,o){return a.x<t||a.x>o||a.y<t||a.y>o}let $E,HE;function UE(a,t,o){return t*(Pn/(a.tileSize*Math.pow(2,o-a.tileID.overscaledZ)))}Qn(qw,"LineBucket",{omit:["layers","patternFeatures","currentVertex","currentVertexIsOutside"]});const jE=(a,t,o)=>(1-o)*a+o*t;function GE(a,t){return 1/UE(a,1,t.tileZoom)}function qE(a,t,o,c){return a.translatePosMatrix(c||t.tileID.projMatrix,t,o.paint.get("line-translate"),o.paint.get("line-translate-anchor"))}const WE=a=>{const t=[];KE(a)&&t.push("RENDER_LINE_DASH"),a.paint.get("line-gradient")&&t.push("RENDER_LINE_GRADIENT");const o=a.paint.get("line-trim-offset");o[0]===0&&o[1]===0||t.push("RENDER_LINE_TRIM_OFFSET"),a.paint.get("line-border-width").constantOr(1)!==0&&t.push("RENDER_LINE_BORDER");const c=a.layout.get("line-join").constantOr("miter")==="none",h=!!a.paint.get("line-pattern").constantOr(1);return c&&h&&t.push("LINE_JOIN_NONE"),t};function KE(a){const t=a.paint.get("line-dasharray").value;return t.value||t.kind!=="constant"}let Kw;const YE=()=>Kw||(Kw={layout:$E||($E=new Vs({"line-cap":new Yn(Dt.layout_line["line-cap"]),"line-join":new Yn(Dt.layout_line["line-join"]),"line-miter-limit":new Mn(Dt.layout_line["line-miter-limit"]),"line-round-limit":new Mn(Dt.layout_line["line-round-limit"]),"line-sort-key":new Yn(Dt.layout_line["line-sort-key"]),"line-z-offset":new Yn(Dt.layout_line["line-z-offset"]),"line-elevation-reference":new Mn(Dt.layout_line["line-elevation-reference"]),"line-cross-slope":new Mn(Dt.layout_line["line-cross-slope"]),visibility:new Mn(Dt.layout_line.visibility),"line-width-unit":new Mn(Dt.layout_line["line-width-unit"])})),paint:HE||(HE=new Vs({"line-opacity":new Yn(Dt.paint_line["line-opacity"]),"line-color":new Yn(Dt.paint_line["line-color"]),"line-translate":new Mn(Dt.paint_line["line-translate"]),"line-translate-anchor":new Mn(Dt.paint_line["line-translate-anchor"]),"line-width":new Yn(Dt.paint_line["line-width"]),"line-gap-width":new Yn(Dt.paint_line["line-gap-width"]),"line-offset":new Yn(Dt.paint_line["line-offset"]),"line-blur":new Yn(Dt.paint_line["line-blur"]),"line-dasharray":new Yn(Dt.paint_line["line-dasharray"]),"line-pattern":new Yn(Dt.paint_line["line-pattern"]),"line-pattern-cross-fade":new Mn(Dt.paint_line["line-pattern-cross-fade"]),"line-gradient":new qd(Dt.paint_line["line-gradient"]),"line-trim-offset":new Mn(Dt.paint_line["line-trim-offset"]),"line-trim-fade-range":new Mn(Dt.paint_line["line-trim-fade-range"]),"line-trim-color":new Mn(Dt.paint_line["line-trim-color"]),"line-emissive-strength":new Mn(Dt.paint_line["line-emissive-strength"]),"line-border-width":new Yn(Dt.paint_line["line-border-width"]),"line-border-color":new Yn(Dt.paint_line["line-border-color"]),"line-occlusion-opacity":new Mn(Dt.paint_line["line-occlusion-opacity"]),"line-color-use-theme":new Yn({type:"string",default:"default","property-type":"data-driven"}),"line-gradient-use-theme":new Yn({type:"string",default:"default","property-type":"data-driven"}),"line-trim-color-use-theme":new Yn({type:"string",default:"default","property-type":"data-driven"}),"line-border-color-use-theme":new Yn({type:"string",default:"default","property-type":"data-driven"})}))},Kw);class xF extends Yn{possiblyEvaluate(t,o){return o=new Qi(Math.floor(o.zoom),{now:o.now,fadeDuration:o.fadeDuration,transition:o.transition,worldview:o.worldview}),super.possiblyEvaluate(t,o)}evaluate(t,o,c,h){return o=_t({},o,{zoom:Math.floor(o.zoom)}),super.evaluate(t,o,c,h)}}let w_;function ZE(a,t){return t>0?t+2*a:a}const wF=zi([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),SF=zi([{name:"a_globe_anchor",components:3,type:"Int16"},{name:"a_globe_normal",components:3,type:"Float32"}],4),CF=zi([{name:"a_projected_pos",components:4,type:"Float32"}],4);zi([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const EF=zi([{name:"a_auto_z_offset",components:1,type:"Float32"}],4),TF=zi([{name:"a_x_axis",components:3,type:"Float32"},{name:"a_y_axis",components:3,type:"Float32"}]),IF=zi([{name:"a_texb",components:2,type:"Uint16"}]),kF=zi([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_elevation_from_sea",components:2,type:"Float32"}]),MF=zi([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"},{name:"a_auto_z_offset",components:1,type:"Float32"}]);zi([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const XE=zi([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),AF=zi([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);zi([{name:"triangle",components:3,type:"Uint16"}]),zi([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),zi([{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Float32",name:"zOffset"},{type:"Uint8",name:"hasIconTextFit"},{type:"Uint16",name:"elevationFeatureIndex"}]),zi([{type:"Float32",name:"offsetX"}]),zi([{type:"Int16",name:"x"},{type:"Int16",name:"y"}]);var zo=24;function RF(a,t,o){return a.sections.forEach(c=>{c.text=function(h,_,y){const C=_.layout.get("text-transform").evaluate(y,{});return C==="uppercase"?h=h.toLocaleUpperCase():C==="lowercase"&&(h=h.toLocaleLowerCase()),Qu.applyArabicShaping&&(h=Qu.applyArabicShaping(h)),h}(c.text,t,o)}),a}const S_={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};function PF(a){return a===""||a===""||a===""||a===""||a===""||a===""||a===""||a===""||a===""||a===""||a===""||a===""||a===""||a===""||a===""||a===""||a===""}function LF(a){return a===""||a===""||a===""||a===""||a===""||a===""||a===""||a===""||a===""||a===""}var JE,Yw,QE,Zw={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */function OF(){return JE||(JE=1,Zw.read=function(a,t,o,c,h){var _,y,C=8*h-c-1,R=(1<<C)-1,L=R>>1,V=-7,$=o?h-1:0,U=o?-1:1,X=a[t+$];for($+=U,_=X&(1<<-V)-1,X>>=-V,V+=C;V>0;_=256*_+a[t+$],$+=U,V-=8);for(y=_&(1<<-V)-1,_>>=-V,V+=c;V>0;y=256*y+a[t+$],$+=U,V-=8);if(_===0)_=1-L;else{if(_===R)return y?NaN:1/0*(X?-1:1);y+=Math.pow(2,c),_-=L}return(X?-1:1)*y*Math.pow(2,_-c)},Zw.write=function(a,t,o,c,h,_){var y,C,R,L=8*_-h-1,V=(1<<L)-1,$=V>>1,U=h===23?Math.pow(2,-24)-Math.pow(2,-77):0,X=c?0:_-1,ee=c?1:-1,de=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(C=isNaN(t)?1:0,y=V):(y=Math.floor(Math.log(t)/Math.LN2),t*(R=Math.pow(2,-y))<1&&(y--,R*=2),(t+=y+$>=1?U/R:U*Math.pow(2,1-$))*R>=2&&(y++,R/=2),y+$>=V?(C=0,y=V):y+$>=1?(C=(t*R-1)*Math.pow(2,h),y+=$):(C=t*Math.pow(2,$-1)*Math.pow(2,h),y=0));h>=8;a[o+X]=255&C,X+=ee,C/=256,h-=8);for(y=y<<h|C,L+=h;L>0;a[o+X]=255&y,X+=ee,y/=256,L-=8);a[o+X-ee]|=128*de}),Zw}function eT(){if(QE)return Yw;QE=1,Yw=t;var a=OF();function t(pe){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(pe)?pe:new Uint8Array(pe||0),this.pos=0,this.type=0,this.length=this.buf.length}t.Varint=0,t.Fixed64=1,t.Bytes=2,t.Fixed32=5;var o=4294967296,c=1/o,h=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function _(pe){return pe.type===t.Bytes?pe.readVarint()+pe.pos:pe.pos+1}function y(pe,De,He){return He?4294967296*De+(pe>>>0):4294967296*(De>>>0)+(pe>>>0)}function C(pe,De,He){var Ze=De<=16383?1:De<=2097151?2:De<=268435455?3:Math.floor(Math.log(De)/(7*Math.LN2));He.realloc(Ze);for(var xt=He.pos-1;xt>=pe;xt--)He.buf[xt+Ze]=He.buf[xt]}function R(pe,De){for(var He=0;He<pe.length;He++)De.writeVarint(pe[He])}function L(pe,De){for(var He=0;He<pe.length;He++)De.writeSVarint(pe[He])}function V(pe,De){for(var He=0;He<pe.length;He++)De.writeFloat(pe[He])}function $(pe,De){for(var He=0;He<pe.length;He++)De.writeDouble(pe[He])}function U(pe,De){for(var He=0;He<pe.length;He++)De.writeBoolean(pe[He])}function X(pe,De){for(var He=0;He<pe.length;He++)De.writeFixed32(pe[He])}function ee(pe,De){for(var He=0;He<pe.length;He++)De.writeSFixed32(pe[He])}function de(pe,De){for(var He=0;He<pe.length;He++)De.writeFixed64(pe[He])}function be(pe,De){for(var He=0;He<pe.length;He++)De.writeSFixed64(pe[He])}function Ie(pe,De){return(pe[De]|pe[De+1]<<8|pe[De+2]<<16)+16777216*pe[De+3]}function Fe(pe,De,He){pe[He]=De,pe[He+1]=De>>>8,pe[He+2]=De>>>16,pe[He+3]=De>>>24}function Be(pe,De){return(pe[De]|pe[De+1]<<8|pe[De+2]<<16)+(pe[De+3]<<24)}return t.prototype={destroy:function(){this.buf=null},readFields:function(pe,De,He){for(He=He||this.length;this.pos<He;){var Ze=this.readVarint(),xt=Ze>>3,ht=this.pos;this.type=7&Ze,pe(xt,De,this),this.pos===ht&&this.skip(Ze)}return De},readMessage:function(pe,De){return this.readFields(pe,De,this.readVarint()+this.pos)},readFixed32:function(){var pe=Ie(this.buf,this.pos);return this.pos+=4,pe},readSFixed32:function(){var pe=Be(this.buf,this.pos);return this.pos+=4,pe},readFixed64:function(){var pe=Ie(this.buf,this.pos)+Ie(this.buf,this.pos+4)*o;return this.pos+=8,pe},readSFixed64:function(){var pe=Ie(this.buf,this.pos)+Be(this.buf,this.pos+4)*o;return this.pos+=8,pe},readFloat:function(){var pe=a.read(this.buf,this.pos,!0,23,4);return this.pos+=4,pe},readDouble:function(){var pe=a.read(this.buf,this.pos,!0,52,8);return this.pos+=8,pe},readVarint:function(pe){var De,He,Ze=this.buf;return De=127&(He=Ze[this.pos++]),He<128?De:(De|=(127&(He=Ze[this.pos++]))<<7,He<128?De:(De|=(127&(He=Ze[this.pos++]))<<14,He<128?De:(De|=(127&(He=Ze[this.pos++]))<<21,He<128?De:function(xt,ht,St){var Rt,Yt,Tn=St.buf;if(Rt=(112&(Yt=Tn[St.pos++]))>>4,Yt<128||(Rt|=(127&(Yt=Tn[St.pos++]))<<3,Yt<128)||(Rt|=(127&(Yt=Tn[St.pos++]))<<10,Yt<128)||(Rt|=(127&(Yt=Tn[St.pos++]))<<17,Yt<128)||(Rt|=(127&(Yt=Tn[St.pos++]))<<24,Yt<128)||(Rt|=(1&(Yt=Tn[St.pos++]))<<31,Yt<128))return y(xt,Rt,ht);throw new Error("Expected varint not more than 10 bytes")}(De|=(15&(He=Ze[this.pos]))<<28,pe,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var pe=this.readVarint();return pe%2==1?(pe+1)/-2:pe/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var pe=this.readVarint()+this.pos,De=this.pos;return this.pos=pe,pe-De>=12&&h?function(He,Ze,xt){return h.decode(He.subarray(Ze,xt))}(this.buf,De,pe):function(He,Ze,xt){for(var ht="",St=Ze;St<xt;){var Rt,Yt,Tn,hn=He[St],Cn=null,In=hn>239?4:hn>223?3:hn>191?2:1;if(St+In>xt)break;In===1?hn<128&&(Cn=hn):In===2?(192&(Rt=He[St+1]))==128&&(Cn=(31&hn)<<6|63&Rt)<=127&&(Cn=null):In===3?(Yt=He[St+2],(192&(Rt=He[St+1]))==128&&(192&Yt)==128&&((Cn=(15&hn)<<12|(63&Rt)<<6|63&Yt)<=2047||Cn>=55296&&Cn<=57343)&&(Cn=null)):In===4&&(Yt=He[St+2],Tn=He[St+3],(192&(Rt=He[St+1]))==128&&(192&Yt)==128&&(192&Tn)==128&&((Cn=(15&hn)<<18|(63&Rt)<<12|(63&Yt)<<6|63&Tn)<=65535||Cn>=1114112)&&(Cn=null)),Cn===null?(Cn=65533,In=1):Cn>65535&&(Cn-=65536,ht+=String.fromCharCode(Cn>>>10&1023|55296),Cn=56320|1023&Cn),ht+=String.fromCharCode(Cn),St+=In}return ht}(this.buf,De,pe)},readBytes:function(){var pe=this.readVarint()+this.pos,De=this.buf.subarray(this.pos,pe);return this.pos=pe,De},readPackedVarint:function(pe,De){if(this.type!==t.Bytes)return pe.push(this.readVarint(De));var He=_(this);for(pe=pe||[];this.pos<He;)pe.push(this.readVarint(De));return pe},readPackedSVarint:function(pe){if(this.type!==t.Bytes)return pe.push(this.readSVarint());var De=_(this);for(pe=pe||[];this.pos<De;)pe.push(this.readSVarint());return pe},readPackedBoolean:function(pe){if(this.type!==t.Bytes)return pe.push(this.readBoolean());var De=_(this);for(pe=pe||[];this.pos<De;)pe.push(this.readBoolean());return pe},readPackedFloat:function(pe){if(this.type!==t.Bytes)return pe.push(this.readFloat());var De=_(this);for(pe=pe||[];this.pos<De;)pe.push(this.readFloat());return pe},readPackedDouble:function(pe){if(this.type!==t.Bytes)return pe.push(this.readDouble());var De=_(this);for(pe=pe||[];this.pos<De;)pe.push(this.readDouble());return pe},readPackedFixed32:function(pe){if(this.type!==t.Bytes)return pe.push(this.readFixed32());var De=_(this);for(pe=pe||[];this.pos<De;)pe.push(this.readFixed32());return pe},readPackedSFixed32:function(pe){if(this.type!==t.Bytes)return pe.push(this.readSFixed32());var De=_(this);for(pe=pe||[];this.pos<De;)pe.push(this.readSFixed32());return pe},readPackedFixed64:function(pe){if(this.type!==t.Bytes)return pe.push(this.readFixed64());var De=_(this);for(pe=pe||[];this.pos<De;)pe.push(this.readFixed64());return pe},readPackedSFixed64:function(pe){if(this.type!==t.Bytes)return pe.push(this.readSFixed64());var De=_(this);for(pe=pe||[];this.pos<De;)pe.push(this.readSFixed64());return pe},skip:function(pe){var De=7&pe;if(De===t.Varint)for(;this.buf[this.pos++]>127;);else if(De===t.Bytes)this.pos=this.readVarint()+this.pos;else if(De===t.Fixed32)this.pos+=4;else{if(De!==t.Fixed64)throw new Error("Unimplemented type: "+De);this.pos+=8}},writeTag:function(pe,De){this.writeVarint(pe<<3|De)},realloc:function(pe){for(var De=this.length||16;De<this.pos+pe;)De*=2;if(De!==this.length){var He=new Uint8Array(De);He.set(this.buf),this.buf=He,this.length=De}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(pe){this.realloc(4),Fe(this.buf,pe,this.pos),this.pos+=4},writeSFixed32:function(pe){this.realloc(4),Fe(this.buf,pe,this.pos),this.pos+=4},writeFixed64:function(pe){this.realloc(8),Fe(this.buf,-1&pe,this.pos),Fe(this.buf,Math.floor(pe*c),this.pos+4),this.pos+=8},writeSFixed64:function(pe){this.realloc(8),Fe(this.buf,-1&pe,this.pos),Fe(this.buf,Math.floor(pe*c),this.pos+4),this.pos+=8},writeVarint:function(pe){(pe=+pe||0)>268435455||pe<0?function(De,He){var Ze,xt;if(De>=0?(Ze=De%4294967296|0,xt=De/4294967296|0):(xt=~(-De/4294967296),4294967295^(Ze=~(-De%4294967296))?Ze=Ze+1|0:(Ze=0,xt=xt+1|0)),De>=18446744073709552e3||De<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");He.realloc(10),function(ht,St,Rt){Rt.buf[Rt.pos++]=127&ht|128,ht>>>=7,Rt.buf[Rt.pos++]=127&ht|128,ht>>>=7,Rt.buf[Rt.pos++]=127&ht|128,ht>>>=7,Rt.buf[Rt.pos++]=127&ht|128,Rt.buf[Rt.pos]=127&(ht>>>=7)}(Ze,0,He),function(ht,St){var Rt=(7&ht)<<4;St.buf[St.pos++]|=Rt|((ht>>>=3)?128:0),ht&&(St.buf[St.pos++]=127&ht|((ht>>>=7)?128:0),ht&&(St.buf[St.pos++]=127&ht|((ht>>>=7)?128:0),ht&&(St.buf[St.pos++]=127&ht|((ht>>>=7)?128:0),ht&&(St.buf[St.pos++]=127&ht|((ht>>>=7)?128:0),ht&&(St.buf[St.pos++]=127&ht)))))}(xt,He)}(pe,this):(this.realloc(4),this.buf[this.pos++]=127&pe|(pe>127?128:0),pe<=127||(this.buf[this.pos++]=127&(pe>>>=7)|(pe>127?128:0),pe<=127||(this.buf[this.pos++]=127&(pe>>>=7)|(pe>127?128:0),pe<=127||(this.buf[this.pos++]=pe>>>7&127))))},writeSVarint:function(pe){this.writeVarint(pe<0?2*-pe-1:2*pe)},writeBoolean:function(pe){this.writeVarint(!!pe)},writeString:function(pe){pe=String(pe),this.realloc(4*pe.length),this.pos++;var De=this.pos;this.pos=function(Ze,xt,ht){for(var St,Rt,Yt=0;Yt<xt.length;Yt++){if((St=xt.charCodeAt(Yt))>55295&&St<57344){if(!Rt){St>56319||Yt+1===xt.length?(Ze[ht++]=239,Ze[ht++]=191,Ze[ht++]=189):Rt=St;continue}if(St<56320){Ze[ht++]=239,Ze[ht++]=191,Ze[ht++]=189,Rt=St;continue}St=Rt-55296<<10|St-56320|65536,Rt=null}else Rt&&(Ze[ht++]=239,Ze[ht++]=191,Ze[ht++]=189,Rt=null);St<128?Ze[ht++]=St:(St<2048?Ze[ht++]=St>>6|192:(St<65536?Ze[ht++]=St>>12|224:(Ze[ht++]=St>>18|240,Ze[ht++]=St>>12&63|128),Ze[ht++]=St>>6&63|128),Ze[ht++]=63&St|128)}return ht}(this.buf,pe,this.pos);var He=this.pos-De;He>=128&&C(De,He,this),this.pos=De-1,this.writeVarint(He),this.pos+=He},writeFloat:function(pe){this.realloc(4),a.write(this.buf,pe,this.pos,!0,23,4),this.pos+=4},writeDouble:function(pe){this.realloc(8),a.write(this.buf,pe,this.pos,!0,52,8),this.pos+=8},writeBytes:function(pe){var De=pe.length;this.writeVarint(De),this.realloc(De);for(var He=0;He<De;He++)this.buf[this.pos++]=pe[He]},writeRawMessage:function(pe,De){this.pos++;var He=this.pos;pe(De,this);var Ze=this.pos-He;Ze>=128&&C(He,Ze,this),this.pos=He-1,this.writeVarint(Ze),this.pos+=Ze},writeMessage:function(pe,De,He){this.writeTag(pe,t.Bytes),this.writeRawMessage(De,He)},writePackedVarint:function(pe,De){De.length&&this.writeMessage(pe,R,De)},writePackedSVarint:function(pe,De){De.length&&this.writeMessage(pe,L,De)},writePackedBoolean:function(pe,De){De.length&&this.writeMessage(pe,U,De)},writePackedFloat:function(pe,De){De.length&&this.writeMessage(pe,V,De)},writePackedDouble:function(pe,De){De.length&&this.writeMessage(pe,$,De)},writePackedFixed32:function(pe,De){De.length&&this.writeMessage(pe,X,De)},writePackedSFixed32:function(pe,De){De.length&&this.writeMessage(pe,ee,De)},writePackedFixed64:function(pe,De){De.length&&this.writeMessage(pe,de,De)},writePackedSFixed64:function(pe,De){De.length&&this.writeMessage(pe,be,De)},writeBytesField:function(pe,De){this.writeTag(pe,t.Bytes),this.writeBytes(De)},writeFixed32Field:function(pe,De){this.writeTag(pe,t.Fixed32),this.writeFixed32(De)},writeSFixed32Field:function(pe,De){this.writeTag(pe,t.Fixed32),this.writeSFixed32(De)},writeFixed64Field:function(pe,De){this.writeTag(pe,t.Fixed64),this.writeFixed64(De)},writeSFixed64Field:function(pe,De){this.writeTag(pe,t.Fixed64),this.writeSFixed64(De)},writeVarintField:function(pe,De){this.writeTag(pe,t.Varint),this.writeVarint(De)},writeSVarintField:function(pe,De){this.writeTag(pe,t.Varint),this.writeSVarint(De)},writeStringField:function(pe,De){this.writeTag(pe,t.Bytes),this.writeString(De)},writeFloatField:function(pe,De){this.writeTag(pe,t.Fixed32),this.writeFloat(De)},writeDoubleField:function(pe,De){this.writeTag(pe,t.Fixed64),this.writeDouble(De)},writeBooleanField:function(pe,De){this.writeVarintField(pe,!!De)}},Yw}var T1=vr(eT());const Xw=3;function DF(a,t,o){t.glyphs=[],a===1&&o.readMessage(zF,t)}function zF(a,t,o){if(a===3){const{id:c,bitmap:h,width:_,height:y,left:C,top:R,advance:L}=o.readMessage(NF,{});t.glyphs.push({id:c,bitmap:new Qh({width:_+2*Xw,height:y+2*Xw},h),metrics:{width:_,height:y,left:C,top:R,advance:L}})}else a===4?t.ascender=o.readSVarint():a===5&&(t.descender=o.readSVarint())}function NF(a,t,o){a===1?t.id=o.readVarint():a===2?t.bitmap=o.readBytes():a===3?t.width=o.readVarint():a===4?t.height=o.readVarint():a===5?t.left=o.readSVarint():a===6?t.top=o.readSVarint():a===7&&(t.advance=o.readVarint())}const FF=Xw,fl={horizontal:1,vertical:2,horizontalOnly:3};class C_{constructor(){this.scale=1,this.fontStack="",this.image=null}static forText(t,o){const c=new C_;return c.scale=t||1,c.fontStack=o,c}static forImage(t){const o=new C_;return o.image=t,o}}class Km{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(t,o,c){const h=new Km;for(let _=0;_<t.sections.length;_++){const y=t.sections[_];y.image?h.addImageSection(y,c):h.addTextSection(y,o)}return h}length(){return this.text.length}getSection(t){return this.sections[this.sectionIndex[t]]}getSections(){return this.sections}getSectionIndex(t){return this.sectionIndex[t]}getCodePoint(t){return this.text.codePointAt(t)}verticalizePunctuation(t){this.text=function(o,c){let h="";for(let _=0;_<o.length;_++){const y=o.charCodeAt(_+1)||null,C=o.charCodeAt(_-1)||null;h+=!c&&(y&&Fy(y)&&!S_[o[_+1]]||C&&Fy(C)&&!S_[o[_-1]])||!S_[o[_]]?o[_]:S_[o[_]]}return h}(this.text,t)}trim(){let t=0;for(let c=0;c<this.text.length&&I1[this.text.charCodeAt(c)];c++)t++;let o=this.text.length;for(let c=this.text.length-1;c>=0&&c>=t&&I1[this.text.charCodeAt(c)];c--)o--;this.text=this.text.substring(t,o),this.sectionIndex=this.sectionIndex.slice(t,o)}substring(t,o){const c=new Km;return c.text=this.text.substring(t,o),c.sectionIndex=this.sectionIndex.slice(t,o),c.sections=this.sections,c}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((t,o)=>Math.max(t,this.sections[o].scale),0)}addTextSection(t,o){this.text+=t.text,this.sections.push(C_.forText(t.scale,t.fontStack||o));const c=this.sections.length-1;for(let h=0;h<t.text.length;++h)this.sectionIndex.push(c)}addImageSection(t,o){const c=t.image?t.image.getPrimary():null;if(!c)return void kn("Can't add FormattedSection with an empty image.");c.scaleSelf(o);const h=this.getNextImageSectionCharCode();h?(this.text+=String.fromCodePoint(h),this.sections.push(C_.forImage(c)),this.sectionIndex.push(this.sections.length-1)):kn("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Jw(a,t,o,c,h,_,y,C,R,L,V,$,U,X,ee,de=1){const be=Km.fromFeature(a,h,de);$===fl.vertical&&be.verticalizePunctuation(U);let Ie=[];const Fe=function(Ze,xt,ht,St,Rt,Yt){if(!Ze)return[];const Tn=[],hn=function(yn,Wt,Xt,Ln,Dn,Cr){let lr=0;for(let Hn=0;Hn<yn.length();Hn++){const An=yn.getSection(Hn);lr+=tT(yn.getCodePoint(Hn),An,Ln,Dn,Wt,Cr)}return lr/Math.max(1,Math.ceil(lr/Xt))}(Ze,xt,ht,St,Rt,Yt),Cn=Ze.text.indexOf("")>=0;let In=0;for(let yn=0;yn<Ze.length();yn++){const Wt=Ze.getSection(yn),Xt=Ze.getCodePoint(yn);if(I1[Xt]||(In+=tT(Xt,Wt,St,Rt,xt,Yt)),yn<Ze.length()-1){const Ln=!((Jt=Xt)<11904||!(Ar["Bopomofo Extended"](Jt)||Ar.Bopomofo(Jt)||Ar["CJK Compatibility Forms"](Jt)||Ar["CJK Compatibility Ideographs"](Jt)||Ar["CJK Compatibility"](Jt)||Ar["CJK Radicals Supplement"](Jt)||Ar["CJK Strokes"](Jt)||Ar["CJK Symbols and Punctuation"](Jt)||Ar["CJK Unified Ideographs Extension A"](Jt)||Ar["CJK Unified Ideographs"](Jt)||Ar["Enclosed CJK Letters and Months"](Jt)||Ar["Halfwidth and Fullwidth Forms"](Jt)||Ar.Hiragana(Jt)||Ar["Ideographic Description Characters"](Jt)||Ar["Kangxi Radicals"](Jt)||Ar["Katakana Phonetic Extensions"](Jt)||Ar.Katakana(Jt)||Ar["Vertical Forms"](Jt)||Ar["Yi Radicals"](Jt)||Ar["Yi Syllables"](Jt)));(BF[Xt]||Ln||Wt.image)&&Tn.push(rT(yn+1,In,hn,Tn,VF(Xt,Ze.getCodePoint(yn+1),Ln&&Cn),!1))}}var Jt;return iT(rT(Ze.length(),In,hn,Tn,0,!0))}(be,L,_,t,c,X),{processBidirectionalText:Be,processStyledBidirectionalText:pe}=Qu;if(Be&&be.sections.length===1){const Ze=Be(be.toString(),Fe);for(const xt of Ze){const ht=new Km;ht.text=xt,ht.sections=be.sections;for(let St=0;St<xt.length;St++)ht.sectionIndex.push(0);Ie.push(ht)}}else if(pe){const Ze=pe(be.text,be.sectionIndex,Fe);for(const xt of Ze){const ht=new Km;ht.text=xt[0],ht.sectionIndex=xt[1],ht.sections=be.sections,Ie.push(ht)}}else Ie=function(Ze,xt){const ht=[],St=Ze.text;let Rt=0;for(const Yt of xt)ht.push(Ze.substring(Rt,Yt)),Rt=Yt;return Rt<St.length&&ht.push(Ze.substring(Rt,St.length)),ht}(be,Fe);const De=[],He={positionedLines:De,text:be.toString(),top:V[1],bottom:V[1],left:V[0],right:V[0],writingMode:$,iconsInText:!1,verticalizable:!1,hasBaseline:!1};if(function(Ze,xt,ht,St,Rt,Yt,Tn,hn,Cn,In,Jt,yn){let Wt=0,Xt=0,Ln=0;const Dn=hn==="right"?1:hn==="left"?0:.5;let Cr=!1;for(const ur of Rt){const Br=ur.getSections();for(const Qr of Br){if(Qr.image)continue;const Jr=xt[Qr.fontStack];if(Jr&&(Cr=Jr.ascender!==void 0&&Jr.descender!==void 0,!Cr))break}if(!Cr)break}let lr=0;for(const ur of Rt){ur.trim();const Br=ur.getMaxScale(),Qr=(Br-1)*zo,Jr={positionedGlyphs:[],lineOffset:0};Ze.positionedLines[lr]=Jr;const di=Jr.positionedGlyphs;let ni=0;if(!ur.length()){Xt+=Yt,++lr;continue}let hi=0,Gi=0;for(let Ge=0;Ge<ur.length();Ge++){const Xe=ur.getSection(Ge),en=ur.getSectionIndex(Ge),Fn=ur.getCodePoint(Ge);let jn=Xe.scale,$n=null,sr=null,zr=null,wi=zo,Si=0;Cn===fl.vertical&&((Hn=Fn)===12312||Hn===12313||Hn===12316||Hn===12540||Hn===12448)&&(Cn=fl.horizontal);const ri=!(Cn===fl.horizontal||!Jt&&!F0(Fn)||Jt&&(I1[Fn]||cw(Fn)));if(Xe.image){const Zi=St.get(Xe.image.toString());if(!Zi)continue;zr=Xe.image,Ze.iconsInText=Ze.iconsInText||!0,sr=Zi.paddedRect;const ls=Zi.displaySize;jn=jn*zo/yn,$n={width:ls[0],height:ls[1],left:0,top:-3,advance:ri?ls[1]:ls[0],localGlyph:!1},Si=Cr?-$n.height*jn:Br*zo-17-ls[1]*jn,wi=$n.advance;const Ci=(ri?ls[0]:ls[1])*jn-zo*Br;Ci>0&&Ci>ni&&(ni=Ci)}else{const Zi=ht[Xe.fontStack];if(!Zi)continue;Zi[Fn]&&(sr=Zi[Fn]);const ls=xt[Xe.fontStack];if(!ls)continue;const Ci=ls.glyphs[Fn];if(!Ci)continue;if($n=Ci.metrics,wi=Fn!==8203?zo:0,Cr){const Fs=ls.ascender!==void 0?Math.abs(ls.ascender):0,_s=ls.descender!==void 0?Math.abs(ls.descender):0,qi=(Fs+_s)*jn;hi<qi&&(hi=qi,Gi=(Fs-_s)/2*jn),Si=-Fs*jn}else Si=(Br-jn)*zo-17}ri?(Ze.verticalizable=!0,di.push({glyph:Fn,image:zr,x:Wt,y:Xt+Si,vertical:ri,scale:jn,localGlyph:$n.localGlyph,fontStack:Xe.fontStack,sectionIndex:en,metrics:$n,rect:sr}),Wt+=wi*jn+In):(di.push({glyph:Fn,image:zr,x:Wt,y:Xt+Si,vertical:ri,scale:jn,localGlyph:$n.localGlyph,fontStack:Xe.fontStack,sectionIndex:en,metrics:$n,rect:sr}),Wt+=$n.advance*jn+In)}di.length!==0&&(Ln=Math.max(Wt-In,Ln),Cr?sT(di,Dn,ni,Gi,Yt*Br/2):sT(di,Dn,ni,0,Yt/2)),Wt=0;const gs=Yt*Br+ni;Jr.lineOffset=Math.max(ni,Qr),Xt+=gs,++lr}var Hn;const An=Xt,{horizontalAlign:qr,verticalAlign:ar}=Qw(Tn);(function(ur,Br,Qr,Jr,di,ni){const hi=(Br-Qr)*di,Gi=-ni*Jr;for(const gs of ur)for(const Ge of gs.positionedGlyphs)Ge.x+=hi,Ge.y+=Gi})(Ze.positionedLines,Dn,qr,ar,Ln,An),Ze.top+=-ar*An,Ze.bottom=Ze.top+An,Ze.left+=-qr*Ln,Ze.right=Ze.left+Ln,Ze.hasBaseline=Cr}(He,t,o,c,Ie,y,C,R,$,L,U,ee),!function(Ze){for(const xt of Ze)if(xt.positionedGlyphs.length!==0)return!1;return!0}(De))return He}const I1={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},BF={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function tT(a,t,o,c,h,_){if(t.image){const y=c.get(t.image.toString());return y?y.displaySize[0]*t.scale*zo/_+h:0}{const y=o[t.fontStack],C=y&&y.glyphs[a];return C?C.metrics.advance*t.scale+h:0}}function nT(a,t,o,c){const h=Math.pow(a-t,2);return c?a<t?h/2:2*h:h+Math.abs(o)*o}function VF(a,t,o){let c=0;return a===10&&(c-=1e4),o&&(c+=150),a!==40&&a!==65288||(c+=50),t!==41&&t!==65289||(c+=50),c}function rT(a,t,o,c,h,_){let y=null,C=nT(t,o,h,_);for(const R of c){const L=nT(t-R.x,o,h,_)+R.badness;L<=C&&(y=R,C=L)}return{index:a,x:t,priorBreak:y,badness:C}}function iT(a){return a?iT(a.priorBreak).concat(a.index):[]}function Qw(a){let t=.5,o=.5;switch(a){case"right":case"top-right":case"bottom-right":t=1;break;case"left":case"top-left":case"bottom-left":t=0}switch(a){case"bottom":case"bottom-right":case"bottom-left":o=1;break;case"top":case"top-right":case"top-left":o=0}return{horizontalAlign:t,verticalAlign:o}}function sT(a,t,o,c,h){if(!(t||o||c||h))return;const _=a.length-1,y=a[_],C=(y.x+y.metrics.advance*y.scale)*t;for(let R=0;R<=_;R++)a[R].x-=C,a[R].y+=o+c+h}function oT(a){return a.imagePrimary!==void 0&&a.top!==void 0&&a.bottom!==void 0&&a.left!==void 0&&a.right!==void 0}function $F(a,t,o,c){const{horizontalAlign:h,verticalAlign:_}=Qw(c),y=o[0]-a.displaySize[0]*h,C=o[1]-a.displaySize[1]*_;return{imagePrimary:a,imageSecondary:t,top:C,bottom:C+a.displaySize[1],left:y,right:y+a.displaySize[0]}}function aT(a,t,o,c,h,_){const y=a.imagePrimary;let C;if(y.content){const be=y.content,Ie=y.pixelRatio||1;C=[be[0]/Ie,be[1]/Ie,y.displaySize[0]-be[2]/Ie,y.displaySize[1]-be[3]/Ie]}const R=t.left*_,L=t.right*_;let V,$,U,X;o==="width"||o==="both"?(X=h[0]+R-c[3],$=h[0]+L+c[1]):(X=h[0]+(R+L-y.displaySize[0])/2,$=X+y.displaySize[0]);const ee=t.top*_,de=t.bottom*_;return o==="height"||o==="both"?(V=h[1]+ee-c[0],U=h[1]+de+c[2]):(V=h[1]+(ee+de-y.displaySize[1])/2,U=V+y.displaySize[1]),{imagePrimary:y,imageSecondary:void 0,top:V,right:$,bottom:U,left:X,collisionPadding:C}}function lT(a){return!a.imagePrimary.stretchX}function uT(a){return!a.imagePrimary.stretchY}function cT(a){return{width:a.right-a.left,height:a.bottom-a.top}}const ad=128;function dT(a,t,o){const{expression:c}=t;if(c.kind==="constant")return{kind:"constant",layoutSize:c.evaluate(new Qi(a+1,{worldview:o}))};if(c.kind==="source")return{kind:"source"};{const{zoomStops:h,interpolationType:_}=c;let y=0;for(;y<h.length&&h[y]<=a;)y++;y=Math.max(0,y-1);let C=y;for(;C<h.length&&h[C]<a+1;)C++;C=Math.min(h.length-1,C);const R=h[y],L=h[C];return c.kind==="composite"?{kind:"composite",minZoom:R,maxZoom:L,interpolationType:_}:{kind:"camera",minZoom:R,maxZoom:L,minSize:c.evaluate(new Qi(R,{worldview:o})),maxSize:c.evaluate(new Qi(L,{worldview:o})),interpolationType:_}}}function e3(a,{uSize:t,uSizeT:o},{lowerSize:c,upperSize:h}){return a.kind==="source"?c/ad:a.kind==="composite"?Dr(c/ad,h/ad,o):t}function E_(a,t,o=1){let c=0,h=0;if(a.kind==="constant")h=a.layoutSize*o;else if(a.kind!=="source"){const{interpolationType:_,minZoom:y,maxZoom:C}=a,R=_?tt(dl.interpolationFactor(_,t,y,C),0,1):0;a.kind==="camera"?h=Dr(a.minSize,a.maxSize,R)*o:c=R*o}return{uSizeT:c,uSize:h}}class Xd extends Rn{constructor(t,o,c,h,_){super(t,o),this.angle=h,this.z=c,_!==void 0&&(this.segment=_)}clone(){return new Xd(this.x,this.y,this.z,this.angle,this.segment)}}function hT(a,t,o,c,h){if(t.segment===void 0)return!0;let _=t,y=t.segment+1,C=0;for(;C>-o/2;){if(y--,y<0)return!1;C-=a[y].dist(_),_=a[y]}C+=a[y].dist(a[y+1]),y++;const R=[];let L=0;for(;C<o/2;){const V=a[y],$=a[y+1];if(!$)return!1;let U=a[y-1].angleTo(V)-V.angleTo($);for(U=Math.abs((U+3*Math.PI)%(2*Math.PI)-Math.PI),R.push({distance:C,angleDelta:U}),L+=U;C-R[0].distance>c;)L-=R.shift().angleDelta;if(L>h)return!1;y++,C+=V.dist($)}return!0}function fT(a){let t=0;for(let o=0;o<a.length-1;o++)t+=a[o].dist(a[o+1]);return t}function pT(a,t,o){return a?.6*t*o:0}function mT(a,t){return Math.max(a?a.right-a.left:0,t?t.right-t.left:0)}function HF(a,t,o,c,h,_){const y=pT(o,h,_),C=mT(o,c)*_;let R=0;const L=fT(a)/2;for(let V=0;V<a.length-1;V++){const $=a[V],U=a[V+1],X=$.dist(U);if(R+X>L){const ee=(L-R)/X,de=Dr($.x,U.x,ee),be=Dr($.y,U.y,ee),Ie=new Xd(de,be,0,U.angleTo($),V);return!y||hT(a,Ie,C,y,t)?Ie:void 0}R+=X}}function UF(a,t,o,c,h,_,y,C,R){const L=pT(c,_,y),V=mT(c,h),$=V*y,U=a[0].x===0||a[0].x===R||a[0].y===0||a[0].y===R;return t-$<t/4&&(t=$+t/4),gT(a,U?t/2*C%t:(V/2+2*_)*y*C%t,t,L,o,$,U,!1,R)}function gT(a,t,o,c,h,_,y,C,R){const L=_/2,V=fT(a);let $=0,U=t-o,X=[];for(let ee=0;ee<a.length-1;ee++){const de=a[ee],be=a[ee+1],Ie=de.dist(be),Fe=be.angleTo(de);for(;U+o<$+Ie;){U+=o;const Be=(U-$)/Ie,pe=Dr(de.x,be.x,Be),De=Dr(de.y,be.y,Be);if(pe>=0&&pe<R&&De>=0&&De<R&&U-L>=0&&U+L<=V){const He=new Xd(pe,De,0,Fe,ee);c&&!hT(a,He,_,c,h)||X.push(He)}}$+=Ie}return C||X.length||y||(X=gT(a,$/2,o,c,h,_,y,!0,R)),X}function _T(a){let t=0,o=0;for(const y of a)t+=y.w*y.h,o=Math.max(o,y.w);a.sort((y,C)=>C.h-y.h);const c=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(t/.95)),o),h:1/0}];let h=0,_=0;for(const y of a)for(let C=c.length-1;C>=0;C--){const R=c[C];if(!(y.w>R.w||y.h>R.h)){if(y.x=R.x,y.y=R.y,_=Math.max(_,y.y+y.h),h=Math.max(h,y.x+y.w),y.w===R.w&&y.h===R.h){const L=c.pop();C<c.length&&(c[C]=L)}else y.h===R.h?(R.x+=y.w,R.w-=y.w):y.w===R.w?(R.y+=y.h,R.h-=y.h):(c.push({x:R.x+y.w,y:R.y,w:R.w-y.w,h:y.h}),R.y+=y.h,R.h-=y.h);break}}return{w:h,h:_,fill:t/(h*_)||0}}Qn(Xd,"Anchor");const gp=1;class T_{static getImagePositionScale(t,o,c){if(o&&t&&t.options&&t.options.transform){const h=t.options.transform;return{x:h.a,y:h.d}}return{x:c,y:c}}constructor(t,o,c,h){this.paddedRect=t;const{pixelRatio:_,version:y,stretchX:C,stretchY:R,content:L,sdf:V,usvg:$}=o;this.pixelRatio=_,this.stretchX=C,this.stretchY=R,this.content=L,this.version=y,this.padding=c,this.sdf=V,this.usvg=$,this.scale=T_.getImagePositionScale(h,$,_)}get tl(){return[this.paddedRect.x+this.padding,this.paddedRect.y+this.padding]}get br(){return[this.paddedRect.x+this.paddedRect.w-this.padding,this.paddedRect.y+this.paddedRect.h-this.padding]}get displaySize(){return[(this.paddedRect.w-2*this.padding)/this.scale.x,(this.paddedRect.h-2*this.padding)/this.scale.y]}}function t3(a,t,o){const c=Kl.parse(a),h=function(_,y,C=[1,1]){return{x:0,y:0,w:(_.data?_.data.width:_.width*C[0])+2*y,h:(_.data?_.data.height:_.height*C[1])+2*y}}(t,o,[c.options.transform.a,c.options.transform.d]);return{bin:h,imagePosition:new T_(h,t,o,c),imageVariant:c}}class vT{constructor(t,o,c){const h=new Map,_=new Map;this.haveRenderCallbacks=[];const y=[];this.addImages(t,h,gp,y),this.addImages(o,_,2,y);const{w:C,h:R}=_T(y),L=new Zo({width:C||1,height:R||1});for(const[V,$]of t.entries()){const U=h.get(V).paddedRect;Zo.copy($.data,L,{x:0,y:0},{x:U.x+gp,y:U.y+gp},$.data,c,$.sdf)}for(const[V,$]of o.entries()){const U=_.get(V),X=U.paddedRect;let ee=U.padding;const de=X.x+ee,be=X.y+ee,Ie=$.data.width,Fe=$.data.height;ee=ee>1?ee-1:ee,Zo.copy($.data,L,{x:0,y:0},{x:de,y:be},$.data,c),Zo.copy($.data,L,{x:0,y:Fe-ee},{x:de,y:be-ee},{width:Ie,height:ee},c),Zo.copy($.data,L,{x:0,y:0},{x:de,y:be+Fe},{width:Ie,height:ee},c),Zo.copy($.data,L,{x:Ie-ee,y:0},{x:de-ee,y:be},{width:ee,height:Fe},c),Zo.copy($.data,L,{x:0,y:0},{x:de+Ie,y:be},{width:ee,height:Fe},c),Zo.copy($.data,L,{x:Ie-ee,y:Fe-ee},{x:de-ee,y:be-ee},{width:ee,height:ee},c),Zo.copy($.data,L,{x:0,y:Fe-ee},{x:de+Ie,y:be-ee},{width:ee,height:ee},c),Zo.copy($.data,L,{x:0,y:0},{x:de+Ie,y:be+Fe},{width:ee,height:ee},c),Zo.copy($.data,L,{x:Ie-ee,y:0},{x:de-ee,y:be+Fe},{width:ee,height:ee},c)}this.lut=c,this.image=L,this.iconPositions=h,this.patternPositions=_}addImages(t,o,c,h){for(const[_,y]of t.entries()){const{bin:C,imagePosition:R,imageVariant:L}=t3(_,y,c);o.set(_,R),h.push(C),y.hasRenderCallback&&this.haveRenderCallbacks.push(L.id)}}patchUpdatedImages(t,o,c){this.haveRenderCallbacks=this.haveRenderCallbacks.filter(h=>t.hasImage(h,c)),t.dispatchRenderCallbacks(this.haveRenderCallbacks,c);for(const h of t.getUpdatedImages(c)){for(const _ of this.iconPositions.keys()){const y=Kl.parse(_);if(_a.isEqual(y.id,h)){const C=t.getImage(h,c);this.patchUpdatedImage(this.iconPositions.get(_),C,o)}}for(const _ of this.patternPositions.keys()){const y=Kl.parse(_);if(_a.isEqual(y.id,h)){const C=t.getImage(h,c);this.patchUpdatedImage(this.patternPositions.get(_),C,o)}}}}patchUpdatedImage(t,o,c){if(!t||!o||t.version===o.version)return;t.version=o.version;const[h,_]=t.tl,y=t.sdf;if(this.lut||y){const C={width:o.data.width,height:o.data.height},R=new Zo(C);Zo.copy(o.data,R,{x:0,y:0},{x:0,y:0},C,this.lut,y),c.update(R,{position:{x:h,y:_}})}else c.update(o.data,{position:{x:h,y:_}})}}Qn(T_,"ImagePosition"),Qn(vT,"ImageAtlas");const k1=1e20;function yT(a,t,o,c,h,_,y,C,R){for(let L=t;L<t+c;L++)bT(a,o*_+L,_,h,y,C,R);for(let L=o;L<o+h;L++)bT(a,L*_+t,1,c,y,C,R)}function bT(a,t,o,c,h,_,y){_[0]=0,y[0]=-1e20,y[1]=k1,h[0]=a[t];for(let C=1,R=0,L=0;C<c;C++){h[C]=a[t+C*o];const V=C*C;do{const $=_[R];L=(h[C]-h[$]+V-$*$)/(C-$)/2}while(L<=y[R]&&--R>-1);R++,_[R]=C,y[R]=L,y[R+1]=k1}for(let C=0,R=0;C<c;C++){for(;y[R+1]<C;)R++;const L=_[R],V=C-L;a[t+C*o]=h[L]+V*V}}const ic=2,n3={none:0,ideographs:1,all:2};class Ym{constructor(t,o,c){this.requestManager=t,this.localGlyphMode=o,this.localFontFamily=c,this.urls={},this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(t,o){this.urls[o]=t}getGlyphs(t,o,c){const h=[],_=this.urls[o]||ko.GLYPHS_URL;for(const y in t)for(const C of t[y])h.push({stack:y,id:C});je(h,({stack:y,id:C},R)=>{let L=this.entries[y];L||(L=this.entries[y]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});let V=L.glyphs[C];if(V!==void 0)return void R(null,{stack:y,id:C,glyph:V});if(V=this._tinySDF(L,y,C),V)return L.glyphs[C]=V,void R(null,{stack:y,id:C,glyph:V});const $=Math.floor(C/256);if(256*$>65535)return kn("glyphs > 65535 not supported"),void R(null,{stack:y,id:C,glyph:V});if(L.ranges[$])return void R(null,{stack:y,id:C,glyph:V});let U=L.requests[$];U||(U=L.requests[$]=[],Ym.loadGlyphRange(y,$,_,this.requestManager,(X,ee)=>{if(ee){L.ascender=ee.ascender,L.descender=ee.descender;for(const de in ee.glyphs)this._doesCharSupportLocalGlyph(+de)||(L.glyphs[+de]=ee.glyphs[+de]);L.ranges[$]=!0}for(const de of U)de(X,ee);delete L.requests[$]})),U.push((X,ee)=>{X?R(X):ee&&R(null,{stack:y,id:C,glyph:ee.glyphs[C]||null})})},(y,C)=>{if(y)c(y);else if(C){const R={};for(const{stack:L,id:V,glyph:$}of C)R[L]===void 0&&(R[L]={}),R[L].glyphs===void 0&&(R[L].glyphs={}),R[L].glyphs[V]=$&&{id:$.id,bitmap:$.bitmap.clone(),metrics:$.metrics},R[L].ascender=this.entries[L].ascender,R[L].descender=this.entries[L].descender;c(null,R)}})}_doesCharSupportLocalGlyph(t){return this.localGlyphMode!==n3.none&&(this.localGlyphMode===n3.all?!!this.localFontFamily:!!this.localFontFamily&&(Ar["CJK Unified Ideographs"](t)||Ar["Hangul Syllables"](t)||Ar.Hiragana(t)||Ar.Katakana(t)||Ar["CJK Symbols and Punctuation"](t)||Ar["CJK Unified Ideographs Extension A"](t)||Ar["CJK Unified Ideographs Extension B"](t)||Ar.Osage(t)))}_tinySDF(t,o,c){const h=this.localFontFamily;if(!h||!this._doesCharSupportLocalGlyph(c))return;let _=t.tinySDF;if(!_){let de="400";/bold/i.test(o)?de="900":/medium/i.test(o)?de="500":/light/i.test(o)&&(de="200"),_=t.tinySDF=new Ym.TinySDF({fontFamily:h,fontWeight:de,fontSize:24*ic,buffer:3*ic,radius:8*ic}),_.fontWeight=de}if(this.localGlyphs[_.fontWeight][c])return this.localGlyphs[_.fontWeight][c];const y=String.fromCodePoint(c),{data:C,width:R,height:L,glyphWidth:V,glyphHeight:$,glyphLeft:U,glyphTop:X,glyphAdvance:ee}=_.draw(y);return this.localGlyphs[_.fontWeight][c]={id:c,bitmap:new Qh({width:R,height:L},C),metrics:{width:V/ic,height:$/ic,left:U/ic,top:X/ic-27,advance:ee/ic,localGlyph:!0}}}}Ym.loadGlyphRange=function(a,t,o,c,h){const _=256*t,y=_+255,C=c.transformRequest(c.normalizeGlyphsURL(o).replace("{fontstack}",a).replace("{range}",`${_}-${y}`),Ad.Glyphs);Rc(C,(R,L)=>{if(R)h(R);else if(L){const V={},$=function(U){return new T1(U).readFields(DF,{})}(L);for(const U of $.glyphs)V[U.id]=U;h(null,{glyphs:V,ascender:$.ascender,descender:$.descender})}})},Ym.TinySDF=class{constructor({fontSize:a=24,buffer:t=3,radius:o=8,cutoff:c=.25,fontFamily:h="sans-serif",fontWeight:_="normal",fontStyle:y="normal"}={}){this.buffer=t,this.cutoff=c,this.radius=o;const C=this.size=a+4*t,R=this._createCanvas(C),L=this.ctx=R.getContext("2d",{willReadFrequently:!0});L.font=`${y} ${_} ${a}px ${h}`,L.textBaseline="alphabetic",L.textAlign="left",L.fillStyle="black",this.gridOuter=new Float64Array(C*C),this.gridInner=new Float64Array(C*C),this.f=new Float64Array(C),this.z=new Float64Array(C+1),this.v=new Uint16Array(C)}_createCanvas(a){const t=document.createElement("canvas");return t.width=t.height=a,t}draw(a){const{width:t,actualBoundingBoxAscent:o,actualBoundingBoxDescent:c,actualBoundingBoxLeft:h,actualBoundingBoxRight:_}=this.ctx.measureText(a),y=Math.ceil(o),C=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(_-h))),R=Math.min(this.size-this.buffer,y+Math.ceil(c)),L=C+2*this.buffer,V=R+2*this.buffer,$=Math.max(L*V,0),U=new Uint8ClampedArray($),X={data:U,width:L,height:V,glyphWidth:C,glyphHeight:R,glyphTop:y,glyphLeft:0,glyphAdvance:t};if(C===0||R===0)return X;const{ctx:ee,buffer:de,gridInner:be,gridOuter:Ie}=this;ee.clearRect(de,de,C,R),ee.fillText(a,de,de+y);const Fe=ee.getImageData(de,de,C,R);Ie.fill(k1,0,$),be.fill(0,0,$);for(let Be=0;Be<R;Be++)for(let pe=0;pe<C;pe++){const De=Fe.data[4*(Be*C+pe)+3]/255;if(De===0)continue;const He=(Be+de)*L+pe+de;if(De===1)Ie[He]=0,be[He]=k1;else{const Ze=.5-De;Ie[He]=Ze>0?Ze*Ze:0,be[He]=Ze<0?Ze*Ze:0}}yT(Ie,0,0,L,V,L,this.f,this.v,this.z),yT(be,de,de,C,R,L,this.f,this.v,this.z);for(let Be=0;Be<$;Be++){const pe=Math.sqrt(Ie[Be])-Math.sqrt(be[Be]);U[Be]=Math.round(255-255*(pe/this.radius+this.cutoff))}return X}};const _p=gp;function xT(a,t){return a+t[1]-t[0]}function wT(a,t,o,c,h=1){const _=[],y=a.imagePrimary,C=y.pixelRatio,R=y.paddedRect.w-2*_p,L=y.paddedRect.h-2*_p,V=(a.right-a.left)*h,$=(a.bottom-a.top)*h,U=y.stretchX||[[0,R]],X=y.stretchY||[[0,L]],ee=U.reduce(xT,0),de=X.reduce(xT,0),be=R-ee,Ie=L-de;let Fe=0,Be=ee,pe=0,De=de,He=0,Ze=be,xt=0,ht=Ie;if(y.content&&c){const Rt=y.content;Fe=M1(U,0,Rt[0]),pe=M1(X,0,Rt[1]),Be=M1(U,Rt[0],Rt[2]),De=M1(X,Rt[1],Rt[3]),He=Rt[0]-Fe,xt=Rt[1]-pe,Ze=Rt[2]-Rt[0]-Be,ht=Rt[3]-Rt[1]-De}const St=(Rt,Yt,Tn,hn)=>{const Cn=A1(Rt.stretch-Fe,Be,V,a.left*h),In=R1(Rt.fixed-He,Ze,Rt.stretch,ee),Jt=A1(Yt.stretch-pe,De,$,a.top*h),yn=R1(Yt.fixed-xt,ht,Yt.stretch,de),Wt=A1(Tn.stretch-Fe,Be,V,a.left*h),Xt=R1(Tn.fixed-He,Ze,Tn.stretch,ee),Ln=A1(hn.stretch-pe,De,$,a.top*h),Dn=R1(hn.fixed-xt,ht,hn.stretch,de),Cr=new Rn(Cn,Jt),lr=new Rn(Wt,Jt),Hn=new Rn(Wt,Ln),An=new Rn(Cn,Ln),qr=new Rn(In/C,yn/C),ar=new Rn(Xt/C,Dn/C),ur=t*Math.PI/180;if(ur){const hi=Math.sin(ur),Gi=Math.cos(ur),gs=[Gi,-hi,hi,Gi];Cr._matMult(gs),lr._matMult(gs),An._matMult(gs),Hn._matMult(gs)}const Br=Rt.stretch+Rt.fixed,Qr=Tn.stretch+Tn.fixed,Jr=Yt.stretch+Yt.fixed,di=hn.stretch+hn.fixed,ni=a.imageSecondary;return{tl:Cr,tr:lr,bl:An,br:Hn,texPrimary:{x:y.paddedRect.x+_p+Br,y:y.paddedRect.y+_p+Jr,w:Qr-Br,h:di-Jr},texSecondary:ni?{x:ni.paddedRect.x+_p+Br,y:ni.paddedRect.y+_p+Jr,w:Qr-Br,h:di-Jr}:void 0,writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:qr,pixelOffsetBR:ar,minFontScaleX:Ze/C/V,minFontScaleY:ht/C/$,isSDF:o}};if(c&&(y.stretchX||y.stretchY)){const Rt=ST(U,be,ee),Yt=ST(X,Ie,de);for(let Tn=0;Tn<Rt.length-1;Tn++){const hn=Rt[Tn],Cn=Rt[Tn+1];for(let In=0;In<Yt.length-1;In++)_.push(St(hn,Yt[In],Cn,Yt[In+1]))}}else _.push(St({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:R+1},{fixed:0,stretch:L+1}));return _}function M1(a,t,o){let c=0;for(const h of a)c+=Math.max(t,Math.min(o,h[1]))-Math.max(t,Math.min(o,h[0]));return c}function ST(a,t,o){const c=[{fixed:-1,stretch:0}];for(const[h,_]of a){const y=c[c.length-1];c.push({fixed:h-y.stretch,stretch:y.stretch}),c.push({fixed:h-y.stretch,stretch:y.stretch+(_-h)})}return c.push({fixed:t+_p,stretch:o}),c}function A1(a,t,o,c){return a/t*o+c}function R1(a,t,o,c){return a-t*o/c}function jF(a,t,o,c){const h=t+a.positionedLines[c].lineOffset;return c===0?o+h/2:o+(h+(t+a.positionedLines[c-1].lineOffset))/2}function GF(a,t=1,o=!1){let c=1/0,h=1/0,_=-1/0,y=-1/0;const C=a[0];for(let X=0;X<C.length;X++){const ee=C[X];(!X||ee.x<c)&&(c=ee.x),(!X||ee.y<h)&&(h=ee.y),(!X||ee.x>_)&&(_=ee.x),(!X||ee.y>y)&&(y=ee.y)}const R=Math.min(_-c,y-h);let L=R/2;const V=new Co([],qF);if(R===0)return new Rn(c,h);for(let X=c;X<_;X+=R)for(let ee=h;ee<y;ee+=R)V.push(new Zm(X+L,ee+L,L,a));let $=function(X){let ee=0,de=0,be=0;const Ie=X[0];for(let Fe=0,Be=Ie.length,pe=Be-1;Fe<Be;pe=Fe++){const De=Ie[Fe],He=Ie[pe],Ze=De.x*He.y-He.x*De.y;de+=(De.x+He.x)*Ze,be+=(De.y+He.y)*Ze,ee+=3*Ze}return new Zm(de/ee,be/ee,0,X)}(a),U=V.length;for(;V.length;){const X=V.pop();(X.d>$.d||!$.d)&&($=X,o&&console.log("found best %d after %d probes",Math.round(1e4*X.d)/1e4,U)),X.max-$.d<=t||(L=X.h/2,V.push(new Zm(X.p.x-L,X.p.y-L,L,a)),V.push(new Zm(X.p.x+L,X.p.y-L,L,a)),V.push(new Zm(X.p.x-L,X.p.y+L,L,a)),V.push(new Zm(X.p.x+L,X.p.y+L,L,a)),U+=4)}return o&&(console.log(`num probes: ${U}`),console.log(`best distance: ${$.d}`)),$.p}function qF(a,t){return t.max-a.max}class Zm{constructor(t,o,c,h){this.p=new Rn(t,o),this.h=c,this.d=function(_,y){let C=!1,R=1/0;for(let L=0;L<y.length;L++){const V=y[L];for(let $=0,U=V.length,X=U-1;$<U;X=$++){const ee=V[$],de=V[X];ee.y>_.y!=de.y>_.y&&_.x<(de.x-ee.x)*(_.y-ee.y)/(de.y-ee.y)+ee.x&&(C=!C),R=Math.min(R,Bm(_,ee,de))}}return(C?1:-1)*Math.sqrt(R)}(this.p,h),this.max=this.d+this.h*Math.SQRT2}}const WF=Object.keys,r3=Number.POSITIVE_INFINITY,KF=Math.sqrt(2);function CT(a,[t,o]){let c=0,h=0;if(o===r3){t<0&&(t=0);const _=t/KF;switch(a){case"top-right":case"top-left":h=_-7;break;case"bottom-right":case"bottom-left":h=7-_;break;case"bottom":h=7-t;break;case"top":h=t-7}switch(a){case"top-right":case"bottom-right":c=-_;break;case"top-left":case"bottom-left":c=_;break;case"left":c=t;break;case"right":c=-t}}else{switch(t=Math.abs(t),o=Math.abs(o),a){case"top-right":case"top-left":case"top":h=o-7;break;case"bottom-right":case"bottom-left":case"bottom":h=7-o}switch(a){case"top-right":case"bottom-right":case"right":c=-t;break;case"top-left":case"bottom-left":case"left":c=t}}return[c,h]}function P1(a,t,o,c,h,_,y,C,R){if(!t||!t.usvg)return;const L=cT(c),V=cT(h),$=_!=="both"&&_!=="width"||!lT(c)?1:V.width/L.width,U=_!=="both"&&_!=="height"||!uT(c)?1:V.height/L.height;o.scaleSelf($,U);const X=o.toString();y.set(X,o),C.set(X,t);const{imagePosition:ee}=t3(X,t,gp);R.set(X,ee)}function ET(a,t,o,c,h,_,y,C,R){if(!a)return;const L=function(V,$,U,X,ee,de){if(V.kind==="camera")return V.maxSize;if(V.kind==="composite"){const be=$.possiblyEvaluate(new Qi(V.maxZoom,{worldview:de}),U).evaluate(ee,{},U),Ie=$.possiblyEvaluate(new Qi(V.minZoom,{worldview:de}),U).evaluate(ee,{},U);return Math.max(be,Ie)}return $.possiblyEvaluate(new Qi(X,{worldview:de})).evaluate(ee,{},U)}(t,o,c,h,_,R);return a.scaleSelf(L*C*y)}function TT(a,t,o,c,h,_,y,C,R){return{iconPrimary:ET(a.getPrimary(),t,o,c,h,_,y,C,R),iconSecondary:ET(a.getSecondary(),t,o,c,h,_,y,C,R)}}function YF(a,t,o){if(!t)return;const c=o.get(a.toString()),h=o.get(t.toString());h&&(c.paddedRect.w===h.paddedRect.w&&c.paddedRect.h===h.paddedRect.h||kn(`Mismatch in icon variant sizes: ${a.toString()} and ${t.toString()}`),c.usvg!==h.usvg&&kn(`Mismatch in icon variant image types: ${a.id} and ${t.id}`))}function IT(a,t,o,c){if(!a)return;const h=t.get(o.toString());if(a.imagePrimary=h,c){const _=t.get(c.toString());a.imageSecondary=_}}function ZF(a,t){for(const o in a.horizontal)kT(a.horizontal[o],t);kT(a.vertical,t)}function kT(a,t){if(a){for(const o of a.positionedLines)for(const c of o.positionedGlyphs)if(c.image!==null){const h=c.image.toString();c.rect=t.get(h).paddedRect}}}function i3(a){switch(a){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function XF(a,t,o,c,h,_,y,C,R){const L=s3(_.horizontal)||_.vertical,V=o.get("icon-text-fit-padding").evaluate(c,{},h);let $,U=t;return t&&R!=="none"&&(a.allowVerticalPlacement&&_.vertical&&($=aT(t,_.vertical,R,V,C,y)),L&&(U=aT(t,L,R,V,C,y))),{defaultShapedIcon:U,verticallyShapedIcon:$}}function JF(a,t,o,c,h,_,y,C,R,L,V,$,U,X,ee,de,be,Ie,Fe,Be){let pe=y.textMaxSize.evaluate(t,{},U);pe===void 0?pe=C*y.textScaleFactor:pe*=y.textScaleFactor;const De=a.layers[0].layout,He=s3(o.horizontal)||o.vertical,Ze=X.name==="globe",xt=zo,ht=a.tilePixelRatio*pe/xt,St=(In=a.overscaling,a.zoom>18&&In>2&&(In>>=1),Math.max(Pn/(512*In),1)*De.get("symbol-spacing")),Rt=De.get("text-padding")*a.tilePixelRatio,Yt=De.get("icon-padding")*a.tilePixelRatio,Tn=gi(De.get("text-max-angle")),hn=De.get("icon-rotation-alignment")==="map"&&Be!=="point",Cn=St/2;var In;a.hasAnyIconTextFit===!1&&be!=="none"&&(a.hasAnyIconTextFit=!0);const Jt=t.properties?+t.properties[bi]:null,yn=Jt&&a.elevationFeatureIdToIndex?a.elevationFeatureIdToIndex.get(Jt):65535,Wt=(Xt,Ln,Dn)=>{if(Ln.x<0||Ln.x>=Pn||Ln.y<0||Ln.y>=Pn)return;let Cr=null;if(Ze){const{x:lr,y:Hn,z:An}=X.projectTilePoint(Ln.x,Ln.y,Dn);Cr={anchor:new Xd(lr,Hn,An,0,void 0),up:X.upVector(Dn,Ln.x,Ln.y)}}(function(lr,Hn,An,qr,ar,ur,Br,Qr,Jr,di,ni,hi,Gi,gs,Ge,Xe,en,Fn,jn,$n,sr,zr,wi,Si,ri,Zi,ls,Ci,Fs){const _s=lr.addToLineVertexArray(Hn,qr);let qi,Ks,Cs,us,vs,Ji,li,es=0,Bs=0,Or=0,Ai=0,Es=-1,Gs=-1;const Rs={};let fo=Pc("");const is=An?An.anchor:Hn,uo=Ci!=="none";let Za=0,Xo=0;if(Jr._unevaluatedLayout.getValue("text-radial-offset")===void 0){const po=Jr.layout.get("text-offset").evaluate(sr,{},ri);Za=po[0]*zo,Xo=po[1]*zo}else Za=Jr.layout.get("text-radial-offset").evaluate(sr,{},ri)*zo,Xo=r3;if(lr.allowVerticalPlacement&&ar.vertical){const po=ar.vertical;if(Ge)Ji=o3(po),Qr&&(li=o3(Qr));else{const Eo=Jr.layout.get("text-rotate").evaluate(sr,{},ri)+90;Cs=L1(di,is,Hn,ni,hi,Gi,po,gs,Eo,Xe),Qr&&(us=L1(di,is,Hn,ni,hi,Gi,Qr,Fn,Eo))}}if(ur){const po=lr.iconSizeData,Eo=Jr.layout.get("icon-rotate").evaluate(sr,{},ri),Jo=wT(ur,Eo,wi,uo,zr.iconScaleFactor),wa=Qr?wT(Qr,Eo,wi,uo,zr.iconScaleFactor):void 0;Ks=L1(di,is,Hn,ni,hi,Gi,ur,Fn,Eo,null),es=4*Jo.length;let aa=null;po.kind==="source"?(aa=[ad*Jr.layout.get("icon-size").evaluate(sr,{},ri)*zr.iconScaleFactor],aa[0]>tf&&kn(`${lr.layerIds[0]}: Value for "icon-size" is >= ${I_}. Reduce your "icon-size".`)):po.kind==="composite"&&(aa=[ad*zr.compositeIconSizes[0].evaluate(sr,{},ri)*zr.iconScaleFactor,ad*zr.compositeIconSizes[1].evaluate(sr,{},ri)*zr.iconScaleFactor],(aa[0]>tf||aa[1]>tf)&&kn(`${lr.layerIds[0]}: Value for "icon-size" is >= ${I_}. Reduce your "icon-size".`)),lr.addSymbols(lr.icon,Jo,aa,$n,jn,sr,void 0,An,Hn,_s.lineStartIndex,_s.lineLength,-1,Si,ri,Zi,ls),Es=lr.icon.placedSymbolArray.length-1,wa&&(Bs=4*wa.length,lr.addSymbols(lr.icon,wa,aa,$n,jn,sr,fl.vertical,An,Hn,_s.lineStartIndex,_s.lineLength,-1,Si,ri,Zi,ls),Gs=lr.icon.placedSymbolArray.length-1)}for(const po in ar.horizontal){const Eo=po,Jo=ar.horizontal[Eo];qi||(fo=Pc(Jo.text),Ge?vs=o3(Jo):qi=L1(di,is,Hn,ni,hi,Gi,Jo,gs,Jr.layout.get("text-rotate").evaluate(sr,{},ri),Xe));const wa=Jo.positionedLines.length===1;if(Or+=MT(lr,An,Hn,Jo,Br,Jr,Ge,sr,Xe,_s,ar.vertical?fl.horizontal:fl.horizontalOnly,wa?WF(ar.horizontal):[Eo],Rs,Es,zr,Si,ri,Zi),wa)break}ar.vertical&&(Ai+=MT(lr,An,Hn,ar.vertical,Br,Jr,Ge,sr,Xe,_s,fl.vertical,["vertical"],Rs,Gs,zr,Si,ri,Zi));let jo=-1;const Xa=(po,Eo)=>po?Math.max(po,Eo):Eo;jo=Xa(vs,jo),jo=Xa(Ji,jo),jo=Xa(li,jo);const ld=jo>-1?1:0;lr.glyphOffsetArray.length>=65535&&kn("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),sr.sortKey!==void 0&&lr.addToSortKeyRanges(lr.symbolInstances.length,sr.sortKey),lr.symbolInstances.emplaceBack(Hn.x,Hn.y,is.x,is.y,is.z,Rs.right>=0?Rs.right:-1,Rs.center>=0?Rs.center:-1,Rs.left>=0?Rs.left:-1,Rs.vertical>=0?Rs.vertical:-1,Es,Gs,fo,qi!==void 0?qi:lr.collisionBoxArray.length,qi!==void 0?qi+1:lr.collisionBoxArray.length,Cs!==void 0?Cs:lr.collisionBoxArray.length,Cs!==void 0?Cs+1:lr.collisionBoxArray.length,Ks!==void 0?Ks:lr.collisionBoxArray.length,Ks!==void 0?Ks+1:lr.collisionBoxArray.length,us||lr.collisionBoxArray.length,us?us+1:lr.collisionBoxArray.length,ni,Or,Ai,es,Bs,ld,0,Za,Xo,jo,0,uo?1:0,Fs)})(a,Ln,Cr,Xt,o,c,_,h,a.layers[0],a.collisionBoxArray,t.index,t.sourceLayerIndex,a.index,Rt,Fe,L,0,Yt,hn,Ie,t,y,V,$,U,ee,de,be,yn)};if(Be==="line")for(const Xt of w1(t.geometry,0,0,Pn,Pn)){const Ln=UF(Xt,St,Tn,o.vertical||He,c,xt,ht,a.overscaling,Pn);for(const Dn of Ln)He&&QF(a,He.text,Cn,Dn)||Wt(Xt,Dn,U)}else if(Be==="line-center"){for(const Xt of t.geometry)if(Xt.length>1){const Ln=HF(Xt,Tn,o.vertical||He,c,xt,ht);Ln&&Wt(Xt,Ln,U)}}else if(t.type==="Polygon")for(const Xt of g1(t.geometry,0)){const Ln=GF(Xt,16);Wt(Xt[0],new Xd(Ln.x,Ln.y,0,0,void 0),U)}else if(t.type==="LineString")for(const Xt of t.geometry)Wt(Xt,new Xd(Xt[0].x,Xt[0].y,0,0,void 0),U);else if(t.type==="Point")for(const Xt of t.geometry)for(const Ln of Xt)Wt([Ln],new Xd(Ln.x,Ln.y,0,0,void 0),U)}const I_=255,tf=I_*ad;function MT(a,t,o,c,h,_,y,C,R,L,V,$,U,X,ee,de,be,Ie){const Fe=function(De,He,Ze,xt,ht,St,Rt,Yt){const Tn=[];if(He.positionedLines.length===0)return Tn;const hn=xt.layout.get("text-rotate").evaluate(St,{})*Math.PI/180,Cn=function(Xt){const Ln=Xt[0],Dn=Xt[1],Cr=Ln*Dn;return Cr>0?[Ln,-Dn]:Cr<0?[-Ln,Dn]:Ln===0?[Dn,Ln]:[Dn,-Ln]}(Ze);let In=Math.abs(He.top-He.bottom);for(const Xt of He.positionedLines)In-=Xt.lineOffset;const Jt=He.positionedLines.length,yn=In/Jt;let Wt=He.top-Ze[1];for(let Xt=0;Xt<Jt;++Xt){const Ln=He.positionedLines[Xt];Wt=jF(He,yn,Wt,Xt);for(const Dn of Ln.positionedGlyphs){if(!Dn.rect)continue;const Cr=Dn.rect||{};let lr=FF+1,Hn=!0,An=1,qr=0;if(Dn.image){const sr=Rt.get(Dn.image.toString());if(!sr)continue;if(sr.sdf){kn("SDF images are not supported in formatted text and will be ignored.");continue}Hn=!1,An=sr.pixelRatio,lr=gp/An}const ar=(ht||Yt)&&Dn.vertical,ur=Dn.metrics.advance*Dn.scale/2,Br=Dn.metrics,Qr=Dn.rect;if(Qr===null)continue;Yt&&He.verticalizable&&(qr=Dn.image?ur-Dn.metrics.width*Dn.scale/2:0);const Jr=ht?[Dn.x+ur,Dn.y]:[0,0];let di=[0,0],ni=[0,0],hi=!1;ht||(ar?(ni=[Dn.x+ur+Cn[0],Dn.y+Cn[1]-qr],hi=!0):di=[Dn.x+ur+Ze[0],Dn.y+Ze[1]-qr]);const Gi=Qr.w*Dn.scale/(An*(Dn.localGlyph?ic:1)),gs=Qr.h*Dn.scale/(An*(Dn.localGlyph?ic:1));let Ge,Xe,en,Fn;if(ar){const sr=Dn.y-Wt,zr=new Rn(-ur,ur-sr),wi=-Math.PI/2,Si=new Rn(...ni);Ge=new Rn(-ur+di[0],di[1]),Ge._rotateAround(wi,zr)._add(Si),Ge.x+=-sr+ur,Ge.y-=(Br.left-lr)*Dn.scale;const ri=Dn.image?Br.advance*Dn.scale:zo*Dn.scale,Zi=String.fromCodePoint(Dn.glyph);PF(Zi)?Ge.x+=(1-lr)*Dn.scale:LF(Zi)?Ge.x+=ri-Br.height*Dn.scale+(-lr-1)*Dn.scale:Ge.x+=Dn.image||Br.width+2*lr===Qr.w&&Br.height+2*lr===Qr.h?(ri-gs)/2:(ri-(Br.height+2*lr)*Dn.scale)/2,Xe=new Rn(Ge.x,Ge.y-Gi),en=new Rn(Ge.x+gs,Ge.y),Fn=new Rn(Ge.x+gs,Ge.y-Gi)}else{const sr=(Br.left-lr)*Dn.scale-ur+di[0],zr=(-Br.top-lr)*Dn.scale+di[1],wi=sr+Gi,Si=zr+gs;Ge=new Rn(sr,zr),Xe=new Rn(wi,zr),en=new Rn(sr,Si),Fn=new Rn(wi,Si)}if(hn){let sr;sr=ht?new Rn(0,0):hi?new Rn(Cn[0],Cn[1]):new Rn(Ze[0],Ze[1]),Ge._rotateAround(hn,sr),Xe._rotateAround(hn,sr),en._rotateAround(hn,sr),Fn._rotateAround(hn,sr)}const jn=new Rn(0,0),$n=new Rn(0,0);Tn.push({tl:Ge,tr:Xe,bl:en,br:Fn,texPrimary:Cr,texSecondary:void 0,writingMode:He.writingMode,glyphOffset:Jr,sectionIndex:Dn.sectionIndex,isSDF:Hn,pixelOffsetTL:jn,pixelOffsetBR:$n,minFontScaleX:0,minFontScaleY:0})}}return Tn}(0,c,R,_,y,C,h,a.allowVerticalPlacement),Be=a.textSizeData;let pe=null;Be.kind==="source"?(pe=[ad*_.layout.get("text-size").evaluate(C,{},be)*ee.textScaleFactor],pe[0]>tf&&kn(`${a.layerIds[0]}: Value for "text-size" is >= ${I_}. Reduce your "text-size".`)):Be.kind==="composite"&&(pe=[ad*ee.compositeTextSizes[0].evaluate(C,{},be)*ee.textScaleFactor,ad*ee.compositeTextSizes[1].evaluate(C,{},be)*ee.textScaleFactor],(pe[0]>tf||pe[1]>tf)&&kn(`${a.layerIds[0]}: Value for "text-size" is >= ${I_}. Reduce your "text-size".`)),a.addSymbols(a.text,Fe,pe,R,y,C,V,t,o,L.lineStartIndex,L.lineLength,X,de,be,Ie,!1);for(const De of $)U[De]=a.text.placedSymbolArray.length-1;return 4*Fe.length}function s3(a){for(const t in a)return a[t];return null}function L1(a,t,o,c,h,_,y,C,R,L){let V=y.top,$=y.bottom,U=y.left,X=y.right;if(oT(y)&&y.collisionPadding){const ee=y.collisionPadding;U-=ee[0],V-=ee[1],X+=ee[2],$+=ee[3]}if(R){const ee=new Rn(U,V),de=new Rn(X,V),be=new Rn(U,$),Ie=new Rn(X,$),Fe=gi(R);let Be=new Rn(0,0);L&&(Be=new Rn(L[0],L[1])),ee._rotateAround(Fe,Be),de._rotateAround(Fe,Be),be._rotateAround(Fe,Be),Ie._rotateAround(Fe,Be),U=Math.min(ee.x,de.x,be.x,Ie.x),X=Math.max(ee.x,de.x,be.x,Ie.x),V=Math.min(ee.y,de.y,be.y,Ie.y),$=Math.max(ee.y,de.y,be.y,Ie.y)}return a.emplaceBack(t.x,t.y,t.z,o.x,o.y,U,V,X,$,C,c,h,_),a.length-1}function o3(a){oT(a)&&a.collisionPadding&&(a.top-=a.collisionPadding[1],a.bottom+=a.collisionPadding[3]);const t=a.bottom-a.top;return t>0?Math.max(10,t):null}function QF(a,t,o,c){const h=a.compareText;if(t in h){const _=h[t];for(let y=_.length-1;y>=0;y--)if(c.dist(_[y])<o)return!0}else h[t]=[];return h[t].push(c),!1}function AT(a,t){const o=a.fovAboveCenter,c=a.elevation?a.elevation.getMinElevationBelowMSL()*t:0,h=(a._camera.position[2]*a.worldSize-c)/Math.cos(a._pitch),_=Math.sin(o)*h/Math.sin(Math.max(Math.PI/2-a._pitch-o,.01));let y=Math.sin(a._pitch)*_+h;const C=h*(1/a._horizonShift);if(!a.elevation||a.elevation.exaggeration()===0){let R=Math.max(a.zoom-17,0);a.isOrthographic&&(R/=10),y*=1+R}return Math.min(1.01*y,C)}function k_(a,t){if(!t.isReprojectedInTileSpace)return{scale:1<<a.z,x:a.x,y:a.y,x2:a.x+1,y2:a.y+1,projection:t};const o=Math.pow(2,-a.z),c=a.x*o,h=(a.x+1)*o,_=a.y*o,y=(a.y+1)*o,C=pt(c),R=pt(h),L=zt(_),V=zt(y),$=t.project(C,L),U=t.project(R,L),X=t.project(R,V),ee=t.project(C,V);let de=Math.min($.x,U.x,X.x,ee.x),be=Math.min($.y,U.y,X.y,ee.y),Ie=Math.max($.x,U.x,X.x,ee.x),Fe=Math.max($.y,U.y,X.y,ee.y);const Be=o/16;function pe(He,Ze,xt,ht,St,Rt){const Yt=(xt+St)/2,Tn=(ht+Rt)/2,hn=t.project(pt(Yt),zt(Tn)),Cn=Math.max(0,de-hn.x,be-hn.y,hn.x-Ie,hn.y-Fe);de=Math.min(de,hn.x),Ie=Math.max(Ie,hn.x),be=Math.min(be,hn.y),Fe=Math.max(Fe,hn.y),Cn>Be&&(pe(He,hn,xt,ht,Yt,Tn),pe(hn,Ze,Yt,Tn,St,Rt))}pe($,U,c,_,h,_),pe(U,X,h,_,h,y),pe(X,ee,h,y,c,y),pe(ee,$,c,y,c,_),de-=Be,be-=Be,Ie+=Be,Fe+=Be;const De=1/Math.max(Ie-de,Fe-be);return{scale:De,x:de*De,y:be*De,x2:Ie*De,y2:Fe*De,projection:t}}function RT(a,{x:t,y:o},c=0){return new Rn(((t-c)*a.scale-a.x)*Pn,(o*a.scale-a.y)*Pn)}const eB=N(new Float32Array(16));class nf{constructor(t){this.spec=t,this.name=t.name,this.wrap=!1,this.requiresDraping=!1,this.supportsWorldCopies=!1,this.supportsTerrain=!1,this.supportsFog=!1,this.supportsFreeCamera=!1,this.zAxisUnit="meters",this.isReprojectedInTileSpace=!0,this.unsupportedLayers=["custom"],this.center=[0,0],this.range=[3.5,7]}project(t,o){return{x:0,y:0,z:0}}unproject(t,o){return new ze(0,0)}projectTilePoint(t,o,c){return{x:t,y:o,z:0}}locationPoint(t,o,c,h=!0){return t._coordinatePoint(t.locationCoordinate(o,c),h)}pixelsPerMeter(t,o){return ut(1,t)*o}pixelSpaceConversion(t,o,c){return 1}farthestPixelDistance(t){return AT(t,t.pixelsPerMeter)}pointCoordinate(t,o,c,h){const _=t.horizonLineFromTop(!1),y=new Rn(o,Math.max(_,c));return t.rayIntersectionCoordinate(t.pointRayIntersection(y,h))}pointCoordinate3D(t,o,c){const h=new Rn(o,c);if(t.elevation)return t.elevation.pointCoordinate(h);{const _=this.pointCoordinate(t,h.x,h.y,0);return[_.x,_.y,_.z]}}isPointAboveHorizon(t,o){if(t.elevation&&t.elevation.visibleDemTiles.length)return!this.pointCoordinate3D(t,o.x,o.y);const c=t.horizonLineFromTop();return o.y<c}createInversionMatrix(t,o){return eB}createTileMatrix(t,o,c){let h,_,y;const C=c.canonical,R=N(new Float64Array(16));if(this.isReprojectedInTileSpace){const L=k_(C,this);h=1,_=L.x+c.wrap*L.scale,y=L.y,W(R,R,[h/L.scale,h/L.scale,t.pixelsPerMeter/o])}else h=o/t.zoomScale(C.z),_=(C.x+Math.pow(2,C.z)*c.wrap)*h,y=C.y*h;return ie(R,R,[_,y,0]),W(R,R,[h/Pn,h/Pn,1]),R}upVector(t,o,c){return[0,0,1]}upVectorScale(t,o,c){return{metersToTile:1}}}class tB extends nf{constructor(t){super(t),this.range=[4,7],this.center=t.center||[-96,37.5];const[o,c]=this.parallels=t.parallels||[29.5,45.5],h=Math.sin(gi(o));this.n=(h+Math.sin(gi(c)))/2,this.c=1+h*(2*this.n-h),this.r0=Math.sqrt(this.c)/this.n}project(t,o){const{n:c,c:h,r0:_}=this,y=gi(t-this.center[0]),C=gi(o),R=Math.sqrt(h-2*c*Math.sin(C))/c;return{x:R*Math.sin(y*c),y:R*Math.cos(y*c)-_,z:0}}unproject(t,o){const{n:c,c:h,r0:_}=this,y=_+o;let C=Math.atan2(t,Math.abs(y))*Math.sign(y);y*c<0&&(C-=Math.PI*Math.sign(t)*Math.sign(y));const R=gi(this.center[0])*c;C=$t(C,-Math.PI-R,Math.PI-R);const L=tt(Ut(C/c)+this.center[0],-180,180),V=Math.asin(tt((h-(t*t+y*y)*c*c)/(2*c),-1,1)),$=tt(Ut(V),-85.051129,nn);return new ze(L,$)}}const M_=1.340264,A_=-.081106,R_=893e-6,P_=.003796,O1=Math.sqrt(3)/2;class nB extends nf{project(t,o){o=o/180*Math.PI,t=t/180*Math.PI;const c=Math.asin(O1*Math.sin(o)),h=c*c,_=h*h*h;return{x:.5*(t*Math.cos(c)/(O1*(M_+3*A_*h+_*(7*R_+9*P_*h)))/Math.PI+.5),y:1-.5*(c*(M_+A_*h+_*(R_+P_*h))/Math.PI+1),z:0}}unproject(t,o){t=(2*t-.5)*Math.PI;let c=o=(2*(1-o)-1)*Math.PI,h=c*c,_=h*h*h;for(let V,$,U,X=0;X<12&&($=c*(M_+A_*h+_*(R_+P_*h))-o,U=M_+3*A_*h+_*(7*R_+9*P_*h),V=$/U,c=tt(c-V,-Math.PI/3,Math.PI/3),h=c*c,_=h*h*h,!(Math.abs(V)<1e-12));++X);const y=O1*t*(M_+3*A_*h+_*(7*R_+9*P_*h))/Math.cos(c),C=Math.asin(Math.sin(c)/O1),R=tt(180*y/Math.PI,-180,180),L=tt(180*C/Math.PI,-85.051129,nn);return new ze(R,L)}}class rB extends nf{constructor(t){super(t),this.wrap=!0,this.supportsWorldCopies=!0}project(t,o){return{x:.5+t/360,y:.5-o/360,z:0}}unproject(t,o){const c=360*(t-.5),h=tt(360*(.5-o),-85.051129,nn);return new ze(c,h)}}const Xm=Math.PI/2;function D1(a){return Math.tan((Xm+a)/2)}class iB extends nf{constructor(t){super(t),this.center=t.center||[0,30];const[o,c]=this.parallels=t.parallels||[30,30];let h=gi(o),_=gi(c);this.southernCenter=h+_<0,this.southernCenter&&(h=-h,_=-_);const y=Math.cos(h),C=D1(h);this.n=h===_?Math.sin(h):Math.log(y/Math.cos(_))/Math.log(D1(_)/C),this.f=y*Math.pow(D1(h),this.n)/this.n}project(t,o){o=gi(o),this.southernCenter&&(o=-o),t=gi(t-this.center[0]);const c=1e-6,{n:h,f:_}=this;_>0?o<-Xm+c&&(o=-Xm+c):o>Xm-c&&(o=Xm-c);const y=_/Math.pow(D1(o),h);let C=y*Math.sin(h*t),R=_-y*Math.cos(h*t);return C=.5*(C/Math.PI+.5),R=.5*(R/Math.PI+.5),{x:C,y:this.southernCenter?R:1-R,z:0}}unproject(t,o){t=(2*t-.5)*Math.PI,this.southernCenter&&(o=1-o),o=(2*(1-o)-.5)*Math.PI;const{n:c,f:h}=this,_=h-o,y=Math.sign(_),C=Math.sign(c)*Math.sqrt(t*t+_*_);let R=Math.atan2(t,Math.abs(_))*y;_*c<0&&(R-=Math.PI*Math.sign(t)*y);const L=tt(Ut(R/c)+this.center[0],-180,180),V=tt(Ut(2*Math.atan(Math.pow(h/C,1/c))-Xm),-85.051129,nn);return new ze(L,this.southernCenter?-V:V)}}class PT extends nf{constructor(t){super(t),this.wrap=!0,this.supportsWorldCopies=!0,this.supportsTerrain=!0,this.supportsFog=!0,this.supportsFreeCamera=!0,this.isReprojectedInTileSpace=!1,this.unsupportedLayers=[],this.range=null}project(t,o){return{x:rt(t),y:Qe(o),z:0}}unproject(t,o){const c=pt(t),h=zt(o);return new ze(c,h)}}const LT=gi(nn);class sB extends nf{project(t,o){const c=(o=gi(o))*o,h=c*c;return{x:.5*((t=gi(t))*(.8707-.131979*c+h*(h*(.003971*c-.001529*h)-.013791))/Math.PI+.5),y:1-.5*(o*(1.007226+c*(.015085+h*(.028874*c-.044475-.005916*h)))/Math.PI+1),z:0}}unproject(t,o){t=(2*t-.5)*Math.PI;let c=o=(2*(1-o)-1)*Math.PI,h=25,_=0,y=c*c;do{y=c*c;const L=y*y;_=(c*(1.007226+y*(.015085+L*(.028874*y-.044475-.005916*L)))-o)/(1.007226+y*(.045255+L*(.259866*y-.311325-.005916*11*L))),c=tt(c-_,-LT,LT)}while(Math.abs(_)>1e-6&&--h>0);y=c*c;const C=tt(Ut(t/(.8707+y*(y*(y*y*y*(.003971-.001529*y)-.013791)-.131979))),-180,180),R=Ut(c);return new ze(C,R)}}const OT=gi(nn);class oB extends nf{project(t,o){o=gi(o),t=gi(t);const c=Math.cos(o),h=2/Math.PI,_=Math.acos(c*Math.cos(t/2)),y=Math.sin(_)/_,C=.5*(t*h+2*c*Math.sin(t/2)/y)||0,R=.5*(o+Math.sin(o)/y)||0;return{x:.5*(C/Math.PI+.5),y:1-.5*(R/Math.PI+1),z:0}}unproject(t,o){let c=t=(2*t-.5)*Math.PI,h=o=(2*(1-o)-1)*Math.PI,_=25;const y=1e-6;let C=0,R=0;do{const L=Math.cos(h),V=Math.sin(h),$=2*V*L,U=V*V,X=L*L,ee=Math.cos(c/2),de=Math.sin(c/2),be=2*ee*de,Ie=de*de,Fe=1-X*ee*ee,Be=Fe?1/Fe:0,pe=Fe?Math.acos(L*ee)*Math.sqrt(1/Fe):0,De=.5*(2*pe*L*de+2*c/Math.PI)-t,He=.5*(pe*V+h)-o,Ze=.5*Be*(X*Ie+pe*L*ee*U)+1/Math.PI,xt=Be*(be*$/4-pe*V*de),ht=.125*Be*($*de-pe*V*X*be),St=.5*Be*(U*ee+pe*Ie*L)+.5,Rt=xt*ht-St*Ze;C=(He*xt-De*St)/Rt,R=(De*ht-He*Ze)/Rt,c=tt(c-C,-Math.PI,Math.PI),h=tt(h-R,-OT,OT)}while((Math.abs(C)>y||Math.abs(R)>y)&&--_>0);return new ze(Ut(c),Ut(h))}}class DT extends nf{constructor(t){super(t),this.center=t.center||[0,0],this.parallels=t.parallels||[0,0],this.cosPhi=Math.max(.01,Math.cos(gi(this.parallels[0]))),this.scale=1/(2*Math.max(Math.PI*this.cosPhi,1/this.cosPhi)),this.wrap=!0,this.supportsWorldCopies=!0}project(t,o){const{scale:c,cosPhi:h}=this;return{x:gi(t)*h*c+.5,y:-Math.sin(gi(o))/h*c+.5,z:0}}unproject(t,o){const{scale:c,cosPhi:h}=this,_=-(o-.5)/c,y=tt(Ut((t-.5)/c)/h,-180,180),C=Math.asin(tt(_*h,-1,1)),R=tt(Ut(C),-85.051129,nn);return new ze(y,R)}}class aB extends PT{constructor(t){super(t),this.requiresDraping=!0,this.supportsWorldCopies=!1,this.supportsFog=!0,this.zAxisUnit="pixels",this.unsupportedLayers=["debug"],this.range=[3,5]}projectTilePoint(t,o,c){const h=a_(t,o,c);return Lt(h,h,f1(sd(c))),{x:h[0],y:h[1],z:h[2]}}locationPoint(t,o,c){const h=_e(o.lat,o.lng),_=Mt([],h),y=c?t._centerAltitude+c:t.elevation?t.elevation.getAtPointOrZero(t.locationCoordinate(o),t._centerAltitude):t._centerAltitude;We(h,h,_,ut(1,0)*Pn*y);const C=N(new Float64Array(16));return G(C,t.pixelMatrix,t.globeMatrix),Lt(h,h,C),new Rn(h[0],h[1])}pixelsPerMeter(t,o){return ut(1,0)*o}pixelSpaceConversion(t,o,c){const h=ut(1,t)*o,_=Dr(ut(1,45)*o,h,c);return this.pixelsPerMeter(t,o)/_}createTileMatrix(t,o,c){const h=Sw(sd(c.canonical));return G(new Float64Array(16),t.globeMatrix,h)}createInversionMatrix(t,o){const{center:c}=t,h=f1(sd(o));return J(h,h,gi(c.lng)),Y(h,h,gi(c.lat)),W(h,h,[t._pixelsPerMercatorPixel,t._pixelsPerMercatorPixel,1]),Float32Array.from(h)}pointCoordinate(t,o,c,h){return _C(t,o,c,!0)||new kt(0,0)}pointCoordinate3D(t,o,c){const h=this.pointCoordinate(t,o,c,0);return[h.x,h.y,h.z]}isPointAboveHorizon(t,o){return!_C(t,o.x,o.y,!1)}farthestPixelDistance(t){const o=function(h,_){const y=h.cameraToCenterDistance,C=h._centerAltitude*_,R=h._camera,L=h._camera.forward(),V=Pe([],Ve([],L,-y),[0,0,C]),$=h.worldSize/(2*Math.PI),U=[0,0,-$],X=h.width/h.height,ee=Math.tan(h.fovAboveCenter),de=Ve([],R.up(),ee),be=Ve([],R.right(),ee*X),Ie=Mt([],Pe([],Pe([],L,de),be)),Fe=[];let Be;if(new ws(V,Ie).closestPointOnSphere(U,$,Fe)){const pe=Pe([],Fe,U),De=nt([],pe,V);Be=Math.cos(h.fovAboveCenter)*Ue(De)}else{const pe=nt([],V,U),De=nt([],U,V);Mt(De,De);const He=Ue(pe)-$;Be=Math.sqrt(He*(He+2*$));const Ze=Math.acos(Be/($+He))-Math.acos(Ct(L,De));Be*=Math.cos(Ze)}return 1.01*Be}(t,this.pixelsPerMeter(t.center.lat,t.worldSize)),c=Jh(t.zoom);if(c>0){const h=AT(t,ut(1,t.center.lat)*t.worldSize),_=t.worldSize/(2*Math.PI),y=Math.max(t.width,t.height)/t.worldSize*Math.PI;return Dr(o,h+_*(1-Math.cos(y)),Math.pow(c,10))}return o}upVector(t,o,c){return a_(o,c,t,1)}upVectorScale(t){return{metersToTile:c1(h1(sd(t)))}}}function zT(a){const t=a.parallels,o=!!t&&Math.abs(t[0]+t[1])<.01;switch(a.name){case"mercator":return new PT(a);case"equirectangular":return new rB(a);case"naturalEarth":return new sB(a);case"equalEarth":return new nB(a);case"winkelTripel":return new oB(a);case"albers":return o?new DT(a):new tB(a);case"lambertConformalConic":return o?new DT(a):new iB(a);case"globe":return new aB(a)}throw new Error(`Invalid projection name: ${a.name}`)}const lB=ii.VectorTileFeature.types,uB=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function z1(a,t,o,c,h,_,y,C,R,L,V,$,U){const X=C?Math.min(tf,Math.round(C[0])):0,ee=C?Math.min(tf,Math.round(C[1])):0;a.emplaceBack(t,o,Math.round(32*c),Math.round(32*h),_,y,(X<<1)+(R?1:0),ee,16*L,16*V,256*$,256*U)}function N1(a,t,o){a.emplaceBack(t,o)}function F1(a,t,o,c,h,_,y){a.emplaceBack(t,o,c,h,_,y)}const B1=(a,t,o,c)=>{for(let h=0;h<t;h++)a.emplaceBack(o[0],o[1],o[2],c[0],c[1],c[2])};function V1(a,t,o,c,h){a.emplaceBack(t,o,c,h),a.emplaceBack(t,o,c,h),a.emplaceBack(t,o,c,h),a.emplaceBack(t,o,c,h)}function cB(a){for(const t of a.sections)if(hw(t.text))return!0;return!1}class a3{constructor(t){this.layoutVertexArray=new Uh,this.indexArray=new Ho,this.programConfigurations=t,this.segments=new Us,this.dynamicLayoutVertexArray=new $o,this.opacityVertexArray=new Gh,this.placedSymbolArray=new Zy,this.iconTransitioningVertexArray=new ed,this.globeExtVertexArray=new jh,this.zOffsetVertexArray=new Jc,this.orientationVertexArray=new Z0}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0&&this.iconTransitioningVertexArray.length===0}upload(t,o,c,h,_){this.isEmpty()||(c&&(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,wF.members),this.indexBuffer=t.createIndexBuffer(this.indexArray,o),this.dynamicLayoutVertexBuffer=t.createVertexBuffer(this.dynamicLayoutVertexArray,CF.members,!0),this.opacityVertexBuffer=t.createVertexBuffer(this.opacityVertexArray,uB,!0),this.iconTransitioningVertexArray.length>0&&(this.iconTransitioningVertexBuffer=t.createVertexBuffer(this.iconTransitioningVertexArray,IF.members,!0)),this.globeExtVertexArray.length>0&&(this.globeExtVertexBuffer=t.createVertexBuffer(this.globeExtVertexArray,SF.members,!0)),!this.zOffsetVertexBuffer&&(this.zOffsetVertexArray.length>0||_)&&(this.zOffsetVertexBuffer=t.createVertexBuffer(this.zOffsetVertexArray,EF.members,!0)),!this.orientationVertexBuffer&&this.orientationVertexArray&&this.orientationVertexArray.length>0&&(this.orientationVertexBuffer=t.createVertexBuffer(this.orientationVertexArray,TF.members,!0)),this.opacityVertexBuffer.itemSize=1),(c||h)&&this.programConfigurations.upload(t))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy(),this.iconTransitioningVertexBuffer&&this.iconTransitioningVertexBuffer.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy(),this.zOffsetVertexBuffer&&this.zOffsetVertexBuffer.destroy(),this.orientationVertexBuffer&&this.orientationVertexBuffer.destroy())}}Qn(a3,"SymbolBuffers");class l3{constructor(t,o,c){this.layoutVertexArray=new t,this.layoutAttributes=o,this.indexArray=new c,this.segments=new Us,this.collisionVertexArray=new Qf,this.collisionVertexArrayExt=new $o}upload(t){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=t.createVertexBuffer(this.collisionVertexArray,kF.members,!0),this.collisionVertexBufferExt=t.createVertexBuffer(this.collisionVertexArrayExt,MF.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}Qn(l3,"CollisionBuffers");class $1{constructor(t){this.collisionBoxArray=t.collisionBoxArray,this.zoom=t.zoom,this.lut=t.lut,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(y=>y.fqid),this.index=t.index,this.pixelRatio=t.pixelRatio,this.sourceLayerIndex=t.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.fullyClipped=!1,this.hasAnyIconTextFit=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=N([]),this.placementViewportMatrix=N([]);const o=this.layers[0]._unevaluatedLayout._values;this.worldview=t.worldview,this.textSizeData=dT(this.zoom,o["text-size"],this.worldview),this.iconSizeData=dT(this.zoom,o["icon-size"],this.worldview);const c=this.layers[0].layout,h=c.get("symbol-sort-key"),_=c.get("symbol-z-order");this.canOverlap=c.get("text-allow-overlap")||c.get("icon-allow-overlap")||c.get("text-ignore-placement")||c.get("icon-ignore-placement"),this.sortFeaturesByKey=_!=="viewport-y"&&h.constantOr(1)!==void 0,this.sortFeaturesByY=(_==="viewport-y"||_==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=c.get("text-writing-mode").map(y=>fl[y]),this.stateDependentLayerIds=this.layers.filter(y=>y.isStateDependent()).map(y=>y.id),this.sourceID=t.sourceID,this.projection=t.projection,this.hasAnyZOffset=!1,this.zOffsetSortDirty=!1,this.zOffsetBuffersNeedUpload=!1,this.elevationType="none",this.elevationStateComplete=!1,this.activeReplacements=[],this.replacementUpdateTime=0}createArrays(){this.text=new a3(new f(this.layers,{zoom:this.zoom,lut:this.lut},t=>t.startsWith("text")||t.startsWith("symbol"))),this.icon=new a3(new f(this.layers,{zoom:this.zoom,lut:this.lut},t=>t.startsWith("icon")||t.startsWith("symbol"))),this.glyphOffsetArray=new e_,this.lineVertexArray=new Qy,this.symbolInstances=new Jy}calculateGlyphDependencies(t,o,c,h,_){for(const y of t){const C=y.codePointAt(0);if(C===void 0)break;if(o[C]=!0,h&&_&&C<=65535){const R=S_[y];R&&(o[R.charCodeAt(0)]=!0)}}}updateFootprints(t,o){}updateReplacement(t,o){if(o.updateTime===this.replacementUpdateTime)return!1;this.replacementUpdateTime=o.updateTime;const c=o.getReplacementRegionsForTile(t.toUnwrapped(),!0);return!zw(this.activeReplacements,c)&&(this.activeReplacements=c,!0)}populate(t,o,c,h){const _=this.layers[0],y=_.layout,C=this.projection.name==="globe",R=y.get("text-font"),L=y.get("text-field"),V=y.get("icon-image"),[$,U]=y.get("icon-size-scale-range"),X=tt(o.scaleFactor||1,$,U),ee=(L.value.kind!=="constant"||L.value.value instanceof Ko&&!L.value.value.isEmpty()||L.value.value.toString().length>0)&&(R.value.kind!=="constant"||R.value.value.length>0),de=V.value.kind!=="constant"||!!V.value.value||Object.keys(V.parameters).length>0,be=y.get("symbol-sort-key");if(this.features=[],!ee&&!de)return;const Ie=o.iconDependencies,Fe=o.glyphDependencies,Be=o.availableImages,pe=new Qi(this.zoom,{worldview:this.worldview});for(const{feature:De,id:He,index:Ze,sourceLayerIndex:xt}of t){const ht=_._featureFilter.needGeometry,St=Zn(De,ht);if(!_._featureFilter.filter(pe,St,c))continue;if(ht||(St.geometry=tr(De,c,h)),C&&De.type!==1&&c.z<=5){const Cn=St.geometry,In=.98078528056,Jt=(yn,Wt)=>Ct(a_(yn.x,yn.y,c,1),a_(Wt.x,Wt.y,c,1))<In;for(let yn=0;yn<Cn.length;yn++)Cn[yn]=zn(Cn[yn],Jt)}let Rt,Yt;if(ee){const Cn=_.getValueAndResolveTokens("text-field",St,c,Be),In=Ko.factory(Cn);cB(In)&&(this.hasRTLText=!0),(!this.hasRTLText||Fh()==="unavailable"||this.hasRTLText&&Qu.isParsed())&&(Rt=RF(In,_,St))}if(de){const Cn=_.getValueAndResolveTokens("icon-image",St,c,Be);Yt=typeof Cn=="string"?sa.build(Cn):Cn}if(!Rt&&!Yt)continue;const Tn=this.sortFeaturesByKey?be.evaluate(St,{},c):void 0,hn={id:He,text:Rt,icon:Yt,index:Ze,sourceLayerIndex:xt,geometry:St.geometry,properties:De.properties,type:lB[De.type],sortKey:Tn};if(this.features.push(hn),Yt){const Cn=this.layers[0]._unevaluatedLayout._values,{iconPrimary:In,iconSecondary:Jt}=TT(Yt,this.iconSizeData,Cn["icon-size"],c,this.zoom,hn,this.pixelRatio,X,this.worldview),yn=In.id.toString();if(Ie.has(yn)?Ie.get(yn).push(In):Ie.set(yn,[In]),Jt){const Wt=Jt.id.toString();Ie.has(Wt)?Ie.get(Wt).push(Jt):Ie.set(Wt,[Jt])}}if(Rt){const Cn=R.evaluate(St,{},c).join(","),In=y.get("text-rotation-alignment")==="map"&&y.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(fl.vertical)>=0;for(const Jt of Rt.sections)if(Jt.image){const yn=Jt.image.getPrimary().scaleSelf(this.pixelRatio),Wt=yn.id.toString(),Xt=Ie.get(Wt)||[];Xt.push(yn),Ie.set(Wt,Xt)}else{const yn=Wf(Rt.toString()),Wt=Jt.fontStack||Cn,Xt=Fe[Wt]=Fe[Wt]||{};this.calculateGlyphDependencies(Jt.text,Xt,In,this.allowVerticalPlacement,yn)}}}if(y.get("symbol-placement")==="line"&&(this.features=function(De){const He={},Ze={},xt=[];let ht=0;function St(hn){xt.push(De[hn]),ht++}function Rt(hn,Cn,In){const Jt=Ze[hn];return delete Ze[hn],Ze[Cn]=Jt,xt[Jt].geometry[0].pop(),xt[Jt].geometry[0]=xt[Jt].geometry[0].concat(In[0]),Jt}function Yt(hn,Cn,In){const Jt=He[Cn];return delete He[Cn],He[hn]=Jt,xt[Jt].geometry[0].shift(),xt[Jt].geometry[0]=In[0].concat(xt[Jt].geometry[0]),Jt}function Tn(hn,Cn,In){const Jt=In?Cn[0][Cn[0].length-1]:Cn[0][0];return`${hn}:${Jt.x}:${Jt.y}`}for(let hn=0;hn<De.length;hn++){const Cn=De[hn],In=Cn.geometry,Jt=Cn.text?Cn.text.toString():null;if(!Jt){St(hn);continue}const yn=Tn(Jt,In),Wt=Tn(Jt,In,!0);if(yn in Ze&&Wt in He&&Ze[yn]!==He[Wt]){const Xt=Yt(yn,Wt,In),Ln=Rt(yn,Wt,xt[Xt].geometry);delete He[yn],delete Ze[Wt],Ze[Tn(Jt,xt[Ln].geometry,!0)]=Ln,xt[Xt].geometry=null}else yn in Ze?Rt(yn,Wt,In):Wt in He?Yt(yn,Wt,In):(St(hn),He[yn]=ht-1,Ze[Wt]=ht-1)}return xt.filter(hn=>hn.geometry)}(this.features)),y.get("symbol-elevation-reference")==="hd-road-markup"){if(this.elevationType="road",o.elevationFeatures){!this.elevationFeatures&&o.elevationFeatures.length>0&&(this.elevationFeatures=[],this.elevationFeatureIdToIndex=new Map);for(const De of o.elevationFeatures)this.elevationFeatureIdToIndex.set(De.id,this.elevationFeatures.length),this.elevationFeatures.push(De)}}else y.get("symbol-z-elevate")&&(this.elevationType="offset");this.elevationType!=="none"&&(this.zOffsetBuffersNeedUpload=!0),this.sortFeaturesByKey&&this.features.sort((De,He)=>De.sortKey-He.sortKey)}update(t,o,c,h,_,y,C){this.text.programConfigurations.updatePaintArrays(t,o,_,c,h,y,C,this.worldview),this.icon.programConfigurations.updatePaintArrays(t,o,_,c,h,y,C,this.worldview)}updateRoadElevation(t){if(this.elevationType!=="road"||!this.elevationFeatures||this.elevationStateComplete)return;this.elevationStateComplete=!0,this.hasAnyZOffset=!1;let o=!1;const c=Kt(t),h=1/c;let _=!1,y=!1;for(let C=0;C<this.symbolInstances.length;C++){const R=this.symbolInstances.get(C),L=Ne(1,0,0),V=Ne(0,1,0),{numHorizontalGlyphVertices:$,numVerticalGlyphVertices:U,numIconVertices:X,numVerticalIconVertices:ee}=R,de=$>0||U>0,be=X>0,Ie=this.elevationFeatures[R.elevationFeatureIndex];if(Ie){const Fe=new Rn(R.tileAnchorX,R.tileAnchorY),Be=.075+Ie.pointElevation(Fe);R.zOffset!==Be&&(o=!0,R.zOffset=Be);const pe=Ie.computeSlopeNormal(Fe,h),De=wr(fn(),Ne(0,0,1),pe);Ht(L,L,De),Ht(V,V,De),L[2]*=c,V[2]*=c,L[0]===1&&L[1]===0&&L[2]===0&&V[0]===0&&V[1]===1&&V[2]===0||(_=_||de,y=y||be)}if(de&&(B1(this.text.orientationVertexArray,$,L,V),B1(this.text.orientationVertexArray,U,L,V)),be){const{placedIconSymbolIndex:Fe,verticalPlacedIconSymbolIndex:Be}=R;Fe>=0&&B1(this.icon.orientationVertexArray,X,L,V),Be>=0&&B1(this.icon.orientationVertexArray,ee,L,V)}}_||(this.text.orientationVertexArray=void 0),y||(this.icon.orientationVertexArray=void 0),o&&(this.zOffsetBuffersNeedUpload=!0,this.zOffsetSortDirty=!0)}updateZOffset(){const t=(_,y,C)=>{c+=y,c>_.length&&_.resize(c);for(let R=-y;R<0;R++)_.emplace(R+c,C)},o=(_,y,C)=>{h+=y,h>_.length&&_.resize(h);for(let R=-y;R<0;R++)_.emplace(R+h,C)};if(!this.zOffsetBuffersNeedUpload)return;this.zOffsetBuffersNeedUpload=!1;let c=0,h=0;for(let _=0;_<this.symbolInstances.length;_++){const y=this.symbolInstances.get(_),{numHorizontalGlyphVertices:C,numVerticalGlyphVertices:R,numIconVertices:L}=y,V=y.zOffset,$=L>0;if((C>0||R>0)&&(t(this.text.zOffsetVertexArray,C,V),t(this.text.zOffsetVertexArray,R,V)),$){const{placedIconSymbolIndex:U,verticalPlacedIconSymbolIndex:X}=y;U>=0&&o(this.icon.zOffsetVertexArray,L,V),X>=0&&o(this.icon.zOffsetVertexArray,y.numVerticalIconVertices,V)}}this.text.zOffsetVertexBuffer&&this.text.zOffsetVertexBuffer.updateData(this.text.zOffsetVertexArray),this.icon.zOffsetVertexBuffer&&this.icon.zOffsetVertexBuffer.updateData(this.icon.zOffsetVertexArray)}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(t){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(t),this.iconCollisionBox.upload(t)),this.text.upload(t,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload,this.zOffsetBuffersNeedUpload),this.icon.upload(t,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload,this.zOffsetBuffersNeedUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}getProjection(){return this.projectionInstance||(this.projectionInstance=zT(this.projection)),this.projectionInstance}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(t,o){const c=this.lineVertexArray.length;if(t.segment!==void 0)for(const{x:h,y:_}of o)this.lineVertexArray.emplaceBack(h,_);return{lineStartIndex:c,lineLength:this.lineVertexArray.length-c}}addSymbols(t,o,c,h,_,y,C,R,L,V,$,U,X,ee,de,be){const Ie=t.indexArray,Fe=t.layoutVertexArray,Be=t.globeExtVertexArray,pe=t.segments.prepareSegment(4*o.length,Fe,Ie,this.canOverlap?y.sortKey:void 0),De=this.glyphOffsetArray.length,He=pe.vertexLength,Ze=this.allowVerticalPlacement&&C===fl.vertical?Math.PI/2:0,xt=y.text&&y.text.sections;for(let St=0;St<o.length;St++){const{tl:Rt,tr:Yt,bl:Tn,br:hn,texPrimary:Cn,texSecondary:In,pixelOffsetTL:Jt,pixelOffsetBR:yn,minFontScaleX:Wt,minFontScaleY:Xt,glyphOffset:Ln,isSDF:Dn,sectionIndex:Cr}=o[St],lr=pe.vertexLength,Hn=Ln[1];if(z1(Fe,L.x,L.y,Rt.x,Hn+Rt.y,Cn.x,Cn.y,c,Dn,Jt.x,Jt.y,Wt,Xt),z1(Fe,L.x,L.y,Yt.x,Hn+Yt.y,Cn.x+Cn.w,Cn.y,c,Dn,yn.x,Jt.y,Wt,Xt),z1(Fe,L.x,L.y,Tn.x,Hn+Tn.y,Cn.x,Cn.y+Cn.h,c,Dn,Jt.x,yn.y,Wt,Xt),z1(Fe,L.x,L.y,hn.x,Hn+hn.y,Cn.x+Cn.w,Cn.y+Cn.h,c,Dn,yn.x,yn.y,Wt,Xt),R){const{x:An,y:qr,z:ar}=R.anchor,[ur,Br,Qr]=R.up;F1(Be,An,qr,ar,ur,Br,Qr),F1(Be,An,qr,ar,ur,Br,Qr),F1(Be,An,qr,ar,ur,Br,Qr),F1(Be,An,qr,ar,ur,Br,Qr),V1(t.dynamicLayoutVertexArray,An,qr,ar,Ze)}else V1(t.dynamicLayoutVertexArray,L.x,L.y,L.z,Ze);if(be){const An=In||Cn;N1(t.iconTransitioningVertexArray,An.x,An.y),N1(t.iconTransitioningVertexArray,An.x+An.w,An.y),N1(t.iconTransitioningVertexArray,An.x,An.y+An.h),N1(t.iconTransitioningVertexArray,An.x+An.w,An.y+An.h)}Ie.emplaceBack(lr,lr+1,lr+2),Ie.emplaceBack(lr+1,lr+2,lr+3),pe.vertexLength+=4,pe.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Ln[0]),St!==o.length-1&&Cr===o[St+1].sectionIndex||t.programConfigurations.populatePaintArrays(Fe.length,y,y.index,{},X,ee,de,xt&&xt[Cr],this.worldview)}const ht=R?R.anchor:L;t.placedSymbolArray.emplaceBack(ht.x,ht.y,ht.z,L.x,L.y,De,this.glyphOffsetArray.length-De,He,V,$,L.segment,c?c[0]:0,c?c[1]:0,h[0],h[1],C,0,0,0,U,0)}_commitLayoutVertex(t,o,c,h,_,y,C){t.emplaceBack(o,c,h,_,y,Math.round(C.x),Math.round(C.y))}_addCollisionDebugVertices(t,o,c,h,_,y,C){const R=c.segments.prepareSegment(4,c.layoutVertexArray,c.indexArray),L=R.vertexLength,V=C.tileAnchorX,$=C.tileAnchorY;for(let X=0;X<4;X++)c.collisionVertexArray.emplaceBack(0,0,0,0,0,0);this._commitDebugCollisionVertexUpdate(c.collisionVertexArrayExt,o,t.padding,C.zOffset),this._commitLayoutVertex(c.layoutVertexArray,h,_,y,V,$,new Rn(t.x1,t.y1)),this._commitLayoutVertex(c.layoutVertexArray,h,_,y,V,$,new Rn(t.x2,t.y1)),this._commitLayoutVertex(c.layoutVertexArray,h,_,y,V,$,new Rn(t.x2,t.y2)),this._commitLayoutVertex(c.layoutVertexArray,h,_,y,V,$,new Rn(t.x1,t.y2)),R.vertexLength+=4;const U=c.indexArray;U.emplaceBack(L,L+1),U.emplaceBack(L+1,L+2),U.emplaceBack(L+2,L+3),U.emplaceBack(L+3,L),R.primitiveLength+=4}_addTextDebugCollisionBoxes(t,o,c,h,_,y){for(let C=h;C<_;C++){const R=c.get(C),L=this.getSymbolInstanceTextSize(t,y,o,C);this._addCollisionDebugVertices(R,L,this.textCollisionBox,R.projectedAnchorX,R.projectedAnchorY,R.projectedAnchorZ,y)}}_addIconDebugCollisionBoxes(t,o,c,h,_,y){for(let C=h;C<_;C++){const R=c.get(C),L=this.getSymbolInstanceIconSize(t,o,y.placedIconSymbolIndex);this._addCollisionDebugVertices(R,L,this.iconCollisionBox,R.projectedAnchorX,R.projectedAnchorY,R.projectedAnchorZ,y)}}generateCollisionDebugBuffers(t,o,c){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new l3(Am,XE.members,ed),this.iconCollisionBox=new l3(Am,XE.members,ed);const h=E_(this.iconSizeData,t),_=E_(this.textSizeData,t,c);for(let y=0;y<this.symbolInstances.length;y++){const C=this.symbolInstances.get(y);this._addTextDebugCollisionBoxes(_,t,o,C.textBoxStartIndex,C.textBoxEndIndex,C),this._addTextDebugCollisionBoxes(_,t,o,C.verticalTextBoxStartIndex,C.verticalTextBoxEndIndex,C),this._addIconDebugCollisionBoxes(h,t,o,C.iconBoxStartIndex,C.iconBoxEndIndex,C),this._addIconDebugCollisionBoxes(h,t,o,C.verticalIconBoxStartIndex,C.verticalIconBoxEndIndex,C)}}getSymbolInstanceTextSize(t,o,c,h){const _=this.text.placedSymbolArray.get(o.rightJustifiedTextSymbolIndex>=0?o.rightJustifiedTextSymbolIndex:o.centerJustifiedTextSymbolIndex>=0?o.centerJustifiedTextSymbolIndex:o.leftJustifiedTextSymbolIndex>=0?o.leftJustifiedTextSymbolIndex:o.verticalPlacedTextSymbolIndex>=0?o.verticalPlacedTextSymbolIndex:h),y=e3(this.textSizeData,t,_)/zo;return this.tilePixelRatio*y}getSymbolInstanceIconSize(t,o,c){const h=this.icon.placedSymbolArray.get(c),_=e3(this.iconSizeData,t,h);return this.tilePixelRatio*_}_commitDebugCollisionVertexUpdate(t,o,c,h){t.emplaceBack(o,-c,-c,h),t.emplaceBack(o,c,-c,h),t.emplaceBack(o,c,c,h),t.emplaceBack(o,-c,c,h)}_updateTextDebugCollisionBoxes(t,o,c,h,_,y,C){for(let R=h;R<_;R++){const L=c.get(R),V=this.getSymbolInstanceTextSize(t,y,o,R);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,V,L.padding,y.zOffset)}}_updateIconDebugCollisionBoxes(t,o,c,h,_,y,C){for(let R=h;R<_;R++){const L=c.get(R),V=this.getSymbolInstanceIconSize(t,o,y.placedIconSymbolIndex);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,V,L.padding,y.zOffset)}}updateCollisionDebugBuffers(t,o,c,h){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const _=E_(this.iconSizeData,t,h),y=E_(this.textSizeData,t,c);for(let C=0;C<this.symbolInstances.length;C++){const R=this.symbolInstances.get(C);this._updateTextDebugCollisionBoxes(y,t,o,R.textBoxStartIndex,R.textBoxEndIndex,R,c),this._updateTextDebugCollisionBoxes(y,t,o,R.verticalTextBoxStartIndex,R.verticalTextBoxEndIndex,R,c),this._updateIconDebugCollisionBoxes(_,t,o,R.iconBoxStartIndex,R.iconBoxEndIndex,R,h),this._updateIconDebugCollisionBoxes(_,t,o,R.verticalIconBoxStartIndex,R.verticalIconBoxEndIndex,R,h)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(t,o,c,h,_,y,C,R,L){const V={};if(o<c){const{x1:$,y1:U,x2:X,y2:ee,padding:de,projectedAnchorX:be,projectedAnchorY:Ie,projectedAnchorZ:Fe,tileAnchorX:Be,tileAnchorY:pe,featureIndex:De}=t.get(o);V.textBox={x1:$,y1:U,x2:X,y2:ee,padding:de,projectedAnchorX:be,projectedAnchorY:Ie,projectedAnchorZ:Fe,tileAnchorX:Be,tileAnchorY:pe},V.textFeatureIndex=De}if(h<_){const{x1:$,y1:U,x2:X,y2:ee,padding:de,projectedAnchorX:be,projectedAnchorY:Ie,projectedAnchorZ:Fe,tileAnchorX:Be,tileAnchorY:pe,featureIndex:De}=t.get(h);V.verticalTextBox={x1:$,y1:U,x2:X,y2:ee,padding:de,projectedAnchorX:be,projectedAnchorY:Ie,projectedAnchorZ:Fe,tileAnchorX:Be,tileAnchorY:pe},V.verticalTextFeatureIndex=De}if(y<C){const{x1:$,y1:U,x2:X,y2:ee,padding:de,projectedAnchorX:be,projectedAnchorY:Ie,projectedAnchorZ:Fe,tileAnchorX:Be,tileAnchorY:pe,featureIndex:De}=t.get(y);V.iconBox={x1:$,y1:U,x2:X,y2:ee,padding:de,projectedAnchorX:be,projectedAnchorY:Ie,projectedAnchorZ:Fe,tileAnchorX:Be,tileAnchorY:pe},V.iconFeatureIndex=De}if(R<L){const{x1:$,y1:U,x2:X,y2:ee,padding:de,projectedAnchorX:be,projectedAnchorY:Ie,projectedAnchorZ:Fe,tileAnchorX:Be,tileAnchorY:pe,featureIndex:De}=t.get(R);V.verticalIconBox={x1:$,y1:U,x2:X,y2:ee,padding:de,projectedAnchorX:be,projectedAnchorY:Ie,projectedAnchorZ:Fe,tileAnchorX:Be,tileAnchorY:pe},V.verticalIconFeatureIndex=De}return V}deserializeCollisionBoxes(t){this.collisionArrays=[];for(let o=0;o<this.symbolInstances.length;o++){const c=this.symbolInstances.get(o);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(t,c.textBoxStartIndex,c.textBoxEndIndex,c.verticalTextBoxStartIndex,c.verticalTextBoxEndIndex,c.iconBoxStartIndex,c.iconBoxEndIndex,c.verticalIconBoxStartIndex,c.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}hasIconTextFit(){return this.hasAnyIconTextFit}addIndicesForPlacedSymbol(t,o){const c=t.placedSymbolArray.get(o),h=c.vertexStartIndex+4*c.numGlyphs;for(let _=c.vertexStartIndex;_<h;_+=4)t.indexArray.emplaceBack(_,_+1,_+2),t.indexArray.emplaceBack(_+1,_+2,_+3)}getSortedSymbolIndexes(t){if(this.sortedAngle===t&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const o=Math.sin(t),c=Math.cos(t),h=[],_=[],y=[];for(let C=0;C<this.symbolInstances.length;++C){y.push(C);const R=this.symbolInstances.get(C);h.push(0|Math.round(o*R.tileAnchorX+c*R.tileAnchorY)),_.push(R.featureIndex)}return y.sort((C,R)=>h[C]-h[R]||_[R]-_[C]),y}getSortedIndexesByZOffset(){if(!this.zOffsetSortDirty)return this.symbolInstanceIndexesSortedZOffset;if(!this.symbolInstanceIndexesSortedZOffset){this.symbolInstanceIndexesSortedZOffset=[];for(let t=0;t<this.symbolInstances.length;++t)this.symbolInstanceIndexesSortedZOffset.push(t)}return this.zOffsetSortDirty=!1,this.symbolInstanceIndexesSortedZOffset.sort((t,o)=>this.symbolInstances.get(o).zOffset-this.symbolInstances.get(t).zOffset)}addToSortKeyRanges(t,o){const c=this.sortKeyRanges[this.sortKeyRanges.length-1];c&&c.sortKey===o?c.symbolInstanceEnd=t+1:this.sortKeyRanges.push({sortKey:o,symbolInstanceStart:t,symbolInstanceEnd:t+1})}sortFeatures(t){if(this.sortFeaturesByY&&this.sortedAngle!==t&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(t),this.sortedAngle=t,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const o of this.symbolInstanceIndexes){const c=this.symbolInstances.get(o);this.featureSortOrder.push(c.featureIndex);const{rightJustifiedTextSymbolIndex:h,centerJustifiedTextSymbolIndex:_,leftJustifiedTextSymbolIndex:y,verticalPlacedTextSymbolIndex:C,placedIconSymbolIndex:R,verticalPlacedIconSymbolIndex:L}=c;h>=0&&this.addIndicesForPlacedSymbol(this.text,h),_>=0&&_!==h&&this.addIndicesForPlacedSymbol(this.text,_),y>=0&&y!==_&&y!==h&&this.addIndicesForPlacedSymbol(this.text,y),C>=0&&this.addIndicesForPlacedSymbol(this.text,C),R>=0&&this.addIndicesForPlacedSymbol(this.icon,R),L>=0&&this.addIndicesForPlacedSymbol(this.icon,L)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let NT,FT,u3;Qn($1,"SymbolBucket",{omit:["layers","collisionBoxArray","features","compareText"]}),$1.addDynamicAttributes=V1;class BT{constructor(t){this.type=t.property.overrides?t.property.overrides.runtimeType:Ga,this.defaultValue=t}evaluate(t){if(t.formattedSection){const o=this.defaultValue.property.overrides;if(o&&o.hasOverride(t.formattedSection))return o.getOverride(t.formattedSection)}return t.feature&&t.featureState?this.defaultValue.evaluate(t.feature,t.featureState):this.defaultValue.property.specification.default}eachChild(t){this.defaultValue.isConstant()||t(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Qn(BT,"FormatSectionOverride",{omit:["defaultValue"]});const c3=()=>u3||(u3={layout:NT||(NT=new Vs({"symbol-placement":new Mn(Dt.layout_symbol["symbol-placement"]),"symbol-spacing":new Mn(Dt.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Mn(Dt.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Yn(Dt.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Mn(Dt.layout_symbol["symbol-z-order"]),"symbol-z-elevate":new Mn(Dt.layout_symbol["symbol-z-elevate"]),"symbol-elevation-reference":new Mn(Dt.layout_symbol["symbol-elevation-reference"]),"icon-allow-overlap":new Mn(Dt.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Mn(Dt.layout_symbol["icon-ignore-placement"]),"icon-optional":new Mn(Dt.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Mn(Dt.layout_symbol["icon-rotation-alignment"]),"icon-size":new Yn(Dt.layout_symbol["icon-size"]),"icon-size-scale-range":new Mn(Dt.layout_symbol["icon-size-scale-range"]),"icon-text-fit":new Yn(Dt.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Yn(Dt.layout_symbol["icon-text-fit-padding"]),"icon-image":new Yn(Dt.layout_symbol["icon-image"]),"icon-rotate":new Yn(Dt.layout_symbol["icon-rotate"]),"icon-padding":new Mn(Dt.layout_symbol["icon-padding"]),"icon-keep-upright":new Mn(Dt.layout_symbol["icon-keep-upright"]),"icon-offset":new Yn(Dt.layout_symbol["icon-offset"]),"icon-anchor":new Yn(Dt.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Mn(Dt.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Mn(Dt.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Mn(Dt.layout_symbol["text-rotation-alignment"]),"text-field":new Yn(Dt.layout_symbol["text-field"]),"text-font":new Yn(Dt.layout_symbol["text-font"]),"text-size":new Yn(Dt.layout_symbol["text-size"]),"text-size-scale-range":new Mn(Dt.layout_symbol["text-size-scale-range"]),"text-max-width":new Yn(Dt.layout_symbol["text-max-width"]),"text-line-height":new Yn(Dt.layout_symbol["text-line-height"]),"text-letter-spacing":new Yn(Dt.layout_symbol["text-letter-spacing"]),"text-justify":new Yn(Dt.layout_symbol["text-justify"]),"text-radial-offset":new Yn(Dt.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Mn(Dt.layout_symbol["text-variable-anchor"]),"text-anchor":new Yn(Dt.layout_symbol["text-anchor"]),"text-max-angle":new Mn(Dt.layout_symbol["text-max-angle"]),"text-writing-mode":new Mn(Dt.layout_symbol["text-writing-mode"]),"text-rotate":new Yn(Dt.layout_symbol["text-rotate"]),"text-padding":new Mn(Dt.layout_symbol["text-padding"]),"text-keep-upright":new Mn(Dt.layout_symbol["text-keep-upright"]),"text-transform":new Yn(Dt.layout_symbol["text-transform"]),"text-offset":new Yn(Dt.layout_symbol["text-offset"]),"text-allow-overlap":new Mn(Dt.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Mn(Dt.layout_symbol["text-ignore-placement"]),"text-optional":new Mn(Dt.layout_symbol["text-optional"]),visibility:new Mn(Dt.layout_symbol.visibility)})),paint:FT||(FT=new Vs({"icon-opacity":new Yn(Dt.paint_symbol["icon-opacity"]),"icon-occlusion-opacity":new Yn(Dt.paint_symbol["icon-occlusion-opacity"]),"icon-emissive-strength":new Yn(Dt.paint_symbol["icon-emissive-strength"]),"text-emissive-strength":new Yn(Dt.paint_symbol["text-emissive-strength"]),"icon-color":new Yn(Dt.paint_symbol["icon-color"]),"icon-halo-color":new Yn(Dt.paint_symbol["icon-halo-color"]),"icon-halo-width":new Yn(Dt.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Yn(Dt.paint_symbol["icon-halo-blur"]),"icon-translate":new Mn(Dt.paint_symbol["icon-translate"]),"icon-translate-anchor":new Mn(Dt.paint_symbol["icon-translate-anchor"]),"icon-image-cross-fade":new Mn(Dt.paint_symbol["icon-image-cross-fade"]),"text-opacity":new Yn(Dt.paint_symbol["text-opacity"]),"text-occlusion-opacity":new Yn(Dt.paint_symbol["text-occlusion-opacity"]),"text-color":new Yn(Dt.paint_symbol["text-color"],{runtimeType:va,getOverride:a=>a.textColor,hasOverride:a=>!!a.textColor}),"text-halo-color":new Yn(Dt.paint_symbol["text-halo-color"]),"text-halo-width":new Yn(Dt.paint_symbol["text-halo-width"]),"text-halo-blur":new Yn(Dt.paint_symbol["text-halo-blur"]),"text-translate":new Mn(Dt.paint_symbol["text-translate"]),"text-translate-anchor":new Mn(Dt.paint_symbol["text-translate-anchor"]),"icon-color-saturation":new Mn(Dt.paint_symbol["icon-color-saturation"]),"icon-color-contrast":new Mn(Dt.paint_symbol["icon-color-contrast"]),"icon-color-brightness-min":new Mn(Dt.paint_symbol["icon-color-brightness-min"]),"icon-color-brightness-max":new Mn(Dt.paint_symbol["icon-color-brightness-max"]),"symbol-z-offset":new Yn(Dt.paint_symbol["symbol-z-offset"]),"icon-color-use-theme":new Yn({type:"string",default:"default","property-type":"data-driven"}),"icon-halo-color-use-theme":new Yn({type:"string",default:"default","property-type":"data-driven"}),"text-color-use-theme":new Yn({type:"string",default:"default","property-type":"data-driven"}),"text-halo-color-use-theme":new Yn({type:"string",default:"default","property-type":"data-driven"})}))},u3);class H1 extends oa{constructor(t,o,c,h){super(t,c3(),o,c,h),this._colorAdjustmentMatrix=N([]),this.hasInitialOcclusionOpacityProperties=t.paint!==void 0&&("icon-occlusion-opacity"in t.paint||"text-occlusion-opacity"in t.paint)}recalculate(t,o){super.recalculate(t,o),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));const c=this.layout.get("text-writing-mode");if(c){const h=[];for(const _ of c)h.indexOf(_)<0&&h.push(_);this.layout._values["text-writing-mode"]=h}else this.layout._values["text-writing-mode"]=this.layout.get("symbol-placement")==="point"?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}getColorAdjustmentMatrix(t,o,c,h){return this._saturation===t&&this._contrast===o&&this._brightnessMin===c&&this._brightnessMax===h||(this._colorAdjustmentMatrix=function(_,y,C,R){_=io(_),y=Io(y);const L=F(),V=_/3,$=1-2*V,U=[$,V,V,0,V,$,V,0,V,V,$,0,0,0,0,1],X=.5-.5*y,ee=R-C;return G(L,[ee,0,0,0,0,ee,0,0,0,0,ee,0,C,C,C,1],[y,0,0,0,0,y,0,0,0,0,y,0,X,X,X,1]),G(L,L,U),L}(t,o,c,h),this._saturation=t,this._contrast=o,this._brightnessMin=c,this._brightnessMax=h),this._colorAdjustmentMatrix}getValueAndResolveTokens(t,o,c,h){const _=this.layout.get(t).evaluate(o,{},c,h),y=this._unevaluatedLayout._values[t];return y.isDataDriven()||bm(y.value)||!_?_:function(C,R){return R.replace(/{([^{}]+)}/g,(L,V)=>V in C?String(C[V]):"")}(o.properties,_)}createBucket(t){return new $1(t)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const t of c3().paint.overridableProperties){if(!H1.hasPaintOverride(this.layout,t))continue;const o=this.paint.get(t),c=new BT(o),h=new Dh(c,o.property.specification,this.scope,this.options);let _=null;_=o.value.kind==="constant"||o.value.kind==="source"?new Gf("source",h):new qf("composite",h,o.value.zoomStops,o.value.interpolationType),this.paint._values[t]=new Bh(o.property,_,o.parameters)}}_handleOverridablePaintPropertyUpdate(t,o,c){return!(!this.layout||o.isDataDriven()||c.isDataDriven())&&H1.hasPaintOverride(this.layout,t)}static hasPaintOverride(t,o){const c=t.get("text-field"),h=c3().paint.properties[o];let _=!1;const y=C=>{for(const R of C)if(h.overrides&&h.overrides.hasOverride(R))return void(_=!0)};if(c.value.kind==="constant"&&c.value.value instanceof Ko)y(c.value.value.sections);else if(c.value.kind==="source"){const C=L=>{_||(L instanceof Vr&&Jn(L.value)===Oc?y(L.value.sections):L instanceof Fc?y(L.sections):L.eachChild(C))},R=c.value;R._styleExpression&&C(R._styleExpression.expression)}return _}getProgramIds(){return["symbol"]}getDefaultProgramParams(t,o,c){return{config:new Yh(this,{zoom:o,lut:c}),overrideFog:!1}}hasElevation(){return this.layout&&this.layout.get("symbol-elevation-reference")==="hd-road-markup"}}let VT,$T,HT,UT;var d3=zi([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);function h3(a){switch(a){case WebGL2RenderingContext.RGBA8:return WebGL2RenderingContext.RGBA;case WebGL2RenderingContext.DEPTH_COMPONENT16:return WebGL2RenderingContext.DEPTH_COMPONENT;case WebGL2RenderingContext.DEPTH24_STENCIL8:return WebGL2RenderingContext.DEPTH_STENCIL;case WebGL2RenderingContext.R8:case WebGL2RenderingContext.R32F:return WebGL2RenderingContext.RED}}function f3(a){switch(a){case WebGL2RenderingContext.RGBA8:return WebGL2RenderingContext.UNSIGNED_BYTE;case WebGL2RenderingContext.DEPTH_COMPONENT16:return WebGL2RenderingContext.UNSIGNED_SHORT;case WebGL2RenderingContext.DEPTH24_STENCIL8:return WebGL2RenderingContext.UNSIGNED_INT_24_8;case WebGL2RenderingContext.R8:return WebGL2RenderingContext.UNSIGNED_BYTE;case WebGL2RenderingContext.R32F:return WebGL2RenderingContext.FLOAT}}class p3{constructor(t,o,c,h){this.context=t,this.format=c,this.useMipmap=h&&h.useMipmap,this.texture=t.gl.createTexture(),this.update(o,{premultiply:h&&h.premultiply})}update(t,o){const c=t&&t instanceof HTMLVideoElement&&t.width===0?t.videoWidth:t.width,h=t&&t instanceof HTMLVideoElement&&t.height===0?t.videoHeight:t.height,{context:_}=this,{gl:y}=_,{x:C,y:R}=o&&o.position?o.position:{x:0,y:0},L=C+c,V=R+h;!this.size||this.size[0]===L&&this.size[1]===V||(y.bindTexture(y.TEXTURE_2D,null),y.deleteTexture(this.texture),this.texture=y.createTexture(),this.size=null),y.bindTexture(y.TEXTURE_2D,this.texture),_.pixelStoreUnpackFlipY.set(!1),_.pixelStoreUnpack.set(1),_.pixelStoreUnpackPremultiplyAlpha.set(this.format===y.RGBA8&&(!o||o.premultiply!==!1));const $=t instanceof HTMLImageElement||t instanceof HTMLCanvasElement||t instanceof HTMLVideoElement||t instanceof ImageData||ImageBitmap&&t instanceof ImageBitmap;if(!this.size&&L>0&&V>0){const U=this.useMipmap?Math.floor(Math.log2(Math.max(L,V)))+1:1;y.texStorage2D(y.TEXTURE_2D,U,this.format,L,V),this.size=[L,V]}if(this.size)if($)y.texSubImage2D(y.TEXTURE_2D,0,C,R,h3(this.format),f3(this.format),t);else{const U=t.data;U&&y.texSubImage2D(y.TEXTURE_2D,0,C,R,c,h,h3(this.format),f3(this.format),U)}this.useMipmap&&y.generateMipmap(y.TEXTURE_2D)}bind(t,o,c=!1){const{context:h}=this,{gl:_}=h;_.bindTexture(_.TEXTURE_2D,this.texture),t!==this.minFilter&&(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MAG_FILTER,t),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MIN_FILTER,this.useMipmap&&!c?t===_.NEAREST?_.NEAREST_MIPMAP_NEAREST:_.LINEAR_MIPMAP_LINEAR:t),this.minFilter=t),o!==this.wrapS&&(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_S,o),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_T,o),this.wrapS=o)}bindExtraParam(t,o,c,h,_){const{context:y}=this,{gl:C}=y;C.bindTexture(C.TEXTURE_2D,this.texture),o!==this.magFilter&&(C.texParameteri(C.TEXTURE_2D,C.TEXTURE_MAG_FILTER,o),this.magFilter=o),t!==this.minFilter&&(C.texParameteri(C.TEXTURE_2D,C.TEXTURE_MIN_FILTER,this.useMipmap?t===C.NEAREST?C.NEAREST_MIPMAP_NEAREST:C.LINEAR_MIPMAP_LINEAR:t),this.minFilter=t),c!==this.wrapS&&(C.texParameteri(C.TEXTURE_2D,C.TEXTURE_WRAP_S,c),this.wrapS=c),h!==this.wrapT&&(C.texParameteri(C.TEXTURE_2D,C.TEXTURE_WRAP_T,h),this.wrapT=h),_!==this.compareMode&&(_?(C.texParameteri(C.TEXTURE_2D,C.TEXTURE_COMPARE_MODE,C.COMPARE_REF_TO_TEXTURE),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_COMPARE_FUNC,_)):C.texParameteri(C.TEXTURE_2D,C.TEXTURE_COMPARE_MODE,C.NONE),this.compareMode=_)}destroy(){const{gl:t}=this.context;t.deleteTexture(this.texture),this.texture=null}}class U1{constructor(t,o){this.context=t,this.texture=o}bind(t,o){const{context:c}=this,{gl:h}=c;h.bindTexture(h.TEXTURE_2D,this.texture),t!==this.minFilter&&(h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,t),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,t),this.minFilter=t),o!==this.wrapS&&(h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_S,o),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_T,o),this.wrapS=o)}}function j1(a,t,o,c,h,_,y,C){const R=[a,t,1,o,c,1,h,_,1],L=[y,C,1],V=D([],R),[$,U,X]=xn(L,L,V);return z(R,R,[$,0,0,0,U,0,0,0,X])}function jT(a,t,o,c,h,_,y,C){const R=function(L,V,$,U,X,ee,de,be){const Ie=j1(0,0,1,0,1,1,0,1),Fe=j1(L,V,$,U,X,ee,de,be);return z(Fe,Fe,D([],Ie))}(a,t,o,c,h,_,y,C);return[R[2]/R[8]/Pn,R[5]/R[8]/Pn]}function G1(a){return[a[0],Math.min(Math.max(a[1],-85.051129),nn)]}class GT extends Ua{constructor(t,o,c,h){super(),this.id=t,this.dispatcher=c,this.coordinates=o.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.onNorthPole=!1,this.onSouthPole=!1,this.setEventedParent(h),this.options=o,this._dirty=!1}load(t,o){if(this._loaded=o||!1,this.fire(new na("dataloading",{dataType:"source"})),this.url=this.options.url,!this.url)return t&&(this.coordinates=t),this._loaded=!0,void this._finishLoading();this._imageRequest=Vu(this.map._requestManager.transformRequest(this.url,Ad.Image),(c,h)=>{this._imageRequest=null,this._loaded=!0,c?this.fire(new $u(c)):h&&(this.image=h instanceof HTMLImageElement?sl.getImageData(h):h,this._dirty=!0,this.width=this.image.width,this.height=this.image.height,t&&(this.coordinates=t),this._finishLoading())})}loaded(){return this._loaded}updateImage(t){return t.url?(this._imageRequest&&t.url!==this.options.url&&(this._imageRequest.cancel(),this._imageRequest=null),this.options.url=t.url,this.load(t.coordinates,this._loaded),this):this}setTexture(t){if(!(t.handle instanceof WebGLTexture))throw new Error("The provided handle is not a WebGLTexture instance");return this.texture=new U1(this.map.painter.context,t.handle),this.width=t.dimensions[0],this.height=t.dimensions[1],this._dirty=!1,this._loaded=!0,this._finishLoading(),this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new na("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(t){this.map=t,this.load()}onRemove(t){this._imageRequest&&(this._imageRequest.cancel(),this._imageRequest=null),!this.texture||this.texture instanceof U1||this.texture.destroy(),this.boundsBuffer&&(this.boundsBuffer.destroy(),this.elevatedGlobeVertexBuffer&&this.elevatedGlobeVertexBuffer.destroy(),this.elevatedGlobeIndexBuffer&&this.elevatedGlobeIndexBuffer.destroy())}setCoordinates(t){if(this.coordinates=t,this._boundsArray=void 0,this._unsupportedCoords=!1,!t.length)return this;this.onNorthPole=!1,this.onSouthPole=!1;let o=t[0][1],c=t[0][1];for(const _ of t)_[1]>c&&(c=_[1]),_[1]<o&&(o=_[1]);const h=(c+o)/2;if(h>nn?this.onNorthPole=!0:h<-85.051129&&(this.onSouthPole=!0),!this.onNorthPole&&!this.onSouthPole){const _=t.map(kt.fromLngLat);this.tileID=function(y){let C=1/0,R=1/0,L=-1/0,V=-1/0;for(const de of y)C=Math.min(C,de.x),R=Math.min(R,de.y),L=Math.max(L,de.x),V=Math.max(V,de.y);const $=Math.max(L-C,V-R),U=Math.max(0,Math.floor(-Math.log($)/Math.LN2)),X=Math.pow(2,U);let ee=Math.floor((C+L)/2*X);return ee>1&&(ee-=1),new dp(U,ee,Math.floor((R+V)/2*X))}(_),this.minzoom=this.maxzoom=this.tileID.z}return this.fire(new na("data",{dataType:"source",sourceDataType:"content"})),this}_clear(){this._boundsArray=void 0,this._unsupportedCoords=!1}_prepareData(t){for(const Ie in this.tiles){const Fe=this.tiles[Ie];Fe.state!=="loaded"&&(Fe.state="loaded",Fe.texture=this.texture)}if(this._boundsArray||this.onNorthPole||this.onSouthPole||this._unsupportedCoords)return;const o=k_(new dp(0,0,0),this.map.transform.projection),c=[o.projection.project(this.coordinates[0][0],this.coordinates[0][1]),o.projection.project(this.coordinates[1][0],this.coordinates[1][1]),o.projection.project(this.coordinates[2][0],this.coordinates[2][1]),o.projection.project(this.coordinates[3][0],this.coordinates[3][1])];if(!function(Ie){const Fe=Ie[1].x-Ie[0].x,Be=Ie[1].y-Ie[0].y,pe=Ie[2].x-Ie[1].x,De=Ie[2].y-Ie[1].y,He=Ie[3].x-Ie[2].x,Ze=Ie[3].y-Ie[2].y,xt=Ie[0].x-Ie[3].x,ht=Ie[0].y-Ie[3].y,St=Fe*De-pe*Be,Rt=pe*Ze-He*De,Yt=He*ht-xt*Ze,Tn=xt*Be-Fe*ht;return St>0&&Rt>0&&Yt>0&&Tn>0||St<0&&Rt<0&&Yt<0&&Tn<0}(c))return console.warn("Image source coordinates are defining non-convex area in the Mercator projection"),void(this._unsupportedCoords=!0);const h=k_(this.tileID,this.map.transform.projection),[_,y,C,R]=this.coordinates.map(Ie=>{const Fe=h.projection.project(Ie[0],Ie[1]);return RT(h,Fe)._round()});this.perspectiveTransform=jT(_.x,_.y,y.x,y.y,C.x,C.y,R.x,R.y);const L=this._boundsArray=new $h;L.emplaceBack(_.x,_.y,0,0),L.emplaceBack(y.x,y.y,Pn,0),L.emplaceBack(R.x,R.y,0,Pn),L.emplaceBack(C.x,C.y,Pn,Pn),this.boundsBuffer&&(this.boundsBuffer.destroy(),this.elevatedGlobeVertexBuffer&&this.elevatedGlobeVertexBuffer.destroy(),this.elevatedGlobeIndexBuffer&&this.elevatedGlobeIndexBuffer.destroy()),this.boundsBuffer=t.createVertexBuffer(L,d3.members),this.boundsSegments=Us.simpleSegment(0,0,4,2);const V=[],$=[G1((U=this.coordinates)[0]),G1(U[1]),G1(U[2]),G1(U[3])];var U;const[X,ee,de,be]=function(Ie){let Fe=Ie[0][0],Be=Fe,pe=Ie[0][1],De=pe;for(let He=1;He<Ie.length;He++)Ie[He][0]<Fe?Fe=Ie[He][0]:Ie[He][0]>Be&&(Be=Ie[He][0]),Ie[He][1]<pe?pe=Ie[He][1]:Ie[He][1]>De&&(De=Ie[He][1]);return[Fe,pe,Be-Fe,De-pe]}($);{const Ie=new $h,[Fe,Be,pe,De]=function(Jt){let yn=Jt[0].x,Wt=yn,Xt=Jt[0].y,Ln=Xt;for(let Dn=1;Dn<Jt.length;Dn++)Jt[Dn].x<yn?yn=Jt[Dn].x:Jt[Dn].x>Wt&&(Wt=Jt[Dn].x),Jt[Dn].y<Xt?Xt=Jt[Dn].y:Jt[Dn].y>Ln&&(Ln=Jt[Dn].y);return[yn,Xt,Wt-yn,Ln-Xt]}(c),He=Jt=>[(Jt.x-Fe)/pe,(Jt.y-Be)/De],[Ze,xt,ht,St]=c.map(He),Rt=function(Jt,yn,Wt,Xt,Ln,Dn,Cr,lr){const Hn=j1(0,0,1,0,1,1,0,1);return z(Hn,Hn,D([],j1(Jt,yn,Wt,Xt,Ln,Dn,Cr,lr)))}(Ze[0],Ze[1],xt[0],xt[1],ht[0],ht[1],St[0],St[1]);this.elevatedGlobePerspectiveTransform=jT(Ze[0],Ze[1],xt[0],xt[1],ht[0],ht[1],St[0],St[1]);const Yt=(Jt,yn)=>{V.push(Jt.lng);const Wt=Math.round((Jt.lng-X)/de*Pn),Xt=Math.round((Jt.lat-ee)/be*Pn),Ln=He(yn),Dn=xn([],[Ln[0],Ln[1],1],Rt),Cr=Math.round(Dn[0]/Dn[2]*Pn),lr=Math.round(Dn[1]/Dn[2]*Pn);Ie.emplaceBack(Wt,Xt,Cr,lr)},Tn=c[3].x-c[0].x,hn=c[3].y-c[0].y,Cn=c[2].x-c[1].x,In=c[2].y-c[1].y;for(let Jt=0;Jt<65;Jt++){const yn=Jt/64,Wt=[c[0].x+yn*Tn,c[0].y+yn*hn],Xt=[c[1].x+yn*Cn,c[1].y+yn*In],Ln=Xt[0]-Wt[0],Dn=Xt[1]-Wt[1];for(let Cr=0;Cr<65;Cr++){const lr=Cr/64,Hn={x:Wt[0]+Ln*lr,y:Wt[1]+Dn*lr};Yt(o.projection.unproject(Hn.x,Hn.y),Hn)}}this.elevatedGlobeVertexBuffer=t.createVertexBuffer(Ie,d3.members)}{this.maxLongitudeTriangleSize=0;let Ie=[],Fe=new Ho;const Be=(pe,De,He)=>{Fe.emplaceBack(pe,De,He);const Ze=V[pe],xt=V[De],ht=V[He],St=Math.min(Math.min(Ze,xt),ht),Rt=Math.max(Math.max(Ze,xt),ht)-St;Rt>this.maxLongitudeTriangleSize&&(this.maxLongitudeTriangleSize=Rt),Ie.push(St+Rt/2)};for(let pe=0;pe<64;pe++)for(let De=0;De<64;De++){const He=65*pe+De,Ze=He+1,xt=He+65,ht=xt+1;Be(He,xt,Ze),Be(Ze,xt,ht)}[Ie,Fe]=function(pe,De){const He=Array.from({length:pe.length},(ht,St)=>St);He.sort((ht,St)=>pe[ht]-pe[St]);const Ze=[],xt=new Ho;for(let ht=0;ht<He.length;ht++){const St=He[ht];Ze.push(pe[St]);const Rt=3*St,Yt=Rt+1;xt.emplaceBack(De.uint16[Rt],De.uint16[Yt],De.uint16[Yt+1])}return[Ze,xt]}(Ie,Fe),this.elevatedGlobeTrianglesCenterLongitudes=Ie,this.elevatedGlobeIndexBuffer=t.createIndexBuffer(Fe)}this.elevatedGlobeSegments=Us.simpleSegment(0,0,4225,8192),this.elevatedGlobeGridMatrix=new Float32Array([0,de/Pn,0,be/Pn,0,0,ee,X,0])}prepare(){const t=Object.keys(this.tiles).length!==0;if(this.tileID&&!t)return;const o=this.map.painter.context,c=o.gl;!this._dirty||this.texture instanceof U1||(this.texture?this.texture.update(this.image):(this.texture=new p3(o,this.image,c.RGBA8),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE)),this._dirty=!1),t&&this._prepareData(o)}loadTile(t,o){this.tileID&&this.tileID.equals(t.tileID.canonical)?(this.tiles[String(t.tileID.wrap)]=t,t.buckets={},o(null)):(t.state="errored",o(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}getSegmentsForLongitude(t){const o=this.elevatedGlobeSegments;if(!this.elevatedGlobeTrianglesCenterLongitudes||!o)return null;const c=this.elevatedGlobeTrianglesCenterLongitudes;let h=(_=t+180)+360*Math.round((c[0]-_)/360);var _;const y=new Us,C=($,U)=>{y.segments.push({vertexOffset:0,primitiveOffset:$,vertexLength:o.segments[0].vertexLength,primitiveLength:U,sortKey:void 0,vaos:{}})},R=.51*this.maxLongitudeTriangleSize;if(Math.abs(c[0]-h)<=R){const $=Js(c,0,c.length,h+R);return $===c.length||C($,$i(c,$+1,c.length,h+360-R)-$),y}h<c[0]&&(h+=360);const L=$i(c,0,c.length,h-R);if(L===c.length)return C(0,c.length),y;C(0,L-0);const V=Js(c,L+1,c.length,h+R);return V!==c.length&&C(V,c.length-V),y}}const dB=(Math.pow(256,2)-1)/16907520;class qT extends oa{constructor(t,o,c,h){super(t,{layout:HT||(HT=new Vs({visibility:new Mn(Dt.layout_raster.visibility)})),paint:UT||(UT=new Vs({"raster-opacity":new Mn(Dt.paint_raster["raster-opacity"]),"raster-color":new qd(Dt.paint_raster["raster-color"]),"raster-color-mix":new Mn(Dt.paint_raster["raster-color-mix"]),"raster-color-range":new Mn(Dt.paint_raster["raster-color-range"]),"raster-hue-rotate":new Mn(Dt.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Mn(Dt.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Mn(Dt.paint_raster["raster-brightness-max"]),"raster-saturation":new Mn(Dt.paint_raster["raster-saturation"]),"raster-contrast":new Mn(Dt.paint_raster["raster-contrast"]),"raster-resampling":new Mn(Dt.paint_raster["raster-resampling"]),"raster-fade-duration":new Mn(Dt.paint_raster["raster-fade-duration"]),"raster-emissive-strength":new Mn(Dt.paint_raster["raster-emissive-strength"]),"raster-array-band":new Mn(Dt.paint_raster["raster-array-band"]),"raster-elevation":new Mn(Dt.paint_raster["raster-elevation"]),"raster-color-use-theme":new Yn({type:"string",default:"default","property-type":"data-driven"})}))},o,c,h),this.updateColorRamp(),this._curRampRange=[NaN,NaN]}getProgramIds(){return["raster"]}hasColorMap(){return!!this._transitionablePaint._values["raster-color"].value.value}tileCoverLift(){return this.paint.get("raster-elevation")}isDraped(t){return!(t&&t._source instanceof GT&&(t._source.onNorthPole||t._source.onSouthPole))&&this.paint.get("raster-elevation")===0}_handleSpecialPaintPropertyUpdate(t){t!=="raster-color"&&t!=="raster-color-range"||(this._curRampRange=[NaN,NaN],this.updateColorRamp())}updateColorRamp(t){if(!this.hasColorMap()||!this._curRampRange)return;const o=this._transitionablePaint._values["raster-color"].value.expression,[c,h]=t||this._transitionablePaint._values["raster-color-range"].value.expression.evaluate({zoom:0})||[NaN,NaN];isNaN(c)&&isNaN(h)||c===this._curRampRange[0]&&h===this._curRampRange[1]||(this.colorRamp=l_({expression:o,evaluationKey:"rasterValue",image:this.colorRamp,clips:[{start:c,end:h}],resolution:256}),this.colorRampTexture=null,this._curRampRange=[c,h])}}let WT,KT,YT,ZT,XT;class JT extends oa{constructor(t,o,c,h){super(t,{layout:WT||(WT=new Vs({visibility:new Mn(Dt["layout_raster-particle"].visibility)})),paint:KT||(KT=new Vs({"raster-particle-array-band":new Mn(Dt["paint_raster-particle"]["raster-particle-array-band"]),"raster-particle-count":new Mn(Dt["paint_raster-particle"]["raster-particle-count"]),"raster-particle-color":new qd(Dt["paint_raster-particle"]["raster-particle-color"]),"raster-particle-max-speed":new Mn(Dt["paint_raster-particle"]["raster-particle-max-speed"]),"raster-particle-speed-factor":new Mn(Dt["paint_raster-particle"]["raster-particle-speed-factor"]),"raster-particle-fade-opacity-factor":new Mn(Dt["paint_raster-particle"]["raster-particle-fade-opacity-factor"]),"raster-particle-reset-rate-factor":new Mn(Dt["paint_raster-particle"]["raster-particle-reset-rate-factor"]),"raster-particle-elevation":new Mn(Dt["paint_raster-particle"]["raster-particle-elevation"]),"raster-particle-color-use-theme":new Yn({type:"string",default:"default","property-type":"data-driven"})}))},o,c,h),this._updateColorRamp(),this.lastInvalidatedAt=sl.now()}onRemove(t){this.colorRampTexture&&this.colorRampTexture.destroy(),this.tileFramebuffer&&this.tileFramebuffer.destroy(),this.particleFramebuffer&&this.particleFramebuffer.destroy()}hasColorMap(){return!!this._transitionablePaint._values["raster-particle-color"].value.value}getProgramIds(){return["rasterParticle"]}hasOffscreenPass(){return this.visibility!=="none"}isDraped(t){return!1}_handleSpecialPaintPropertyUpdate(t){t!=="raster-particle-color"&&t!=="raster-particle-max-speed"||(this._updateColorRamp(),this._invalidateAnimationState()),t==="raster-particle-count"&&this._invalidateAnimationState()}_updateColorRamp(){if(!this.hasColorMap())return;const t=this._transitionablePaint._values["raster-particle-color"].value.expression,o=this._transitionablePaint._values["raster-particle-max-speed"].value.expression.evaluate({zoom:0});this.colorRamp=l_({expression:t,evaluationKey:"rasterParticleSpeed",image:this.colorRamp,clips:[{start:0,end:o}],resolution:256}),this.colorRampTexture=null}_invalidateAnimationState(){this.lastInvalidatedAt=sl.now()}tileCoverLift(){return this.paint.get("raster-particle-elevation")}}class hB extends oa{constructor(t,o){super(t,{},o,null),this.implementation=t,t.slot&&(this.slot=t.slot)}is3D(t){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}isDraped(t){return this.implementation.renderToTile!==void 0}shouldRedrape(){return!!this.implementation.shouldRerenderTiles&&this.implementation.shouldRerenderTiles()}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}onAdd(t){this.implementation.onAdd&&this.implementation.onAdd(t,t.painter.context.gl)}onRemove(t){this.implementation.onRemove&&this.implementation.onRemove(t,t.painter.context.gl)}}function m3(a,t,o){const c=[0,0,1],h=pn([]);return Nn(h,h,o?-gi(a)+Math.PI:gi(a)),Vn(h,h,-gi(t)),Ht(c,c,h),Mt(c,c)}function QT(a,t){const o=q1(a.projection,a.zoom,a.width,a.height),c=function(_,y,C,R,L){const V=new ze(C.lng-180*rf,C.lat),$=new ze(C.lng+180*rf,C.lat),U=_.project(V.lng,V.lat),X=_.project($.lng,$.lat),ee=-Math.atan2(X.y-U.y,X.x-U.x),de=kt.fromLngLat(C);de.y=tt(de.y,-1+rf,1-rf);const be=de.toLngLat(),Ie=_.project(be.lng,be.lat),Fe=kt.fromLngLat(be);Fe.x+=rf;const Be=Fe.toLngLat(),pe=_.project(Be.lng,Be.lat),De=tI(pe.x-Ie.x,pe.y-Ie.y,ee),He=kt.fromLngLat(be);He.y+=rf;const Ze=He.toLngLat(),xt=_.project(Ze.lng,Ze.lat),ht=tI(xt.x-Ie.x,xt.y-Ie.y,ee),St=Math.abs(De.x)/Math.abs(ht.y),Rt=N([]);re(Rt,Rt,-ee*(1-(L?0:R)));const Yt=N([]);return W(Yt,Yt,[1,1-(1-St)*R,1]),Yt[4]=-ht.x/ht.y*R,re(Yt,Yt,ee),G(Yt,Rt,Yt),Yt}(a.projection,0,a.center,o,t),h=eI(a);return W(c,c,[h,h,1]),c}function eI(a){const t=a.projection,o=q1(a.projection,a.zoom,a.width,a.height),c=g3(t,a.center),h=g3(t,ze.convert(t.center));return Math.pow(2,c*o+(1-o)*h)}function q1(a,t,o,c,h=1/0){const _=a.range;if(!_)return 0;const y=Math.min(h,Math.max(o,c)),C=Math.log(y/1024)/Math.LN2;return Tt(_[0]+C,_[1]+C,t)}const rf=1/4e4;function g3(a,t){const o=tt(t.lat,-85.051129,nn),c=new ze(t.lng-180*rf,o),h=new ze(t.lng+180*rf,o),_=a.project(c.lng,o),y=a.project(h.lng,o),C=kt.fromLngLat(c),R=kt.fromLngLat(h),L=y.x-_.x,V=y.y-_.y,$=R.x-C.x,U=R.y-C.y,X=Math.sqrt(($*$+U*U)/(L*L+V*V));return Math.log(X)/Math.LN2}function tI(a,t,o){const c=Math.cos(o),h=Math.sin(o);return{x:a*c-t*h,y:a*h+t*c}}function nI(a,t,o){N(a),re(a,a,gi(t[2])),Y(a,a,gi(t[0])),J(a,a,gi(t[1])),W(a,a,o),G(a,a,[1,0,0,0,0,0,1,0,0,1,0,0,0,0,0,1])}function W1(a,t,o,c,h,_,y,C){const R=[o[0]-t[0],o[1]-t[1],0],L=[c[0]-t[0],c[1]-t[1],0];if(Ue(R)<1e-12||Ue(L)<1e-12)return pn(a);const V=gt([],R,L);Mt(V,V),ve(L,c,t),R[2]=(_-h)*C,L[2]=(y-h)*C;const $=R;return gt($,R,L),Mt($,$),wr(a,V,$)}function _3(a,t,o=!1){const c=Jh(t.zoom),h=function(_,y,C){const R=y.worldSize,L=[_[12],_[13],_[14]],V=zt(L[1]/R),$=pt(L[0]/R),U=N([]),X=ut(1,V)*R,ee=ut(1,0)*R*wn(V,y.zoom),de=1/Cw(R);let be=ee*de;if(C){const pe=q1(y.projection,y.zoom,y.width,y.height,1024);be=de*y.projection.pixelSpaceConversion(y.center.lat,R,pe)}const Ie=_e(V,$);Pe(Ie,Ie,Ve([],Mt([],Ie),X*be*L[2]));const Fe=function(pe){const De=[pe[0],pe[1],pe[2]];let He=[0,1,0];const Ze=gt([],He,De);return gt(He,De,Ze),at(He)===0&&(He=[0,1,0],gt(Ze,De,He)),Mt(Ze,Ze),Mt(He,He),Mt(De,De),[Ze[0],Ze[1],Ze[2],0,He[0],He[1],He[2],0,De[0],De[1],De[2],0,pe[0],pe[1],pe[2],1]}(Ie);W(U,U,[be,be,be*X]),ie(U,U,[-L[0],-L[1],-L[2]]);const Be=G([],y.globeMatrix,Fe);return G(Be,Be,U),G(Be,Be,_),Be}(a,t,o);if(c>0){const _=function(y,C){const R=C.worldSize,L=ut(1,0)*R*wn(C.center.lat,C.zoom)/Cw(R),V=ut(1,C.center.lat)*R,$=N([]);return J($,$,gi(C.center.lng)),Y($,$,gi(C.center.lat)),ie($,$,[0,0,T]),W($,$,[L,L,L*V]),ie($,$,[C.point.x-.5*R,C.point.y-.5*R,0]),G($,$,y),G($,C.globeMatrix,$)}(a,t);return function(y,C,R){const L=(ee,de,be)=>{const Ie=Ue(ee),Fe=Ue(de),Be=Zd(ee,de,be);return Ve(Be,Be,1/Ue(Be)*Dr(Ie,Fe,be))},V=L([y[0],y[1],y[2]],[C[0],C[1],C[2]],R),$=L([y[4],y[5],y[6]],[C[4],C[5],C[6]],R),U=L([y[8],y[9],y[10]],[C[8],C[9],C[10]],R),X=Zd([y[12],y[13],y[14]],[C[12],C[13],C[14]],R);return[V[0],V[1],V[2],0,$[0],$[1],$[2],0,U[0],U[1],U[2],0,X[0],X[1],X[2],1]}(h,_,c)}return h}function rI(a,t,o,c){const h=Fi.projectAabbCorners(c,o);let _=Number.MAX_VALUE,y=-1;for(let L=0;L<h.length;++L){const V=h[L];V[0]=(.5*V[0]+.5)*t.width,V[1]=(.5-.5*V[1])*t.height,V[2]<_&&(y=L,_=V[2])}const C=L=>new Rn(h[L][0],h[L][1]);let R;switch(y){case 0:case 6:R=[C(1),C(5),C(4),C(7),C(3),C(2),C(1)];break;case 1:case 7:R=[C(0),C(4),C(5),C(6),C(2),C(3),C(0)];break;case 3:case 5:R=[C(1),C(0),C(4),C(7),C(6),C(2),C(1)];break;default:R=[C(1),C(5),C(6),C(7),C(3),C(0),C(1)]}if(Pa(a,R))return _}const fB=zi([{name:"a_pos_3f",components:3,type:"Float32"}]),pB=zi([{name:"a_color_3f",components:3,type:"Float32"}]),mB=zi([{name:"a_color_4f",components:4,type:"Float32"}]),gB=zi([{name:"a_uv_2f",components:2,type:"Float32"}]),_B=zi([{name:"a_normal_3f",components:3,type:"Float32"}]),vB=zi([{name:"a_normal_matrix0",components:4,type:"Float32"},{name:"a_normal_matrix1",components:4,type:"Float32"},{name:"a_normal_matrix2",components:4,type:"Float32"},{name:"a_normal_matrix3",components:4,type:"Float32"}]),yB=zi([{name:"a_pbr",components:4,type:"Uint16"},{name:"a_heightBasedEmissiveStrength",components:3,type:"Float32"}]),iI={None:0,Model:1,Symbol:2,FillExtrusion:4};class K1{constructor(t,o,c,h){this.message=(t?`${t}: `:"")+c,h&&(this.identifier=h),o!=null&&o.__line__&&(this.line=o.__line__)}}function v3(a,t){const o=a.indexOf("://")===-1;try{return new URL(a,o&&t?"http://example.com":void 0),!0}catch{return!1}}class sI{constructor(t,o){this.feature=t,this.instancedDataOffset=o,this.instancedDataCount=0,this.rotation=[0,0,0],this.scale=[1,1,1],this.translation=[0,0,0]}}class oI{constructor(){this.instancedDataArray=new qh,this.instancesEvaluatedElevation=[],this.features=[],this.idToFeaturesIndex={}}}class y3{constructor(t){this.zoom=t.zoom,this.canonical=t.canonical,this.layers=t.layers,this.layerIds=this.layers.map(o=>o.fqid),this.projection=t.projection,this.index=t.index,this.worldview=t.worldview,this.hasZoomDependentProperties=this.layers[0].isZoomDependent(),this.stateDependentLayerIds=this.layers.filter(o=>o.isStateDependent()).map(o=>o.id),this.hasPattern=!1,this.instancesPerModel={},this.validForExaggeration=0,this.maxVerticalOffset=0,this.maxScale=0,this.maxHeight=0,this.lookupDim=this.zoom>this.canonical.z?256:this.zoom>15?75:100,this.instanceCount=0,this.terrainElevationMin=0,this.terrainElevationMax=0,this.validForDEMTile={id:null,timestamp:0},this.modelUris=[],this.modelsRequested=!1,this.activeReplacements=[],this.replacementUpdateTime=0,this.styleDefinedModelURLs=t.styleDefinedModelURLs}updateFootprints(t,o){}populate(t,o,c,h){this.tileToMeter=Kt(c);const _=this.layers[0]._featureFilter.needGeometry;this.lookup=new Uint8Array(this.lookupDim*this.lookupDim);for(const{feature:y,id:C,index:R,sourceLayerIndex:L}of t){const V=C??(y.properties&&y.properties.hasOwnProperty("id")?y.properties.id:void 0),$=Zn(y,_);if(!this.layers[0]._featureFilter.filter(new Qi(this.zoom,{worldview:this.worldview}),$,c))continue;const U={id:V,sourceLayerIndex:L,index:R,geometry:_?$.geometry:tr(y,c,h),properties:y.properties,type:y.type,patterns:{}},X=this.addFeature(U,U.geometry,$);X&&o.featureIndex.insert(y,U.geometry,R,L,this.index,this.instancesPerModel[X].instancedDataArray.length,Pn/32)}this.lookup=null}update(t,o,c,h){for(const _ in this.instancesPerModel){const y=this.instancesPerModel[_];for(const C in t)y.idToFeaturesIndex.hasOwnProperty(C)&&(this.evaluate(y.features[y.idToFeaturesIndex[C]],t[C],y,!0),this.uploaded=!1)}this.maxHeight=0}updateZoomBasedPaintProperties(){if(!this.hasZoomDependentProperties)return!1;let t=!1;for(const o in this.instancesPerModel){const c=this.instancesPerModel[o];for(const h of c.features){const _=this.layers[0],y=h.feature,C=this.canonical,R=_.paint.get("model-rotation").evaluate(y,{},C),L=_.paint.get("model-scale").evaluate(y,{},C),V=_.paint.get("model-translation").evaluate(y,{},C);le(h.rotation,R)&&le(h.scale,L)&&le(h.translation,V)||(this.evaluate(h,h.featureStates,c,!0),t=!0)}}return t}updateReplacement(t,o,c,h){if(o.updateTime===this.replacementUpdateTime)return!1;this.replacementUpdateTime=o.updateTime;const _=o.getReplacementRegionsForTile(t.toUnwrapped(),!0);if(zw(this.activeReplacements,_))return!1;this.activeReplacements=_;let y=!1;for(const C in this.instancesPerModel){const R=this.instancesPerModel[C],L=R.instancedDataArray;for(const V of R.features){const $=V.instancedDataOffset,U=V.instancedDataCount;for(let X=0;X<U;X++){const ee=16*(X+$);let de=L.float32[ee+0];const be=de>Pn;de=be?de-Pn:de;const Ie=Math.floor(de),Fe=L.float32[ee+1];let Be=!1;for(const pe of this.activeReplacements)if(!JC(pe,c,iI.Model,h)&&!(pe.min.x>Ie||Ie>pe.max.x||pe.min.y>Fe||Fe>pe.max.y)&&(Be=iE(rE(Ie,Fe,t.canonical,pe.footprintTileId.canonical),pe.footprint),Be))break;L.float32[ee]=Be?de+Pn:de,y=y||Be!==be}}}return y}isEmpty(){for(const t in this.instancesPerModel)if(this.instancesPerModel[t].instancedDataArray.length!==0)return!1;return!0}uploadPending(){return!this.uploaded}upload(t){if(!this.uploaded)for(const o in this.instancesPerModel){const c=this.instancesPerModel[o];c.instancedDataArray.length<0||c.instancedDataArray.length===0||(c.instancedDataBuffer?c.instancedDataBuffer.updateData(c.instancedDataArray):c.instancedDataBuffer=t.createVertexBuffer(c.instancedDataArray,vB.members,!0,void 0,this.instanceCount))}this.uploaded=!0}destroy(){for(const o in this.instancesPerModel){const c=this.instancesPerModel[o];c.instancedDataArray.length!==0&&c.instancedDataBuffer&&c.instancedDataBuffer.destroy()}const t=this.layers[0].modelManager;if(t&&this.modelUris&&this.modelsRequested)for(const o of this.modelUris)t.removeModel(o,"",!0)}addFeature(t,o,c){const h=this.layers[0],_=h.layout.get("model-id").evaluate(c,{},this.canonical);if(!_)return kn(`modelId is not evaluated for layer ${h.id} and it is not going to get rendered.`),_;(v3(_,!1)||this.styleDefinedModelURLs[_]!==void 0)&&(this.modelUris.includes(_)||this.modelUris.push(_)),this.instancesPerModel[_]||(this.instancesPerModel[_]=new oI);const y=this.instancesPerModel[_],C=y.instancedDataArray,R=new sI(c,C.length);for(const L of o)for(const V of L){if(V.x<0||V.x>=Pn||V.y<0||V.y>=Pn)continue;const $=(this.lookupDim-1)/Pn,U=this.lookupDim*(V.y*$|0)+V.x*$|0;if(this.lookup){if(this.lookup[U]!==0)continue;this.lookup[U]=1}this.instanceCount++;const X=C.length;C.resize(X+1),y.instancesEvaluatedElevation.push(0),C.float32[16*X]=V.x,C.float32[16*X+1]=V.y}return R.instancedDataCount=y.instancedDataArray.length-R.instancedDataOffset,R.instancedDataCount>0&&(t.id&&(y.idToFeaturesIndex[t.id]=y.features.length),y.features.push(R),this.evaluate(R,{},y,!1)),_}getModelUris(){return this.modelUris}evaluate(t,o,c,h){const _=this.layers[0],y=t.feature,C=this.canonical,R=t.rotation=_.paint.get("model-rotation").evaluate(y,o,C),L=t.scale=_.paint.get("model-scale").evaluate(y,o,C),V=t.translation=_.paint.get("model-translation").evaluate(y,o,C),$=_.paint.get("model-color").evaluate(y,o,C);$.a=_.paint.get("model-color-mix-intensity").evaluate(y,o,C);const U=[];this.maxVerticalOffset<V[2]&&(this.maxVerticalOffset=V[2]),this.maxScale=Math.max(Math.max(this.maxScale,L[0]),Math.max(L[1],L[2])),nI(U,R,L);const X=Math.round(100*$.a)+$.b/1.05;for(let ee=0;ee<t.instancedDataCount;++ee){const de=t.instancedDataOffset+ee,be=16*de,Ie=c.instancedDataArray.float32;let Fe=0;h&&(Fe=Ie[be+6]-c.instancesEvaluatedElevation[de]);const Be=0|Ie[be+1];Ie[be]=(0|Ie[be])+$.r/1.05,Ie[be+1]=Be+$.g/1.05,Ie[be+2]=X,Ie[be+3]=1/(C.z>10?this.tileToMeter:Kt(C,Be)),Ie[be+4]=V[0],Ie[be+5]=V[1],Ie[be+6]=V[2]+Fe,Ie[be+7]=U[0],Ie[be+8]=U[1],Ie[be+9]=U[2],Ie[be+10]=U[4],Ie[be+11]=U[5],Ie[be+12]=U[6],Ie[be+13]=U[8],Ie[be+14]=U[9],Ie[be+15]=U[10],c.instancesEvaluatedElevation[de]=V[2]}}}let aI,lI;Qn(y3,"ModelBucket",{omit:["layers"]}),Qn(oI,"PerModelAttributes"),Qn(sI,"ModelFeature");const vp=64,Jm={CoordinateSpaceTile:1,HasMapboxMeshFeatures:4,HasMeshoptCompression:8};function uI(a,t,o,c,h,_,y,C,R,L=!1){const V=o.zoom,$=o.project(c),U=wn(c.lat,V),X=1/U;N(a),ie(a,a,[$.x+y[0]*X,$.y+y[1]*X,y[2]]);let ee=1,de=1;const be=o.worldSize;if(L){if(o.projection.name==="mercator"){let pe=0;o.elevation&&(pe=o.elevation.getAtPointOrZero(new kt($.x/be,$.y/be),0));const De=bt([],[$.x,$.y,pe,1],o.projMatrix)[3]/o.cameraToCenterDistance;ee=De,de=De*wn(o.center.lat,V)}else if(o.projection.name==="globe"){const pe=_3(a,o),De=[0,0,0,1];bt(De,De,G([],o.projMatrix,pe));const He=De[3]/o.cameraToCenterDistance,Ze=Jh(V),xt=o.projection.pixelsPerMeter(c.lat,be)*wn(c.lat,V),ht=o.projection.pixelsPerMeter(o.center.lat,be)*wn(o.center.lat,V);ee=He/Dr(xt,sn(o.center.lat),Ze),de=He*U/xt,ee*=ht,de*=ht}}else ee=X;W(a,a,[ee,ee,de]);const Ie=[...a],Fe=t.orientation,Be=[];if(nI(Be,[Fe[0]+h[0],Fe[1]+h[1],Fe[2]+h[2]],_),G(a,Ie,Be),C&&o.elevation){let pe=0;const De=[];if(R&&o.elevation){pe=function(Ze,xt,ht,St,Rt){const Yt=xt.elevation;if(!Yt)return 0;const Tn=Fi.projectAabbCorners(ht,St),hn=ut(1,Rt.lat)*xt.worldSize,Cn=function(An,qr){const ar=[0,0,1],ur=[{corners:[0,1,3,2],dotProductWithUp:0},{corners:[1,5,2,6],dotProductWithUp:0},{corners:[0,4,1,5],dotProductWithUp:0},{corners:[2,6,3,7],dotProductWithUp:0},{corners:[4,7,5,6],dotProductWithUp:0},{corners:[0,3,4,7],dotProductWithUp:0}];for(const Br of ur){const Qr=An[Br.corners[0]],Jr=An[Br.corners[1]],di=An[Br.corners[2]],ni=[Jr[0]-Qr[0],Jr[1]-Qr[1],qr*(Jr[2]-Qr[2])],hi=gt(ni,ni,[di[0]-Qr[0],di[1]-Qr[1],qr*(di[2]-Qr[2])]);Mt(hi,hi),Br.dotProductWithUp=Ct(hi,ar)}return ur.sort((Br,Qr)=>Br.dotProductWithUp-Qr.dotProductWithUp),ur[0].corners}(Tn,hn),In=Tn[Cn[0]],Jt=Tn[Cn[1]],yn=Tn[Cn[2]],Wt=Tn[Cn[3]],Xt=Yt.getAtPointOrZero(new kt(In[0]/xt.worldSize,In[1]/xt.worldSize),0),Ln=Yt.getAtPointOrZero(new kt(Jt[0]/xt.worldSize,Jt[1]/xt.worldSize),0),Dn=Yt.getAtPointOrZero(new kt(yn[0]/xt.worldSize,yn[1]/xt.worldSize),0),Cr=Yt.getAtPointOrZero(new kt(Wt[0]/xt.worldSize,Wt[1]/xt.worldSize),0),lr=(Xt+Cr)/2,Hn=(Ln+Dn)/2;return lr>Hn?Ln<Dn?W1(Ze,Jt,Wt,In,Ln,Cr,Xt,hn):W1(Ze,yn,In,Wt,Dn,Xt,Cr,hn):Xt<Cr?W1(Ze,In,Jt,yn,Xt,Ln,Dn,hn):W1(Ze,Wt,yn,Jt,Cr,Dn,Ln,hn),Math.max(lr,Hn)}(De,o,t.aabb,a,c);const He=G([],ce([],De),Be);G(a,Ie,He)}else pe=o.elevation.getAtPointOrZero(new kt($.x/be,$.y/be),0);pe!==0&&(a[14]+=pe)}}function L_(a,t,o=!1){a.uploaded||(a.gfxTexture=new p3(t,a.image,o?t.gl.R8:t.gl.RGBA8,{useMipmap:a.sampler.minFilter>=t.gl.NEAREST_MIPMAP_NEAREST}),a.uploaded=!0,a.image=null)}function bB(a,t,o){a.indexBuffer=t.createIndexBuffer(a.indexArray,!1,!0),a.vertexBuffer=t.createVertexBuffer(a.vertexArray,fB.members,!1,!0),a.normalArray&&(a.normalBuffer=t.createVertexBuffer(a.normalArray,_B.members,!1,!0)),a.texcoordArray&&(a.texcoordBuffer=t.createVertexBuffer(a.texcoordArray,gB.members,!1,!0)),a.colorArray&&(a.colorBuffer=t.createVertexBuffer(a.colorArray,(a.colorArray.bytesPerElement===12?pB:mB).members,!1,!0)),a.featureArray&&(a.pbrBuffer=t.createVertexBuffer(a.featureArray,yB.members,!0)),a.segments=Us.simpleSegment(0,0,a.vertexArray.length,a.indexArray.length);const c=a.material;c.pbrMetallicRoughness.baseColorTexture&&L_(c.pbrMetallicRoughness.baseColorTexture,t),c.pbrMetallicRoughness.metallicRoughnessTexture&&L_(c.pbrMetallicRoughness.metallicRoughnessTexture,t),c.normalTexture&&L_(c.normalTexture,t),c.occlusionTexture&&L_(c.occlusionTexture,t,o),c.emissionTexture&&L_(c.emissionTexture,t)}function b3(a,t,o){if(a.meshes)for(const c of a.meshes)bB(c,t,o);if(a.children)for(const c of a.children)b3(c,t,o)}function Y1(a){if(a.meshes)for(const t of a.meshes)t.indexArray.destroy(),t.vertexArray.destroy(),t.colorArray&&t.colorArray.destroy(),t.normalArray&&t.normalArray.destroy(),t.texcoordArray&&t.texcoordArray.destroy(),t.featureArray&&t.featureArray.destroy();if(a.children)for(const t of a.children)Y1(t)}function x3(a){if(a.meshes)for(const o of a.meshes)o.vertexBuffer&&(o.vertexBuffer.destroy(),o.indexBuffer.destroy(),o.normalBuffer&&o.normalBuffer.destroy(),o.texcoordBuffer&&o.texcoordBuffer.destroy(),o.colorBuffer&&o.colorBuffer.destroy(),o.pbrBuffer&&o.pbrBuffer.destroy(),o.segments.destroy(),o.material&&((t=o.material).pbrMetallicRoughness.baseColorTexture&&t.pbrMetallicRoughness.baseColorTexture.gfxTexture&&t.pbrMetallicRoughness.baseColorTexture.gfxTexture.destroy(),t.pbrMetallicRoughness.metallicRoughnessTexture&&t.pbrMetallicRoughness.metallicRoughnessTexture.gfxTexture&&t.pbrMetallicRoughness.metallicRoughnessTexture.gfxTexture.destroy(),t.normalTexture&&t.normalTexture.gfxTexture&&t.normalTexture.gfxTexture.destroy(),t.emissionTexture&&t.emissionTexture.gfxTexture&&t.emissionTexture.gfxTexture.destroy(),t.occlusionTexture&&t.occlusionTexture.gfxTexture&&t.occlusionTexture.gfxTexture.destroy()));var t;if(a.children)for(const o of a.children)x3(o)}class Qm{constructor(t,o,c){this._demTile=t,this._dem=this._demTile.dem,this._scale=o,this._offset=c}static create(t,o,c){const h=c||t.findDEMTileFor(o);if(!h||!h.dem)return;const _=h.dem,y=h.tileID,C=1<<o.canonical.z-y.canonical.z;return new Qm(h,_.dim/Pn/C,[(o.canonical.x/C-y.canonical.x)*_.dim,(o.canonical.y/C-y.canonical.y)*_.dim])}tileCoordToPixel(t,o){const c=o*this._scale+this._offset[1],h=Math.floor(t*this._scale+this._offset[0]),_=Math.floor(c);return new Rn(h,_)}getElevationAt(t,o,c,h){const _=t*this._scale+this._offset[0],y=o*this._scale+this._offset[1],C=Math.floor(_),R=Math.floor(y),L=this._dem;return h=!!h,c?Dr(Dr(L.get(C,R,h),L.get(C,R+1,h),y-R),Dr(L.get(C+1,R,h),L.get(C+1,R+1,h),y-R),_-C):L.get(C,R,h)}getElevationAtPixel(t,o,c){return this._dem.get(t,o,!!c)}getMeterToDEM(t){return(1<<this._demTile.tileID.canonical.z)*ut(1,t)*this._dem.stride}}const w3=new Float32Array(262144),yp=new Uint8Array(262144);function cI(a){let t=0;if(a.meshes)for(const o of a.meshes)t=Math.max(t,o.aabb.max[2]);if(a.children)for(const o of a.children)t=Math.max(t,cI(o));return t}function dI(a,t,o){if(a.meshes)for(const c of a.meshes){if(c.aabb.min[0]===1/0)continue;const h=Fi.applyTransform(c.aabb,a.matrix);o.insert(t,h.min[0],h.min[1],h.max[0],h.max[1])}if(a.children)for(const c of a.children)dI(c,t,o)}const hI=["","wall","door","roof","window","lamp","logo"];class fI{constructor(t){this.node=t,this.evaluatedRMEA=[[1,0,0,1],[1,0,0,1],[1,0,0,1],[1,0,0,1],[.4,1,0,1],[1,0,0,1],[1,0,0,1]],this.hiddenByReplacement=!1,this.evaluatedTranslation=[0,0,0],this.evaluatedScale=[1,1,1],this.evaluatedColor=[],this.emissionHeightBasedParams=[],this.cameraCollisionOpacity=1,this.feature={type:"Point",id:t.id,geometry:[],properties:{height:cI(t)}},this.aabb=this._getLocalBounds(),this.state=null}_getLocalBounds(){if(!this.node.meshes)return new Fi([1/0,1/0,1/0],[-1/0,-1/0,-1/0]);if(!this.aabb){let t=0;const o=new Fi([1/0,1/0,1/0],[-1/0,-1/0,-1/0]);for(const c of this.node.meshes)this.node.lightMeshIndex!==t&&(c.transformedAabb=Fi.applyTransformFast(c.aabb,this.node.matrix),o.encapsulate(c.transformedAabb)),t++;this.aabb=o}return this.aabb}}class Z1{constructor(t,o,c,h,_,y,C,R){this.id=c,this.layers=t,this.layerIds=this.layers.map(L=>L.fqid),this.stateDependentLayerIds=this.layers.filter(L=>L.isStateDependent()).map(L=>L.id),this.modelTraits|=Jm.CoordinateSpaceTile,this.uploaded=!1,this.hasPattern=!1,h&&(this.modelTraits|=Jm.HasMapboxMeshFeatures),_&&(this.modelTraits|=Jm.HasMeshoptCompression),this.zoom=-1,this.terrainExaggeration=1,this.projection={name:"mercator"},this.replacementUpdateTime=0,this.elevationReadFromZ=255,this.brightness=y,this.worldview=R,this.dirty=!0,this.needsUpload=!1,this.filter=null,this.nodesInfo=[];for(const L of o)this.nodesInfo.push(new fI(L)),dI(L,C.featureIndexArray.length,C.grid),C.featureIndexArray.emplaceBack(this.nodesInfo.length-1,0,C.bucketLayerIDs.length-1,0);this.states={}}updateFootprints(t,o){for(const c of this.getNodesInfo()){const h=c.node;h.footprint&&o.push({footprint:h.footprint,id:t})}}update(t){const o=Object.keys(t).length!==0;if(o&&!this.stateDependentLayers.length)return;const c=o?this.stateDependentLayers:this.layers;if(!Ri(t,this.states))for(const h of c)this.evaluate(h,t);this.states=structuredClone(t)}populate(){console.log("populate 3D model bucket")}uploadPending(){return!this.uploaded||this.needsUpload}upload(t){if(!this.needsUpload)return;const o=this.getNodesInfo();for(const c of o){const h=c.node;this.uploaded?this.updatePbrBuffer(h):b3(h,t,!0)}for(const c of o)Y1(c.node);this.uploaded=!0,this.needsUpload=!1}updatePbrBuffer(t){let o=!1;if(!t.meshes)return o;for(const c of t.meshes)c.pbrBuffer&&(c.pbrBuffer.updateData(c.featureArray),o=!0);return o}needsReEvaluation(t,o,c){const h=t.transform.projectionOptions,_=t.style.getBrightness(),y=this.brightness!==_;if(!this.uploaded||this.dirty||h.name!==this.projection.name||O_(c.paint.get("model-color").value,y)||O_(c.paint.get("model-color-mix-intensity").value,y)||O_(c.paint.get("model-roughness").value,y)||O_(c.paint.get("model-emissive-strength").value,y)||O_(c.paint.get("model-height-based-emissive-strength-multiplier").value,y)){this.projection=h,this.brightness=_;const C=this.getNodesInfo();for(const R of C)R.state=null;return!0}return!1}evaluateTransform(t,o){if(t.transform.zoom===this.zoom)return;this.zoom=t.transform.zoom;const c=this.getNodesInfo(),h=this.id.canonical;for(const _ of c){const y=_.feature;_.evaluatedTranslation=o.paint.get("model-translation").evaluate(y,{},h),_.evaluatedScale=o.paint.get("model-scale").evaluate(y,{},h)}}evaluate(t,o){const c=this.getNodesInfo();for(const h of c){if(!h.node.meshes)continue;const _=h.feature,y=o&&o[_.id];if(Ri(y,h.state))continue;h.state=structuredClone(y);const C=h.node.meshes&&h.node.meshes[0].featureData,R=h.evaluatedColor[2],L=h.evaluatedRMEA[2],V=this.id.canonical;if(h.hasTranslucentParts=!1,C){for(let $=0;$<hI.length;$++){const U=hI[$];U.length&&(_.properties.part=U);const X=t.paint.get("model-color").evaluate(_,y,V).toPremultipliedRenderColor(null),ee=t.paint.get("model-color-mix-intensity").evaluate(_,y,V);h.evaluatedColor[$]=[X.r,X.g,X.b,ee],h.evaluatedRMEA[$][0]=t.paint.get("model-roughness").evaluate(_,y,V),h.evaluatedRMEA[$][2]=t.paint.get("model-emissive-strength").evaluate(_,y,V),h.evaluatedRMEA[$][3]=X.a,h.emissionHeightBasedParams[$]=t.paint.get("model-height-based-emissive-strength-multiplier").evaluate(_,y,V),!h.hasTranslucentParts&&X.a<1&&(h.hasTranslucentParts=!0)}delete _.properties.part,wB(h,R!==h.evaluatedColor[2]||L!==h.evaluatedRMEA[2],this.modelTraits)}else h.evaluatedRMEA[0][2]=t.paint.get("model-emissive-strength").evaluate(_,y,V);h.evaluatedTranslation=t.paint.get("model-translation").evaluate(_,y,V),h.evaluatedScale=t.paint.get("model-scale").evaluate(_,y,V),this.updatePbrBuffer(h.node)||(this.needsUpload=!0)}this.dirty=!1}elevationUpdate(t,o,c,h){const _=t.findDEMTileFor(c);if(_&&(_.tileID.canonical!==this.terrainTile||o!==this.terrainExaggeration)){if(_.dem&&_.tileID.overscaledZ!==this.elevationReadFromZ){this.elevationReadFromZ=_.tileID.overscaledZ;const y=Qm.create(t,c,_);if(!y)return;this.modelTraits&Jm.HasMapboxMeshFeatures&&this.updateDEM(t,y,c,h);for(const C of this.getNodesInfo()){const R=C.node;if(!R.footprint||!R.footprint.vertices||!R.footprint.vertices.length)continue;const L=R.footprint.vertices;let V=y.getElevationAt(L[0].x,L[0].y,!0,!0);for(let $=1;$<L.length;$++)V=Math.min(V,y.getElevationAt(L[$].x,L[$].y,!0,!0));R.elevation=V}}this.terrainTile=_.tileID.canonical,this.terrainExaggeration=o}}updateDEM(t,o,c,h){let _=o._dem._modifiedForSources[h];if(_===void 0&&(o._dem._modifiedForSources[h]=[],_=o._dem._modifiedForSources[h]),_.includes(c.canonical))return;const y=o._dem.dim;_.push(c.canonical);let C=!1;for(const R of this.getNodesInfo()){const L=R.node;if(!L.footprint||!L.footprint.grid)continue;const V=L.footprint.grid,$=o.tileCoordToPixel(V.min.x,V.min.y),U=o.tileCoordToPixel(V.max.x,V.max.y),X=Math.min(Math.min(y-U.y,$.x),Math.min($.y,y-U.x));if(X<0)continue;const ee=tt(X,2,5);let de=Math.max(0,$.x-ee),be=Math.max(0,$.y-ee),Ie=Math.min(U.x+ee,y-1),Fe=Math.min(U.y+ee,y-1);for(let He=be;He<=Fe;++He)for(let Ze=de;Ze<=Ie;++Ze)yp[He*y+Ze]=255;let Be=0,pe=0;for(let He=0;He<V.cellsY;++He)for(let Ze=0;Ze<V.cellsX;++Ze){if(!V.cells[He*V.cellsX+Ze])continue;const xt=o.tileCoordToPixel(V.min.x+Ze/V.xScale,V.min.y+He/V.yScale),ht=o.tileCoordToPixel(V.min.x+(Ze+1)/V.xScale,V.min.y+(He+1)/V.yScale);for(let St=xt.y;St<=Math.min(ht.y+1,y-1);++St)for(let Rt=xt.x;Rt<=Math.min(ht.x+1,y-1);++Rt)yp[St*y+Rt]===255&&(yp[St*y+Rt]=0,Be+=o.getElevationAtPixel(Rt,St),pe++)}const De=Be/pe;de=Math.max(1,$.x-ee),be=Math.max(1,$.y-ee),Ie=Math.min(U.x+ee,y-2),Fe=Math.min(U.y+ee,y-2),C=!0;for(let He=be;He<=Fe;++He)for(let Ze=de;Ze<=Ie;++Ze)yp[He*y+Ze]===0&&(w3[He*y+Ze]=o._dem.set(Ze,He,De));for(let He=1;He<ee;++He){de=Math.max(1,$.x-He),be=Math.max(1,$.y-He),Ie=Math.min(U.x+He,y-2),Fe=Math.min(U.y+He,y-2);for(let Ze=be;Ze<=Fe;++Ze)for(let xt=de;xt<=Ie;++xt){const ht=Ze*y+xt;if(yp[ht]===255){let St=0,Rt=0,Yt=-1,Tn=-1;for(let hn=-1;hn<=1;++hn)for(let Cn=-1;Cn<=1;++Cn){const In=(Ze+hn)*y+xt+Cn;if(yp[In]>=He)continue;const Jt=w3[In],yn=Math.abs(Jt);yn>Rt&&(St=Jt,Rt=yn,Yt=Cn,Tn=hn)}if(Rt>.1){const hn=1-(He+.5*Math.abs(Yt*Tn))/ee;let Cn=o._dem.get(xt,Ze)+St*hn;const In=o._dem.get(xt+Yt,Ze+Tn),Jt=o._dem.get(xt-Yt,Ze-Tn,!0);(Cn-In)*(Cn-Jt)>0&&(Cn=(In+Jt)/2),w3[ht]=o._dem.set(xt,Ze,Cn),yp[ht]=He}}}}}C&&(o._demTile.needsDEMTextureUpload=!0,o._dem._timestamp=sl.now())}setFilter(t){this.filter=t?V0(t):null}getNodesInfo(){return this.filter?this.nodesInfo.filter(t=>this.filter.filter(new Qi(this.id.overscaledZ,{worldview:this.worldview}),t.feature,this.id.canonical)):this.nodesInfo}destroy(){const t=this.getNodesInfo();for(const o of t)Y1(o.node),x3(o.node)}isEmpty(){return!this.nodesInfo.length}updateReplacement(t,o){if(o.updateTime===this.replacementUpdateTime)return;this.replacementUpdateTime=o.updateTime;const c=o.getReplacementRegionsForTile(t.toUnwrapped());for(const h of this.getNodesInfo()){const _=h.node.footprint;h.hiddenByReplacement=!!_&&!c.find(y=>y.footprint===_)}}getHeightAtTileCoord(t,o){const c=[],h=[0,0,0],_=N([]);for(const y of this.getNodesInfo()){const C=y.node.meshes[0],R=C.transformedAabb;if(t<R.min[0]||o<R.min[1]||t>R.max[0]||o>R.max[1])continue;if(y.node.hidden===!0)return{height:1/0,maxHeight:y.feature.properties.height,hidden:!1,verticalScale:y.evaluatedScale[2]};q(_,y.node.matrix),h[0]=t,h[1]=o,Lt(h,h,_);const L=(h[0]-C.aabb.min[0])/(C.aabb.max[0]-C.aabb.min[0])*vp|0,V=Math.min(63,(h[1]-C.aabb.min[1])/(C.aabb.max[1]-C.aabb.min[1])*vp|0)*vp+Math.min(63,L),$=C.heightmap[V];if(!($<0&&y.node.footprint))return y.hiddenByReplacement?void 0:{height:$,maxHeight:y.feature.properties.height,hidden:!1,verticalScale:y.evaluatedScale[2]};if(y.node.footprint.grid.query(new Rn(t,o),new Rn(t,o),c),c.length>0)return{height:void 0,maxHeight:y.feature.properties.height,hidden:y.hiddenByReplacement,verticalScale:y.evaluatedScale[2]}}}}function O_(a,t){return a instanceof Gf&&!a.isLightConstant&&t}function xB(a,t,o,c,h,_,y,C){let R=(61440&t|(61440&t)>>4)>>8,L=(3840&t|(3840&t)>>4)>>4,V=240&t|(240&t)>>4;o[3]>0&&(R=Dr(R,255*o[0],o[3]),L=Dr(L,255*o[1],o[3]),V=Dr(V,255*o[2],o[3]));const $=R<<8|L,U=V<<8|Math.floor(255*c[3]),X=function(He){const Ze=tt(He,0,2);return Math.min(Math.round(.5*Ze*255),255)}(c[2])<<8|15*c[0]<<4|15*c[1],ee=tt(h[0],0,1),de=tt(h[1],0,1),be=tt(h[2],0,1),Ie=tt(h[3],0,1);let Fe,Be,pe,De;if(ee!==de&&y!==_&&de!==ee){const He=y-_;Be=1/(He*(de-ee)),pe=-(_+He*ee)/(He*(de-ee));const Ze=tt(h[4],-1,1);De=Math.pow(10,Ze),Fe=255*be<<8|255*Ie}else Fe=65535,Be=0,pe=1,De=1;if(a.emplaceBack($,U,X,Fe,Be,pe,De),C){const He=C.length;C.clear();for(let Ze=0;Ze<He;Ze++)C.emplaceBack($,U,X,Fe,Be,pe,De)}}function wB(a,t,o){const c=a.node;let h=0;const _=o&Jm.HasMeshoptCompression;for(const y of c.meshes){if(c.lights&&c.lightMeshIndex===h||!y.featureData)continue;y.featureArray=new rp,y.featureArray.reserve(y.featureData.length);let C=t;for(const R of y.featureData){const L=_?65535&R:R>>16&65535,V=_?R>>16&65535:65535&R,$=(15&V)<8?15&V:0,U=a.evaluatedRMEA[$],X=a.evaluatedColor[$],ee=a.emissionHeightBasedParams[$];let de;if(C&&$===2&&c.lights&&(de=new rp,de.resize(10*c.lights.length)),xB(y.featureArray,L,X,U,ee,y.aabb.min[2],y.aabb.max[2],de),de&&C){C=!1;const be=c.meshes[c.lightMeshIndex];be.featureArray=de,be.featureArray._trim()}}y.featureArray._trim(),h++}}function pI(a,t,o,c){const h=1<<a.z;t.lat=zt((c/Pn+a.y)/h),t.lng=pt((o/Pn+a.x)/h)}function SB(a,t,o,c){const h=a.getNodesInfo()[t];if(!h||h.hiddenByReplacement||!h.node.meshes)return;let _=Number.MAX_VALUE;const y=h.node,C=o.tile,R=c.calculatePosMatrix(C.tileID.toUnwrapped(),c.worldSize),L=h.evaluatedScale;let V=0;c.elevation&&y.elevation&&(V=y.elevation*c.elevation.exaggeration()),ie(R,R,[(y.anchor?y.anchor[0]:0)*(L[0]-1),(y.anchor?y.anchor[1]:0)*(L[1]-1),V]),W(R,R,L);const $=o.queryGeometry,U=$.isPointQuery()?$.screenBounds:$.screenGeometry,X=function(de){const be=G([],R,de.matrix);G(be,c.expandedFarZProjMatrix,be);for(let Ie=0;Ie<de.meshes.length;++Ie){const Fe=de.meshes[Ie];if(Ie===de.lightMeshIndex)continue;const Be=rI(U,c,be,Fe.aabb);Be!=null&&(_=Math.min(Be,_))}if(de.children)for(const Ie of de.children)X(Ie)};if(X(y),_===Number.MAX_VALUE)return;const ee=new ze(0,0);return pI(C.tileID.canonical,ee,h.node.anchor[0],h.node.anchor[1]),{intersectionZ:_,position:ee,feature:h.feature}}Qn(Z1,"Tiled3dModelBucket",{omit:["layers"]}),Qn(fI,"Tiled3dModelFeature");const CB={circle:class extends oa{constructor(a,t,o,c){super(a,{layout:hC||(hC=new Vs({"circle-sort-key":new Yn(Dt.layout_circle["circle-sort-key"]),"circle-elevation-reference":new Mn(Dt.layout_circle["circle-elevation-reference"]),visibility:new Mn(Dt.layout_circle.visibility)})),paint:fC||(fC=new Vs({"circle-radius":new Yn(Dt.paint_circle["circle-radius"]),"circle-color":new Yn(Dt.paint_circle["circle-color"]),"circle-blur":new Yn(Dt.paint_circle["circle-blur"]),"circle-opacity":new Yn(Dt.paint_circle["circle-opacity"]),"circle-translate":new Mn(Dt.paint_circle["circle-translate"]),"circle-translate-anchor":new Mn(Dt.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Mn(Dt.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Mn(Dt.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Yn(Dt.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Yn(Dt.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Yn(Dt.paint_circle["circle-stroke-opacity"]),"circle-emissive-strength":new Mn(Dt.paint_circle["circle-emissive-strength"]),"circle-color-use-theme":new Yn({type:"string",default:"default","property-type":"data-driven"}),"circle-stroke-color-use-theme":new Yn({type:"string",default:"default","property-type":"data-driven"})}))},t,o,c)}createBucket(a){return new Al(a)}queryRadius(a){const t=a;return $m("circle-radius",this,t)+$m("circle-stroke-width",this,t)+l1(this.paint.get("circle-translate"))}queryIntersectsFeature(a,t,o,c,h,_,y,C){const R=dC(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),_.angle,a.pixelToTileUnitsFactor),L=this.paint.get("circle-radius").evaluate(t,o)+this.paint.get("circle-stroke-width").evaluate(t,o);return TC(a,c,_,y,C,this.paint.get("circle-pitch-alignment")==="map",this.paint.get("circle-pitch-scale")==="map",R,L)}getProgramIds(){return["circle"]}getDefaultProgramParams(a,t,o){const c=EC(this);return{config:new Yh(this,{zoom:t,lut:o}),defines:c,overrideFog:!1}}is3D(a){return!a&&!!this.layout&&this.layout.get("circle-elevation-reference")!=="none"}hasElevation(){return this.layout&&this.layout.get("circle-elevation-reference")!=="none"}},heatmap:class extends oa{createBucket(a){return new kC(a)}constructor(a,t,o,c){super(a,{layout:MC||(MC=new Vs({visibility:new Mn(Dt.layout_heatmap.visibility)})),paint:AC||(AC=new Vs({"heatmap-radius":new Yn(Dt.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Yn(Dt.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Mn(Dt.paint_heatmap["heatmap-intensity"]),"heatmap-color":new qd(Dt.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Mn(Dt.paint_heatmap["heatmap-opacity"]),"heatmap-color-use-theme":new Yn({type:"string",default:"default","property-type":"data-driven"})}))},t,o,c),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(a){a==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=l_({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(a){return $m("heatmap-radius",this,a)}queryIntersectsFeature(a,t,o,c,h,_,y,C){const R=this.paint.get("heatmap-radius").evaluate(t,o);return TC(a,c,_,y,C,!0,!0,new Rn(0,0),R)}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}getProgramIds(){return["heatmap","heatmapTexture"]}getDefaultProgramParams(a,t,o){return a==="heatmap"?{config:new Yh(this,{zoom:t,lut:o}),overrideFog:!1}:{}}},hillshade:class extends oa{constructor(a,t,o,c){super(a,{layout:RC||(RC=new Vs({visibility:new Mn(Dt.layout_hillshade.visibility)})),paint:PC||(PC=new Vs({"hillshade-illumination-direction":new Mn(Dt.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Mn(Dt.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Mn(Dt.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Mn(Dt.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Mn(Dt.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Mn(Dt.paint_hillshade["hillshade-accent-color"]),"hillshade-emissive-strength":new Mn(Dt.paint_hillshade["hillshade-emissive-strength"]),"hillshade-shadow-color-use-theme":new Yn({type:"string",default:"default","property-type":"data-driven"}),"hillshade-highlight-color-use-theme":new Yn({type:"string",default:"default","property-type":"data-driven"}),"hillshade-accent-color-use-theme":new Yn({type:"string",default:"default","property-type":"data-driven"})}))},t,o,c)}shouldRedrape(){return this.hasOffscreenPass()&&this.paint.get("hillshade-illumination-anchor")==="viewport"}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}getProgramIds(){return["hillshade","hillshadePrepare"]}getDefaultProgramParams(a,t,o){return{overrideFog:!1}}},fill:class extends oa{constructor(a,t,o,c){super(a,{layout:WC||(WC=new Vs({"fill-sort-key":new Yn(Dt.layout_fill["fill-sort-key"]),visibility:new Mn(Dt.layout_fill.visibility),"fill-elevation-reference":new Mn(Dt.layout_fill["fill-elevation-reference"]),"fill-construct-bridge-guard-rail":new Yn(Dt.layout_fill["fill-construct-bridge-guard-rail"])})),paint:KC||(KC=new Vs({"fill-antialias":new Mn(Dt.paint_fill["fill-antialias"]),"fill-opacity":new Yn(Dt.paint_fill["fill-opacity"]),"fill-color":new Yn(Dt.paint_fill["fill-color"]),"fill-outline-color":new Yn(Dt.paint_fill["fill-outline-color"]),"fill-translate":new Mn(Dt.paint_fill["fill-translate"]),"fill-translate-anchor":new Mn(Dt.paint_fill["fill-translate-anchor"]),"fill-pattern":new Yn(Dt.paint_fill["fill-pattern"]),"fill-pattern-cross-fade":new Mn(Dt.paint_fill["fill-pattern-cross-fade"]),"fill-emissive-strength":new Mn(Dt.paint_fill["fill-emissive-strength"]),"fill-z-offset":new Yn(Dt.paint_fill["fill-z-offset"]),"fill-bridge-guard-rail-color":new Yn(Dt.paint_fill["fill-bridge-guard-rail-color"]),"fill-tunnel-structure-color":new Yn(Dt.paint_fill["fill-tunnel-structure-color"]),"fill-color-use-theme":new Yn({type:"string",default:"default","property-type":"data-driven"}),"fill-outline-color-use-theme":new Yn({type:"string",default:"default","property-type":"data-driven"}),"fill-bridge-guard-rail-color-use-theme":new Yn({type:"string",default:"default","property-type":"data-driven"}),"fill-tunnel-structure-color-use-theme":new Yn({type:"string",default:"default","property-type":"data-driven"})}))},t,o,c)}getProgramIds(){const a=this.paint.get("fill-pattern"),t=a&&a.constantOr(1),o=[t?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&o.push(t&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),o}getDefaultProgramParams(a,t,o){return{config:new Yh(this,{zoom:t,lut:o}),overrideFog:!1}}recalculate(a,t){super.recalculate(a,t);const o=this.paint._values["fill-outline-color"];o.value.kind==="constant"&&o.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(a){return new Lw(a)}queryRadius(){return l1(this.paint.get("fill-translate"))}queryIntersectsFeature(a,t,o,c,h,_){return!a.queryGeometry.isAboveHorizon&&eu(cC(a.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),_.angle,a.pixelToTileUnitsFactor),c)}isTileClipped(){return this.paint.get("fill-z-offset").constantOr(1)===0}is3D(a){if(this.paint.get("fill-z-offset").constantOr(1)!==0)return!0;const t=this.layout&&this.layout.get("fill-elevation-reference")!=="none";return a!=null?t&&!a:t}hasElevation(){return this.layout&&this.layout.get("fill-elevation-reference")!=="none"}hasShadowPass(){return this.layout&&this.layout.get("fill-elevation-reference")!=="none"}},"fill-extrusion":class extends oa{constructor(a,t,o,c){super(a,{layout:yE||(yE=new Vs({visibility:new Mn(Dt["layout_fill-extrusion"].visibility),"fill-extrusion-edge-radius":new Mn(Dt["layout_fill-extrusion"]["fill-extrusion-edge-radius"])})),paint:bE||(bE=new Vs({"fill-extrusion-opacity":new Mn(Dt["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Yn(Dt["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Mn(Dt["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Mn(Dt["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Yn(Dt["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-pattern-cross-fade":new Mn(Dt["paint_fill-extrusion"]["fill-extrusion-pattern-cross-fade"]),"fill-extrusion-height":new Yn(Dt["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Yn(Dt["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-height-alignment":new Mn(Dt["paint_fill-extrusion"]["fill-extrusion-height-alignment"]),"fill-extrusion-base-alignment":new Mn(Dt["paint_fill-extrusion"]["fill-extrusion-base-alignment"]),"fill-extrusion-vertical-gradient":new Mn(Dt["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"]),"fill-extrusion-ambient-occlusion-intensity":new Mn(Dt["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-intensity"]),"fill-extrusion-ambient-occlusion-radius":new Mn(Dt["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-radius"]),"fill-extrusion-ambient-occlusion-wall-radius":new Mn(Dt["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-wall-radius"]),"fill-extrusion-ambient-occlusion-ground-radius":new Mn(Dt["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-ground-radius"]),"fill-extrusion-ambient-occlusion-ground-attenuation":new Mn(Dt["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-ground-attenuation"]),"fill-extrusion-flood-light-color":new Mn(Dt["paint_fill-extrusion"]["fill-extrusion-flood-light-color"]),"fill-extrusion-flood-light-intensity":new Mn(Dt["paint_fill-extrusion"]["fill-extrusion-flood-light-intensity"]),"fill-extrusion-flood-light-wall-radius":new Yn(Dt["paint_fill-extrusion"]["fill-extrusion-flood-light-wall-radius"]),"fill-extrusion-flood-light-ground-radius":new Yn(Dt["paint_fill-extrusion"]["fill-extrusion-flood-light-ground-radius"]),"fill-extrusion-flood-light-ground-attenuation":new Mn(Dt["paint_fill-extrusion"]["fill-extrusion-flood-light-ground-attenuation"]),"fill-extrusion-vertical-scale":new Mn(Dt["paint_fill-extrusion"]["fill-extrusion-vertical-scale"]),"fill-extrusion-rounded-roof":new Mn(Dt["paint_fill-extrusion"]["fill-extrusion-rounded-roof"]),"fill-extrusion-cutoff-fade-range":new Mn(Dt["paint_fill-extrusion"]["fill-extrusion-cutoff-fade-range"]),"fill-extrusion-emissive-strength":new Yn(Dt["paint_fill-extrusion"]["fill-extrusion-emissive-strength"]),"fill-extrusion-line-width":new Yn(Dt["paint_fill-extrusion"]["fill-extrusion-line-width"]),"fill-extrusion-cast-shadows":new Mn(Dt["paint_fill-extrusion"]["fill-extrusion-cast-shadows"]),"fill-extrusion-color-use-theme":new Yn({type:"string",default:"default","property-type":"data-driven"}),"fill-extrusion-flood-light-color-use-theme":new Yn({type:"string",default:"default","property-type":"data-driven"})}))},t,o,c),this._stats={numRenderedVerticesInShadowPass:0,numRenderedVerticesInTransparentPass:0}}createBucket(a){return new x1(a)}queryRadius(){return l1(this.paint.get("fill-extrusion-translate"))}is3D(a){return!0}hasShadowPass(){return this.paint.get("fill-extrusion-cast-shadows")}cutoffRange(){return this.paint.get("fill-extrusion-cutoff-fade-range")}canCastShadows(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}queryIntersectsFeature(a,t,o,c,h,_,y,C,R){const L=dC(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),_.angle,a.pixelToTileUnitsFactor),V=this.paint.get("fill-extrusion-height").evaluate(t,o),$=this.paint.get("fill-extrusion-base").evaluate(t,o),U=[0,0],X=C&&_.elevation,ee=_.elevation?_.elevation.exaggeration():1,de=a.tile.getBucket(this);if(X&&de instanceof x1){const pe=de.centroidVertexArray,De=R+1;De<pe.length&&(U[0]=pe.geta_centroid_pos0(De),U[1]=pe.geta_centroid_pos1(De))}if(U[0]===0&&U[1]===1)return!1;_.projection.name==="globe"&&(c=vE([c],[new Rn(0,0),new Rn(Pn,Pn)],a.tileID.canonical).map(pe=>pe.polygon).flat());const be=X?C:null,[Ie,Fe]=function(pe,De,He,Ze,xt,ht,St,Rt,Yt,Tn,hn){return pe.projection.name==="globe"?function(Cn,In,Jt,yn,Wt,Xt,Ln,Dn,Cr,lr,Hn){const An=[],qr=[],ar=Cn.projection.upVectorScale(Hn,Cn.center.lat,Cn.worldSize).metersToTile,ur=[0,0,0,1],Br=[0,0,0,1],Qr=(di,ni,hi,Gi)=>{di[0]=ni,di[1]=hi,di[2]=Gi,di[3]=1},Jr=_E();Jt>0&&(Jt+=Jr),yn+=Jr;for(const di of In){const ni=[],hi=[];for(const Gi of di){const gs=Gi.x+Wt.x,Ge=Gi.y+Wt.y,Xe=Cn.projection.projectTilePoint(gs,Ge,Hn),en=Cn.projection.upVector(Hn,Gi.x,Gi.y);let Fn=Jt,jn=yn;if(Ln){const $n=TE(gs,Ge,Jt,yn,Ln,Dn,Cr,lr);Fn+=$n.base,jn+=$n.top}Jt!==0?Qr(ur,Xe.x+en[0]*ar*Fn,Xe.y+en[1]*ar*Fn,Xe.z+en[2]*ar*Fn):Qr(ur,Xe.x,Xe.y,Xe.z),Qr(Br,Xe.x+en[0]*ar*jn,Xe.y+en[1]*ar*jn,Xe.z+en[2]*ar*jn),Lt(ur,ur,Xt),Lt(Br,Br,Xt),ni.push(new pp(ur[0],ur[1],ur[2])),hi.push(new pp(Br[0],Br[1],Br[2]))}An.push(ni),qr.push(hi)}return[An,qr]}(pe,De,He,Ze,xt,ht,St,Rt,Yt,Tn,hn):St?function(Cn,In,Jt,yn,Wt,Xt,Ln,Dn,Cr){const lr=[],Hn=[],An=[0,0,0,1];for(const qr of Cn){const ar=[],ur=[];for(const Br of qr){const Qr=Br.x+yn.x,Jr=Br.y+yn.y,di=TE(Qr,Jr,In,Jt,Xt,Ln,Dn,Cr);An[0]=Qr,An[1]=Jr,An[2]=di.base,An[3]=1,bt(An,An,Wt),An[3]=Math.max(An[3],1e-5);const ni=new pp(An[0]/An[3],An[1]/An[3],An[2]/An[3]);An[0]=Qr,An[1]=Jr,An[2]=di.top,An[3]=1,bt(An,An,Wt),An[3]=Math.max(An[3],1e-5);const hi=new pp(An[0]/An[3],An[1]/An[3],An[2]/An[3]);ar.push(ni),ur.push(hi)}lr.push(ar),Hn.push(ur)}return[lr,Hn]}(De,He,Ze,xt,ht,St,Rt,Yt,Tn):function(Cn,In,Jt,yn,Wt){const Xt=[],Ln=[],Dn=Wt[8]*In,Cr=Wt[9]*In,lr=Wt[10]*In,Hn=Wt[11]*In,An=Wt[8]*Jt,qr=Wt[9]*Jt,ar=Wt[10]*Jt,ur=Wt[11]*Jt;for(const Br of Cn){const Qr=[],Jr=[];for(const di of Br){const ni=di.x+yn.x,hi=di.y+yn.y,Gi=Wt[0]*ni+Wt[4]*hi+Wt[12],gs=Wt[1]*ni+Wt[5]*hi+Wt[13],Ge=Wt[2]*ni+Wt[6]*hi+Wt[14],Xe=Wt[3]*ni+Wt[7]*hi+Wt[15],en=Gi+Dn,Fn=gs+Cr,jn=Ge+lr,$n=Math.max(Xe+Hn,1e-5),sr=Gi+An,zr=gs+qr,wi=Ge+ar,Si=Math.max(Xe+ur,1e-5);Qr.push(new pp(en/$n,Fn/$n,jn/$n)),Jr.push(new pp(sr/Si,zr/Si,wi/Si))}Xt.push(Qr),Ln.push(Jr)}return[Xt,Ln]}(De,He,Ze,xt,ht)}(_,c,$,V,L,y,be,U,ee,_.center.lat,a.tileID.canonical),Be=a.queryGeometry;return function(pe,De,He){let Ze=1/0;eu(He,De)&&(Ze=EE(He,De[0]));for(let xt=0;xt<De.length;xt++){const ht=De[xt],St=pe[xt];for(let Rt=0;Rt<ht.length-1;Rt++){const Yt=ht[Rt],Tn=[Yt,ht[Rt+1],St[Rt+1],St[Rt],Yt];Pa(He,Tn)&&(Ze=Math.min(Ze,EE(He,Tn)))}}return Ze!==1/0&&Ze}(Ie,Fe,Be.isPointQuery()?Be.screenBounds:Be.screenGeometry)}},building:class extends oa{constructor(a,t,o,c){super(a,{layout:FE||(FE=new Vs({visibility:new Mn(Dt.layout_building.visibility),"building-roof-shape":new Yn(Dt.layout_building["building-roof-shape"]),"building-height":new Yn(Dt.layout_building["building-height"]),"building-base":new Yn(Dt.layout_building["building-base"])})),paint:BE||(BE=new Vs({"building-opacity":new Mn(Dt.paint_building["building-opacity"]),"building-ambient-occlusion-wall-intensity":new Mn(Dt.paint_building["building-ambient-occlusion-wall-intensity"]),"building-ambient-occlusion-ground-intensity":new Mn(Dt.paint_building["building-ambient-occlusion-ground-intensity"]),"building-ambient-occlusion-ground-radius":new Mn(Dt.paint_building["building-ambient-occlusion-ground-radius"]),"building-ambient-occlusion-ground-attenuation":new Mn(Dt.paint_building["building-ambient-occlusion-ground-attenuation"]),"building-vertical-scale":new Mn(Dt.paint_building["building-vertical-scale"]),"building-cast-shadows":new Mn(Dt.paint_building["building-cast-shadows"]),"building-color":new Yn(Dt.paint_building["building-color"]),"building-emissive-strength":new Yn(Dt.paint_building["building-emissive-strength"]),"building-color-use-theme":new Yn({type:"string",default:"default","property-type":"data-driven"})}))},t,o,c),this._stats={numRenderedVerticesInShadowPass:0,numRenderedVerticesInTransparentPass:0}}createBucket(a){return new NE(a)}},line:class extends oa{constructor(a,t,o,c){const h=YE();super(a,h,t,o,c),h.layout&&(this.layout=new Gd(h.layout)),this.gradientVersion=0,this.hasElevatedBuckets=!1,this.hasNonElevatedBuckets=!1}_handleSpecialPaintPropertyUpdate(a){if(a==="line-gradient"){const t=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=t._styleExpression&&t._styleExpression.expression instanceof Ff,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}widthExpression(){return this._transitionablePaint._values["line-width"].value.expression}recalculate(a,t){super.recalculate(a,t),this.paint._values["line-floorwidth"]=(()=>{if(w_)return w_;const o=YE();return w_=new xF(o.paint.properties["line-width"].specification),w_.useIntegerZoom=!0,w_})().possiblyEvaluate(this._transitioningPaint._values["line-width"].value,a)}createBucket(a){return new qw(a)}getProgramIds(){return[this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}getDefaultProgramParams(a,t,o){const c=WE(this);return{config:new Yh(this,{zoom:t,lut:o}),defines:c,overrideFog:!1}}queryRadius(a){const t=a,o=ZE($m("line-width",this,t),$m("line-gap-width",this,t)),c=$m("line-offset",this,t);return o/2+Math.abs(c)+l1(this.paint.get("line-translate"))}queryIntersectsFeature(a,t,o,c,h,_){if(a.queryGeometry.isAboveHorizon)return!1;const y=cC(a.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),_.angle,a.pixelToTileUnitsFactor),C=a.pixelToTileUnitsFactor/2*ZE(this.paint.get("line-width").evaluate(t,o),this.paint.get("line-gap-width").evaluate(t,o)),R=this.paint.get("line-offset").evaluate(t,o);return R&&(c=function(L,V){const $=[],U=new Rn(0,0);for(let X=0;X<L.length;X++){const ee=L[X],de=[];for(let be=0;be<ee.length;be++){const Ie=ee[be],Fe=ee[be+1],Be=be===0?U:Ie.sub(ee[be-1])._unit()._perp(),pe=be===ee.length-1?U:Fe.sub(Ie)._unit()._perp(),De=Be._add(pe)._unit();De._mult(1/(De.x*pe.x+De.y*pe.y)),de.push(De._mult(V)._add(Ie))}$.push(de)}return $}(c,R*a.pixelToTileUnitsFactor)),function(L,V,$){for(let U=0;U<V.length;U++){const X=V[U];if(L.length>=3){for(let ee=0;ee<X.length;ee++)if(bu(L,X[ee]))return!0}if(rd(L,X,$))return!0}return!1}(y,c,C)}isTileClipped(){return this.hasNonElevatedBuckets}isDraped(a){return!this.hasElevatedBuckets}hasElevation(){return this.layout&&this.layout.get("line-elevation-reference")!=="none"}},symbol:H1,background:class extends oa{constructor(a,t,o,c){super(a,{layout:VT||(VT=new Vs({visibility:new Mn(Dt.layout_background.visibility)})),paint:$T||($T=new Vs({"background-pitch-alignment":new Mn(Dt.paint_background["background-pitch-alignment"]),"background-color":new Mn(Dt.paint_background["background-color"]),"background-pattern":new Mn(Dt.paint_background["background-pattern"]),"background-opacity":new Mn(Dt.paint_background["background-opacity"]),"background-emissive-strength":new Mn(Dt.paint_background["background-emissive-strength"]),"background-color-use-theme":new Yn({type:"string",default:"default","property-type":"data-driven"})}))},t,o,c)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}getDefaultProgramParams(a,t,o){return{overrideFog:!1}}is3D(a){return this.paint.get("background-pitch-alignment")==="viewport"}},raster:qT,"raster-particle":JT,sky:class extends oa{constructor(a,t,o,c){super(a,{layout:YT||(YT=new Vs({visibility:new Mn(Dt.layout_sky.visibility)})),paint:ZT||(ZT=new Vs({"sky-type":new Mn(Dt.paint_sky["sky-type"]),"sky-atmosphere-sun":new Mn(Dt.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new Mn(Dt.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new Mn(Dt.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new Mn(Dt.paint_sky["sky-gradient-radius"]),"sky-gradient":new qd(Dt.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new Mn(Dt.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new Mn(Dt.paint_sky["sky-atmosphere-color"]),"sky-opacity":new Mn(Dt.paint_sky["sky-opacity"]),"sky-gradient-use-theme":new Yn({type:"string",default:"default","property-type":"data-driven"}),"sky-atmosphere-halo-color-use-theme":new Yn({type:"string",default:"default","property-type":"data-driven"}),"sky-atmosphere-color-use-theme":new Yn({type:"string",default:"default","property-type":"data-driven"})}))},t,o,c),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(a){a==="sky-gradient"?this._updateColorRamp():a!=="sky-atmosphere-sun"&&a!=="sky-atmosphere-halo-color"&&a!=="sky-atmosphere-color"&&a!=="sky-atmosphere-sun-intensity"||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=l_({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(a){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const t=a.style.light.properties.get("position");return this._lightPosition.azimuthal!==t.azimuthal||this._lightPosition.polar!==t.polar}return!1}getCenter(a,t){if(this.paint.get("sky-type")==="atmosphere"){const c=this.paint.get("sky-atmosphere-sun"),h=!c,_=a.style.light,y=_.properties.get("position");return h&&_.properties.get("anchor")==="viewport"&&kn("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),h?m3(y.azimuthal,90-y.polar,t):m3(c[0],90-c[1],t)}const o=this.paint.get("sky-gradient-center");return m3(o[0],90-o[1],t)}isSky(){return!0}markSkyboxValid(a){this._skyboxInvalidated=!1,this._lightPosition=a.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const a=this.paint.get("sky-type");return a==="atmosphere"?["skyboxCapture","skybox"]:a==="gradient"?["skyboxGradient"]:null}},slot:class extends oa{constructor(a,t,o,c){super(a,{paint:XT||(XT=new Vs({}))},t,null)}},model:class extends oa{constructor(a,t,o,c){super(a,{layout:aI||(aI=new Vs({visibility:new Mn(Dt.layout_model.visibility),"model-id":new Yn(Dt.layout_model["model-id"])})),paint:lI||(lI=new Vs({"model-opacity":new Yn(Dt.paint_model["model-opacity"]),"model-rotation":new Yn(Dt.paint_model["model-rotation"]),"model-scale":new Yn(Dt.paint_model["model-scale"]),"model-translation":new Yn(Dt.paint_model["model-translation"]),"model-color":new Yn(Dt.paint_model["model-color"]),"model-color-mix-intensity":new Yn(Dt.paint_model["model-color-mix-intensity"]),"model-type":new Mn(Dt.paint_model["model-type"]),"model-cast-shadows":new Mn(Dt.paint_model["model-cast-shadows"]),"model-receive-shadows":new Mn(Dt.paint_model["model-receive-shadows"]),"model-ambient-occlusion-intensity":new Mn(Dt.paint_model["model-ambient-occlusion-intensity"]),"model-emissive-strength":new Yn(Dt.paint_model["model-emissive-strength"]),"model-roughness":new Yn(Dt.paint_model["model-roughness"]),"model-height-based-emissive-strength-multiplier":new Yn(Dt.paint_model["model-height-based-emissive-strength-multiplier"]),"model-cutoff-fade-range":new Mn(Dt.paint_model["model-cutoff-fade-range"]),"model-front-cutoff":new Mn(Dt.paint_model["model-front-cutoff"]),"model-color-use-theme":new Yn({type:"string",default:"default","property-type":"data-driven"})}))},t,o,c),this._stats={numRenderedVerticesInShadowPass:0,numRenderedVerticesInTransparentPass:0}}createBucket(a){return new y3(a)}getProgramIds(){return["model"]}is3D(a){return!0}hasShadowPass(){return!0}canCastShadows(){return!0}hasLightBeamPass(){return!0}cutoffRange(){return this.paint.get("model-cutoff-fade-range")}queryRadius(a){return a instanceof Z1?Pn-1:0}queryIntersectsFeature(a,t,o,c,h,_){if(!this.modelManager)return!1;const y=this.modelManager,C=a.tile.getBucket(this);if(!(C&&C instanceof y3))return!1;for(const R in C.instancesPerModel){const L=C.instancesPerModel[R],V=t.id!==void 0?t.id:t.properties&&t.properties.hasOwnProperty("id")?t.properties.id:void 0;if(L.idToFeaturesIndex.hasOwnProperty(V)){const $=L.features[L.idToFeaturesIndex[V]],U=y.getModel(R,this.scope);if(!U)return!1;let X=F();const ee=new ze(0,0),de=C.canonical;let be=Number.MAX_VALUE;for(let Ie=0;Ie<$.instancedDataCount;++Ie){const Fe=16*($.instancedDataOffset+Ie),Be=L.instancedDataArray.float32,pe=[Be[Fe+4],Be[Fe+5],Be[Fe+6]];pI(de,ee,Be[Fe],0|Be[Fe+1]),uI(X,U,_,ee,$.rotation,$.scale,pe,!1,!1,!1),_.projection.name==="globe"&&(X=_3(X,_));const De=G([],_.projMatrix,X),He=a.queryGeometry,Ze=rI(He.isPointQuery()?He.screenBounds:He.screenGeometry,_,De,U.aabb);Ze!=null&&(be=Math.min(Ze,be))}return be!==Number.MAX_VALUE&&be}}return!1}_handleOverridablePaintPropertyUpdate(a,t,o){return!(!this.layout||t.isDataDriven()||o.isDataDriven()||a!=="model-color"&&a!=="model-color-mix-intensity"&&a!=="model-rotation"&&a!=="model-scale"&&a!=="model-translation"&&a!=="model-emissive-strength")}_isPropertyZoomDependent(a){const t=this._transitionablePaint._values[a];return t!=null&&t.value!=null&&t.value.expression!=null&&t.value.expression instanceof qf}isZoomDependent(){return this._isPropertyZoomDependent("model-scale")||this._isPropertyZoomDependent("model-rotation")||this._isPropertyZoomDependent("model-translation")}},clip:class extends oa{constructor(a,t,o,c){super(a,{layout:YC||(YC=new Vs({"clip-layer-types":new Mn(Dt.layout_clip["clip-layer-types"]),"clip-layer-scope":new Mn(Dt.layout_clip["clip-layer-scope"])})),paint:ZC||(ZC=new Vs({}))},t,o,c)}recalculate(a,t){super.recalculate(a,t)}createBucket(a){return new XC(a)}is3D(a){return!0}}},S3=new Bi(0,0,0),C3={PATH_RULE_NON_ZERO:1,PATH_RULE_EVEN_ODD:2},E3={LINE_CAP_BUTT:1,LINE_CAP_ROUND:2,LINE_CAP_SQUARE:3},X1={LINE_JOIN_MITER:1,LINE_JOIN_MITER_CLIP:2,LINE_JOIN_ROUND:3,LINE_JOIN_BEVEL:4},EB={PAINT_ORDER_FILL_AND_STROKE:1},D_={PATH_COMMAND_MOVE:1,PATH_COMMAND_LINE:2,PATH_COMMAND_QUAD:3,PATH_COMMAND_CUBIC:4,PATH_COMMAND_CLOSE:5},mI={MASK_TYPE_LUMINANCE:1};function TB(a,t,o){a===1&&t.icons.push(function(c,h){return function(_){if(_.usvg_tree.height||(_.usvg_tree.height=_.usvg_tree.width),!_.metadata)return _;const{metadata:y}=_;if(y.content_area){const{content_area:C}=y;C.top==null&&(C.top=C.left),C.width==null&&(C.width=_.usvg_tree.width),C.height==null&&(C.height=C.width)}return y.stretch_x&&y.stretch_x.length&&gI(y,"x"),y.stretch_y&&y.stretch_y.length&&gI(y,"y"),_}(c.readFields(IB,{name:void 0},h))}(o,o.readVarint()+o.pos))}function gI(a,t){const o=[],c=a[`stretch_${t}`];let h=null;for(let _=0;_<c.length;_++)h===null?h=o.length===0?c[0]:o[o.length-1][1]+c[_]:(o.push([h,h+c[_]]),h=null);a[`stretch_${t}_areas`]=o}function IB(a,t,o){a===1?t.name=o.readString():a===2?t.metadata=function(c,h){return c.readFields(kB,{stretch_x:null,stretch_y:null,stretch_x_areas:null,stretch_y_areas:null,variables:[]},h)}(o,o.readVarint()+o.pos):a===3&&(t.usvg_tree=function(c,h){return c.readFields(RB,{width:20,children:[],linear_gradients:[],radial_gradients:[],clip_paths:[],masks:[]},h)}(o,o.readVarint()+o.pos),t.data="usvg_tree")}function kB(a,t,o){a===1?t.stretch_x=o.readPackedVarint():a===2?t.stretch_y=o.readPackedVarint():a===3?t.content_area=function(c,h){return c.readFields(MB,{left:0},h)}(o,o.readVarint()+o.pos):a===4&&t.variables.push(function(c,h){return c.readFields(AB,{name:void 0},h)}(o,o.readVarint()+o.pos))}function MB(a,t,o){a===1?t.left=o.readVarint():a===2?t.width=o.readVarint():a===3?t.top=o.readVarint():a===4&&(t.height=o.readVarint())}function AB(a,t,o){a===1?t.name=o.readString():a===2&&(t.rgb_color=e2(o.readVarint()),t.value="rgb_color")}function RB(a,t,o){a===1?t.width=t.height=o.readVarint():a===2?t.height=o.readVarint():a===3?t.children.push(J1(o,o.readVarint()+o.pos)):a===4?t.linear_gradients.push(function(c,h){return c.readFields(FB,{spread_method:1,stops:[],x1:0,y1:0,x2:1,y2:0},h)}(o,o.readVarint()+o.pos)):a===5?t.radial_gradients.push(function(c,h){return c.readFields(VB,{spread_method:1,stops:[],cx:.5,cy:.5,r:.5,fx:.5,fy:.5,fr:0},h)}(o,o.readVarint()+o.pos)):a===7?t.clip_paths.push(function(c,h){return c.readFields($B,{children:[]},h)}(o,o.readVarint()+o.pos)):a===8&&t.masks.push(function(c,h){const _=c.readFields(HB,{left:0,width:20,mask_type:mI.MASK_TYPE_LUMINANCE,children:[]},h);return _.height==null&&(_.height=_.width),_.top==null&&(_.top=_.left),_}(o,o.readVarint()+o.pos))}function J1(a,t){return a.readFields(PB,{},t)}function PB(a,t,o){a===1?(t.group=function(c,h){return c.readFields(LB,{opacity:255,children:[]},h)}(o,o.readVarint()+o.pos),t.node="group"):a===2&&(t.path=function(c,h){return c.readFields(DB,{paint_order:1,commands:[],step:1,diffs:[],rule:C3.PATH_RULE_NON_ZERO},h)}(o,o.readVarint()+o.pos),t.node="path")}function LB(a,t,o){a===1?t.transform=Q1(o,o.readVarint()+o.pos):a===2?t.opacity=o.readVarint():a===5?t.clip_path_idx=o.readVarint():a===6?t.mask_idx=o.readVarint():a===7&&t.children.push(J1(o,o.readVarint()+o.pos))}function Q1(a,t){return a.readFields(OB,{sx:1,ky:0,kx:0,sy:1,tx:0,ty:0},t)}function OB(a,t,o){a===1?t.sx=o.readFloat():a===2?t.ky=o.readFloat():a===3?t.kx=o.readFloat():a===4?t.sy=o.readFloat():a===5?t.tx=o.readFloat():a===6&&(t.ty=o.readFloat())}function DB(a,t,o){a===1?t.fill=function(c,h){return c.readFields(zB,{rgb_color:S3,paint:"rgb_color",opacity:255},h)}(o,o.readVarint()+o.pos):a===2?t.stroke=function(c,h){return c.readFields(NB,{rgb_color:S3,paint:"rgb_color",dasharray:[],dashoffset:0,miterlimit:4,opacity:255,width:1,linecap:1,linejoin:1},h)}(o,o.readVarint()+o.pos):a===3?t.paint_order=o.readVarint():a===5?o.readPackedVarint(t.commands):a===6?t.step=o.readFloat():a===7?o.readPackedSVarint(t.diffs):a===8&&(t.rule=o.readVarint())}function zB(a,t,o){a===1?(t.rgb_color=e2(o.readVarint()),t.paint="rgb_color"):a===2?(t.linear_gradient_idx=o.readVarint(),t.paint="linear_gradient_idx"):a===3?(t.radial_gradient_idx=o.readVarint(),t.paint="radial_gradient_idx"):a===5&&(t.opacity=o.readVarint())}function e2(a){return new Bi((a>>16&255)/255,(a>>8&255)/255,(255&a)/255,1)}function NB(a,t,o){a===1?(t.rgb_color=e2(o.readVarint()),t.paint="rgb_color"):a===2?(t.linear_gradient_idx=o.readVarint(),t.paint="linear_gradient_idx"):a===3?(t.radial_gradient_idx=o.readVarint(),t.paint="radial_gradient_idx"):a===5?o.readPackedFloat(t.dasharray):a===6?t.dashoffset=o.readFloat():a===7?t.miterlimit=o.readFloat():a===8?t.opacity=o.readVarint():a===9?t.width=o.readFloat():a===10?t.linecap=o.readVarint():a===11&&(t.linejoin=o.readVarint())}function FB(a,t,o){a===1?t.transform=Q1(o,o.readVarint()+o.pos):a===2?t.spread_method=o.readVarint():a===3?t.stops.push(_I(o,o.readVarint()+o.pos)):a===4?t.x1=o.readFloat():a===5?t.y1=o.readFloat():a===6?t.x2=o.readFloat():a===7&&(t.y2=o.readFloat())}function _I(a,t){return a.readFields(BB,{offset:0,opacity:255,rgb_color:S3},t)}function BB(a,t,o){a===1?t.offset=o.readFloat():a===2?t.opacity=o.readVarint():a===3&&(t.rgb_color=e2(o.readVarint()))}function VB(a,t,o){a===1?t.transform=Q1(o,o.readVarint()+o.pos):a===2?t.spread_method=o.readVarint():a===3?t.stops.push(_I(o,o.readVarint()+o.pos)):a===4?t.cx=o.readFloat():a===5?t.cy=o.readFloat():a===6?t.r=o.readFloat():a===7?t.fx=o.readFloat():a===8?t.fy=o.readFloat():a===9&&(t.fr=o.readFloat())}function $B(a,t,o){a===1?t.transform=Q1(o,o.readVarint()+o.pos):a===2?t.clip_path_idx=o.readVarint():a===3&&t.children.push(J1(o,o.readVarint()+o.pos))}function HB(a,t,o){a===1?t.left=t.top=o.readFloat():a===2?t.width=t.height=o.readFloat():a===3?t.top=o.readFloat():a===4?t.height=o.readFloat():a===5?t.mask_type=o.readVarint():a===6?t.mask_idx=o.readVarint():a===7&&t.children.push(J1(o,o.readVarint()+o.pos))}class UB{static calculate(t={},o=[]){const c=new Map,h=new Map;if(Object.keys(t).length===0)return c;o.forEach(_=>{h.set(_.name,_.rgb_color||new Bi(0,0,0))});for(const[_,y]of Object.entries(t))h.has(_)?c.set(h.get(_).toString(),y):console.warn(`Ignoring unknown image variable "${_}"`);return c}}function eg(a,t=255,o){const c=t/255,h=a.toString(),_=o.has(h)?o.get(h).clone():a.clone();return _.a*=c,_.toString()}function z_(a,t){if(!$l()){const o=document.createElement("canvas");return o.width=a,o.height=t,o}return new OffscreenCanvas(a,t)}function jB(a,t){const o=UB.calculate(t.params,a.metadata?a.metadata.variables:[]),c=a.usvg_tree,h=c.width,_=c.height,y=t.transform?t.transform:new DOMMatrix,C=Math.max(1,Math.round(h*y.a)),R=Math.max(1,Math.round(_*y.d)),L=new DOMMatrix([C/h,0,0,R/_,0,0]),V=z_(C,R).getContext("2d");return T3(V,L,c,c,o),V.getImageData(0,0,C,R)}function T3(a,t,o,c,h){for(const _ of c.children)vI(a,t,o,_,h)}function vI(a,t,o,c,h){c.group?(a.save(),function(_,y,C,R,L){const V=R.mask_idx!=null?C.masks[R.mask_idx]:null,$=R.clip_path_idx!=null?C.clip_paths[R.clip_path_idx]:null;if(R.transform&&(y=tg(R.transform).preMultiplySelf(y)),!function(ee,de,be){return ee.opacity!==255||de||be}(R,$!=null,V!=null))return void T3(_,y,C,R,L);const U=z_(_.canvas.width,_.canvas.height),X=U.getContext("2d");T3(X,y,C,R,L),$&&EI(X,y,C,$),V&&TI(X,y,C,V,L),_.globalAlpha=R.opacity/255,_.drawImage(U,0,0)}(a,t,o,c.group,h),a.restore()):c.path&&(a.save(),function(_,y,C,R,L){_.setTransform(y),R.paint_order===EB.PAINT_ORDER_FILL_AND_STROKE?(yI(_,C,R,L),xI(_,C,R,L)):(xI(_,C,R,L),yI(_,C,R,L))}(a,t,o,c.path,h),a.restore())}function yI(a,t,o,c){const h=o.fill;if(!h)return;const _=h.opacity/255;switch(a.save(),a.beginPath(),II(o,a),h.paint){case"rgb_color":a.fillStyle=eg(h.rgb_color,h.opacity,c);break;case"linear_gradient_idx":{const y=t.linear_gradients[h.linear_gradient_idx];y.transform&&a.setTransform(tg(y.transform).preMultiplySelf(a.getTransform())),a.fillStyle=wI(a,y,_,c);break}case"radial_gradient_idx":{const y=t.radial_gradients[h.radial_gradient_idx];y.transform&&a.setTransform(tg(y.transform).preMultiplySelf(a.getTransform())),a.fillStyle=SI(a,y,_,c)}}a.fill(bI(o)),a.restore()}function bI(a){return a.rule===C3.PATH_RULE_NON_ZERO?"nonzero":a.rule===C3.PATH_RULE_EVEN_ODD?"evenodd":void 0}function xI(a,t,o,c){const h=o.stroke;if(!h)return;const _=kI(o);a.lineWidth=h.width,a.miterLimit=h.miterlimit,a.setLineDash(h.dasharray),a.lineDashOffset=h.dashoffset;const y=h.opacity/255;switch(h.paint){case"rgb_color":a.strokeStyle=eg(h.rgb_color,h.opacity,c);break;case"linear_gradient_idx":a.strokeStyle=wI(a,t.linear_gradients[h.linear_gradient_idx],y,c,!0);break;case"radial_gradient_idx":a.strokeStyle=SI(a,t.radial_gradients[h.radial_gradient_idx],y,c,!0)}switch(h.linejoin){case X1.LINE_JOIN_MITER_CLIP:case X1.LINE_JOIN_MITER:a.lineJoin="miter";break;case X1.LINE_JOIN_ROUND:a.lineJoin="round";break;case X1.LINE_JOIN_BEVEL:a.lineJoin="bevel"}switch(h.linecap){case E3.LINE_CAP_BUTT:a.lineCap="butt";break;case E3.LINE_CAP_ROUND:a.lineCap="round";break;case E3.LINE_CAP_SQUARE:a.lineCap="square"}a.stroke(_)}function wI(a,t,o,c,h=!1){if(t.stops.length===1){const U=t.stops[0];return eg(U.rgb_color,U.opacity*o,c)}const{x1:_,y1:y,x2:C,y2:R}=t;let L=new DOMPoint(_,y),V=new DOMPoint(C,R);if(h){const U=tg(t.transform);L=U.transformPoint(L),V=U.transformPoint(V)}const $=a.createLinearGradient(L.x,L.y,V.x,V.y);for(const U of t.stops)$.addColorStop(U.offset,eg(U.rgb_color,U.opacity*o,c));return $}function SI(a,t,o,c,h=!1){if(t.stops.length===1){const Ie=t.stops[0];return eg(Ie.rgb_color,Ie.opacity*o,c)}const _=tg(t.transform),{fx:y,fy:C,fr:R,cx:L,cy:V,r:$}=t;let U=new DOMPoint(y,C),X=new DOMPoint(L,V),ee=R,de=$;if(h){U=_.transformPoint(U),X=_.transformPoint(X);const Ie=(_.a+_.d)/2;ee=R*Ie,de=t.r*Ie}const be=a.createRadialGradient(U.x,U.y,ee,X.x,X.y,de);for(const Ie of t.stops)be.addColorStop(Ie.offset,eg(Ie.rgb_color,Ie.opacity*o,c));return be}function CI(a,t,o,c){const h=c.transform?tg(c.transform).preMultiplySelf(t):t,_=z_(a.canvas.width,a.canvas.height),y=_.getContext("2d");for(const R of c.children)if(R.group)CI(y,h,o,R.group);else if(R.path){const L=R.path,V=new Path2D;V.addPath(kI(L),h),y.fill(V,bI(L))}const C=c.clip_path_idx!=null?o.clip_paths[c.clip_path_idx]:null;C&&EI(y,h,o,C),a.globalCompositeOperation="source-over",a.drawImage(_,0,0)}function EI(a,t,o,c){const h=z_(a.canvas.width,a.canvas.height);CI(h.getContext("2d"),t,o,c),a.globalCompositeOperation="destination-in",a.drawImage(h,0,0)}function TI(a,t,o,c,h){if(c.children.length===0)return;const _=c.mask_idx!=null?o.masks[c.mask_idx]:null;_&&TI(a,t,o,_,h);const y=a.canvas.width,C=a.canvas.height,R=z_(y,C),L=R.getContext("2d"),V=c.width,$=c.height,U=c.left,X=c.top,ee=new Path2D,de=new Path2D;de.rect(U,X,V,$),ee.addPath(de,t),L.clip(ee);for(const Fe of c.children)vI(L,t,o,Fe,h);const be=L.getImageData(0,0,y,C),Ie=be.data;if(c.mask_type===mI.MASK_TYPE_LUMINANCE)for(let Fe=0;Fe<Ie.length;Fe+=4)Ie[Fe+3]=Ie[Fe+3]/255*(.2126*Ie[Fe]+.7152*Ie[Fe+1]+.0722*Ie[Fe+2]);L.putImageData(be,0,0),a.globalCompositeOperation="destination-in",a.drawImage(R,0,0)}function tg(a){return a?new DOMMatrix([a.sx,a.ky,a.kx,a.sy,a.tx,a.ty]):new DOMMatrix}function II(a,t){const o=a.step;let c=a.diffs[0]*o,h=a.diffs[1]*o;t.moveTo(c,h);for(let _=0,y=2;_<a.commands.length;_++)switch(a.commands[_]){case D_.PATH_COMMAND_MOVE:c+=a.diffs[y++]*o,h+=a.diffs[y++]*o,t.moveTo(c,h);break;case D_.PATH_COMMAND_LINE:c+=a.diffs[y++]*o,h+=a.diffs[y++]*o,t.lineTo(c,h);break;case D_.PATH_COMMAND_QUAD:{const C=c+a.diffs[y++]*o,R=h+a.diffs[y++]*o;c=C+a.diffs[y++]*o,h=R+a.diffs[y++]*o,t.quadraticCurveTo(C,R,c,h);break}case D_.PATH_COMMAND_CUBIC:{const C=c+a.diffs[y++]*o,R=h+a.diffs[y++]*o,L=C+a.diffs[y++]*o,V=R+a.diffs[y++]*o;c=L+a.diffs[y++]*o,h=V+a.diffs[y++]*o,t.bezierCurveTo(C,R,L,V,c,h);break}case D_.PATH_COMMAND_CLOSE:t.closePath()}return t}function kI(a){return II(a,new Path2D)}class t2{constructor(t){this.capacity=t,this.cache=new Map}get(t){if(!this.cache.has(t))return;const o=this.cache.get(t);return this.cache.delete(t),this.cache.set(t,o),o}put(t,o){this.cache.has(t)?this.cache.delete(t):this.cache.size===this.capacity&&this.cache.delete(this.cache.keys().next().value),this.cache.set(t,o)}delete(t){this.cache.delete(t)}}Qn(t2,"LRUCache");class I3{constructor(){this.cacheMap=new Map,this.cacheDependenciesMap=new Map}static _getImage(t){return new Zo(t,t.data)}getFromCache(t,o,c){return this.cacheMap.has(c)||this.cacheMap.set(c,new t2(150)),this.cacheMap.get(c).get(Wd(t.toString(),o))}setInCache(t,o,c,h){this.cacheDependenciesMap.has(h)||this.cacheDependenciesMap.set(h,new Map),this.cacheMap.has(h)||this.cacheMap.set(h,new t2(150));const _=this.cacheDependenciesMap.get(h),y=Wd(t.id.toString(),c);_.get(y)||_.set(y,new Set);const C=this.cacheMap.get(h),R=t.toString();_.get(y).add(R),C.put(Wd(t.toString(),c),o)}removeImagesFromCacheByIds(t,o,c=0){if(!this.cacheMap.has(c)||!this.cacheDependenciesMap.has(c))return;const h=this.cacheMap.get(c),_=this.cacheDependenciesMap.get(c);for(const y of t){const C=Wd(y.toString(),o);if(_.has(C)){for(const R of _.get(C))h.delete(R);_.delete(C)}}}rasterize(t,o,c,h,_=jB){const y=this.getFromCache(t,c,h);if(y)return y.clone();const C=_(o.icon,t.options),R=I3._getImage(C);return this.setInCache(t,R,c,h),R.clone()}}class MI{constructor(t){this.size=t,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(t,o){const c=this.toIdx(t,o);return{min:this.minimums[c],max:this.maximums[c]}}isLeaf(t,o){return this.leaves[this.toIdx(t,o)]}toIdx(t,o){return o*this.size+t}}function AI(a,t,o,c){let h=0,_=Number.MAX_VALUE;for(let y=0;y<3;y++)if(Math.abs(c[y])<1e-15){if(o[y]<a[y]||o[y]>t[y])return null}else{const C=1/c[y];let R=(a[y]-o[y])*C,L=(t[y]-o[y])*C;if(R>L){const V=R;R=L,L=V}if(R>h&&(h=R),L<_&&(_=L),h>_)return null}return h}function RI(a,t,o,c,h,_,y,C,R,L,V){const $=c-a,U=h-t,X=_-o,ee=y-a,de=C-t,be=R-o,Ie=V[1]*be-V[2]*de,Fe=V[2]*ee-V[0]*be,Be=V[0]*de-V[1]*ee,pe=$*Ie+U*Fe+X*Be;if(Math.abs(pe)<1e-15)return null;const De=1/pe,He=L[0]-a,Ze=L[1]-t,xt=L[2]-o,ht=(He*Ie+Ze*Fe+xt*Be)*De;if(ht<0||ht>1)return null;const St=Ze*X-xt*U,Rt=xt*$-He*X,Yt=He*U-Ze*$,Tn=(V[0]*St+V[1]*Rt+V[2]*Yt)*De;return Tn<0||ht+Tn>1?null:(ee*St+de*Rt+be*Yt)*De}function PI(a,t,o){return(a-t)/(o-t)}function LI(a,t,o,c,h,_,y,C,R){const L=1<<o,V=_-c,$=y-h,U=(a+1)/L*V+c,X=(t+0)/L*$+h,ee=(t+1)/L*$+h;C[0]=(a+0)/L*V+c,C[1]=X,R[0]=U,R[1]=ee}class OI{constructor(t){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=t,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const o=function(_){const y=Math.ceil(Math.log2(_.dim/8)),C=[];let R=Math.ceil(Math.pow(2,y));const L=1/R,V=(X,ee,de,be,Ie)=>{const Fe=be?1:0,Be=(X+1)*de-Fe,pe=ee*de,De=(ee+1)*de-Fe;Ie[0]=X*de,Ie[1]=pe,Ie[2]=Be,Ie[3]=De};let $=new MI(R);const U=[];for(let X=0;X<R*R;X++){V(X%R,Math.floor(X/R),L,!1,U);const ee=sf(U[0],U[1],_),de=sf(U[2],U[1],_),be=sf(U[2],U[3],_),Ie=sf(U[0],U[3],_);$.minimums.push(Math.min(ee,de,be,Ie)),$.maximums.push(Math.max(ee,de,be,Ie)),$.leaves.push(1)}for(C.push($),R/=2;R>=1;R/=2){const X=C[C.length-1];$=new MI(R);for(let ee=0;ee<R*R;ee++){V(ee%R,Math.floor(ee/R),2,!0,U);const de=X.getElevation(U[0],U[1]),be=X.getElevation(U[2],U[1]),Ie=X.getElevation(U[2],U[3]),Fe=X.getElevation(U[0],U[3]),Be=X.isLeaf(U[0],U[1]),pe=X.isLeaf(U[2],U[1]),De=X.isLeaf(U[2],U[3]),He=X.isLeaf(U[0],U[3]),Ze=Math.min(de.min,be.min,Ie.min,Fe.min),xt=Math.max(de.max,be.max,Ie.max,Fe.max),ht=Be&&pe&&De&&He;$.maximums.push(xt),$.minimums.push(Ze),$.leaves.push(xt-Ze<=5&&ht?1:0)}C.push($)}return C}(this.dem),c=o.length-1,h=o[c];this._addNode(h.minimums[0],h.maximums[0],h.leaves[0]),this._construct(o,0,0,c,0)}raycastRoot(t,o,c,h,_,y,C=1){return AI([t,o,-100],[c,h,this.maximums[0]*C],_,y)}raycast(t,o,c,h,_,y,C=1){if(!this.nodeCount)return null;const R=this.raycastRoot(t,o,c,h,_,y,C);if(R==null)return null;const L=[],V=[],$=[],U=[],X=[{idx:0,t:R,nodex:0,nodey:0,depth:0}];for(;X.length>0;){const{idx:ee,t:de,nodex:be,nodey:Ie,depth:Fe}=X.pop();if(this.leaves[ee]){LI(be,Ie,Fe,t,o,c,h,$,U);const pe=1<<Fe,De=(be+0)/pe,He=(be+1)/pe,Ze=(Ie+0)/pe,xt=(Ie+1)/pe,ht=sf(De,Ze,this.dem)*C,St=sf(He,Ze,this.dem)*C,Rt=sf(He,xt,this.dem)*C,Yt=sf(De,xt,this.dem)*C,Tn=RI($[0],$[1],ht,U[0],$[1],St,U[0],U[1],Rt,_,y),hn=RI(U[0],U[1],Rt,$[0],U[1],Yt,$[0],$[1],ht,_,y),Cn=Math.min(Tn!==null?Tn:Number.MAX_VALUE,hn!==null?hn:Number.MAX_VALUE);if(Cn!==Number.MAX_VALUE)return Cn;{const In=We([],_,y,de);if(DI(ht,St,Yt,Rt,PI(In[0],$[0],U[0]),PI(In[1],$[1],U[1]))>=In[2])return de}continue}let Be=0;for(let pe=0;pe<this._siblingOffset.length;pe++){LI((be<<1)+this._siblingOffset[pe][0],(Ie<<1)+this._siblingOffset[pe][1],Fe+1,t,o,c,h,$,U),$[2]=-100,U[2]=this.maximums[this.childOffsets[ee]+pe]*C;const De=AI($,U,_,y);if(De!=null){const He=De;L[pe]=He;let Ze=!1;for(let xt=0;xt<Be&&!Ze;xt++)He>=L[V[xt]]&&(V.splice(xt,0,pe),Ze=!0);Ze||(V[Be]=pe),Be++}}for(let pe=0;pe<Be;pe++){const De=V[pe];X.push({idx:this.childOffsets[ee]+De,t:L[De],nodex:(be<<1)+this._siblingOffset[De][0],nodey:(Ie<<1)+this._siblingOffset[De][1],depth:Fe+1})}}return null}_addNode(t,o,c){return this.minimums.push(t),this.maximums.push(o),this.leaves.push(c),this.childOffsets.push(0),this.nodeCount++}_construct(t,o,c,h,_){if(t[h].isLeaf(o,c)===1)return;this.childOffsets[_]||(this.childOffsets[_]=this.nodeCount);const y=h-1,C=t[y];let R=0,L=0;for(let V=0;V<this._siblingOffset.length;V++){const $=2*o+this._siblingOffset[V][0],U=2*c+this._siblingOffset[V][1],X=C.getElevation($,U),ee=C.isLeaf($,U),de=this._addNode(X.min,X.max,ee);ee&&(R|=1<<V),L||(L=de)}for(let V=0;V<this._siblingOffset.length;V++)R&1<<V||this._construct(t,2*o+this._siblingOffset[V][0],2*c+this._siblingOffset[V][1],y,L+V)}}function DI(a,t,o,c,h,_){return Dr(Dr(a,o,_),Dr(t,c,_),h)}function sf(a,t,o){const c=o.dim,h=tt(a*c-.5,0,c-1),_=tt(t*c-.5,0,c-1),y=Math.floor(h),C=Math.floor(_),R=Math.min(y+1,c-1),L=Math.min(C+1,c-1);return DI(o.get(y,C),o.get(R,C),o.get(y,L),o.get(R,L),h-y,_-C)}const GB={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};function qB(a,t,o){return(256*a*256+256*t+o)/10-1e4}function WB(a,t,o){return 256*a+t+o/256-32768}class n2{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(t,o,c,h=!1){if(this.uid=t,o.height!==o.width)throw new RangeError("DEM tiles must be square");if(c&&c!=="mapbox"&&c!=="terrarium")return void kn(`"${c}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=o.height;const _=this.dim=o.height-2,y=new Uint32Array(o.data.buffer);if(this.pixels=new Uint8Array(o.data.buffer),this.floatView=new Float32Array(o.data.buffer),this.borderReady=h,this._modifiedForSources={},!h){for(let R=0;R<_;R++)y[this._idx(-1,R)]=y[this._idx(0,R)],y[this._idx(_,R)]=y[this._idx(_-1,R)],y[this._idx(R,-1)]=y[this._idx(R,0)],y[this._idx(R,_)]=y[this._idx(R,_-1)];y[this._idx(-1,-1)]=y[this._idx(0,0)],y[this._idx(_,-1)]=y[this._idx(_-1,0)],y[this._idx(-1,_)]=y[this._idx(0,_-1)],y[this._idx(_,_)]=y[this._idx(_-1,_-1)]}const C=c==="terrarium"?WB:qB;for(let R=0;R<y.length;++R){const L=4*R;this.floatView[R]=C(this.pixels[L],this.pixels[L+1],this.pixels[L+2])}this._timestamp=sl.now()}_buildQuadTree(){this._tree=new OI(this)}get(t,o,c=!1){c&&(t=tt(t,-1,this.dim),o=tt(o,-1,this.dim));const h=this._idx(t,o);return this.floatView[h]}set(t,o,c){const h=this._idx(t,o),_=this.floatView[h];return this.floatView[h]=c,c-_}static getUnpackVector(t){return GB[t]}_idx(t,o){if(t<-1||t>=this.dim+1||o<-1||o>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(o+1)*this.stride+(t+1)}static pack(t,o){const c=[0,0,0,0],h=n2.getUnpackVector(o);let _=Math.floor((t+h[3])/h[2]);return c[2]=_%256,_=Math.floor(_/256),c[1]=_%256,_=Math.floor(_/256),c[0]=_,c}getPixels(){return new DC({width:this.stride,height:this.stride},this.pixels)}backfillBorder(t,o,c){if(this.dim!==t.dim)throw new Error("dem dimension mismatch");let h=o*this.dim,_=o*this.dim+this.dim,y=c*this.dim,C=c*this.dim+this.dim;switch(o){case-1:h=_-1;break;case 1:_=h+1}switch(c){case-1:y=C-1;break;case 1:C=y+1}const R=-o*this.dim,L=-c*this.dim;for(let V=y;V<C;V++)for(let $=h;$<_;$++){const U=4*this._idx($,V),X=4*this._idx($+R,V+L);this.pixels[U+0]=t.pixels[X+0],this.pixels[U+1]=t.pixels[X+1],this.pixels[U+2]=t.pixels[X+2],this.pixels[U+3]=t.pixels[X+3]}}onDeserialize(){this._tree&&(this._tree.dem=this)}}function KB(a,t,o){a===1?t.headerLength=o.readFixed32():a===2?t.x=o.readVarint():a===3?t.y=o.readVarint():a===4?t.z=o.readVarint():a===5&&t.layers.push(function(c,h){return c.readFields(QB,{version:0,name:"",units:"",tileSize:0,buffer:0,pixelFormat:0,dataIndex:[]},h)}(o,o.readVarint()+o.pos))}function YB(a,t,o){a===1?(t.delta_filter=function(c,h){return c.readFields(ZB,{blockSize:0},h)}(o,o.readVarint()+o.pos),t.filter="delta_filter"):a===2?(o.readVarint(),t.filter="zigzag_filter"):a===3?(o.readVarint(),t.filter="bitshuffle_filter"):a===4&&(o.readVarint(),t.filter="byteshuffle_filter")}function ZB(a,t,o){a===1&&(t.blockSize=o.readVarint())}function XB(a,t,o){a===1?(o.readVarint(),t.codec="gzip_data"):a===2?(o.readVarint(),t.codec="jpeg_image"):a===3?(o.readVarint(),t.codec="webp_image"):a===4&&(o.readVarint(),t.codec="png_image")}function JB(a,t,o){let c=0,h=0;a===1?t.firstByte=o.readFixed64():a===2?t.lastByte=o.readFixed64():a===3?t.filters.push(function(_,y){return _.readFields(YB,{},y)}(o,o.readVarint()+o.pos)):a===4?t.codec=function(_,y){return _.readFields(XB,{},y)}(o,o.readVarint()+o.pos):a===5?h=o.readFloat():a===6?c=o.readFloat():a===7?t.bands.push(o.readString()):a===8?t.offset=o.readDouble():a===9&&(t.scale=o.readDouble()),t.offset===0&&(t.offset=h),t.scale===0&&(t.scale=c)}function QB(a,t,o){a===1?t.version=o.readVarint():a===2?t.name=o.readString():a===3?t.units=o.readString():a===4?t.tileSize=o.readVarint():a===5?t.buffer=o.readVarint():a===6?t.pixelFormat=o.readVarint():a===7&&t.dataIndex.push(function(c,h){return c.readFields(JB,{firstByte:0,lastByte:0,filters:[],codec:null,offset:0,scale:0,bands:[]},h)}(o,o.readVarint()+o.pos))}function e7(a,t,o){if(a===2)(function(c,h,_){c.readFields(t7,_,h)})(o,o.readVarint()+o.pos,t);else if(a===3)throw new Error("Not implemented")}function t7(a,t,o){if(a===1){let c=0;const h=o.readVarint()+o.pos;for(;o.pos<h;)t[c++]=o.readVarint()}}function n7(a,t){if(t.length!==4)throw new Error(`Expected data of dimension 4 but got ${t.length}.`);let o=t[3];for(let c=2;c>=1;c--){const h=c===1?1:0,_=c===2?1:0;for(let y=0;y<t[0];y++){const C=t[1]*y;for(let R=h;R<t[1];R++){const L=t[2]*(R+C);for(let V=_;V<t[2];V++){const $=t[3]*(V+L);for(let U=0;U<t[3];U++){const X=$+U;a[X]+=a[X-o]}}}}o*=t[c]}return a}function r7(a){for(let t=0,o=a.length;t<o;t++)a[t]=a[t]>>>1^-(1&a[t]);return a}function i7(a,t){switch(t){case"uint32":return a;case"uint16":for(let o=0;o<a.length;o+=2){const c=a[o],h=a[o+1];a[o]=(240&c)>>4|(61440&c)>>8|(240&h)<<4|61440&h,a[o+1]=15&c|(3840&c)>>4|(15&h)<<8|(3840&h)<<4}return a;case"uint8":for(let o=0;o<a.length;o+=4){const c=a[o],h=a[o+1],_=a[o+2],y=a[o+3];a[o+0]=(192&c)>>6|(192&h)>>4|(192&_)>>2|192&y,a[o+1]=(48&c)>>4|(48&h)>>2|48&_|(48&y)<<2,a[o+2]=(12&c)>>2|12&h|(12&_)<<2|(12&y)<<4,a[o+3]=3&c|(3&h)<<2|(3&_)<<4|(3&y)<<6}return a;default:throw new Error(`Invalid pixel format, "${t}"`)}}Qn(n2,"DEMData"),Qn(OI,"DemMinMaxQuadTree",{omit:["dem"]});var tu=Uint8Array,N_=Uint16Array,s7=Int32Array,zI=new tu([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),NI=new tu([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),o7=new tu([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),FI=function(a,t){for(var o=new N_(31),c=0;c<31;++c)o[c]=t+=1<<a[c-1];var h=new s7(o[30]);for(c=1;c<30;++c)for(var _=o[c];_<o[c+1];++_)h[_]=_-o[c]<<5|c;return{b:o,r:h}},BI=FI(zI,2),VI=BI.b,a7=BI.r;VI[28]=258,a7[258]=28;for(var l7=FI(NI,0).b,$I=new N_(32768),xo=0;xo<32768;++xo){var ng=(43690&xo)>>1|(21845&xo)<<1;$I[xo]=((65280&(ng=(61680&(ng=(52428&ng)>>2|(13107&ng)<<2))>>4|(3855&ng)<<4))>>8|(255&ng)<<8)>>1}var F_=function(a,t,o){for(var c=a.length,h=0,_=new N_(t);h<c;++h)a[h]&&++_[a[h]-1];var y,C=new N_(t);for(h=1;h<t;++h)C[h]=C[h-1]+_[h-1]<<1;y=new N_(1<<t);var R=15-t;for(h=0;h<c;++h)if(a[h])for(var L=h<<4|a[h],V=t-a[h],$=C[a[h]-1]++<<V,U=$|(1<<V)-1;$<=U;++$)y[$I[$]>>R]=L;return y},B_=new tu(288);for(xo=0;xo<144;++xo)B_[xo]=8;for(xo=144;xo<256;++xo)B_[xo]=9;for(xo=256;xo<280;++xo)B_[xo]=7;for(xo=280;xo<288;++xo)B_[xo]=8;var HI=new tu(32);for(xo=0;xo<32;++xo)HI[xo]=5;var u7=F_(B_,9),c7=F_(HI,5),k3=function(a){for(var t=a[0],o=1;o<a.length;++o)a[o]>t&&(t=a[o]);return t},sc=function(a,t,o){var c=t/8|0;return(a[c]|a[c+1]<<8)>>(7&t)&o},M3=function(a,t){var o=t/8|0;return(a[o]|a[o+1]<<8|a[o+2]<<16)>>(7&t)},d7=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],oc=function(a,t,o){var c=new Error(t||d7[a]);if(c.code=a,Error.captureStackTrace&&Error.captureStackTrace(c,oc),!o)throw c;return c},h7=new tu(0),f7=typeof TextDecoder<"u"&&new TextDecoder;try{f7.decode(h7,{stream:!0})}catch{}const p7={gzip_data:"gzip"};class xu extends Error{constructor(t){super(t),this.name="MRTError"}}const m7={0:"uint32",1:"uint32",2:"uint16",3:"uint8"},UI={uint32:1,uint16:2,uint8:4},g7={uint32:Uint32Array,uint16:Uint16Array,uint8:Uint8Array};let A3;class r2{constructor(t=5){this.x=NaN,this.y=NaN,this.z=NaN,this.layers={},this._cacheSize=t}getLayer(t){const o=this.layers[t];if(!o)throw new xu(`Layer '${t}' not found`);return o}getHeaderLength(t){const o=new Uint8Array(t),c=new DataView(t);if(o[0]!==13)throw new xu("File is not a valid MRT.");return c.getUint32(1,!0)}parseHeader(t){const o=new Uint8Array(t),c=this.getHeaderLength(t);if(o.length<c)throw new xu(`Expected header with length >= ${c} but got buffer of length ${o.length}`);const h=function(_,y){return _.readFields(KB,{headerLength:0,x:0,y:0,z:0,layers:[]},void 0)}(new A3(o.subarray(0,c)));if(!isNaN(this.x)&&(this.x!==h.x||this.y!==h.y||this.z!==h.z))throw new xu(`Invalid attempt to parse header ${h.z}/${h.x}/${h.y} for tile ${this.z}/${this.x}/${this.y}`);this.x=h.x,this.y=h.y,this.z=h.z;for(const _ of h.layers)this.layers[_.name]=new jI(_,{cacheSize:this._cacheSize});return this}createDecodingTask(t){const o=[],c=this.getLayer(t.layerName);for(let h of t.blockIndices){const _=c.dataIndex[h],y=_.firstByte-t.firstByte,C=_.lastByte-t.firstByte;if(c._blocksInProgress.has(h))continue;const R={layerName:c.name,firstByte:y,lastByte:C,pixelFormat:c.pixelFormat,blockIndex:h,blockShape:[_.bands.length].concat(c.bandShape),buffer:c.buffer,codec:_.codec.codec,filters:_.filters.map(L=>L.filter)};c._blocksInProgress.add(h),o.push(R)}return new GI(o,()=>{o.forEach(h=>c._blocksInProgress.delete(h.blockIndex))},(h,_)=>{if(o.forEach(y=>c._blocksInProgress.delete(y.blockIndex)),h)throw h;_.forEach(y=>{this.getLayer(y.layerName).processDecodedData(y)})})}}class jI{constructor({version:t,name:o,units:c,tileSize:h,pixelFormat:_,buffer:y,dataIndex:C},R){if(this.version=t,this.version!==1)throw new xu(`Cannot parse raster layer encoded with MRT version ${t}`);this.name=o,this.units=c,this.tileSize=h,this.buffer=y,this.pixelFormat=m7[_],this.dataIndex=C,this.bandShape=[h+2*y,h+2*y,UI[this.pixelFormat]],this._decodedBlocks=new t2(R?R.cacheSize:5),this._blocksInProgress=new Set}get dimension(){return UI[this.pixelFormat]}get cacheSize(){return this._decodedBlocks.capacity}getBandList(){return this.dataIndex.map(({bands:t})=>t).flat()}processDecodedData(t){const o=t.blockIndex.toString();this._decodedBlocks.get(o)||this._decodedBlocks.put(o,t.data)}getBlockForBand(t){let o=0;switch(typeof t){case"string":for(const[c,h]of this.dataIndex.entries()){for(const[_,y]of h.bands.entries())if(y===t)return{bandIndex:o+_,blockIndex:c,blockBandIndex:_};o+=h.bands.length}break;case"number":for(const[c,h]of this.dataIndex.entries()){if(t>=o&&t<o+h.bands.length)return{bandIndex:t,blockIndex:c,blockBandIndex:t-o};o+=h.bands.length}break;default:throw new xu(`Invalid band \`${JSON.stringify(t)}\`. Expected string or integer.`)}return{blockIndex:-1,blockBandIndex:-1}}getDataRange(t){let o=1/0,c=-1/0;const h=[],_=new Set;for(const y of t){const{blockIndex:C}=this.getBlockForBand(y);if(C<0)throw new xu(`Invalid band: ${JSON.stringify(y)}`);const R=this.dataIndex[C];h.includes(C)||h.push(C),_.add(C),o=Math.min(o,R.firstByte),c=Math.max(c,R.lastByte)}if(_.size>this.cacheSize)throw new xu(`Number of blocks to decode (${_.size}) exceeds cache size (${this.cacheSize}).`);return{layerName:this.name,firstByte:o,lastByte:c,blockIndices:h}}hasBand(t){const{blockIndex:o}=this.getBlockForBand(t);return o>=0}hasDataForBand(t){const{blockIndex:o}=this.getBlockForBand(t);return o>=0&&!!this._decodedBlocks.get(o.toString())}getBandView(t){const{blockIndex:o,blockBandIndex:c}=this.getBlockForBand(t);if(o<0)throw new xu(`Band not found: ${JSON.stringify(t)}`);const h=this._decodedBlocks.get(o.toString());if(!h)throw new xu(`Data for band ${JSON.stringify(t)} of layer "${this.name}" not decoded.`);const _=this.dataIndex[o],y=this.bandShape.reduce((L,V)=>L*V,1),C=c*y,R=h.subarray(C,C+y);return{data:R,bytes:new Uint8Array(R.buffer).subarray(R.byteOffset,R.byteOffset+R.byteLength),tileSize:this.tileSize,buffer:this.buffer,pixelFormat:this.pixelFormat,dimension:this.dimension,offset:_.offset,scale:_.scale}}}r2.setPbf=function(a){A3=a};class GI{constructor(t,o,c){this.tasks=t,this._onCancel=o,this._onComplete=c,this._finalized=!1}cancel(){this._finalized||(this._onCancel(),this._finalized=!0)}complete(t,o){this._finalized||(this._onComplete(t,o),this._finalized=!0)}}function bp(a,t){const o=a.json.bufferViews[t.bufferView],c=C1[t.componentType];return new c(a.buffers[o.buffer],(t.byteOffset||0)+(o.byteOffset||0),t.count*(o.byteStride&&o.byteStride!==x_[t.type]*c.BYTES_PER_ELEMENT?o.byteStride/c.BYTES_PER_ELEMENT:x_[t.type]))}function R3(a,t,o,c){const h=C1[t.componentType],_=function(V){switch(V){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:return 1}}(h),y=a.json.bufferViews[t.bufferView],C=y.byteStride?y.byteStride/h.BYTES_PER_ELEMENT:x_[t.type],R=o.float32,L=R.length/o.capacity;for(let V=0,$=0;V<t.count*C;V+=C,$+=L)for(let U=0;U<L;U++)R[$+U]=c[V+U]*_;o._trim()}function _7(a,t,o){const c=a.indices,h=a.attributes,_={};_.indexArray=new Ho;const y=t.json.accessors[c],C=y.count/3;_.indexArray.reserve(C);const R=bp(t,y);for(let U=0;U<C;U++)_.indexArray.emplaceBack(R[3*U],R[3*U+1],R[3*U+2]);_.indexArray._trim(),_.vertexArray=new _u;const L=t.json.accessors[h.POSITION];_.vertexArray.reserve(L.count);const V=bp(t,L);for(let U=0;U<L.count;U++)_.vertexArray.emplaceBack(V[3*U],V[3*U+1],V[3*U+2]);if(_.vertexArray._trim(),_.aabb=new Fi(L.min,L.max),_.centroid=function(U,X){const ee=[0,0,0],de=U.length;if(de>0){for(let be=0;be<de;be++){const Ie=3*U[be];ee[0]+=X[Ie],ee[1]+=X[Ie+1],ee[2]+=X[Ie+2]}ee[0]/=de,ee[1]/=de,ee[2]/=de}return ee}(R,V),h.COLOR_0!==void 0){const U=t.json.accessors[h.COLOR_0],X=x_[U.type],ee=bp(t,U);_.colorArray=X===3?new _u:new $o,_.colorArray.resize(U.count),R3(t,U,_.colorArray,ee)}if(h.NORMAL!==void 0){_.normalArray=new _u;const U=t.json.accessors[h.NORMAL];_.normalArray.resize(U.count);const X=bp(t,U);R3(t,U,_.normalArray,X)}if(h.TEXCOORD_0!==void 0&&o.length>0){_.texcoordArray=new Kd;const U=t.json.accessors[h.TEXCOORD_0];_.texcoordArray.resize(U.count);const X=bp(t,U);R3(t,U,_.texcoordArray,X)}if(h._FEATURE_ID_RGBA4444!==void 0){const U=t.json.accessors[h._FEATURE_ID_RGBA4444];t.json.extensionsUsed&&t.json.extensionsUsed.includes("EXT_meshopt_compression")&&(_.featureData=bp(t,U))}h._FEATURE_RGBA4444!==void 0&&(_.featureData=new Uint32Array(bp(t,t.json.accessors[h._FEATURE_RGBA4444]).buffer));const $=a.material;return _.material=function(U,X){const{emissiveFactor:ee=[0,0,0],alphaMode:de="OPAQUE",alphaCutoff:be=.5,normalTexture:Ie,occlusionTexture:Fe,emissiveTexture:Be,doubleSided:pe}=U,{baseColorFactor:De=[1,1,1,1],metallicFactor:He=1,roughnessFactor:Ze=1,baseColorTexture:xt,metallicRoughnessTexture:ht}=U.pbrMetallicRoughness||{},St=Fe?X[Fe.index]:void 0;if(Fe&&Fe.extensions&&Fe.extensions.KHR_texture_transform&&St){const Rt=Fe.extensions.KHR_texture_transform;St.offsetScale=[Rt.offset[0],Rt.offset[1],Rt.scale[0],Rt.scale[1]]}return{pbrMetallicRoughness:{baseColorFactor:new Bi(...De),metallicFactor:He,roughnessFactor:Ze,baseColorTexture:xt?X[xt.index]:void 0,metallicRoughnessTexture:ht?X[ht.index]:void 0},doubleSided:pe,emissiveFactor:new Bi(...ee),alphaMode:de,alphaCutoff:be,normalTexture:Ie?X[Ie.index]:void 0,occlusionTexture:St,emissionTexture:Be?X[Be.index]:void 0,defined:U.defined===void 0}}($!==void 0?t.json.materials[$]:{defined:!1},o),_}function qI(a,t,o){const{matrix:c,rotation:h,translation:_,scale:y,mesh:C,extras:R,children:L}=a,V={};if(V.matrix=c||function($,U,X,ee){var de=U[0],be=U[1],Ie=U[2],Fe=U[3],Be=de+de,pe=be+be,De=Ie+Ie,He=de*Be,Ze=de*pe,xt=de*De,ht=be*pe,St=be*De,Rt=Ie*De,Yt=Fe*Be,Tn=Fe*pe,hn=Fe*De,Cn=ee[0],In=ee[1],Jt=ee[2];return $[0]=(1-(ht+Rt))*Cn,$[1]=(Ze+hn)*Cn,$[2]=(xt-Tn)*Cn,$[3]=0,$[4]=(Ze-hn)*In,$[5]=(1-(He+Rt))*In,$[6]=(St+Yt)*In,$[7]=0,$[8]=(xt+Tn)*Jt,$[9]=(St-Yt)*Jt,$[10]=(1-(He+ht))*Jt,$[11]=0,$[12]=X[0],$[13]=X[1],$[14]=X[2],$[15]=1,$}([],h||[0,0,0,1],_||[0,0,0],y||[1,1,1]),C!==void 0){V.meshes=o[C];const $=V.anchor=[0,0];for(const U of V.meshes){const{min:X,max:ee}=U.aabb;$[0]+=X[0]+ee[0],$[1]+=X[1]+ee[1]}$[0]=Math.floor($[0]/V.meshes.length/2),$[1]=Math.floor($[1]/V.meshes.length/2)}if(R&&(R.id&&(V.id=R.id),R.lights&&(V.lights=function($){if(!$.length)return[];const U=function(Ie){const Fe=atob(Ie),Be=new Uint8Array(Fe.length);for(let pe=0;pe<Fe.length;pe++)Be[pe]=Fe.codePointAt(pe);return Be}($),X=[],ee=U.length/24,de=new Uint16Array(U.buffer),be=new Float32Array(U.buffer);for(let Ie=0;Ie<ee;Ie++){const Fe=de[2*Ie*6]/30,Be=de[2*Ie*6+1]/30,pe=de[2*Ie*6+10]/100,De=be[6*Ie+1],He=be[6*Ie+2],Ze=be[6*Ie+3],xt=be[6*Ie+4],ht=Ze-De,St=xt-He,Rt=Math.hypot(ht,St);X.push({pos:[De+.5*ht,He+.5*St,Be],normal:[St/Rt,-ht/Rt,0],width:Rt,height:Fe,depth:pe,points:[De,He,Ze,xt]})}return X}(R.lights))),L){const $=[];for(const U of L)$.push(qI(t.json.nodes[U],t,o));V.children=$}return V}function v7(a){if(a.vertices.length===0||a.indices.length===0)return null;const t=new Ow(a.vertices,a.indices,8,256),[o,c]=[t.min.clone(),t.max.clone()];return{vertices:a.vertices,indices:a.indices,grid:t,min:o,max:c}}function y7(a){if(!a.extras||!a.extras.ground)return null;const t=a.extras.ground;if(!t||!Array.isArray(t)||t.length===0)return null;const o=t[0];if(!o||!Array.isArray(o)||o.length===0)return null;const c=[];for(const y of o){if(!Array.isArray(y)||y.length!==2)continue;const C=y[0],R=y[1];typeof C=="number"&&typeof R=="number"&&c.push(new Rn(C,R))}if(c.length<3)return null;c.length>1&&c[c.length-1].equals(c[0])&&c.pop();let h=0;for(let y=0;y<c.length;y++){const C=c[y],R=c[(y+1)%c.length],L=c[(y+2)%c.length];h+=(C.x-R.x)*(L.y-R.y)-(L.x-R.x)*(C.y-R.y)}h>0&&c.reverse();const _=u_(c.flatMap(y=>[y.x,y.y]),[]);return _.length===0?null:{vertices:c,indices:_}}function b7(a,t){const o=[],c=[];let h=0;const _=[];for(const y of a){h=o.length;const C=y.vertexArray.float32,R=y.indexArray.uint16;for(let L=0;L<y.vertexArray.length;L++)_[0]=C[3*L+0],_[1]=C[3*L+1],_[2]=C[3*L+2],Lt(_,_,t),o.push(new Rn(_[0],_[1]));for(let L=0;L<3*y.indexArray.length;L++)c.push(R[L]+h)}if(c.length%3!=0)return null;for(let y=0;y<c.length;y+=3){const C=o[c[y+0]],R=o[c[y+1]],L=o[c[y+2]];(C.x-R.x)*(L.y-R.y)-(L.x-R.x)*(C.y-R.y)>0&&([c[y+1],c[y+2]]=[c[y+2],c[y+1]])}return{vertices:o,indices:c}}function WI(a){const t=function(R,L){const V=[],$=WebGL2RenderingContext;if(R.json.textures)for(const U of R.json.textures){const X={magFilter:$.LINEAR,minFilter:$.NEAREST,wrapS:$.REPEAT,wrapT:$.REPEAT};U.sampler!==void 0&&Object.assign(X,R.json.samplers[U.sampler]),V.push({image:L[U.source],sampler:X,uploaded:!1})}return V}(a,a.images),o=function(R,L){const V=[];for(const $ of R.json.meshes){const U=[];for(const X of $.primitives)U.push(_7(X,R,L));V.push(U)}return V}(a,t),{scenes:c,scene:h,nodes:_}=a.json,y=c?c[h||0].nodes:_,C=[];for(const R of y)C.push(qI(_[R],a,o));return function(R,L,V){const $={},U=new Set;for(let X=0;X<R.length;X++){const ee=V[L[X]];if(!ee.extras)continue;const de=ee.extras["mapbox:footprint:version"],be=ee.extras["mapbox:footprint:id"];(de||be)&&U.add(X),de==="1.0.0"&&be&&($[be]=X)}for(let X=0;X<R.length;X++){if(U.has(X))continue;const ee=R[X],de=V[L[X]];if(!de.extras)continue;let be=null;ee.id in $&&(be=b7(R[$[ee.id]].meshes,ee.matrix)),be||(be=y7(de)),be&&(ee.footprint=v7(be))}if(U.size>0){const X=Array.from(U.values()).sort((ee,de)=>ee-de);for(let ee=X.length-1;ee>=0;ee--)R.splice(X[ee],1)}}(C,y,a.json.nodes),C}function x7(a){a.heightmap=new Float32Array(4096),a.heightmap.fill(-1);const t=a.vertexArray.float32,o=a.aabb.min[0]-1,c=a.aabb.min[1]-1,h=vp/(a.aabb.max[0]-o+2),_=vp/(a.aabb.max[1]-c+2);for(let y=0;y<t.length;y+=3){const C=t[y+2],R=(t[y+0]-o)*h|0,L=(t[y+1]-c)*_|0;C>a.heightmap[L*vp+R]&&(a.heightmap[L*vp+R]=C)}}function w7(a,t){const o={};o.indexArray=new Ho,o.indexArray.reserve(4*a.length),o.vertexArray=new _u,o.vertexArray.reserve(10*a.length),o.colorArray=new $o,o.vertexArray.reserve(10*a.length);let c=0;for(const y of a){const C=Math.min(10,Math.max(4,1.3*y.height))*t,R=[-y.normal[1],y.normal[0],0],L=Math.min(.29,.1*y.width/y.depth),V=y.width-2*y.depth*t*(L+.01),$=We([],y.pos,R,V/2),U=We([],y.pos,R,-V/2),X=[$[0],$[1],$[2]+y.height],ee=[U[0],U[1],U[2]+y.height],de=We([],y.normal,R,L);Ve(de,de,C);const be=We([],y.normal,R,-L);Ve(be,be,C),Pe(de,$,de),Pe(be,U,be),$[2]+=.1,U[2]+=.1,o.vertexArray.emplaceBack(de[0],de[1],de[2]),o.vertexArray.emplaceBack(be[0],be[1],be[2]),o.vertexArray.emplaceBack($[0],$[1],$[2]),o.vertexArray.emplaceBack(U[0],U[1],U[2]),o.vertexArray.emplaceBack(X[0],X[1],X[2]),o.vertexArray.emplaceBack(ee[0],ee[1],ee[2]),o.vertexArray.emplaceBack($[0],$[1],$[2]),o.vertexArray.emplaceBack(U[0],U[1],U[2]),o.vertexArray.emplaceBack(de[0],de[1],de[2]),o.vertexArray.emplaceBack(be[0],be[1],be[2]);const Ie=V/C/2;o.colorArray.emplaceBack(-Ie-L,-1,Ie,.8),o.colorArray.emplaceBack(Ie+L,-1,Ie,.8),o.colorArray.emplaceBack(-Ie,0,Ie,1.3),o.colorArray.emplaceBack(Ie,0,Ie,1.3),o.colorArray.emplaceBack(Ie+L,-.8,Ie,.7),o.colorArray.emplaceBack(Ie+L,-.8,Ie,.7),o.colorArray.emplaceBack(0,0,Ie,1.3),o.colorArray.emplaceBack(0,0,Ie,1.3),o.colorArray.emplaceBack(Ie+L,-1.2,Ie,.8),o.colorArray.emplaceBack(Ie+L,-1.2,Ie,.8),o.indexArray.emplaceBack(6+c,4+c,8+c),o.indexArray.emplaceBack(7+c,9+c,5+c),o.indexArray.emplaceBack(0+c,1+c,2+c),o.indexArray.emplaceBack(1+c,3+c,2+c),c+=10}const h={defined:!0};h.emissiveFactor=Bi.black;const _={};return _.baseColorFactor=Bi.white,h.pbrMetallicRoughness=_,o.material=h,o.aabb=new Fi([1/0,1/0,1/0],[-1/0,-1/0,-1/0]),o}r2.performDecoding=function(a,t){const o=new Uint8Array(a);return Promise.all(t.tasks.map(c=>{const{layerName:h,firstByte:_,lastByte:y,pixelFormat:C,blockShape:R,blockIndex:L,filters:V,codec:$}=c,U=o.subarray(_,y+1),X=new Uint32Array(R[0]*R[1]*R[2]);let ee;if($!=="gzip_data")throw new xu(`Unhandled codec: ${$}`);return ee=function(de,be){if(!globalThis.DecompressionStream&&be==="gzip_data")return Promise.resolve(((pe=function(Ze){Ze[0]==31&&Ze[1]==139&&Ze[2]==8||oc(6,"invalid gzip data");var xt=Ze[3],ht=10;4&xt&&(ht+=2+(Ze[10]|Ze[11]<<8));for(var St=(xt>>3&1)+(xt>>4&1);St>0;St-=!Ze[ht++]);return ht+(2&xt)}(Be=de))+8>Be.length&&oc(6,"invalid gzip data"),function(Ze,xt,ht,St){var Rt=Ze.length;if(!Rt||xt.f&&!xt.l)return ht||new tu(0);var Yt=!ht,Tn=Yt||xt.i!=2,hn=xt.i;Yt&&(ht=new tu(3*Rt));var Cn,In,Jt=function(Ks){var Cs=ht.length;if(Ks>Cs){var us=new tu(Math.max(2*Cs,Ks));us.set(ht),ht=us}},yn=xt.f||0,Wt=xt.p||0,Xt=xt.b||0,Ln=xt.l,Dn=xt.d,Cr=xt.m,lr=xt.n,Hn=8*Rt;do{if(!Ln){yn=sc(Ze,Wt,1);var An=sc(Ze,Wt+1,3);if(Wt+=3,!An){var qr=Ze[(Ge=4+((Wt+7)/8|0))-4]|Ze[Ge-3]<<8,ar=Ge+qr;if(ar>Rt){hn&&oc(0);break}Tn&&Jt(Xt+qr),ht.set(Ze.subarray(Ge,ar),Xt),xt.b=Xt+=qr,xt.p=Wt=8*ar,xt.f=yn;continue}if(An==1)Ln=u7,Dn=c7,Cr=9,lr=5;else if(An==2){var ur=sc(Ze,Wt,31)+257,Br=sc(Ze,Wt+10,15)+4,Qr=ur+sc(Ze,Wt+5,31)+1;Wt+=14;for(var Jr=new tu(Qr),di=new tu(19),ni=0;ni<Br;++ni)di[o7[ni]]=sc(Ze,Wt+3*ni,7);Wt+=3*Br;var hi=k3(di),Gi=(1<<hi)-1,gs=F_(di,hi);for(ni=0;ni<Qr;){var Ge,Xe=gs[sc(Ze,Wt,Gi)];if(Wt+=15&Xe,(Ge=Xe>>4)<16)Jr[ni++]=Ge;else{var en=0,Fn=0;for(Ge==16?(Fn=3+sc(Ze,Wt,3),Wt+=2,en=Jr[ni-1]):Ge==17?(Fn=3+sc(Ze,Wt,7),Wt+=3):Ge==18&&(Fn=11+sc(Ze,Wt,127),Wt+=7);Fn--;)Jr[ni++]=en}}var jn=Jr.subarray(0,ur),$n=Jr.subarray(ur);Cr=k3(jn),lr=k3($n),Ln=F_(jn,Cr),Dn=F_($n,lr)}else oc(1);if(Wt>Hn){hn&&oc(0);break}}Tn&&Jt(Xt+131072);for(var sr=(1<<Cr)-1,zr=(1<<lr)-1,wi=Wt;;wi=Wt){var Si=(en=Ln[M3(Ze,Wt)&sr])>>4;if((Wt+=15&en)>Hn){hn&&oc(0);break}if(en||oc(2),Si<256)ht[Xt++]=Si;else{if(Si==256){wi=Wt,Ln=null;break}var ri=Si-254;Si>264&&(ri=sc(Ze,Wt,(1<<(Ci=zI[ni=Si-257]))-1)+VI[ni],Wt+=Ci);var Zi=Dn[M3(Ze,Wt)&zr],ls=Zi>>4;if(Zi||oc(3),Wt+=15&Zi,$n=l7[ls],ls>3){var Ci=NI[ls];$n+=M3(Ze,Wt)&(1<<Ci)-1,Wt+=Ci}if(Wt>Hn){hn&&oc(0);break}Tn&&Jt(Xt+131072);var Fs=Xt+ri;if(Xt<$n){var _s=0-$n,qi=Math.min($n,Fs);for(_s+Xt<0&&oc(3);Xt<qi;++Xt)ht[Xt]=(void 0)[_s+Xt]}for(;Xt<Fs;++Xt)ht[Xt]=ht[Xt-$n]}}xt.l=Ln,xt.p=wi,xt.b=Xt,xt.f=yn,Ln&&(yn=1,xt.m=Cr,xt.d=Dn,xt.n=lr)}while(!yn);return Xt!=ht.length&&Yt?(Cn=ht,((In=Xt)==null||In>Cn.length)&&(In=Cn.length),new tu(Cn.subarray(0,In))):ht.subarray(0,Xt)}(Be.subarray(pe,-8),{i:2},new tu(((Ie=Be)[(Fe=Ie.length)-4]|Ie[Fe-3]<<8|Ie[Fe-2]<<16|Ie[Fe-1]<<24)>>>0))));var Ie,Fe,Be,pe;const De=p7[be];if(!De)throw new Error(`Unhandled codec: ${be}`);const He=new globalThis.DecompressionStream(De);return new Response(new Blob([de]).stream().pipeThrough(He)).arrayBuffer().then(Ze=>new Uint8Array(Ze))}(U,$).then(de=>(function(be,Ie){be.readFields(e7,Ie)}(new A3(de),X),new g7[C](X.buffer))),ee.then(de=>{for(let be=V.length-1;be>=0;be--)switch(V[be]){case"delta_filter":n7(de,R);break;case"zigzag_filter":r7(de);break;case"bitshuffle_filter":i7(de,C);break;default:throw new xu(`Unhandled filter "${V[be]}"`)}return{layerName:h,blockIndex:L,data:de}}).catch(de=>{throw de})}))},Qn(GI,"MRTDecodingBatch",{omit:["_onCancel","_onComplete"]}),Qn(r2,"MapboxRasterTile"),Qn(jI,"MapboxRasterLayer",{omit:["_blocksInProgress"]});class KI{constructor(t){this._stringToNumber={},this._numberToString=[];for(let o=0;o<t.length;o++){const c=t[o];this._stringToNumber[c]=o,this._numberToString[o]=c}}encode(t){return this._stringToNumber[t]}decode(t){return this._numberToString[t]}}const S7=["id","tile","layer","source","sourceLayer","state"];class rg{constructor(t,o,c,h,_){this.type="Feature",this._vectorTileFeature=t,this._z=o,this._x=c,this._y=h,this.properties=t.properties,this.id=_}clone(){const t=new rg(this._vectorTileFeature,this._z,this._x,this._y,this.id);return this.state&&(t.state=Object.assign({},this.state)),this.layer&&(t.layer=Object.assign({},this.layer)),this.source&&(t.source=this.source),this.sourceLayer&&(t.sourceLayer=this.sourceLayer),t}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._x,this._y,this._z).geometry),this._geometry}set geometry(t){this._geometry=t}toJSON(){const t={type:"Feature",state:void 0,geometry:this.geometry,properties:this.properties};for(const o of S7)this[o]!==void 0&&(t[o]=this[o]);return t}}class YI{constructor(t,o){this.tileID=t,this.x=t.canonical.x,this.y=t.canonical.y,this.z=t.canonical.z,this.grid=new Zu(Pn,16,0),this.featureIndexArray=new t1,this.promoteId=o,this.is3DTile=!1,this.serializedLayersCache=new Map}insert(t,o,c,h,_,y=0,C=0){const R=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(c,h,_,y);const L=this.grid;for(let V=0;V<o.length;V++){const $=o[V],U=[1/0,1/0,-1/0,-1/0];for(let X=0;X<$.length;X++){const ee=$[X];U[0]=Math.min(U[0],ee.x),U[1]=Math.min(U[1],ee.y),U[2]=Math.max(U[2],ee.x),U[3]=Math.max(U[3],ee.y)}C!==0&&(U[0]-=C,U[1]-=C,U[2]+=C,U[3]+=C),U[0]<Pn&&U[1]<Pn&&U[2]>=0&&U[3]>=0&&L.insert(R,U[0],U[1],U[2],U[3])}}loadVTLayers(){if(!this.vtLayers){this.vtLayers=new ii.VectorTile(new T1(this.rawTileData)).layers,this.sourceLayerCoder=new KI(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]),this.vtFeatures={};for(const t in this.vtLayers)this.vtFeatures[t]=[]}return this.vtLayers}query(t,o){const{tilespaceGeometry:c,transform:h,tileTransform:_,pixelPosMatrix:y,availableImages:C,worldview:R}=o;this.loadVTLayers(),this.serializedLayersCache.clear();const L=c.bufferedTilespaceBounds,V=this.grid.query(L.min.x,L.min.y,L.max.x,L.max.y,(ee,de,be,Ie)=>Xh(c.bufferedTilespaceGeometry,ee,de,be,Ie));V.sort(C7);let $=null;h.elevation&&V.length>0&&($=Qm.create(h.elevation,this.tileID));const U={};let X;for(let ee=0;ee<V.length;ee++){const de=V[ee];if(de===X)continue;X=de;const be=this.featureIndexArray.get(de);let Ie=null;this.is3DTile?this.loadMatchingModelFeature(U,be,t,c,h,R):this.loadMatchingFeature(U,be,t,C,R,(Fe,Be,pe,De=0)=>(Ie||(Ie=tr(Fe,this.tileID.canonical,_)),Be.queryIntersectsFeature(c,Fe,pe,Ie,this.z,h,y,$,De)))}return U}loadMatchingFeature(t,o,c,h,_,y){const{featureIndex:C,bucketIndex:R,sourceLayerIndex:L,layoutVertexArrayOffset:V}=o,$=this.bucketLayerIDs[R],U=c.layers,X=Object.keys(U);if(X.length&&!Lr(X,$))return;const ee=c.sourceCache,de=this.sourceLayerCoder.decode(L),be=this.vtLayers[de].feature(C),Ie=this.getId(be,de);for(let Fe=0;Fe<$.length;Fe++){const Be=$[Fe];if(!U[Be])continue;const{styleLayer:pe,targets:De}=U[Be];let He={};Ie!==void 0&&(He=ee.getFeatureState(pe.sourceLayer,Ie));const Ze=!y||y(be,pe,He,V);if(!Ze)continue;const xt=new rg(be,this.z,this.x,this.y,Ie);xt.tile=this.tileID.canonical,xt.state=He;let ht=this.serializedLayersCache.get(Be);ht||(ht=pe.serialize(),ht.id=Be,this.serializedLayersCache.set(Be,ht)),xt.source=ht.source,xt.sourceLayer=ht["source-layer"],xt.layer=_t({},ht),xt.layer.paint=ZI(ht.paint,pe.paint,be,He,h),xt.layer.layout=ZI(ht.layout,pe.layout,be,He,h);let St=!1;for(const Rt of De){this.updateFeatureProperties(xt,Rt);const{filter:Yt}=Rt;if(Yt){if(be.properties=xt.properties,Yt.needGeometry){const Tn=Zn(be,!0);if(!Yt.filter(new Qi(this.tileID.overscaledZ,{worldview:_}),Tn,this.tileID.canonical))continue}else if(!Yt.filter(new Qi(this.tileID.overscaledZ,{worldview:_}),be))continue}St=!0,Rt.targetId&&this.addFeatureVariant(xt,Rt)}St&&this.appendToResult(t,Be,C,xt,Ze)}}loadMatchingModelFeature(t,o,c,h,_,y){const{featureIndex:C,bucketIndex:R}=o,L=this.bucketLayerIDs[R],V=c.layers,$=Object.keys(V);if(!$.length||Lr($,L))for(let U=0;U<L.length;U++){const X=L[U],{styleLayer:ee,targets:de}=V[X];if(ee.type!=="model")continue;const be=h.tile,Ie=be.getBucket(ee);if(!(Ie&&Ie instanceof Z1))continue;const Fe=SB(Ie,C,h,_);if(!Fe)continue;const{z:Be,x:pe,y:De}=be.tileID.canonical,{feature:He,intersectionZ:Ze,position:xt}=Fe;let ht={};He.id!==void 0&&(ht=c.sourceCache.getFeatureState(ee.sourceLayer,He.id));const St=new rg({},Be,pe,De,He.id);St.tile=this.tileID.canonical,St.state=ht,St.properties=He.properties,St.geometry={type:"Point",coordinates:[xt.lng,xt.lat]};let Rt=this.serializedLayersCache.get(X);Rt||(Rt=ee.serialize(),Rt.id=X,this.serializedLayersCache.set(X,Rt)),St.source=Rt.source,St.sourceLayer=Rt["source-layer"],St.layer=_t({},Rt);let Yt=!1;for(const Tn of de){this.updateFeatureProperties(St,Tn);const{filter:hn}=Tn;if(hn){if(He.properties=St.properties,hn.needGeometry){if(!hn.filter(new Qi(this.tileID.overscaledZ,{worldview:y}),He,this.tileID.canonical))continue}else if(!hn.filter(new Qi(this.tileID.overscaledZ,{worldview:y}),He))continue}Yt=!0,Tn.targetId&&this.addFeatureVariant(St,Tn)}Yt&&this.appendToResult(t,X,C,St,Ze)}}updateFeatureProperties(t,o,c){if(o.properties){const h={};for(const _ in o.properties){const y=o.properties[_].evaluate({zoom:this.z},t._vectorTileFeature,t.state,t.tile,c);y!=null&&(h[_]=y)}t.properties=h}}addFeatureVariant(t,o,c){const h={target:o.target,namespace:o.namespace,uniqueFeatureID:o.uniqueFeatureID};o.properties&&(h.properties=t.properties),t.variants=t.variants||{},t.variants[o.targetId]=t.variants[o.targetId]||[],t.variants[o.targetId].push(h)}appendToResult(t,o,c,h,_){let y=t[o];y===void 0&&(y=t[o]=[]),y.push({featureIndex:c,feature:h,intersectionZ:_})}lookupSymbolFeatures(t,o,c,h,_,y){const C={};this.loadVTLayers();for(const R of t)this.loadMatchingFeature(C,{bucketIndex:o,sourceLayerIndex:c,featureIndex:R,layoutVertexArrayOffset:0},h,_,y);return C}loadFeature(t){const{featureIndex:o,sourceLayerIndex:c}=t;this.loadVTLayers();const h=this.sourceLayerCoder.decode(c),_=this.vtFeatures[h];if(_[o])return _[o];const y=this.vtLayers[h].feature(o);return _[o]=y,y}hasLayer(t){for(const o of this.bucketLayerIDs)for(const c of o)if(t===c)return!0;return!1}getId(t,o){let c=t.id;if(this.promoteId){const h=Array.isArray(this.promoteId)||typeof this.promoteId!="object"?this.promoteId:this.promoteId[o];if(h!=null)if(Array.isArray(h)){if(!this.promoteIdExpression){const _=Yu(h);if(_.result!=="success"){const y=_.value.map(C=>`${C.key}: ${C.message}`).join(", ");return void kn(`Failed to create expression for promoteId: ${y}`)}this.promoteIdExpression=_.value}this.promoteIdExpression._evaluator||(this.promoteIdExpression._evaluator=new Vc),c=this.promoteIdExpression.evaluate({zoom:0},t)}else c=t.properties[h];typeof c=="boolean"&&(c=Number(c))}return c}}function ZI(a,t,o,c,h){return Wn(a,(_,y)=>{const C=t instanceof Gd?t.get(y):null;return C&&C.evaluate?C.evaluate(o,c,void 0,h):C})}function C7(a,t){return t-a}Qn(YI,"FeatureIndex",{omit:["rawTileData","sourceLayerCoder"]});const XI=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class P3{static from(t){if(!(t instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[o,c]=new Uint8Array(t,0,2);if(o!==219)throw new Error("Data does not appear to be in a KDBush format.");const h=c>>4;if(h!==1)throw new Error(`Got v${h} data when expected v1.`);const _=XI[15&c];if(!_)throw new Error("Unrecognized array type.");const[y]=new Uint16Array(t,2,1),[C]=new Uint32Array(t,4,1);return new P3(C,y,_,t)}constructor(t,o=64,c=Float64Array,h){if(isNaN(t)||t<0)throw new Error(`Unpexpected numItems value: ${t}.`);this.numItems=+t,this.nodeSize=Math.min(Math.max(+o,2),65535),this.ArrayType=c,this.IndexArrayType=t<65536?Uint16Array:Uint32Array;const _=XI.indexOf(this.ArrayType),y=2*t*this.ArrayType.BYTES_PER_ELEMENT,C=t*this.IndexArrayType.BYTES_PER_ELEMENT,R=(8-C%8)%8;if(_<0)throw new Error(`Unexpected typed array class: ${c}.`);h&&h instanceof ArrayBuffer?(this.data=h,this.ids=new this.IndexArrayType(this.data,8,t),this.coords=new this.ArrayType(this.data,8+C+R,2*t),this._pos=2*t,this._finished=!0):(this.data=new ArrayBuffer(8+y+C+R),this.ids=new this.IndexArrayType(this.data,8,t),this.coords=new this.ArrayType(this.data,8+C+R,2*t),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+_]),new Uint16Array(this.data,2,1)[0]=o,new Uint32Array(this.data,4,1)[0]=t)}add(t,o){const c=this._pos>>1;return this.ids[c]=c,this.coords[this._pos++]=t,this.coords[this._pos++]=o,c}finish(){const t=this._pos>>1;if(t!==this.numItems)throw new Error(`Added ${t} items when expected ${this.numItems}.`);return L3(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(t,o,c,h){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:_,coords:y,nodeSize:C}=this,R=[0,_.length-1,0],L=[];for(;R.length;){const V=R.pop()||0,$=R.pop()||0,U=R.pop()||0;if($-U<=C){for(let be=U;be<=$;be++){const Ie=y[2*be],Fe=y[2*be+1];Ie>=t&&Ie<=c&&Fe>=o&&Fe<=h&&L.push(_[be])}continue}const X=U+$>>1,ee=y[2*X],de=y[2*X+1];ee>=t&&ee<=c&&de>=o&&de<=h&&L.push(_[X]),(V===0?t<=ee:o<=de)&&(R.push(U),R.push(X-1),R.push(1-V)),(V===0?c>=ee:h>=de)&&(R.push(X+1),R.push($),R.push(1-V))}return L}within(t,o,c){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:h,coords:_,nodeSize:y}=this,C=[0,h.length-1,0],R=[],L=c*c;for(;C.length;){const V=C.pop()||0,$=C.pop()||0,U=C.pop()||0;if($-U<=y){for(let be=U;be<=$;be++)QI(_[2*be],_[2*be+1],t,o)<=L&&R.push(h[be]);continue}const X=U+$>>1,ee=_[2*X],de=_[2*X+1];QI(ee,de,t,o)<=L&&R.push(h[X]),(V===0?t-c<=ee:o-c<=de)&&(C.push(U),C.push(X-1),C.push(1-V)),(V===0?t+c>=ee:o+c>=de)&&(C.push(X+1),C.push($),C.push(1-V))}return R}}function L3(a,t,o,c,h,_){if(h-c<=o)return;const y=c+h>>1;JI(a,t,y,c,h,_),L3(a,t,o,c,y-1,1-_),L3(a,t,o,y+1,h,1-_)}function JI(a,t,o,c,h,_){for(;h>c;){if(h-c>600){const L=h-c+1,V=o-c+1,$=Math.log(L),U=.5*Math.exp(2*$/3),X=.5*Math.sqrt($*U*(L-U)/L)*(V-L/2<0?-1:1);JI(a,t,o,Math.max(c,Math.floor(o-V*U/L+X)),Math.min(h,Math.floor(o+(L-V)*U/L+X)),_)}const y=t[2*o+_];let C=c,R=h;for(V_(a,t,c,o),t[2*h+_]>y&&V_(a,t,c,h);C<R;){for(V_(a,t,C,R),C++,R--;t[2*C+_]<y;)C++;for(;t[2*R+_]>y;)R--}t[2*c+_]===y?V_(a,t,c,R):(R++,V_(a,t,R,h)),R<=o&&(c=R+1),o<=R&&(h=R-1)}}function V_(a,t,o,c){O3(a,o,c),O3(t,2*o,2*c),O3(t,2*o+1,2*c+1)}function O3(a,t,o){const c=a[t];a[t]=a[o],a[o]=c}function QI(a,t,o,c){const h=a-o,_=t-c;return h*h+_*_}r.$=bo,r.A=na,r.B=Kl,r.C=Wd,r.D=jm,r.E=Ua,r.F=2,r.G=T_,r.H=_T,r.I=_a,r.J=mu,r.K=class extends K1{},r.L=Uu,r.M=Xl,r.N=Uf,r.O=Hf,r.P=Rn,r.Q=O0,r.R=Ad,r.S=bm,r.T=p3,r.U=Cm,r.V=K1,r.W=Dy,r.X=Yu,r.Y=am,r.Z=Ph,r._=Rh,r.a=function(a){return ko.API_CDN_URL_REGEX.test(a)},r.a$=Ft,r.a0=ja,r.a1=Em,r.a2=jf,r.a3=L0,r.a4=function(a){const t=a.value;let o=[];if(!t)return o;const c=mu(t);return c!=="string"?(o=o.concat([new K1(a.key,t,`string expected, "${c}" found`)]),o):(v3(t,!0)||(o=o.concat([new K1(a.key,t,`invalid url "${t}"`)])),o)},r.a5=Dt,r.a6=$y,r.a7=Vs,r.a8=Mn,r.a9=class{constructor(a){this.specification=a}possiblyEvaluate(a,t){return vi(a.expression.evaluate(t))}interpolate(a,t,o){return{x:Dr(a.x,t.x,o),y:Dr(a.y,t.y,o),z:Dr(a.z,t.z,o),azimuthal:Dr(a.azimuthal,t.azimuthal,o),polar:Dr(a.polar,t.polar,o)}}},r.aA=bt,r.aB=T,r.aC=bu,r.aD=rt,r.aE=qt,r.aF=function(a,t){const o={};for(let c=0;c<t.length;c++){const h=t[c];h in a&&(o[h]=a[h])}return o},r.aG=qe,r.aH=Qe,r.aI=class{constructor(a){this.entries={},this.scheduler=a}request(a,t,o,c){const h=this.entries[a]=this.entries[a]||{callbacks:[]};if(h.result){const[_,y]=h.result;return this.scheduler?this.scheduler.add(()=>{c(_,y)},t):c(_,y),()=>{}}return h.callbacks.push(c),h.cancel||(h.cancel=o((_,y)=>{h.result=[_,y];for(const C of h.callbacks)this.scheduler?this.scheduler.add(()=>{C(_,y)},t):C(_,y);setTimeout(()=>delete this.entries[a],3e3)})),()=>{h.result||(h.callbacks=h.callbacks.filter(_=>_!==c),h.callbacks.length||(h.cancel(),delete this.entries[a]))}}},r.aJ=function(a,t,o){const c=JSON.stringify(a.request);return a.data&&(this.deduped.entries[c]={result:[null,a.data]}),this.deduped.request(c,{type:"parseTile",isSymbolTile:a.isSymbolTile,zoom:a.tileZoom},h=>{const _=Rc(a.request,(y,C,R,L)=>{y?h(y):C&&h(null,{vectorTile:o?void 0:new ii.VectorTile(new T1(C)),rawData:C,cacheControl:R,expires:L})});return()=>{_.cancel(),h()}},t)},r.aK=function(a){eo++,eo>ka&&(a.getActor().send("enforceCacheSizeLimit",Ha),eo=0)},r.aL=function(a){return a<=1?1:Math.pow(2,Math.floor(Math.log(a)/Math.LN2))},r.aM=xa,r.aN=qT,r.aO=JT,r.aP=GT,r.aQ=function(a,t){const o=document.createElement("video");o.muted=!0,o.onloadstart=function(){t(null,o)};for(let c=0;c<a.length;c++){const h=document.createElement("source");zs(a[c])||(o.crossOrigin="Anonymous"),h.src=a[c],o.appendChild(h)}return{cancel:()=>{}}},r.aR=U1,r.aS=function(a){return fetch(a).then(t=>t.arrayBuffer()).then(t=>zE(t,0,a))},r.aT=WI,r.aU=class{constructor(a,t,o,c){this.id=a,this.position=t!=null?new ze(t[0],t[1]):new ze(0,0),this.orientation=o??[0,0,0],this.nodes=c,this.uploaded=!1,this.aabb=new Fi([1/0,1/0,1/0],[-1/0,-1/0,-1/0]),this.matrix=[]}_applyTransformations(a,t){if(G(a.matrix,t,a.matrix),a.meshes)for(const o of a.meshes){const c=Fi.applyTransformFast(o.aabb,a.matrix);this.aabb.encapsulate(c)}if(a.children)for(const o of a.children)this._applyTransformations(o,a.matrix)}computeBoundsAndApplyParent(){const a=N([]);for(const t of this.nodes)this._applyTransformations(t,a)}computeModelMatrix(a,t,o,c,h,_,y=!1){uI(this.matrix,this,a.transform,this.position,t,o,c,h,_,y)}upload(a){if(!this.uploaded){for(const t of this.nodes)b3(t,a);for(const t of this.nodes)Y1(t);this.uploaded=!0}}destroy(){for(const a of this.nodes)x3(a)}},r.aV=qn,r.aW=k_,r.aX=pt,r.aY=zt,r.aZ=$h,r.a_=Ho,r.aa=Qi,r.ab=qf,r.ac=kt,r.ad=Lt,r.ae=Ue,r.af=Tt,r.ag=Gd,r.ah=Jh,r.ai=Dr,r.aj=Pn,r.ak=kh,r.al=gi,r.am=Bi,r.an=class{constructor(a){this.specification=a}possiblyEvaluate(a,t){return function([o,c]){const h=vi([1,o,c]);return{x:h.x,y:h.y,z:h.z}}(a.expression.evaluate(t))}interpolate(a,t,o){return{x:Dr(a.x,t.x,o),y:Dr(a.y,t.y,o),z:Dr(a.z,t.z,o)}}},r.ao=function(a,t,o=0,c=!0){const h=new Rn(o,o),_=a.sub(h),y=t.add(h),C=[_,new Rn(y.x,_.y),y,new Rn(_.x,y.y)];return c&&C.push(_.clone()),C},r.ap=function(a,t){const o=[];for(let c=0;c<a.length;c++){const h=$t(c-1,-1,a.length-1),_=$t(c+1,-1,a.length-1),y=a[c],C=a[_],R=a[h].sub(y).unit(),L=C.sub(y).unit(),V=L.angleWithSep(R.x,R.y),$=R.add(L).unit().mult(-1*t/Math.sin(V/2));o.push(y.add($))}return o},r.aq=RT,r.ar=Xh,r.as=function(a,t,o=0){return Ne(((t.x-o)*a.scale-a.x)*Pn,(t.y*a.scale-a.y)*Pn,Vt(t.z,t.y))},r.at=nt,r.au=Mt,r.av=ws,r.aw=UE,r.ax=function(a){let t=1/0,o=1/0,c=-1/0,h=-1/0;for(const _ of a)t=Math.min(t,_.x),o=Math.min(o,_.y),c=Math.max(c,_.x),h=Math.max(h,_.y);return{min:new Rn(t,o),max:new Rn(c,h)}},r.ay=tt,r.az=G,r.b=function(a){return ko.API_FONTS_REGEX.test(a)},r.b$=function(a,t,o){o*=.5;var c=t[0],h=t[1],_=t[2],y=t[3],C=Math.sin(o),R=Math.cos(o);return a[0]=c*R+h*C,a[1]=h*R-c*C,a[2]=_*R+y*C,a[3]=y*R-_*C,a},r.b0=Lm,r.b1=$1,r.b2=function(){Qu.isLoading()||Qu.isLoaded()||Fh()!=="deferred"||Vy()},r.b3=V0,r.b4=Zn,r.b5=rg,r.b6=xi,r.b7=qw,r.b8=Lw,r.b9=tr,r.bA=function(a,t){const{x:o,y:c}=a.point,h=wC(o,c,a.worldSize/a._pixelsPerMercatorPixel,0,0);return G(h,h,Sw(sd(t)))},r.bB=A,r.bC=function(a){return a[0]=0,a[1]=0,a[2]=0,a},r.bD=function(a,t){return Math.hypot(t[0]-a[0],t[1]-a[1],t[2]-a[2])},r.bE=We,r.bF=gt,r.bG=Ct,r.bH=E_,r.bI=fl,r.bJ=e3,r.bK=function(a,t,o,c,h){const _=5*t+2;a.float32[_+0]=o,a.float32[_+1]=c,a.float32[_+2]=h},r.bL=V1,r.bM=w1,r.bN=Pa,r.bO=zo,r.bP=JC,r.bQ=iI,r.bR=rE,r.bS=iE,r.bT=Qw,r.bU=CT,r.bV=i3,r.bW=P3,r.bX=$t,r.bY=Ve,r.bZ=an,r.b_=pn,r.ba=ec,r.bb=np,r.bc=gC,r.bd=Us,r.be=u_,r.bf=d3,r.bg=function(a,t){const o=Jh(t.zoom);if(o===0)return sd(a);const c=d1(a),h=ww(c),_=rt(c.getWest())*t.worldSize,y=rt(c.getEast())*t.worldSize,C=Qe(c.getNorth())*t.worldSize,R=Qe(c.getSouth())*t.worldSize,L=[_,C,0],V=[y,C,0],$=[_,R,0],U=[y,R,0],X=q([],t.globeMatrix);return Lt(L,L,X),Lt(V,V,X),Lt($,$,X),Lt(U,U,X),h[0]=Zd(h[0],$,o),h[1]=Zd(h[1],U,o),h[2]=Zd(h[2],V,o),h[3]=Zd(h[3],L,o),Fi.fromPoints(h)},r.bh=f1,r.bi=q,r.bj=a_,r.bk=Zd,r.bl=Xf,r.bm=pN,r.bn=he,r.bo=ie,r.bp=r2,r.bq=T1,r.br=Rc,r.bs=function(a,t){const o=[];for(const c in a)c in t||o.push(c);return o},r.bt=je,r.bu=["type","source","source-layer","minzoom","maxzoom","filter","layout"],r.bv=Ri,r.bw=function(a){var t=new M(16);return t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t[4]=a[4],t[5]=a[5],t[6]=a[6],t[7]=a[7],t[8]=a[8],t[9]=a[9],t[10]=a[10],t[11]=a[11],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15],t},r.bx=N,r.by=re,r.bz=F,r.c=Th,r.c$=S1,r.c0=Vn,r.c1=os,r.c2=function(a,t){return a[0]=-t[0],a[1]=-t[1],a[2]=-t[2],a[3]=t[3],a},r.c3=ce,r.c4=function(a,t,o,c,h){var _,y=1/Math.tan(t/2);return a[0]=y/o,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=y,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[11]=-1,a[12]=0,a[13]=0,a[15]=0,h!=null&&h!==1/0?(a[10]=(h+c)*(_=1/(c-h)),a[14]=2*h*c*_):(a[10]=-1,a[14]=-2*c),a},r.c5=function(a,t,o,c,h,_,y){var C=1/(t-o),R=1/(c-h),L=1/(_-y);return a[0]=-2*C,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=-2*R,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=2*L,a[11]=0,a[12]=(t+o)*C,a[13]=(h+c)*R,a[14]=(y+_)*L,a[15]=1,a},r.c6=ut,r.c7=function(a,t,o){a[4*t+0]=o[0],a[4*t+1]=o[1],a[4*t+2]=o[2],a[4*t+3]=o[3]},r.c8=Nm,r.c9=op,r.cA=q1,r.cB=me,r.cC=QT,r.cD=function(a){const t=QT(a,!0);return A([],[t[0],t[1],t[4],t[5]])},r.cE=W,r.cF=as,r.cG=Y,r.cH=function(a){const{x:t,y:o}=a.point,{lng:c,lat:h}=a._center;return wC(t,o,a.worldSize,c,h)},r.cI=$e,r.cJ=Ut,r.cK=Hm,r.cL=O,r.cM=function(a,t,o){let c=0;for(let h=0;h<2;++h)a[h]>0&&(c+=(a[h]-0)*(a[h]-0)),t[h]<0&&(c+=(0-t[h])*(0-t[h]));return c},r.cN=function(a){return a*a*a*a*a},r.cO=ot,r.cP=45,r.cQ=Fm,r.cR=function(a,t,o){const c=Math.sqrt(a*a+t*t+o*o),h=c>0?Math.acos(o/c)*pa:0;let _=a!==0||t!==0?Math.atan2(-t,-a)*pa+90:0;return _<0&&(_+=360),[c,_,h]},r.cS=Ne,r.cT=vi,r.cU=Kt,r.cV=Pe,r.cW=Fi,r.cX=ve,r.cY=function(a){return[Math.pow(a[0],1/2.2),Math.pow(a[1],1/2.2),Math.pow(a[2],1/2.2)]},r.cZ=v3,r.c_=function(a,t){return a.readFields(TB,{icons:[]},t)},r.ca=no,r.cb=vu,r.cc=Wh,r.cd=ze,r.ce=zT,r.cf=function(){var a=new M(4);return M!=Float32Array&&(a[1]=0,a[2]=0),a[0]=1,a[3]=1,a},r.cg=function(a,t,o){var c=t[0],h=t[1],_=t[2],y=t[3],C=Math.sin(o),R=Math.cos(o);return a[0]=c*R+_*C,a[1]=h*R+y*C,a[2]=c*-C+_*R,a[3]=h*-C+y*R,a},r.ch=function(a,t){return a[0]===t[0]&&a[1]===t[1]&&a[2]===t[2]&&a[3]===t[3]},r.ci=le,r.cj=function(a){return Math.hypot(a[0],a[1],a[2],a[3])},r.ck=ui,r.cl=Ht,r.cm=mC,r.cn=As,r.co=eI,r.cp=dp,r.cq=yC,r.cr=function(a,t,o,c,h,_,y,C,R){if(R.name==="globe")return yC(a,t,new dp(o,c,h),!1);const L=k_({z:o,x:c,y:h},R);return new Fi([(_+L.x/L.scale)*t,t*(L.y/L.scale),y],[(_+L.x2/L.scale)*t,t*(L.y2/L.scale),C])},r.cs=function(a,t,o){return a[0]=Math.min(t[0],o[0]),a[1]=Math.min(t[1],o[1]),a[2]=Math.min(t[2],o[2]),a[3]=Math.min(t[3],o[3]),a},r.ct=function(a,t,o){return a[0]=Math.max(t[0],o[0]),a[1]=Math.max(t[1],o[1]),a[2]=Math.max(t[2],o[2]),a[3]=Math.max(t[3],o[3]),a},r.cu=function(a){const t=Math.round((a+45+360)%360/90)%4;return ke[t]},r.cv=nn,r.cw=Zt,r.cx=B,r.cy=function(a){const t=N(new Float64Array(16));G(t,a.pixelMatrix,a.globeMatrix);const o=[0,Q,0],c=[0,oe,0];return Lt(o,o,t),Lt(c,c,t),[o[0]>0&&o[0]<=a.width&&o[1]>0&&o[1]<=a.height&&!Ew(a,new ze(a.center.lat,90)),c[0]>0&&c[0]<=a.width&&c[1]>0&&c[1]<=a.height&&!Ew(a,new ze(a.center.lat,-90))]},r.cz=function(a,t){const{scale:o}=a.tileTransform,c=o*Pn/(a.tileSize*Math.pow(2,t.zoom-a.tileID.overscaledZ+a.tileID.canonical.z));return function(h,_,y){var C=_[1],R=_[2],L=_[3],V=y[0],$=y[1];return h[0]=_[0]*V,h[1]=C*V,h[2]=R*$,h[3]=L*$,h}(new Float32Array(4),t.inverseAdjustmentMatrix,[c,c])},r.d=function(a){return ko.API_TILEJSON_REGEX.test(a)},r.d$=Q0,r.d0=Ym,r.d1=n3,r.d2=Bu,r.d3=jd,r.d4=$a,r.d5=Pc,r.d6=Mr,r.d7=function(a){const t=a.indexOf(Yf);return t>=0?a.slice(0,t):a},r.d8=function(a){return a.indexOf(Yf)>=0},r.d9=function(a){const t=a.lastIndexOf(Yf);return t>=0?a.slice(t+1):""},r.dA=xC,r.dB=Io,r.dC=io,r.dD=256,r.dE=function(a,t){const o=[0,0,0];return Lt(o,o,f1(sd(t.canonical))),Lt(o,o,a),o},r.dF=a=>({u_matrix:new Wh(a),u_texsize:new vu(a),u_pixels_to_tile_units:new ap(a),u_device_pixel_ratio:new no(a),u_width_scale:new no(a),u_floor_width_scale:new no(a),u_image:new Nm(a),u_units_to_pixels:new vu(a),u_tile_units_to_pixels:new no(a),u_alpha_discard_threshold:new no(a),u_trim_offset:new vu(a),u_trim_fade_range:new vu(a),u_trim_color:new Fm(a),u_emissive_strength:new no(a),u_zbias_factor:new no(a),u_tile_to_meter:new no(a),u_ground_shadow_factor:new op(a),u_pattern_transition:new no(a)}),r.dG=a=>({u_matrix:new Wh(a),u_pixels_to_tile_units:new ap(a),u_device_pixel_ratio:new no(a),u_width_scale:new no(a),u_floor_width_scale:new no(a),u_units_to_pixels:new vu(a),u_dash_image:new Nm(a),u_gradient_image:new Nm(a),u_image_height:new no(a),u_texsize:new vu(a),u_tile_units_to_pixels:new no(a),u_alpha_discard_threshold:new no(a),u_trim_offset:new vu(a),u_trim_fade_range:new vu(a),u_trim_color:new Fm(a),u_emissive_strength:new no(a),u_zbias_factor:new no(a),u_tile_to_meter:new no(a),u_ground_shadow_factor:new op(a)}),r.dH=a=>({u_camera_to_center_distance:new no(a),u_extrude_scale:new ap(a),u_device_pixel_ratio:new no(a),u_matrix:new Wh(a),u_inv_rot_matrix:new Wh(a),u_merc_center:new vu(a),u_tile_id:new op(a),u_zoom_transition:new no(a),u_up_dir:new op(a),u_emissive_strength:new no(a)}),r.dI=K0,r.dJ=AF,r.dK=EC,r.dL=(a,t,o,c,h,_)=>{const y=a.transform,C=y.projection.name==="globe";let R;if(_.paint.get("circle-pitch-alignment")==="map")if(C){const V=xC(y.zoom,t.canonical)*y._pixelsPerMercatorPixel;R=Float32Array.from([V,0,0,V])}else R=y.calculatePixelsToTileUnitsMatrix(o);else R=new Float32Array([y.pixelsToGLUnits[0],0,0,y.pixelsToGLUnits[1]]);const L={u_camera_to_center_distance:a.transform.getCameraToCenterDistance(y.projection),u_matrix:a.translatePosMatrix(t.projMatrix,o,_.paint.get("circle-translate"),_.paint.get("circle-translate-anchor")),u_device_pixel_ratio:sl.devicePixelRatio,u_extrude_scale:R,u_inv_rot_matrix:yN,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0],u_emissive_strength:_.paint.get("circle-emissive-strength")};if(C){L.u_inv_rot_matrix=c,L.u_merc_center=h,L.u_tile_id=[t.canonical.x,t.canonical.y,1<<t.canonical.z],L.u_zoom_transition=Jh(y.zoom);const V=h[0]*Pn,$=h[1]*Pn;L.u_up_dir=y.projection.upVector(new dp(0,0,0),V,$)}return L},r.dM=WE,r.dN=sa,r.dO=(a,t,o,c,h,_,y,C,R,L)=>{const V=a.transform,$=V.pitch<15?jE(.07,.7,tt((14-V.zoom)/5,0,1)):.07,U=o.paint.get("line-trim-color-use-theme").constantOr("default")==="none";return{u_matrix:qE(a,t,o,c),u_texsize:t.imageAtlasTexture?t.imageAtlasTexture.size:[0,0],u_pixels_to_tile_units:V.calculatePixelsToTileUnitsMatrix(t),u_device_pixel_ratio:h,u_width_scale:_,u_floor_width_scale:y,u_image:0,u_tile_units_to_pixels:GE(t,V),u_units_to_pixels:[1/V.pixelsToGLUnits[0],1/V.pixelsToGLUnits[1]],u_alpha_discard_threshold:0,u_trim_offset:C,u_trim_fade_range:o.paint.get("line-trim-fade-range"),u_trim_color:o.paint.get("line-trim-color").toPremultipliedRenderColor(U?null:o.lut).toArray01(),u_emissive_strength:o.paint.get("line-emissive-strength"),u_zbias_factor:$,u_tile_to_meter:Kt(t.tileID.canonical,0),u_ground_shadow_factor:R,u_pattern_transition:L}},r.dP=(a,t,o,c,h,_,y,C,R,L)=>{const V=a.transform,$=V.calculatePixelsToTileUnitsMatrix(t),U=o.paint.get("line-trim-color-use-theme").constantOr("default")==="none",X=V.pitch<15?jE(.07,.7,tt((14-V.zoom)/5,0,1)):.07;return{u_matrix:qE(a,t,o,c),u_pixels_to_tile_units:$,u_device_pixel_ratio:_,u_width_scale:y,u_floor_width_scale:C,u_units_to_pixels:[1/V.pixelsToGLUnits[0],1/V.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:h,u_texsize:KE(o)&&t.lineAtlasTexture?t.lineAtlasTexture.size:[0,0],u_tile_units_to_pixels:GE(t,a.transform),u_alpha_discard_threshold:0,u_trim_offset:R,u_trim_fade_range:o.paint.get("line-trim-fade-range"),u_trim_color:o.paint.get("line-trim-color").toPremultipliedRenderColor(U?null:o.lut).toArray01(),u_emissive_strength:o.paint.get("line-emissive-strength"),u_zbias_factor:X,u_tile_to_meter:Kt(t.tileID.canonical,0),u_ground_shadow_factor:L}},r.dQ=Sn,r.dR=l_,r.dS=Vt,r.dT=hN,r.dU=x1,r.dV=_E,r.dW=ef,r.dX=450,r.dY=7,r.dZ=dB,r.d_=zi,r.da=function(a){const t=[],o=a.id;return o===void 0&&t.push({message:`layers.${o}: missing required property "id"`}),a.render===void 0&&t.push({message:`layers.${o}: missing required method "render"`}),a.renderingMode&&a.renderingMode!=="2d"&&a.renderingMode!=="3d"&&t.push({message:`layers.${o}: property "renderingMode" must be either "2d" or "3d"`}),t},r.db=function(a,t,o,c){return a.type==="custom"?new hB(a,t):new CB[a.type](a,t,o,c)},r.dc=Ir,r.dd=function(a){const t=a.indexOf(Yf);return t>=0?a.slice(t+1):""},r.de=class extends rg{constructor(a,t){super(a._vectorTileFeature,a._z,a._x,a._y,a.id),a.state&&(this.state=Object.assign({},a.state)),this.target=t.target,this.namespace=t.namespace,t.properties&&(this.properties=t.properties),this.target&&("featuresetId"in this.target&&!this.target.importId||"layerId"in this.target)&&(this.source=a.source,this.sourceLayer=a.sourceLayer,this.layer=a.layer)}toJSON(){const a=super.toJSON();return a.target=this.target,a.namespace=this.namespace,a}},r.df=Sm,r.dg=Ac,r.dh=function(a){return a({pluginStatus:ba,pluginURL:Ju}),Sm.on("pluginStateChange",a),a},r.di=a1,r.dj=class extends tc{constructor(a){super(a),this.current=r_}set(a,t,o){if(this.fetchUniformLocation(a,t)){for(let c=0;c<9;c++)if(o[c]!==this.current[c]){this.current=o,this.gl.uniformMatrix3fv(this.location,!1,o);break}}}},r.dk=Oe,r.dl=function(a,t,o){const c=Jh(o.zoom),h=a.style.map._antialias,_=a.terrain&&a.terrain.exaggeration()>0;return c===0&&!h&&!_},r.dm=function(a){const t=a.pixelsPerMeter,o=t/ut(1,a.center.lat),c=N(new Float64Array(16));return ie(c,c,[a.point.x,a.point.y,0]),W(c,c,[o,o,t]),Float32Array.from(c)},r.dn=d1,r.dp=function(a){const t=nn-5;a=tt(a,-80.051129,t)/t*90;const o=Math.pow(Math.abs(Math.sin(gi(a))),3);return Math.round(o*(te.length-1))},r.dq=function(a,t,o,c){const h=t.getNorth(),_=t.getSouth(),y=t.getWest(),C=t.getEast(),R=1<<a.z,L=C-y,V=h-_,$=L/K,U=-V/te[o],X=[0,$,0,U,0,0,h,y,0];if(a.z>0){const ee=180/c;z(X,X,[ee/L+1,0,0,0,ee/V+1,0,-.5*ee/$,.5*ee/U,1])}return X[2]=R,X[5]=a.x,X[8]=a.y,X},r.dr=sd,r.ds=function(a,t,o){const c=N(new Float64Array(16)),h=(t/(1<<a)-.5)*Math.PI*2;return J(c,o.globeMatrix,h),Float32Array.from(c)},r.dt=class{isDataAvailableAtPoint(a){const t=this._source();if(this.isUsingMockSource()||!t||a.y<0||a.y>1)return!1;const o=t.getSource().maxzoom,c=1<<o,h=Math.floor(a.x),_=Math.floor((a.x-h)*c),y=Math.floor(a.y*c),C=this.findDEMTileFor(new xa(o,h,o,_,y));return!(!C||!C.dem)}getAtPointOrZero(a,t=0){return this.getAtPoint(a,t)||0}getAtPoint(a,t,o=!0){if(this.isUsingMockSource())return null;t==null&&(t=null);const c=this._source();if(!c||a.y<0||a.y>1)return t;const h=c.getSource().maxzoom,_=1<<h,y=Math.floor(a.x),C=a.x-y,R=new xa(h,y,h,Math.floor(C*_),Math.floor(a.y*_)),L=this.findDEMTileFor(R);if(!L||!L.dem)return t;const V=L.dem,$=1<<L.tileID.canonical.z,U=(C*$-L.tileID.canonical.x)*V.dim,X=(a.y*$-L.tileID.canonical.y)*V.dim,ee=Math.floor(U),de=Math.floor(X);return(o?this.exaggeration():1)*Dr(Dr(V.get(ee,de),V.get(ee,de+1),X-de),Dr(V.get(ee+1,de),V.get(ee+1,de+1),X-de),U-ee)}getAtTileOffset(a,t,o){const c=1<<a.canonical.z;return this.getAtPointOrZero(new kt(a.wrap+(a.canonical.x+t/Pn)/c,(a.canonical.y+o/Pn)/c))}getAtTileOffsetFunc(a,t,o,c){return h=>{const _=this.getAtTileOffset(a,h.x,h.y),y=c.upVector(a.canonical,h.x,h.y);return Ve(y,y,_*c.upVectorScale(a.canonical,t,o).metersToTile),y}}getForTilePoints(a,t,o,c){if(this.isUsingMockSource())return!1;const h=Qm.create(this,a,c);return!!h&&(t.forEach(_=>{_[2]=this.exaggeration()*h.getElevationAt(_[0],_[1],o)}),!0)}getMinMaxForTile(a){if(this.isUsingMockSource())return null;const t=this.findDEMTileFor(a);if(!t||!t.dem)return null;const o=t.dem.tree,c=t.tileID,h=1<<a.canonical.z-c.canonical.z;let _=a.canonical.x/h-c.canonical.x,y=a.canonical.y/h-c.canonical.y,C=0;for(let R=0;R<a.canonical.z-c.canonical.z&&!o.leaves[C];R++){_*=2,y*=2;const L=2*Math.floor(y)+Math.floor(_);C=o.childOffsets[C]+L,_%=1,y%=1}return{min:this.exaggeration()*o.minimums[C],max:this.exaggeration()*o.maximums[C]}}getMinElevationBelowMSL(){throw new Error("Pure virtual method called.")}raycast(a,t,o){throw new Error("Pure virtual method called.")}pointCoordinate(a){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}isUsingMockSource(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor(a){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}getMinMaxForVisibleTiles(){const a=this.visibleDemTiles;if(a.length===0)return null;let t=!1,o=Number.MAX_VALUE,c=Number.MIN_VALUE;for(const h of a){const _=this.getMinMaxForTile(h.tileID);_&&(o=Math.min(o,_.min),c=Math.max(c,_.max),t=!0)}return t?{min:o,max:c}:null}},r.du=DC,r.dv=c1,r.dw=function(a,t){return[Math.pow(a[0],2.2)*t,Math.pow(a[1],2.2)*t,Math.pow(a[2],2.2)*t]},r.dx=P,r.dy=function(a,t){var o=Math.sin(t),c=Math.cos(t);return a[0]=c,a[1]=o,a[2]=0,a[3]=-o,a[4]=c,a[5]=0,a[6]=0,a[7]=0,a[8]=1,a},r.dz=xn,r.e=ko,r.e$=KI,r.e0=256,r.e1=Sw,r.e2=_u,r.e3=J,r.e4=function(a,t){return a[0]=t[0],a[1]=t[1],a[2]=t[2],a[3]=t[4],a[4]=t[5],a[5]=t[6],a[6]=t[8],a[7]=t[9],a[8]=t[10],a},r.e5=td,r.e6=tp,r.e7=Ay,r.e8=function(a,t,o,c,h){return tt((a-t)/(o-t)*(h-c)+c,c,h)},r.e9=Nn,r.eA=function(a,t,o){return a[0]=t[0]/o[0],a[1]=t[1]/o[1],a[2]=t[2]/o[2],a},r.eB=Gt,r.eC=_e,r.eD=at,r.eE=function(a,t,o,c){return a[0]=t,a[1]=o,a[2]=c,a},r.eF=function([a,t,o]){const c=Math.hypot(a,t,o),h=Math.atan2(a,o),_=.5*Math.PI-Math.acos(-t/c);return new ze(Ut(h),Ut(_))},r.eG=rn,r.eH=g3,r.eI=function(a){const t=a.navigator?a.navigator.userAgent:null;return!!function(o){if(ns==null){const c=o.navigator?o.navigator.userAgent:null;ns=!!o.safari||!(!c||!(/\b(iPad|iPhone|iPod)\b/.test(c)||c.match("Safari")&&!c.match("Chrome")))}return ns}(a)&&!(!t||!(t.match("Version/15.4")||t.match("Version/15.5")||t.match(/CPU (OS|iPhone OS) (15_4|15_5) like Mac OS X/)))},r.eJ=function(a,t){Ha=a,ka=t},r.eK=Ew,r.eL=SC,r.eM=function(a){const t=[0,0,0],o=N(new Float64Array(16));return G(o,a.pixelMatrix,a.globeMatrix),Lt(t,t,o),new Rn(t[0],t[1])},r.eN=function(){const a=y_;a&&(a.isPreloaded()&&a.numActive()===1?(a.release(Vw),y_=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},r.eO=function(){S1().acquire(Vw)},r.eP=Fh,r.eQ=function(a,t,o=!1){if(ba===Ka.deferred||ba===Ka.loading||ba===Ka.loaded)throw new Error("setRTLTextPlugin cannot be called multiple times.");Ju=sl.resolveURL(a),ba=Ka.deferred,B0=t,wm(),o||Vy()},r.eR=function(a){Gm=sl.resolveURL(a),qm||(qm=new jm(S1(),new Ua)),qm.broadcast("setMeshoptUrl",Gm)},r.eS=AE,r.eT=function(a){Hw=sl.resolveURL(a),qm||(qm=new jm(S1(),new Ua)),qm.broadcast("setDracoUrl",Hw)},r.eU=ME,r.eV=v_,r.eW=function(a){const t=Fu();if(!t)return;const o=t.delete(Hl);a&&o.then(()=>a()).catch(a)},r.eX=mp,r.eY=Qn,r.eZ=Qh,r.e_=ic,r.ea=function(a,t){var o=t[0],c=t[1],h=t[2],_=t[3],y=t[4],C=t[5],R=t[6],L=t[7],V=t[8],$=V*y-C*L,U=-V*_+C*R,X=L*_-y*R,ee=o*$+c*U+h*X;return ee?(a[0]=$*(ee=1/ee),a[1]=(-V*c+h*L)*ee,a[2]=(C*c-h*y)*ee,a[3]=U*ee,a[4]=(V*o-h*R)*ee,a[5]=(-C*o+h*_)*ee,a[6]=X*ee,a[7]=(-L*o+c*R)*ee,a[8]=(y*o-c*_)*ee,a):null},r.eb=ct,r.ec=wn,r.ed=_3,r.ee=function(a,t){if(a===t){var o=t[1],c=t[2],h=t[3],_=t[6],y=t[7],C=t[11];a[1]=t[4],a[2]=t[8],a[3]=t[12],a[4]=o,a[6]=t[9],a[7]=t[13],a[8]=c,a[9]=_,a[11]=t[14],a[12]=h,a[13]=y,a[14]=C}else a[0]=t[0],a[1]=t[4],a[2]=t[8],a[3]=t[12],a[4]=t[1],a[5]=t[5],a[6]=t[9],a[7]=t[13],a[8]=t[2],a[9]=t[6],a[10]=t[10],a[11]=t[14],a[12]=t[3],a[13]=t[7],a[14]=t[11],a[15]=t[15];return a},r.ef=we,r.eg=[1,1,1],r.eh=class{constructor(a,t,o,c){this.context=a,this.format=c,this.size=o,this.texture=a.gl.createTexture();const[h,_,y]=this.size,{gl:C}=a;C.bindTexture(C.TEXTURE_3D,this.texture),a.pixelStoreUnpackFlipY.set(!1),a.pixelStoreUnpack.set(1),a.pixelStoreUnpackPremultiplyAlpha.set(!1),C.texImage3D(C.TEXTURE_3D,0,this.format,h,_,y,0,h3(this.format),f3(this.format),t.data)}bind(a,t){const{context:o}=this,{gl:c}=o;c.bindTexture(c.TEXTURE_3D,this.texture),a!==this.minFilter&&(c.texParameteri(c.TEXTURE_3D,c.TEXTURE_MAG_FILTER,a),c.texParameteri(c.TEXTURE_3D,c.TEXTURE_MIN_FILTER,a),this.minFilter=a),t!==this.wrapS&&(c.texParameteri(c.TEXTURE_3D,c.TEXTURE_WRAP_S,t),c.texParameteri(c.TEXTURE_3D,c.TEXTURE_WRAP_T,t),this.wrapS=t)}destroy(){const{gl:a}=this.context;a.deleteTexture(this.texture),this.texture=null}},r.ei=Qm,r.ej=function(a,t,o,c){var h=new M(4);return h[0]=a,h[1]=t,h[2]=o,h[3]=c,h},r.ek=Qt,r.el=function(a,t,o,c){var h=t[0],_=t[1],y=t[2],C=t[3];return a[0]=h+c*(o[0]-h),a[1]=_+c*(o[1]-_),a[2]=y+c*(o[2]-y),a[3]=C+c*(o[3]-C),a},r.em=Jm,r.en=ed,r.eo=Kd,r.ep=function(a,t,o,c,h,_,y,C,R,L,V,$,U,X,ee,de){var be=new M(16);return be[0]=a,be[1]=t,be[2]=o,be[3]=c,be[4]=h,be[5]=_,be[6]=y,be[7]=C,be[8]=R,be[9]=L,be[10]=V,be[11]=$,be[12]=U,be[13]=X,be[14]=ee,be[15]=de,be},r.eq=Ee,r.er=Rm,r.es=X0,r.et=class{constructor(){this._updateTime=0,this._sourceIds=[],this._activeRegions=[],this._prevRegions=[],this._globalClipBounds={min:new Rn(1/0,1/0),max:new Rn(-1/0,-1/0)}}clear(){this._activeRegions.length>0&&++this._updateTime,this._activeRegions=[],this._prevRegions=[]}get updateTime(){return this._updateTime}getReplacementRegionsForTile(a,t=!1){const o=eE(new Rn(0,0),new Rn(Pn,Pn),a),c=[];if(t&&!Dw(o,this._globalClipBounds))return c;for(const h of this._activeRegions){if(h.hiddenByOverlap||!Dw(o,h))continue;const _=WN(h.min,h.max,a);c.push({min:_.min,max:_.max,sourceId:this._sourceIds[h.priority],footprint:h.footprint,footprintTileId:h.tileId,order:h.order,clipMask:h.clipMask,clipScope:h.clipScope})}return c}setSources(a){this._setSources(a.map(t=>({getSourceId:()=>t.cache.id,getFootprints:()=>{const o=[];for(const c of t.cache.getVisibleCoordinates()){const h=t.cache.getTile(c).buckets[t.layer];h&&h.updateFootprints(c.toUnwrapped(),o)}return o},getOrder:()=>t.order,getClipMask:()=>t.clipMask,getClipScope:()=>t.clipScope})))}_addSource(a){const t=a.getFootprints();if(t.length===0)return;const o=a.getOrder(),c=a.getClipMask(),h=a.getClipScope();for(const _ of t){if(!_.footprint)continue;const y=eE(_.footprint.min,_.footprint.max,_.id);this._activeRegions.push({min:y.min,max:y.max,hiddenByOverlap:!1,priority:this._sourceIds.length,tileId:_.id,footprint:_.footprint,order:o,clipMask:c,clipScope:h})}this._sourceIds.push(a.getSourceId())}_computeReplacement(){this._activeRegions.sort((t,o)=>t.priority-o.priority||y1(t.min,o.min)||y1(t.max,o.max)||t.order-o.order||t.clipMask-o.clipMask||function(c,h){const _=(y,C)=>y+C;return c.length-h.length||c.reduce(_,"").localeCompare(h.reduce(_,""))}(t.clipScope,o.clipScope));let a=this._activeRegions.length!==this._prevRegions.length;if(!a){let t=0;for(;!a&&t!==this._activeRegions.length;){const o=this._activeRegions[t],c=this._prevRegions[t];a=o.priority!==c.priority||!QC(o,c)||o.order!==c.order||o.clipMask!==c.clipMask||!Ri(o.clipScope,c.clipScope),++t}}if(a){++this._updateTime;for(const o of this._activeRegions)o.order!==v1&&(this._globalClipBounds.min.x=Math.min(this._globalClipBounds.min.x,o.min.x),this._globalClipBounds.min.y=Math.min(this._globalClipBounds.min.y,o.min.y),this._globalClipBounds.max.x=Math.max(this._globalClipBounds.max.x,o.max.x),this._globalClipBounds.max.y=Math.max(this._globalClipBounds.max.y,o.max.y));const t=o=>{const c=this._activeRegions;if(o>=c.length)return o;const h=c[o].priority;for(;o<c.length&&c[o].priority===h;)++o;return o};if(this._sourceIds.length>1){let o=0,c=t(o);for(;o!==c;){let h=o;const _=o;for(;h!==c;){const y=this._activeRegions[h];y.hiddenByOverlap=!1;for(let C=0;C<_;C++){const R=this._activeRegions[C];if(!R.hiddenByOverlap&&y.order===v1&&Dw(y,R)&&(y.hiddenByOverlap=nE(y.footprint,y.tileId,R.footprint,R.tileId),y.hiddenByOverlap))break}++h}o=c,c=t(o)}}}}_setSources(a){[this._prevRegions,this._activeRegions]=[this._activeRegions,[]],this._sourceIds=[];for(let t=a.length-1;t>=0;t--)this._addSource(a[t]);this._computeReplacement()}},r.eu=v1,r.ev=class{constructor(a){this._createGrid(a),this._createPoles(a)}destroy(){this._poleIndexBuffer.destroy(),this._gridBuffer.destroy(),this._gridIndexBuffer.destroy(),this._poleNorthVertexBuffer.destroy(),this._poleSouthVertexBuffer.destroy();for(const a of this._poleSegments)a.destroy();for(const a of this._gridSegments)a.withSkirts.destroy(),a.withoutSkirts.destroy()}_fillGridMeshWithLods(a,t){const o=new ec,c=new Ho,h=[],_=a+1+2,y=t[0]+1,C=t[0]+1+(1+t.length),R=(L,V,$)=>{let U=L===_-1?L-2:L===0?L:L-1;return U+=$?24575:0,[U,V]};for(let L=0;L<_;++L)o.emplaceBack(...R(L,0,!0));for(let L=0;L<y;++L)for(let V=0;V<_;++V)o.emplaceBack(...R(V,L,(V===0||V===_-1)&&!0));for(let L=0;L<t.length;++L){const V=t[L];for(let $=0;$<_;++$)o.emplaceBack(...R($,V,!0))}for(let L=0;L<t.length;++L){const V=c.length,$=t[L]+1+2,U=new Ho;for(let de=0;de<$-1;de++){const be=de===$-2,Ie=be?_*(C-t.length+L-de):_;for(let Fe=0;Fe<_-1;Fe++){const Be=de*_+Fe;de===0||be||Fe===0||Fe===_-2?(U.emplaceBack(Be+1,Be,Be+Ie),U.emplaceBack(Be+Ie,Be+Ie+1,Be+1)):(c.emplaceBack(Be+1,Be,Be+Ie),c.emplaceBack(Be+Ie,Be+Ie+1,Be+1))}}const X=Us.simpleSegment(0,V,o.length,c.length-V);for(let de=0;de<U.uint16.length;de+=3)c.emplaceBack(U.uint16[de],U.uint16[de+1],U.uint16[de+2]);const ee=Us.simpleSegment(0,V,o.length,c.length-V);h.push({withoutSkirts:X,withSkirts:ee})}return{vertices:o,indices:c,segments:h}}_createGrid(a){const t=this._fillGridMeshWithLods(K,te);this._gridSegments=t.segments,this._gridBuffer=a.createVertexBuffer(t.vertices,gC.members),this._gridIndexBuffer=a.createIndexBuffer(t.indices,!0)}_createPoles(a){const t=new Ho;for(let y=0;y<=K;y++)t.emplaceBack(0,y+1,y+2);this._poleIndexBuffer=a.createIndexBuffer(t,!0);const o=new td,c=new td,h=new td,_=new td;this._poleSegments=[];for(let y=0,C=0;y<O;y++){const R=360/(1<<y);o.emplaceBack(0,-T,0,.5,0),c.emplaceBack(0,-T,0,.5,1),h.emplaceBack(0,-T,0,.5,.5),_.emplaceBack(0,-T,0,.5,.5);for(let L=0;L<=K;L++){let V=L/K,$=0;const U=Dr(0,R,V),[X,ee,de]=Ce(_N,vN,U,T);o.emplaceBack(X,ee,de,V,$),c.emplaceBack(X,ee,de,V,1-$);const be=gi(U);V=.5+.5*Math.sin(be),$=.5+.5*Math.cos(be),h.emplaceBack(X,ee,de,V,$),_.emplaceBack(X,ee,de,V,1-$)}this._poleSegments.push(Us.simpleSegment(C,0,66,64)),C+=66}this._poleNorthVertexBuffer=a.createVertexBuffer(o,u1,!1),this._poleSouthVertexBuffer=a.createVertexBuffer(c,u1,!1),this._texturedPoleNorthVertexBuffer=a.createVertexBuffer(h,u1,!1),this._texturedPoleSouthVertexBuffer=a.createVertexBuffer(_,u1,!1)}getGridBuffers(a,t){return[this._gridBuffer,this._gridIndexBuffer,t?this._gridSegments[a].withSkirts:this._gridSegments[a].withoutSkirts]}getPoleBuffers(a,t){return[t?this._texturedPoleNorthVertexBuffer:this._poleNorthVertexBuffer,t?this._texturedPoleSouthVertexBuffer:this._poleSouthVertexBuffer,this._poleIndexBuffer,this._poleSegments[a]]}},r.ew=Ye,r.ex=function(){return!!document.fullscreenElement||!!document.webkitFullscreenElement},r.ey=dt,r.ez=Pt,r.f=function(a){return btoa(encodeURIComponent(a).replace(/%([0-9A-F]{2})/g,(t,o)=>String.fromCharCode(+("0x"+o))))},r.f0=YI,r.f1=VE,r.f2=bi,r.f3="hd_road_elevation",r.f4=hl,r.f5=Wn,r.f6=fp,r.f7=t3,r.f8=gp,r.f9=function(a,t,o,c,h,_,y,C=1,R,L,V){a.createArrays(),a.tilePixelRatio=Pn/(512*a.overscaling),a.compareText={},a.iconsNeedLinear=!1;const $=a.layers[0].layout,U=a.layers[0]._unevaluatedLayout._values,X={};X.scaleFactor=C,X.textSizeScaleRange=$.get("text-size-scale-range"),X.iconSizeScaleRange=$.get("icon-size-scale-range");const[ee,de]=X.textSizeScaleRange,[be,Ie]=X.iconSizeScaleRange;X.textScaleFactor=tt(X.scaleFactor,ee,de),X.iconScaleFactor=tt(X.scaleFactor,be,Ie);const Fe=U["text-size"],Be=U["icon-size"];if(a.textSizeData.kind==="composite"){const{minZoom:ht,maxZoom:St}=a.textSizeData;X.compositeTextSizes=[Fe.possiblyEvaluate(new Qi(ht,{worldview:V}),_),Fe.possiblyEvaluate(new Qi(St,{worldview:V}),_)]}if(a.iconSizeData.kind==="composite"){const{minZoom:ht,maxZoom:St}=a.iconSizeData;X.compositeIconSizes=[Be.possiblyEvaluate(new Qi(ht,{worldview:V}),_),Be.possiblyEvaluate(new Qi(St,{worldview:V}),_)]}X.layoutTextSize=Fe.possiblyEvaluate(new Qi(y+1,{worldview:V}),_),X.layoutIconSize=Be.possiblyEvaluate(new Qi(y+1,{worldview:V}),_),X.textMaxSize=Fe.possiblyEvaluate(new Qi(18,{worldview:V}),_);const pe=$.get("symbol-placement"),De=$.get("text-rotation-alignment")==="map"&&pe!=="point",He=$.get("text-size");let Ze=!1;const xt=[];for(const ht of a.features){const St=$.get("text-font").evaluate(ht,{},_).join(","),Rt=He.evaluate(ht,{},_)*X.textScaleFactor,Yt=X.layoutTextSize.evaluate(ht,{},_)*X.textScaleFactor,Tn=X.layoutIconSize.evaluate(ht,{},_)*X.iconScaleFactor,hn={horizontal:{},vertical:void 0},Cn=ht.text;let In,Jt=[0,0];if(Cn){const Br=Cn.toString(),Qr=$.get("text-letter-spacing").evaluate(ht,{},_)*zo,Jr=$.get("text-line-height").evaluate(ht,{},_)*zo,di=lw(Br)?Qr:0,ni=$.get("text-anchor").evaluate(ht,{},_),hi=$.get("text-variable-anchor");if(!hi){const en=$.get("text-radial-offset").evaluate(ht,{},_);if(en)Jt=CT(ni,[en*zo,r3]);else{const Fn=$.get("text-offset").evaluate(ht,{},_);Jt=[Fn[0]*zo,Fn[1]*zo]}}let Gi=De?"center":$.get("text-justify").evaluate(ht,{},_);const gs=pe==="point",Ge=gs?$.get("text-max-width").evaluate(ht,{},_)*zo:1/0,Xe=en=>{a.allowVerticalPlacement&&Wf(Br)&&(hn.vertical=Jw(Cn,t,o,h,St,Ge,Jr,ni,en,di,Jt,fl.vertical,!0,Yt,Rt,R))};if(!De&&hi){const en=Gi==="auto"?hi.map(jn=>i3(jn)):[Gi];let Fn=!1;for(let jn=0;jn<en.length;jn++){const $n=en[jn];if(!hn.horizontal[$n])if(Fn)hn.horizontal[$n]=hn.horizontal[0];else{const sr=Jw(Cn,t,o,h,St,Ge,Jr,"center",$n,di,Jt,fl.horizontal,!1,Yt,Rt,R);sr&&(hn.horizontal[$n]=sr,Fn=sr.positionedLines.length===1)}}Xe("left")}else{if(Gi==="auto"&&(Gi=i3(ni)),gs||$.get("text-writing-mode").indexOf("horizontal")>=0||!Wf(Br)){const en=Jw(Cn,t,o,h,St,Ge,Jr,ni,Gi,di,Jt,fl.horizontal,!1,Yt,Rt,R);en&&(hn.horizontal[Gi]=en)}Xe(gs?"left":Gi)}}let yn,Wt,Xt,Ln,Dn,Cr,lr=!1;const Hn=$.get("icon-text-fit").evaluate(ht,{},_);if(ht.icon&&ht.icon.hasPrimary()){const Br=TT(ht.icon,a.iconSizeData,U["icon-size"],_,a.zoom,ht,R,X.iconScaleFactor,V);yn=Br.iconPrimary,Xt=Br.iconSecondary;const Qr=yn.toString();if(Wt=c.get(Qr),Wt&&(Dn=$.get("icon-offset").evaluate(ht,{},_),Cr=$.get("icon-anchor").evaluate(ht,{},_),In=$F(h.get(Qr),Xt?h.get(Xt.toString()):void 0,Dn,Cr),lr=Wt.sdf,a.sdfIcons===void 0?a.sdfIcons=Wt.sdf:a.sdfIcons!==Wt.sdf&&kn("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Wt.pixelRatio!==a.pixelRatio||$.get("icon-rotate").constantOr(1)!==0)&&(a.iconsNeedLinear=!0)),Xt){const Jr=Xt.toString();Ln=c.get(Jr)}}Ze=Ze||!(!ht.icon||!ht.icon.hasSecondary());const An=s3(hn.horizontal)||hn.vertical;a.iconsInText||(a.iconsInText=!!An&&An.iconsInText);const qr=Yt*X.textScaleFactor/zo,{defaultShapedIcon:ar,verticallyShapedIcon:ur}=XF(a,In,$,ht,_,hn,qr,Dn,Hn);Hn!=="none"&&In&&(lT(In)||uT(In))&&(P1(0,Wt,yn,In,ar,Hn,L,c,h),P1(0,Ln,Xt,In,ar,Hn,L,c,h),ur&&(P1(0,Wt,yn,In,ur,Hn,L,c,h),P1(0,Ln,Xt,In,ur,Hn,L,c,h))),In=ar,xt.push({feature:ht,shapedTextOrientations:hn,shapedText:An,shapedIcon:In,iconPrimary:yn,iconSecondary:Xt,iconOffset:Dn,iconAnchor:Cr,verticallyShapedIcon:ur,layoutTextSize:Yt,layoutIconSize:Tn,textOffset:Jt,isSDFIcon:lr,iconTextFit:Hn})}return{featureData:xt,sizes:X,hasAnySecondaryIcon:Ze,textAlongLine:De,symbolPlacement:pe}},r.fa=vT,r.fb=function(a,t,o,c,h,_,y,C,R,L){const{featureData:V,hasAnySecondaryIcon:$,sizes:U,textAlongLine:X,symbolPlacement:ee}=t;for(const de of V){const{shapedIcon:be,verticallyShapedIcon:Ie,feature:Fe,shapedTextOrientations:Be,shapedText:pe,layoutTextSize:De,textOffset:He,isSDFIcon:Ze,iconPrimary:xt,iconSecondary:ht,iconTextFit:St,iconOffset:Rt}=de;IT(be,L.iconPositions,xt,ht),IT(Ie,L.iconPositions,xt,ht),ZF(Be,L.iconPositions),YF(xt,ht,L.iconPositions),(pe||be)&&JF(a,Fe,Be,be,Ie,R,U,De,0,He,Ze,c,h,y,C,$,St,Rt,X,ee)}o&&a.generateCollisionDebugBuffers(_,a.collisionBoxArray,U.textScaleFactor)},r.fc=ii,r.fd=n2,r.fe=ks,r.ff=Kr,r.fg=eT,r.fh=vr,r.fi=function(a){let t=0;if(new Uint32Array(a,0,1)[0]!==PE){const o=new Uint32Array(a,0,7),[,,c,h,_,y]=o;t=o.byteLength+h+_+y+_,(c!==a.byteLength||t>=a.byteLength)&&kn("Invalid b3dm header information.")}return zE(a,t)},r.fj=function(a,t){const o=WI(a);for(const c of o){for(const h of c.meshes)x7(h);c.lights&&(c.lightMeshIndex=c.meshes.length,c.meshes.push(w7(c.lights,t)))}return o},r.fk=Z1,r.fl=ci,r.fm=IE,r.fn=Qu,r.fo=Ka,r.fp=function(a){fu(),El?.then(t=>{t.keys().then(o=>{for(let c=0;c<o.length-a;c++)t.delete(o[c]).catch(h=>kn(h.message))}).catch(o=>kn(o.message))}).catch(t=>kn(t.message))},r.g=function(a,t){return Ac(_t(a,{method:"GET"}),t)},r.h=_t,r.i=function(a){return ko.API_STYLE_REGEX.test(a)&&!Th(a)},r.j=function(a){return a.indexOf("mapbox:")===0},r.k=hu,r.l=Ul,r.m=function(a){return decodeURIComponent(atob(a).split("").map(t=>"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)).join(""))},r.n=function(a,t){return Ac(_t(a,{type:"json"}),t)},r.o=Vu,r.p=function(a,t){return Ac(_t(a,{method:"POST"}),t)},r.q=sl,r.r=Zo,r.s=function(a){try{const t=self[a];return t.setItem("_mapbox_test_",1),t.removeItem("_mapbox_test_"),!0}catch{return!1}},r.t=$l,r.u=function(){return function a(t){return t?(t^Math.random()*(16>>t/4)).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,a)}()},r.v=function(a){return!!a&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(a)},r.w=kn,r.x=function(){return $w||($w=new mp),$w},r.y=I3,r.z=$u}),m(["./shared"],function(r){function E(Ut){const ke=Ut?Ut.url.toString():void 0;return ke?performance.getEntriesByName(ke):[]}function M(Ut){if(typeof Ut=="number"||typeof Ut=="boolean"||typeof Ut=="string"||Ut==null)return JSON.stringify(Ut);if(Array.isArray(Ut)){let Oe="[";for(const Ye of Ut)Oe+=`${M(Ye)},`;return`${Oe}]`}let ke="{";for(const Oe of Object.keys(Ut).sort())ke+=`${Oe}:${M(Ut[Oe])},`;return`${ke}}`}function A(Ut){let ke="";for(const Oe of r.bu)ke+=`/${M(Ut[Oe])}`;return ke}class P{constructor(ke){this.keyCache={},this._layers={},this._layerConfigs={},ke&&this.replace(ke)}replace(ke,Oe){this._layerConfigs={},this._layers={},this.update(ke,[],Oe)}update(ke,Oe,Ye){this._options=Ye;for(const tt of ke)this._layerConfigs[tt.id]=tt,(this._layers[tt.id]=r.db(tt,this.scope,null,this._options)).compileFilter(Ye),this.keyCache[tt.id]&&delete this.keyCache[tt.id];for(const tt of Oe)delete this.keyCache[tt],delete this._layerConfigs[tt],delete this._layers[tt];this.familiesBySource={};const dt=function(tt,Tt){const $t={};for(let _t=0;_t<tt.length;_t++){const Nt=tt[_t];let Ft=Tt&&Tt[Nt.id];Ft||(Nt.type==="symbol"?Ft=Nt.id:(Ft=A(Nt),Nt.type==="line"&&Nt.paint&&function qn(Wn){return typeof Wn=="string"&&Wn==="line-progress"||(Array.isArray(Wn)?Wn.some(qn):!(!Wn||typeof Wn!="object")&&Object.values(Wn).some(qn))}(Nt.paint["line-width"])&&(Ft+=`/${M(Nt.paint["line-width"])}`))),Tt&&(Tt[Nt.id]=Ft);let Sn=$t[Ft];Sn||(Sn=$t[Ft]=[]),Sn.push(Nt)}const je=[];for(const _t in $t)je.push($t[_t]);return je}(Object.values(this._layerConfigs),this.keyCache);for(const tt of dt){const Tt=tt.map(Sn=>this._layers[Sn.id]),$t=Tt[0];if($t.visibility==="none")continue;const je=$t.source||"";let _t=this.familiesBySource[je];_t||(_t=this.familiesBySource[je]={});const Nt=$t.sourceLayer||"_geojsonTileLayer";let Ft=_t[Nt];Ft||(Ft=_t[Nt]=[]),Ft.push(Tt)}}}const D=1*r.e_;class z{constructor(ke){const Oe={},Ye=[];for(const $t in ke){const je=ke[$t],_t=Oe[$t]={};for(const Nt in je.glyphs){const Ft=je.glyphs[+Nt];if(!Ft||Ft.bitmap.width===0||Ft.bitmap.height===0)continue;const Sn=Ft.metrics.localGlyph?D:1,qn={x:0,y:0,w:Ft.bitmap.width+2*Sn,h:Ft.bitmap.height+2*Sn};Ye.push(qn),_t[Nt]=qn}}const{w:dt,h:tt}=r.H(Ye),Tt=new r.eZ({width:dt||1,height:tt||1});for(const $t in ke){const je=ke[$t];for(const _t in je.glyphs){const Nt=je.glyphs[+_t];if(!Nt||Nt.bitmap.width===0||Nt.bitmap.height===0)continue;const Ft=Oe[$t][_t],Sn=Nt.metrics.localGlyph?D:1;r.eZ.copy(Nt.bitmap,Tt,{x:0,y:0},{x:Ft.x+Sn,y:Ft.y+Sn},Nt.bitmap)}}this.image=Tt,this.positions=Oe}}r.eY(z,"GlyphAtlas");class F{constructor(ke){this.tileID=new r.aM(ke.tileID.overscaledZ,ke.tileID.wrap,ke.tileID.canonical.z,ke.tileID.canonical.x,ke.tileID.canonical.y),this.tileZoom=ke.tileZoom,this.uid=ke.uid,this.zoom=ke.zoom,this.lut=ke.lut,this.canonical=ke.tileID.canonical,this.pixelRatio=ke.pixelRatio,this.tileSize=ke.tileSize,this.source=ke.source,this.scope=ke.scope,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=ke.showCollisionBoxes,this.collectResourceTiming=!!ke.request&&ke.request.collectResourceTiming,this.promoteId=ke.promoteId,this.isSymbolTile=ke.isSymbolTile,this.tileTransform=r.aW(ke.tileID.canonical,ke.projection),this.projection=ke.projection,this.worldview=ke.worldview,this.localizableLayerIds=ke.localizableLayerIds,this.brightness=ke.brightness,this.extraShadowCaster=!!ke.extraShadowCaster,this.tessellationStep=ke.tessellationStep,this.scaleFactor=ke.scaleFactor,this.worldview=ke.worldview}parse(ke,Oe,Ye,dt,tt,Tt){this.status="parsing",this.data=ke,this.collisionBoxArray=new r.b0;const $t=new r.e$(Object.keys(ke.layers).sort()),je=new r.f0(this.tileID,this.promoteId);je.bucketLayerIDs=[];const _t={},Nt=new r.f1(256,256),Ft={featureIndex:je,iconDependencies:new Map,patternDependencies:new Map,glyphDependencies:{},lineAtlas:Nt,availableImages:Ye,brightness:this.brightness,scaleFactor:this.scaleFactor,elevationFeatures:void 0},Sn=[],qn=Oe.familiesBySource[this.source];for(const Ir in qn){const Mr=ke.layers[Ir];if(!Mr)continue;let Lr=!1,jt=!1,kn=!1;for(const ci of qn[Ir])ci[0].type==="symbol"?Lr=!0:jt=!0,ci[0].is3D()&&ci[0].type!=="model"&&(kn=!0);if(this.extraShadowCaster&&!kn||this.isSymbolTile===!0&&!Lr||this.isSymbolTile===!1&&!jt)continue;Mr.version===1&&r.w(`Vector tile source "${this.source}" layer "${Ir}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const br=$t.encode(Ir),Rr=[];let vi=!1;for(let ci=0,xi=0;ci<Mr.length;ci++){const ns=Mr.feature(ci),os=je.getId(ns,Ir);if(this.localizableLayerIds&&this.localizableLayerIds.has(Ir)){const $i=ns.properties?ns.properties.worldview:null;if(this.worldview&&typeof $i=="string")if($i==="all")ns.properties.$localized=!0;else{if(!$i.split(",").includes(this.worldview))continue;ns.properties.$localized=!0,ns.properties.worldview=this.worldview}}!vi&&ns.properties&&ns.properties.hasOwnProperty(r.f2)&&(vi=!0),Rr.push({feature:ns,id:os,index:xi,sourceLayerIndex:br}),xi++}vi&&!Ft.elevationFeatures&&ke.layers.hasOwnProperty(r.f3)&&(Ft.elevationFeatures=r.f4.parseFrom(ke.layers[r.f3],this.canonical));for(const ci of qn[Ir]){const xi=ci[0];if(this.extraShadowCaster&&(!xi.is3D()||xi.type==="model")||this.isSymbolTile!==void 0&&xi.type==="symbol"!==this.isSymbolTile||xi.minzoom&&this.zoom<Math.floor(xi.minzoom)||xi.maxzoom&&this.zoom>=xi.maxzoom||xi.visibility==="none")continue;N(ci,this.zoom,Ft.brightness,Ye,this.worldview);const ns=_t[xi.id]=xi.createBucket({index:je.bucketLayerIDs.length,layers:ci,zoom:this.zoom,lut:this.lut,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:br,sourceID:this.source,projection:this.projection.spec,tessellationStep:this.tessellationStep,styleDefinedModelURLs:dt,worldview:this.worldview});je.bucketLayerIDs.push(ci.map($i=>r.C($i.id,$i.scope)));let os=ns.prepare?ns.prepare():null;os!=null?(os=os.then(()=>ns.populate(Rr,Ft,this.tileID.canonical,this.tileTransform)),Sn.push(os)):ns.populate(Rr,Ft,this.tileID.canonical,this.tileTransform)}}const Wn=()=>{let Ir,Mr,Lr,jt,kn,br;Nt.trim();const Rr={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},vi=()=>{if(Ir)return this.status="done",Tt(Ir);if(this.extraShadowCaster)this.status="done",Tt(null,{buckets:Object.values(_t).filter(xi=>!xi.isEmpty()),featureIndex:je,collisionBoxArray:null,glyphAtlasImage:null,lineAtlas:null,imageAtlas:null,brightness:Ft.brightness,glyphMap:null,iconMap:null,glyphPositions:null});else if(Mr&&Lr&&jt){const xi=new z(Mr),ns=new Map;for(const[Js,Io]of Lr.entries()){const{imagePosition:io}=r.f7(Js,Io,r.f8);ns.set(Js,io)}const os={};for(const Js in _t){const Io=_t[Js];Io instanceof r.b1&&(N(Io.layers,this.zoom,Ft.brightness,Ye,this.worldview),os[Js]=r.f9(Io,Mr,xi.positions,Lr,ns,this.tileID.canonical,this.tileZoom,this.scaleFactor,this.pixelRatio,kn,this.worldview))}const $i={iconsPending:!0,patternsPending:!0};this.rasterizeIfNeeded(tt,Lr,kn,()=>{$i.iconsPending=!1,ci(os,xi,$i)}),this.rasterizeIfNeeded(tt,jt,br,()=>{$i.patternsPending=!1,ci(os,xi,$i)})}},ci=(xi,ns,os,$i)=>{if(os.iconsPending||os.patternsPending)return;const Js=new r.fa(Lr,jt,this.lut);for(const Io in _t){const io=_t[Io];if(Io in xi)r.fb(io,xi[Io],this.showCollisionBoxes,Ye,this.tileID.canonical,this.tileZoom,this.projection,this.brightness,Lr,Js);else if(io.hasPattern&&(io instanceof r.b7||io instanceof r.b8||io instanceof r.dU)){N(io.layers,this.zoom,Ft.brightness,Ye,this.worldview);const zu=Object.fromEntries(Js.patternPositions);io.addFeatures(Ft,this.tileID.canonical,zu,Ye,this.tileTransform,this.brightness)}}this.status="done",Tt(null,{buckets:Object.values(_t).filter(Io=>!Io.isEmpty()),featureIndex:je,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:ns.image,lineAtlas:Nt,imageAtlas:Js,brightness:Ft.brightness})};if(!this.extraShadowCaster){const xi=r.f5(Ft.glyphDependencies,$i=>Object.keys($i).map(Number));Object.keys(xi).length?tt.send("getGlyphs",{uid:this.uid,stacks:xi,scope:this.scope},($i,Js)=>{Ir||(Ir=$i,Mr=Js,vi())},void 0,!1,Rr):Mr={};const ns=Array.from(Ft.iconDependencies.keys()).map($i=>r.I.parse($i));ns.length?tt.send("getImages",{images:ns,source:this.source,scope:this.scope,tileID:this.tileID,type:"icons"},($i,Js)=>{Ir||(Ir=$i,Lr=new Map,kn=this.updateImageMapAndGetImageTaskQueue(Lr,Js,Ft.iconDependencies),vi())},void 0,!1,Rr):(Lr=new Map,kn=new Map);const os=Array.from(Ft.patternDependencies.keys()).map($i=>r.I.parse($i));os.length?tt.send("getImages",{images:os,source:this.source,scope:this.scope,tileID:this.tileID,type:"patterns"},($i,Js)=>{Ir||(Ir=$i,jt=new Map,br=this.updateImageMapAndGetImageTaskQueue(jt,Js,Ft.patternDependencies),vi())},void 0,!1,Rr):(jt=new Map,br=new Map)}if(Ft.elevationFeatures&&Ft.elevationFeatures.length>0){const xi=[];for(const os of Object.values(_t))if(os instanceof r.b8){const $i=os.getUnevaluatedPortalGraph();$i&&xi.push($i)}const ns=r.f6.evaluate(xi);for(const os of Object.values(_t))if(os instanceof r.b8){const $i=ke.layers[$t.decode(os.sourceLayerIndex)];os.setEvaluatedPortalGraph(ns,$i,this.tileID.canonical,Ft.availableImages,Ft.brightness)}}vi()};Sn.length>0?Promise.allSettled(Sn).then(Wn).catch(Tt):Wn()}rasterizeIfNeeded(ke,Oe,Ye,dt){Array.from(Oe.values()).some(tt=>tt.usvg)?this.rasterize(ke,Oe,Ye,dt):dt()}updateImageMapAndGetImageTaskQueue(ke,Oe,Ye){const dt=new Map;for(const tt of Oe.keys()){const Tt=Ye.get(tt)||[];for(const $t of Tt){const je=$t.toString(),_t=Oe.get($t.id.toString());_t.usvg?dt.has(je)||(dt.set(je,$t),ke.set(je,Object.assign({},_t))):ke.set(je,_t)}}return dt}rasterize(ke,Oe,Ye,dt){this.rasterizeTask=ke.send("rasterizeImages",{scope:this.scope,tasks:Ye},(tt,Tt)=>{if(!tt)for(const[$t,je]of Tt.entries()){const _t=Object.assign(Oe.get($t),{data:je});Oe.set($t,_t)}dt()})}cancelRasterize(){this.rasterizeTask&&this.rasterizeTask.cancel()}}function N(Ut,ke,Oe,Ye,dt){const tt=new r.aa(ke,{brightness:Oe,worldview:dt});for(const Tt of Ut)Tt.recalculate(tt,Ye)}class q extends r.E{constructor(ke,Oe,Ye,dt,tt,Tt,$t){super(),this.actor=ke,this.layerIndex=Oe,this.availableImages=Ye,this.availableModels=dt,this.loadVectorData=Tt||r.aJ,this.loading={},this.loaded={},this.deduped=new r.aI(ke.scheduler),this.isSpriteLoaded=tt,this.scheduler=ke.scheduler,this.brightness=$t}loadTile(ke,Oe){const Ye=ke.uid,dt=ke&&ke.request,tt=dt&&dt.collectResourceTiming,Tt=this.loading[Ye]=new F(ke);Tt.abort=this.loadVectorData(ke,($t,je)=>{const _t=!this.loading[Ye];if(delete this.loading[Ye],Tt.cancelRasterize(),_t||$t||!je)return Tt.status="done",_t||(this.loaded[Ye]=Tt),Oe($t);const Nt=je.rawData,Ft={};je.expires&&(Ft.expires=je.expires),je.cacheControl&&(Ft.cacheControl=je.cacheControl),Tt.vectorTile=je.vectorTile||new r.fc.VectorTile(new r.bq(Nt));const Sn=()=>{Tt.parse(Tt.vectorTile,this.layerIndex,this.availableImages,this.availableModels,this.actor,(qn,Wn)=>{if(qn||!Wn)return Oe(qn);const Ir={};if(tt){const Mr=E(dt);Mr.length>0&&(Ir.resourceTiming=JSON.parse(JSON.stringify(Mr)))}Oe(null,r.h({rawTileData:Nt.slice(0)},Wn,Ft,Ir))})};this.isSpriteLoaded?Sn():this.once("isSpriteLoaded",()=>{this.scheduler?this.scheduler.add(Sn,{type:"parseTile",isSymbolTile:ke.isSymbolTile,zoom:ke.tileZoom}):Sn()}),this.loaded=this.loaded||{},this.loaded[Ye]=Tt})}reloadTile(ke,Oe){const Ye=this.loaded,dt=ke.uid;if(Ye&&Ye[dt]){const tt=Ye[dt];tt.scaleFactor=ke.scaleFactor,tt.showCollisionBoxes=ke.showCollisionBoxes,tt.projection=ke.projection,tt.brightness=ke.brightness,tt.tileTransform=r.aW(ke.tileID.canonical,ke.projection),tt.extraShadowCaster=ke.extraShadowCaster,tt.lut=ke.lut,tt.worldview=ke.worldview;const Tt=($t,je)=>{const _t=tt.reloadCallback;_t&&(delete tt.reloadCallback,tt.parse(tt.vectorTile,this.layerIndex,this.availableImages,this.availableModels,this.actor,_t)),Oe($t,je)};tt.status==="parsing"?tt.reloadCallback=Tt:tt.status==="done"&&(tt.vectorTile?tt.parse(tt.vectorTile,this.layerIndex,this.availableImages,this.availableModels,this.actor,Tt):Tt())}else Oe(null,void 0)}abortTile(ke,Oe){const Ye=ke.uid,dt=this.loading[Ye];dt&&(dt.abort&&dt.abort(),delete this.loading[Ye]),Oe()}removeTile(ke,Oe){const Ye=this.loaded,dt=ke.uid;Ye&&Ye[dt]&&delete Ye[dt],Oe()}}class G{loadTile(ke,Oe){const{uid:Ye,encoding:dt,rawImageData:tt,padding:Tt}=ke,$t=ImageBitmap&&tt instanceof ImageBitmap?this.getImageData(tt,Tt):tt;Oe(null,new r.fd(Ye,$t,dt,Tt<1))}reloadTile(ke,Oe){Oe(null,null)}abortTile(ke,Oe){Oe()}removeTile(ke,Oe){Oe()}getImageData(ke,Oe){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(ke.width,ke.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d",{willReadFrequently:!0})),this.offscreenCanvas.width=ke.width,this.offscreenCanvas.height=ke.height,this.offscreenCanvasContext.drawImage(ke,0,0,ke.width,ke.height);const Ye=this.offscreenCanvasContext.getImageData(-Oe,-Oe,ke.width+2*Oe,ke.height+2*Oe);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),Ye}}r.bp.setPbf(r.bq);class ie{constructor(ke){this._mrt=new r.bp(ke.partial?30:1/0),this._isHeaderLoaded=!1,this.uid=ke.uid,this.tileID=ke.tileID,this.source=ke.source}parse(ke,Oe){const Ye=this._mrt;this.status="parsing",this._entireBuffer=ke;try{Ye.parseHeader(ke),this._isHeaderLoaded=!0;const dt=[];for(const tt in Ye.layers){const Tt=Ye.getLayer(tt),$t=Tt.getDataRange(Tt.getBandList()),je=Ye.createDecodingTask($t),_t=ke.slice($t.firstByte,$t.lastByte+1),Nt=r.bp.performDecoding(_t,je).then(Ft=>je.complete(null,Ft)).catch(Ft=>je.complete(Ft,null));dt.push(Nt)}Promise.allSettled(dt).then(()=>Oe(null,Ye)).catch(tt=>Oe(tt))}catch(dt){Oe(dt)}}}class W{constructor(ke){this.actor=ke,this.loading={},this.loaded={}}loadTile(ke,Oe){const Ye=ke.uid,dt=ke.request,tt=this.loading[Ye]=new ie(ke),{cancel:Tt}=r.br(dt,($t,je,_t,Nt)=>{const Ft=!this.loading[Ye];if(delete this.loading[Ye],Ft||$t||!je)return tt.status="done",Ft||(this.loaded[Ye]=tt),Oe($t);tt.parse(je,(Sn,qn)=>{if(Sn||!qn)return Oe(Sn);Oe(null,qn,_t,Nt)}),this.loaded[Ye]=tt});tt.abort=Tt}reloadTile(ke,Oe){Oe(null,void 0)}abortTile(ke,Oe){const Ye=ke.uid,dt=this.loading[Ye];dt&&(dt.abort&&dt.abort(),delete this.loading[Ye]),Oe()}removeTile(ke,Oe){const Ye=ke.uid;this.loaded[Ye]&&delete this.loaded[Ye],Oe()}decodeRasterArray(ke,Oe){r.bp.performDecoding(ke.buffer,ke.task).then(Ye=>Oe(null,Ye)).catch(Ye=>Oe(Ye))}}const Y=r.fc.VectorTileFeature.prototype.toGeoJSON;class J{constructor(ke){this._feature=ke,this.extent=r.aj,this.type=ke.type,this.properties=ke.tags,"id"in ke&&!isNaN(ke.id)&&(this.id=parseInt(ke.id,10))}loadGeometry(){if(this._feature.type===1){const ke=[];for(const Oe of this._feature.geometry)ke.push([new r.P(Oe[0],Oe[1])]);return ke}{const ke=[];for(const Oe of this._feature.geometry){const Ye=[];for(const dt of Oe)Ye.push(new r.P(dt[0],dt[1]));ke.push(Ye)}return ke}}toGeoJSON(ke,Oe,Ye){return Y.call(this,ke,Oe,Ye)}}class re{constructor(ke){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=r.aj,this.length=ke.length,this._features=ke}feature(ke){return new J(this._features[ke])}}class he{constructor(ke,Oe){this.name=ke,this.extent=r.aj,this.length=Oe.length,this._features=Oe}feature(ke){return new J(this._features[ke])}}class fe extends re{constructor(ke){super([]),this.layers={};for(const Oe in ke)this.layers[Oe]=new he(Oe,ke[Oe])}}const ce=64/4096,me=128;class we{constructor(){this.features=new Map}clear(){this.features.clear()}load(ke=[],Oe){for(const Ye of ke){const dt=Ye.id;if(dt==null)continue;let tt=this.features.get(dt);tt&&this.updateCache(tt,Oe),Ye.geometry?(tt=Ue(Ye),this.updateCache(tt,Oe),this.features.set(dt,tt)):this.features.delete(dt),this.updateCache(tt,Oe)}}updateCache(ke,Oe){for(const{canonical:Ye,uid:dt}of Object.values(Oe)){const{z:tt,x:Tt,y:$t}=Ye;ye(ke,Math.pow(2,tt),Tt,$t)&&delete Oe[dt]}}getTile(ke,Oe,Ye){const dt=Math.pow(2,ke),tt=[];for(const Tt of this.features.values())ye(Tt,dt,Oe,Ye)&&tt.push($e(Tt,dt,Oe,Ye));return{features:tt}}getFeatures(){return[...this.features.values()]}}function ye({minX:Ut,minY:ke,maxX:Oe,maxY:Ye},dt,tt,Tt){return Ut<(tt+1+ce)/dt&&ke<(Tt+1+ce)/dt&&Oe>(tt-ce)/dt&&Ye>(Tt-ce)/dt}function Ue(Ut){const{id:ke,geometry:Oe,properties:Ye}=Ut;if(!Oe)return;if(Oe.type==="GeometryCollection")throw new Error("GeometryCollection not supported in dynamic mode.");const{type:dt,coordinates:tt}=Oe,Tt={id:ke,type:1,geometry:[],tags:Ye,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0},$t=Tt.geometry;if(dt==="Point")Ne(tt,$t,Tt);else if(dt==="MultiPoint")for(const je of tt)Ne(je,$t,Tt);else if(dt==="LineString")Tt.type=2,Pe(tt,$t,Tt);else if(dt==="MultiLineString")Tt.type=2,ve(tt,$t,Tt);else if(dt==="Polygon")Tt.type=3,ve(tt,$t,Tt,!0);else{if(dt!=="MultiPolygon")throw new Error("Input data is not a valid GeoJSON object.");Tt.type=3;for(const je of tt)ve(je,$t,Tt,!0)}return Tt}function Ne([Ut,ke],Oe,Ye){const dt=r.aD(Ut);let tt=r.aH(ke);tt=tt<0?0:tt>1?1:tt,Oe.push(dt,tt),Ye.minX=Math.min(Ye.minX,dt),Ye.minY=Math.min(Ye.minY,tt),Ye.maxX=Math.max(Ye.maxX,dt),Ye.maxY=Math.max(Ye.maxY,tt)}function Pe(Ut,ke,Oe,Ye=!1,dt=!1){const tt=[];for(const Tt of Ut)Ne(Tt,tt,Oe);ke.push(tt),Ye&&function(Tt,$t){let je=0;for(let _t=0,Nt=Tt.length,Ft=Nt-2;_t<Nt;Ft=_t,_t+=2)je+=(Tt[_t]-Tt[Ft])*(Tt[_t+1]+Tt[Ft+1]);if(je>0===$t)for(let _t=0,Nt=Tt.length;_t<Nt/2;_t+=2){const Ft=Tt[_t],Sn=Tt[_t+1];Tt[_t]=Tt[Nt-2-_t],Tt[_t+1]=Tt[Nt-1-_t],Tt[Nt-2-_t]=Ft,Tt[Nt-1-_t]=Sn}}(tt,dt)}function ve(Ut,ke,Oe,Ye=!1){for(let dt=0;dt<Ut.length;dt++)Pe(Ut[dt],ke,Oe,Ye,dt===0)}function $e(Ut,ke,Oe,Ye){const{id:dt,type:tt,geometry:Tt,tags:$t}=Ut,je=[];if(tt===1)(function(_t,Nt,Ft,Sn,qn){for(let Wn=0;Wn<_t.length;Wn+=2){const Ir=Math.round(r.aj*(_t[Wn+0]*Nt-Ft)),Mr=Math.round(r.aj*(_t[Wn+1]*Nt-Sn));qn.push([Ir,Mr])}})(Tt,ke,Oe,Ye,je);else for(const _t of Tt)Te(_t,ke,Oe,Ye,je);return{id:dt,type:tt,geometry:je,tags:$t}}function Te(Ut,ke,Oe,Ye,dt){const Tt=r.aj+me;let $t;for(let je=0;je<Ut.length-2;je+=2){let _t=Math.round(r.aj*(Ut[je+0]*ke-Oe)),Nt=Math.round(r.aj*(Ut[je+1]*ke-Ye)),Ft=Math.round(r.aj*(Ut[je+2]*ke-Oe)),Sn=Math.round(r.aj*(Ut[je+3]*ke-Ye));const qn=Ft-_t,Wn=Sn-Nt;_t<-128&&Ft<-128||(_t<-128?(Nt+=Math.round(Wn*((-128-_t)/qn)),_t=-128):Ft<-128&&(Sn=Nt+Math.round(Wn*((-128-_t)/qn)),Ft=-128),Nt<-128&&Sn<-128||(Nt<-128?(_t+=Math.round(qn*((-128-Nt)/Wn)),Nt=-128):Sn<-128&&(Ft=_t+Math.round(qn*((-128-Nt)/Wn)),Sn=-128),_t>=Tt&&Ft>=Tt||(_t>=Tt?(Nt+=Math.round(Wn*((Tt-_t)/qn)),_t=Tt):Ft>=Tt&&(Sn=Nt+Math.round(Wn*((Tt-_t)/qn)),Ft=Tt),Nt>=Tt&&Sn>=Tt||(Nt>=Tt?(_t+=Math.round(qn*((Tt-Nt)/Wn)),Nt=Tt):Sn>=Tt&&(Ft=_t+Math.round(qn*((Tt-Nt)/Wn)),Sn=Tt),$t&&_t===$t[$t.length-1][0]&&Nt===$t[$t.length-1][1]||($t=[[_t,Nt]],dt.push($t)),$t.push([Ft,Sn])))))}}var Ae,Ve,We,ft={exports:{}},at=function(){if(We)return ft.exports;We=1;var Ut=r.fg(),ke=function(){if(Ve)return Ae;Ve=1;var Nt=r.fe(),Ft=r.ff().VectorTileFeature;function Sn(Wn,Ir){this.options=Ir||{},this.features=Wn,this.length=Wn.length}function qn(Wn,Ir){this.id=typeof Wn.id=="number"?Wn.id:void 0,this.type=Wn.type,this.rawGeometry=Wn.type===1?[Wn.geometry]:Wn.geometry,this.properties=Wn.tags,this.extent=Ir||4096}return Ae=Sn,Sn.prototype.feature=function(Wn){return new qn(this.features[Wn],this.options.extent)},qn.prototype.loadGeometry=function(){var Wn=this.rawGeometry;this.geometry=[];for(var Ir=0;Ir<Wn.length;Ir++){for(var Mr=Wn[Ir],Lr=[],jt=0;jt<Mr.length;jt++)Lr.push(new Nt(Mr[jt][0],Mr[jt][1]));this.geometry.push(Lr)}return this.geometry},qn.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Wn=this.geometry,Ir=1/0,Mr=-1/0,Lr=1/0,jt=-1/0,kn=0;kn<Wn.length;kn++)for(var br=Wn[kn],Rr=0;Rr<br.length;Rr++){var vi=br[Rr];Ir=Math.min(Ir,vi.x),Mr=Math.max(Mr,vi.x),Lr=Math.min(Lr,vi.y),jt=Math.max(jt,vi.y)}return[Ir,Lr,Mr,jt]},qn.prototype.toGeoJSON=Ft.prototype.toGeoJSON,Ae}();function Oe(Nt){var Ft=new Ut;return function(Sn,qn){for(var Wn in Sn.layers)qn.writeMessage(3,Ye,Sn.layers[Wn])}(Nt,Ft),Ft.finish()}function Ye(Nt,Ft){var Sn;Ft.writeVarintField(15,Nt.version||1),Ft.writeStringField(1,Nt.name||""),Ft.writeVarintField(5,Nt.extent||4096);var qn={keys:[],values:[],keycache:{},valuecache:{}};for(Sn=0;Sn<Nt.length;Sn++)qn.feature=Nt.feature(Sn),Ft.writeMessage(2,dt,qn);var Wn=qn.keys;for(Sn=0;Sn<Wn.length;Sn++)Ft.writeStringField(3,Wn[Sn]);var Ir=qn.values;for(Sn=0;Sn<Ir.length;Sn++)Ft.writeMessage(4,_t,Ir[Sn])}function dt(Nt,Ft){var Sn=Nt.feature;Sn.id!==void 0&&Ft.writeVarintField(1,Sn.id),Ft.writeMessage(2,tt,Nt),Ft.writeVarintField(3,Sn.type),Ft.writeMessage(4,je,Sn)}function tt(Nt,Ft){var Sn=Nt.feature,qn=Nt.keys,Wn=Nt.values,Ir=Nt.keycache,Mr=Nt.valuecache;for(var Lr in Sn.properties){var jt=Sn.properties[Lr],kn=Ir[Lr];if(jt!==null){kn===void 0&&(qn.push(Lr),Ir[Lr]=kn=qn.length-1),Ft.writeVarint(kn);var br=typeof jt;br!=="string"&&br!=="boolean"&&br!=="number"&&(jt=JSON.stringify(jt));var Rr=br+":"+jt,vi=Mr[Rr];vi===void 0&&(Wn.push(jt),Mr[Rr]=vi=Wn.length-1),Ft.writeVarint(vi)}}}function Tt(Nt,Ft){return(Ft<<3)+(7&Nt)}function $t(Nt){return Nt<<1^Nt>>31}function je(Nt,Ft){for(var Sn=Nt.loadGeometry(),qn=Nt.type,Wn=0,Ir=0,Mr=Sn.length,Lr=0;Lr<Mr;Lr++){var jt=Sn[Lr],kn=1;qn===1&&(kn=jt.length),Ft.writeVarint(Tt(1,kn));for(var br=qn===3?jt.length-1:jt.length,Rr=0;Rr<br;Rr++){Rr===1&&qn!==1&&Ft.writeVarint(Tt(2,br-1));var vi=jt[Rr].x-Wn,ci=jt[Rr].y-Ir;Ft.writeVarint($t(vi)),Ft.writeVarint($t(ci)),Wn+=vi,Ir+=ci}qn===3&&Ft.writeVarint(Tt(7,1))}}function _t(Nt,Ft){var Sn=typeof Nt;Sn==="string"?Ft.writeStringField(1,Nt):Sn==="boolean"?Ft.writeBooleanField(7,Nt):Sn==="number"&&(Nt%1!=0?Ft.writeDoubleField(3,Nt):Nt<0?Ft.writeSVarintField(6,Nt):Ft.writeVarintField(5,Nt))}return ft.exports=Oe,ft.exports.fromVectorTileJs=Oe,ft.exports.fromGeojsonVt=function(Nt,Ft){Ft=Ft||{};var Sn={};for(var qn in Nt)Sn[qn]=new ke(Nt[qn].features,Ft),Sn[qn].name=qn,Sn[qn].version=Ft.version,Sn[qn].extent=Ft.extent;return Oe({layers:Sn})},ft.exports.GeoJSONWrapper=ke,ft.exports}(),ct=r.fh(at);const Mt={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Ut=>Ut},Ct=Math.fround||(gt=new Float32Array(1),Ut=>(gt[0]=+Ut,gt[0]));var gt;const Ke=3,Lt=5,xn=6;class Ht{constructor(ke){this.options=Object.assign(Object.create(Mt),ke),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(ke){const{log:Oe,minZoom:Ye,maxZoom:dt}=this.options;Oe&&console.time("total time");const tt=`prepare ${ke.length} points`;Oe&&console.time(tt),this.points=ke;const Tt=[];for(let je=0;je<ke.length;je++){const _t=ke[je];if(!_t.geometry)continue;const[Nt,Ft]=_t.geometry.coordinates,Sn=Ct(Gt(Nt)),qn=Ct(an(Ft));Tt.push(Sn,qn,1/0,je,-1,1),this.options.reduce&&Tt.push(0)}let $t=this.trees[dt+1]=this._createTree(Tt);Oe&&console.timeEnd(tt);for(let je=dt;je>=Ye;je--){const _t=+Date.now();$t=this.trees[je]=this._createTree(this._cluster($t,je)),Oe&&console.log("z%d: %d clusters in %dms",je,$t.numItems,+Date.now()-_t)}return Oe&&console.timeEnd("total time"),this}getClusters(ke,Oe){let Ye=((ke[0]+180)%360+360)%360-180;const dt=Math.max(-90,Math.min(90,ke[1]));let tt=ke[2]===180?180:((ke[2]+180)%360+360)%360-180;const Tt=Math.max(-90,Math.min(90,ke[3]));if(ke[2]-ke[0]>=360)Ye=-180,tt=180;else if(Ye>tt){const Ft=this.getClusters([Ye,dt,180,Tt],Oe),Sn=this.getClusters([-180,dt,tt,Tt],Oe);return Ft.concat(Sn)}const $t=this.trees[this._limitZoom(Oe)],je=$t.range(Gt(Ye),an(Tt),Gt(tt),an(dt)),_t=$t.data,Nt=[];for(const Ft of je){const Sn=this.stride*Ft;Nt.push(_t[Sn+Lt]>1?le(_t,Sn,this.clusterProps):this.points[_t[Sn+Ke]])}return Nt}getChildren(ke){const Oe=this._getOriginId(ke),Ye=this._getOriginZoom(ke),dt="No cluster with the specified id.",tt=this.trees[Ye];if(!tt)throw new Error(dt);const Tt=tt.data;if(Oe*this.stride>=Tt.length)throw new Error(dt);const $t=this.options.radius/(this.options.extent*Math.pow(2,Ye-1)),je=tt.within(Tt[Oe*this.stride],Tt[Oe*this.stride+1],$t),_t=[];for(const Nt of je){const Ft=Nt*this.stride;Tt[Ft+4]===ke&&_t.push(Tt[Ft+Lt]>1?le(Tt,Ft,this.clusterProps):this.points[Tt[Ft+Ke]])}if(_t.length===0)throw new Error(dt);return _t}getLeaves(ke,Oe,Ye){const dt=[];return this._appendLeaves(dt,ke,Oe=Oe||10,Ye=Ye||0,0),dt}getTile(ke,Oe,Ye){const dt=this.trees[this._limitZoom(ke)],tt=Math.pow(2,ke),{extent:Tt,radius:$t}=this.options,je=$t/Tt,_t=(Ye-je)/tt,Nt=(Ye+1+je)/tt,Ft={features:[]};return this._addTileFeatures(dt.range((Oe-je)/tt,_t,(Oe+1+je)/tt,Nt),dt.data,Oe,Ye,tt,Ft),Oe===0&&this._addTileFeatures(dt.range(1-je/tt,_t,1,Nt),dt.data,tt,Ye,tt,Ft),Oe===tt-1&&this._addTileFeatures(dt.range(0,_t,je/tt,Nt),dt.data,-1,Ye,tt,Ft),Ft.features.length?Ft:null}getClusterExpansionZoom(ke){let Oe=this._getOriginZoom(ke)-1;for(;Oe<=this.options.maxZoom;){const Ye=this.getChildren(ke);if(Oe++,Ye.length!==1)break;ke=Ye[0].properties.cluster_id}return Oe}_appendLeaves(ke,Oe,Ye,dt,tt){const Tt=this.getChildren(Oe);for(const $t of Tt){const je=$t.properties;if(je&&je.cluster?tt+je.point_count<=dt?tt+=je.point_count:tt=this._appendLeaves(ke,je.cluster_id,Ye,dt,tt):tt<dt?tt++:ke.push($t),ke.length===Ye)break}return tt}_createTree(ke){const Oe=new r.bW(ke.length/this.stride|0,this.options.nodeSize,Float32Array);for(let Ye=0;Ye<ke.length;Ye+=this.stride)Oe.add(ke[Ye],ke[Ye+1]);return Oe.finish(),Oe.data=ke,Oe}_addTileFeatures(ke,Oe,Ye,dt,tt,Tt){for(const $t of ke){const je=$t*this.stride,_t=Oe[je+Lt]>1;let Nt,Ft,Sn;if(_t)Nt=nt(Oe,je,this.clusterProps),Ft=Oe[je],Sn=Oe[je+1];else{const Ir=this.points[Oe[je+Ke]];Nt=Ir.properties;const[Mr,Lr]=Ir.geometry.coordinates;Ft=Gt(Mr),Sn=an(Lr)}const qn={type:1,geometry:[[Math.round(this.options.extent*(Ft*tt-Ye)),Math.round(this.options.extent*(Sn*tt-dt))]],tags:Nt};let Wn;Wn=_t||this.options.generateId?Oe[je+Ke]:this.points[Oe[je+Ke]].id,Wn!==void 0&&(qn.id=Wn),Tt.features.push(qn)}}_limitZoom(ke){return Math.max(this.options.minZoom,Math.min(Math.floor(+ke),this.options.maxZoom+1))}_cluster(ke,Oe){const{radius:Ye,extent:dt,reduce:tt,minPoints:Tt}=this.options,$t=Ye/(dt*Math.pow(2,Oe)),je=ke.data,_t=[],Nt=this.stride;for(let Ft=0;Ft<je.length;Ft+=Nt){if(je[Ft+2]<=Oe)continue;je[Ft+2]=Oe;const Sn=je[Ft],qn=je[Ft+1],Wn=ke.within(je[Ft],je[Ft+1],$t),Ir=je[Ft+Lt];let Mr=Ir;for(const Lr of Wn){const jt=Lr*Nt;je[jt+2]>Oe&&(Mr+=je[jt+Lt])}if(Mr>Ir&&Mr>=Tt){let Lr,jt=Sn*Ir,kn=qn*Ir,br=-1;const Rr=(Ft/Nt<<5)+(Oe+1)+this.points.length;for(const vi of Wn){const ci=vi*Nt;if(je[ci+2]<=Oe)continue;je[ci+2]=Oe;const xi=je[ci+Lt];jt+=je[ci]*xi,kn+=je[ci+1]*xi,je[ci+4]=Rr,tt&&(Lr||(Lr=this._map(je,Ft,!0),br=this.clusterProps.length,this.clusterProps.push(Lr)),tt(Lr,this._map(je,ci)))}je[Ft+4]=Rr,_t.push(jt/Mr,kn/Mr,1/0,Rr,-1,Mr),tt&&_t.push(br)}else{for(let Lr=0;Lr<Nt;Lr++)_t.push(je[Ft+Lr]);if(Mr>1)for(const Lr of Wn){const jt=Lr*Nt;if(!(je[jt+2]<=Oe)){je[jt+2]=Oe;for(let kn=0;kn<Nt;kn++)_t.push(je[jt+kn])}}}}return _t}_getOriginId(ke){return ke-this.points.length>>5}_getOriginZoom(ke){return(ke-this.points.length)%32}_map(ke,Oe,Ye){if(ke[Oe+Lt]>1){const Tt=this.clusterProps[ke[Oe+xn]];return Ye?Object.assign({},Tt):Tt}const dt=this.points[ke[Oe+Ke]].properties,tt=this.options.map(dt);return Ye&&tt===dt?Object.assign({},tt):tt}}function le(Ut,ke,Oe){return{type:"Feature",id:Ut[ke+Ke],properties:nt(Ut,ke,Oe),geometry:{type:"Point",coordinates:[(Ye=Ut[ke],360*(Ye-.5)),Qt(Ut[ke+1])]}};var Ye}function nt(Ut,ke,Oe){const Ye=Ut[ke+Lt],dt=Ye>=1e4?`${Math.round(Ye/1e3)}k`:Ye>=1e3?Math.round(Ye/100)/10+"k":Ye,tt=Ut[ke+xn],Tt=tt===-1?{}:Object.assign({},Oe[tt]);return Object.assign(Tt,{cluster:!0,cluster_id:Ut[ke+Ke],point_count:Ye,point_count_abbreviated:dt})}function Gt(Ut){return Ut/360+.5}function an(Ut){const ke=Math.sin(Ut*Math.PI/180),Oe=.5-.25*Math.log((1+ke)/(1-ke))/Math.PI;return Oe<0?0:Oe>1?1:Oe}function Qt(Ut){const ke=(180-360*Ut)*Math.PI/180;return 360*Math.atan(Math.exp(ke))/Math.PI-90}function Zt(Ut,ke,Oe,Ye){let dt=Ye;const tt=ke+(Oe-ke>>1);let Tt,$t=Oe-ke;const je=Ut[ke],_t=Ut[ke+1],Nt=Ut[Oe],Ft=Ut[Oe+1];for(let Sn=ke+3;Sn<Oe;Sn+=3){const qn=rn(Ut[Sn],Ut[Sn+1],je,_t,Nt,Ft);if(qn>dt)Tt=Sn,dt=qn;else if(qn===dt){const Wn=Math.abs(Sn-tt);Wn<$t&&(Tt=Sn,$t=Wn)}}dt>Ye&&(Tt-ke>3&&Zt(Ut,ke,Tt,Ye),Ut[Tt+2]=dt,Oe-Tt>3&&Zt(Ut,Tt,Oe,Ye))}function rn(Ut,ke,Oe,Ye,dt,tt){let Tt=dt-Oe,$t=tt-Ye;if(Tt!==0||$t!==0){const je=((Ut-Oe)*Tt+(ke-Ye)*$t)/(Tt*Tt+$t*$t);je>1?(Oe=dt,Ye=tt):je>0&&(Oe+=Tt*je,Ye+=$t*je)}return Tt=Ut-Oe,$t=ke-Ye,Tt*Tt+$t*$t}function bt(Ut,ke,Oe,Ye){const dt={id:Ut??null,type:ke,geometry:Oe,tags:Ye,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(ke==="Point"||ke==="MultiPoint"||ke==="LineString")fn(dt,Oe);else if(ke==="Polygon")fn(dt,Oe[0]);else if(ke==="MultiLineString")for(const tt of Oe)fn(dt,tt);else if(ke==="MultiPolygon")for(const tt of Oe)fn(dt,tt[0]);return dt}function fn(Ut,ke){for(let Oe=0;Oe<ke.length;Oe+=3)Ut.minX=Math.min(Ut.minX,ke[Oe]),Ut.minY=Math.min(Ut.minY,ke[Oe+1]),Ut.maxX=Math.max(Ut.maxX,ke[Oe]),Ut.maxY=Math.max(Ut.maxY,ke[Oe+1])}function pn(Ut,ke,Oe,Ye){if(!ke.geometry)return;const dt=ke.geometry.coordinates;if(dt&&dt.length===0)return;const tt=ke.geometry.type,Tt=Math.pow(Oe.tolerance/((1<<Oe.maxZoom)*Oe.extent),2);let $t=[],je=ke.id;if(Oe.promoteId?je=ke.properties[Oe.promoteId]:Oe.generateId&&(je=Ye||0),tt==="Point")Vn(dt,$t);else if(tt==="MultiPoint")for(const _t of dt)Vn(_t,$t);else if(tt==="LineString")Nn(dt,$t,Tt,!1);else if(tt==="MultiLineString"){if(Oe.lineMetrics){for(const _t of dt)$t=[],Nn(_t,$t,Tt,!1),Ut.push(bt(je,"LineString",$t,ke.properties));return}Ot(dt,$t,Tt,!1)}else if(tt==="Polygon")Ot(dt,$t,Tt,!0);else{if(tt!=="MultiPolygon"){if(tt==="GeometryCollection"){for(const _t of ke.geometry.geometries)pn(Ut,{id:je,geometry:_t,properties:ke.properties},Oe,Ye);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const _t of dt){const Nt=[];Ot(_t,Nt,Tt,!0),$t.push(Nt)}}Ut.push(bt(je,tt,$t,ke.properties))}function Vn(Ut,ke){ke.push(Bn(Ut[0]),Sr(Ut[1]),0)}function Nn(Ut,ke,Oe,Ye){let dt,tt,Tt=0;for(let je=0;je<Ut.length;je++){const _t=Bn(Ut[je][0]),Nt=Sr(Ut[je][1]);ke.push(_t,Nt,0),je>0&&(Tt+=Ye?(dt*Nt-_t*tt)/2:Math.sqrt(Math.pow(_t-dt,2)+Math.pow(Nt-tt,2))),dt=_t,tt=Nt}const $t=ke.length-3;ke[2]=1,Zt(ke,0,$t,Oe),ke[$t+2]=1,ke.size=Math.abs(Tt),ke.start=0,ke.end=ke.size}function Ot(Ut,ke,Oe,Ye){for(let dt=0;dt<Ut.length;dt++){const tt=[];Nn(Ut[dt],tt,Oe,Ye),ke.push(tt)}}function Bn(Ut){return Ut/360+.5}function Sr(Ut){const ke=Math.sin(Ut*Math.PI/180),Oe=.5-.25*Math.log((1+ke)/(1-ke))/Math.PI;return Oe<0?0:Oe>1?1:Oe}function Ur(Ut,ke,Oe,Ye,dt,tt,Tt,$t){if(Ye/=ke,tt>=(Oe/=ke)&&Tt<Ye)return Ut;if(Tt<Oe||tt>=Ye)return null;const je=[];for(const _t of Ut){const Nt=_t.geometry;let Ft=_t.type;const Sn=dt===0?_t.minX:_t.minY,qn=dt===0?_t.maxX:_t.maxY;if(Sn>=Oe&&qn<Ye){je.push(_t);continue}if(qn<Oe||Sn>=Ye)continue;let Wn=[];if(Ft==="Point"||Ft==="MultiPoint")Kn(Nt,Wn,Oe,Ye,dt);else if(Ft==="LineString")ui(Nt,Wn,Oe,Ye,dt,!1,$t.lineMetrics);else if(Ft==="MultiLineString")Tr(Nt,Wn,Oe,Ye,dt,!1);else if(Ft==="Polygon")Tr(Nt,Wn,Oe,Ye,dt,!0);else if(Ft==="MultiPolygon")for(const Ir of Nt){const Mr=[];Tr(Ir,Mr,Oe,Ye,dt,!0),Mr.length&&Wn.push(Mr)}if(Wn.length){if($t.lineMetrics&&Ft==="LineString"){for(const Ir of Wn)je.push(bt(_t.id,Ft,Ir,_t.tags));continue}Ft!=="LineString"&&Ft!=="MultiLineString"||(Wn.length===1?(Ft="LineString",Wn=Wn[0]):Ft="MultiLineString"),Ft!=="Point"&&Ft!=="MultiPoint"||(Ft=Wn.length===3?"Point":"MultiPoint"),je.push(bt(_t.id,Ft,Wn,_t.tags))}}return je.length?je:null}function Kn(Ut,ke,Oe,Ye,dt){for(let tt=0;tt<Ut.length;tt+=3){const Tt=Ut[tt+dt];Tt>=Oe&&Tt<=Ye&&pr(ke,Ut[tt],Ut[tt+1],Ut[tt+2])}}function ui(Ut,ke,Oe,Ye,dt,tt,Tt){let $t=wr(Ut);const je=dt===0?Fr:vt;let _t,Nt,Ft=Ut.start;for(let Mr=0;Mr<Ut.length-3;Mr+=3){const Lr=Ut[Mr],jt=Ut[Mr+1],kn=Ut[Mr+2],br=Ut[Mr+3],Rr=Ut[Mr+4],vi=dt===0?Lr:jt,ci=dt===0?br:Rr;let xi=!1;Tt&&(_t=Math.sqrt(Math.pow(Lr-br,2)+Math.pow(jt-Rr,2))),vi<Oe?ci>Oe&&(Nt=je($t,Lr,jt,br,Rr,Oe),Tt&&($t.start=Ft+_t*Nt)):vi>Ye?ci<Ye&&(Nt=je($t,Lr,jt,br,Rr,Ye),Tt&&($t.start=Ft+_t*Nt)):pr($t,Lr,jt,kn),ci<Oe&&vi>=Oe&&(Nt=je($t,Lr,jt,br,Rr,Oe),xi=!0),ci>Ye&&vi<=Ye&&(Nt=je($t,Lr,jt,br,Rr,Ye),xi=!0),!tt&&xi&&(Tt&&($t.end=Ft+_t*Nt),ke.push($t),$t=wr(Ut)),Tt&&(Ft+=_t)}let Sn=Ut.length-3;const qn=Ut[Sn],Wn=Ut[Sn+1],Ir=dt===0?qn:Wn;Ir>=Oe&&Ir<=Ye&&pr($t,qn,Wn,Ut[Sn+2]),Sn=$t.length-3,tt&&Sn>=3&&($t[Sn]!==$t[0]||$t[Sn+1]!==$t[1])&&pr($t,$t[0],$t[1],$t[2]),$t.length&&ke.push($t)}function wr(Ut){const ke=[];return ke.size=Ut.size,ke.start=Ut.start,ke.end=Ut.end,ke}function Tr(Ut,ke,Oe,Ye,dt,tt){for(const Tt of Ut)ui(Tt,ke,Oe,Ye,dt,tt,!1)}function pr(Ut,ke,Oe,Ye){Ut.push(ke,Oe,Ye)}function Fr(Ut,ke,Oe,Ye,dt,tt){const Tt=(tt-ke)/(Ye-ke);return pr(Ut,tt,Oe+(dt-Oe)*Tt,1),Tt}function vt(Ut,ke,Oe,Ye,dt,tt){const Tt=(tt-Oe)/(dt-Oe);return pr(Ut,ke+(Ye-ke)*Tt,tt,1),Tt}function yt(Ut,ke){const Oe=[];for(let Ye=0;Ye<Ut.length;Ye++){const dt=Ut[Ye],tt=dt.type;let Tt;if(tt==="Point"||tt==="MultiPoint"||tt==="LineString")Tt=it(dt.geometry,ke);else if(tt==="MultiLineString"||tt==="Polygon"){Tt=[];for(const $t of dt.geometry)Tt.push(it($t,ke))}else if(tt==="MultiPolygon"){Tt=[];for(const $t of dt.geometry){const je=[];for(const _t of $t)je.push(it(_t,ke));Tt.push(je)}}Oe.push(bt(dt.id,tt,Tt,dt.tags))}return Oe}function it(Ut,ke){const Oe=[];Oe.size=Ut.size,Ut.start!==void 0&&(Oe.start=Ut.start,Oe.end=Ut.end);for(let Ye=0;Ye<Ut.length;Ye+=3)Oe.push(Ut[Ye]+ke,Ut[Ye+1],Ut[Ye+2]);return Oe}function ln(Ut,ke){if(Ut.transformed)return Ut;const Oe=1<<Ut.z,Ye=Ut.x,dt=Ut.y;for(const tt of Ut.features){const Tt=tt.geometry,$t=tt.type;if(tt.geometry=[],$t===1)for(let je=0;je<Tt.length;je+=2)tt.geometry.push(Xn(Tt[je],Tt[je+1],ke,Oe,Ye,dt));else for(let je=0;je<Tt.length;je++){const _t=[];for(let Nt=0;Nt<Tt[je].length;Nt+=2)_t.push(Xn(Tt[je][Nt],Tt[je][Nt+1],ke,Oe,Ye,dt));tt.geometry.push(_t)}}return Ut.transformed=!0,Ut}function Xn(Ut,ke,Oe,Ye,dt,tt){return[Math.round(Oe*(Ut*Ye-dt)),Math.round(Oe*(ke*Ye-tt))]}function vr(Ut,ke,Oe,Ye,dt){const tt=ke===dt.maxZoom?0:dt.tolerance/((1<<ke)*dt.extent),Tt={features:[],numPoints:0,numSimplified:0,numFeatures:Ut.length,source:null,x:Oe,y:Ye,z:ke,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const $t of Ut)Ii(Tt,$t,tt,dt);return Tt}function Ii(Ut,ke,Oe,Ye){const dt=ke.geometry,tt=ke.type,Tt=[];if(Ut.minX=Math.min(Ut.minX,ke.minX),Ut.minY=Math.min(Ut.minY,ke.minY),Ut.maxX=Math.max(Ut.maxX,ke.maxX),Ut.maxY=Math.max(Ut.maxY,ke.maxY),tt==="Point"||tt==="MultiPoint")for(let $t=0;$t<dt.length;$t+=3)Tt.push(dt[$t],dt[$t+1]),Ut.numPoints++,Ut.numSimplified++;else if(tt==="LineString")ds(Tt,dt,Ut,Oe,!1,!1);else if(tt==="MultiLineString"||tt==="Polygon")for(let $t=0;$t<dt.length;$t++)ds(Tt,dt[$t],Ut,Oe,tt==="Polygon",$t===0);else if(tt==="MultiPolygon")for(let $t=0;$t<dt.length;$t++){const je=dt[$t];for(let _t=0;_t<je.length;_t++)ds(Tt,je[_t],Ut,Oe,!0,_t===0)}if(Tt.length){let $t=ke.tags||null;if(tt==="LineString"&&Ye.lineMetrics){$t={};for(const _t in ke.tags)$t[_t]=ke.tags[_t];$t.mapbox_clip_start=dt.start/dt.size,$t.mapbox_clip_end=dt.end/dt.size}const je={geometry:Tt,type:tt==="Polygon"||tt==="MultiPolygon"?3:tt==="LineString"||tt==="MultiLineString"?2:1,tags:$t};ke.id!==null&&(je.id=ke.id),Ut.features.push(je)}}function ds(Ut,ke,Oe,Ye,dt,tt){const Tt=Ye*Ye;if(Ye>0&&ke.size<(dt?Tt:Ye))return void(Oe.numPoints+=ke.length/3);const $t=[];for(let je=0;je<ke.length;je+=3)(Ye===0||ke[je+2]>Tt)&&(Oe.numSimplified++,$t.push(ke[je],ke[je+1])),Oe.numPoints++;dt&&function(je,_t){let Nt=0;for(let Ft=0,Sn=je.length,qn=Sn-2;Ft<Sn;qn=Ft,Ft+=2)Nt+=(je[Ft]-je[qn])*(je[Ft+1]+je[qn+1]);if(Nt>0===_t)for(let Ft=0,Sn=je.length;Ft<Sn/2;Ft+=2){const qn=je[Ft],Wn=je[Ft+1];je[Ft]=je[Sn-2-Ft],je[Ft+1]=je[Sn-1-Ft],je[Sn-2-Ft]=qn,je[Sn-1-Ft]=Wn}}($t,tt),Ut.push($t)}const Qs={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class Xs{constructor(ke,Oe){const Ye=(Oe=this.options=function(tt,Tt){for(const $t in Tt)tt[$t]=Tt[$t];return tt}(Object.create(Qs),Oe)).debug;if(Ye&&console.time("preprocess data"),Oe.maxZoom<0||Oe.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(Oe.promoteId&&Oe.generateId)throw new Error("promoteId and generateId cannot be used together.");let dt=function(tt,Tt){const $t=[];if(tt.type==="FeatureCollection")for(let je=0;je<tt.features.length;je++)pn($t,tt.features[je],Tt,je);else pn($t,tt.type==="Feature"?tt:{geometry:tt},Tt);return $t}(ke,Oe);this.tiles={},this.tileCoords=[],Ye&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",Oe.indexMaxZoom,Oe.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),dt=function(tt,Tt){const $t=Tt.buffer/Tt.extent;let je=tt;const _t=Ur(tt,1,-1-$t,$t,0,-1,2,Tt),Nt=Ur(tt,1,1-$t,2+$t,0,-1,2,Tt);return(_t||Nt)&&(je=Ur(tt,1,-$t,1+$t,0,-1,2,Tt)||[],_t&&(je=yt(_t,1).concat(je)),Nt&&(je=je.concat(yt(Nt,-1)))),je}(dt,Oe),dt.length&&this.splitTile(dt,0,0,0),Ye&&(dt.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(ke,Oe,Ye,dt,tt,Tt,$t){const je=[ke,Oe,Ye,dt],_t=this.options,Nt=_t.debug;for(;je.length;){dt=je.pop(),Ye=je.pop(),Oe=je.pop(),ke=je.pop();const Ft=1<<Oe,Sn=ks(Oe,Ye,dt);let qn=this.tiles[Sn];if(!qn&&(Nt>1&&console.time("creation"),qn=this.tiles[Sn]=vr(ke,Oe,Ye,dt,_t),this.tileCoords.push({z:Oe,x:Ye,y:dt}),Nt)){Nt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",Oe,Ye,dt,qn.numFeatures,qn.numPoints,qn.numSimplified),console.timeEnd("creation"));const xi=`z${Oe}`;this.stats[xi]=(this.stats[xi]||0)+1,this.total++}if(qn.source=ke,tt==null){if(Oe===_t.indexMaxZoom||qn.numPoints<=_t.indexMaxPoints)continue}else{if(Oe===_t.maxZoom||Oe===tt)continue;if(tt!=null){const xi=tt-Oe;if(Ye!==Tt>>xi||dt!==$t>>xi)continue}}if(qn.source=null,ke.length===0)continue;Nt>1&&console.time("clipping");const Wn=.5*_t.buffer/_t.extent,Ir=.5-Wn,Mr=.5+Wn,Lr=1+Wn;let jt=null,kn=null,br=null,Rr=null,vi=Ur(ke,Ft,Ye-Wn,Ye+Mr,0,qn.minX,qn.maxX,_t),ci=Ur(ke,Ft,Ye+Ir,Ye+Lr,0,qn.minX,qn.maxX,_t);ke=null,vi&&(jt=Ur(vi,Ft,dt-Wn,dt+Mr,1,qn.minY,qn.maxY,_t),kn=Ur(vi,Ft,dt+Ir,dt+Lr,1,qn.minY,qn.maxY,_t),vi=null),ci&&(br=Ur(ci,Ft,dt-Wn,dt+Mr,1,qn.minY,qn.maxY,_t),Rr=Ur(ci,Ft,dt+Ir,dt+Lr,1,qn.minY,qn.maxY,_t),ci=null),Nt>1&&console.timeEnd("clipping"),je.push(jt||[],Oe+1,2*Ye,2*dt),je.push(kn||[],Oe+1,2*Ye,2*dt+1),je.push(br||[],Oe+1,2*Ye+1,2*dt),je.push(Rr||[],Oe+1,2*Ye+1,2*dt+1)}}getTile(ke,Oe,Ye){ke=+ke,Oe=+Oe,Ye=+Ye;const dt=this.options,{extent:tt,debug:Tt}=dt;if(ke<0||ke>24)return null;const $t=1<<ke,je=ks(ke,Oe=Oe+$t&$t-1,Ye);if(this.tiles[je])return ln(this.tiles[je],tt);Tt>1&&console.log("drilling down to z%d-%d-%d",ke,Oe,Ye);let _t,Nt=ke,Ft=Oe,Sn=Ye;for(;!_t&&Nt>0;)Nt--,Ft>>=1,Sn>>=1,_t=this.tiles[ks(Nt,Ft,Sn)];return _t&&_t.source?(Tt>1&&(console.log("found parent tile z%d-%d-%d",Nt,Ft,Sn),console.time("drilling down")),this.splitTile(_t.source,Nt,Ft,Sn,ke,Oe,Ye),Tt>1&&console.timeEnd("drilling down"),this.tiles[je]?ln(this.tiles[je],tt):null):null}}function ks(Ut,ke,Oe){return 32*((1<<Ut)*Oe+ke)+Ut}function Rn(Ut,ke){const Oe=Ut.tileID.canonical;if(!this._geoJSONIndex)return void ke(null,null);const Ye=this._geoJSONIndex.getTile(Oe.z,Oe.x,Oe.y);if(!Ye)return void ke(null,null);const dt=je=>je.tags&&"3d_elevation_id"in je.tags&&"source"in je.tags&&je.tags.source==="elevation",tt=Ye.features.filter(je=>dt(je));let Tt;if(tt.length>0){const je=Ye.features.filter(_t=>!dt(_t));Tt=new fe({_geojsonTileLayer:je,hd_road_elevation:tt})}else Tt=new re(Ye.features);let $t=ct(Tt);$t.byteOffset===0&&$t.byteLength===$t.buffer.byteLength||($t=new Uint8Array($t)),ke(null,{vectorTile:Tt,rawData:$t.buffer})}class Ri extends q{constructor(ke,Oe,Ye,dt,tt,Tt,$t){super(ke,Oe,Ye,dt,tt,Rn,$t),Tt&&(this.loadGeoJSON=Tt),this._dynamicIndex=new we}loadData(ke,Oe){const Ye=ke&&ke.request,dt=Ye&&Ye.collectResourceTiming;this.loadGeoJSON(ke,(tt,Tt)=>{if(tt||!Tt)return Oe(tt);if(typeof Tt!="object")return Oe(new Error(`Input data given to '${ke.source}' is not a valid GeoJSON object.`));{try{if(ke.filter){const je=r.X(ke.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(je.result==="error")throw new Error(je.value.map(_t=>`${_t.key}: ${_t.message}`).join(", "));Tt.features=Tt.features.filter(_t=>je.value.evaluate({zoom:0},_t))}ke.dynamic?(Tt.type==="Feature"&&(Tt={type:"FeatureCollection",features:[Tt]}),ke.append||(this._dynamicIndex.clear(),this.loaded={}),this._dynamicIndex.load(Tt.features,this.loaded),ke.cluster&&(Tt.features=this._dynamicIndex.getFeatures())):this.loaded={},this._geoJSONIndex=ke.cluster?new Ht(function({superclusterOptions:je,clusterProperties:_t}){if(!_t||!je)return je;const Nt={},Ft={},Sn={accumulated:null,zoom:0},qn={properties:null},Wn=Object.keys(_t);for(const Ir of Wn){const[Mr,Lr]=_t[Ir],jt=r.X(Lr),kn=r.X(typeof Mr=="string"?[Mr,["accumulated"],["get",Ir]]:Mr);Nt[Ir]=jt.value,Ft[Ir]=kn.value}return je.map=Ir=>{qn.properties=Ir;const Mr={};for(const Lr of Wn)Mr[Lr]=Nt[Lr].evaluate(Sn,qn);return Mr},je.reduce=(Ir,Mr)=>{qn.properties=Mr;for(const Lr of Wn)Sn.accumulated=Ir[Lr],Ir[Lr]=Ft[Lr].evaluate(Sn,qn)},je}(ke)).load(Tt.features):ke.dynamic?this._dynamicIndex:function(je,_t){return new Xs(je,_t)}(Tt,ke.geojsonVtOptions)}catch(je){return Oe(je)}const $t={};if(dt){const je=E(Ye);je&&($t.resourceTiming={},$t.resourceTiming[ke.source]=JSON.parse(JSON.stringify(je)))}Oe(null,$t)}})}reloadTile(ke,Oe){const Ye=this.loaded;return Ye&&Ye[ke.uid]?ke.partial?Oe(null,void 0):super.reloadTile(ke,Oe):this.loadTile(ke,Oe)}loadGeoJSON(ke,Oe){if(ke.request)r.n(ke.request,Oe);else{if(typeof ke.data!="string")return Oe(new Error(`Input data given to '${ke.source}' is not a valid GeoJSON object.`));try{return Oe(null,JSON.parse(ke.data))}catch{return Oe(new Error(`Input data given to '${ke.source}' is not a valid GeoJSON object.`))}}}getClusterExpansionZoom(ke,Oe){try{Oe(null,this._geoJSONIndex.getClusterExpansionZoom(ke.clusterId))}catch(Ye){Oe(Ye)}}getClusterChildren(ke,Oe){try{Oe(null,this._geoJSONIndex.getChildren(ke.clusterId))}catch(Ye){Oe(Ye)}}getClusterLeaves(ke,Oe){try{Oe(null,this._geoJSONIndex.getLeaves(ke.clusterId,ke.limit,ke.offset))}catch(Ye){Oe(Ye)}}}class _r{constructor(ke,Oe,Ye){this.tileID=new r.aM(ke.tileID.overscaledZ,ke.tileID.wrap,ke.tileID.canonical.z,ke.tileID.canonical.x,ke.tileID.canonical.y),this.tileZoom=ke.tileZoom,this.uid=ke.uid,this.zoom=ke.zoom,this.canonical=ke.tileID.canonical,this.pixelRatio=ke.pixelRatio,this.tileSize=ke.tileSize,this.source=ke.source,this.overscaling=this.tileID.overscaleFactor(),this.projection=ke.projection,this.brightness=Oe,this.worldview=Ye}parse(ke,Oe,Ye,dt){this.status="parsing";const tt=new r.aM(Ye.tileID.overscaledZ,Ye.tileID.wrap,Ye.tileID.canonical.z,Ye.tileID.canonical.x,Ye.tileID.canonical.y),Tt=[],$t=Oe.familiesBySource[Ye.source],je=new r.f0(tt,Ye.promoteId);je.bucketLayerIDs=[],je.is3DTile=!0,r.fi(ke).then(_t=>{if(!_t)return dt(new Error("Could not parse tile"));const Nt=_t.json.extensionsUsed&&_t.json.extensionsUsed.includes("MAPBOX_mesh_features")||_t.json.asset.extras&&_t.json.asset.extras.MAPBOX_mesh_features,Ft=_t.json.extensionsUsed&&_t.json.extensionsUsed.includes("EXT_meshopt_compression"),Sn=new r.aa(this.zoom,{brightness:this.brightness,worldview:this.worldview});for(const qn in $t)for(const Wn of $t[qn]){const Ir=Wn[0];je.bucketLayerIDs.push(Wn.map(jt=>r.C(jt.id,jt.scope))),Ir.recalculate(Sn,[]);const Mr=r.fj(_t,1/r.cU(Ye.tileID.canonical)),Lr=new r.fk(Wn,Mr,tt,Nt,Ft,this.brightness,je,this.worldview);Nt||(Lr.needsUpload=!0),Tt.push(Lr),Lr.evaluate(Ir)}this.status="done",dt(null,{buckets:Tt,featureIndex:je,collisionBoxArray:null,glyphAtlasImage:null,lineAtlas:null,imageAtlas:null,brightness:null})}).catch(_t=>dt(new Error(_t.message)))}}class pa{constructor(ke,Oe,Ye,dt,tt,Tt,$t,je){this.actor=ke,this.layerIndex=Oe,this.availableImages=Ye,this.availableModels=dt,this.brightness=$t,this.loading={},this.loaded={},this.worldview=je}loadTile(ke,Oe){const Ye=ke.uid,dt=this.loading[Ye]=new _r(ke,this.brightness,this.worldview);r.br(ke.request,(tt,Tt)=>{const $t=!this.loading[Ye];return delete this.loading[Ye],$t||tt?(dt.status="done",$t||(this.loaded[Ye]=dt),Oe(tt)):Tt&&Tt.byteLength!==0?void dt.parse(Tt,this.layerIndex,ke,(je,_t)=>{dt.status="done",this.loaded=this.loaded||{},this.loaded[Ye]=dt,je||!_t?Oe(je):Oe(null,_t)}):(dt.status="done",this.loaded[Ye]=dt,Oe())})}reloadTile(ke,Oe){const Ye=this.loaded,dt=ke.uid;if(Ye&&Ye[dt]){const tt=Ye[dt];tt.projection=ke.projection,tt.brightness=ke.brightness;const Tt=($t,je)=>{tt.reloadCallback&&(delete tt.reloadCallback,this.loadTile(ke,Oe)),Oe($t,je)};tt.status==="parsing"?tt.reloadCallback=Tt:tt.status==="done"&&this.loadTile(ke,Oe)}}abortTile(ke,Oe){const Ye=ke.uid;this.loading[Ye]&&delete this.loading[Ye],Oe()}removeTile(ke,Oe){const Ye=this.loaded,dt=ke.uid;Ye&&Ye[dt]&&delete Ye[dt],Oe()}}class gi{constructor(ke){this.self=ke,this.actor=new r.fm(ke,this),this.layerIndexes={},this.availableImages={},this.availableModels={},this.isSpriteLoaded={},this.imageRasterizer=new r.y,this.rtlPluginParsingListeners=[],this.projections={},this.defaultProjection=r.ce({name:"mercator"}),this.workerSourceTypes={vector:q,geojson:Ri,"raster-dem":G,"raster-array":W,"batched-model":pa},this.workerSources={},this.self.registerWorkerSource=(Oe,Ye)=>{if(this.workerSourceTypes[Oe])throw new Error(`Worker source with name "${Oe}" already registered.`);this.workerSourceTypes[Oe]=Ye},this.self.registerRTLTextPlugin=Oe=>{if(r.fn.isParsed())throw new Error("RTL text plugin already registered.");r.fn.setState({pluginStatus:r.fo.parsed,pluginURL:r.fn.getPluginURL()}),r.fn.applyArabicShaping=Oe.applyArabicShaping,r.fn.processBidirectionalText=Oe.processBidirectionalText,r.fn.processStyledBidirectionalText=Oe.processStyledBidirectionalText;for(const Ye of this.rtlPluginParsingListeners)Ye(null,!0);this.rtlPluginParsingListeners=[]}}clearCaches(ke,Oe,Ye){delete this.layerIndexes[ke],delete this.availableImages[ke],delete this.availableModels[ke],delete this.workerSources[ke],Ye()}checkIfReady(ke,Oe,Ye){Ye()}setReferrer(ke,Oe){this.referrer=Oe}spriteLoaded(ke,Oe){this.isSpriteLoaded[ke]||(this.isSpriteLoaded[ke]={});const{scope:Ye,isLoaded:dt}=Oe;if(this.isSpriteLoaded[ke][Ye]=dt,this.workerSources[ke]&&this.workerSources[ke][Ye])for(const tt in this.workerSources[ke][Ye]){const Tt=this.workerSources[ke][Ye][tt];for(const $t in Tt){const je=Tt[$t];je instanceof q&&(je.isSpriteLoaded=dt,je.fire(new r.A("isSpriteLoaded")))}}}setImages(ke,Oe,Ye){this.availableImages[ke]||(this.availableImages[ke]={});const{scope:dt,images:tt}=Oe;if(this.availableImages[ke][dt]=tt,this.workerSources[ke]&&this.workerSources[ke][dt]){for(const Tt in this.workerSources[ke][dt]){const $t=this.workerSources[ke][dt][Tt];for(const je in $t)$t[je].availableImages=tt}Ye()}else Ye()}setModels(ke,{scope:Oe,models:Ye},dt){if(this.availableModels[ke]||(this.availableModels[ke]={}),this.availableModels[ke][Oe]=Ye,this.workerSources[ke]&&this.workerSources[ke][Oe]){for(const tt in this.workerSources[ke][Oe]){const Tt=this.workerSources[ke][Oe][tt];for(const $t in Tt)Tt[$t].availableModels=Ye}dt()}else dt()}setProjection(ke,Oe){this.projections[ke]=r.ce(Oe)}setBrightness(ke,Oe,Ye){this.brightness=Oe,Ye()}setWorldview(ke,Oe,Ye){this.worldview=Oe,Ye()}setLayers(ke,Oe,Ye){this.getLayerIndex(ke,Oe.scope).replace(Oe.layers,Oe.options),Ye()}updateLayers(ke,Oe,Ye){this.getLayerIndex(ke,Oe.scope).update(Oe.layers,Oe.removedIds,Oe.options),Ye()}loadTile(ke,Oe,Ye){Oe.projection=this.projections[ke]||this.defaultProjection,this.getWorkerSource(ke,Oe.type,Oe.source,Oe.scope).loadTile(Oe,Ye)}decodeRasterArray(ke,Oe,Ye){this.getWorkerSource(ke,Oe.type,Oe.source,Oe.scope).decodeRasterArray(Oe,Ye)}reloadTile(ke,Oe,Ye){Oe.projection=this.projections[ke]||this.defaultProjection,this.getWorkerSource(ke,Oe.type,Oe.source,Oe.scope).reloadTile(Oe,Ye)}abortTile(ke,Oe,Ye){this.getWorkerSource(ke,Oe.type,Oe.source,Oe.scope).abortTile(Oe,Ye)}removeTile(ke,Oe,Ye){this.getWorkerSource(ke,Oe.type,Oe.source,Oe.scope).removeTile(Oe,Ye)}removeSource(ke,Oe,Ye){if(!(this.workerSources[ke]&&this.workerSources[ke][Oe.scope]&&this.workerSources[ke][Oe.scope][Oe.type]&&this.workerSources[ke][Oe.scope][Oe.type][Oe.source]))return;const dt=this.workerSources[ke][Oe.scope][Oe.type][Oe.source];delete this.workerSources[ke][Oe.scope][Oe.type][Oe.source],dt.removeSource!==void 0?dt.removeSource(Oe,Ye):Ye()}loadWorkerSource(ke,Oe,Ye){try{this.self.importScripts(Oe.url),Ye()}catch(dt){Ye(dt.toString())}}syncRTLPluginState(ke,Oe,Ye){if(r.fn.isParsed())Ye(null,!0);else if(r.fn.isParsing())this.rtlPluginParsingListeners.push(Ye);else try{r.fn.setState(Oe);const dt=r.fn.getPluginURL();!r.fn.isLoaded()||r.fn.isParsed()||r.fn.isParsing()||dt==null||(r.fn.setState({pluginStatus:r.fo.parsing,pluginURL:r.fn.getPluginURL()}),this.self.importScripts(dt),r.fn.isParsed()?Ye(null,!0):this.rtlPluginParsingListeners.push(Ye))}catch(dt){Ye(dt.toString())}}setDracoUrl(ke,Oe){this.dracoUrl=Oe}getAvailableImages(ke,Oe){this.availableImages[ke]||(this.availableImages[ke]={});let Ye=this.availableImages[ke][Oe];return Ye||(Ye=[]),Ye}getAvailableModels(ke,Oe){this.availableModels[ke]||(this.availableModels[ke]={});let Ye=this.availableModels[ke][Oe];return Ye||(Ye={}),Ye}getLayerIndex(ke,Oe){this.layerIndexes[ke]||(this.layerIndexes[ke]={});let Ye=this.layerIndexes[ke][Oe];return Ye||(Ye=this.layerIndexes[ke][Oe]=new P,Ye.scope=Oe),Ye}getWorkerSource(ke,Oe,Ye,dt){const tt=this.workerSources;return tt[ke]||(tt[ke]={}),tt[ke][dt]||(tt[ke][dt]={}),tt[ke][dt][Oe]||(tt[ke][dt][Oe]={}),this.isSpriteLoaded[ke]||(this.isSpriteLoaded[ke]={}),tt[ke][dt][Oe][Ye]||(tt[ke][dt][Oe][Ye]=new this.workerSourceTypes[Oe]({send:(Tt,$t,je,_t,Nt,Ft)=>this.actor.send(Tt,$t,je,ke,Nt,Ft),scheduler:this.actor.scheduler},this.getLayerIndex(ke,dt),this.getAvailableImages(ke,dt),this.getAvailableModels(ke,dt),this.isSpriteLoaded[ke][dt],void 0,this.brightness,this.worldview)),tt[ke][dt][Oe][Ye]}rasterizeImagesWorker(ke,Oe,Ye){const dt=new Map;for(const[tt,{image:Tt,imageVariant:$t}]of Oe.tasks.entries()){const je=this.imageRasterizer.rasterize($t,Tt,Oe.scope,ke);dt.set(tt,je)}Ye(void 0,dt)}removeRasterizedImages(ke,Oe,Ye){this.imageRasterizer.removeImagesFromCacheByIds(Oe.imageIds,Oe.scope,ke),Ye()}enforceCacheSizeLimit(ke,Oe){r.fp(Oe)}getWorkerPerformanceMetrics(ke,Oe,Ye){Ye(void 0,void 0)}}return r.fl(self)&&(self.worker=new gi(self)),gi}),m(["./shared"],function(r){var E="3.13.0";const M={create:"create",load:"load",fullLoad:"fullLoad"},A={mark(f){performance.mark(f)},measure(f,i,u){performance.measure(f,i,u)}};function P(f){const i=f.name.split("?")[0];return r.a(i)&&i.includes("mapbox-gl.js")?"javascript":r.a(i)&&i.includes("mapbox-gl.css")?"css":r.b(i)?"fontRange":r.c(i)?"sprite":r.i(i)?"style":r.d(i)?"tilejson":"other"}var D,z={},F=function(){if(D)return z;function f(p){return!i(p)}function i(p){return typeof window>"u"||typeof document>"u"?"not a browser":function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var S,T,O=new Blob([""],{type:"text/javascript"}),B=URL.createObjectURL(O);try{T=new Worker(B),S=!0}catch{S=!1}return T&&T.terminate(),URL.revokeObjectURL(B),S}()?function(){var S=document.createElement("canvas");S.width=S.height=1;var T=S.getContext("2d");if(!T)return!1;var O=T.getImageData(0,0,1,1);return O&&O.width===S.width}()?(u[x=p&&p.failIfMajorPerformanceCaveat]===void 0&&(u[x]=function(S){var T,O=function(B){var j=document.createElement("canvas"),K=Object.create(f.webGLContextAttributes);return K.failIfMajorPerformanceCaveat=B,j.getContext("webgl2",K)}(S);if(!O)return!1;try{T=O.createShader(O.VERTEX_SHADER)}catch{return!1}return!(!T||O.isContextLost())&&(O.shaderSource(T,"void main() {}"),O.compileShader(T),O.getShaderParameter(T,O.COMPILE_STATUS)===!0)}(x)),u[x]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL2 support"):"insufficient Canvas/getImageData support":"insufficient worker support";var x}D=1,z.supported=f,z.notSupportedReason=i;var u={};return f.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0},z}();function N(f,i,u){const p=document.createElement(f);return i!=null&&(p.className=i),u&&u.appendChild(p),p}function q(f,i,u){const p=document.createElementNS("http://www.w3.org/2000/svg",f);for(const x of Object.keys(i))p.setAttributeNS(null,x,String(i[x]));return u&&u.appendChild(p),p}const G=typeof document<"u"?document.documentElement&&document.documentElement.style:null,ie=G&&G.userSelect!==void 0?"userSelect":"WebkitUserSelect";let W;function Y(){G&&ie&&(W=G[ie],G[ie]="none")}function J(){G&&ie&&(G[ie]=W)}function re(f){f.preventDefault(),f.stopPropagation(),window.removeEventListener("click",re,!0)}function he(){window.addEventListener("click",re,!0),window.setTimeout(()=>{window.removeEventListener("click",re,!0)},0)}function fe(f,i){const u=f.getBoundingClientRect();return we(f,u,i)}function ce(f,i){const u=f.getBoundingClientRect(),p=[];for(let x=0;x<i.length;x++)p.push(we(f,u,i[x]));return p}function me(f){return/firefox/i.test(navigator.userAgent)&&/macintosh/i.test(navigator.userAgent)&&f.button===2&&f.ctrlKey?0:f.button}function we(f,i,u){const p=f.offsetWidth===i.width?1:f.offsetWidth/i.width;return new r.P((u.clientX-i.left)*p,(u.clientY-i.top)*p)}const ye="01",Ue="NO_ACCESS_TOKEN";class Ne{constructor(i,u,p){this._transformRequestFn=i,this._customAccessToken=u,this._silenceAuthErrors=!!p,this._createSkuToken()}_createSkuToken(){const i=function(){let u="";for(let p=0;p<10;p++)u+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",ye,u].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=i.token,this._skuTokenExpiresAt=i.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(i,u){return this._transformRequestFn&&this._transformRequestFn(i,u)||{url:i}}normalizeStyleURL(i,u){if(!r.j(i))return i;const p=ve(i);return p.params.push(`sdk=js-${E}`),p.path=`/styles/v1${p.path}`,this._makeAPIURL(p,this._customAccessToken||u)}normalizeGlyphsURL(i,u){if(!r.j(i))return i;const p=ve(i);return p.path=`/fonts/v1${p.path}`,this._makeAPIURL(p,this._customAccessToken||u)}normalizeModelURL(i,u){if(!r.j(i))return i;const p=ve(i);return p.path=`/models/v1${p.path}`,this._makeAPIURL(p,this._customAccessToken||u)}normalizeSourceURL(i,u,p,x){if(!r.j(i))return i;const S=ve(i);return S.path=`/v4/${S.authority}.json`,S.params.push("secure"),p&&S.params.push(`language=${p}`),x&&S.params.push(`worldview=${x}`),this._makeAPIURL(S,this._customAccessToken||u)}normalizeIconsetURL(i,u){const p=ve(i);return r.j(i)?(p.path=`/styles/v1${p.path}/iconset.pbf`,this._makeAPIURL(p,this._customAccessToken||u)):$e(p)}normalizeSpriteURL(i,u,p,x){const S=ve(i);return r.j(i)?(S.path=`/styles/v1${S.path}/sprite${u}${p}`,this._makeAPIURL(S,this._customAccessToken||x)):(S.path+=`${u}${p}`,$e(S))}normalizeTileURL(i,u,p){if(this._isSkuTokenExpired()&&this._createSkuToken(),i&&!r.j(i))return i;const x=ve(i);x.path=x.path.replace(/(\.(png|jpg)\d*)(?=$)/,`${u||p&&x.authority!=="raster"&&p===512?"@2x":""}${r.l.supported?".webp":"$1"}`),x.authority==="raster"?x.path=`/${r.e.RASTER_URL_PREFIX}${x.path}`:x.authority==="rasterarrays"?x.path=`/${r.e.RASTERARRAYS_URL_PREFIX}${x.path}`:x.authority==="3dtiles"?x.path=`/${r.e.TILES3D_URL_PREFIX}${x.path}`:(x.path=x.path.replace(/^.+\/v4\//,"/"),x.path=`/${r.e.TILE_URL_VERSION}${x.path}`);const S=this._customAccessToken||function(T){for(const O of T){const B=O.match(/^access_token=(.*)$/);if(B)return B[1]}return null}(x.params)||r.e.ACCESS_TOKEN;return r.e.REQUIRE_ACCESS_TOKEN&&S&&this._skuToken&&x.params.push(`sku=${this._skuToken}`),this._makeAPIURL(x,S)}canonicalizeTileURL(i,u){const p=ve(i);if(!p.path.match(/^(\/v4\/|\/(raster|rasterarrays)\/v1\/)/)||!p.path.match(/\.[\w]+$/))return i;let x="mapbox://";p.path.match(/^\/raster\/v1\//)?x+=`raster/${p.path.replace(`/${r.e.RASTER_URL_PREFIX}/`,"")}`:p.path.match(/^\/rasterarrays\/v1\//)?x+=`rasterarrays/${p.path.replace(`/${r.e.RASTERARRAYS_URL_PREFIX}/`,"")}`:x+=`tiles/${p.path.replace(`/${r.e.TILE_URL_VERSION}/`,"")}`;let S=p.params;return u&&(S=S.filter(T=>!T.match(/^access_token=/))),S.length&&(x+=`?${S.join("&")}`),x}canonicalizeTileset(i,u){const p=!!u&&r.j(u),x=[];for(const S of i.tiles||[])r.k(S)?x.push(this.canonicalizeTileURL(S,p)):x.push(S);return x}_makeAPIURL(i,u){const p="See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes",x=ve(r.e.API_URL);if(i.protocol=x.protocol,i.authority=x.authority,i.protocol==="http"){const S=i.params.indexOf("secure");S>=0&&i.params.splice(S,1)}if(x.path!=="/"&&(i.path=`${x.path}${i.path}`),!r.e.REQUIRE_ACCESS_TOKEN)return $e(i);if(u=u||r.e.ACCESS_TOKEN,!this._silenceAuthErrors){if(!u)throw new Error(`An API access token is required to use Mapbox GL. ${p}`);if(u[0]==="s")throw new Error(`Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ${p}`)}return i.params=i.params.filter(S=>S.indexOf("access_token")===-1),i.params.push(`access_token=${u||""}`),$e(i)}}const Pe=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function ve(f){const i=f.match(Pe);if(!i)throw new Error("Unable to parse URL object");return{protocol:i[1],authority:i[2],path:i[3]||"/",params:i[4]?i[4].split("&"):[]}}function $e(f){const i=f.params.length?`?${f.params.join("&")}`:"";return`${f.protocol}://${f.authority}${f.path}${i}`}const Te="mapbox.eventData";function Ae(f){if(!f)return null;const i=f.split(".");if(!i||i.length!==3)return null;try{return JSON.parse(r.m(i[1]))}catch{return null}}class Ve{constructor(i){this.type=i,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(i){const u=Ae(r.e.ACCESS_TOKEN);let p="";return p=u&&u.u?r.f(u.u):r.e.ACCESS_TOKEN||"",i?`${Te}.${i}:${p}`:`${Te}:${p}`}fetchEventData(){const i=r.s("localStorage"),u=this.getStorageKey(),p=this.getStorageKey("uuid");if(i)try{const x=localStorage.getItem(u);x&&(this.eventData=JSON.parse(x));const S=localStorage.getItem(p);S&&(this.anonId=S)}catch{r.w("Unable to read from LocalStorage")}}saveEventData(){const i=r.s("localStorage"),u=this.getStorageKey(),p=this.getStorageKey("uuid"),x=this.anonId;if(i&&x)try{localStorage.setItem(p,x),Object.keys(this.eventData).length>=1&&localStorage.setItem(u,JSON.stringify(this.eventData))}catch{r.w("Unable to write to LocalStorage")}}processRequests(i){}postEvent(i,u,p,x){if(!r.e.EVENTS_URL)return;const S=ve(r.e.EVENTS_URL);S.params.push(`access_token=${x||r.e.ACCESS_TOKEN||""}`);const T={event:this.type,created:new Date(i).toISOString()},O=u?r.h(T,u):T,B={url:$e(S),headers:{"Content-Type":"text/plain"},body:JSON.stringify([O])};this.pendingRequest=r.p(B,j=>{this.pendingRequest=null,p(j),this.saveEventData(),this.processRequests(x)})}queueRequest(i,u){this.queue.push(i),this.processRequests(u)}}const We=new class extends Ve{constructor(f){super("appUserTurnstile"),this._customAccessToken=f}postTurnstileEvent(f,i){r.e.EVENTS_URL&&r.e.ACCESS_TOKEN&&Array.isArray(f)&&f.some(u=>r.j(u)||r.k(u))&&this.queueRequest(Date.now(),i)}processRequests(f){if(this.pendingRequest||this.queue.length===0)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const i=Ae(r.e.ACCESS_TOKEN),u=i?i.u:r.e.ACCESS_TOKEN;let p=u!==this.eventData.tokenU;r.v(this.anonId)||(this.anonId=r.u(),p=!0);const x=this.queue.shift();if(this.eventData.lastSuccess){const S=new Date(this.eventData.lastSuccess),T=new Date(x),O=(x-this.eventData.lastSuccess)/864e5;p=p||O>=1||O<-1||S.getDate()!==T.getDate()}else p=!0;p?this.postEvent(x,{sdkIdentifier:"mapbox-gl-js",sdkVersion:E,skuId:ye,"enabled.telemetry":!1,userId:this.anonId},S=>{S||(this.eventData.lastSuccess=x,this.eventData.tokenU=u)},f):this.processRequests()}},ft=We.postTurnstileEvent.bind(We),at=new class extends Ve{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(f,i,u,p){this.skuToken=i,this.errorCb=p,r.e.EVENTS_URL&&(u||r.e.ACCESS_TOKEN?this.queueRequest({id:f,timestamp:Date.now()},u):this.errorCb(new Error(Ue)))}processRequests(f){if(this.pendingRequest||this.queue.length===0)return;const{id:i,timestamp:u}=this.queue.shift();i&&this.success[i]||(this.anonId||this.fetchEventData(),r.v(this.anonId)||(this.anonId=r.u()),this.postEvent(u,{sdkIdentifier:"mapbox-gl-js",sdkVersion:E,skuId:ye,skuToken:this.skuToken,userId:this.anonId},p=>{p?this.errorCb(p):i&&(this.success[i]=!0)},f))}remove(){this.errorCb=null}},ct=at.postMapLoadEvent.bind(at),Mt=new class extends Ve{constructor(){super("style.load"),this.eventIdPerMapInstanceMap=new Map,this.mapInstanceIdMap=new WeakMap}getMapInstanceId(f){let i=this.mapInstanceIdMap.get(f);return i||(i=r.u(),this.mapInstanceIdMap.set(f,i)),i}getEventId(f){const i=this.eventIdPerMapInstanceMap.get(f)||0;return this.eventIdPerMapInstanceMap.set(f,i+1),i}postStyleLoadEvent(f,i){const{map:u,style:p,importedStyles:x}=i;if(!r.e.EVENTS_URL||!f&&!r.e.ACCESS_TOKEN)return;const S=this.getMapInstanceId(u),T={mapInstanceId:S,eventId:this.getEventId(S),style:p};x.length&&(T.importedStyles=x),this.queueRequest({timestamp:Date.now(),payload:T},f)}processRequests(f){if(this.pendingRequest||this.queue.length===0)return;const{timestamp:i,payload:u}=this.queue.shift();this.postEvent(i,u,()=>{},f)}},Ct=Mt.postStyleLoadEvent.bind(Mt),gt=new class extends Ve{constructor(){super("gljs.performance")}postPerformanceEvent(f,i){r.e.EVENTS_URL&&(f||r.e.ACCESS_TOKEN)&&this.queueRequest({timestamp:Date.now(),performanceData:i},f)}processRequests(f){if(this.pendingRequest||this.queue.length===0)return;const{timestamp:i,performanceData:u}=this.queue.shift(),p=function(x){const S=performance.getEntriesByType("resource"),T=performance.getEntriesByType("mark"),O=function(oe){const Ce={};if(oe){for(const _e in oe)if(_e!=="other")for(const Ee of oe[_e]){const Me=`${_e}ResolveRangeMin`,ze=`${_e}ResolveRangeMax`,qe=`${_e}RequestCount`,Je=`${_e}RequestCachedCount`;Ce[Me]=Math.min(Ce[Me]||1/0,Ee.startTime),Ce[ze]=Math.max(Ce[ze]||-1/0,Ee.responseEnd);const lt=ot=>{Ce[ot]===void 0&&(Ce[ot]=0),++Ce[ot]};Ee.transferSize!==void 0&&Ee.transferSize===0&&lt(Je),lt(qe)}}return Ce}(function(oe,Ce){const _e={};if(oe)for(const Ee of oe){const Me=Ce(Ee);_e[Me]===void 0&&(_e[Me]=[]),_e[Me].push(Ee)}return _e}(S,P)),B=window.devicePixelRatio,j=navigator.connection||navigator.mozConnection||navigator.webkitConnection,K=j?j.effectiveType:void 0,te={counters:[],metadata:[],attributes:[]},Q=(oe,Ce,_e)=>{_e!=null&&oe.push({name:Ce,value:_e.toString()})};for(const oe in O)Q(te.counters,oe,O[oe]);if(x.interactionRange[0]!==1/0&&x.interactionRange[1]!==-1/0&&(Q(te.counters,"interactionRangeMin",x.interactionRange[0]),Q(te.counters,"interactionRangeMax",x.interactionRange[1])),T)for(const oe of Object.keys(M)){const Ce=M[oe],_e=T.find(Ee=>Ee.name===Ce);_e&&Q(te.counters,Ce,_e.startTime)}return Q(te.counters,"visibilityHidden",x.visibilityHidden),Q(te.attributes,"style",function(oe){if(oe)for(const Ce of oe){const _e=Ce.name.split("?")[0];if(r.i(_e)){const Ee=_e.split("/").slice(-2);if(Ee.length===2)return`mapbox://styles/${Ee[0]}/${Ee[1]}`}}}(S)),Q(te.attributes,"terrainEnabled",x.terrainEnabled?"true":"false"),Q(te.attributes,"fogEnabled",x.fogEnabled?"true":"false"),Q(te.attributes,"projection",x.projection),Q(te.attributes,"zoom",x.zoom),Q(te.metadata,"devicePixelRatio",B),Q(te.metadata,"connectionEffectiveType",K),Q(te.metadata,"navigatorUserAgent",navigator.userAgent),Q(te.metadata,"screenWidth",window.screen.width),Q(te.metadata,"screenHeight",window.screen.height),Q(te.metadata,"windowWidth",window.innerWidth),Q(te.metadata,"windowHeight",window.innerHeight),Q(te.metadata,"mapWidth",x.width/B),Q(te.metadata,"mapHeight",x.height/B),Q(te.metadata,"webglRenderer",x.renderer),Q(te.metadata,"webglVendor",x.vendor),Q(te.metadata,"sdkVersion",E),Q(te.metadata,"sdkIdentifier","mapbox-gl-js"),te}(u);for(const x of p.metadata);for(const x of p.counters);for(const x of p.attributes);this.postEvent(i,p,()=>{},f)}},Ke=gt.postPerformanceEvent.bind(gt),Lt=new class extends Ve{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(f,i,u,p){if(!r.e.API_URL||!r.e.SESSION_PATH)return;const x=ve(r.e.API_URL+r.e.SESSION_PATH);x.params.push(`sku=${i||""}`),x.params.push(`access_token=${p||r.e.ACCESS_TOKEN||""}`);const S={url:$e(x),headers:{"Content-Type":"text/plain"}};this.pendingRequest=r.g(S,T=>{this.pendingRequest=null,u(T),this.saveEventData(),this.processRequests(p)})}getSessionAPI(f,i,u,p){this.skuToken=i,this.errorCb=p,r.e.SESSION_PATH&&r.e.API_URL&&(u||r.e.ACCESS_TOKEN?this.queueRequest({id:f,timestamp:Date.now()},u):this.errorCb(new Error(Ue)))}processRequests(f){if(this.pendingRequest||this.queue.length===0)return;const{id:i,timestamp:u}=this.queue.shift();i&&this.success[i]||this.getSession(u,this.skuToken,p=>{p?this.errorCb(p):i&&(this.success[i]=!0)},f)}remove(){this.errorCb=null}},xn=Lt.getSessionAPI.bind(Lt),Ht=new Set;function le(f,i){i?Ht.add(f):Ht.delete(f)}class nt{constructor(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSourceCaches={},this._updatedPaintProps=new Set,this._updatedImages={}}isDirty(){return this._changed}setDirty(){this._changed=!0}getUpdatedSourceCaches(){return this._updatedSourceCaches}updateSourceCache(i,u){this._updatedSourceCaches[i]=u,this.setDirty()}discardSourceCacheUpdate(i){delete this._updatedSourceCaches[i]}updateLayer(i){const u=i.scope;this._updatedLayers[u]=this._updatedLayers[u]||new Set,this._updatedLayers[u].add(i.id),this.setDirty()}removeLayer(i){const u=i.scope;this._removedLayers[u]=this._removedLayers[u]||{},this._updatedLayers[u]=this._updatedLayers[u]||new Set,this._removedLayers[u][i.id]=i,this._updatedLayers[u].delete(i.id),this._updatedPaintProps.delete(i.fqid),this.setDirty()}getRemovedLayer(i){return this._removedLayers[i.scope]?this._removedLayers[i.scope][i.id]:null}discardLayerRemoval(i){this._removedLayers[i.scope]&&delete this._removedLayers[i.scope][i.id]}getLayerUpdatesByScope(){const i={};for(const u in this._updatedLayers)i[u]=i[u]||{},i[u].updatedIds=Array.from(this._updatedLayers[u].values());for(const u in this._removedLayers)i[u]=i[u]||{},i[u].removedIds=Object.keys(this._removedLayers[u]);return i}getUpdatedPaintProperties(){return this._updatedPaintProps}updatePaintProperties(i){this._updatedPaintProps.add(i.fqid),this.setDirty()}getUpdatedImages(i){return this._updatedImages[i]?Array.from(this._updatedImages[i].values()):[]}updateImage(i,u){this._updatedImages[u]=this._updatedImages[u]||new Set,this._updatedImages[u].add(r.I.toString(i)),this.setDirty()}resetUpdatedImages(i){this._updatedImages[i]&&this._updatedImages[i].clear()}reset(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSourceCaches={},this._updatedPaintProps.clear(),this._updatedImages={}}}function Gt(f){const{userImage:i}=f;return!!(i&&i.render&&i.render())&&(f.data.replace(new Uint8Array(i.data.buffer)),!0)}class an extends r.E{constructor(i){super(),this.imageProviders=new Map,this.images=new Map,this.updatedImages=new Map,this.callbackDispatchedThisFrame=new Map,this.loaded=new Map,this.requestors=[],this.patterns=new Map,this.patternsInFlight=new Set,this.atlasImage=new Map,this.atlasTexture=new Map,this.dirty=!0,this.spriteFormat=i,i!=="raster"&&r.t()&&(this.imageRasterizerDispatcher=new r.D(r.x(),this,"Image Rasterizer Worker",1))}addScope(i){this.loaded.set(i,!1),this.imageProviders.set(i,new Map),this.images.set(i,new Map),this.updatedImages.set(i,new Set),this.callbackDispatchedThisFrame.set(i,new Set),this.patterns.set(i,new Map),this.atlasImage.set(i,new r.r({width:1,height:1}))}removeScope(i){this.loaded.delete(i),this.imageProviders.delete(i),this.images.delete(i),this.updatedImages.delete(i),this.callbackDispatchedThisFrame.delete(i),this.patterns.delete(i),this.atlasImage.delete(i);const u=this.atlasTexture.get(i);u&&(u.destroy(),this.atlasTexture.delete(i))}addImageProvider(i,u){this.imageProviders.has(u)||this.imageProviders.set(u,new Map),this.imageProviders.get(u).set(i.id,i)}removeImageProvider(i,u){this.imageProviders.has(u)&&this.imageProviders.get(u).delete(i)}getPendingImageProviders(){const i=[];for(const u of this.imageProviders.values())for(const p of u.values())p.hasPendingRequests()&&i.push(p);return i}get imageRasterizer(){return this._imageRasterizer||(this._imageRasterizer=new r.y),this._imageRasterizer}isLoaded(){for(const i of this.loaded.keys())if(!this.loaded.get(i))return!1;return!0}setLoaded(i,u){if(this.loaded.get(u)!==i&&(this.loaded.set(u,i),i)){for(const{ids:p,callback:x}of this.requestors)this._notify(p,u,x);this.requestors=[]}}hasImage(i,u){return!!this.getImage(i,u)}getImage(i,u){return this.images.get(u).get(i.toString())}addImage(i,u,p){this._validate(i,p)&&this.images.get(u).set(i.toString(),p)}_validate(i,u){let p=!0;return this._validateStretch(u.stretchX,u.data&&u.data.width)||(this.fire(new r.z(new Error(`Image "${i.name}" has invalid "stretchX" value`))),p=!1),this._validateStretch(u.stretchY,u.data&&u.data.height)||(this.fire(new r.z(new Error(`Image "${i.name}" has invalid "stretchY" value`))),p=!1),this._validateContent(u.content,u)||(this.fire(new r.z(new Error(`Image "${i.name}" has invalid "content" value`))),p=!1),p}_validateStretch(i,u){if(!i)return!0;let p=0;for(const x of i){if(x[0]<p||x[1]<x[0]||u<x[1])return!1;p=x[1]}return!0}_validateContent(i,u){return i?i.length!==4||!u.usvg&&(i[0]<0||u.data.width<i[0]||i[1]<0||u.data.height<i[1]||i[2]<0||u.data.width<i[2]||i[3]<0||u.data.height<i[3])?!1:!(i[2]<i[0]||i[3]<i[1]):!0}updateImage(i,u,p){const x=this.images.get(u).get(i.toString());p.version=x.version+1,this.images.get(u).set(i.toString(),p),this.updatedImages.get(u).add(i),this.removeFromImageRasterizerCache(i,u)}clearUpdatedImages(i){this.updatedImages.get(i).clear()}removeFromImageRasterizerCache(i,u){this.spriteFormat!=="raster"&&(r.t()?this.imageRasterizerDispatcher.getActor().send("removeRasterizedImages",{imageIds:[i],scope:u}):this.imageRasterizer.removeImagesFromCacheByIds([i],u))}removeImage(i,u){const p=this.images.get(u),x=p.get(i.toString());p.delete(i.toString()),this.patterns.get(u).delete(i.toString()),this.removeFromImageRasterizerCache(i,u),x.userImage&&x.userImage.onRemove&&x.userImage.onRemove()}listImages(i){return Array.from(this.images.get(i).keys()).map(u=>r.I.from(u))}getImages(i,u,p){const x=[],S=[],T=this.imageProviders.get(u);for(const K of i){if(!K.iconsetId){x.push(K);continue}const te=T.get(K.iconsetId);te&&(this.getImage(K,u)?S.push(K):te.addPendingRequest(K))}if(x.length===0)return void this._notify(S,u,p);let O=!0;const B=!!this.loaded.get(u),j=this.images.get(u);if(!B)for(const K of x)j.has(K.toString())||(O=!1);B||O?this._notify(x,u,p):this.requestors.push({ids:x,scope:u,callback:p})}rasterizeImages(i,u){const p=new Map,{tasks:x,scope:S}=i;for(const[T,O]of x.entries()){const B=this.getImage(O.id,S);B&&p.set(T,{image:B,imageVariant:O})}this._rasterizeImages(S,p,u)}_rasterizeImages(i,u,p){if(r.t())this.imageRasterizerDispatcher.getActor().send("rasterizeImagesWorker",{tasks:u,scope:i},p);else{const x=new Map;for(const[S,{image:T,imageVariant:O}]of u.entries())x.set(S,this.imageRasterizer.rasterize(O,T,i,0));p(void 0,x)}}getUpdatedImages(i){return this.updatedImages.get(i)||new Set}_notify(i,u,p){const x=this.images.get(u),S=new Map;for(const T of i){if(!x.get(T.toString())){if(T.iconsetId)continue;this.fire(new r.A("styleimagemissing",{id:T.name}))}const O=x.get(T.toString());if(!O){r.w(`Image "${T.name}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`);continue}const B={data:O.usvg?null:O.data.clone(),pixelRatio:O.pixelRatio,sdf:O.sdf,usvg:O.usvg,version:O.version,stretchX:O.stretchX,stretchY:O.stretchY,content:O.content,hasRenderCallback:!!(O.userImage&&O.userImage.render)};O.usvg&&Object.assign(B,{width:O.icon.usvg_tree.width,height:O.icon.usvg_tree.height}),S.set(r.I.toString(T),B)}p(null,S)}getPixelSize(i){const{width:u,height:p}=this.atlasImage.get(i);return{width:u,height:p}}getPattern(i,u,p){const x=i.toString(),S=this.patterns.get(u),T=S.get(x),O=this.getImage(i,u);if(!O)return null;if(T){if(T.position.version===O.version)return T.position;T.position.version=O.version}else{if(O.usvg&&!O.data){const B=this.getPatternInFlightId(x,u);if(this.patternsInFlight.has(B))return null;this.patternsInFlight.add(B);const j=new r.B(i).scaleSelf(r.q.devicePixelRatio),K=new Map([[j.toString(),{image:O,imageVariant:j}]]);return this._rasterizeImages(u,K,(te,Q)=>this.storePatternImage(j,u,O,p,Q)),null}this.storePattern(i,u,O)}return this._updatePatternAtlas(u,p),S.get(x).position}getPatternInFlightId(i,u){return r.C(i,u)}hasPatternsInFlight(){return this.patternsInFlight.size!==0}storePatternImage(i,u,p,x,S){const T=i.toString(),O=S?S.get(T):void 0;O&&(p.data=O,this.storePattern(i.id,u,p),this._updatePatternAtlas(u,x),this.patternsInFlight.delete(this.getPatternInFlightId(i.id.toString(),u)))}storePattern(i,u,p){const x={w:p.data.width+2*r.F,h:p.data.height+2*r.F,x:0,y:0},S=new r.G(x,p,r.F);this.patterns.get(u).set(i.toString(),{bin:x,position:S})}bind(i,u){const p=i.gl;let x=this.atlasTexture.get(u);x?this.dirty&&(x.update(this.atlasImage.get(u)),this.dirty=!1):(x=new r.T(i,this.atlasImage.get(u),p.RGBA8),this.atlasTexture.set(u,x)),x.bind(p.LINEAR,p.CLAMP_TO_EDGE)}_updatePatternAtlas(i,u){const p=this.patterns.get(i),x=Array.from(p.values()).map(({bin:j})=>j),{w:S,h:T}=r.H(x),O=this.atlasImage.get(i);O.resize({width:S||1,height:T||1});const B=this.images.get(i);for(const[j,{bin:K,position:te}]of p.entries()){let Q=te.padding;const oe=K.x+Q,Ce=K.y+Q,_e=B.get(j).data,Ee=_e.width,Me=_e.height;Q=Q>1?Q-1:Q,r.r.copy(_e,O,{x:0,y:0},{x:oe,y:Ce},{width:Ee,height:Me},u),r.r.copy(_e,O,{x:0,y:Me-Q},{x:oe,y:Ce-Q},{width:Ee,height:Q},u),r.r.copy(_e,O,{x:0,y:0},{x:oe,y:Ce+Me},{width:Ee,height:Q},u),r.r.copy(_e,O,{x:Ee-Q,y:0},{x:oe-Q,y:Ce},{width:Q,height:Me},u),r.r.copy(_e,O,{x:0,y:0},{x:oe+Ee,y:Ce},{width:Q,height:Me},u),r.r.copy(_e,O,{x:Ee-Q,y:Me-Q},{x:oe-Q,y:Ce-Q},{width:Q,height:Q},u),r.r.copy(_e,O,{x:0,y:Me-Q},{x:oe+Ee,y:Ce-Q},{width:Q,height:Q},u),r.r.copy(_e,O,{x:0,y:0},{x:oe+Ee,y:Ce+Me},{width:Q,height:Q},u),r.r.copy(_e,O,{x:Ee-Q,y:0},{x:oe-Q,y:Ce+Me},{width:Q,height:Q},u)}this.dirty=!0}beginFrame(){for(const i of this.images.keys())this.callbackDispatchedThisFrame.set(i,new Set)}dispatchRenderCallbacks(i,u){const p=this.images.get(u);for(const x of i){if(this.callbackDispatchedThisFrame.get(u).has(x.toString()))continue;this.callbackDispatchedThisFrame.get(u).add(x.toString());const S=p.get(x.toString());Gt(S)&&this.updateImage(x,u,S)}}}function Qt(f){const i=f.key,u=f.value,p=f.valueSpec||{},x=f.objectElementValidators||{},S=f.style,T=f.styleSpec;let O=[];const B=r.J(u);if(B!=="object")return[new r.V(i,u,`object expected, ${B} found`)];for(const j in u){const K=j.split(".")[0];let te;x[K]?te=x[K]:p[K]?te=Xn:x["*"]?te=x["*"]:p["*"]&&(te=Xn),te?O=O.concat(te({key:(i&&`${i}.`)+j,value:u[j],valueSpec:p[K]||p["*"],style:S,styleSpec:T,object:u,objectKey:j},u)):O.push(new r.K(i,u[j],`unknown property "${j}"`))}for(const j in p)x[j]||p[j].required&&p[j].default===void 0&&u[j]===void 0&&O.push(new r.V(i,u,`missing required property "${j}"`));return O}function Zt(f){const i=f.value,u=f.valueSpec,p=f.style,x=f.styleSpec,S=f.key,T=f.arrayElementValidator||Xn;if(r.J(i)!=="array")return[new r.V(S,i,`array expected, ${r.J(i)} found`)];if(u.length&&i.length!==u.length)return[new r.V(S,i,`array length ${u.length} expected, length ${i.length} found`)];if(u["min-length"]&&i.length<u["min-length"])return[new r.V(S,i,`array length at least ${u["min-length"]} expected, length ${i.length} found`)];let O={type:u.value,values:u.values,minimum:u.minimum,maximum:u.maximum,function:void 0};x.$version<7&&(O.function=u.function),r.J(u.value)==="object"&&(O=u.value);let B=[];for(let j=0;j<i.length;j++)B=B.concat(T({array:i,arrayIndex:j,value:i[j],valueSpec:O,style:p,styleSpec:x,key:`${S}[${j}]`},!0));return B}function rn(f){const i=f.key,u=f.value,p=f.valueSpec;let x=r.J(u);if(x==="number"&&u!=u&&(x="NaN"),x!=="number")return[new r.V(i,u,`number expected, ${x} found`)];if("minimum"in p){let S=p.minimum;if(r.J(p.minimum)==="array"&&(S=p.minimum[f.arrayIndex]),u<S)return[new r.V(i,u,`${u} is less than the minimum value ${S}`)]}if("maximum"in p){let S=p.maximum;if(r.J(p.maximum)==="array"&&(S=p.maximum[f.arrayIndex]),u>S)return[new r.V(i,u,`${u} is greater than the maximum value ${S}`)]}return[]}function bt(f){const i=f.valueSpec,u=r.M(f.value.type);let p,x,S,T={};const O=u!=="categorical"&&f.value.property===void 0,B=!O,j=r.J(f.value.stops)==="array"&&r.J(f.value.stops[0])==="array"&&r.J(f.value.stops[0][0])==="object",K=Qt({key:f.key,value:f.value,valueSpec:f.styleSpec.function,style:f.style,styleSpec:f.styleSpec,objectElementValidators:{stops:function(oe){if(u==="identity")return[new r.V(oe.key,oe.value,'identity function may not have a "stops" property')];let Ce=[];const _e=oe.value;return Ce=Ce.concat(Zt({key:oe.key,value:_e,valueSpec:oe.valueSpec,style:oe.style,styleSpec:oe.styleSpec,arrayElementValidator:te})),r.J(_e)==="array"&&_e.length===0&&Ce.push(new r.V(oe.key,_e,"array must have at least one stop")),Ce},default:function(oe){return Xn({key:oe.key,value:oe.value,valueSpec:i,style:oe.style,styleSpec:oe.styleSpec})}}});return u==="identity"&&O&&K.push(new r.V(f.key,f.value,'missing required property "property"')),u==="identity"||f.value.stops||K.push(new r.V(f.key,f.value,'missing required property "stops"')),u==="exponential"&&f.valueSpec.expression&&!r.N(f.valueSpec)&&K.push(new r.V(f.key,f.value,"exponential functions not supported")),f.styleSpec.$version>=8&&(B&&!r.O(f.valueSpec)?K.push(new r.V(f.key,f.value,"property functions not supported")):O&&!r.Q(f.valueSpec)&&K.push(new r.V(f.key,f.value,"zoom functions not supported"))),u!=="categorical"&&!j||f.value.property!==void 0||K.push(new r.V(f.key,f.value,'"property" property is required')),K;function te(oe){let Ce=[];const _e=oe.value,Ee=oe.key;if(r.J(_e)!=="array")return[new r.V(Ee,_e,`array expected, ${r.J(_e)} found`)];if(_e.length!==2)return[new r.V(Ee,_e,`array length 2 expected, length ${_e.length} found`)];if(j){if(r.J(_e[0])!=="object")return[new r.V(Ee,_e,`object expected, ${r.J(_e[0])} found`)];if(_e[0].zoom===void 0)return[new r.V(Ee,_e,"object stop key must have zoom")];if(_e[0].value===void 0)return[new r.V(Ee,_e,"object stop key must have value")];const Me=r.M(_e[0].zoom);if(typeof Me!="number")return[new r.V(Ee,_e[0].zoom,"stop zoom values must be numbers")];if(S&&S>Me)return[new r.V(Ee,_e[0].zoom,"stop zoom values must appear in ascending order")];Me!==S&&(S=Me,x=void 0,T={}),Ce=Ce.concat(Qt({key:`${Ee}[0]`,value:_e[0],valueSpec:{zoom:{}},style:oe.style,styleSpec:oe.styleSpec,objectElementValidators:{zoom:rn,value:Q}}))}else Ce=Ce.concat(Q({key:`${Ee}[0]`,value:_e[0],style:oe.style,styleSpec:oe.styleSpec},_e));return r.S(r.U(_e[1]))?Ce.concat([new r.V(`${Ee}[1]`,_e[1],"expressions are not allowed in function stops.")]):Ce.concat(Xn({key:`${Ee}[1]`,value:_e[1],valueSpec:i,style:oe.style,styleSpec:oe.styleSpec}))}function Q(oe,Ce){const _e=r.J(oe.value),Ee=r.M(oe.value),Me=oe.value!==null?oe.value:Ce;if(p){if(_e!==p)return[new r.V(oe.key,Me,`${_e} stop domain type must match previous stop domain type ${p}`)]}else p=_e;if(_e!=="number"&&_e!=="string"&&_e!=="boolean"&&typeof Ee!="number"&&typeof Ee!="string"&&typeof Ee!="boolean")return[new r.V(oe.key,Me,"stop domain value must be a number, string, or boolean")];if(_e!=="number"&&u!=="categorical"){let ze=`number expected, ${_e} found`;return r.O(i)&&u===void 0&&(ze+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new r.V(oe.key,Me,ze)]}return u!=="categorical"||_e!=="number"||typeof Ee=="number"&&isFinite(Ee)&&Math.floor(Ee)===Ee?u!=="categorical"&&_e==="number"&&typeof Ee=="number"&&typeof x=="number"&&x!==void 0&&Ee<x?[new r.V(oe.key,Me,"stop domain values must appear in ascending order")]:(x=Ee,u==="categorical"&&Ee in T?[new r.V(oe.key,Me,"stop domain values must be unique")]:(T[Ee]=!0,[])):[new r.V(oe.key,Me,`integer expected, found ${String(Ee)}`)]}}function fn(f){const i=(f.expressionContext==="property"?r.W:r.X)(r.U(f.value),f.valueSpec);if(i.result==="error")return i.value.map(p=>new r.V(`${f.key}${p.key}`,f.value,p.message));const u=i.value.expression||i.value._styleExpression.expression;if(f.expressionContext==="property"&&f.propertyKey==="text-font"&&!u.outputDefined())return[new r.V(f.key,f.value,`Invalid data expression for "${f.propertyKey}". Output values must be contained as literals within the expression.`)];if(f.expressionContext==="property"&&f.propertyType==="layout"&&!r.Y(u))return[new r.V(f.key,f.value,'"feature-state" data expressions are not supported with layout properties.')];if(f.expressionContext==="filter")return pn(u,f);if(f.expressionContext&&f.expressionContext.indexOf("cluster")===0){if(!r.Z(u,["zoom","feature-state"]))return[new r.V(f.key,f.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(f.expressionContext==="cluster-initial"&&!r._(u))return[new r.V(f.key,f.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function pn(f,i){const u=new Set(["zoom","feature-state","pitch","distance-from-center"]);if(i.valueSpec&&i.valueSpec.expression)for(const x of i.valueSpec.expression.parameters)u.delete(x);if(u.size===0)return[];const p=[];return f instanceof r.$&&u.has(f.name)?[new r.V(i.key,i.value,`["${f.name}"] expression is not supported in a filter for a ${i.object.type} layer with id: ${i.object.id}`)]:(f.eachChild(x=>{p.push(...pn(x,i))}),p)}function Vn(f){const i=f.key,u=f.value,p=f.valueSpec,x=[];return Array.isArray(p.values)?p.values.indexOf(r.M(u))===-1&&x.push(new r.V(i,u,`expected one of [${p.values.join(", ")}], ${JSON.stringify(u)} found`)):Object.keys(p.values).indexOf(r.M(u))===-1&&x.push(new r.V(i,u,`expected one of [${Object.keys(p.values).join(", ")}], ${JSON.stringify(u)} found`)),x}function Nn(f){return r.a1(r.U(f.value))?fn(r.L({},f,{expressionContext:"filter",valueSpec:f.styleSpec[`filter_${f.layerType||"fill"}`]})):Ot(f)}function Ot(f){const i=f.value,u=f.key;if(r.J(i)!=="array")return[new r.V(u,i,`array expected, ${r.J(i)} found`)];const p=f.styleSpec;let x,S=[];if(i.length<1)return[new r.V(u,i,"filter array must have at least 1 element")];switch(S=S.concat(Vn({key:`${u}[0]`,value:i[0],valueSpec:p.filter_operator,style:f.style,styleSpec:f.styleSpec})),r.M(i[0])){case"<":case"<=":case">":case">=":i.length>=2&&r.M(i[1])==="$type"&&S.push(new r.V(u,i,`"$type" cannot be use with operator "${i[0]}"`));case"==":case"!=":i.length!==3&&S.push(new r.V(u,i,`filter array for operator "${i[0]}" must have 3 elements`));case"in":case"!in":i.length>=2&&(x=r.J(i[1]),x!=="string"&&S.push(new r.V(`${u}[1]`,i[1],`string expected, ${x} found`)));for(let T=2;T<i.length;T++)x=r.J(i[T]),r.M(i[1])==="$type"?S=S.concat(Vn({key:`${u}[${T}]`,value:i[T],valueSpec:p.geometry_type,style:f.style,styleSpec:f.styleSpec})):x!=="string"&&x!=="number"&&x!=="boolean"&&S.push(new r.V(`${u}[${T}]`,i[T],`string, number, or boolean expected, ${x} found`));break;case"any":case"all":case"none":for(let T=1;T<i.length;T++)S=S.concat(Ot({key:`${u}[${T}]`,value:i[T],style:f.style,styleSpec:f.styleSpec}));break;case"has":case"!has":x=r.J(i[1]),i.length!==2?S.push(new r.V(u,i,`filter array for "${i[0]}" operator must have 2 elements`)):x!=="string"&&S.push(new r.V(`${u}[1]`,i[1],`string expected, ${x} found`))}return S}function Bn(f,i){const u=f.key,p=f.style,x=f.layer,S=f.styleSpec,T=f.value,O=f.objectKey,B=S[`${i}_${f.layerType}`];if(!B)return[];const j=O.match(/^(.*)-use-theme$/);if(i==="paint"&&j&&B[j[1]])return r.S(T)?[].concat(Xn({key:f.key,value:T,valueSpec:{type:"string",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},style:p,styleSpec:S,expressionContext:"property",propertyType:i,propertyKey:O})):Xn({key:u,value:T,valueSpec:{type:"string"},style:p,styleSpec:S});const K=O.match(/^(.*)-transition$/);if(i==="paint"&&K&&B[K[1]]&&B[K[1]].transition)return Xn({key:u,value:T,valueSpec:S.transition,style:p,styleSpec:S});const te=f.valueSpec||B[O];if(!te)return[new r.K(u,T,`unknown property "${O}"`)];let Q;if(r.J(T)==="string"&&r.O(te)&&!te.tokens&&(Q=/^{([^}]+)}$/.exec(T))){const Ce=`\`{ "type": "identity", "property": ${Q?JSON.stringify(Q[1]):'"_"'} }\``;return[new r.V(u,T,`"${O}" does not support interpolation syntax
Use an identity property function instead: ${Ce}.`)]}const oe=[];if(f.layerType==="symbol")O!=="text-field"||!p||p.glyphs||p.imports||oe.push(new r.V(u,T,'use of "text-field" requires a style "glyphs" property')),O==="text-font"&&r.a2(r.U(T))&&r.M(T.type)==="identity"&&oe.push(new r.V(u,T,'"text-font" does not support identity functions'));else if(f.layerType==="model"&&i==="paint"&&x&&x.layout&&x.layout.hasOwnProperty("model-id")&&r.O(te)&&(r.a3(te)||r.Q(te))){const Ce=r.W(r.U(T),te),_e=Ce.value.expression||Ce.value._styleExpression.expression;_e&&!r.Z(_e,["measure-light"])&&(O==="model-emissive-strength"&&r._(_e)&&r.Y(_e)||oe.push(new r.V(u,T,`${O} does not support measure-light expressions when the model layer source is vector tile or GeoJSON.`)))}return oe.concat(Xn({key:f.key,value:T,valueSpec:te,style:p,styleSpec:S,expressionContext:"property",propertyType:i,propertyKey:O}))}function Sr(f){return Bn(f,"paint")}function Ur(f){return Bn(f,"layout")}function Kn(f){let i=[];const u=f.value,p=f.key,x=f.style,S=f.styleSpec;u.type||u.ref||i.push(new r.V(p,u,'either "type" or "ref" is required'));let T=r.M(u.type);const O=r.M(u.ref);if(u.id){const B=r.M(u.id);for(let j=0;j<f.arrayIndex;j++){const K=x.layers[j];r.M(K.id)===B&&i.push(new r.V(p,u.id,`duplicate layer id "${u.id}", previously used at line ${K.id.__line__}`))}}if("ref"in u){let B;["type","source","source-layer","filter","layout"].forEach(j=>{j in u&&i.push(new r.V(p,u[j],`"${j}" is prohibited for ref layers`))}),x.layers.forEach(j=>{r.M(j.id)===O&&(B=j)}),B?B.ref?i.push(new r.V(p,u.ref,"ref cannot reference another ref layer")):T=r.M(B.type):typeof O=="string"&&i.push(new r.V(p,u.ref,`ref layer "${O}" not found`))}else if(T!=="background"&&T!=="sky"&&T!=="slot")if(u.source){const B=x.sources&&x.sources[u.source],j=B&&r.M(B.type);B?j==="vector"&&T==="raster"?i.push(new r.V(p,u.source,`layer "${u.id}" requires a raster source`)):j==="raster"&&T!=="raster"?i.push(new r.V(p,u.source,`layer "${u.id}" requires a vector source`)):j!=="vector"||u["source-layer"]?j==="raster-dem"&&T!=="hillshade"?i.push(new r.V(p,u.source,"raster-dem source can only be used with layer type 'hillshade'.")):j!=="raster-array"||["raster","raster-particle"].includes(T)?T==="line"&&u.paint&&(u.paint["line-gradient"]||u.paint["line-trim-offset"])&&j==="geojson"&&!B.lineMetrics?i.push(new r.V(p,u,`layer "${u.id}" specifies a line-gradient, which requires the GeoJSON source to have \`lineMetrics\` enabled.`)):T==="raster-particle"&&j!=="raster-array"&&i.push(new r.V(p,u.source,`layer "${u.id}" requires a 'raster-array' source.`)):i.push(new r.V(p,u.source,"raster-array source can only be used with layer type 'raster'.")):i.push(new r.V(p,u,`layer "${u.id}" must specify a "source-layer"`)):i.push(new r.V(p,u.source,`source "${u.source}" not found`))}else i.push(new r.V(p,u,'missing required property "source"'));return i=i.concat(Qt({key:p,value:u,valueSpec:S.layer,style:f.style,styleSpec:f.styleSpec,objectElementValidators:{"*":()=>[],type:()=>Xn({key:`${p}.type`,value:u.type,valueSpec:S.layer.type,style:f.style,styleSpec:f.styleSpec,object:u,objectKey:"type"}),filter:B=>Nn(r.L({layerType:T},B)),layout:B=>Qt({layer:u,key:B.key,value:B.value,valueSpec:{},style:B.style,styleSpec:B.styleSpec,objectElementValidators:{"*":j=>Ur(r.L({layerType:T},j))}}),paint:B=>Qt({layer:u,key:B.key,value:B.value,valueSpec:{},style:B.style,styleSpec:B.styleSpec,objectElementValidators:{"*":j=>Sr(r.L({layerType:T,layer:u},j))}})}})),i}function ui(f){const i=f.value,u=f.key,p=r.J(i);return p!=="string"?[new r.V(u,i,`string expected, ${p} found`)]:[]}const wr={promoteId:function f({key:i,value:u}){if(r.J(u)==="string")return ui({key:i,value:u});if(Array.isArray(u)){const p=[],x=r.U(u),S=r.X(x);return S.result==="error"&&S.value.forEach(T=>{p.push(new r.V(`${i}${T.key}`,null,`${T.message}`))}),r.Z(S.value.expression,["zoom","heatmap-density","line-progress","raster-value","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center","measure-light","raster-particle-speed"])||p.push(new r.V(`${i}`,null,"promoteId expression should be only feature dependent")),p}{const p=[];for(const x in u)p.push(...f({key:`${i}.${x}`,value:u[x]}));return p}}};function Tr(f){const i=f.value,u=f.key,p=f.styleSpec,x=f.style;if(!i.type)return[new r.V(u,i,'"type" is required')];const S=r.M(i.type);let T=[];switch(["vector","raster","raster-dem","raster-array"].includes(S)&&(i.url||i.tiles||T.push(new r.K(u,i,'Either "url" or "tiles" is required.'))),S){case"vector":case"raster":case"raster-dem":case"raster-array":return T=T.concat(Qt({key:u,value:i,valueSpec:p[`source_${S.replace("-","_")}`],style:f.style,styleSpec:p,objectElementValidators:wr})),T;case"geojson":if(T=Qt({key:u,value:i,valueSpec:p.source_geojson,style:x,styleSpec:p,objectElementValidators:wr}),i.cluster)for(const O in i.clusterProperties){const[B,j]=i.clusterProperties[O],K=typeof B=="string"?[B,["accumulated"],["get",O]]:B;T.push(...fn({key:`${u}.${O}.map`,value:j,expressionContext:"cluster-map"})),T.push(...fn({key:`${u}.${O}.reduce`,value:K,expressionContext:"cluster-reduce"}))}return T;case"video":return Qt({key:u,value:i,valueSpec:p.source_video,style:x,styleSpec:p});case"image":return Qt({key:u,value:i,valueSpec:p.source_image,style:x,styleSpec:p});case"canvas":return[new r.V(u,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Vn({key:`${u}.type`,value:i.type,valueSpec:{values:pr(p)}})}}function pr(f){return f.source.reduce((i,u)=>{const p=f[u];return p.type.type==="enum"&&(i=i.concat(Object.keys(p.type.values))),i},[])}function Fr(f){const i=f.value,u=f.styleSpec,p=u.light,x=f.style;let S=[];const T=r.J(i);if(i===void 0)return S;if(T!=="object")return S=S.concat([new r.V("light",i,`object expected, ${T} found`)]),S;for(const O in i){const B=O.match(/^(.*)-transition$/),j=O.match(/^(.*)-use-theme$/);S=S.concat(j&&p[j[1]]?Xn({key:O,value:i[O],valueSpec:{type:"string"},style:x,styleSpec:u}):B&&p[B[1]]&&p[B[1]].transition?Xn({key:O,value:i[O],valueSpec:u.transition,style:x,styleSpec:u}):p[O]?Xn({key:O,value:i[O],valueSpec:p[O],style:x,styleSpec:u}):[new r.V(O,i[O],`unknown property "${O}"`)])}return S}function vt(f){const i=f.value;let u=[];if(!i)return u;const p=r.J(i);if(p!=="object")return u=u.concat([new r.V("light-3d",i,`object expected, ${p} found`)]),u;const x=f.styleSpec,S=x["light-3d"],T=f.key,O=f.style,B=f.style.lights;for(const te of["type","id"])if(!(te in i))return u=u.concat([new r.V("light-3d",i,`missing property ${te} on light`)]),u;if(i.type&&B)for(let te=0;te<f.arrayIndex;te++){const Q=r.M(i.type),oe=B[te];r.M(oe.type)===Q&&u.push(new r.V(T,i.id,`duplicate light type "${i.type}", previously defined at line ${oe.id.__line__}`))}const j=`properties_light_${i.type}`;if(!(j in x))return u=u.concat([new r.V("light-3d",i,`Invalid light type ${i.type}`)]),u;const K=x[j];for(const te in i)if(te==="properties"){const Q=i[te],oe=r.J(Q);if(oe!=="object")return u=u.concat([new r.V("properties",Q,`object expected, ${oe} found`)]),u;for(const Ce in Q){const _e=Ce.match(/^(.*)-transition$/),Ee=Ce.match(/^(.*)-use-theme$/);u=u.concat(Ee&&K[Ee[1]]?Xn({key:te,value:Q[Ce],valueSpec:{type:"string"},style:O,styleSpec:x}):_e&&K[_e[1]]&&K[_e[1]].transition?Xn({key:te,value:i[te],valueSpec:x.transition,style:O,styleSpec:x}):K[Ce]?Xn({key:Ce,value:Q[Ce],valueSpec:K[Ce],style:O,styleSpec:x}):[new r.K(f.key,Q[Ce],`unknown property "${Ce}"`)])}}else u=u.concat(S[te]?Xn({key:te,value:i[te],valueSpec:S[te],style:O,styleSpec:x}):[new r.K(te,i[te],`unknown property "${te}"`)]);return u}function yt(f){const i=f.value,u=f.key,p=f.style,x=f.styleSpec,S=x.terrain;let T=[];const O=r.J(i);if(i===void 0||O==="null")return T;if(O!=="object")return T=T.concat([new r.V("terrain",i,`object expected, ${O} found`)]),T;for(const B in i){const j=B.match(/^(.*)-transition$/),K=B.match(/^(.*)-use-theme$/);T=T.concat(K&&S[K[1]]?Xn({key:B,value:i[B],valueSpec:{type:"string"},style:p,styleSpec:x}):j&&S[j[1]]&&S[j[1]].transition?Xn({key:B,value:i[B],valueSpec:x.transition,style:p,styleSpec:x}):S[B]?Xn({key:B,value:i[B],valueSpec:S[B],style:p,styleSpec:x}):[new r.K(B,i[B],`unknown property "${B}"`)])}if(i.source){const B=p.sources&&p.sources[i.source],j=B&&r.M(B.type);B?j!=="raster-dem"&&T.push(new r.V(u,i.source,`terrain cannot be used with a source of type ${String(j)}, it only be used with a "raster-dem" source type`)):T.push(new r.V(u,i.source,`source "${i.source}" not found`))}else T.push(new r.V(u,i,'terrain is missing required property "source"'));return T}function it(f){const i=f.value,u=f.style,p=f.styleSpec,x=p.fog;let S=[];const T=r.J(i);if(i===void 0)return S;if(T!=="object")return S=S.concat([new r.V("fog",i,`object expected, ${T} found`)]),S;for(const O in i){const B=O.match(/^(.*)-transition$/),j=O.match(/^(.*)-use-theme$/);S=S.concat(j&&x[j[1]]?Xn({key:O,value:i[O],valueSpec:{type:"string"},style:u,styleSpec:p}):B&&x[B[1]]&&x[B[1]].transition?Xn({key:O,value:i[O],valueSpec:p.transition,style:u,styleSpec:p}):x[O]?Xn({key:O,value:i[O],valueSpec:x[O],style:u,styleSpec:p}):[new r.K(O,i[O],`unknown property "${O}"`)])}return S}const ln={"*":()=>[],array:Zt,boolean:function(f){const i=f.value,u=f.key,p=r.J(i);return p!=="boolean"?[new r.V(u,i,`boolean expected, ${p} found`)]:[]},number:rn,color:function(f){const i=f.key,u=f.value,p=r.J(u);return p!=="string"?[new r.V(i,u,`color expected, ${p} found`)]:r.a0.parseCSSColor(u)===null?[new r.V(i,u,`color expected, "${u}" found`)]:[]},enum:Vn,filter:Nn,function:bt,layer:Kn,object:Qt,source:Tr,model:r.a4,light:Fr,"light-3d":vt,terrain:yt,fog:it,string:ui,formatted:function(f){return ui(f).length===0?[]:fn(f)},resolvedImage:function(f){return ui(f).length===0?[]:fn(f)},projection:function(f){const i=f.value,u=f.styleSpec,p=u.projection,x=f.style;let S=[];const T=r.J(i);if(T==="object")for(const O in i)S=S.concat(Xn({key:O,value:i[O],valueSpec:p[O],style:x,styleSpec:u}));else T!=="string"&&(S=S.concat([new r.V("projection",i,`object or string expected, ${T} found`)]));return S},import:function(f){const{value:i,styleSpec:u}=f,{data:p,...x}=i;Object.defineProperty(x,"__line__",{value:i.__line__,enumerable:!1});let S=Qt(r.L({},f,{value:x,valueSpec:u.import}));return r.M(x.id)===""&&S.push(new r.V(`${f.key}.id`,x,"import id can't be an empty string")),p&&(S=S.concat(Ii(p,u,{key:`${f.key}.data`}))),S},iconset:function(f){const i=f.value,u=f.key,p=f.styleSpec,x=f.style;if(!i.type)return[new r.V(u,i,'"type" is required')];const S=r.M(i.type);let T=[];if(T=T.concat(Qt({key:u,value:i,valueSpec:p[`iconset_${S}`],style:x,styleSpec:p})),S==="source"&&i.source){const O=x.sources&&x.sources[i.source],B=O&&r.M(O.type);O?B!=="raster-array"&&T.push(new r.V(u,i.source,`iconset cannot be used with a source of type ${String(B)}, it only be used with a "raster-array" source type`)):T.push(new r.V(u,i.source,`source "${i.source}" not found`))}return T}};function Xn(f,i=!1){const u=f.value,p=f.valueSpec,x=f.styleSpec;if(p.expression&&r.a2(r.M(u)))return bt(f);if(p.expression&&r.S(r.U(u)))return fn(f);if(p.type&&ln[p.type]){const S=ln[p.type](f);return i===!0&&S.length>0&&r.J(f.value)==="array"?fn(f):S}return Qt(r.L({},f,{valueSpec:p.type?x[p.type]:p}))}function vr(f){const i=f.value,u=f.key,p=ui(f);return p.length||(i.indexOf("{fontstack}")===-1&&p.push(new r.V(u,i,'"glyphs" url must include a "{fontstack}" token')),i.indexOf("{range}")===-1&&p.push(new r.V(u,i,'"glyphs" url must include a "{range}" token'))),p}function Ii(f,i=r.a5,u={}){return Xn({key:u.key||"",value:f,valueSpec:i.$root,styleSpec:i,style:f,objectElementValidators:{glyphs:vr,"*":()=>[]}})}function ds(f,i=r.a5){return dt(Ii(f,i))}const Qs=f=>dt(Tr(f)),Xs=f=>dt(Fr(f)),ks=f=>dt(vt(f)),Rn=f=>dt(yt(f)),Ri=f=>dt(it(f)),_r=f=>dt(function(i){const u=i.value,p=i.style,x=i.styleSpec,S=x.snow;let T=[];const O=r.J(u);if(u===void 0)return T;if(O!=="object")return T=T.concat([new r.V("snow",u,`object expected, ${O} found`)]),T;for(const B in u){const j=B.match(/^(.*)-transition$/);T=T.concat(j&&S[j[1]]&&S[j[1]].transition?Xn({key:B,value:u[B],valueSpec:x.transition,style:p,styleSpec:x}):S[B]?Xn({key:B,value:u[B],valueSpec:S[B],style:p,styleSpec:x}):[new r.K(B,u[B],`unknown property "${B}"`)])}return T}(f)),pa=f=>dt(function(i){const u=i.value,p=i.style,x=i.styleSpec,S=x.rain;let T=[];const O=r.J(u);if(u===void 0)return T;if(O!=="object")return T=T.concat([new r.V("rain",u,`object expected, ${O} found`)]),T;for(const B in u){const j=B.match(/^(.*)-transition$/);T=T.concat(j&&S[j[1]]&&S[j[1]].transition?Xn({key:B,value:u[B],valueSpec:x.transition,style:p,styleSpec:x}):S[B]?Xn({key:B,value:u[B],valueSpec:S[B],style:p,styleSpec:x}):[new r.K(B,u[B],`unknown property "${B}"`)])}return T}(f)),gi=f=>dt(Kn(f)),Ut=f=>dt(Nn(f)),ke=f=>dt(Sr(f)),Oe=f=>dt(Ur(f)),Ye=f=>dt(r.a4(f));function dt(f){return f.slice().sort((i,u)=>i.line&&u.line?i.line-u.line:0)}function tt(f,i){let u=!1;if(i&&i.length)for(const p of i)p instanceof r.K?r.w(p.message):(f.fire(new r.z(new Error(p.message))),u=!0);return u}let Tt;class $t extends r.E{constructor(i,u="flat"){super(),this._transitionable=new r.a6(Tt||(Tt=new r.a7({anchor:new r.a8(r.a5.light.anchor),position:new r.a9(r.a5.light.position),color:new r.a8(r.a5.light.color),intensity:new r.a8(r.a5.light.intensity)}))),this.setLight(i,u),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(i,u,p={}){this._validate(Xs,i,p)||(this._transitionable.setTransitionOrValue(i),this.id=u)}updateTransitions(i){this._transitioning=this._transitionable.transitioned(i,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(i){this.properties=this._transitioning.possiblyEvaluate(i)}_validate(i,u,p){return(!p||p.validate!==!1)&&tt(this,i.call(ds,r.h({value:u,style:{glyphs:!0,sprite:!0},styleSpec:r.a5})))}}let je=class extends r.E{constructor(f,i,u,p,x){super(),this.scope=u,this._transitionable=new r.a6(new r.a7({source:new r.a8(r.a5.terrain.source),exaggeration:new r.a8(r.a5.terrain.exaggeration)}),u,p),this._transitionable.setTransitionOrValue(f,p),this._transitioning=this._transitionable.untransitioned(),this.drapeRenderMode=i,this.worldview=x}get(){return this._transitionable.serialize()}set(f,i){this._transitionable.setTransitionOrValue(f,i)}updateTransitions(f){this._transitioning=this._transitionable.transitioned(f,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(f){this.properties=this._transitioning.possiblyEvaluate(f)}getExaggeration(f){return this._transitioning.possiblyEvaluate(new r.aa(f,{worldview:this.worldview})).get("exaggeration")}getAttenuationRange(){if(!this.isZoomDependent())return null;const f=this._transitionable._values.exaggeration;if(!f)return null;const i=f.value.expression;if(!i)return null;let u=-1,p=-1,x=1;for(const S of i.zoomStops)x=i.evaluate(new r.aa(S,{worldview:this.worldview})),x>.01?(u=S,p=-1):p=S;return x<.01&&u>0&&p>u?[u,p]:null}isZoomDependent(){const f=this._transitionable._values.exaggeration;return f!=null&&f.value!=null&&f.value.expression!=null&&f.value.expression instanceof r.ab}};const _t=45,Nt=65,Ft=.05;function Sn(f,i,u,p){const x=r.af(_t,Nt,u),[S,T]=qn(f,p);let O=1-Math.min(1,Math.exp((i-S)/(T-S)*-6));return O*=O*O,O=Math.min(1,1.00747*O),O*x*f.alpha}function qn(f,i){const u=.5/Math.tan(.5*i);return[f.range[0]+u,f.range[1]+u]}function Wn(f,i,u,p,x){const S=r.ad([],[i,u,p],x.mercatorFogMatrix);return Sn(f,r.ae(S),x.pitch,x._fov)}function Ir(f,i,u,p,x,S,T){const O=[[u,p,0],[x,p,0],[x,S,0],[u,S,0]];let B=Number.MAX_VALUE,j=-Number.MAX_VALUE;for(const K of O){const te=r.ad([],K,i),Q=r.ae(te);B=Math.min(B,Q),j=Math.max(j,Q)}return[Sn(f,B,T.pitch,T._fov),Sn(f,j,T.pitch,T._fov)]}class Mr extends r.E{constructor(i,u,p,x){super();const S=new r.a7({range:new r.a8(r.a5.fog.range),color:new r.a8(r.a5.fog.color),"color-use-theme":new r.a8({type:"string","property-type":"data-constant",default:"default"}),"high-color":new r.a8(r.a5.fog["high-color"]),"high-color-use-theme":new r.a8({type:"string","property-type":"data-constant",default:"default"}),"space-color":new r.a8(r.a5.fog["space-color"]),"space-color-use-theme":new r.a8({type:"string","property-type":"data-constant",default:"default"}),"horizon-blend":new r.a8(r.a5.fog["horizon-blend"]),"star-intensity":new r.a8(r.a5.fog["star-intensity"]),"vertical-range":new r.a8(r.a5.fog["vertical-range"])});this._transitionable=new r.a6(S,p,new Map(x)),this.set(i,x),this._transitioning=this._transitionable.untransitioned(),this._transform=u,this.properties=new r.ag(S),this.scope=p}get state(){const i=this._transform,u=i.projection.name==="globe",p=r.ah(i.zoom),x=this.properties.get("range"),S=[.5,3];return{range:u?[r.ai(S[0],x[0],p),r.ai(S[1],x[1],p)]:x,horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}get(){return this._transitionable.serialize()}set(i,u,p={}){if(this._validate(Ri,i,p))return;const x=r.h({},i);for(const S of Object.keys(r.a5.fog))x[S]===void 0&&(x[S]=r.a5.fog[S].default);this._options=x,this._transitionable.setTransitionOrValue(this._options,u)}getOpacity(i){if(!this._transform.projection.supportsFog)return 0;const u=this.properties&&this.properties.get("color")||1;return(this._transform.projection.name==="globe"?1:r.af(_t,Nt,i))*u.a}getOpacityAtLatLng(i,u){return this._transform.projection.supportsFog?function(p,x,S){const T=r.ac.fromLngLat(x),O=S.elevation?S.elevation.getAtPointOrZero(T):0;return Wn(p,T.x,T.y,O,S)}(this.state,i,u):0}getOpacityForTile(i){if(!this._transform.projection.supportsFog)return[1,1];const u=this._transform.calculateFogTileMatrix(i.toUnwrapped());return Ir(this.state,u,0,0,r.aj,r.aj,this._transform)}getOpacityForBounds(i,u,p,x,S){return this._transform.projection.supportsFog?Ir(this.state,i,u,p,x,S,this._transform):[1,1]}getFovAdjustedRange(i){return this._transform.projection.supportsFog?qn(this.state,i):[0,1]}isVisibleOnFrustum(i){if(!this._transform.projection.supportsFog)return!1;const u=[4,5,6,7];for(const p of u){const x=i.points[p];let S;if(x[2]>=0)S=x;else{const T=i.points[p-4];S=r.ak(T,x,T[2]/(T[2]-x[2]))}if(Wn(this.state,S[0],S[1],0,this._transform)>=Ft)return!0}return!1}updateConfig(i){this._transitionable.setTransitionOrValue(this._options,new Map(i))}updateTransitions(i){this._transitioning=this._transitionable.transitioned(i,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(i){this.properties=this._transitioning.possiblyEvaluate(i)}_validate(i,u,p){return(!p||p.validate!==!1)&&tt(this,i.call(ds,r.h({value:u,style:{glyphs:!0,sprite:!0},styleSpec:r.a5})))}}let Lr,jt,kn,br,Rr=class extends r.E{constructor(f,i,u,p){super();const x=Lr||(Lr=new r.a7({density:new r.a8(r.a5.snow.density),intensity:new r.a8(r.a5.snow.intensity),color:new r.a8(r.a5.snow.color),opacity:new r.a8(r.a5.snow.opacity),vignette:new r.a8(r.a5.snow.vignette),"vignette-color":new r.a8(r.a5.snow["vignette-color"]),"center-thinning":new r.a8(r.a5.snow["center-thinning"]),direction:new r.a8(r.a5.snow.direction),"flake-size":new r.a8(r.a5.snow["flake-size"])}));this._transitionable=new r.a6(x,u,new Map(p)),this.set(f,p),this._transitioning=this._transitionable.untransitioned(),this.properties=new r.ag(x),this.scope=u}get state(){const f=this.properties.get("opacity"),i=this.properties.get("color"),u=this.properties.get("direction"),p=r.al(u[0]),x=-Math.max(r.al(u[1]),.01),S=[Math.cos(p)*Math.cos(x),Math.sin(p)*Math.cos(x),Math.sin(x)],T=this.properties.get("vignette"),O=this.properties.get("vignette-color");return O.a=T,{density:this.properties.get("density"),intensity:this.properties.get("intensity"),color:new r.am(i.r,i.g,i.b,i.a*f),direction:S,centerThinning:this.properties.get("center-thinning"),flakeSize:this.properties.get("flake-size"),vignetteColor:O}}get(){return this._transitionable.serialize()}set(f,i,u={}){if(this._validate(_r,f,u))return;const p=r.h({},f);for(const x of Object.keys(r.a5.snow))p[x]===void 0&&(p[x]=r.a5.snow[x].default);this._options=p,this._transitionable.setTransitionOrValue(this._options,i)}updateConfig(f){this._transitionable.setTransitionOrValue(this._options,new Map(f))}updateTransitions(f){this._transitioning=this._transitionable.transitioned(f,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(f){this.properties=this._transitioning.possiblyEvaluate(f)}_validate(f,i,u){return(!u||u.validate!==!1)&&tt(this,f.call(ds,r.h({value:i,style:{glyphs:!0,sprite:!0},styleSpec:r.a5})))}},vi=class extends r.E{constructor(f,i,u,p){super();const x=jt||(jt=new r.a7({density:new r.a8(r.a5.rain.density),intensity:new r.a8(r.a5.rain.intensity),color:new r.a8(r.a5.rain.color),opacity:new r.a8(r.a5.rain.opacity),vignette:new r.a8(r.a5.rain.vignette),"vignette-color":new r.a8(r.a5.rain["vignette-color"]),"center-thinning":new r.a8(r.a5.rain["center-thinning"]),direction:new r.a8(r.a5.rain.direction),"droplet-size":new r.a8(r.a5.rain["droplet-size"]),"distortion-strength":new r.a8(r.a5.rain["distortion-strength"])}));this._transitionable=new r.a6(x,u,new Map(p)),this.set(f,p),this._transitioning=this._transitionable.untransitioned(),this.properties=new r.ag(x),this.scope=u}get state(){const f=this.properties.get("opacity"),i=this.properties.get("color"),u=this.properties.get("direction"),p=r.al(u[0]),x=-Math.max(r.al(u[1]),.01),S=[Math.cos(p)*Math.cos(x),Math.sin(p)*Math.cos(x),Math.sin(x)],T=this.properties.get("vignette-color");return T.a=this.properties.get("vignette"),{density:this.properties.get("density"),intensity:this.properties.get("intensity"),color:new r.am(i.r,i.g,i.b,i.a*f),direction:S,centerThinning:this.properties.get("center-thinning"),dropletSize:this.properties.get("droplet-size"),distortionStrength:this.properties.get("distortion-strength"),vignetteColor:T}}get(){return this._transitionable.serialize()}set(f,i,u={}){if(this._validate(pa,f,u))return;const p=r.h({},f);for(const x of Object.keys(r.a5.rain))p[x]===void 0&&(p[x]=r.a5.rain[x].default);this._options=p,this._transitionable.setTransitionOrValue(this._options,i)}updateConfig(f){this._transitionable.setTransitionOrValue(this._options,new Map(f))}updateTransitions(f){this._transitioning=this._transitionable.transitioned(f,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(f){this.properties=this._transitioning.possiblyEvaluate(f)}_validate(f,i,u){return(!u||u.validate!==!1)&&tt(this,f.call(ds,r.h({value:i,style:{glyphs:!0,sprite:!0},styleSpec:r.a5})))}};class ci extends r.E{constructor(i,u,p,x){super(),this.scope=p,this._options=i,this.properties=new r.ag(u),this._transitionable=new r.a6(u,p,new Map(x)),this._transitionable.setTransitionOrValue(i.properties),this._transitioning=this._transitionable.untransitioned()}updateConfig(i){this._transitionable.setTransitionOrValue(this._options.properties,new Map(i))}updateTransitions(i){this._transitioning=this._transitionable.transitioned(i,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(i){this.properties=this._transitioning.possiblyEvaluate(i)}get(){return this._options.properties=this._transitionable.serialize(),this._options}set(i,u){this._options=i,this._transitionable.setTransitionOrValue(i.properties,u)}shadowsEnabled(){return!!this.properties&&this.properties.get("cast-shadows")===!0}}class xi{constructor(i,u,p,x){this.screenBounds=i,this.cameraPoint=u,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=p,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this._bufferedScreenMercator(0,x)}static createFromScreenPoints(i,u){let p,x;if(i instanceof r.P||typeof i[0]=="number"){const S=r.P.convert(i);p=[S],x=u.isPointAboveHorizon(S)}else{const S=r.P.convert(i[0]),T=r.P.convert(i[1]),O=S.add(T)._div(2);p=[S,T],x=r.ao(S,T).every(B=>u.isPointAboveHorizon(B))&&u.isPointAboveHorizon(O)}return new xi(p,u.getCameraPoint(),x,u)}isPointQuery(){return this.screenBounds.length===1}bufferedScreenGeometry(i){return r.ao(this.screenBounds[0],this.screenBounds.length===1?this.screenBounds[0]:this.screenBounds[1],i)}bufferedCameraGeometry(i){const u=this.screenBounds[0],p=this.screenBounds.length===1?this.screenBounds[0].add(new r.P(1,1)):this.screenBounds[1],x=r.ao(u,p,0,!1);return this.cameraPoint.y>p.y&&(this.cameraPoint.x>u.x&&this.cameraPoint.x<p.x?x.splice(3,0,this.cameraPoint):this.cameraPoint.x>=p.x?x[2]=this.cameraPoint:this.cameraPoint.x<=u.x&&(x[3]=this.cameraPoint)),r.ap(x,i)}bufferedCameraGeometryGlobe(i){const u=this.screenBounds[0],p=this.screenBounds.length===1?this.screenBounds[0].add(new r.P(1,1)):this.screenBounds[1],x=r.ao(u,p,i),S=this.cameraPoint.clone();switch(3*((S.y>u.y)+(S.y>p.y))+((S.x>u.x)+(S.x>p.x))){case 0:x[0]=S,x[4]=S.clone();break;case 1:x.splice(1,0,S);break;case 2:x[1]=S;break;case 3:x.splice(4,0,S);break;case 5:x.splice(2,0,S);break;case 6:x[3]=S;break;case 7:x.splice(3,0,S);break;case 8:x[2]=S}return x}containsTile(i,u,p,x=0){const S=i.queryPadding/u._pixelsPerMercatorPixel+1,T=p?this._bufferedCameraMercator(S,u):this._bufferedScreenMercator(S,u);let O=i.tileID.wrap+(T.unwrapped?x:0);const B=T.polygon.map(Ee=>r.aq(i.tileTransform,Ee,O));if(!r.ar(B,0,0,r.aj,r.aj))return;O=i.tileID.wrap+(this.screenGeometryMercator.unwrapped?x:0);const j=this.screenGeometryMercator.polygon.map(Ee=>r.as(i.tileTransform,Ee,O)),K=j.map(Ee=>new r.P(Ee[0],Ee[1])),te=u.getFreeCameraOptions().position||new r.ac(0,0,0),Q=r.as(i.tileTransform,te,O),oe=j.map(Ee=>{const Me=r.at(Ee,Ee,Q);return r.au(Me,Me),new r.av(Q,Me)}),Ce=r.aw(i,1,u.zoom)*u._pixelsPerMercatorPixel;return{queryGeometry:this,tilespaceGeometry:K,tilespaceRays:oe,bufferedTilespaceGeometry:B,bufferedTilespaceBounds:(_e=r.ax(B),_e.min.x=r.ay(_e.min.x,0,r.aj),_e.min.y=r.ay(_e.min.y,0,r.aj),_e.max.x=r.ay(_e.max.x,0,r.aj),_e.max.y=r.ay(_e.max.y,0,r.aj),_e),tile:i,tileID:i.tileID,pixelToTileUnitsFactor:Ce};var _e}_bufferedScreenMercator(i,u){const p=$i(i);if(this._screenRaycastCache[p])return this._screenRaycastCache[p];{let x;return x=u.projection.name==="globe"?this._projectAndResample(this.bufferedScreenGeometry(i),u):{polygon:this.bufferedScreenGeometry(i).map(S=>u.pointCoordinate3D(S)),unwrapped:!0},this._screenRaycastCache[p]=x,x}}_bufferedCameraMercator(i,u){const p=$i(i);if(this._cameraRaycastCache[p])return this._cameraRaycastCache[p];{let x;return x=u.projection.name==="globe"?this._projectAndResample(this.bufferedCameraGeometryGlobe(i),u):{polygon:this.bufferedCameraGeometry(i).map(S=>u.pointCoordinate3D(S)),unwrapped:!0},this._cameraRaycastCache[p]=x,x}}_projectAndResample(i,u){const p=function(S,T){const O=r.az([],T.pixelMatrix,T.globeMatrix),B=[0,-r.aB,0,1],j=[0,r.aB,0,1],K=[0,0,0,1];r.aA(B,B,O),r.aA(j,j,O),r.aA(K,K,O);const te=new r.P(B[0]/B[3],B[1]/B[3]),Q=new r.P(j[0]/j[3],j[1]/j[3]),oe=r.aC(S,te)&&B[3]<K[3],Ce=r.aC(S,Q)&&j[3]<K[3];if(!oe&&!Ce)return null;const _e=function(rt,Qe,ut){for(let pt=1;pt<rt.length;pt++){const zt=os(Qe.pointCoordinate3D(rt[pt-1]).x),Vt=os(Qe.pointCoordinate3D(rt[pt]).x);if(ut<0){if(zt<Vt)return{idx:pt,t:-zt/(Vt-1-zt)}}else if(Vt<zt)return{idx:pt,t:(1-zt)/(Vt+1-zt)}}return null}(S,T,oe?-1:1);if(!_e)return null;const{idx:Ee,t:Me}=_e;let ze=Ee>1?ns(S.slice(0,Ee),T):[],qe=Ee<S.length?ns(S.slice(Ee),T):[];ze=ze.map(rt=>new r.P(os(rt.x),rt.y)),qe=qe.map(rt=>new r.P(os(rt.x),rt.y));const Je=[...ze];Je.length===0&&Je.push(qe[qe.length-1]);const lt=r.ai(Je[Je.length-1].y,(qe.length===0?ze[0]:qe[0]).y,Me);let ot;return ot=oe?[new r.P(0,lt),new r.P(0,0),new r.P(1,0),new r.P(1,lt)]:[new r.P(1,lt),new r.P(1,1),new r.P(0,1),new r.P(0,lt)],Je.push(...ot),qe.length===0?Je.push(ze[0]):Je.push(...qe),{polygon:Je.map(rt=>new r.ac(rt.x,rt.y)),unwrapped:!1}}(i,u);if(p)return p;const x=function(S,T){let O=!1,B=-1/0,j=0;for(let te=0;te<S.length-1;te++)S[te].x>B&&(B=S[te].x,j=te);for(let te=0;te<S.length-1;te++){const Q=(j+te)%(S.length-1),oe=S[Q],Ce=S[Q+1];Math.abs(oe.x-Ce.x)>.5&&(oe.x<Ce.x?(oe.x+=1,Q===0&&(S[S.length-1].x+=1)):(Ce.x+=1,Q+1===S.length-1&&(S[0].x+=1)),O=!0)}const K=r.aD(T.center.lng);return O&&K<Math.abs(K-1)&&S.forEach(te=>{te.x-=1}),{polygon:S,unwrapped:O}}(ns(i,u).map(S=>new r.P(os(S.x),S.y)),u);return{polygon:x.polygon.map(S=>new r.ac(S.x,S.y)),unwrapped:x.unwrapped}}}function ns(f,i){return r.aE(f,u=>{const p=i.pointCoordinate3D(u);u.x=p.x,u.y=p.y},1/256)}function os(f){return f<0?1+f%1:f%1}function $i(f){return 100*f|0}function Js(f,i,u,p,x){const S=function(O,B){if(O)return x(O);if(B){if(f.url&&B.tiles&&f.tiles&&delete f.tiles,B.variants){if(!Array.isArray(B.variants))return x(new Error("variants must be an array"));for(const K of B.variants){if(K==null||typeof K!="object"||K.constructor!==Object)return x(new Error("variant must be an object"));if(!Array.isArray(K.capabilities))return x(new Error("capabilities must be an array"));if(K.capabilities.length===1&&K.capabilities[0]==="meshopt"){B=r.h(B,K);break}}}const j=r.aF(r.h({},B,f),["tilejson","tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","extra_bounds","scheme","tileSize","encoding","vector_layers","raster_layers","worldview_options","worldview_default","worldview"]);j.tiles=i.canonicalizeTileset(j,f.url),x(null,j)}},T=function(O,B,j){if(!O)return null;if(!B&&!j)return O;j=j||O.worldview_default;const K=Object.values(O.language||{});if(K.length===0)return null;const te=Object.values(O.worldview||{});if(te.length===0)return null;const Q=K.every(Ce=>Ce===B),oe=te.every(Ce=>Ce===j);return Q&&oe?O:B in(O.language_options||{})||j in(O.worldview_options||{})?null:O.language_options&&O.worldview_options?O:null}(f.data,u,p);return T?r.q.frame(()=>S(null,T)):f.url?r.n(i.transformRequest(i.normalizeSourceURL(f.url,null,u,p),r.R.Source),S):r.q.frame(()=>{const{data:O,...B}=f;S(null,B)})}function Io(f,i){const u=Math.pow(2,i.z),p=Math.floor(r.aD(f.getWest())*u),x=Math.floor(r.aH(f.getNorth())*u),S=Math.ceil(r.aD(f.getEast())*u),T=Math.ceil(r.aH(f.getSouth())*u);return i.x>=p&&i.x<S&&i.y>=x&&i.y<T}class io{constructor(i,u,p){this.bounds=i?r.aG.convert(this.validateBounds(i)):null,this.minzoom=u||0,this.maxzoom=p||24}validateBounds(i){return Array.isArray(i)&&i.length===4?[Math.max(-180,i[0]),Math.max(-90,i[1]),Math.min(180,i[2]),Math.min(90,i[3])]:[-180,-90,180,90]}addExtraBounds(i){if(i){this.extraBounds||(this.extraBounds=[]);for(const u of i)this.extraBounds.push(r.aG.convert(this.validateBounds(u)))}}contains(i){if(i.z>this.maxzoom||i.z<this.minzoom||this.bounds&&!Io(this.bounds,i))return!1;if(!this.extraBounds)return!0;for(const u of this.extraBounds)if(Io(u,i))return!0;return!1}static fromTileJSON(i){if(!i.bounds&&!i.extra_bounds)return null;const u=new io(i.bounds,i.minzoom,i.maxzoom);return u.addExtraBounds(i.extra_bounds),u}}class zu extends r.E{constructor(i,u,p,x){if(super(),this.id=i,this.dispatcher=p,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,r.h(this,r.aF(u,["url","scheme","tileSize","promoteId"])),this._options=r.h({type:"vector"},u),this._collectResourceTiming=!!u.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(x),this._tileWorkers={},this._deduped=new r.aI}load(i){this._loaded=!1,this.fire(new r.A("dataloading",{dataType:"source"}));const u=Array.isArray(this.map._language)?this.map._language.join():this.map._language,p=this.map.getWorldview();this._tileJSONRequest=Js(this._options,this.map._requestManager,u,p,(x,S)=>{if(this._tileJSONRequest=null,this._loaded=!0,x)u&&console.warn(`Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ${u}`),p&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${p}`),this.fire(new r.z(x));else if(S){if(r.h(this,S),this.hasWorldviews=!!S.worldview_options,S.worldview_default&&(this.worldviewDefault=S.worldview_default),S.vector_layers){this.vectorLayers=S.vector_layers,this.vectorLayerIds=[],this.localizableLayerIds=new Set;for(const T of S.vector_layers)this.vectorLayerIds.push(T.id),S.worldview&&S.worldview[T.source]&&this.localizableLayerIds.add(T.id)}this.tileBounds=io.fromTileJSON(S),ft(S.tiles,this.map._requestManager._customAccessToken),this.fire(new r.A("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new r.A("data",{dataType:"source",sourceDataType:"content"}))}i&&i(x)})}loaded(){return this._loaded}hasTile(i){return!this.tileBounds||this.tileBounds.contains(i.canonical)}onAdd(i){this.map=i,this.load()}reload(){this.cancelTileJSONRequest();const i=r.C(this.id,this.scope);this.load(()=>this.map.style.clearSource(i))}setTiles(i){return this._options.tiles=i,this.reload(),this}setUrl(i){return this.url=i,this._options.url=i,this.reload(),this}onRemove(i){this.cancelTileJSONRequest()}serialize(){return r.h({},this._options)}loadTile(i,u){const p=i.tileID.canonical.url(this.tiles,this.scheme),x=this.map._requestManager.normalizeTileURL(p),S=this.map._requestManager.transformRequest(x,r.R.Tile),T=this.map.style?this.map.style.getLut(this.scope):null,O=T?{image:T.image.clone()}:null,B={request:S,data:void 0,uid:i.uid,tileID:i.tileID,tileZoom:i.tileZoom,zoom:i.tileID.overscaledZ,maxZoom:this.maxzoom,lut:O,tileSize:this.tileSize*i.tileID.overscaleFactor(),type:this.type,source:this.id,scope:this.scope,pixelRatio:r.q.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:i.isSymbolTile,brightness:this.map.style&&this.map.style.getBrightness()||0,extraShadowCaster:i.isExtraShadowCaster,tessellationStep:this.map._tessellationStep,scaleFactor:this.map.getScaleFactor(),worldview:this.map.getWorldview()||this.worldviewDefault};if(this.hasWorldviews&&r.j(p)&&(B.localizableLayerIds=this.localizableLayerIds),B.request.collectResourceTiming=this._collectResourceTiming,i.actor&&i.state!=="expired")i.state==="loading"?i.reloadCallback=u:i.request=i.actor.send("reloadTile",B,j.bind(this));else if(i.actor=this._tileWorkers[x]=this._tileWorkers[x]||this.dispatcher.getActor(),this.dispatcher.ready)i.request=i.actor.send("loadTile",B,j.bind(this),void 0,!0);else{const K=r.aJ.call({deduped:this._deduped},B,(te,Q)=>{te||!Q?j.call(this,te):(B.data={cacheControl:Q.cacheControl,expires:Q.expires,rawData:Q.rawData.slice(0)},i.actor&&i.actor.send("loadTile",B,j.bind(this),void 0,!0))},!0);i.request={cancel:K}}function j(K,te){return delete i.request,i.aborted?u(null):K&&K.status!==404?u(K):(te&&te.resourceTiming&&(i.resourceTiming=te.resourceTiming),this.map._refreshExpiredTiles&&te&&i.setExpiryData(te),i.loadVectorData(te,this.map.painter),r.aK(this.dispatcher),u(null),void(i.reloadCallback&&(this.loadTile(i,i.reloadCallback),i.reloadCallback=null)))}}abortTile(i){i.request&&(i.request.cancel(),delete i.request),i.actor&&i.actor.send("abortTile",{uid:i.uid,type:this.type,source:this.id,scope:this.scope})}unloadTile(i,u){i.actor&&i.actor.send("removeTile",{uid:i.uid,type:this.type,source:this.id,scope:this.scope}),i.destroy()}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}class ko extends r.E{constructor(i,u,p,x){super(),this.id=i,this.dispatcher=p,this.setEventedParent(x),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=r.h({type:"raster"},u),r.h(this,r.aF(u,["url","scheme","tileSize"]))}load(i){this._loaded=!1,this.fire(new r.A("dataloading",{dataType:"source"}));const u=this.map.getWorldview();this._tileJSONRequest=Js(this._options,this.map._requestManager,null,u,(p,x)=>{this._tileJSONRequest=null,this._loaded=!0,p?this.fire(new r.z(p)):x&&(r.h(this,x),x.raster_layers&&(this.rasterLayers=x.raster_layers,this.rasterLayerIds=this.rasterLayers.map(S=>S.id)),this.tileBounds=io.fromTileJSON(x),ft(x.tiles),this.fire(new r.A("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new r.A("data",{dataType:"source",sourceDataType:"content"}))),i&&i(p)})}loaded(){return this._loaded}onAdd(i){this.map=i,this.load()}reload(){this.cancelTileJSONRequest();const i=r.C(this.id,this.scope);this.load(()=>this.map.style.clearSource(i))}setTiles(i){return this._options.tiles=i,this.reload(),this}setUrl(i){return this.url=i,this._options.url=i,this.reload(),this}onRemove(i){this.cancelTileJSONRequest()}serialize(){return r.h({},this._options)}hasTile(i){return!this.tileBounds||this.tileBounds.contains(i.canonical)}loadTile(i,u){const p=r.q.devicePixelRatio>=2,x=this.map._requestManager.normalizeTileURL(i.tileID.canonical.url(this.tiles,this.scheme),p,this.tileSize);i.request=r.o(this.map._requestManager.transformRequest(x,r.R.Tile),(S,T,O,B)=>(delete i.request,i.aborted?(i.state="unloaded",u(null)):S?(i.state="errored",u(S)):T?(this.map._refreshExpiredTiles&&i.setExpiryData({cacheControl:O,expires:B}),i.setTexture(T,this.map.painter),i.state="loaded",r.aK(this.dispatcher),void u(null)):u(null)))}abortTile(i,u){i.request&&(i.request.cancel(),delete i.request),u&&u()}unloadTile(i,u){i.texture&&i.texture instanceof r.T?(i.destroy(!0),i.texture&&i.texture instanceof r.T&&this.map.painter.saveTileTexture(i.texture)):i.destroy(),u&&u()}hasTransition(){return!1}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}class hu extends ko{constructor(i,u,p,x){super(i,u,p,x),this.type="raster-array",this.maxzoom=22,this.partial=!0,this._options=r.h({type:"raster-array"},u)}triggerRepaint(i){const u=this.map.painter._terrain,p=this.map.style.getSourceCache(this.id);u&&u.enabled&&p&&u._clearRenderCacheForTile(p.id,i.tileID),this.map.triggerRepaint()}loadTile(i,u){const p=this.map._requestManager.normalizeTileURL(i.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize),x=this.map._requestManager.transformRequest(p,r.R.Tile),S={request:x,uid:i.uid,tileID:i.tileID,type:this.type,source:this.id,scope:this.scope,partial:this.partial};i.source=this.id,i.scope=this.scope,i.requestParams=x,i.actor||(i.actor=this.dispatcher.getActor());const T=(O,B,j,K)=>{if(delete i.request,i.aborted)return i.state="unloaded",u(null);if(O)return O.name==="AbortError"?void 0:(i.state="errored",u(O));if(this.map._refreshExpiredTiles&&B&&i.setExpiryData({cacheControl:j,expires:K}),this.partial)i.state="empty";else{if(!B)return u(null);i.state="loaded",i._isHeaderLoaded=!0,i._mrt=B}u(null)};i.request=this.partial?i.fetchHeader(void 0,T.bind(this)):i.actor.send("loadTile",S,T.bind(this),void 0,!0)}abortTile(i){i.request&&(i.request.cancel(),delete i.request),i.actor&&i.actor.send("abortTile",{uid:i.uid,type:this.type,source:this.id,scope:this.scope})}unloadTile(i,u){const p=i.texture;p&&p instanceof r.T?(i.destroy(!0),this.map.painter.saveTileTexture(p)):(i.destroy(),i.flushQueues(),i._isHeaderLoaded=!1,delete i._mrt,delete i.textureDescriptor),i.fbo&&(i.fbo.destroy(),delete i.fbo),delete i.request,delete i.requestParams,delete i.neighboringTiles,i.state="unloaded"}prepareTile(i,u,p){i._isHeaderLoaded&&(i.state!=="empty"&&(i.state="reloading"),i.fetchBand(u,p,(x,S)=>{if(x)return i.state="errored",this.fire(new r.z(x)),void this.triggerRepaint(i);S&&(i._isHeaderLoaded=!0,i.setTexture(S,this.map.painter),i.state="loaded",this.triggerRepaint(i))}))}getInitialBand(i){if(!this.rasterLayers)return 0;const u=this.rasterLayers.find(({id:S})=>S===i),p=u&&u.fields,x=p&&p.bands&&p.bands;return x?x[0]:0}getTextureDescriptor(i,u,p){if(!i)return;const x=u.sourceLayer||this.rasterLayerIds&&this.rasterLayerIds[0];if(!x)return;let S=null;u instanceof r.aN?S=u.paint.get("raster-array-band"):u instanceof r.aO&&(S=u.paint.get("raster-particle-array-band"));const T=S||this.getInitialBand(x);if(T!=null)if(i.textureDescriptor){if(!i.updateNeeded(x,T)||p)return Object.assign({},i.textureDescriptor,{texture:i.texture})}else this.prepareTile(i,x,T)}getImages(i,u){const p=new Map;for(const x of i)for(const S of u){const[T,O]=S.split("/"),B=x.getLayer(T);if(!B||!B.hasBand(O)||!B.hasDataForBand(O))continue;const{bytes:j,tileSize:K,buffer:te}=B.getBandView(O),Q=K+2*te,oe={data:new r.r({width:Q,height:Q},j),pixelRatio:2,sdf:!1,usvg:!1,version:0};p.set(S,oe)}return p}}const Th={vector:zu,raster:ko,"raster-dem":class extends ko{constructor(f,i,u,p){super(f,i,u,p),this.type="raster-dem",this.maxzoom=22,this._options=r.h({type:"raster-dem"},i),this.encoding=i.encoding||"mapbox"}loadTile(f,i){const u=this.map._requestManager.normalizeTileURL(f.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function p(x,S){x&&(f.state="errored",i(x)),S&&(f.dem=S,f.dem.onDeserialize(),f.needsHillshadePrepare=!0,f.needsDEMTextureUpload=!0,f.state="loaded",i(null))}f.request=r.o(this.map._requestManager.transformRequest(u,r.R.Tile),(function(x,S,T,O){if(delete f.request,f.aborted)f.state="unloaded",i(null);else if(x)f.state="errored",i(x);else if(S){this.map._refreshExpiredTiles&&f.setExpiryData({cacheControl:T,expires:O});const B=ImageBitmap&&S instanceof ImageBitmap&&r.t(),j=1-(S.width-r.aL(S.width))/2;j<1||f.neighboringTiles||(f.neighboringTiles=this._getNeighboringTiles(f.tileID));const K=B?S:r.q.getImageData(S,j),te={uid:f.uid,tileID:f.tileID,source:this.id,type:this.type,scope:this.scope,rawImageData:K,encoding:this.encoding,padding:j};f.actor&&f.state!=="expired"||(f.actor=this.dispatcher.getActor(),f.actor.send("loadTile",te,p.bind(this),void 0,!0))}}).bind(this))}_getNeighboringTiles(f){const i=f.canonical,u=Math.pow(2,i.z),p=(i.x-1+u)%u,x=i.x===0?f.wrap-1:f.wrap,S=(i.x+1+u)%u,T=i.x+1===u?f.wrap+1:f.wrap,O={};return O[new r.aM(f.overscaledZ,x,i.z,p,i.y).key]={backfilled:!1},O[new r.aM(f.overscaledZ,T,i.z,S,i.y).key]={backfilled:!1},i.y>0&&(O[new r.aM(f.overscaledZ,x,i.z,p,i.y-1).key]={backfilled:!1},O[new r.aM(f.overscaledZ,f.wrap,i.z,i.x,i.y-1).key]={backfilled:!1},O[new r.aM(f.overscaledZ,T,i.z,S,i.y-1).key]={backfilled:!1}),i.y+1<u&&(O[new r.aM(f.overscaledZ,x,i.z,p,i.y+1).key]={backfilled:!1},O[new r.aM(f.overscaledZ,f.wrap,i.z,i.x,i.y+1).key]={backfilled:!1},O[new r.aM(f.overscaledZ,T,i.z,S,i.y+1).key]={backfilled:!1}),O}},"raster-array":hu,geojson:class extends r.E{constructor(f,i,u,p){super(),this.id=f,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=u.getActor(),this.setEventedParent(p),this._data=i.data,this._options=r.h({},i),this._collectResourceTiming=i.collectResourceTiming,i.maxzoom!==void 0&&(this.maxzoom=i.maxzoom),i.minzoom!==void 0&&(this.minzoom=i.minzoom),i.type&&(this.type=i.type),i.attribution&&(this.attribution=i.attribution),this.promoteId=i.promoteId;const x=r.aj/this.tileSize;this.workerOptions=r.h({source:this.id,scope:this.scope,cluster:i.cluster||!1,geojsonVtOptions:{buffer:(i.buffer!==void 0?i.buffer:128)*x,tolerance:(i.tolerance!==void 0?i.tolerance:.375)*x,extent:r.aj,maxZoom:this.maxzoom,lineMetrics:i.lineMetrics||!1,generateId:i.generateId||!1},superclusterOptions:{maxZoom:i.clusterMaxZoom!==void 0?i.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,i.clusterMinPoints||2),extent:r.aj,radius:(i.clusterRadius!==void 0?i.clusterRadius:50)*x,log:!1,generateId:i.generateId||!1},clusterProperties:i.clusterProperties,filter:i.filter,dynamic:i.dynamic},i.workerOptions)}onAdd(f){this.map=f,this.setData(this._data)}setData(f){return this._data=f,this._updateWorkerData(),this}updateData(f){if(!this._options.dynamic)return this.fire(new r.z(new Error("Can't call updateData on a GeoJSON source with dynamic set to false.")));if(typeof f!="string"&&(f.type==="Feature"&&(f={type:"FeatureCollection",features:[f]}),f.type!=="FeatureCollection"))return this.fire(new r.z(new Error("Data to update should be a feature or a feature collection.")));if(this._coalesce&&typeof f!="string"&&typeof this._data!="string"&&this._data.type==="FeatureCollection"){const i=new Map;for(const u of this._data.features)i.set(u.id,u);for(const u of f.features)i.set(u.id,u);this._data.features=[...i.values()]}else this._data=f;return this._updateWorkerData(!0),this}getClusterExpansionZoom(f,i){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:f,source:this.id,scope:this.scope},i),this}getClusterChildren(f,i){return this.actor.send("geojson.getClusterChildren",{clusterId:f,source:this.id,scope:this.scope},i),this}getClusterLeaves(f,i,u,p){return this.actor.send("geojson.getClusterLeaves",{source:this.id,scope:this.scope,clusterId:f,limit:i,offset:u},p),this}_updateWorkerData(f=!1){if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new r.A("dataloading",{dataType:"source"})),this._loaded=!1;const i=r.h({append:f},this.workerOptions);i.scope=this.scope;const u=this._data;typeof u=="string"?(i.request=this.map._requestManager.transformRequest(r.q.resolveURL(u),r.R.Source),i.request.collectResourceTiming=this._collectResourceTiming):i.data=JSON.stringify(u),this._pendingLoad=this.actor.send(`${this.type}.loadData`,i,(p,x)=>{if(this._loaded=!0,this._pendingLoad=null,p)this.fire(new r.z(p));else{const S={dataType:"source",sourceDataType:this._metadataFired?"content":"metadata"};this._collectResourceTiming&&x&&x.resourceTiming&&x.resourceTiming[this.id]&&(S.resourceTiming=x.resourceTiming[this.id]),f&&(this._partialReload=!0),this.fire(new r.A("data",S)),this._partialReload=!1,this._metadataFired=!0}this._coalesce&&(this._updateWorkerData(f),this._coalesce=!1)})}loaded(){return this._loaded}reload(){const f=r.C(this.id,this.scope);this.map.style.clearSource(f),this._updateWorkerData()}loadTile(f,i){const u=f.actor?"reloadTile":"loadTile";f.actor=this.actor;const p=this.map.style?this.map.style.getLut(this.scope):null,x=p?{image:p.image.clone()}:null,S=this._partialReload,T={type:this.type,uid:f.uid,tileID:f.tileID,tileZoom:f.tileZoom,zoom:f.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,lut:x,scope:this.scope,pixelRatio:r.q.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,brightness:this.map.style&&this.map.style.getBrightness()||0,extraShadowCaster:f.isExtraShadowCaster,scaleFactor:this.map.getScaleFactor(),partial:S,worldview:this.map.getWorldview()};f.request=this.actor.send(u,T,(O,B)=>S&&!B?(f.state="loaded",i(null)):(delete f.request,f.destroy(),f.aborted?i(null):O?i(O):(f.loadVectorData(B,this.map.painter,u==="reloadTile"),i(null))),void 0,u==="loadTile")}abortTile(f){f.request&&(f.request.cancel(),delete f.request),f.aborted=!0}unloadTile(f,i){this.actor.send("removeTile",{uid:f.uid,type:this.type,source:this.id,scope:this.scope}),f.destroy()}onRemove(f){this._pendingLoad&&this._pendingLoad.cancel()}serialize(){return r.h({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends r.aP{constructor(f,i,u,p){super(f,i,u,p),this.roundZoom=!0,this.type="video",this.options=i}load(){this._loaded=!1;const f=this.options;this.urls=[];for(const i of f.urls)this.urls.push(this.map._requestManager.transformRequest(i,r.R.Source).url);r.aQ(this.urls,(i,u)=>{this._loaded=!0,i?this.fire(new r.z(i)):u&&(this.video=u,this.video.loop=!0,this.video.setAttribute("playsinline",""),this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(f){if(this.video){const i=this.video.seekable;f<i.start(0)||f>i.end(0)?this.fire(new r.z(new r.V(`sources.${this.id}`,null,`Playback for this video can be set only between the ${i.start(0)} and ${i.end(0)}-second mark.`))):this.video.currentTime=f}}getVideo(){return this.video}onAdd(f){this.map||(this.map=f,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const f=this.map.painter.context,i=f.gl;this.texture?this.video.paused||(this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE),i.texSubImage2D(i.TEXTURE_2D,0,0,0,i.RGBA,i.UNSIGNED_BYTE,this.video)):(this.texture=new r.T(f,this.video,i.RGBA8),this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE),this.width=this.video.videoWidth,this.height=this.video.videoHeight),this._prepareData(f)}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:r.aP,model:class extends r.E{constructor(f,i,u,p){super(),this.id=f,this.type="model",this.models=[],this._loaded=!1,this._options=i}load(){const f=[];for(const i in this._options.models){const u=this._options.models[i],p=r.aS(this.map._requestManager.transformRequest(u.uri,r.R.Model).url).then(x=>{if(!x)return;const S=r.aT(x),T=new r.aU(i,u.position,u.orientation,S);T.computeBoundsAndApplyParent(),this.models.push(T)}).catch(x=>{this.fire(new r.z(new Error(`Could not load model ${i} from ${u.uri}: ${x.message}`)))});f.push(p)}Promise.allSettled(f).then(()=>{this._loaded=!0,this.fire(new r.A("data",{dataType:"source",sourceDataType:"metadata"}))}).catch(i=>{this._loaded=!0,this.fire(new r.z(new Error(`Could not load models: ${i.message}`)))})}onAdd(f){this.map=f,this.load()}hasTransition(){return!1}loaded(){return this._loaded}getModels(){return this.models}loadTile(f,i){}serialize(){return this._options}},"batched-model":class extends r.E{constructor(f,i,u,p){super(),this.type="batched-model",this.id=f,this.tileSize=512,this._options=i,this.tiles=this._options.tiles,this.maxzoom=i.maxzoom||19,this.minzoom=i.minzoom||0,this.roundZoom=!0,this.usedInConflation=!0,this.dispatcher=u,this.reparseOverscaled=!1,this.scheme="xyz",this._loaded=!1,this.setEventedParent(p)}onAdd(f){this.map=f,this.load()}reload(){this.cancelTileJSONRequest();const f=r.C(this.id,this.scope);this.load(()=>this.map.style.clearSource(f))}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}load(f){this._loaded=!1,this.fire(new r.A("dataloading",{dataType:"source"}));const i=Array.isArray(this.map._language)?this.map._language.join():this.map._language,u=this.map.getWorldview();this._tileJSONRequest=Js(this._options,this.map._requestManager,i,u,(p,x)=>{this._tileJSONRequest=null,this._loaded=!0,p?(i&&console.warn(`Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ${i}`),u&&u.length!==2&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${u}`),this.fire(new r.z(p))):x&&(r.h(this,x),x.bounds&&(this.tileBounds=new io(x.bounds,this.minzoom,this.maxzoom)),ft(x.tiles,this.map._requestManager._customAccessToken),this.fire(new r.A("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new r.A("data",{dataType:"source",sourceDataType:"content"}))),f&&f(p)})}hasTransition(){return!1}hasTile(f){return!this.tileBounds||this.tileBounds.contains(f.canonical)}loaded(){return this._loaded}loadTile(f,i){const u=this.map._requestManager.normalizeTileURL(f.tileID.canonical.url(this.tiles,this.scheme)),p={request:this.map._requestManager.transformRequest(u,r.R.Tile),data:void 0,uid:f.uid,tileID:f.tileID,tileZoom:f.tileZoom,zoom:f.tileID.overscaledZ,tileSize:this.tileSize*f.tileID.overscaleFactor(),type:this.type,source:this.id,scope:this.scope,showCollisionBoxes:this.map.showCollisionBoxes,isSymbolTile:f.isSymbolTile,brightness:this.map.style&&this.map.style.getBrightness()||0,pixelRatio:r.q.devicePixelRatio,promoteId:this.promoteId};if(f.actor&&f.state!=="expired")if(f.state==="loading")f.reloadCallback=i;else{if(f.buckets){const S=Object.values(f.buckets);for(const T of S)T.dirty=!0;return void(f.state="loaded")}f.request=f.actor.send("reloadTile",p,x.bind(this))}else f.actor=this.dispatcher.getActor(),f.request=f.actor.send("loadTile",p,x.bind(this),void 0,!0);function x(S,T){return f.aborted?i(null):S&&S.status!==404?i(S):(this.map._refreshExpiredTiles&&T&&f.setExpiryData(T),f.loadModelData(T,this.map.painter),f.state="loaded",void i(null))}}serialize(){return r.h({},this._options)}},canvas:class extends r.aP{constructor(f,i,u,p){super(f,i,u,p),i.coordinates?Array.isArray(i.coordinates)&&i.coordinates.length===4&&!i.coordinates.some(x=>!Array.isArray(x)||x.length!==2||x.some(S=>typeof S!="number"))||this.fire(new r.z(new r.V(`sources.${f}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new r.z(new r.V(`sources.${f}`,null,'missing required property "coordinates"'))),i.animate&&typeof i.animate!="boolean"&&this.fire(new r.z(new r.V(`sources.${f}`,null,'optional "animate" property must be a boolean value'))),i.canvas?typeof i.canvas=="string"||i.canvas instanceof HTMLCanvasElement||this.fire(new r.z(new r.V(`sources.${f}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new r.z(new r.V(`sources.${f}`,null,'missing required property "canvas"'))),this.options=i,this.animate=i.animate===void 0||i.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new r.z(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(f){this.map=f,this.load(),this.canvas&&this.animate&&this.play()}onRemove(f){this.pause()}prepare(){let f=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,f=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,f=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const i=this.map.painter.context;this.texture?!f&&!this._playing||this.texture instanceof r.aR||this.texture.update(this.canvas,{premultiply:!0}):this.texture=new r.T(i,this.canvas,i.gl.RGBA8,{premultiply:!0}),this._prepareData(i)}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const f of[this.canvas.width,this.canvas.height])if(isNaN(f)||f<=0)return!0;return!1}},custom:class extends r.E{constructor(f,i,u,p){super(),this.id=f,this.type="custom",this._dataType="raster",this._dispatcher=u,this._implementation=i,this.setEventedParent(p),this.scheme="xyz",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this._loaded=!1,this.roundZoom=!0,this._implementation||this.fire(new r.z(new Error(`Missing implementation for ${this.id} custom source`))),this._implementation.loadTile||this.fire(new r.z(new Error(`Missing loadTile implementation for ${this.id} custom source`))),this._implementation.bounds&&(this.tileBounds=new io(this._implementation.bounds,this.minzoom,this.maxzoom)),i.update=this._update.bind(this),i.clearTiles=this._clearTiles.bind(this),i.coveringTiles=this._coveringTiles.bind(this),r.h(this,r.aF(i,["dataType","scheme","minzoom","maxzoom","tileSize","attribution","minTileCacheSize","maxTileCacheSize"]))}serialize(){return r.aF(this,["type","scheme","minzoom","maxzoom","tileSize","attribution"])}load(){this._loaded=!0,this.fire(new r.A("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new r.A("data",{dataType:"source",sourceDataType:"content"}))}loaded(){return this._loaded}onAdd(f){this.map=f,this._loaded=!1,this.fire(new r.A("dataloading",{dataType:"source"})),this._implementation.onAdd&&this._implementation.onAdd(f),this.load()}onRemove(f){this._implementation.onRemove&&this._implementation.onRemove(f)}hasTile(f){if(this._implementation.hasTile){const{x:i,y:u,z:p}=f.canonical;return this._implementation.hasTile({x:i,y:u,z:p})}return!this.tileBounds||this.tileBounds.contains(f.canonical)}loadTile(f,i){const{x:u,y:p,z:x}=f.tileID.canonical,S=new AbortController;f.request=Promise.resolve(this._implementation.loadTile({x:u,y:p,z:x},{signal:S.signal})).then((function(T){return delete f.request,f.aborted?(f.state="unloaded",i(null)):T===void 0?(f.state="errored",i(null)):T===null?(this.loadTileData(f,{width:this.tileSize,height:this.tileSize,data:null}),f.state="loaded",i(null)):function(O){return O instanceof ImageData||O instanceof HTMLCanvasElement||O instanceof ImageBitmap||O instanceof HTMLImageElement}(T)?(this.loadTileData(f,T),f.state="loaded",void i(null)):(f.state="errored",i(new Error(`Can't infer data type for ${this.id}, only raster data supported at the moment`)))}).bind(this)).catch(T=>{T.name!=="AbortError"&&(f.state="errored",i(T))}),f.request.cancel=()=>S.abort()}loadTileData(f,i){f.setTexture(i,this.map.painter)}unloadTile(f,i){if(f.texture&&f.texture instanceof r.T?(f.destroy(!0),f.texture&&f.texture instanceof r.T&&this.map.painter.saveTileTexture(f.texture)):f.destroy(),this._implementation.unloadTile){const{x:u,y:p,z:x}=f.tileID.canonical;this._implementation.unloadTile({x:u,y:p,z:x})}i&&i()}abortTile(f,i){f.request&&f.request.cancel&&(f.request.cancel(),delete f.request),i&&i()}hasTransition(){return!1}_coveringTiles(){return this.map.transform.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,roundZoom:this.roundZoom}).map(f=>({x:f.canonical.x,y:f.canonical.y,z:f.canonical.z}))}_clearTiles(){const f=r.C(this.id,this.scope);this.map.style.clearSource(f)}_update(){this.fire(new r.A("data",{dataType:"source",sourceDataType:"content"}))}}},Ec=function(f,i,u,p){const x=new Th[i.type](f,i,u,p);if(x.id!==f)throw new Error(`Expected Source id to be ${f} instead of ${x.id}`);return r.aV(["load","abort","unload","serialize","prepare"],x),x};function Tc(f,i,u=""){return`${u}:${i.id||""}:${i.layer.id}:${function(p){if("layerId"in p)return`layer:${p.layerId}`;{const{featuresetId:x,importId:S}=p;return`featureset:${x}${S?`:import:${S}`:""}`}}(f.target)}`}function Nu(f,i,u,p=""){if(f.uniqueFeatureID){const x=Tc(f,i,p);if(u.has(x))return!0;u.add(x)}return!1}function Va(f,i,u,p,x=!1){const S=i.sourceCache.transform,T=i.sourceCache.tilesIn(f,i.has3DLayers,x);T.sort($l);const O=[];for(const B of T){const j=B.tile.queryRenderedFeatures(i,B,u,p,S,x);Object.keys(j).length&&O.push({wrappedTileID:B.tile.tileID.wrapped().key,queryResults:j})}return O.length===0?{}:function(B){const j={},K={};for(const te of B){const Q=te.queryResults,oe=te.wrappedTileID,Ce=K[oe]=K[oe]||{};for(const _e in Q){const Ee=Q[_e],Me=Ce[_e]=Ce[_e]||{},ze=j[_e]=j[_e]||[];for(const qe of Ee)Me[qe.featureIndex]||(Me[qe.featureIndex]=!0,ze.push(qe))}}return j}(O)}function ma(f,i,u,p,x,S){const T={},O=p.queryRenderedSymbols(f),B=[];for(const j of Object.keys(O).map(Number))B.push(x[j]);B.sort($l);for(const j of B){const K=j.featureIndex.lookupSymbolFeatures(O[j.bucketInstanceId],j.bucketIndex,j.sourceLayerIndex,i,u,S);for(const te in K){const Q=T[te]=T[te]||[],oe=K[te];oe.sort((Ce,_e)=>{const Ee=j.featureSortOrder;if(Ee){const Me=Ee.indexOf(Ce.featureIndex);return Ee.indexOf(_e.featureIndex)-Me}return _e.featureIndex-Ce.featureIndex});for(const Ce of oe)Q.push(Ce)}}return T}function Ic(f,i){const u=f.getRenderableIds().map(S=>f.getTileByID(S)),p=[],x={};for(let S=0;S<u.length;S++){const T=u[S],O=T.tileID.canonical.key;x[O]||(x[O]=!0,T.querySourceFeatures(p,i))}return p}function $l(f,i){const u=f.tileID,p=i.tileID;return u.overscaledZ-p.overscaledZ||u.canonical.y-p.canonical.y||u.wrap-p.wrap||u.canonical.x-p.canonical.x}function sl(f,i){const u={};if(!i)return u;for(const p of f){const x=p.layerIds.map(S=>i.getLayer(S)).filter(Boolean);if(x.length!==0){p.layers=x,p.stateDependentLayerIds&&(p.stateDependentLayers=p.stateDependentLayerIds.map(S=>x.filter(T=>T.id===S)[0]));for(const S of x)u[S.fqid]=p}}return u}const Ia=32,$a=33,Hl=new Uint16Array(8184);for(let f=0;f<2046;f++){let i=f+2,u=0,p=0,x=0,S=0,T=0,O=0;for(1&i?x=S=T=Ia:u=p=O=Ia;(i>>=1)>1;){const j=u+x>>1,K=p+S>>1;1&i?(x=u,S=p,u=T,p=O):(u=x,p=S,x=T,S=O),T=j,O=K}const B=4*f;Hl[B+0]=u,Hl[B+1]=p,Hl[B+2]=x,Hl[B+3]=S}const Ha=new Uint16Array(2178),ka=new Uint8Array(1089),kc=new Uint16Array(1089);function El(f){return f===0?-.03125:f===32?.03125:0}const Mc={type:2,extent:r.aj,loadGeometry:()=>[[new r.P(0,0),new r.P(r.aj+1,0),new r.P(r.aj+1,r.aj+1),new r.P(0,r.aj+1),new r.P(0,0)]]};class Fu{constructor(i,u,p,x,S,T){this.tileID=i,this.uid=r.a$(),this.uses=0,this.tileSize=u,this.tileZoom=p,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.isRaster=S,x&&x.style&&(this._lastUpdatedBrightness=x.style.getBrightness()),this.expiredRequestCount=0,this.state="loading",x&&x.transform&&(this.projection=x.transform.projection),this.worldview=T}registerFadeDuration(i){const u=i+this.timeAdded;u<r.q.now()||this.fadeEndTime&&u<this.fadeEndTime||(this.fadeEndTime=u)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}get tileTransform(){return this._tileTransform||(this._tileTransform=r.aW(this.tileID.canonical,this.projection)),this._tileTransform}loadVectorData(i,u,p){if(this.unloadVectorData(),this.state="loaded",i){i.featureIndex&&(this.latestFeatureIndex=i.featureIndex,i.rawTileData?(this.latestRawTileData=i.rawTileData,this.latestFeatureIndex.rawTileData=i.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=i.collisionBoxArray,this.buckets=sl(i.buckets,u.style),this.hasSymbolBuckets=!1;for(const x in this.buckets){const S=this.buckets[x];if(S instanceof r.b1){if(this.hasSymbolBuckets=!0,!p)break;S.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const x in this.buckets){const S=this.buckets[x];if(S instanceof r.b1&&S.hasRTLText){this.hasRTLText=!0,r.b2();break}}this.queryPadding=0;for(const x in this.buckets){const S=this.buckets[x],T=u.style.getOwnLayer(x);if(!T)continue;const O=T.queryRadius(S);this.queryPadding=Math.max(this.queryPadding,O)}i.imageAtlas&&(this.imageAtlas=i.imageAtlas),i.glyphAtlasImage&&(this.glyphAtlasImage=i.glyphAtlasImage),i.lineAtlas&&(this.lineAtlas=i.lineAtlas),this._lastUpdatedBrightness=i.brightness}else this.collisionBoxArray=new r.b0}unloadVectorData(){if(this.hasData()){for(const i in this.buckets)this.buckets[i].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),this.latestFeatureIndex=null,this.state="unloaded"}}loadModelData(i,u,p){i&&(i.resourceTiming&&(this.resourceTiming=i.resourceTiming),this.buckets=Object.assign({},this.buckets,sl(i.buckets,u.style)),i.featureIndex&&(this.latestFeatureIndex=i.featureIndex))}getBucket(i){return this.buckets[i.fqid]}upload(i){for(const x in this.buckets){const S=this.buckets[x];S.uploadPending()&&S.upload(i)}const u=i.gl,p=this.imageAtlas;p&&!p.uploaded&&(this.imageAtlasTexture=new r.T(i,p.image,u.RGBA8,{useMipmap:!!p.patternPositions.size}),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new r.T(i,this.glyphAtlasImage,u.R8),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new r.T(i,this.lineAtlas.image,u.R8),this.lineAtlas.uploaded=!0)}prepare(i,u,p){if(this.imageAtlas&&this.imageAtlasTexture&&this.imageAtlas.patchUpdatedImages(i,this.imageAtlasTexture,p),!u||!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData)return;const x=u.style.getBrightness();(this._lastUpdatedBrightness||x)&&(this._lastUpdatedBrightness&&x&&Math.abs(this._lastUpdatedBrightness-x)<.001||(this.updateBuckets(u,this._lastUpdatedBrightness!==x),this._lastUpdatedBrightness=x))}queryRenderedFeatures(i,u,p,x,S,T){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData&&!this.latestFeatureIndex.is3DTile)return{};const O=function(B,j){const K=r.bn([],[.5*B.width,.5*-B.height,1]);return r.bo(K,K,[1,-1,0]),r.az(K,K,B.calculateProjMatrix(j.toUnwrapped())),Float32Array.from(K)}(S,this.tileID);return this.latestFeatureIndex.query(i,{tilespaceGeometry:u,pixelPosMatrix:O,transform:x,availableImages:p,tileTransform:this.tileTransform,worldview:this.worldview})}querySourceFeatures(i,u){const p=this.latestFeatureIndex;if(!p||!p.rawTileData)return;const x=p.loadVTLayers(),S=u?u.sourceLayer:"",T=x._geojsonTileLayer||x[S];if(!T)return;const O=r.b3(u&&u.filter),{z:B,x:j,y:K}=this.tileID.canonical,te={z:B,x:j,y:K};for(let Q=0;Q<T.length;Q++){const oe=T.feature(Q);if(O.needGeometry){const Ee=r.b4(oe,!0);if(!O.filter(new r.aa(this.tileID.overscaledZ,{worldview:this.worldview}),Ee,this.tileID.canonical))continue}else if(!O.filter(new r.aa(this.tileID.overscaledZ,{worldview:this.worldview}),oe))continue;const Ce=p.getId(oe,S),_e=new r.b5(oe,B,j,K,Ce);_e.tile=te,i.push(_e)}}loaded(){return this.state==="loaded"||this.state==="errored"}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return!!this.imageAtlas&&!!this.imageAtlas.patternPositions.size}setExpiryData(i){const u=this.expirationTime;if(i.cacheControl){const p=r.b6(i.cacheControl);p["max-age"]&&(this.expirationTime=Date.now()+1e3*p["max-age"])}else i.expires&&(this.expirationTime=new Date(i.expires).getTime());if(this.expirationTime){const p=Date.now();let x=!1;if(this.expirationTime>p)x=!1;else if(u)if(this.expirationTime<u)x=!0;else{const S=this.expirationTime-u;S?this.expirationTime=p+Math.max(S,3e4):x=!0}else x=!0;x?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}refreshFeatureState(i){this.latestFeatureIndex&&(this.latestFeatureIndex.rawTileData||this.latestFeatureIndex.is3DTile)&&i&&this.updateBuckets(i)}updateBuckets(i,u){if(!this.latestFeatureIndex||!i.style)return;const p=this.latestFeatureIndex.loadVTLayers(),x=i.style.listImages(),S=i.style.getBrightness();for(const T in this.buckets){if(!i.style.hasLayer(T))continue;const O=this.buckets[T],B=O.layers[0],j=B.sourceLayer||"_geojsonTileLayer",K=p[j],te=i.style.getLayerSourceCache(B);let Q={};te&&(Q=te._state.getState(j,void 0));const oe=this.imageAtlas?Object.fromEntries(this.imageAtlas.patternPositions):{},Ce=Object.keys(Q).length>0&&!u;Ce&&!O.stateDependentLayers.length&&!u||O.update(Q,K,x,oe,Ce?O.stateDependentLayers:O.layers,u,S),(O instanceof r.b7||O instanceof r.b8)&&i._terrain&&i._terrain.enabled&&te&&O.uploadPending()&&i._terrain._clearRenderCacheForTile(te.id,this.tileID);const _e=i&&i.style&&i.style.getOwnLayer(T);_e&&(this.queryPadding=Math.max(this.queryPadding,_e.queryRadius(O)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<r.q.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(i){this.symbolFadeHoldUntil=r.q.now()+i}setTexture(i,u){const p=u.context,x=p.gl;this.texture=this.texture||u.getTileTexture(i.width),this.texture&&this.texture instanceof r.T?this.texture.update(i):(this.texture=new r.T(p,i,x.RGBA8,{useMipmap:!0}),this.texture.bind(x.LINEAR,x.CLAMP_TO_EDGE))}setDependencies(i,u){const p={};for(const x of u)p[x]=!0;this.dependencies[i]=p}hasDependency(i,u){for(const p of i){const x=this.dependencies[p];if(x){for(const S of u)if(x[S])return!0}}return!1}clearQueryDebugViz(){}_makeDebugTileBoundsBuffers(i,u){if(!u||u.name==="mercator"||this._tileDebugBuffer)return;const p=r.b9(Mc,this.tileID.canonical,this.tileTransform)[0],x=new r.ba,S=new r.bb;for(let T=0;T<p.length;T++){const{x:O,y:B}=p[T];x.emplaceBack(O,B),S.emplaceBack(T)}S.emplaceBack(0),this._tileDebugIndexBuffer=i.createIndexBuffer(S),this._tileDebugBuffer=i.createVertexBuffer(x,r.bc.members),this._tileDebugSegments=r.bd.simpleSegment(0,0,x.length,S.length)}_makeTileBoundsBuffers(i,u){if(this._tileBoundsBuffer||!u||u.name==="mercator")return;const p=r.b9(Mc,this.tileID.canonical,this.tileTransform)[0];let x,S;if(this.isRaster){const T=function(O,B){const j=r.aW(O,B),K=Math.pow(2,O.z);for(let Ee=0;Ee<$a;Ee++)for(let Me=0;Me<$a;Me++){const ze=r.aX((O.x+(Me+El(Me))/Ia)/K),qe=r.aY((O.y+(Ee+El(Ee))/Ia)/K),Je=B.project(ze,qe),lt=Ee*$a+Me;Ha[2*lt+0]=Math.round((Je.x*j.scale-j.x)*r.aj),Ha[2*lt+1]=Math.round((Je.y*j.scale-j.y)*r.aj)}ka.fill(0),kc.fill(0);for(let Ee=2045;Ee>=0;Ee--){const Me=4*Ee,ze=Hl[Me+0],qe=Hl[Me+1],Je=Hl[Me+2],lt=Hl[Me+3],ot=ze+Je>>1,rt=qe+lt>>1,Qe=ot+rt-qe,ut=rt+ze-ot,pt=qe*$a+ze,zt=lt*$a+Je,Vt=rt*$a+ot,nn=Math.hypot((Ha[2*pt+0]+Ha[2*zt+0])/2-Ha[2*Vt+0],(Ha[2*pt+1]+Ha[2*zt+1])/2-Ha[2*Vt+1])>=16;ka[Vt]=ka[Vt]||(nn?1:0),Ee<1022&&(ka[Vt]=ka[Vt]||ka[(qe+ut>>1)*$a+(ze+Qe>>1)]||ka[(lt+ut>>1)*$a+(Je+Qe>>1)])}const te=new r.aZ,Q=new r.a_;let oe=0;function Ce(Ee,Me){const ze=Me*$a+Ee;return kc[ze]===0&&(te.emplaceBack(Ha[2*ze+0],Ha[2*ze+1],Ee*r.aj/Ia,Me*r.aj/Ia),kc[ze]=++oe),kc[ze]-1}function _e(Ee,Me,ze,qe,Je,lt){const ot=Ee+ze>>1,rt=Me+qe>>1;if(Math.abs(Ee-Je)+Math.abs(Me-lt)>1&&ka[rt*$a+ot])_e(Je,lt,Ee,Me,ot,rt),_e(ze,qe,Je,lt,ot,rt);else{const Qe=Ce(Ee,Me),ut=Ce(ze,qe),pt=Ce(Je,lt);Q.emplaceBack(Qe,ut,pt)}}return _e(0,0,Ia,Ia,Ia,0),_e(Ia,Ia,0,0,0,Ia),{vertices:te,indices:Q}}(this.tileID.canonical,u);x=T.vertices,S=T.indices}else{x=new r.aZ,S=new r.a_;for(const{x:O,y:B}of p)x.emplaceBack(O,B,0,0);const T=r.be(x.int16.subarray(0,4*x.length),void 0,4);for(let O=0;O<T.length;O+=3)S.emplaceBack(T[O],T[O+1],T[O+2])}this._tileBoundsBuffer=i.createVertexBuffer(x,r.bf.members),this._tileBoundsIndexBuffer=i.createIndexBuffer(S),this._tileBoundsSegments=r.bd.simpleSegment(0,0,x.length,S.length)}_makeGlobeTileDebugBuffers(i,u){const p=u.projection;if(!p||p.name!=="globe"||u.freezeTileCoverage)return;const x=this.tileID.canonical,S=r.bg(x,u),T=r.bh(S),O=r.ah(u.zoom);let B;O>0&&(B=r.bi(new Float64Array(16),u.globeMatrix)),this._makeGlobeTileDebugBorderBuffer(i,x,u,T,B,O),this._makeGlobeTileDebugTextBuffer(i,x,u,T,B,O)}_globePoint(i,u,p,x,S,T,O){let B=r.bj(i,u,p);if(T){const j=1<<p.z,K=r.aD(x.center.lng),te=r.aH(x.center.lat),Q=(p.x+.5)/j-K;let oe=0;Q>.5?oe=-1:Q<-.5&&(oe=1);let Ce=(i/r.aj+p.x)/j+oe,_e=(u/r.aj+p.y)/j;Ce=(Ce-K)*x._pixelsPerMercatorPixel+K,_e=(_e-te)*x._pixelsPerMercatorPixel+te;const Ee=[Ce*x.worldSize,_e*x.worldSize,0];r.ad(Ee,Ee,T),B=r.bk(B,Ee,O)}return r.ad(B,B,S)}_makeGlobeTileDebugBorderBuffer(i,u,p,x,S,T){const O=new r.ba,B=new r.bb,j=new r.bl,K=(Q,oe,Ce,_e,Ee)=>{const Me=(Ce-Q)/(Ee-1),ze=(_e-oe)/(Ee-1),qe=O.length;for(let Je=0;Je<Ee;Je++){const lt=Q+Je*Me,ot=oe+Je*ze;O.emplaceBack(lt,ot);const rt=this._globePoint(lt,ot,u,p,x,S,T);j.emplaceBack(rt[0],rt[1],rt[2]),B.emplaceBack(qe+Je)}},te=r.aj;K(0,0,te,0,16),K(te,0,te,te,16),K(te,te,0,te,16),K(0,te,0,0,16),this._tileDebugIndexBuffer=i.createIndexBuffer(B),this._tileDebugBuffer=i.createVertexBuffer(O,r.bc.members),this._globeTileDebugBorderBuffer=i.createVertexBuffer(j,r.bm.members),this._tileDebugSegments=r.bd.simpleSegment(0,0,O.length,B.length)}_makeGlobeTileDebugTextBuffer(i,u,p,x,S,T){const O=r.aj/4,B=new r.ba,j=new r.a_,K=new r.bl,te=25;j.reserve(32),B.reserve(te),K.reserve(te);const Q=(oe,Ce)=>te*oe+Ce;for(let oe=0;oe<te;oe++){const Ce=oe*O;for(let _e=0;_e<te;_e++){const Ee=_e*O;B.emplaceBack(Ee,Ce);const Me=this._globePoint(Ee,Ce,u,p,x,S,T);K.emplaceBack(Me[0],Me[1],Me[2])}}for(let oe=0;oe<4;oe++)for(let Ce=0;Ce<4;Ce++){const _e=Q(oe,Ce),Ee=Q(oe,Ce+1),Me=Q(oe+1,Ce),ze=Q(oe+1,Ce+1);j.emplaceBack(_e,Ee,Me),j.emplaceBack(Me,Ee,ze)}this._tileDebugTextIndexBuffer=i.createIndexBuffer(j),this._tileDebugTextBuffer=i.createVertexBuffer(B,r.bc.members),this._globeTileDebugTextBuffer=i.createVertexBuffer(K,r.bm.members),this._tileDebugTextSegments=r.bd.simpleSegment(0,0,te,32)}destroy(i=!1){for(const u in this.buckets)this.buckets[u].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&(this.imageAtlasTexture.destroy(),delete this.imageAtlasTexture),this.glyphAtlasTexture&&(this.glyphAtlasTexture.destroy(),delete this.glyphAtlasTexture),this.lineAtlasTexture&&(this.lineAtlasTexture.destroy(),delete this.lineAtlasTexture),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),!i&&this.texture&&this.texture instanceof r.T&&(this.texture.destroy(),delete this.texture),this.hillshadeFBO&&(this.hillshadeFBO.destroy(),delete this.hillshadeFBO),this.dem&&delete this.dem,this.neighboringTiles&&delete this.neighboringTiles,this.demTexture&&(this.demTexture.destroy(),delete this.demTexture),this.rasterParticleState&&(this.rasterParticleState.destroy(),delete this.rasterParticleState),this.latestFeatureIndex=null,this.state="unloaded"}}r.bp.setPbf(r.bq);class fu extends Fu{constructor(i,u,p,x,S){super(i,u,p,x,S),this._workQueue=[],this._fetchQueue=[],this._isHeaderLoaded=!1}getLayers(){return this._mrt?Object.values(this._mrt.layers):[]}getLayer(i){return this._mrt&&this._mrt.getLayer(i)}setTexture(i,u){const p=u.context,x=p.gl;this.texture=this.texture||u.getTileTexture(i.width),this.texture&&this.texture instanceof r.T?this.texture.update(i,{premultiply:!1}):this.texture=new r.T(p,i,x.RGBA8,{premultiply:!1})}flushQueues(){for(;this._workQueue.length;)this._workQueue.pop()();for(;this._fetchQueue.length;)this._fetchQueue.pop()()}fetchHeader(i=16384,u){const p=this._mrt=new r.bp(30),x=Object.assign({},this.requestParams,{headers:{Range:"bytes=0-"+(i-1)}});return this.entireBuffer=null,this.request=r.br(x,(S,T,O,B)=>{if(S)u(S);else try{const j=p.getHeaderLength(T);if(j>i)return void(this.request=this.fetchHeader(j,u));p.parseHeader(T),this._isHeaderLoaded=!0;let K=0;for(const te of Object.values(p.layers))K=Math.max(K,te.dataIndex[te.dataIndex.length-1].lastByte);T.byteLength>=K&&(this.entireBuffer=T),u(null,this.entireBuffer||T,O,B)}catch(j){u(j)}}),this.request}fetchBand(i,u,p){const x=this._mrt;if(!this._isHeaderLoaded||!x)return void p(new Error("Tile header is not ready"));const S=this.actor;if(!S)return void p(new Error("Can't fetch tile band without an actor"));let T;const O=(te,Q)=>{T.complete(te,Q),te?p(te):(this.updateTextureDescriptor(i,u),p(null,this.textureDescriptor&&this.textureDescriptor.img))},B=(te,Q)=>{if(te)return p(te);const oe=S.send("decodeRasterArray",{type:"raster-array",source:this.source,scope:this.scope,tileID:this.tileID,uid:this.uid,buffer:Q,task:T},O,void 0,!0);this._workQueue.push(()=>{oe&&oe.cancel(),T.cancel()})},j=x.getLayer(i);if(!j)return void p(new Error(`Unknown sourceLayer "${i}"`));if(j.hasDataForBand(u))return this.updateTextureDescriptor(i,u),void p(null,this.textureDescriptor?this.textureDescriptor.img:null);const K=j.getDataRange([u]);if(T=x.createDecodingTask(K),!T||T.tasks.length)if(this.flushQueues(),this.entireBuffer)B(null,this.entireBuffer.slice(K.firstByte,K.lastByte+1));else{const te=Object.assign({},this.requestParams,{headers:{Range:`bytes=${K.firstByte}-${K.lastByte}`}}),Q=r.br(te,B);this._fetchQueue.push(()=>{Q.cancel(),T.cancel()})}else p(null)}updateNeeded(i,u){return(!this.textureDescriptor||this.textureDescriptor.band!==u||this.textureDescriptor.layer!==i)&&this.state!=="errored"}updateTextureDescriptor(i,u){if(!this._mrt)return;const p=this._mrt.getLayer(i);if(!p||!p.hasBand(u)||!p.hasDataForBand(u))return;const{bytes:x,tileSize:S,buffer:T,offset:O,scale:B}=p.getBandView(u),j=S+2*T,K=new r.r({width:j,height:j},x),te=this.texture;te&&te instanceof r.T&&te.update(K,{premultiply:!1}),this.textureDescriptor={layer:i,band:u,img:K,buffer:T,offset:O,tileSize:S,format:p.pixelFormat,mix:[B,256*B,65536*B,16777216*B]}}}class eo{constructor(i,u){this.max=i,this.onRemove=u,this.reset()}reset(){for(const i in this.data)for(const u of this.data[i])u.timeout&&clearTimeout(u.timeout),this.onRemove(u.value);return this.data={},this.order=[],this}add(i,u,p){const x=i.wrapped().key;this.data[x]===void 0&&(this.data[x]=[]);const S={value:u,timeout:void 0};if(p!==void 0&&(S.timeout=setTimeout(()=>{this.remove(i,S)},p)),this.data[x].push(S),this.order.push(x),this.order.length>this.max){const T=this._getAndRemoveByKey(this.order[0]);T&&this.onRemove(T)}return this}has(i){return i.wrapped().key in this.data}getAndRemove(i){return this.has(i)?this._getAndRemoveByKey(i.wrapped().key):null}_getAndRemoveByKey(i){const u=this.data[i].shift();return u.timeout&&clearTimeout(u.timeout),this.data[i].length===0&&delete this.data[i],this.order.splice(this.order.indexOf(i),1),u.value}getByKey(i){const u=this.data[i];return u?u[0].value:null}get(i){return this.has(i)?this.data[i.wrapped().key][0].value:null}remove(i,u){if(!this.has(i))return this;const p=i.wrapped().key,x=u===void 0?0:this.data[p].indexOf(u),S=this.data[p][x];return this.data[p].splice(x,1),S.timeout&&clearTimeout(S.timeout),this.data[p].length===0&&delete this.data[p],this.onRemove(S.value),this.order.splice(this.order.indexOf(p),1),this}setMaxSize(i){for(this.max=i;this.order.length>this.max;){const u=this._getAndRemoveByKey(this.order[0]);u&&this.onRemove(u)}return this}filter(i){const u=[];for(const p in this.data)for(const x of this.data[p])i(x.value)||u.push(x);for(const p of u)this.remove(p.value.tileID,p)}}class Ul{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(i,u,p){const x=String(u);if(this.stateChanges[i]=this.stateChanges[i]||{},this.stateChanges[i][x]=this.stateChanges[i][x]||{},r.h(this.stateChanges[i][x],p),this.deletedStates[i]===null){this.deletedStates[i]={};for(const S in this.state[i])S!==x&&(this.deletedStates[i][S]=null)}else if(this.deletedStates[i]&&this.deletedStates[i][x]===null){this.deletedStates[i][x]={};for(const S in this.state[i][x])p[S]||(this.deletedStates[i][x][S]=null)}else for(const S in p)this.deletedStates[i]&&this.deletedStates[i][x]&&this.deletedStates[i][x][S]===null&&delete this.deletedStates[i][x][S]}removeFeatureState(i,u,p){if(this.deletedStates[i]===null)return;const x=String(u);if(this.deletedStates[i]=this.deletedStates[i]||{},p&&u!==void 0)this.deletedStates[i][x]!==null&&(this.deletedStates[i][x]=this.deletedStates[i][x]||{},this.deletedStates[i][x][p]=null);else if(u!==void 0)if(this.stateChanges[i]&&this.stateChanges[i][x])for(p in this.deletedStates[i][x]={},this.stateChanges[i][x])this.deletedStates[i][x][p]=null;else this.deletedStates[i][x]=null;else this.deletedStates[i]=null}getState(i,u){const p=this.state[i]||{},x=this.stateChanges[i]||{},S=this.deletedStates[i];if(S===null)return{};if(u!==void 0){const O=String(u),B=r.h({},p[O],x[O]);if(S){const j=S[u];if(j===null)return{};for(const K in j)delete B[K]}return B}const T=r.h({},p,x);if(S)for(const O in S)delete T[O];return T}initializeTileState(i,u){i.refreshFeatureState(u)}coalesceChanges(i,u){const p={};for(const x in this.stateChanges){this.state[x]=this.state[x]||{};const S={};for(const T in this.stateChanges[x])this.state[x][T]||(this.state[x][T]={}),r.h(this.state[x][T],this.stateChanges[x][T]),S[T]=this.state[x][T];p[x]=S}for(const x in this.deletedStates){this.state[x]=this.state[x]||{};const S={};if(this.deletedStates[x]===null)for(const T in this.state[x])S[T]={},this.state[x][T]={};else for(const T in this.deletedStates[x]){if(this.deletedStates[x][T]===null)this.state[x][T]={};else if(this.state[x][T])for(const O of Object.keys(this.deletedStates[x][T]))delete this.state[x][T][O];S[T]=this.state[x][T]}p[x]=p[x]||{},r.h(p[x],S)}if(this.stateChanges={},this.deletedStates={},Object.keys(p).length!==0)for(const x in i)i[x].refreshFeatureState(u)}}class ta extends r.E{constructor(i,u,p){super(),this.id=i,this._onlySymbols=p,u.on("data",x=>{x.dataType==="source"&&x.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&x.dataType==="source"&&x.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform))}),u.on("error",()=>{this._sourceErrored=!0}),this._source=u,this._tiles={},this._cache=new eo(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._minTileCacheSize=u.minTileCacheSize,this._maxTileCacheSize=u.maxTileCacheSize,this._loadedParentTiles={},this.castsShadows=!1,this.tileCoverLift=0,this._coveredTiles={},this._shadowCasterTiles={},this._state=new Ul,this._isRaster=this._source.type==="raster"||this._source.type==="raster-dem"||this._source.type==="raster-array"||this._source.type==="custom"&&this._source._dataType==="raster"}onAdd(i){this.map=i,this._minTileCacheSize=this._minTileCacheSize===void 0&&i?i._minTileCacheSize:this._minTileCacheSize,this._maxTileCacheSize=this._maxTileCacheSize===void 0&&i?i._maxTileCacheSize:this._maxTileCacheSize}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const i in this._tiles)if(!this._tiles[i].loaded())return!1;return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const i=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,i&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(i,u){return i.isSymbolTile=this._onlySymbols,i.isExtraShadowCaster=this._shadowCasterTiles[i.tileID.key],this._source.loadTile(i,u)}_unloadTile(i){if(this._source.unloadTile)return this._source.unloadTile(i)}_abortTile(i){if(this._source.abortTile)return this._source.abortTile(i)}serialize(){return this._source.serialize()}prepare(i){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const u in this._tiles){const p=this._tiles[u];p.upload(i),p.prepare(this.map.style.imageManager,this.map?this.map.painter:null,this._source.scope)}}getIds(){return Object.values(this._tiles).map(i=>i.tileID).sort(jl).map(i=>i.key)}getRenderableIds(i,u){const p=[];for(const x in this._tiles)this._isIdRenderable(+x,i,u)&&p.push(this._tiles[x]);return i?p.sort((x,S)=>{const T=x.tileID,O=S.tileID,B=new r.P(T.canonical.x,T.canonical.y)._rotate(this.transform.angle),j=new r.P(O.canonical.x,O.canonical.y)._rotate(this.transform.angle);return T.overscaledZ-O.overscaledZ||j.y-B.y||j.x-B.x}).map(x=>x.tileID.key):p.map(x=>x.tileID).sort(jl).map(x=>x.key)}hasRenderableParent(i){const u=this.findLoadedParent(i,0);return!!u&&this._isIdRenderable(u.tileID.key)}_isIdRenderable(i,u,p){return this._tiles[i]&&this._tiles[i].hasData()&&!this._coveredTiles[i]&&(u||!this._tiles[i].holdingForFade())&&(p||!this._shadowCasterTiles[i])}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const i in this._tiles)this._tiles[i].state!=="errored"&&this._reloadTile(+i,"reloading")}}_reloadTile(i,u){const p=this._tiles[i];p&&(p.state!=="loading"&&(p.state=u),this._loadTile(p,this._tileLoaded.bind(this,p,i,u)))}_tileLoaded(i,u,p,x){if(x)if(i.state="errored",x.status!==404)this._source.fire(new r.z(x,{tile:i}));else{if(this._source.fire(new r.A("data",{dataType:"source",sourceDataType:"error",sourceId:this._source.id,tile:i})),!(i.tileID.key in this._loadedParentTiles))return;if(this._source.type==="raster-dem"&&this.usedForTerrain&&this.map.painter.terrain){const S=this.map.painter.terrain;this.update(this.transform,S.getScaledDemTileSize(),!0),S.resetTileLookupCache(this.id)}else this.update(this.transform)}else i.timeAdded=r.q.now(),p==="expired"&&(i.refreshedUponExpiration=!0),this._setTileReloadTimer(u,i),this._source.type==="raster-dem"&&i.dem&&this._backfillDEM(i),this._state.initializeTileState(i,this.map?this.map.painter:null),this._source.fire(new r.A("data",{dataType:"source",tile:i,coord:i.tileID,sourceCacheId:this.id}))}_backfillDEM(i){const u=this.getRenderableIds();for(let x=0;x<u.length;x++){const S=u[x];if(i.neighboringTiles&&i.neighboringTiles[S]){const T=this.getTileByID(S);p(i,T),p(T,i)}}function p(x,S){if(!x.dem||x.dem.borderReady)return;x.needsHillshadePrepare=!0,x.needsDEMTextureUpload=!0;let T=S.tileID.canonical.x-x.tileID.canonical.x;const O=S.tileID.canonical.y-x.tileID.canonical.y,B=Math.pow(2,x.tileID.canonical.z),j=S.tileID.key;T===0&&O===0||Math.abs(O)>1||(Math.abs(T)>1&&(Math.abs(T+B)===1?T+=B:Math.abs(T-B)===1&&(T-=B)),S.dem&&x.dem&&(x.dem.backfillBorder(S.dem,T,O),x.neighboringTiles&&x.neighboringTiles[j]&&(x.neighboringTiles[j].backfilled=!0)))}}getTile(i){return this.getTileByID(i.key)}getTileByID(i){return this._tiles[i]}_retainLoadedChildren(i,u,p,x){for(const S in this._tiles){let T=this._tiles[S];if(x[S]||!T.hasData()||T.tileID.overscaledZ<=u||T.tileID.overscaledZ>p)continue;let O=T.tileID;for(;T&&T.tileID.overscaledZ>u+1;){const j=T.tileID.scaledTo(T.tileID.overscaledZ-1);T=this._tiles[j.key],T&&T.hasData()&&(O=j)}let B=O;for(;B.overscaledZ>u;)if(B=B.scaledTo(B.overscaledZ-1),i[B.key]){x[O.key]=O;break}}}findLoadedParent(i,u){if(i.key in this._loadedParentTiles){const p=this._loadedParentTiles[i.key];return p&&p.tileID.overscaledZ>=u?p:null}for(let p=i.overscaledZ-1;p>=u;p--){const x=i.scaledTo(p),S=this._getLoadedTile(x);if(S)return S}}_getLoadedTile(i){const u=this._tiles[i.key];return u&&u.hasData()?u:this._cache.getByKey(this._source.reparseOverscaled?i.wrapped().key:i.canonical.key)}updateCacheSize(i,u){u=u||this._source.tileSize;const p=Math.ceil(i.width/u)+1,x=Math.ceil(i.height/u)+1,S=Math.floor(p*x*5),T=typeof this._minTileCacheSize=="number"?Math.max(this._minTileCacheSize,S):S,O=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,T):T;this._cache.setMaxSize(O)}handleWrapJump(i){const u=Math.round((i-(this._prevLng===void 0?i:this._prevLng))/360);if(this._prevLng=i,u){const p={};for(const x in this._tiles){const S=this._tiles[x];S.tileID=S.tileID.unwrapTo(S.tileID.wrap+u),p[S.tileID.key]=S}this._tiles=p;for(const x in this._timers)clearTimeout(this._timers[x]),delete this._timers[x];for(const x in this._tiles)this._setTileReloadTimer(+x,this._tiles[x])}}update(i,u,p,x,S){if(this.transform=i,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage||this.usedForTerrain&&!p)return;this.updateCacheSize(i,u),this.transform.projection.name!=="globe"&&this.handleWrapJump(this.transform.center.lng),this._shadowCasterTiles={},this._coveredTiles={};const T=this._source.type==="batched-model";let O,B=this._source.maxzoom;const j=this.map&&this.map.painter?this.map.painter._terrain:null;if(j&&j.sourceCache===this&&j.attenuationRange()){const Q=j.attenuationRange()[0],oe=Math.floor(Q)-Math.log2(j.getDemUpscale());B>oe&&(B=oe)}if(this.used||this.usedForTerrain){if(this._source.tileID)O=i.getVisibleUnwrappedCoordinates(this._source.tileID).map(Q=>new r.aM(Q.canonical.z,Q.wrap,Q.canonical.z,Q.canonical.x,Q.canonical.y));else if(this.tileCoverLift!==0){const Q=i.clone();Q.tileCoverLift=this.tileCoverLift,O=Q.coveringTiles({tileSize:u||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:B,roundZoom:this._source.roundZoom&&!p,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain,calculateQuadrantVisibility:T}),this._source.minzoom<=1&&i.projection.name==="globe"&&(O.push(new r.aM(1,0,1,0,0)),O.push(new r.aM(1,0,1,1,0)),O.push(new r.aM(1,0,1,0,1)),O.push(new r.aM(1,0,1,1,1)))}else if(O=i.coveringTiles({tileSize:u||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:B,roundZoom:this._source.roundZoom&&!p,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain,calculateQuadrantVisibility:T}),this._source.hasTile){const Q=this._source.hasTile.bind(this._source);O=O.filter(oe=>Q(oe))}}else O=[];if(O.length>0&&this.transform.projection.name!=="globe"&&!this.usedForTerrain&&!Wo(this._source.type)){const Q=i.coveringZoomLevel({tileSize:u||this._source.tileSize,roundZoom:this._source.roundZoom&&!p}),oe=Math.min(Q,this._source.maxzoom);if(T){const Ce=i.extendTileCover(O,oe);for(const _e of Ce)O.push(_e)}else if(S){const Ce=i.extendTileCover(O,oe,this.transform._camera.forward());for(const _e of Ce)O.push(_e)}else if(this.castsShadows&&x){const Ce=i.extendTileCover(O,oe,x);for(const _e of Ce)this._shadowCasterTiles[_e.key]=!0,O.push(_e)}}const K=this._updateRetainedTiles(O);if(Wo(this._source.type)&&O.length!==0){const Q={},oe={},Ce=Object.keys(K);for(const Ee of Ce){const Me=K[Ee],ze=this._tiles[Ee];if(!ze||ze.fadeEndTime&&ze.fadeEndTime<=r.q.now())continue;const qe=this.findLoadedParent(Me,Math.max(Me.overscaledZ-ta.maxOverzooming,this._source.minzoom));qe&&(this._addTile(qe.tileID),Q[qe.tileID.key]=qe.tileID),oe[Ee]=Me}const _e=O[O.length-1].overscaledZ;for(const Ee in this._tiles){const Me=this._tiles[Ee];if(K[Ee]||!Me.hasData())continue;let ze=Me.tileID;for(;ze.overscaledZ>_e;){ze=ze.scaledTo(ze.overscaledZ-1);const qe=this._tiles[ze.key];if(qe&&qe.hasData()&&oe[ze.key]){K[Ee]=Me.tileID;break}}}for(const Ee in Q)K[Ee]||(this._coveredTiles[Ee]=!0,K[Ee]=Q[Ee])}for(const Q in K)this._tiles[Q].clearFadeHold();const te=r.bs(this._tiles,K);for(const Q of te){const oe=this._tiles[Q];oe.hasSymbolBuckets&&!oe.holdingForFade()?oe.setHoldDuration(this.map._fadeDuration):oe.hasSymbolBuckets&&!oe.symbolFadeFinished()||this._removeTile(+Q)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const i in this._tiles)this._tiles[i].holdingForFade()&&this._removeTile(+i)}_updateRetainedTiles(i){const u={};if(i.length===0)return u;const p={},x=i.reduce((j,K)=>Math.min(j,K.overscaledZ),1/0),S=i[0].overscaledZ,T=Math.max(S-ta.maxOverzooming,this._source.minzoom),O=Math.max(S+ta.maxUnderzooming,this._source.minzoom),B={};for(const j of i){const K=this._addTile(j);u[j.key]=j,K.hasData()||x<this._source.maxzoom&&(B[j.key]=j)}this._retainLoadedChildren(B,x,O,u);for(const j of i){let K=this._tiles[j.key];if(K.hasData())continue;if(j.canonical.z>=this._source.maxzoom){const Q=j.children(this._source.maxzoom)[0],oe=this.getTile(Q);if(oe&&oe.hasData()){u[Q.key]=Q;continue}}else{const Q=j.children(this._source.maxzoom);if(u[Q[0].key]&&u[Q[1].key]&&u[Q[2].key]&&u[Q[3].key])continue}let te=K.wasRequested();for(let Q=j.overscaledZ-1;Q>=T;--Q){const oe=j.scaledTo(Q);if(p[oe.key]||(p[oe.key]=!0,K=this.getTile(oe),!K&&te&&(K=this._addTile(oe)),K&&(u[oe.key]=oe,te=K.wasRequested(),K.hasData())))break}}return u}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const i in this._tiles){const u=[];let p,x=this._tiles[i].tileID;for(;x.overscaledZ>0;){if(x.key in this._loadedParentTiles){p=this._loadedParentTiles[x.key];break}u.push(x.key);const S=x.scaledTo(x.overscaledZ-1);if(p=this._getLoadedTile(S),p)break;x=S}for(const S of u)this._loadedParentTiles[S]=p}}_addTile(i){let u=this._tiles[i.key];if(u)return u.isExtraShadowCaster!==!0||this._shadowCasterTiles[i.key]||this._reloadTile(i.key,"reloading"),u;u=this._cache.getAndRemove(i),u&&(this._setTileReloadTimer(i.key,u),u.tileID=i,this._state.initializeTileState(u,this.map?this.map.painter:null),this._cacheTimers[i.key]&&(clearTimeout(this._cacheTimers[i.key]),delete this._cacheTimers[i.key],this._setTileReloadTimer(i.key,u)));const p=!!u;if(!p){const x=this.map?this.map.painter:null,S=this._source.tileSize*i.overscaleFactor();u=this._source.type==="raster-array"?new fu(i,S,this.transform.tileZoom,x,this._isRaster):new Fu(i,S,this.transform.tileZoom,x,this._isRaster,this._source.worldview),this._loadTile(u,this._tileLoaded.bind(this,u,i.key,u.state))}return u.uses++,this._tiles[i.key]=u,p||this._source.fire(new r.A("dataloading",{tile:u,coord:u.tileID,dataType:"source"})),u}_setTileReloadTimer(i,u){i in this._timers&&(clearTimeout(this._timers[i]),delete this._timers[i]);const p=u.getExpiryTimeout();p&&(this._timers[i]=setTimeout(()=>{this._reloadTile(i,"expired"),delete this._timers[i]},p))}_removeTile(i){const u=this._tiles[i];u&&(u.uses--,delete this._tiles[i],this._timers[i]&&(clearTimeout(this._timers[i]),delete this._timers[i]),u.uses>0||(u.hasData()&&u.state!=="reloading"||u.state==="empty"?this._cache.add(u.tileID,u,u.getExpiryTimeout()):(u.aborted=!0,this._abortTile(u),this._unloadTile(u))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const i in this._tiles)this._removeTile(+i);this._source._clear&&this._source._clear(),this._cache.reset(),this.map&&this.usedForTerrain&&this.map.painter.terrain&&this.map.painter.terrain.resetTileLookupCache(this.id)}tilesIn(i,u,p){const x=[],S=this.transform;if(!S)return x;const T=S.projection.name==="globe",O=r.aD(S.center.lng);for(const B in this._tiles){const j=this._tiles[B];if(p&&j.clearQueryDebugViz(),j.holdingForFade())continue;let K;if(T){const te=j.tileID.canonical;if(te.z===0){const Q=[Math.abs(r.ay(O,...Bo(te,-1))-O),Math.abs(r.ay(O,...Bo(te,1))-O)];K=[0,2*Q.indexOf(Math.min(...Q))-1]}else{const Q=[Math.abs(r.ay(O,...Bo(te,-1))-O),Math.abs(r.ay(O,...Bo(te,0))-O),Math.abs(r.ay(O,...Bo(te,1))-O)];K=[Q.indexOf(Math.min(...Q))-1]}}else K=[0];for(const te of K){const Q=i.containsTile(j,S,u,te);Q&&x.push(Q)}}return x}getShadowCasterCoordinates(){return this._getRenderableCoordinates(!1,!0)}getVisibleCoordinates(i){return this._getRenderableCoordinates(i)}_getRenderableCoordinates(i,u){const p=this.getRenderableIds(i,u).map(S=>this._tiles[S].tileID),x=this.transform.projection.name==="globe";for(const S of p)S.projMatrix=this.transform.calculateProjMatrix(S.toUnwrapped()),S.expandedProjMatrix=x?this.transform.calculateProjMatrix(S.toUnwrapped(),!1,!0):S.projMatrix;return p}sortCoordinatesByDistance(i){const u=i.slice(),p=this.transform._camera.position,x=this.transform._camera.forward(),S={};for(const T of u){const O=1/(1<<T.canonical.z);S[T.key]=((T.canonical.x+.5)*O+T.wrap-p[0])*x[0]+((T.canonical.y+.5)*O-p[1])*x[1]-p[2]*x[2]}return u.sort((T,O)=>S[T.key]-S[O.key]),u}hasTransition(){if(this._source.hasTransition())return!0;if(Wo(this._source.type))for(const i in this._tiles){const u=this._tiles[i];if(u.fadeEndTime!==void 0&&u.fadeEndTime>=r.q.now())return!0}return!1}setFeatureState(i,u,p){this._state.updateState(i=i||"_geojsonTileLayer",u,p)}removeFeatureState(i,u,p){this._state.removeFeatureState(i=i||"_geojsonTileLayer",u,p)}getFeatureState(i,u){return this._state.getState(i=i||"_geojsonTileLayer",u)}setDependencies(i,u,p){const x=this._tiles[i];x&&x.setDependencies(u,p)}reloadTilesForDependencies(i,u){for(const p in this._tiles)this._tiles[p].hasDependency(i,u)&&this._reloadTile(+p,"reloading");this._cache.filter(p=>!p.hasDependency(i,u))}_preloadTiles(i,u){if(!this._sourceLoaded){const B=()=>{this._sourceLoaded&&(this._source.off("data",B),this._preloadTiles(i,u))};return void this._source.on("data",B)}const p=new Map,x=Array.isArray(i)?i:[i],S=this.map.painter.terrain,T=this.usedForTerrain&&S?S.getScaledDemTileSize():this._source.tileSize;for(const B of x){const j=B.coveringTiles({tileSize:T,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!this.usedForTerrain,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain});for(const K of j)p.set(K.key,K);this.usedForTerrain&&B.updateElevation(!1)}const O=Array.from(p.values());r.bt(O,(B,j)=>{const K=new Fu(B,this._source.tileSize*B.overscaleFactor(),this.transform.tileZoom,this.map.painter,this._isRaster,this._source.worldview);this._loadTile(K,te=>{this._source.type==="raster-dem"&&K.dem&&this._backfillDEM(K),j(te,K)})},u)}}function jl(f,i){const u=Math.abs(2*f.wrap)-+(f.wrap<0),p=Math.abs(2*i.wrap)-+(i.wrap<0);return f.overscaledZ-i.overscaledZ||p-u||i.canonical.y-f.canonical.y||i.canonical.x-f.canonical.x}function Wo(f){return f==="raster"||f==="image"||f==="video"||f==="custom"}function Bo(f,i){const u=1<<f.z;return[f.x/u+i,(f.x+1)/u+i]}ta.maxOverzooming=10,ta.maxUnderzooming=3;class Md{constructor(i){this.style=i,this.layersGotHidden=!1,this.layers=[]}processLayersChanged(){this.layers=[];const i=!1,u=!1;for(const p in this.style._mergedLayers){const x=this.style._mergedLayers[p];if(x.type==="fill-extrusion"||x.type==="building")this.layers.push({layer:x,visible:i,visibilityChanged:u});else if(x.type==="model"){const S=this.style.getLayerSource(x);S&&S.type==="batched-model"&&this.layers.push({layer:x,visible:i,visibilityChanged:u})}}}onNewFrame(i){this.layersGotHidden=!1;for(const u of this.layers){const p=u.layer;let x=!1;p.type==="fill-extrusion"?x=!p.isHidden(i)&&p.paint.get("fill-extrusion-opacity")>0:p.type==="building"?x=!p.isHidden(i)&&p.paint.get("building-opacity")>0:p.type==="model"&&(x=!p.isHidden(i)&&p.paint.get("model-opacity").constantOr(1)>0),this.layersGotHidden=this.layersGotHidden||!x&&u.visible,u.visible=x}}updateZOffset(i,u){this.currentBuildingBuckets=[];for(const x of this.layers){const S=x.layer,T=this.style.getLayerSourceCache(S);let O=1;S.type==="fill-extrusion"?O=x.visible?S.paint.get("fill-extrusion-vertical-scale"):0:S.type==="building"&&(O=x.visible?S.paint.get("building-vertical-scale"):0);let B=T?T.getTile(u):null;if(!B&&T&&u.canonical.z>T.getSource().minzoom){let j=u.scaledTo(Math.min(T.getSource().maxzoom,u.overscaledZ-1));for(;j.overscaledZ>=T.getSource().minzoom&&(B=T.getTile(j),!B&&j.overscaledZ!==0);)j=j.scaledTo(j.overscaledZ-1)}this.currentBuildingBuckets.push({bucket:B?B.getBucket(S):null,tileID:B?B.tileID:u,verticalScale:O})}i.hasAnyZOffset=!1;let p=!1;for(let x=0;x<i.symbolInstances.length;x++){const S=i.symbolInstances.get(x),T=S.zOffset,O=this._getHeightAtTileOffset(u,S.tileAnchorX,S.tileAnchorY);S.zOffset=O!==Number.NEGATIVE_INFINITY?O:T,p||T===S.zOffset||(p=!0),i.hasAnyZOffset||S.zOffset===0||(i.hasAnyZOffset=!0)}p&&(i.zOffsetBuffersNeedUpload=!0,i.zOffsetSortDirty=!0)}_mapCoordToOverlappingTile(i,u,p,x){let S=u,T=p;if(i.canonical.z!==x.canonical.z){const O=x.canonical,B=1/(1<<i.canonical.z-O.z);S=(u+i.canonical.x*r.aj)*B-O.x*r.aj|0,T=(p+i.canonical.y*r.aj)*B-O.y*r.aj|0}return{tileX:S,tileY:T}}_getHeightAtTileOffset(i,u,p){let x,S;for(let T=0;T<this.layers.length;++T){const O=this.layers[T].layer;if(O.type!=="fill-extrusion"&&O.type!=="building")continue;const{bucket:B,tileID:j,verticalScale:K}=this.currentBuildingBuckets[T];if(!B)continue;const{tileX:te,tileY:Q}=this._mapCoordToOverlappingTile(i,u,p,j),oe=B.getHeightAtTileCoord(te,Q);oe&&oe.height!==void 0&&(oe.hidden?x=oe.height:S=Math.max(oe.height*K,S||0))}if(S!==void 0)return S;for(let T=0;T<this.layers.length;++T){const O=this.layers[T];if(O.layer.type!=="model"||!O.visible)continue;const{bucket:B,tileID:j}=this.currentBuildingBuckets[T];if(!B)continue;const{tileX:K,tileY:te}=this._mapCoordToOverlappingTile(i,u,p,j),Q=B.getHeightAtTileCoord(K,te);if(Q&&!Q.hidden)return Q.height===void 0&&x!==void 0?Math.min(Q.maxHeight,x)*Q.verticalScale:Q.height?Q.height*Q.verticalScale:Number.NEGATIVE_INFINITY}return this.layersGotHidden?0:Number.NEGATIVE_INFINITY}}function Qp(f,i){const u={};for(const p in f)p!=="ref"&&(u[p]=f[p]);return r.bu.forEach(p=>{p in i&&(u[p]=i[p])}),u}function Ad(f){f=f.slice();const i=Object.create(null);for(let u=0;u<f.length;u++)i[f[u].id]=f[u];for(let u=0;u<f.length;u++)"ref"in f[u]&&(f[u]=Qp(f[u],i[f[u].ref]));return f}const ki={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setSlot:"setSlot",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog",setSnow:"setSnow",setRain:"setRain",setCamera:"setCamera",setLights:"setLights",setProjection:"setProjection",addImport:"addImport",removeImport:"removeImport",updateImport:"updateImport",addIconset:"addIconset",removeIconset:"removeIconset"};function Bu(f,i,u){u.push({command:ki.addSource,args:[f,i[f]]})}function Ac(f,i,u){i.push({command:ki.removeSource,args:[f]}),u[f]=!0}function Rc(f,i,u,p){Ac(f,u,p),Bu(f,i,u)}function zs(f,i,u){let p;for(p in f[u])if(f[u].hasOwnProperty(p)&&p!=="data"&&!r.bv(f[u][p],i[u][p]))return!1;for(p in i[u])if(i[u].hasOwnProperty(p)&&p!=="data"&&!r.bv(f[u][p],i[u][p]))return!1;return!0}function ga(f,i,u,p,x,S){let T;for(T in i=i||{},f=f||{})f.hasOwnProperty(T)&&(r.bv(f[T],i[T])||u.push({command:S,args:[p,T,i[T],x]}));for(T in i)i.hasOwnProperty(T)&&!f.hasOwnProperty(T)&&(r.bv(f[T],i[T])||u.push({command:S,args:[p,T,i[T],x]}))}function Gl(f){return f.id}function ql(f,i){return f[i.id]=i,f}class Vu{constructor(i,u){this.reset(i,u)}reset(i,u){this.points=i||[],this._distances=[0];for(let p=1;p<this.points.length;p++)this._distances[p]=this._distances[p-1]+this.points[p].dist(this.points[p-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(u||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(i){if(this.points.length===1)return this.points[0];i=r.ay(i,0,1);let u=1,p=this._distances[u];const x=i*this.paddedLength+this.padding;for(;p<x&&u<this._distances.length;)p=this._distances[++u];const S=u-1,T=this._distances[S],O=p-T,B=O>0?(x-T)/O:0;return this.points[S].mult(1-B).add(this.points[u].mult(B))}}class Ih{constructor(i,u,p){const x=this.boxCells=[],S=this.circleCells=[];this.xCellCount=Math.ceil(i/p),this.yCellCount=Math.ceil(u/p);for(let T=0;T<this.xCellCount*this.yCellCount;T++)x.push([]),S.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=i,this.height=u,this.xScale=this.xCellCount/i,this.yScale=this.yCellCount/u,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(i,u,p,x,S){this._forEachCell(u,p,x,S,this._insertBoxCell,this.boxUid++),this.boxKeys.push(i),this.bboxes.push(u),this.bboxes.push(p),this.bboxes.push(x),this.bboxes.push(S)}insertCircle(i,u,p,x){this._forEachCell(u-x,p-x,u+x,p+x,this._insertCircleCell,this.circleUid++),this.circleKeys.push(i),this.circles.push(u),this.circles.push(p),this.circles.push(x)}_insertBoxCell(i,u,p,x,S,T){this.boxCells[S].push(T)}_insertCircleCell(i,u,p,x,S,T){this.circleCells[S].push(T)}_query(i,u,p,x,S,T){if(p<0||i>this.width||x<0||u>this.height)return!S&&[];const O=[];if(i<=0&&u<=0&&this.width<=p&&this.height<=x){if(S)return!0;for(let B=0;B<this.boxKeys.length;B++)O.push({key:this.boxKeys[B],x1:this.bboxes[4*B],y1:this.bboxes[4*B+1],x2:this.bboxes[4*B+2],y2:this.bboxes[4*B+3]});for(let B=0;B<this.circleKeys.length;B++){const j=this.circles[3*B],K=this.circles[3*B+1],te=this.circles[3*B+2];O.push({key:this.circleKeys[B],x1:j-te,y1:K-te,x2:j+te,y2:K+te})}return T?O.filter(T):O}return this._forEachCell(i,u,p,x,this._queryCell,O,{hitTest:S,seenUids:{box:{},circle:{}}},T),S?O.length>0:O}_queryCircle(i,u,p,x,S){const T=i-p,O=i+p,B=u-p,j=u+p;if(O<0||T>this.width||j<0||B>this.height)return!x&&[];const K=[];return this._forEachCell(T,B,O,j,this._queryCellCircle,K,{hitTest:x,circle:{x:i,y:u,radius:p},seenUids:{box:{},circle:{}}},S),x?K.length>0:K}query(i,u,p,x,S){return this._query(i,u,p,x,!1,S)}hitTest(i,u,p,x,S){return this._query(i,u,p,x,!0,S)}hitTestCircle(i,u,p,x){return this._queryCircle(i,u,p,!0,x)}_queryCell(i,u,p,x,S,T,O,B){const j=O.seenUids,K=this.boxCells[S];if(K!==null){const Q=this.bboxes;for(const oe of K)if(!j.box[oe]){j.box[oe]=!0;const Ce=4*oe;if(i<=Q[Ce+2]&&u<=Q[Ce+3]&&p>=Q[Ce+0]&&x>=Q[Ce+1]&&(!B||B(this.boxKeys[oe]))){if(O.hitTest)return T.push(!0),!0;T.push({key:this.boxKeys[oe],x1:Q[Ce],y1:Q[Ce+1],x2:Q[Ce+2],y2:Q[Ce+3]})}}}const te=this.circleCells[S];if(te!==null){const Q=this.circles;for(const oe of te)if(!j.circle[oe]){j.circle[oe]=!0;const Ce=3*oe;if(this._circleAndRectCollide(Q[Ce],Q[Ce+1],Q[Ce+2],i,u,p,x)&&(!B||B(this.circleKeys[oe]))){if(O.hitTest)return T.push(!0),!0;{const _e=Q[Ce],Ee=Q[Ce+1],Me=Q[Ce+2];T.push({key:this.circleKeys[oe],x1:_e-Me,y1:Ee-Me,x2:_e+Me,y2:Ee+Me})}}}}}_queryCellCircle(i,u,p,x,S,T,O,B){const j=O.circle,K=O.seenUids,te=this.boxCells[S];if(te!==null){const oe=this.bboxes;for(const Ce of te)if(!K.box[Ce]){K.box[Ce]=!0;const _e=4*Ce;if(this._circleAndRectCollide(j.x,j.y,j.radius,oe[_e+0],oe[_e+1],oe[_e+2],oe[_e+3])&&(!B||B(this.boxKeys[Ce])))return T.push(!0),!0}}const Q=this.circleCells[S];if(Q!==null){const oe=this.circles;for(const Ce of Q)if(!K.circle[Ce]){K.circle[Ce]=!0;const _e=3*Ce;if(this._circlesCollide(oe[_e],oe[_e+1],oe[_e+2],j.x,j.y,j.radius)&&(!B||B(this.circleKeys[Ce])))return T.push(!0),!0}}}_forEachCell(i,u,p,x,S,T,O,B){const j=this._convertToXCellCoord(i),K=this._convertToYCellCoord(u),te=this._convertToXCellCoord(p),Q=this._convertToYCellCoord(x);for(let oe=j;oe<=te;oe++)for(let Ce=K;Ce<=Q;Ce++)if(S.call(this,i,u,p,x,this.xCellCount*Ce+oe,T,O,B))return}_convertToXCellCoord(i){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(i*this.xScale)))}_convertToYCellCoord(i){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(i*this.yScale)))}_circlesCollide(i,u,p,x,S,T){const O=x-i,B=S-u,j=p+T;return j*j>O*O+B*B}_circleAndRectCollide(i,u,p,x,S,T,O){const B=(T-x)/2,j=Math.abs(i-(x+B));if(j>B+p)return!1;const K=(O-S)/2,te=Math.abs(u-(S+K));if(te>K+p)return!1;if(j<=B||te<=K)return!0;const Q=j-B,oe=te-K;return Q*Q+oe*oe<=p*p}}const yo={unknown:0,flipRequired:1,flipNotRequired:2},Of=Math.tan(85*Math.PI/180);function ol(f,i,u,p,x,S,T){const O=r.bz();if(u)if(S.name==="globe"){const B=r.bA(x,i);r.az(O,O,B)}else{const B=r.bB([],T);O[0]=B[0],O[1]=B[1],O[4]=B[2],O[5]=B[3],p||r.by(O,O,x.angle)}else r.az(O,x.labelPlaneMatrix,f);return O}function Rd(f,i,u,p,x,S,T){const O=ol(f,i,u,p,x,S,T);return S.name==="globe"&&u||(O[2]=O[6]=O[10]=O[14]=0),O}function Pd(f,i,u,p,x,S,T){if(u){if(S.name==="globe"){const O=ol(f,i,u,p,x,S,T);return r.bi(O,O),r.az(O,f,O),O}{const O=r.bw(f),B=r.bx([]);return B[0]=T[0],B[1]=T[1],B[4]=T[2],B[5]=T[3],r.az(O,O,B),p||r.by(O,O,-x.angle),O}}return x.glCoordMatrix}function al(f,i,u,p){const x=[f,i,u,1];u?r.aA(x,x,p):Bi(x,x,p);const S=x[3];return x[0]/=S,x[1]/=S,x[2]/=S,x}function Pc(f,i){return Math.min(.5+f/i*.5,1.5)}function na(f,i){const u=f[0]/f[3],p=f[1]/f[3];return u>=-i[0]&&u<=i[0]&&p>=-i[1]&&p<=i[1]}function $u(f,i,u,p,x,S,T,O,B,j){const K=u.transform,te=p?f.textSizeData:f.iconSizeData,Q=r.bH(te,u.transform.zoom),oe=K.projection.name==="globe",Ce=[256/u.width*2+1,256/u.height*2+1],_e=p?f.text.dynamicLayoutVertexArray:f.icon.dynamicLayoutVertexArray;_e.clear();let Ee=null;oe&&(Ee=p?f.text.globeExtVertexArray:f.icon.globeExtVertexArray);const Me=f.lineVertexArray,ze=p?f.text.placedSymbolArray:f.icon.placedSymbolArray,qe=u.transform.width/u.transform.height;let Je,lt=!1;for(let ot=0;ot<ze.length;ot++){const rt=ze.get(ot),{numGlyphs:Qe,writingMode:ut}=rt;if(ut!==r.bI.vertical||lt||Je===r.bI.horizontal||(lt=!0),Je=ut,(rt.hidden||ut===r.bI.vertical)&&!lt){ja(Qe,_e);continue}lt=!1;const pt=new r.P(rt.tileAnchorX,rt.tileAnchorY);let{x:zt,y:Vt,z:nn}=K.projection.projectTilePoint(pt.x,pt.y,j.canonical);if(B){const[er,tr,Zn]=B(pt);zt+=er,Vt+=tr,nn+=Zn}const sn=[zt,Vt,nn,1];if(r.aA(sn,sn,i),!na(sn,Ce)){ja(Qe,_e);continue}const wn=sn[3],Pt=Pc(u.transform.getCameraToCenterDistance(K.projection),wn),Kt=r.bJ(te,Q,rt),kt=T?Kt/Pt:Kt*Pt,cn=al(zt,Vt,nn,x);if(cn[3]<=0){ja(Qe,_e);continue}let qt={};const _n=r.al(f.layers[0].layout.get("text-max-angle")),zn=Math.cos(_n),un=T?null:B,On=Ua(rt,kt,!1,O,i,x,S,f.glyphOffsetArray,Me,_e,Ee,cn,pt,qt,qe,un,K.projection,j,T,zn);lt=On.useVertical,un&&On.needsFlipping&&(qt={}),(On.notEnoughRoom||lt||On.needsFlipping&&Ua(rt,kt,!0,O,i,x,S,f.glyphOffsetArray,Me,_e,Ee,cn,pt,qt,qe,un,K.projection,j,T,zn).notEnoughRoom)&&ja(Qe,_e)}p?(f.text.dynamicLayoutVertexBuffer.updateData(_e),Ee&&f.text.globeExtVertexBuffer&&f.text.globeExtVertexBuffer.updateData(Ee)):(f.icon.dynamicLayoutVertexBuffer.updateData(_e),Ee&&f.icon.globeExtVertexBuffer&&f.icon.globeExtVertexBuffer.updateData(Ee))}function Df(f,i,u,p,x,S,T,O,B,j,K,te,Q,oe,Ce,_e,Ee){const{lineStartIndex:Me,glyphStartIndex:ze,segment:qe}=O,Je=ze+O.numGlyphs,lt=Me+O.lineLength,ot=i.getoffsetX(ze),rt=i.getoffsetX(Je-1),Qe=Hu(f*ot,u,p,x,S,T,qe,Me,lt,B,j,K,te,Q,!0,oe,Ce,_e,Ee);if(!Qe)return null;const ut=Hu(f*rt,u,p,x,S,T,qe,Me,lt,B,j,K,te,Q,!0,oe,Ce,_e,Ee);return ut?{first:Qe,last:ut}:null}function ra(f,i,u,p){return f===r.bI.horizontal&&Math.abs(p)>Math.abs(u)?{useVertical:!0}:f===r.bI.vertical?p>0?{needsFlipping:!0}:null:i!==yo.unknown&&function(x,S){return x===0||Math.abs(S/x)>Of}(u,p)?i===yo.flipRequired?{needsFlipping:!0}:null:u<0?{needsFlipping:!0}:null}function Ua(f,i,u,p,x,S,T,O,B,j,K,te,Q,oe,Ce,_e,Ee,Me,ze,qe){const Je=i/24,lt=f.lineOffsetX*Je,ot=f.lineOffsetY*Je,{lineStartIndex:rt,glyphStartIndex:Qe,numGlyphs:ut,segment:pt,writingMode:zt,flipState:Vt}=f,nn=rt+f.lineLength,sn=wn=>{if(K){const[cn,qt,_n]=wn.up,zn=j.length;r.bK(K,zn+0,cn,qt,_n),r.bK(K,zn+1,cn,qt,_n),r.bK(K,zn+2,cn,qt,_n),r.bK(K,zn+3,cn,qt,_n)}const[Pt,Kt,kt]=wn.point;r.bL(j,Pt,Kt,kt,wn.angle)};if(ut>1){const wn=Df(Je,O,lt,ot,u,te,Q,f,B,S,oe,_e,!1,Ee,Me,ze,qe);if(!wn)return{notEnoughRoom:!0};if(p&&!u){let[Pt,Kt,kt]=wn.first.point,[cn,qt,_n]=wn.last.point;[Pt,Kt]=al(Pt,Kt,kt,T),[cn,qt]=al(cn,qt,_n,T);const zn=ra(zt,Vt,(cn-Pt)*Ce,qt-Kt);if(f.flipState=zn&&zn.needsFlipping?yo.flipRequired:yo.flipNotRequired,zn)return zn}sn(wn.first);for(let Pt=Qe+1;Pt<Qe+ut-1;Pt++){const Kt=Hu(Je*O.getoffsetX(Pt),lt,ot,u,te,Q,pt,rt,nn,B,S,oe,_e,!1,!1,Ee,Me,ze,qe);if(!Kt)return j.length-=4*(Pt-Qe),{notEnoughRoom:!0};sn(Kt)}sn(wn.last)}else{if(p&&!u){const Pt=al(Q.x,Q.y,0,x),Kt=rt+pt+1,kt=new r.P(B.getx(Kt),B.gety(Kt)),cn=al(kt.x,kt.y,0,x),qt=cn[3]>0?cn:pu(Q,kt,Pt,1,x,void 0,Ee,Me.canonical),_n=ra(zt,Vt,(qt[0]-Pt[0])*Ce,qt[1]-Pt[1]);if(f.flipState=_n&&_n.needsFlipping?yo.flipRequired:yo.flipNotRequired,_n)return _n}const wn=Hu(Je*O.getoffsetX(Qe),lt,ot,u,te,Q,pt,rt,nn,B,S,oe,_e,!1,!1,Ee,Me,ze,qe);if(!wn)return{notEnoughRoom:!0};sn(wn)}return{}}function _a(f,i,u,p,x){const{x:S,y:T,z:O}=p.projectTilePoint(f.x,f.y,i);if(!x)return al(S,T,O,u);const[B,j,K]=x(f);return al(S+B,T+j,O+K,u)}function pu(f,i,u,p,x,S,T,O){const B=_a(f.sub(i)._unit()._add(f),O,x,T,S);return r.at(B,u,B),r.au(B,B),r.bE(B,u,B,p)}function Hu(f,i,u,p,x,S,T,O,B,j,K,te,Q,oe,Ce,_e,Ee,Me,ze){const qe=p?f-i:f+i;let Je=qe>0?1:-1,lt=0;p&&(Je*=-1,lt=Math.PI),Je<0&&(lt+=Math.PI);let ot=O+T+(Je>0?0:1)|0,rt=x,Qe=x,ut=0,pt=0;const zt=Math.abs(qe),Vt=[],nn=[];let sn=S,wn=sn,Pt=r.bC([]);const Kt=()=>pu(wn,sn,Qe,zt-ut+1,K,Q,_e,Ee.canonical);for(;ut+pt<=zt;){if(ot+=Je,ot<O||ot>=B)return null;if(Qe=rt,wn=sn,Vt.push(Qe),oe&&nn.push(wn),sn=new r.P(j.getx(ot),j.gety(ot)),rt=te[ot],!rt){const Zn=_a(sn,Ee.canonical,K,_e,Q);rt=Zn[3]>0?te[ot]=Zn:Kt()}ut+=pt;const er=r.at([],rt,Qe),tr=r.bD(Qe,rt);if(u&&tr>0&&pt>0&&r.bG(Pt,er)/(pt*tr)<ze)return null;pt=tr,Pt=er}Ce&&Q&&(te[ot]&&(rt=Kt(),pt=r.bD(Qe,rt),Pt=r.at([],rt,Qe)),te[ot]=rt);const kt=(zt-ut)/pt,cn=sn.sub(wn)._mult(kt)._add(wn),qt=r.bE([],Qe,Pt,kt);let _n=[0,0,1],zn=Pt[0],un=Pt[1];if(Me&&(_n=_e.upVector(Ee.canonical,cn.x,cn.y),_n[0]!==0||_n[1]!==0||_n[2]!==1)){const er=[_n[2],0,-_n[0]],tr=r.bF([],_n,er);r.au(er,er),r.au(tr,tr),zn=r.bG(Pt,er),un=r.bG(Pt,tr)}if(u){const er=r.bF([],_n,Pt);r.au(er,er),r.bE(qt,qt,er,u*Je)}const On=lt+Math.atan2(un,zn);return Vt.push(qt),oe&&nn.push(cn),{point:qt,angle:On,path:Vt,tilePath:nn,up:_n}}function ja(f,i){const u=i.length,p=u+4*f;i.resize(p),i.float32.fill(-1/0,4*u,4*p)}function Bi(f,i,u){const p=i[0],x=i[1];return f[0]=u[0]*p+u[4]*x+u[12],f[1]=u[1]*p+u[5]*x+u[13],f[3]=u[3]*p+u[7]*x+u[15],f}const So=100;class em{constructor(i,u,p=new Ih(i.width+200,i.height+200,25),x=new Ih(i.width+200,i.height+200,25)){this.transform=i,this.grid=p,this.ignoredGrid=x,this.pitchfactor=Math.cos(i._pitch)*i.cameraToCenterDistance,this.screenRightBoundary=i.width+So,this.screenBottomBoundary=i.height+So,this.gridRightBoundary=i.width+200,this.gridBottomBoundary=i.height+200,this.fogState=u}placeCollisionBox(i,u,p,x,S,T,O,B){let j=p.projectedAnchorX,K=p.projectedAnchorY,te=p.projectedAnchorZ;const Q=p.elevation,oe=p.tileID,Ce=i.getProjection();if(Q&&oe){const[ot,rt,Qe]=Ce.upVector(oe.canonical,p.tileAnchorX,p.tileAnchorY),ut=Ce.upVectorScale(oe.canonical,this.transform.center.lat,this.transform.worldSize).metersToTile;j+=ot*Q*ut,K+=rt*Q*ut,te+=Qe*Q*ut}const _e=this.projectAndGetPerspectiveRatio(O,j,K,te,p.tileID,Ce.name==="globe"||!!Q||this.transform.pitch>0,Ce),Ee=T*_e.perspectiveRatio,Me=(p.x1*u+x.x-p.padding)*Ee+_e.point.x,ze=(p.y1*u+x.y-p.padding)*Ee+_e.point.y,qe=(p.x2*u+x.x+p.padding)*Ee+_e.point.x,Je=(p.y2*u+x.y+p.padding)*Ee+_e.point.y,lt=_e.perspectiveRatio<=.55||_e.occluded;return!this.isInsideGrid(Me,ze,qe,Je)||!S&&this.grid.hitTest(Me,ze,qe,Je,B)||lt?{box:[],offscreen:!1,occluded:_e.occluded}:{box:[Me,ze,qe,Je],offscreen:this.isOffscreen(Me,ze,qe,Je),occluded:!1}}placeCollisionCircles(i,u,p,x,S,T,O,B,j,K,te,Q,oe,Ce,_e){const Ee=[],Me=this.transform.elevation,ze=i.getProjection(),qe=Me?Me.getAtTileOffsetFunc(_e,this.transform.center.lat,this.transform.worldSize,ze):null,Je=new r.P(p.tileAnchorX,p.tileAnchorY);let{x:lt,y:ot,z:rt}=ze.projectTilePoint(Je.x,Je.y,_e.canonical);if(qe){const[_n,zn,un]=qe(Je);lt+=_n,ot+=zn,rt+=un}const Qe=ze.name==="globe",ut=this.projectAndGetPerspectiveRatio(O,lt,ot,rt,_e,Qe||!!Me||this.transform.pitch>0,ze),{perspectiveRatio:pt}=ut,zt=(te?T/pt:T*pt)/r.bO,Vt=al(lt,ot,rt,B),nn=p.lineOffsetX*zt,sn=p.lineOffsetY*zt,wn=r.al(i.layers[0].layout.get("text-max-angle")),Pt=Math.cos(wn),Kt=ut.signedDistanceFromCamera>0?Df(zt,S,nn,sn,!1,Vt,Je,p,x,B,{},Me&&!te?qe:null,te&&!!Me,ze,_e,te,Pt):null;let kt=!1,cn=!1,qt=!0;if(Kt&&!ut.occluded){const _n=.5*oe*pt+Ce,zn=new r.P(-100,-100),un=new r.P(this.screenRightBoundary,this.screenBottomBoundary),On=new Vu,{first:er,last:tr}=Kt,Zn=er.path.length;let mr=[];for(let Hr=Zn-1;Hr>=1;Hr--)mr.push(er.path[Hr]);for(let Hr=1;Hr<tr.path.length;Hr++)mr.push(tr.path[Hr]);const yr=2.5*_n;j&&(mr=mr.map(([Hr,ti,ji],ps)=>(qe&&!Qe&&(ji=qe(ps<Zn-1?er.tilePath[Zn-1-ps]:tr.tilePath[ps-Zn+2])[2]),al(Hr,ti,ji,j))),mr.some(Hr=>Hr[3]<=0)&&(mr=[]));let kr=[];if(mr.length>0){let Hr=1/0,ti=-1/0,ji=1/0,ps=-1/0;for(const Yi of mr)Hr=Math.min(Hr,Yi[0]),ji=Math.min(ji,Yi[1]),ti=Math.max(ti,Yi[0]),ps=Math.max(ps,Yi[1]);ti>=zn.x&&Hr<=un.x&&ps>=zn.y&&ji<=un.y&&(kr=[mr.map(Yi=>new r.P(Yi[0],Yi[1]))],(Hr<zn.x||ti>un.x||ji<zn.y||ps>un.y)&&(kr=r.bM(kr,zn.x,zn.y,un.x,un.y)))}for(const Hr of kr){On.reset(Hr,.25*_n);let ti=0;ti=On.length<=.5*_n?1:Math.ceil(On.paddedLength/yr)+1;for(let ji=0;ji<ti;ji++){const ps=ji/Math.max(ti-1,1),Yi=On.lerp(ps),Xi=Yi.x+So,Ws=Yi.y+So;Ee.push(Xi,Ws,_n,0);const Kr=Xi-_n,ii=Ws-_n,bi=Xi+_n,xs=Ws+_n;if(qt=qt&&this.isOffscreen(Kr,ii,bi,xs),cn=cn||this.isInsideGrid(Kr,ii,bi,xs),!u&&this.grid.hitTestCircle(Xi,Ws,_n,Q)&&(kt=!0,!K))return{circles:[],offscreen:!1,collisionDetected:kt,occluded:!1}}}}return{circles:!K&&kt||!cn?[]:Ee,offscreen:qt,collisionDetected:kt,occluded:ut.occluded}}queryRenderedSymbols(i){if(i.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const u=[];let p=1/0,x=1/0,S=-1/0,T=-1/0;for(const K of i){const te=new r.P(K.x+So,K.y+So);p=Math.min(p,te.x),x=Math.min(x,te.y),S=Math.max(S,te.x),T=Math.max(T,te.y),u.push(te)}const O=this.grid.query(p,x,S,T).concat(this.ignoredGrid.query(p,x,S,T)),B={},j={};for(const K of O){const te=K.key;if(B[te.bucketInstanceId]===void 0&&(B[te.bucketInstanceId]={}),B[te.bucketInstanceId][te.featureIndex])continue;const Q=[new r.P(K.x1,K.y1),new r.P(K.x2,K.y1),new r.P(K.x2,K.y2),new r.P(K.x1,K.y2)];r.bN(u,Q)&&(B[te.bucketInstanceId][te.featureIndex]=!0,j[te.bucketInstanceId]===void 0&&(j[te.bucketInstanceId]=[]),j[te.bucketInstanceId].push(te.featureIndex))}return j}insertCollisionBox(i,u,p,x,S){(u?this.ignoredGrid:this.grid).insert({bucketInstanceId:p,featureIndex:x,collisionGroupID:S},i[0],i[1],i[2],i[3])}insertCollisionCircles(i,u,p,x,S){const T=u?this.ignoredGrid:this.grid,O={bucketInstanceId:p,featureIndex:x,collisionGroupID:S};for(let B=0;B<i.length;B+=4)T.insertCircle(O,i[B],i[B+1],i[B+2])}projectAndGetPerspectiveRatio(i,u,p,x,S,T,O){const B=[u,p,x,1];let j=!1;x||this.transform.pitch>0?(r.aA(B,B,i),this.fogState&&S&&O.name!=="globe"&&(j=function(Q,oe,Ce,_e,Ee,Me){const ze=Me.calculateFogTileMatrix(Ee),qe=[oe,Ce,_e];return r.ad(qe,qe,ze),Sn(Q,r.ae(qe),Me.pitch,Me._fov)}(this.fogState,u,p,x,S.toUnwrapped(),this.transform)>.9)):Bi(B,B,i);const K=B[3];return{point:new r.P((B[0]/K+1)/2*this.transform.width+So,(-B[1]/K+1)/2*this.transform.height+So),perspectiveRatio:Math.min(.5+this.transform.getCameraToCenterDistance(O)/K*.5,1.5),signedDistanceFromCamera:K,occluded:T&&B[2]>K||j}}isOffscreen(i,u,p,x){return p<So||i>=this.screenRightBoundary||x<So||u>this.screenBottomBoundary}isInsideGrid(i,u,p,x){return p>=0&&i<this.gridRightBoundary&&x>=0&&u<this.gridBottomBoundary}getViewportMatrix(){const i=r.bx([]);return r.bo(i,i,[-100,-100,0]),i}}function zf(f,i,u){const p=i.createTileMatrix(f,f.worldSize,u.toUnwrapped());return r.az(new Float32Array(16),f.projMatrix,p)}function Dr(f,i,u){if(i.projection.name===u.projection.name)return f.projMatrix;const p=u.clone();return p.setProjection(i.projection),zf(p,i.getProjection(),f)}function kh(f,i,u){return i.name===u.projection.name?f.projMatrix:zf(u,i,f)}class Ld{constructor(i,u,p,x){this.opacity=i?Math.max(0,Math.min(1,i.opacity+(i.placed?u:-u))):x&&p?1:0,this.placed=p}isHidden(){return this.opacity===0&&!this.placed}}class Uu{constructor(i,u,p,x,S,T=!1){this.text=new Ld(i?i.text:null,u,p,S),this.icon=new Ld(i?i.icon:null,u,x,S),this.clipped=T}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Ma{constructor(i,u,p,x=!1){this.text=i,this.icon=u,this.skipFade=p,this.clipped=x}}class Nf{constructor(){this.invProjMatrix=r.bz(),this.viewportMatrix=r.bz(),this.circles=[]}}class Ga{constructor(i,u,p,x,S){this.bucketInstanceId=i,this.featureIndex=u,this.sourceLayerIndex=p,this.bucketIndex=x,this.tileID=S}}class nr{constructor(i){this.crossSourceCollisions=i,this.maxGroupID=0,this.collisionGroups={}}get(i){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[i]){const u=++this.maxGroupID;this.collisionGroups[i]={ID:u,predicate:p=>p.collisionGroupID===u}}return this.collisionGroups[i]}}function Ui(f,i,u,p,x){const{horizontalAlign:S,verticalAlign:T}=r.bT(f),O=-(S-.5)*i,B=-(T-.5)*u,j=r.bU(f,p);return new r.P(O+j[0]*x,B+j[1]*x)}function Di(f,i,u,p,x){const S=new r.P(f,i);return u&&S._rotate(p?x:-x),S}class va{constructor(i,u,p,x,S,T){this.transform=i.clone(),this.projection=i.projection.name,this.collisionIndex=new em(this.transform,S),this.buildingIndex=T,this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=u,this.retainedQueryData={},this.collisionGroups=new nr(p),this.collisionCircleArrays={},this.prevPlacement=x,x&&(x.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(i,u,p,x,S=1){const T=p.getBucket(u),O=p.latestFeatureIndex;if(!T||!O||u.fqid!==T.layerIds[0])return;const B=T.layers[0].layout,j=T.layers[0].paint,K=p.collisionBoxArray,te=Math.pow(2,this.transform.zoom-p.tileID.overscaledZ),Q=p.tileSize/r.aj,oe=p.tileID.toUnwrapped();this.transform.setProjection(T.projection);const Ce=(_e=p.tileID,Ee=T.getProjection(),Me=this.transform,Ee.name===this.projection?Me.calculateProjMatrix(_e.toUnwrapped()):zf(Me,Ee,_e));var _e,Ee,Me;const ze=B.get("text-pitch-alignment")==="map",qe=B.get("text-rotation-alignment")==="map";u.compileFilter(u.options);const Je=u.dynamicFilter(),lt=u.dynamicFilterNeedsFeature(),ot=this.transform.calculatePixelsToTileUnitsMatrix(p),rt=Rd(Ce,p.tileID.canonical,ze,qe,this.transform,T.getProjection(),ot);let Qe=null;if(ze){const Kt=Pd(Ce,p.tileID.canonical,ze,qe,this.transform,T.getProjection(),ot);Qe=r.az([],this.transform.labelPlaneMatrix,Kt)}let ut=null;Je&&p.latestFeatureIndex&&(ut={unwrappedTileID:oe,dynamicFilter:Je,dynamicFilterNeedsFeature:lt}),this.retainedQueryData[T.bucketInstanceId]=new Ga(T.bucketInstanceId,O,T.sourceLayerIndex,T.index,p.tileID);const[pt,zt]=T.layers[0].layout.get("text-size-scale-range"),Vt=r.ay(S,pt,zt),[nn,sn]=B.get("icon-size-scale-range"),wn=r.ay(S,nn,sn),Pt={bucket:T,layout:B,paint:j,posMatrix:Ce,textLabelPlaneMatrix:rt,labelToScreenMatrix:Qe,clippingData:ut,scale:te,textPixelRatio:Q,holdingForFade:p.holdingForFade(),collisionBoxArray:K,partiallyEvaluatedTextSize:r.bH(T.textSizeData,this.transform.zoom,Vt),partiallyEvaluatedIconSize:r.bH(T.iconSizeData,this.transform.zoom,wn),collisionGroup:this.collisionGroups.get(T.sourceID),latestFeatureIndex:p.latestFeatureIndex};if(x)for(const Kt of T.sortKeyRanges){const{sortKey:kt,symbolInstanceStart:cn,symbolInstanceEnd:qt}=Kt;i.push({sortKey:kt,symbolInstanceStart:cn,symbolInstanceEnd:qt,parameters:Pt})}else i.push({symbolInstanceStart:0,symbolInstanceEnd:T.symbolInstances.length,parameters:Pt})}attemptAnchorPlacement(i,u,p,x,S,T,O,B,j,K,te,Q,oe,Ce,_e,Ee,Me,ze){const{textOffset0:qe,textOffset1:Je,crossTileID:lt}=Q,ot=[qe,Je],rt=Ui(i,p,x,ot,S),Qe=this.collisionIndex.placeCollisionBox(Ce,S,u,Di(rt.x,rt.y,T,O,this.transform.angle),te,B,j,K.predicate);if(Ee){const ut=Ce.getSymbolInstanceIconSize(ze,this.transform.zoom,Q.placedIconSymbolIndex);if(this.collisionIndex.placeCollisionBox(Ce,ut,Ee,Di(rt.x,rt.y,T,O,this.transform.angle),te,B,j,K.predicate).box.length===0)return}if(Qe.box.length>0){let ut;return this.prevPlacement&&this.prevPlacement.variableOffsets[lt]&&this.prevPlacement.placements[lt]&&this.prevPlacement.placements[lt].text&&(ut=this.prevPlacement.variableOffsets[lt].anchor),this.variableOffsets[lt]={textOffset:ot,width:p,height:x,anchor:i,textScale:S,prevAnchor:ut},this.markUsedJustification(Ce,i,Q,_e),Ce.allowVerticalPlacement&&(this.markUsedOrientation(Ce,_e,Q),this.placedOrientations[lt]=_e),{shift:rt,placedGlyphBoxes:Qe}}}placeLayerBucketPart(i,u,p,x,S=1){const{bucket:T,layout:O,paint:B,posMatrix:j,textLabelPlaneMatrix:K,labelToScreenMatrix:te,clippingData:Q,textPixelRatio:oe,holdingForFade:Ce,collisionBoxArray:_e,partiallyEvaluatedTextSize:Ee,partiallyEvaluatedIconSize:Me,collisionGroup:ze,latestFeatureIndex:qe}=i.parameters,Je=O.get("text-optional"),lt=O.get("icon-optional"),ot=O.get("text-allow-overlap"),rt=O.get("icon-allow-overlap"),Qe=O.get("text-rotation-alignment")==="map",ut=O.get("text-pitch-alignment")==="map",pt=B.get("symbol-z-offset"),zt=O.get("symbol-elevation-reference")==="sea",[Vt,nn]=O.get("text-size-scale-range"),[sn,wn]=O.get("icon-size-scale-range"),Pt=r.ay(S,Vt,nn),Kt=r.ay(S,sn,wn);this.transform.setProjection(T.projection);let kt=ot&&(rt||!T.hasIconData()||lt),cn=rt&&(ot||!T.hasTextData()||Je);const qt=!pt.isConstant();!T.collisionArrays&&_e&&T.deserializeCollisionBoxes(_e),p&&x&&T.updateCollisionDebugBuffers(this.transform.zoom,_e,Pt,Kt);const _n=(un,On,er)=>{const{crossTileID:tr,numVerticalGlyphVertices:Zn}=un;let mr=null;if(Q&&Q.dynamicFilterNeedsFeature||qt){const as=this.retainedQueryData[T.bucketInstanceId];mr=qe.loadFeature({featureIndex:un.featureIndex,bucketIndex:as.bucketIndex,sourceLayerIndex:as.sourceLayerIndex,layoutVertexArrayOffset:0})}if(Q&&!(0,Q.dynamicFilter)({zoom:this.transform.zoom,pitch:this.transform.pitch},mr,this.retainedQueryData[T.bucketInstanceId].tileID.canonical,new r.P(un.tileAnchorX,un.tileAnchorY),this.transform.calculateDistanceTileData(Q.unwrappedTileID)))return this.placements[tr]=new Ma(!1,!1,!1,!0),void u.add(tr);const yr=pt.evaluate(mr,{});if(u.has(tr))return;if(Ce)return void(this.placements[tr]=new Ma(!1,!1,!1));let kr=!1,Hr=!1,ti=!0,ji=!1,ps=!1,Yi=null,Xi={box:null,offscreen:null,occluded:null},Ws={box:null},Kr=null,ii=null,bi=null,xs=0,lo=0,ms=0;er.textFeatureIndex?xs=er.textFeatureIndex:un.useRuntimeCollisionCircles&&(xs=un.featureIndex),er.verticalTextFeatureIndex&&(lo=er.verticalTextFeatureIndex);const Vi=as=>{as.tileID=this.retainedQueryData[T.bucketInstanceId].tileID;const Ss=this.transform.elevation;as.elevation=zt?yr:yr+(Ss?Ss.getAtTileOffset(as.tileID,as.tileAnchorX,as.tileAnchorY):0),as.elevation+=un.zOffset},$s=er.textBox;if($s){Vi($s);const as=Hi=>{let js=r.bI.horizontal;if(T.allowVerticalPlacement&&!Hi&&this.prevPlacement){const Uo=this.prevPlacement.placedOrientations[tr];Uo&&(this.placedOrientations[tr]=Uo,js=Uo,this.markUsedOrientation(T,js,un))}return js},Ss=(Hi,js)=>{if(T.allowVerticalPlacement&&Zn>0&&er.verticalTextBox){for(const Uo of T.writingModes)if(Uo===r.bI.vertical?(Xi=js(),Ws=Xi):Xi=Hi(),Xi&&Xi.box&&Xi.box.length)break}else Xi=Hi()};if(O.get("text-variable-anchor")){let Hi=O.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[tr]){const As=this.prevPlacement.variableOffsets[tr];Hi.indexOf(As.anchor)>0&&(Hi=Hi.filter(Fi=>Fi!==As.anchor),Hi.unshift(As.anchor))}const js=(As,Fi,Ya)=>{const Ra=T.getSymbolInstanceTextSize(Ee,un,this.transform.zoom,On),hl=(As.x2-As.x1)*Ra+2*As.padding,Ql=(As.y2-As.y1)*Ra+2*As.padding,Al=un.hasIconTextFit&&!rt?Fi:null;Al&&Vi(Al);let Pa={box:[],offscreen:!1,occluded:!1};const nd=ot?2*Hi.length:Hi.length;for(let eu=0;eu<nd;++eu){const rd=this.attemptAnchorPlacement(Hi[eu%Hi.length],As,hl,Ql,Ra,Qe,ut,oe,j,ze,eu>=Hi.length,un,On,T,Ya,Al,Ee,Me);if(rd&&(Pa=rd.placedGlyphBoxes,Pa&&Pa.box&&Pa.box.length)){kr=!0,Yi=rd.shift;break}}return Pa};Ss(()=>js($s,er.iconBox,r.bI.horizontal),()=>{const As=er.verticalTextBox;return As&&Vi(As),T.allowVerticalPlacement&&!(Xi&&Xi.box&&Xi.box.length)&&Zn>0&&As?js(As,er.verticalIconBox,r.bI.vertical):{box:null,offscreen:null,occluded:null}}),Xi&&(kr=Xi.box,ti=Xi.offscreen,ji=Xi.occluded);const Uo=as(!(!Xi||!Xi.box));if(!kr&&this.prevPlacement){const As=this.prevPlacement.variableOffsets[tr];As&&(this.variableOffsets[tr]=As,this.markUsedJustification(T,As.anchor,un,Uo))}}else{const Hi=(js,Uo)=>{const As=T.getSymbolInstanceTextSize(Ee,un,this.transform.zoom,On,S),Fi=this.collisionIndex.placeCollisionBox(T,As,js,new r.P(0,0),ot,oe,j,ze.predicate);return Fi&&Fi.box&&Fi.box.length&&(this.markUsedOrientation(T,Uo,un),this.placedOrientations[tr]=Uo),Fi};Ss(()=>Hi($s,r.bI.horizontal),()=>{const js=er.verticalTextBox;return T.allowVerticalPlacement&&Zn>0&&js?(Vi(js),Hi(js,r.bI.vertical)):{box:null,offscreen:null,occluded:null}}),as(!!(Xi&&Xi.box&&Xi.box.length))}}if(Kr=Xi,kr=Kr&&Kr.box&&Kr.box.length>0,ti=Kr&&Kr.offscreen,ji=Kr&&Kr.occluded,un.useRuntimeCollisionCircles){const as=T.text.placedSymbolArray.get(un.centerJustifiedTextSymbolIndex>=0?un.centerJustifiedTextSymbolIndex:un.verticalPlacedTextSymbolIndex),Ss=r.bJ(T.textSizeData,Ee,as),Hi=O.get("text-padding");ii=this.collisionIndex.placeCollisionCircles(T,ot,as,T.lineVertexArray,T.glyphOffsetArray,Ss,j,K,te,p,ut,ze.predicate,un.collisionCircleDiameter*Ss/r.bO,Hi,this.retainedQueryData[T.bucketInstanceId].tileID),kr=ot||ii.circles.length>0&&!ii.collisionDetected,ti=ti&&ii.offscreen,ji=ii.occluded}if(er.iconFeatureIndex&&(ms=er.iconFeatureIndex),er.iconBox){const as=Ss=>{Vi(Ss);const Hi=un.hasIconTextFit&&Yi?Di(Yi.x,Yi.y,Qe,ut,this.transform.angle):new r.P(0,0),js=T.getSymbolInstanceIconSize(Me,this.transform.zoom,un.placedIconSymbolIndex);return this.collisionIndex.placeCollisionBox(T,js,Ss,Hi,rt,oe,j,ze.predicate)};Ws&&Ws.box&&Ws.box.length&&er.verticalIconBox?(bi=as(er.verticalIconBox),Hr=bi.box.length>0):(bi=as(er.iconBox),Hr=bi.box.length>0),ti=ti&&bi.offscreen,ps=bi.occluded}const Mi=Je||un.numHorizontalGlyphVertices===0&&Zn===0,ro=lt||un.numIconVertices===0;if(Mi||ro?ro?Mi||(Hr=Hr&&kr):kr=Hr&&kr:Hr=kr=Hr&&kr,kr&&Kr&&Kr.box&&this.collisionIndex.insertCollisionBox(Kr.box,O.get("text-ignore-placement"),T.bucketInstanceId,Ws&&Ws.box&&lo?lo:xs,ze.ID),Hr&&bi&&this.collisionIndex.insertCollisionBox(bi.box,O.get("icon-ignore-placement"),T.bucketInstanceId,ms,ze.ID),ii&&(kr&&this.collisionIndex.insertCollisionCircles(ii.circles,O.get("text-ignore-placement"),T.bucketInstanceId,xs,ze.ID),p)){const as=T.bucketInstanceId;let Ss=this.collisionCircleArrays[as];Ss===void 0&&(Ss=this.collisionCircleArrays[as]=new Nf);for(let Hi=0;Hi<ii.circles.length;Hi+=4)Ss.circles.push(ii.circles[Hi+0]),Ss.circles.push(ii.circles[Hi+1]),Ss.circles.push(ii.circles[Hi+2]),Ss.circles.push(ii.collisionDetected?1:0)}const ws=T.projection.name!=="globe";kt=kt&&(ws||!ji),cn=cn&&(ws||!ps),this.placements[tr]=new Ma(kr||kt,Hr||cn,ti||T.justReloaded),u.add(tr)},zn=this.retainedQueryData[T.bucketInstanceId].tileID;if(T.elevationType==="offset"&&this.buildingIndex&&this.buildingIndex.updateZOffset(T,zn),T.elevationType==="road"&&T.updateRoadElevation(zn.canonical),T.updateZOffset(),T.sortFeaturesByY){const un=T.getSortedSymbolIndexes(this.transform.angle);for(let On=un.length-1;On>=0;--On){const er=un[On];_n(T.symbolInstances.get(er),er,T.collisionArrays[er])}T.hasAnyZOffset&&r.w(`${T.layerIds[0]} layer symbol-z-elevate: symbols are not sorted by elevation if symbol-z-order is evaluated to viewport-y`)}else if(T.hasAnyZOffset){const un=T.getSortedIndexesByZOffset();for(let On=0;On<un.length;++On){const er=un[On];_n(T.symbolInstances.get(er),er,T.collisionArrays[er])}}else for(let un=i.symbolInstanceStart;un<i.symbolInstanceEnd;un++)_n(T.symbolInstances.get(un),un,T.collisionArrays[un]);if(p&&T.bucketInstanceId in this.collisionCircleArrays){const un=this.collisionCircleArrays[T.bucketInstanceId];r.bi(un.invProjMatrix,j),un.viewportMatrix=this.collisionIndex.getViewportMatrix()}T.justReloaded=!1}markUsedJustification(i,u,p,x){const{leftJustifiedTextSymbolIndex:S,centerJustifiedTextSymbolIndex:T,rightJustifiedTextSymbolIndex:O,verticalPlacedTextSymbolIndex:B,crossTileID:j}=p,K=r.bV(u),te=x===r.bI.vertical?B:K==="left"?S:K==="center"?T:K==="right"?O:-1;S>=0&&(i.text.placedSymbolArray.get(S).crossTileID=te>=0&&S!==te?0:j),T>=0&&(i.text.placedSymbolArray.get(T).crossTileID=te>=0&&T!==te?0:j),O>=0&&(i.text.placedSymbolArray.get(O).crossTileID=te>=0&&O!==te?0:j),B>=0&&(i.text.placedSymbolArray.get(B).crossTileID=te>=0&&B!==te?0:j)}markUsedOrientation(i,u,p){const x=u===r.bI.horizontal||u===r.bI.horizontalOnly?u:0,S=u===r.bI.vertical?u:0,{leftJustifiedTextSymbolIndex:T,centerJustifiedTextSymbolIndex:O,rightJustifiedTextSymbolIndex:B,verticalPlacedTextSymbolIndex:j}=p,K=i.text.placedSymbolArray;T>=0&&(K.get(T).placedOrientation=x),O>=0&&(K.get(O).placedOrientation=x),B>=0&&(K.get(B).placedOrientation=x),j>=0&&(K.get(j).placedOrientation=S)}commit(i){this.commitTime=i,this.zoomAtLastRecencyCheck=this.transform.zoom;const u=this.prevPlacement;let p=!1;this.prevZoomAdjustment=u?u.zoomAdjustment(this.transform.zoom):0;const x=u?u.symbolFadeChange(i):1,S=u?u.opacities:{},T=u?u.variableOffsets:{},O=u?u.placedOrientations:{};for(const B in this.placements){const j=this.placements[B],K=S[B];K?(this.opacities[B]=new Uu(K,x,j.text,j.icon,null,j.clipped),p=p||j.text!==K.text.placed||j.icon!==K.icon.placed):(this.opacities[B]=new Uu(null,x,j.text,j.icon,j.skipFade,j.clipped),p=p||j.text||j.icon)}for(const B in S){const j=S[B];if(!this.opacities[B]){const K=new Uu(j,x,!1,!1);K.isHidden()||(this.opacities[B]=K,p=p||j.text.placed||j.icon.placed)}}for(const B in T)this.variableOffsets[B]||!this.opacities[B]||this.opacities[B].isHidden()||(this.variableOffsets[B]=T[B]);for(const B in O)this.placedOrientations[B]||!this.opacities[B]||this.opacities[B].isHidden()||(this.placedOrientations[B]=O[B]);p?this.lastPlacementChangeTime=i:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=u?u.lastPlacementChangeTime:i)}updateLayerOpacities(i,u,p,x){const S=new Set;for(const T of u){const O=T.getBucket(i);O&&T.latestFeatureIndex&&i.fqid===O.layerIds[0]&&(this.updateBucketOpacities(O,S,T,T.collisionBoxArray,p,x,T.tileID,i.scope),O.elevationType==="offset"&&this.buildingIndex&&this.buildingIndex.updateZOffset(O,T.tileID),O.elevationType==="road"&&O.updateRoadElevation(T.tileID.canonical),O.updateZOffset())}}updateBucketOpacities(i,u,p,x,S,T,O,B){i.hasTextData()&&i.text.opacityVertexArray.clear(),i.hasIconData()&&i.icon.opacityVertexArray.clear(),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexArray.clear(),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexArray.clear();const j=i.layers[0].layout,K=i.layers[0].paint,te=!!i.layers[0].dynamicFilter(),Q=new Uu(null,0,!1,!1,!0),oe=j.get("text-allow-overlap"),Ce=j.get("icon-allow-overlap"),_e=j.get("text-variable-anchor"),Ee=j.get("text-rotation-alignment")==="map",Me=j.get("text-pitch-alignment")==="map",ze=K.get("symbol-z-offset"),qe=j.get("symbol-elevation-reference")==="sea",Je=!ze.isConstant(),lt=new Uu(null,0,oe&&(Ce||!i.hasIconData()||j.get("icon-optional")),Ce&&(oe||!i.hasTextData()||j.get("text-optional")),!0);!i.collisionArrays&&x&&(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData())&&i.deserializeCollisionBoxes(x);const ot=(Qe,ut,pt)=>{for(let zt=0;zt<ut/4;zt++)Qe.opacityVertexArray.emplaceBack(pt)};let rt=0;T&&i.updateReplacement(O,T);for(let Qe=0;Qe<i.symbolInstances.length;Qe++){const ut=i.symbolInstances.get(Qe),{numHorizontalGlyphVertices:pt,numVerticalGlyphVertices:zt,crossTileID:Vt,numIconVertices:nn,tileAnchorX:sn,tileAnchorY:wn}=ut;let Pt=null;const Kt=this.retainedQueryData[i.bucketInstanceId];Je&&ut&&Kt&&(Pt=p.latestFeatureIndex.loadFeature({featureIndex:ut.featureIndex,bucketIndex:Kt.bucketIndex,sourceLayerIndex:Kt.sourceLayerIndex,layoutVertexArrayOffset:0}));const kt=ze.evaluate(Pt,{}),cn=u.has(Vt);let qt=this.opacities[Vt];cn?qt=Q:qt||(qt=lt,this.opacities[Vt]=qt),u.add(Vt);const _n=pt>0||zt>0,zn=nn>0,un=this.placedOrientations[Vt],On=un===r.bI.vertical,er=un===r.bI.horizontal||un===r.bI.horizontalOnly;!_n&&!zn||qt.isHidden()||rt++;let tr=!1;if((_n||zn)&&T)for(const Zn of i.activeReplacements){if(r.bP(Zn,S,r.bQ.Symbol,B)||Zn.min.x>sn||sn>Zn.max.x||Zn.min.y>wn||wn>Zn.max.y)continue;const mr=r.bR(sn,wn,O.canonical,Zn.footprintTileId.canonical);if(tr=r.bS(mr,Zn.footprint),tr)break}if(_n){const Zn=tr?Wl:Dc(qt.text);ot(i.text,pt,On?Wl:Zn),ot(i.text,zt,er?Wl:Zn);const mr=qt.text.isHidden(),{leftJustifiedTextSymbolIndex:yr,centerJustifiedTextSymbolIndex:kr,rightJustifiedTextSymbolIndex:Hr,verticalPlacedTextSymbolIndex:ti}=ut,ji=i.text.placedSymbolArray,ps=mr||On?1:0;yr>=0&&(ji.get(yr).hidden=ps),kr>=0&&(ji.get(kr).hidden=ps),Hr>=0&&(ji.get(Hr).hidden=ps),ti>=0&&(ji.get(ti).hidden=mr||er?1:0);const Yi=this.variableOffsets[Vt];Yi&&this.markUsedJustification(i,Yi.anchor,ut,un);const Xi=this.placedOrientations[Vt];Xi&&(this.markUsedJustification(i,"left",ut,Xi),this.markUsedOrientation(i,Xi,ut))}if(zn){const Zn=tr?Wl:Dc(qt.icon),{placedIconSymbolIndex:mr,verticalPlacedIconSymbolIndex:yr}=ut,kr=i.icon.placedSymbolArray,Hr=qt.icon.isHidden()?1:0;mr>=0&&(ot(i.icon,nn,On?Wl:Zn),kr.get(mr).hidden=Hr),yr>=0&&(ot(i.icon,ut.numVerticalIconVertices,er?Wl:Zn),kr.get(yr).hidden=Hr)}if(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData()){const Zn=i.collisionArrays[Qe];if(Zn){let mr=new r.P(0,0),yr=!0;if(Zn.textBox||Zn.verticalTextBox){if(_e){const Hr=this.variableOffsets[Vt];Hr?(mr=Ui(Hr.anchor,Hr.width,Hr.height,Hr.textOffset,Hr.textScale),Ee&&mr._rotate(Me?this.transform.angle:-this.transform.angle)):yr=!1}te&&(yr=!qt.clipped),Zn.textBox&&ll(i.textCollisionBox.collisionVertexArray,qt.text.placed,!yr||On,kt,qe,mr.x,mr.y),Zn.verticalTextBox&&ll(i.textCollisionBox.collisionVertexArray,qt.text.placed,!yr||er,kt,qe,mr.x,mr.y)}const kr=yr&&!!(!er&&Zn.verticalIconBox);Zn.iconBox&&ll(i.iconCollisionBox.collisionVertexArray,qt.icon.placed,kr,kt,qe,ut.hasIconTextFit?mr.x:0,ut.hasIconTextFit?mr.y:0),Zn.verticalIconBox&&ll(i.iconCollisionBox.collisionVertexArray,qt.icon.placed,!kr,kt,qe,ut.hasIconTextFit?mr.x:0,ut.hasIconTextFit?mr.y:0)}}}if(i.fullyClipped=rt===0,i.sortFeatures(this.transform.angle),this.retainedQueryData[i.bucketInstanceId]&&(this.retainedQueryData[i.bucketInstanceId].featureSortOrder=i.featureSortOrder),i.hasTextData()&&i.text.opacityVertexBuffer&&i.text.opacityVertexBuffer.updateData(i.text.opacityVertexArray),i.hasIconData()&&i.icon.opacityVertexBuffer&&i.icon.opacityVertexBuffer.updateData(i.icon.opacityVertexArray),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexBuffer&&i.iconCollisionBox.collisionVertexBuffer.updateData(i.iconCollisionBox.collisionVertexArray),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexBuffer&&i.textCollisionBox.collisionVertexBuffer.updateData(i.textCollisionBox.collisionVertexArray),i.bucketInstanceId in this.collisionCircleArrays){const Qe=this.collisionCircleArrays[i.bucketInstanceId];i.placementInvProjMatrix=Qe.invProjMatrix,i.placementViewportMatrix=Qe.viewportMatrix,i.collisionCircleArray=Qe.circles,delete this.collisionCircleArrays[i.bucketInstanceId]}}symbolFadeChange(i){return this.fadeDuration===0?1:(i-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(i){return Math.max(0,(this.transform.zoom-i)/1.5)}hasTransitions(i){return this.stale||i-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(i,u){const p=this.zoomAtLastRecencyCheck===u?1-this.zoomAdjustment(u):1;return this.zoomAtLastRecencyCheck=u,this.commitTime+this.fadeDuration*p>i}setStale(){this.stale=!0}}function ll(f,i,u,p,x,S,T){f.emplaceBack(i?1:0,u?1:0,S||0,T||0,p,x?1:0),f.emplaceBack(i?1:0,u?1:0,S||0,T||0,p,x?1:0),f.emplaceBack(i?1:0,u?1:0,S||0,T||0,p,x?1:0),f.emplaceBack(i?1:0,u?1:0,S||0,T||0,p,x?1:0)}const Ni=Math.pow(2,25),Lc=Math.pow(2,24),Oc=Math.pow(2,17),ia=Math.pow(2,16),Vo=Math.pow(2,9),hs=Math.pow(2,8),Od=Math.pow(2,1);function Dc(f){if(f.opacity===0&&!f.placed)return 0;if(f.opacity===1&&f.placed)return 4294967295;const i=f.placed?1:0,u=Math.floor(127*f.opacity);return u*Ni+i*Lc+u*Oc+i*ia+u*Vo+i*hs+u*Od+i}const Wl=0;class zc{constructor(i){this._sortAcrossTiles=i.layout.get("symbol-z-order")!=="viewport-y"&&i.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs=new Set,this._bucketParts=[]}continuePlacement(i,u,p,x,S,T){const O=this._bucketParts;for(;this._currentTileIndex<i.length;)if(u.getBucketParts(O,x,i[this._currentTileIndex],this._sortAcrossTiles,T),this._currentTileIndex++,S())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,O.sort((B,j)=>B.sortKey-j.sortKey));this._currentPartIndex<O.length;){const B=O[this._currentPartIndex];if(u.placeLayerBucketPart(B,this._seenCrossTileIDs,p,B.symbolInstanceStart===0,T),this._currentPartIndex++,S())return!0}return!1}}class Dd{constructor(i,u,p,x,S,T,O,B,j){this.placement=new va(i,S,T,O,B,j),this._currentPlacementIndex=u.length-1,this._forceFullPlacement=p,this._showCollisionBoxes=x,this._done=!1}isDone(){return this._done}continuePlacement(i,u,p,x,S){const T=r.q.now(),O=()=>{const B=r.q.now()-T;return!this._forceFullPlacement&&B>2};for(;this._currentPlacementIndex>=0;){const B=u[i[this._currentPlacementIndex]],j=this.placement.collisionIndex.transform.zoom;if(B.type==="symbol"&&(!B.minzoom||B.minzoom<=j)&&(!B.maxzoom||B.maxzoom>j)){const K=B,te=K.layout.get("symbol-z-elevate"),Q=K.layout.get("symbol-sort-key").constantOr(1)!==void 0,oe=K.layout.get("symbol-z-order"),Ce=oe==="viewport-y"||oe==="auto"&&!(oe!=="viewport-y"&&Q),_e=K.layout.get("text-allow-overlap")||K.layout.get("icon-allow-overlap")||K.layout.get("text-ignore-placement")||K.layout.get("icon-ignore-placement"),Ee=Ce&&_e,Me=this._inProgressLayer=this._inProgressLayer||new zc(K),ze=r.C(B.source,B.scope);if(Me.continuePlacement(te||Ee?x[ze]:p[ze],this.placement,this._showCollisionBoxes,B,O,S))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(i){return this.placement.commit(i),this.placement}}const ju=512/r.aj/2;class Mh{constructor(i,u,p){this.tileID=i,this.bucketInstanceId=p,this.index=new r.bW(u.length,16,Int32Array),this.keys=[],this.crossTileIDs=[];const x=i.canonical.x*r.aj,S=i.canonical.y*r.aj;for(let T=0;T<u.length;T++){const{key:O,crossTileID:B,tileAnchorX:j,tileAnchorY:K}=u.get(T),te=Math.floor((x+j)*ju),Q=Math.floor((S+K)*ju);this.index.add(te,Q),this.keys.push(O),this.crossTileIDs.push(B)}this.index.finish()}findMatches(i,u,p){const x=this.tileID.canonical.z<u.canonical.z?1:Math.pow(2,this.tileID.canonical.z-u.canonical.z),S=ju/Math.pow(2,u.canonical.z-this.tileID.canonical.z),T=u.canonical.x*r.aj,O=u.canonical.y*r.aj;for(let B=0;B<i.length;B++){const j=i.get(B);if(j.crossTileID)continue;const{key:K,tileAnchorX:te,tileAnchorY:Q}=j,oe=Math.floor((T+te)*S),Ce=Math.floor((O+Q)*S),_e=this.index.range(oe-x,Ce-x,oe+x,Ce+x).sort((Ee,Me)=>Ee-Me);for(const Ee of _e){const Me=this.crossTileIDs[Ee];if(this.keys[Ee]===K&&!p.has(Me)){p.add(Me),j.crossTileID=Me;break}}}}}class Ko{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Kl{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(i){const u=Math.round((i-this.lng)/360);if(u!==0)for(const p in this.indexes){const x=this.indexes[p],S={};for(const T in x){const O=x[T];O.tileID=O.tileID.unwrapTo(O.tileID.wrap+u),S[O.tileID.key]=O}this.indexes[p]=S}this.lng=i}addBucket(i,u,p){if(this.indexes[i.overscaledZ]&&this.indexes[i.overscaledZ][i.key]){if(this.indexes[i.overscaledZ][i.key].bucketInstanceId===u.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(i.overscaledZ,this.indexes[i.overscaledZ][i.key])}for(let S=0;S<u.symbolInstances.length;S++)u.symbolInstances.get(S).crossTileID=0;this.usedCrossTileIDs[i.overscaledZ]||(this.usedCrossTileIDs[i.overscaledZ]=new Set);const x=this.usedCrossTileIDs[i.overscaledZ];for(const S in this.indexes){const T=this.indexes[S];if(Number(S)>i.overscaledZ)for(const O in T){const B=T[O];B.tileID.isChildOf(i)&&B.findMatches(u.symbolInstances,i,x)}else{const O=T[i.scaledTo(Number(S)).key];O&&O.findMatches(u.symbolInstances,i,x)}}for(let S=0;S<u.symbolInstances.length;S++){const T=u.symbolInstances.get(S);T.crossTileID||(T.crossTileID=p.generate(),x.add(T.crossTileID))}return this.indexes[i.overscaledZ]===void 0&&(this.indexes[i.overscaledZ]={}),this.indexes[i.overscaledZ][i.key]=new Mh(i,u.symbolInstances,u.bucketInstanceId),!0}removeBucketCrossTileIDs(i,u){for(const p of u.crossTileIDs)this.usedCrossTileIDs[i].delete(p)}removeStaleBuckets(i){let u=!1;for(const p in this.indexes){const x=this.indexes[p];for(const S in x)i[x[S].bucketInstanceId]||(this.removeBucketCrossTileIDs(p,x[S]),delete x[S],u=!0)}return u}}class sa{constructor(){this.layerIndexes={},this.crossTileIDs=new Ko,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(i,u,p,x){let S=this.layerIndexes[i.fqid];S===void 0&&(S=this.layerIndexes[i.fqid]=new Kl);let T=!1;const O={};x.name!=="globe"&&S.handleWrapJump(p);for(const B of u){const j=B.getBucket(i);j&&i.fqid===j.layerIds[0]&&(j.bucketInstanceId||(j.bucketInstanceId=++this.maxBucketInstanceId),S.addBucket(B.tileID,j,this.crossTileIDs)&&(T=!0),O[j.bucketInstanceId]=!0)}return S.removeStaleBuckets(O)&&(T=!0),T}pruneUnusedLayers(i){const u={};i.forEach(p=>{u[p]=!0});for(const p in this.layerIndexes)u[p]||delete this.layerIndexes[p]}}const Gu=771;class ai{constructor(i,u,p,x){this.blendFunction=i,this.blendColor=u.toNonPremultipliedRenderColor(null),this.mask=p,this.blendEquation=x}}ai.Replace=[1,0,1,0],ai.disabled=new ai(ai.Replace,r.am.transparent,[!1,!1,!1,!1]),ai.unblended=new ai(ai.Replace,r.am.transparent,[!0,!0,!0,!0]),ai.alphaBlended=new ai([1,Gu,1,Gu],r.am.transparent,[!0,!0,!0,!0]),ai.alphaBlendedNonPremultiplied=new ai([770,Gu,770,Gu],r.am.transparent,[!0,!0,!0,!0]),ai.multiply=new ai([774,0,774,0],r.am.transparent,[!0,!0,!0,!0]);class Jn{constructor(i,u,p){this.func=i,this.mask=u,this.range=p}}Jn.ReadOnly=!1,Jn.ReadWrite=!0,Jn.disabled=new Jn(519,Jn.ReadOnly,[0,1]);const qa=7680;class Vr{constructor(i,u,p,x,S,T){this.test=i,this.ref=u,this.mask=p,this.fail=x,this.depthFail=S,this.pass=T}}Vr.disabled=new Vr({func:519,mask:0},0,0,qa,qa,qa);const to=1029,Nc=2305;class Pr{constructor(i,u,p){this.enable=i,this.mode=u,this.frontFace=p}}function Fc(f,i){const u=r.c1(f,3);r.c3(f,i),r.c7(f,3,u)}function Bc(f,i){const u=r.b_([]);return r.b$(u,u,-i),r.c0(u,u,-f),u}function mu(f,i){const u=[f[0],f[1],0],p=[i[0],i[1],0];if(r.ae(u)>=1e-15){const T=r.au([],u);r.bY(p,T,r.bG(p,T)),i[0]=p[0],i[1]=p[1]}const x=r.bF([],i,f);if(r.bZ(x)<1e-15)return null;const S=Math.atan2(-x[1],x[0]);return Bc(Math.atan2(Math.sqrt(f[0]*f[0]+f[1]*f[1]),-f[2]),S)}Pr.disabled=new Pr(!1,to,Nc),Pr.backCCW=new Pr(!0,to,Nc),Pr.backCW=new Pr(!0,to,2304),Pr.frontCW=new Pr(!0,1028,2304),Pr.frontCCW=new Pr(!0,1028,Nc);class tm{constructor(i,u){this.position=i,this.orientation=u}get position(){return this._position}set position(i){if(i){const u=i instanceof r.ac?i:new r.ac(i[0],i[1],i[2]);this._renderWorldCopies&&(u.x=r.bX(u.x,0,1)),this._position=u}else this._position=null}lookAtPoint(i,u){if(this.orientation=null,!this.position)return;const p=this.position,x=this._elevation?this._elevation.getAtPointOrZero(r.ac.fromLngLat(i)):0,S=r.ac.fromLngLat(i,x),T=[S.x-p.x,S.y-p.y,S.z-p.z];u||(u=[0,0,1]),u[2]=Math.abs(u[2]),this.orientation=mu(T,u)}setPitchBearing(i,u){this.orientation=Bc(r.al(i),r.al(-u))}}class Wa{constructor(i,u){this._transform=r.bx([]),this.orientation=u,this.position=i}get mercatorPosition(){const i=this.position;return new r.ac(i[0],i[1],i[2])}get position(){const i=r.c1(this._transform,3);return[i[0],i[1],i[2]]}set position(i){var u;i&&r.c7(this._transform,3,[(u=i)[0],u[1],u[2],1])}get orientation(){return this._orientation}set orientation(i){this._orientation=i||r.b_([]),i&&Fc(this._transform,this._orientation)}getPitchBearing(){const i=this.forward(),u=this.right();return{bearing:Math.atan2(-u[1],u[0]),pitch:Math.atan2(Math.sqrt(i[0]*i[0]+i[1]*i[1]),-i[2])}}setPitchBearing(i,u){this._orientation=Bc(i,u),Fc(this._transform,this._orientation)}forward(){const i=r.c1(this._transform,2);return[-i[0],-i[1],-i[2]]}up(){const i=r.c1(this._transform,1);return[-i[0],-i[1],-i[2]]}right(){const i=r.c1(this._transform,0);return[i[0],i[1],i[2]]}getCameraToWorld(i,u){const p=new Float64Array(16);return r.bi(p,this.getWorldToCamera(i,u)),p}getCameraToWorldMercator(){return this._transform}getWorldToCameraPosition(i,u,p){const x=this.position;r.bY(x,x,-i);const S=new Float64Array(16);return r.bn(S,[p,p,p]),r.bo(S,S,x),S[10]*=u,S}getWorldToCamera(i,u){const p=new Float64Array(16),x=new Float64Array(4),S=this.position;return r.c2(x,this._orientation),r.bY(S,S,-i),r.c3(p,x),r.bo(p,p,S),p[1]*=-1,p[5]*=-1,p[9]*=-1,p[13]*=-1,p[8]*=u,p[9]*=u,p[10]*=u,p[11]*=u,p}getCameraToClipPerspective(i,u,p,x){const S=new Float64Array(16);return r.c4(S,i,u,p,x),S}getCameraToClipOrthographic(i,u,p,x,S,T){const O=new Float64Array(16);return r.c5(O,i,u,p,x,S,T),O}getDistanceToElevation(i,u=!1){const p=i===0?0:r.c6(i,u?r.aY(this.position[1]):this.position[1]),x=this.forward();return(p-this.position[2])/x[2]}clone(){return new Wa([...this.position],[...this.orientation])}}const Yo={BaseColor:5,MetallicRoughness:6,Normal:7,Occlusion:8,Emission:9,LUT:10,ShadowMap0:11};class Vc{constructor(i=0,u=0,p=0,x=0){if(isNaN(i)||i<0||isNaN(u)||u<0||isNaN(p)||p<0||isNaN(x)||x<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=i,this.bottom=u,this.left=p,this.right=x}interpolate(i,u,p){return u.top!=null&&i.top!=null&&(this.top=r.ai(i.top,u.top,p)),u.bottom!=null&&i.bottom!=null&&(this.bottom=r.ai(i.bottom,u.bottom,p)),u.left!=null&&i.left!=null&&(this.left=r.ai(i.left,u.left,p)),u.right!=null&&i.right!=null&&(this.right=r.ai(i.right,u.right,p)),this}getCenter(i,u){const p=r.ay((this.left+i-this.right)/2,0,i),x=r.ay((this.top+u-this.bottom)/2,0,u);return new r.P(p,x)}equals(i){return this.top===i.top&&this.bottom===i.bottom&&this.left===i.left&&this.right===i.right}clone(){return new Vc(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}const bo=15;class Ah{constructor(i,u,p,x,S,T,O){this.tileSize=512,this._renderWorldCopies=S===void 0||S,this._minZoom=i||0,this._maxZoom=u||22,this._minPitch=p??0,this._maxPitch=x??60,this.setProjection(T),this.setMaxBounds(O),this.width=0,this.height=0,this._center=new r.cd(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._nearZ=0,this._farZ=0,this._unmodified=!0,this._edgeInsets=new Vc,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._expandedProjMatrixCache={},this._distanceTileDataCache={},this._camera=new Wa,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._pixelsPerMercatorPixel=1,this.globeRadius=0,this.globeCenterInViewSpace=[0,0,0],this._tileCoverLift=0,this.freezeTileCoverage=!1,this._horizonShift=.1,this._orthographicProjectionAtLowPitch=!1,this._allowWorldUnderZoom=!1}clone(){const i=new Ah(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies,this.getProjection(),this.maxBounds);return i._elevation=this._elevation,i._centerAltitude=this._centerAltitude,i._centerAltitudeValidForExaggeration=this._centerAltitudeValidForExaggeration,i.tileSize=this.tileSize,i.mercatorFromTransition=this.mercatorFromTransition,i.width=this.width,i.height=this.height,i.cameraElevationReference=this.cameraElevationReference,i._center=this._center,i._setZoom(this.zoom),i._seaLevelZoom=this._seaLevelZoom,i.angle=this.angle,i._fov=this._fov,i._pitch=this._pitch,i._nearZ=this._nearZ,i._farZ=this._farZ,i._averageElevation=this._averageElevation,i._orthographicProjectionAtLowPitch=this._orthographicProjectionAtLowPitch,i._unmodified=this._unmodified,i._edgeInsets=this._edgeInsets.clone(),i._camera=this._camera.clone(),i._calcMatrices(),i.freezeTileCoverage=this.freezeTileCoverage,i.frustumCorners=this.frustumCorners,i._allowWorldUnderZoom=this._allowWorldUnderZoom,i}get isOrthographic(){return this.projection.name!=="globe"&&this._orthographicProjectionAtLowPitch&&this.pitch<bo}get elevation(){return this._elevation}set elevation(i){this._elevation!==i&&(this._elevation=i,this._updateCameraOnTerrain(),this._calcMatrices())}get depthOcclusionForSymbolsAndCircles(){return this.projection.name!=="globe"&&!this.isOrthographic}updateElevation(i,u=!1){const p=this._elevation&&this._elevation.exaggeration()!==this._centerAltitudeValidForExaggeration;(this._seaLevelZoom==null||p)&&this._updateCameraOnTerrain(),(i||p)&&this._constrainCamera(u),this._calcMatrices()}getProjection(){return r.aF(this.projection,["name","center","parallels"])}setProjection(i){this.projectionOptions=i||{name:"mercator"};const u=this.projection?this.getProjection():void 0;this.projection=r.ce(this.projectionOptions);const p=this.getProjection(),x=!r.bv(u,p);return x&&this._calcMatrices(),this.mercatorFromTransition=!1,x}setOrthographicProjectionAtLowPitch(i){return this._orthographicProjectionAtLowPitch!==i&&(this._orthographicProjectionAtLowPitch=i,this._calcMatrices(),!0)}setMercatorFromTransition(){const i=this.projection.name;this.mercatorFromTransition=!0,this.projectionOptions={name:"mercator"},this.projection=r.ce({name:"mercator"});const u=i!==this.projection.name;return u&&this._calcMatrices(),u}get minZoom(){return this._minZoom}set minZoom(i){this._minZoom!==i&&(this._minZoom=i,this.zoom=Math.max(this.zoom,i))}get maxZoom(){return this._maxZoom}set maxZoom(i){this._maxZoom!==i&&(this._maxZoom=i,this.zoom=Math.min(this.zoom,i))}get minPitch(){return this._minPitch}set minPitch(i){this._minPitch!==i&&(this._minPitch=i,this.pitch=Math.max(this.pitch,i))}get maxPitch(){return this._maxPitch}set maxPitch(i){this._maxPitch!==i&&(this._maxPitch=i,this.pitch=Math.min(this.pitch,i))}get renderWorldCopies(){return this._renderWorldCopies&&this.projection.supportsWorldCopies===!0}set renderWorldCopies(i){i===void 0?i=!0:i===null&&(i=!1),this._renderWorldCopies=i}get worldSize(){return this.tileSize*this.scale}get cameraWorldSizeForFog(){const i=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(i))}get cameraWorldSize(){const i=Math.max(this._camera.getDistanceToElevation(this._averageElevation,!0),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(i))}get pixelsPerMeter(){return this.projection.pixelsPerMeter(this.center.lat,this.worldSize)}get cameraPixelsPerMeter(){return r.c6(1,this.center.lat)*this.cameraWorldSizeForFog}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new r.P(this.width,this.height)}get bearing(){return r.bX(this.rotation,-180,180)}set bearing(i){this.rotation=i}get rotation(){return-this.angle/Math.PI*180}set rotation(i){const u=-i*Math.PI/180;this.angle!==u&&(this._unmodified=!1,this.angle=u,this._calcMatrices(),this.rotationMatrix=r.cf(),r.cg(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(i){const u=r.ay(i,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==u&&(this._unmodified=!1,this._pitch=u,this._calcMatrices())}get aspect(){return this.width/this.height}get fov(){return this._fov/Math.PI*180}set fov(i){i=Math.max(.01,Math.min(60,i)),this._fov!==i&&(this._unmodified=!1,this._fov=r.al(i),this._calcMatrices())}get fovX(){return this._fov}get fovY(){const i=1/Math.tan(.5*this.fovX);return 2*Math.atan(1/this.aspect/i)}get averageElevation(){return this._averageElevation}set averageElevation(i){this._averageElevation=i,this._calcFogMatrices(),this._distanceTileDataCache={}}get zoom(){return this._zoom}set zoom(i){const u=Math.min(Math.max(i,this.minZoom),this.maxZoom);this._zoom!==u&&(this._unmodified=!1,this._setZoom(u),this._updateSeaLevelZoom(),this._constrain(),this._calcMatrices())}_setZoom(i){this._zoom=i,this.scale=this.zoomScale(i),this.tileZoom=Math.floor(i),this.zoomFraction=i-this.tileZoom}get tileCoverLift(){return this._tileCoverLift}set tileCoverLift(i){this._tileCoverLift!==i&&(this._tileCoverLift=i)}_updateCameraOnTerrain(){const i=this.elevation?this.elevation.getAtPoint(this.locationCoordinate(this.center),Number.NEGATIVE_INFINITY):Number.NEGATIVE_INFINITY,u=this.elevation&&i===Number.NEGATIVE_INFINITY&&this.elevation.visibleDemTiles.length>0&&this.elevation.exaggeration()>0&&this._centerAltitudeValidForExaggeration;if(!this._elevation||i===Number.NEGATIVE_INFINITY&&(!u||!this._centerAltitude))return this._centerAltitude=0,this._seaLevelZoom=null,void(this._centerAltitudeValidForExaggeration=void 0);const p=this._elevation;u||this._centerAltitude&&this._centerAltitudeValidForExaggeration&&p.exaggeration()&&this._centerAltitudeValidForExaggeration!==p.exaggeration()?(this._centerAltitude=this._centerAltitude/this._centerAltitudeValidForExaggeration*p.exaggeration(),this._centerAltitudeValidForExaggeration=p.exaggeration()):(this._centerAltitude=i||0,this._centerAltitudeValidForExaggeration=p.exaggeration()),this._updateSeaLevelZoom()}_updateSeaLevelZoom(){if(this._centerAltitudeValidForExaggeration===void 0)return;const i=Math.max(0,(this.pixelsPerMeter*this._centerAltitude+this.cameraToCenterDistance)/this.worldSize);this._seaLevelZoom=this._zoomFromMercatorZ(i)}sampleAverageElevation(){if(!this._elevation)return 0;const i=this._elevation,u=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],p=this.horizonLineFromTop();let x=0,S=0;for(let T=0;T<u.length;T++){const O=new r.P(u[T][0]*this.width,p+u[T][1]*(this.height-p)),B=i.pointCoordinate(O);if(!B)continue;const j=1/Math.hypot(B[0]-this._camera.position[0],B[1]-this._camera.position[1]);x+=B[3]*j,S+=j}return S===0?NaN:x/S}get center(){return this._center}set center(i){i.lat===this._center.lat&&i.lng===this._center.lng||(this._unmodified=!1,this._center=i,this._terrainEnabled()&&(this.cameraElevationReference==="ground"?this._updateCameraOnTerrain():this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(this._seaLevelZoom==null||!this._elevation)return;const i=this._seaLevelZoom,u=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center)),p=this.pixelsPerMeter/this.worldSize*u,x=this._mercatorZfromZoom(i),S=this._mercatorZfromZoom(this._maxZoom),T=Math.max(x-p,S);this._setZoom(this._zoomFromMercatorZ(T))}get padding(){return this._edgeInsets.toJSON()}set padding(i){this._edgeInsets.equals(i)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,i,1),this._calcMatrices())}computeZoomRelativeTo(i){const u=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,i.toAltitude()));let p;p=i.z<this._camera.position[2]?[u.x,u.y,u.z]:[i.x,i.y,i.z];const x=r.ae(r.at([],this._camera.position,p));return r.ay(this._zoomFromMercatorZ(x),this._minZoom,this._maxZoom)}setFreeCameraOptions(i){if(!this.height||!i.position&&!i.orientation)return;this._updateCameraState();let u=!1;if(i.orientation&&!r.ch(i.orientation,this._camera.orientation)&&(u=this._setCameraOrientation(i.orientation)),i.position){const p=[i.position.x,i.position.y,i.position.z];r.ci(p,this._camera.position)||(this._setCameraPosition(p),u=!0)}u&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const i=this._camera.position,u=new tm;return u.position=new r.ac(i[0],i[1],i[2]),u.orientation=this._camera.orientation,u._elevation=this.elevation,u._renderWorldCopies=this.renderWorldCopies,u}_setCameraOrientation(i){if(!r.cj(i))return!1;r.ck(i,i);const u=r.cl([],[0,0,-1],i),p=r.cl([],[0,-1,0],i);if(p[2]<0)return!1;const x=mu(u,p);return!!x&&(this._camera.orientation=x,!0)}_setCameraPosition(i){const u=this.zoomScale(this.minZoom)*this.tileSize,p=this.zoomScale(this.maxZoom)*this.tileSize,x=this.cameraToCenterDistance;i[2]=r.ay(i[2],x/p,x/u),this._camera.position=i}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(i){return this._edgeInsets.equals(i)}interpolatePadding(i,u,p){this._unmodified=!1,this._edgeInsets.interpolate(i,u,p),this._constrain(),this._calcMatrices()}coveringZoomLevel(i){const u=(i.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/i.tileSize));return Math.max(0,u)}getVisibleUnwrappedCoordinates(i){const u=[new r.cm(0,i)];if(this.renderWorldCopies){const p=this.pointCoordinate(new r.P(0,0)),x=this.pointCoordinate(new r.P(this.width,0)),S=this.pointCoordinate(new r.P(this.width,this.height)),T=this.pointCoordinate(new r.P(0,this.height)),O=Math.floor(Math.min(p.x,x.x,S.x,T.x)),B=Math.floor(Math.max(p.x,x.x,S.x,T.x)),j=1;for(let K=O-j;K<=B+j;K++)K!==0&&u.push(new r.cm(K,i))}return u}isLODDisabled(i){return(!i||this.pitch<=60)&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation&&!this.projection.isReprojectedInTileSpace}extendTileCover(i,u,p){let x=[];const S=p!=null,T=!S;if(T&&this.zoom<u||S&&p[0]===0&&p[1]===0)return x;const O=new Set,B=(K,te,Q,oe,Ce)=>{const _e=r.cK(te,K,Q,oe,Ce);O.has(_e)||(x.push(new r.aM(K,te,Q,oe,Ce)),O.add(_e))};for(let K=0;K<i.length;K++){const te=i[K];if(T&&te.canonical.z!==u)continue;const Q=te.canonical,oe=te.overscaledZ,Ce=te.wrap,_e=1<<Q.z,Ee=Q.x+1<_e,Me=Q.x>0,ze=Q.y+1<_e,qe=Q.y>0,Je=te.wrap-(Me?0:1),lt=te.wrap+(Ee?0:1),ot=Me?Q.x-1:_e-1,rt=Ee?Q.x+1:0;if(S)p[0]<0?(B(oe,lt,Q.z,rt,Q.y),p[1]<0&&ze&&(B(oe,Ce,Q.z,Q.x,Q.y+1),B(oe,lt,Q.z,rt,Q.y+1)),p[1]>0&&qe&&(B(oe,Ce,Q.z,Q.x,Q.y-1),B(oe,lt,Q.z,rt,Q.y-1))):p[0]>0?(B(oe,Je,Q.z,ot,Q.y),p[1]<0&&ze&&(B(oe,Ce,Q.z,Q.x,Q.y+1),B(oe,Je,Q.z,ot,Q.y+1)),p[1]>0&&qe&&(B(oe,Ce,Q.z,Q.x,Q.y-1),B(oe,Je,Q.z,ot,Q.y-1))):p[1]<0&&ze?B(oe,Ce,Q.z,Q.x,Q.y+1):qe&&B(oe,Ce,Q.z,Q.x,Q.y-1);else{const Qe=te.visibleQuadrants;1&Qe&&(B(oe,Je,Q.z,ot,Q.y),qe&&(B(oe,Ce,Q.z,Q.x,Q.y-1),B(oe,Je,Q.z,ot,Q.y-1))),2&Qe&&(B(oe,lt,Q.z,rt,Q.y),qe&&(B(oe,Ce,Q.z,Q.x,Q.y-1),B(oe,lt,Q.z,rt,Q.y-1))),4&Qe&&(B(oe,Je,Q.z,ot,Q.y),ze&&(B(oe,Ce,Q.z,Q.x,Q.y+1),B(oe,Je,Q.z,ot,Q.y+1))),8&Qe&&(B(oe,lt,Q.z,rt,Q.y),ze&&(B(oe,Ce,Q.z,Q.x,Q.y+1),B(oe,lt,Q.z,rt,Q.y+1)))}}const j=[];for(const K of x)x.some(te=>K.isChildOf(te))||j.push(K);if(x=j.filter(K=>!i.some(te=>!!(K.overscaledZ<u&&te.isChildOf(K))||K.equals(te)||K.isChildOf(te))),T){const K=1<<u,te=this.projection.name==="globe"?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),Q=[K*te.x,K*te.y],oe=4,Ce=oe*oe;x=x.filter(_e=>{const Ee=_e.canonical.x+.5-Q[0],Me=_e.canonical.y+.5-Q[1];return Ee*Ee+Me*Me<Ce})}return x}coveringTiles(i){let u=this.coveringZoomLevel(i);const p=u,x=this.elevation&&this.elevation.exaggeration(),S=x&&!i.isTerrainDEM,T=this.projection.name==="mercator";if(i.minzoom!==void 0&&u<i.minzoom)return[];i.maxzoom!==void 0&&u>i.maxzoom&&(u=i.maxzoom);const O=this.locationCoordinate(this.center),B=this.center.lat,j=1<<u,K=[j*O.x,j*O.y,0],te=this.projection.name==="globe",Q=!te,oe=r.cn.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,u,Q),Ce=te?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),_e=j*r.c6(1,this.center.lat),Ee=this._camera.position[2]/r.c6(1,this.center.lat),Me=[j*Ce.x,j*Ce.y,Ee*(Q?1:_e)],ze=te||x,qe=this.cameraToCenterDistance/i.tileSize*(i.roundZoom?1:.502),Je=this.isLODDisabled(!0)?u:0;let lt;if(this._elevation&&i.isTerrainDEM)lt=1e4*this._elevation.exaggeration();else if(this._elevation){const kt=this._elevation.getMinMaxForVisibleTiles();lt=kt?kt.max:this._centerAltitude}else lt=this._centerAltitude;const ot=i.isTerrainDEM?-lt:this._elevation?this._elevation.getMinElevationBelowMSL():0,rt=this.projection.isReprojectedInTileSpace?r.co(this):1,Qe=kt=>{const qt=new r.ac(kt.x+25e-6,kt.y,kt.z),_n=new r.ac(kt.x,kt.y+25e-6,kt.z),zn=kt.toLngLat(),un=qt.toLngLat(),On=_n.toLngLat(),er=this.locationCoordinate(zn),tr=this.locationCoordinate(un),Zn=this.locationCoordinate(On),mr=Math.hypot(tr.x-er.x,tr.y-er.y),yr=Math.hypot(Zn.x-er.x,Zn.y-er.y);return Math.sqrt(mr*yr)*rt/25e-6},ut=kt=>{const cn=lt,qt=ot;return{aabb:r.cr(this,j,0,0,0,kt,qt,cn,this.projection),zoom:0,x:0,y:0,minZ:qt,maxZ:cn,wrap:kt,fullyVisible:!1}},pt=[];let zt=[];const Vt=u,nn=i.reparseOverscaled?p:u,sn=(Ee-this._centerAltitude)*_e,wn=kt=>{if(!this._elevation||!kt.tileID||!T)return;const cn=this._elevation.getMinMaxForTile(kt.tileID),qt=kt.aabb;cn?(qt.min[2]=cn.min,qt.max[2]=cn.max,qt.center[2]=(qt.min[2]+qt.max[2])/2):(kt.shouldSplit=Kt(kt),kt.shouldSplit||(qt.min[2]=qt.max[2]=qt.center[2]=this._centerAltitude))},Pt=(kt,cn)=>{if(.707*cn<kt)return 1;const qt=cn/kt;return qt/(1.4144271570014144+(Math.pow(1.1,qt-1.4144271570014144+1)-1)/(1.1-1)-1)},Kt=kt=>{if(kt.zoom<Je)return!0;if(kt.zoom===Vt)return!1;if(kt.shouldSplit!=null)return kt.shouldSplit;const cn=kt.aabb.distanceX(Me),qt=kt.aabb.distanceY(Me);let _n=sn,zn=1;if(te){_n=kt.aabb.distanceZ(Me);const yr=Math.pow(2,kt.zoom),kr=r.aY((kt.y+1)/yr),Hr=r.aY(kt.y/yr),ti=Math.min(Math.max(B,kr),Hr),ji=r.cO(ti)/r.cO(B);if(zn=ti===B?1/Math.max(1,this._mercatorScaleRatio-.3):Math.min(1,ji/this._mercatorScaleRatio),this.zoom<=r.cL&&kt.zoom===Vt-1&&ji>=.9)return!0}else if(S&&(_n=kt.aabb.distanceZ(Me)*_e),this.projection.isReprojectedInTileSpace&&p<=5){const yr=Math.pow(2,kt.zoom),kr=Qe(new r.ac((kt.x+.5)/yr,(kt.y+.5)/yr));zn=kr>.85?1:kr}if(!T){const yr=Math.sqrt(cn*cn+qt*qt+_n*_n);let kr=(1<<Vt-kt.zoom)*qe*zn;return kr*=Pt(Math.max(_n,sn),yr),yr<kr}let un=Number.MAX_VALUE,On=0;const er=kt.aabb.getCorners(),tr=[];for(const yr of er){r.at(tr,yr,Me),te||(S?tr[2]*=_e:tr[2]=sn);const kr=r.bG(tr,this._camera.forward());kr<un&&(un=kr,On=Math.abs(tr[2]))}let Zn=(1<<Vt-kt.zoom)*qe*zn;if(Zn*=Pt(Math.max(On,sn),un),un<Zn)return!0;const mr=kt.aabb.closestPoint(K);return mr[0]===K[0]&&mr[1]===K[1]};if(this.renderWorldCopies)for(let kt=1;kt<=3;kt++)pt.push(ut(-kt)),pt.push(ut(kt));for(pt.push(ut(0));pt.length>0;){const kt=pt.pop(),cn=kt.x,qt=kt.y;let _n=kt.fullyVisible;const zn=()=>this.projection.name==="globe"&&(kt.y===0||kt.y===(1<<kt.zoom)-1);if(!_n){let un=ze?kt.aabb.intersects(oe):kt.aabb.intersectsFlat(oe);if(un===0&&zn()){const On=new r.cp(kt.zoom,cn,qt);un=r.cq(this,j,On,!0).intersects(oe)}if(un===0)continue;_n=un===2}if(kt.zoom!==Vt&&Kt(kt))for(let un=0;un<4;un++){const On=(cn<<1)+un%2,er=(qt<<1)+(un>>1),tr={aabb:T?kt.aabb.quadrant(un):r.cr(this,j,kt.zoom+1,On,er,kt.wrap,kt.minZ,kt.maxZ,this.projection),zoom:kt.zoom+1,x:On,y:er,wrap:kt.wrap,fullyVisible:_n,tileID:void 0,shouldSplit:void 0,minZ:kt.minZ,maxZ:kt.maxZ};S&&!te&&(tr.tileID=new r.aM(kt.zoom+1===Vt?nn:kt.zoom+1,kt.wrap,kt.zoom+1,On,er),wn(tr)),pt.push(tr)}else{const un=kt.zoom===Vt?nn:kt.zoom;if(i.minzoom&&i.minzoom>un)continue;let On=0;if(!_n){let mr=ze?kt.aabb.intersectsPrecise(oe):kt.aabb.intersectsPreciseFlat(oe);if(mr===0&&zn()){const yr=new r.cp(kt.zoom,cn,qt);mr=r.cq(this,j,yr,!0).intersectsPrecise(oe)}if(mr===0)continue;if(i.calculateQuadrantVisibility)if(oe.containsPoint(kt.aabb.center))On=15;else for(let yr=0;yr<4;yr++)kt.aabb.quadrant(yr).intersects(oe)!==0&&(On|=1<<yr)}const er=K[0]-(.5+cn+(kt.wrap<<kt.zoom))*(1<<u-kt.zoom),tr=K[1]-.5-qt,Zn=kt.tileID?kt.tileID:new r.aM(un,kt.wrap,kt.zoom,cn,qt);i.calculateQuadrantVisibility&&(Zn.visibleQuadrants=On),zt.push({tileID:Zn,distanceSq:er*er+tr*tr})}}if(this.fogCullDistSq){const kt=this.fogCullDistSq,cn=this.horizonLineFromTop();zt=zt.filter(qt=>{const _n=[0,0,0,1],zn=[r.aj,r.aj,0,1],un=this.calculateFogTileMatrix(qt.tileID.toUnwrapped());r.aA(_n,_n,un),r.aA(zn,zn,un);const On=r.cs([],_n,zn),er=r.ct([],_n,zn),tr=r.cM(On,er);if(tr===0)return!0;let Zn=!1;const mr=this._elevation;if(mr&&tr>kt&&cn!==0){const yr=this.calculateProjMatrix(qt.tileID.toUnwrapped());let kr;i.isTerrainDEM||(kr=mr.getMinMaxForTile(qt.tileID)),kr||(kr={min:ot,max:lt});const Hr=r.cu(this.rotation),ti=[Hr[0]*r.aj,Hr[1]*r.aj,kr.max];r.ad(ti,ti,yr),Zn=(1-ti[1])*this.height*.5<cn}return tr<kt||Zn})}return zt.sort((kt,cn)=>kt.distanceSq-cn.distanceSq).map(kt=>kt.tileID)}resize(i,u){this.width=i,this.height=u,this.pixelsToGLUnits=[2/i,-2/u],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(i){return Math.pow(2,i)}scaleZoom(i){return Math.log(i)/Math.LN2}project(i){const u=r.ay(i.lat,-85.051129,r.cv),p=this.projection.project(i.lng,u);return new r.P(p.x*this.worldSize,p.y*this.worldSize)}unproject(i){return this.projection.unproject(i.x/this.worldSize,i.y/this.worldSize)}get point(){return this.project(this.center)}get pointMerc(){return this.point._div(this.worldSize)}get pixelsPerMeterRatio(){return this.pixelsPerMeter/r.c6(1,this.center.lat)/this.worldSize}setLocationAtPoint(i,u){let p,x;const S=this.centerPoint;if(this.projection.name==="globe"){const O=this.worldSize;p=(u.x-S.x)/O,x=(u.y-S.y)/O}else{const O=this.pointCoordinate(u),B=this.pointCoordinate(S);p=O.x-B.x,x=O.y-B.y}const T=this.locationCoordinate(i);this.setLocation(new r.ac(T.x-p,T.y-x))}setLocation(i){this.center=this.coordinateLocation(i),this.projection.wrap&&(this.center=this.center.wrap())}locationPoint(i,u){return this.projection.locationPoint(this,i,u)}locationPoint3D(i,u){return this.projection.locationPoint(this,i,u,!0)}pointLocation(i){return this.coordinateLocation(this.pointCoordinate(i))}pointLocation3D(i,u){return this.coordinateLocation(this.pointCoordinate3D(i,u))}locationCoordinate(i,u){const p=u?r.c6(u,i.lat):void 0,x=this.projection.project(i.lng,i.lat);return new r.ac(x.x,x.y,p)}coordinateLocation(i){return this.projection.unproject(i.x,i.y)}pointRayIntersection(i,u){const p=u??this._centerAltitude,x=[i.x,i.y,0,1],S=[i.x,i.y,1,1];r.aA(x,x,this.pixelMatrixInverse),r.aA(S,S,this.pixelMatrixInverse);const T=S[3];r.cw(x,x,1/x[3]),r.cw(S,S,1/T);const O=x[2],B=S[2];return{p0:x,p1:S,t:O===B?0:(p-O)/(B-O)}}screenPointToMercatorRay(i){const u=[i.x,i.y,0,1],p=[i.x,i.y,1,1];return r.aA(u,u,this.pixelMatrixInverse),r.aA(p,p,this.pixelMatrixInverse),r.cw(u,u,1/u[3]),r.cw(p,p,1/p[3]),u[2]=r.c6(u[2],this._center.lat)*this.worldSize,p[2]=r.c6(p[2],this._center.lat)*this.worldSize,r.cw(u,u,1/this.worldSize),r.cw(p,p,1/this.worldSize),new r.av([u[0],u[1],u[2]],r.au([],r.at([],p,u)))}rayIntersectionCoordinate(i){const{p0:u,p1:p,t:x}=i,S=r.c6(u[2],this._center.lat),T=r.c6(p[2],this._center.lat);return new r.ac(r.ai(u[0],p[0],x)/this.worldSize,r.ai(u[1],p[1],x)/this.worldSize,r.ai(S,T,x))}pointCoordinate(i,u=this._centerAltitude){return this.projection.pointCoordinate(this,i.x,i.y,u)}pointCoordinate3D(i,u){if(!this.elevation)return this.pointCoordinate(i,u);let p=this.projection.pointCoordinate3D(this,i.x,i.y);if(p)return new r.ac(p[0],p[1],p[2]);let x=0,S=this.horizonLineFromTop();if(i.y>S)return this.pointCoordinate(i,u);const T=.02*S,O=i.clone();for(let B=0;B<10&&S-x>T;B++){O.y=r.ai(x,S,.66);const j=this.projection.pointCoordinate3D(this,O.x,O.y);j?(S=O.y,p=j):x=O.y}return p?new r.ac(p[0],p[1],p[2]):this.pointCoordinate(i)}isPointAboveHorizon(i){return this.projection.isPointAboveHorizon(this,i)}isPointOnSurface(i){if(i.y<0||i.y>this.height||i.x<0||i.x>this.width)return!1;if(this.elevation||this.zoom>=r.cx)return!this.isPointAboveHorizon(i);const u=this.pointCoordinate(i);return u.y>=0&&u.y<=1}_coordinatePoint(i,u){const p=u&&this.elevation?this.elevation.getAtPointOrZero(i,this._centerAltitude):this._centerAltitude,x=[i.x*this.worldSize,i.y*this.worldSize,p+i.toAltitude(),1];return r.aA(x,x,this.pixelMatrix),x[3]>0?new r.P(x[0]/x[3],x[1]/x[3]):new r.P(Number.MAX_VALUE,Number.MAX_VALUE)}_getBoundsNonRectangular(){const{top:i,left:u}=this._edgeInsets,p=this.height-this._edgeInsets.bottom,x=this.width-this._edgeInsets.right,S=this.pointLocation3D(new r.P(u,i)),T=this.pointLocation3D(new r.P(x,i)),O=this.pointLocation3D(new r.P(x,p)),B=this.pointLocation3D(new r.P(u,p));let j=Math.min(S.lng,T.lng,O.lng,B.lng),K=Math.max(S.lng,T.lng,O.lng,B.lng),te=Math.min(S.lat,T.lat,O.lat,B.lat),Q=Math.max(S.lat,T.lat,O.lat,B.lat);const oe=Math.pow(2,-this.zoom)/16*270,Ce=this.projection.name==="globe"?1:4,_e=(Ee,Me,ze,qe,Je)=>{const lt=(Ee+ze)/2,ot=(Me+qe)/2,rt=new r.P(lt,ot),{lng:Qe,lat:ut}=this.pointLocation3D(rt),pt=Math.max(0,j-Qe,te-ut,Qe-K,ut-Q);j=Math.min(j,Qe),K=Math.max(K,Qe),te=Math.min(te,ut),Q=Math.max(Q,ut),(Je<Ce||pt>oe)&&(_e(Ee,Me,lt,ot,Je+1),_e(lt,ot,ze,qe,Je+1))};if(_e(u,i,x,i,1),_e(x,i,x,p,1),_e(x,p,u,p,1),_e(u,p,u,i,1),this.projection.name==="globe"){const[Ee,Me]=r.cy(this);Ee?(Q=90,K=180,j=-180):Me&&(te=-90,K=180,j=-180)}return new r.aG(new r.cd(j,te),new r.cd(K,Q))}_getBoundsRectangular(i,u){const{top:p,left:x}=this._edgeInsets,S=this.height-this._edgeInsets.bottom,T=this.width-this._edgeInsets.right,O=new r.P(x,p),B=new r.P(T,p),j=new r.P(T,S),K=new r.P(x,S);let te=this.pointCoordinate(O,i),Q=this.pointCoordinate(B,i);const oe=this.pointCoordinate(j,u),Ce=this.pointCoordinate(K,u),_e=(Ee,Me)=>(Me.y-Ee.y)/(Me.x-Ee.x);return te.y>1&&Q.y>=0?te=new r.ac((1-Ce.y)/_e(Ce,te)+Ce.x,1):te.y<0&&Q.y<=1&&(te=new r.ac(-Ce.y/_e(Ce,te)+Ce.x,0)),Q.y>1&&te.y>=0?Q=new r.ac((1-oe.y)/_e(oe,Q)+oe.x,1):Q.y<0&&te.y<=1&&(Q=new r.ac(-oe.y/_e(oe,Q)+oe.x,0)),new r.aG().extend(this.coordinateLocation(te)).extend(this.coordinateLocation(Q)).extend(this.coordinateLocation(Ce)).extend(this.coordinateLocation(oe))}_getBoundsRectangularTerrain(){const i=this.elevation;if(!i.visibleDemTiles.length||i.isUsingMockSource())return this._getBoundsRectangular(0,0);const u=i.visibleDemTiles.reduce((p,x)=>{if(x.dem){const S=x.dem.tree;p.min=Math.min(p.min,S.minimums[0]),p.max=Math.max(p.max,S.maximums[0])}return p},{min:Number.MAX_VALUE,max:0});return this._getBoundsRectangular(u.min*i.exaggeration(),u.max*i.exaggeration())}getBounds(){return this.projection.name==="mercator"||this.projection.name==="equirectangular"?this._terrainEnabled()?this._getBoundsRectangularTerrain():this._getBoundsRectangular(0,0):this._getBoundsNonRectangular()}horizonLineFromTop(i=!0){const u=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))-this.centerOffset.y,p=this.height/2-u*(1-this._horizonShift);return i?Math.max(0,p):p}getMaxBounds(){return this.maxBounds}setMaxBounds(i){this.maxBounds=i,this.minLat=-85.051129,this.maxLat=r.cv,this.minLng=-180,this.maxLng=180,i&&(this.minLat=i.getSouth(),this.maxLat=i.getNorth(),this.minLng=i.getWest(),this.maxLng=i.getEast(),this.maxLng<this.minLng&&(this.maxLng+=360)),this.worldMinX=r.aD(this.minLng)*this.tileSize,this.worldMaxX=r.aD(this.maxLng)*this.tileSize,this.worldMinY=r.aH(this.maxLat)*this.tileSize,this.worldMaxY=r.aH(this.minLat)*this.tileSize,this._constrain()}calculatePosMatrix(i,u){return this.projection.createTileMatrix(this,u,i)}calculateDistanceTileData(i){const u=i.key,p=this._distanceTileDataCache;if(p[u])return p[u];const x=i.canonical,S=1/this.height,T=this.cameraWorldSize,O=T/this.zoomScale(x.z),B=(x.x+Math.pow(2,x.z)*i.wrap)*O,j=x.y*O,K=this.point;K.x*=T/this.worldSize,K.y*=T/this.worldSize;const te=this.angle,Q=Math.sin(-te),oe=-Math.cos(-te);return p[u]={bearing:[Q,oe],center:[(K.x-B)*S,(K.y-j)*S],scale:O/r.aj*S},p[u]}calculateFogTileMatrix(i){const u=i.key,p=this._fogTileMatrixCache;if(p[u])return p[u];const x=this.projection.createTileMatrix(this,this.cameraWorldSizeForFog,i);return r.az(x,this.worldToFogMatrix,x),p[u]=new Float32Array(x),p[u]}calculateProjMatrix(i,u=!1,p=!1){const x=i.key;let S;if(S=p?this._expandedProjMatrixCache:u?this._alignedProjMatrixCache:this._projMatrixCache,S[x])return S[x];const T=this.calculatePosMatrix(i,this.worldSize);let O;return O=this.projection.isReprojectedInTileSpace?this.mercatorMatrix:p?this.expandedFarZProjMatrix:u?this.alignedProjMatrix:this.projMatrix,r.az(T,O,T),S[x]=new Float32Array(T),S[x]}calculatePixelsToTileUnitsMatrix(i){const u=i.tileID.key,p=this._pixelsToTileUnitsCache;if(p[u])return p[u];const x=r.cz(i,this);return p[u]=x,p[u]}customLayerMatrix(){return this.mercatorMatrix.slice()}globeToMercatorMatrix(){if(this.projection.name==="globe"){const i=1/this.worldSize,u=r.bn([],[i,i,i]);return r.az(u,u,this.globeMatrix),u}}recenterOnTerrain(){if(!this._elevation||this.projection.name==="globe")return;const i=this._elevation;this._updateCameraState();const u=r.c6(1,this._center.lat)*this.worldSize,p=this._computeCameraPosition(u),x=this._camera.forward(),S=r.c6(1,this._center.lat);p[2]/=S,x[2]/=S,r.au(x,x);const T=i.raycast(p,x,i.exaggeration());if(T){const O=r.bE([],p,x,T),B=new r.ac(O[0],O[1],r.c6(O[2],r.aY(O[1]))),j=(B.z+r.ae([B.x-p[0],B.y-p[1],B.z-p[2]*S]))*this._pixelsPerMercatorPixel;this._seaLevelZoom=this._zoomFromMercatorZ(j),this._centerAltitude=B.toAltitude(),this._center=this.coordinateLocation(B),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCamera(i=!1){if(!this._elevation)return;const u=this._elevation,p=r.c6(1,this._center.lat)*this.worldSize,x=this._computeCameraPosition(p),S=u.getAtPointOrZero(new r.ac(...x)),T=this.pixelsPerMeter/this.worldSize*S,O=this._minimumHeightOverTerrain(),B=x[2]-T;if(B<=O)if(B<0||i){const j=this.locationCoordinate(this._center,this._centerAltitude),K=[x[0],x[1],j.z-x[2]],te=r.ae(K);K[2]-=(O-B)/this._pixelsPerMercatorPixel;const Q=r.ae(K);if(Q===0)return;r.bY(K,K,te/Q*this._pixelsPerMercatorPixel),this._camera.position=[x[0],x[1],j.z*this._pixelsPerMercatorPixel-K[2]],this._updateStateFromCamera()}else this._isCameraConstrained=!0}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const i=this.projection.name==="globe"||this.mercatorFromTransition;if(this.projection.isReprojectedInTileSpace||i){const Q=this.center;return Q.lat=r.ay(Q.lat,this.minLat,this.maxLat),(this.maxBounds||!this.renderWorldCopies&&!i)&&(Q.lng=r.ay(Q.lng,this.minLng,this.maxLng)),this.center=Q,void(this._constraining=!1)}const u=this._unmodified,{x:p,y:x}=this.point;let S=0,T=p,O=x;const B=this.width/2,j=this.height/2,K=this.worldMinY*this.scale,te=this.worldMaxY*this.scale;if(x-j<K&&(O=K+j),x+j>te&&(O=te-j),te-K<this.height&&(S=Math.max(S,this.height/(te-K)),O=(te+K)/2),this.maxBounds||!this._renderWorldCopies||!this.projection.wrap){const Q=this.worldMinX*this.scale,oe=this.worldMaxX*this.scale,Ce=this.worldSize/2-(Q+oe)/2;T=(p+Ce+this.worldSize)%this.worldSize-Ce,T-B<Q&&(T=Q+B),T+B>oe&&(T=oe-B),oe-Q<this.width&&(S=Math.max(S,this.width/(oe-Q)),T=(oe+Q)/2)}T===p&&O===x||this._allowWorldUnderZoom||(this.center=this.unproject(new r.P(T,O))),S&&!this._allowWorldUnderZoom&&(this.zoom+=this.scaleZoom(S)),this._constrainCamera(),this._unmodified=u,this._constraining=!1}_minZoomForBounds(){let i=Math.max(0,this.scaleZoom(Math.max(0,this.height)/(this.worldMaxY-this.worldMinY)));return this.maxBounds&&(i=Math.max(i,this.scaleZoom(this.width/(this.worldMaxX-this.worldMinX)))),i}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const i=this.centerOffset,u=this.projection.name==="globe",p=this.pixelsPerMeter;this.projection.name==="globe"&&(this._mercatorScaleRatio=r.c6(1,this.center.lat)/r.c6(1,r.cP));const x=r.cA(this.projection,this.zoom,this.width,this.height,1024);this._pixelsPerMercatorPixel=this.projection.pixelSpaceConversion(this.center.lat,this.worldSize,x),this.cameraToCenterDistance=.5/Math.tan(.5*this._fov)*this.height*this._pixelsPerMercatorPixel,this._updateCameraState(),this._farZ=this.projection.farthestPixelDistance(this),this._nearZ=this.height/50;const S=this.projection.zAxisUnit==="meters"?p:1,T=this._camera.getWorldToCamera(this.worldSize,S);let O;const B=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,this._farZ);if(B[8]=2*-i.x/this.width,B[9]=2*i.y/this.height,this.isOrthographic){let ut=.5*this.height/Math.tan(this._fov/2)*1*Math.tan(.5*this._fov),pt=ut*this.aspect,zt=-pt,Vt=-ut;pt-=i.x,zt-=i.x,ut+=i.y,Vt+=i.y,O=this._camera.getCameraToClipOrthographic(zt,pt,Vt,ut,this._nearZ,this._farZ),((nn,sn,wn,Pt)=>{for(let Kt=0;Kt<16;Kt++)nn[Kt]=r.ai(sn[Kt],wn[Kt],Pt)})(O,O,B,r.cN(this.pitch>=bo?1:this.pitch/bo))}else O=B;const j=r.cB([],B,T);let K=r.cB([],O,T);if(this.projection.isReprojectedInTileSpace){const ut=this.locationCoordinate(this.center),pt=r.bx([]);r.bo(pt,pt,[ut.x*this.worldSize,ut.y*this.worldSize,0]),r.az(pt,pt,r.cC(this)),r.bo(pt,pt,[-ut.x*this.worldSize,-ut.y*this.worldSize,0]),r.az(K,K,pt),r.az(j,j,pt),this.inverseAdjustmentMatrix=r.cD(this)}else this.inverseAdjustmentMatrix=[1,0,0,1];if(this.mercatorMatrix=r.cE([],K,[this.worldSize,this.worldSize,this.worldSize/S,1]),this.projMatrix=K,this.invProjMatrix=r.bi(new Float64Array(16),this.projMatrix),u){const ut=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,1/0);ut[8]=2*-i.x/this.width,ut[9]=2*i.y/this.height,this.expandedFarZProjMatrix=r.cB([],ut,T)}else this.expandedFarZProjMatrix=this.projMatrix;const te=r.bi([],O);this.frustumCorners=r.cF.fromInvProjectionMatrix(te,this.horizonLineFromTop(),this.height),this.cameraFrustum=r.cn.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,0,!u);const Q=new Float32Array(16);r.bx(Q),r.cE(Q,Q,[1,-1,1]),r.cG(Q,Q,this._pitch),r.by(Q,Q,this.angle);const oe=r.c4(new Float32Array(16),this._fov,this.width/this.height,this._nearZ,this._farZ);this.starsProjMatrix=r.bw(oe);const Ce=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;oe[8]=2*-i.x/this.width,oe[9]=2*(i.y+Ce)/this.height,this.skyboxMatrix=r.az(Q,oe,Q);const _e=this.point,Ee=_e.x,Me=_e.y,ze=this.width%2/2,qe=this.height%2/2,Je=Math.cos(this.angle),lt=Math.sin(this.angle),ot=Ee-Math.round(Ee)+Je*ze+lt*qe,rt=Me-Math.round(Me)+Je*qe+lt*ze,Qe=new Float64Array(K);if(r.bo(Qe,Qe,[ot>.5?ot-1:ot,rt>.5?rt-1:rt,0]),this.alignedProjMatrix=Qe,K=r.bz(),r.cE(K,K,[this.width/2,-this.height/2,1]),r.bo(K,K,[1,-1,0]),this.labelPlaneMatrix=K,K=r.bz(),r.cE(K,K,[1,-1,1]),r.bo(K,K,[-1,-1,0]),r.cE(K,K,[2/this.width,2/this.height,1]),this.glCoordMatrix=K,this.pixelMatrix=r.az(new Float64Array(16),this.labelPlaneMatrix,j),this._calcFogMatrices(),this._distanceTileDataCache={},K=r.bi(new Float64Array(16),this.pixelMatrix),!K)throw new Error("failed to invert matrix");if(this.pixelMatrixInverse=K,this.projection.name==="globe"||this.mercatorFromTransition){this.globeMatrix=r.cH(this);const ut=[this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]];this.globeCenterInViewSpace=r.ad(ut,ut,T),this.globeRadius=this.worldSize/2/Math.PI-1}else this.globeMatrix=K;this._projMatrixCache={},this._alignedProjMatrixCache={},this._pixelsToTileUnitsCache={},this._expandedProjMatrixCache={}}_calcFogMatrices(){this._fogTileMatrixCache={};const i=this.cameraWorldSizeForFog,u=this.cameraPixelsPerMeter,p=this._camera.position,x=1/this.height/this._pixelsPerMercatorPixel,S=[i,i,u];r.bY(S,S,x),r.bY(p,p,-1),r.cI(p,p,S);const T=r.bz();r.bo(T,T,p),r.cE(T,T,S),this.mercatorFogMatrix=T,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(i,u,x)}_computeCameraPosition(i){const u=(i=i||this.pixelsPerMeter)/this.pixelsPerMeter,p=this._camera.forward(),x=this.point,S=this._mercatorZfromZoom(this._seaLevelZoom?this._seaLevelZoom:this._zoom)*u-i/this.worldSize*this._centerAltitude;return[x.x/this.worldSize-p[0]*S,x.y/this.worldSize-p[1]*S,i/this.worldSize*this._centerAltitude-p[2]*S]}_updateCameraState(){this.height&&(this._camera.setPitchBearing(this._pitch,this.angle),this._camera.position=this._computeCameraPosition())}_translateCameraConstrained(i){const u=this._maxCameraBoundsDistance()*Math.cos(this._pitch),p=this._camera.position[2],x=i[2];let S=1;this.projection.wrap&&(this.center=this.center.wrap()),x>0&&(S=Math.min((u-p)/x,1)),this._camera.position=r.bE([],this._camera.position,i,S),this._updateStateFromCamera()}_updateStateFromCamera(){const i=this._camera.position,u=this._camera.forward(),{pitch:p,bearing:x}=this._camera.getPitchBearing(),S=r.c6(this._centerAltitude,this.center.lat)*this._pixelsPerMercatorPixel,T=this._mercatorZfromZoom(this._maxZoom)*Math.cos(r.al(this._maxPitch)),O=Math.max((i[2]-S)/Math.cos(p),T),B=this._zoomFromMercatorZ(O);r.bE(i,i,u,O),this._pitch=r.ay(p,r.al(this.minPitch),r.al(this.maxPitch)),this.angle=r.bX(x,-Math.PI,Math.PI),this._setZoom(r.ay(B,this._minZoom,this._maxZoom)),this._updateSeaLevelZoom(),this._center=this.coordinateLocation(new r.ac(i[0],i[1],i[2])),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(i){return Math.pow(2,i)*this.tileSize}_mercatorZfromZoom(i){return this.cameraToCenterDistance/this._worldSizeFromZoom(i)}_minimumHeightOverTerrain(){const i=Math.min(this._seaLevelZoom!=null?this._seaLevelZoom:this._zoom,this._maxZoom)+4;return this._mercatorZfromZoom(i)}_zoomFromMercatorZ(i){return this.scaleZoom(this.cameraToCenterDistance/(Math.max(0,i)*this.tileSize))}zoomFromMercatorZAdjusted(i){let u=0,p=r.cx,x=0,S=1/0;for(;p-u>1e-6&&p>u;){const T=u+.5*(p-u),O=this.tileSize*Math.pow(2,T),B=this.getCameraToCenterDistance(this.projection,T,O),j=this.scaleZoom(B/(Math.max(0,i)*this.tileSize)),K=Math.abs(T-j);K<S&&(S=K,x=T),T<j?u=T:p=T}return x}_terrainEnabled(){return!(!this._elevation||!this.projection.supportsTerrain&&(r.w("Terrain is not yet supported with alternate projections. Use mercator or globe to enable terrain."),1))}anyCornerOffEdge(i,u){const p=Math.min(i.x,u.x),x=Math.max(i.x,u.x),S=Math.min(i.y,u.y),T=Math.max(i.y,u.y);if(S<this.horizonLineFromTop(!1))return!0;if(this.projection.name!=="mercator")return!1;const O=[new r.P(p,S),new r.P(x,T),new r.P(p,T),new r.P(x,S)],B=this.renderWorldCopies?-3:0,j=this.renderWorldCopies?4:1;for(const K of O){const te=this.pointRayIntersection(K);if(te.t<0)return!0;const Q=this.rayIntersectionCoordinate(te);if(Q.x<B||Q.y<0||Q.x>j||Q.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+r.cJ(this.fovAboveCenter)>88||this.anyCornerOffEdge(new r.P(0,0),new r.P(this.width,this.height))}zoomDeltaToMovement(i,u){const p=r.ae(r.at([],this._camera.position,i)),x=this._zoomFromMercatorZ(p)+u;return p-this._mercatorZfromZoom(x)}getCameraPoint(){if(this.projection.name==="globe"){const i=function([u,p,x],S){const T=[u,p,x,1];r.aA(T,T,S);const O=T[3]=Math.max(T[3],1e-6);return T[0]/=O,T[1]/=O,T[2]/=O,T}([this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]],this.pixelMatrix);return new r.P(i[0],i[1])}{const i=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new r.P(0,i))}}getCameraToCenterDistance(i,u=this.zoom,p=this.worldSize){const x=r.cA(i,u,this.width,this.height,1024),S=i.pixelSpaceConversion(this.center.lat,p,x);let T=.5/Math.tan(.5*this._fov)*this.height*S;return this.isOrthographic&&(T=r.ai(1,T,r.cN(this.pitch>=bo?1:this.pitch/bo))),T}getWorldToCameraMatrix(){const i=this._camera.getWorldToCamera(this.worldSize,this.projection.zAxisUnit==="meters"?this.pixelsPerMeter:1);return this.projection.name==="globe"&&r.az(i,i,this.globeMatrix),i}getFrustum(i){return r.cn.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,i,this.projection.zAxisUnit==="meters")}}const Tl=(f,i)=>{if(i>0&&f.terrain&&r.w("Cutoff is currently disabled on terrain"),i<=0||f.terrain)return{shouldRenderCutoff:!1,uniformValues:{u_cutoff_params:[0,0,0,1]}};const u=f.transform,p=Math.max(Math.abs(u._zoom-(f.minCutoffZoom-1)),1),x=u.isLODDisabled(!1)?r.af(60,45,u.pitch):r.af(30,15,u.pitch),S=u._farZ-u._nearZ,T=i*u.height,O=((1-(B=x))*u.cameraToCenterDistance+B*(u._farZ+T))*p;var B;return{shouldRenderCutoff:x<1,uniformValues:{u_cutoff_params:[u._nearZ,u._farZ,(O-u._nearZ)/S,(O-T-u._nearZ)/S]}}},Oo={cascadeCount:2,normalOffset:3,shadowMapResolution:2048};class qu{constructor(i,u){this.aabb=i,this.lastCascade=u}}class v0{add(i,u){const p=this.receivers[i.key];p!==void 0?(p.aabb.min[0]=Math.min(p.aabb.min[0],u.min[0]),p.aabb.min[1]=Math.min(p.aabb.min[1],u.min[1]),p.aabb.min[2]=Math.min(p.aabb.min[2],u.min[2]),p.aabb.max[0]=Math.max(p.aabb.max[0],u.max[0]),p.aabb.max[1]=Math.max(p.aabb.max[1],u.max[1]),p.aabb.max[2]=Math.max(p.aabb.max[2],u.max[2])):this.receivers[i.key]=new qu(u,null)}clear(){this.receivers={}}get(i){return this.receivers[i.key]}computeRequiredCascades(i,u,p){const x=r.cW.fromPoints(i.points);let S=0;for(const T in this.receivers){const O=this.receivers[T];if(!O||!x.intersectsAabb(O.aabb))continue;O.aabb.min=x.closestPoint(O.aabb.min),O.aabb.max=x.closestPoint(O.aabb.max);const B=O.aabb.getCorners();for(let j=0;j<p.length;j++){let K=!0;for(const te of B){const Q=[te[0]*u,te[1]*u,te[2]];if(r.ad(Q,Q,p[j].matrix),Q[0]<-1||Q[0]>1||Q[1]<-1||Q[1]>1){K=!1;break}}if(O.lastCascade=j,S=Math.max(S,j),K)break}}return S+1}}class nm{constructor(i){this.painter=i,this._enabled=!1,this._shadowLayerCount=0,this._numCascadesToRender=0,this._cascades=[],this._groundShadowTiles=[],this._receivers=new v0,this._depthMode=new Jn(i.context.gl.LEQUAL,Jn.ReadWrite,[0,1]),this._uniformValues={u_light_matrix_0:new Float32Array(16),u_light_matrix_1:new Float32Array(16),u_shadow_intensity:0,u_fade_range:[0,0],u_shadow_normal_offset:[1,1,1],u_shadow_texel_size:1,u_shadow_map_resolution:1,u_shadow_direction:[0,0,1],u_shadow_bias:[36e-5,.0012,.012],u_shadowmap_0:0,u_shadowmap_1:0},this._forceDisable=!1,this.useNormalOffset=!1,i.tp.registerParameter(this,["Shadows"],"_forceDisable",{label:"forceDisable"},()=>{this.painter.style.map.triggerRepaint()}),i.tp.registerParameter(Oo,["Shadows"],"cascadeCount",{min:1,max:2,step:1}),i.tp.registerParameter(Oo,["Shadows"],"normalOffset",{min:0,max:10,step:.05}),i.tp.registerParameter(Oo,["Shadows"],"shadowMapResolution",{min:32,max:2048,step:32}),i.tp.registerBinding(this,["Shadows"],"_numCascadesToRender",{readonly:!0,label:"numCascadesToRender"})}destroy(){for(const i of this._cascades)i.texture.destroy(),i.framebuffer.destroy();this._cascades=[]}updateShadowParameters(i,u){const p=this.painter;if(this._enabled=!1,this._shadowLayerCount=0,this._receivers.clear(),!u||!u.properties)return;const x=u.properties.get("shadow-intensity");if(!u.shadowsEnabled()||x<=0||(this._shadowLayerCount=p.style.order.reduce((Ce,_e)=>{const Ee=p.style._mergedLayers[_e];return Ce+(Ee.hasShadowPass()&&!Ee.isHidden(i.zoom)?1:0)},0),this._enabled=this._shadowLayerCount>0,!this.enabled))return;const S=p.context,T=Oo.shadowMapResolution,O=Oo.shadowMapResolution;if(this._cascades.length===0||Oo.shadowMapResolution!==this._cascades[0].texture.size[0]){this._cascades=[];for(let Ce=0;Ce<Oo.cascadeCount;++Ce){const _e=p._shadowMapDebug,Ee=S.gl,Me=S.createFramebuffer(T,O,_e,"texture"),ze=new r.T(S,{width:T,height:O,data:null},Ee.DEPTH_COMPONENT16);if(Me.depthAttachment.set(ze.texture),_e){const qe=new r.T(S,{width:T,height:O,data:null},Ee.RGBA8);Me.colorAttachment.set(qe.texture)}this._cascades.push({framebuffer:Me,texture:ze,matrix:[],far:0,boundingSphereRadius:0,frustum:new r.cn,scale:0})}}this.shadowDirection=$c(u);let B=0;if(i.elevation){const Ce=i.elevation,_e=[1e4,-1e4];Ce.visibleDemTiles.filter(Ee=>Ee.dem).forEach(Ee=>{const Me=Ee.dem.tree;_e[0]=Math.min(_e[0],Me.minimums[0]),_e[1]=Math.max(_e[1],Me.maximums[0])}),_e[0]!==1e4&&(B=(_e[1]-_e[0])*Ce.exaggeration())}const j=1.5*i.cameraToCenterDistance,K=3*j,te=new Float64Array(16);for(let Ce=0;Ce<this._cascades.length;++Ce){const _e=this._cascades[Ce];let Ee=i.height/50,Me=1;Oo.cascadeCount===1?Me=K:Ce===0?Me=j:(Ee=j,Me=K);const[ze,qe]=ul(i,this.shadowDirection,Ee,Me,Oo.shadowMapResolution,B);_e.scale=i.scale,_e.matrix=ze,_e.boundingSphereRadius=qe,r.bi(te,_e.matrix),_e.frustum=r.cn.fromInvProjectionMatrix(te,1,0,!0),_e.far=Me}const Q=this._cascades.length-1;this._uniformValues.u_fade_range=[.75*this._cascades[Q].far,this._cascades[Q].far],this._uniformValues.u_shadow_intensity=x,this._uniformValues.u_shadow_direction=[this.shadowDirection[0],this.shadowDirection[1],this.shadowDirection[2]],this._uniformValues.u_shadow_texel_size=1/Oo.shadowMapResolution,this._uniformValues.u_shadow_map_resolution=Oo.shadowMapResolution,this._uniformValues.u_shadowmap_0=Yo.ShadowMap0,this._uniformValues.u_shadowmap_1=Yo.ShadowMap0+1,this._groundShadowTiles=p.transform.coveringTiles({tileSize:512,renderWorldCopies:!0});const oe=p.transform.elevation;for(const Ce of this._groundShadowTiles){let _e={min:0,max:0};if(oe){const Ee=oe.getMinMaxForTile(Ce);Ee&&(_e=Ee)}this.addShadowReceiver(Ce.toUnwrapped(),_e.min,_e.max)}}get enabled(){return this._enabled&&!this._forceDisable}set enabled(i){this._enabled=i}drawShadowPass(i,u){if(!this.enabled)return;const p=this.painter,x=p.context;this._numCascadesToRender=this._receivers.computeRequiredCascades(p.transform.getFrustum(0),p.transform.worldSize,this._cascades),x.viewport.set([0,0,Oo.shadowMapResolution,Oo.shadowMapResolution]);for(let S=0;S<this._numCascadesToRender;++S){p.currentShadowCascade=S,x.bindFramebuffer.set(this._cascades[S].framebuffer.framebuffer),x.clear({color:r.am.white,depth:1});for(const T of i.order){const O=i._mergedLayers[T];if(!O.hasShadowPass()||O.isHidden(p.transform.zoom))continue;const B=i.getLayerSourceCache(O),j=B?u[B.id]:void 0;(O.type==="model"||j&&j.length)&&p.renderLayer(p,B,O,j)}}p.currentShadowCascade=0}drawGroundShadows(){if(!this.enabled)return;const i=this.painter,u=i.style,p=i.context,x=p.gl,S=u.directionalLight,T=u.ambientLight;if(!S||!T)return;const O=[],B=Tl(i,i.longestCutoffRange);B.shouldRenderCutoff&&O.push("RENDER_CUTOFF"),O.push("RENDER_SHADOWS","DEPTH_TEXTURE"),this.useNormalOffset&&O.push("NORMAL_OFFSET");const j=Wu(u,S,T),K=new Jn(x.LEQUAL,Jn.ReadOnly,i.depthRangeFor3D),te=new Vr({func:x.EQUAL,mask:255},0,255,x.KEEP,x.KEEP,x.KEEP);for(const Q of this._groundShadowTiles){const oe=Q.toUnwrapped(),Ce=i.isTileAffectedByFog(Q),_e=i.getOrCreateProgram("groundShadow",{defines:O,overrideFog:Ce});this.setupShadows(oe,_e),i.uploadCommonUniforms(p,_e,oe,null,B);const Ee={u_matrix:i.transform.calculateProjMatrix(oe),u_ground_shadow_factor:j};_e.draw(i,x.TRIANGLES,K,te,ai.multiply,Pr.disabled,Ee,"ground_shadow",i.tileExtentBuffer,i.quadTriangleIndexBuffer,i.tileExtentSegments,null,i.transform.zoom,null,null)}}getShadowPassColorMode(){return this.painter._shadowMapDebug?ai.unblended:ai.disabled}getShadowPassDepthMode(){return this._depthMode}getShadowCastingLayerCount(){return this._shadowLayerCount}calculateShadowPassMatrixFromTile(i){const u=this.painter.transform,p=u.calculatePosMatrix(i,u.worldSize);return r.az(p,this._cascades[this.painter.currentShadowCascade].matrix,p),Float32Array.from(p)}calculateShadowPassMatrixFromMatrix(i){return r.az(i,this._cascades[this.painter.currentShadowCascade].matrix,i),Float32Array.from(i)}setupShadows(i,u,p,x=0){if(!this.enabled)return;const S=this.painter.transform,T=this.painter.context,O=T.gl,B=this._uniformValues,j=new Float64Array(16),K=S.calculatePosMatrix(i,S.worldSize);for(let te=0;te<this._cascades.length;te++)r.az(j,this._cascades[te].matrix,K),B[te===0?"u_light_matrix_0":"u_light_matrix_1"]=Float32Array.from(j),T.activeTexture.set(O.TEXTURE0+Yo.ShadowMap0+te),this._cascades[te].texture.bindExtraParam(O.LINEAR,O.LINEAR,O.CLAMP_TO_EDGE,O.CLAMP_TO_EDGE,O.GREATER);if(this.useNormalOffset=!!p,this.useNormalOffset){const te=r.cU(i.canonical),Q=2/S.tileSize*r.aj/Oo.shadowMapResolution,oe=Q*this._cascades[0].boundingSphereRadius,Ce=Q*this._cascades[this._cascades.length-1].boundingSphereRadius,_e=(p==="vector-tile"?1:3)/Math.pow(2,x-i.canonical.z-(1-S.zoom+Math.floor(S.zoom)));B.u_shadow_normal_offset=[te,oe*_e,Ce*_e],B.u_shadow_bias=[6e-5,.0012,.012]}else B.u_shadow_bias=[36e-5,.0012,.012];u.setShadowUniformValues(T,B)}setupShadowsFromMatrix(i,u,p=!1){if(!this.enabled)return;const x=this.painter.context,S=x.gl,T=this._uniformValues,O=new Float64Array(16);for(let B=0;B<Oo.cascadeCount;B++)r.az(O,this._cascades[B].matrix,i),T[B===0?"u_light_matrix_0":"u_light_matrix_1"]=Float32Array.from(O),x.activeTexture.set(S.TEXTURE0+Yo.ShadowMap0+B),this._cascades[B].texture.bindExtraParam(S.LINEAR,S.LINEAR,S.CLAMP_TO_EDGE,S.CLAMP_TO_EDGE,S.GREATER);if(this.useNormalOffset=p,p){const B=Oo.normalOffset;T.u_shadow_normal_offset=[1,B,B],T.u_shadow_bias=[6e-5,.0012,.012]}else T.u_shadow_bias=[36e-5,.0012,.012];u.setShadowUniformValues(x,T)}getShadowUniformValues(){return this._uniformValues}getCurrentCascadeFrustum(){return this._cascades[this.painter.currentShadowCascade].frustum}computeSimplifiedTileShadowVolume(i,u,p,x){if(x[2]>=0)return{};const S=function(B,j,K){const te=K/(1<<B.canonical.z);return new r.cW([B.canonical.x*te+B.wrap*K,B.canonical.y*te+B.wrap*K,0],[(B.canonical.x+1)*te+B.wrap*K,(B.canonical.y+1)*te+B.wrap*K,j])}(i,u,p).getCorners(),T=u/-x[2];x[0]<0?(r.cV(S[0],S[0],[x[0]*T,0,0]),r.cV(S[3],S[3],[x[0]*T,0,0])):x[0]>0&&(r.cV(S[1],S[1],[x[0]*T,0,0]),r.cV(S[2],S[2],[x[0]*T,0,0])),x[1]<0?(r.cV(S[0],S[0],[0,x[1]*T,0]),r.cV(S[1],S[1],[0,x[1]*T,0])):x[1]>0&&(r.cV(S[2],S[2],[0,x[1]*T,0]),r.cV(S[3],S[3],[0,x[1]*T,0]));const O={};return O.vertices=S,O.planes=[Yl(S[1],S[0],S[4]),Yl(S[2],S[1],S[5]),Yl(S[3],S[2],S[6]),Yl(S[0],S[3],S[7])],O}addShadowReceiver(i,u,p){this._receivers.add(i,r.cW.fromTileIdAndHeight(i,u,p))}getMaxCascadeForTile(i){const u=this._receivers.get(i);return u&&u.lastCascade?u.lastCascade:0}}function Yl(f,i,u){const p=r.at([],u,i),x=r.at([],f,i),S=r.bF([],p,x),T=r.ae(S);return T===0?[0,0,1,0]:(r.bY(S,S,1/T),[S[0],S[1],S[2],-r.bG(S,i)])}function $c(f){const i=f.properties.get("direction"),u=r.cR(i.x,i.y,i.z);u[2]=r.ay(u[2],0,75);const p=r.cT([u[0],u[1],u[2]]);return r.cS(p.x,p.y,p.z)}function Wu(f,i,u){const p=i.properties.get("color-use-theme")==="none",x=i.properties.get("color"),S=i.properties.get("intensity"),T=i.properties.get("direction"),O=[T.x,T.y,T.z],B=u.properties.get("color-use-theme")==="none",j=u.properties.get("color"),K=u.properties.get("intensity"),te=Math.max(r.bG([0,0,1],O),0),Q=[0,0,0];r.bY(Q,j.toPremultipliedRenderColor(B?null:f.getLut(i.scope)).toArray01Linear().slice(0,3),K);const oe=[0,0,0];return r.bY(oe,x.toPremultipliedRenderColor(p?null:f.getLut(u.scope)).toArray01Linear().slice(0,3),te*S),r.cY([Q[0]>0?Q[0]/(Q[0]+oe[0]):0,Q[1]>0?Q[1]/(Q[1]+oe[1]):0,Q[2]>0?Q[2]/(Q[2]+oe[2]):0])}function ul(f,i,u,p,x,S){const T=f.zoom,O=f.scale,B=f.worldSize,j=1/B,K=f.aspect,te=Math.sqrt(1+K*K)*Math.tan(.5*f.fovX),Q=te*te,oe=p-u,Ce=p+u;let _e,Ee;Q>oe/Ce?(_e=p,Ee=p*te):(_e=.5*Ce*(1+Q),Ee=.5*Math.sqrt(oe*oe+2*(p*p+u*u)*Q+Ce*Ce*Q*Q));const Me=f.projection.pixelsPerMeter(f.center.lat,B),ze=f._camera.getCameraToWorldMercator(),qe=[0,0,-_e*j];r.ad(qe,qe,ze);let Je=Ee*j;const lt=f._edgeInsets;if(!(lt.left===0&&lt.top===0&&lt.right===0&&lt.bottom===0||lt.left===lt.right&&lt.top===lt.bottom)){const _n=f._camera.getWorldToCamera(f.worldSize,f.projection.zAxisUnit==="meters"?Me:1),zn=f._camera.getCameraToClipPerspective(f._fov,f.width/f.height,u,p);zn[8]=2*-f.centerOffset.x/f.width,zn[9]=2*f.centerOffset.y/f.height;const un=new Float64Array(16);r.cB(un,zn,_n);const On=new Float64Array(16);r.bi(On,un);const er=r.cn.fromInvProjectionMatrix(On,B,T,!0);for(const tr of er.points){const Zn=((ot=tr)[0]/=O,ot[1]/=O,ot[2]=r.c6(ot[2],f._center.lat),ot);Je=Math.max(Je,r.bZ(r.cX([],qe,Zn)))}}var ot;Je*=x/(x-1);const rt=Math.acos(i[2]),Qe=Math.atan2(-i[0],-i[1]),ut=new Wa;ut.position=qe,ut.setPitchBearing(rt,Qe);const pt=ut.getWorldToCamera(B,Me),zt=Je*B,Vt=Math.min(f._mercatorZfromZoom(17)*B*-2,-2*zt),nn=ut.getCameraToClipOrthographic(-zt,zt,-zt,zt,Vt,(zt+S*Me)/i[2]),sn=new Float64Array(16);r.az(sn,nn,pt);const wn=r.cS(Math.floor(1e6*qe[0])/1e6*B,Math.floor(1e6*qe[1])/1e6*B,0),Pt=.5*x,Kt=[0,0,0];r.ad(Kt,wn,sn),r.bY(Kt,Kt,Pt);const kt=[Math.floor(Kt[0]),Math.floor(Kt[1]),Math.floor(Kt[2])],cn=[0,0,0];r.at(cn,Kt,kt),r.bY(cn,cn,-1/Pt);const qt=new Float64Array(16);return r.bx(qt),r.bo(qt,qt,cn),r.az(sn,qt,sn),[sn,zt]}class rm extends r.E{constructor(i){super(),this.requestManager=i,this.models={"":{}},this.modelUris={"":{}},this.modelByURL={},this.numModelsLoading={}}loadModel(i,u){return r.aS(this.requestManager.transformRequest(u,r.R.Model).url).then(p=>{if(!p)return;const x=r.aT(p),S=new r.aU(i,void 0,void 0,x);return S.computeBoundsAndApplyParent(),S}).catch(p=>{if(p&&p.status===404)return null;this.fire(new r.z(new Error(`Could not load model ${i} from ${u}: ${p.message}`)))})}load(i,u,p={forceReload:!1}){this.models[u]||(this.models[u]={});const x=Object.keys(i),S=[],T=[];for(const O of x){const B=i[O];this.hasURLBeenRequested(B)&&!p.forceReload||(this.modelByURL[B]={modelId:O,scope:u},S.push(this.loadModel(O,B)),T.push(O)),this.models[u][O]||(this.models[u][O]={model:null,numReferences:1})}this.numModelsLoading[u]=(this.numModelsLoading[u]||0)+T.length,Promise.allSettled(S).then(O=>{for(let B=0;B<O.length;B++){const{status:j}=O[B];if(j==="rejected")continue;const{value:K}=O[B];this.models[u][T[B]]||(this.models[u][T[B]]={model:null,numReferences:1}),this.models[u][T[B]].model=K}this.numModelsLoading[u]-=T.length,this.fire(new r.A("data",{dataType:"style"}))}).catch(O=>{this.fire(new r.z(new Error(`Could not load models: ${O.message}`)))})}isLoaded(){for(const i in this.numModelsLoading)if(this.numModelsLoading[i]>0)return!1;return!0}hasModel(i,u,p={exactIdMatch:!1}){return!!(p.exactIdMatch?this.getModel(i,u):this.getModelByURL(this.modelUris[u][i]))}getModel(i,u){return this.models[u]||(this.models[u]={}),this.models[u][i]?this.models[u][i].model:void 0}getModelByURL(i){if(!i)return null;const u=this.modelByURL[i];return u?this.models[u.scope][u.modelId].model:null}hasModelBeenAdded(i,u){return this.models[u]&&this.models[u][i]!==void 0}getModelURIs(i){return this.modelUris[i]||{}}addModel(i,u,p){this.models[p]||(this.models[p]={}),this.modelUris[p]||(this.modelUris[p]={});const x=this.requestManager.normalizeModelURL(u);if((this.hasModel(i,p,{exactIdMatch:!0})||this.hasModelBeenAdded(i,p))&&this.modelUris[p][i]===x)this.models[p][i].numReferences++;else if(this.hasURLBeenRequested(x)){const{scope:S,modelId:T}=this.modelByURL[x];this.models[S][T].numReferences++}else this.modelUris[p][i]=x,this.load({[i]:this.modelUris[p][i]},p)}addModelURLs(i,u){this.models[u]||(this.models[u]={}),this.modelUris[u]||(this.modelUris[u]={});const p=this.modelUris[u];for(const x in i)p[x]=this.requestManager.normalizeModelURL(i[x])}reloadModels(i){this.load(this.modelUris[i],i,{forceReload:!0})}addModelsFromBucket(i,u){this.models[u]||(this.models[u]={}),this.modelUris[u]||(this.modelUris[u]={});const p={};for(const x of i)this.hasModel(x,u,{exactIdMatch:!0})||this.hasURLBeenRequested(x)?this.models[u][x].numReferences++:this.modelUris[u][x]&&!this.hasURLBeenRequested(x)?p[x]=this.modelUris[u][x]:!this.hasURLBeenRequested(x)&&r.cZ(x,!1)&&(this.modelUris[u][x]=this.requestManager.normalizeModelURL(x),p[x]=this.modelUris[u][x]);this.load(p,u)}hasURLBeenRequested(i){return this.modelByURL[i]!==void 0}removeModel(i,u,p=!1){if(this.models[u]&&this.models[u][i]&&(this.models[u][i].numReferences--,this.models[u][i].numReferences===0)){const x=this.modelUris[u][i];p||delete this.modelUris[u][i],delete this.modelByURL[x];const S=this.models[u][i].model;if(!S)return;delete this.models[u][i],S.destroy()}}destroy(){for(const i of Object.keys(this.models))for(const u of Object.keys(this.models[i])){const p=this.models[i][u].model;delete this.models[i][u],p&&p.destroy()}this.models={"":{}},this.modelUris={"":{}},this.modelByURL={},this.numModelsLoading={}}listModels(i){return this.models[i]||(this.models[i]={}),Object.keys(this.models[i])}upload(i,u){this.models[u]||(this.models[u]={});for(const p in this.models[u])this.models[u][p].model&&this.models[u][p].model.upload(i.context)}}const zd=new r.a7({data:new r.a8(r.a5.colorTheme.data)}),ya={"mbx-indoor-active-floorplans":{default:["literal",[]]},"mbx-indoor-underground":{default:["literal",!1]},"mbx-indoor-loaded-levels":{default:["literal",[]]},"mbx-indoor-level-height":{default:["literal",{}]},"mbx-indoor-level-base":{default:["literal",{}]},"mbx-indoor-level-selected":{default:["literal",{}]},"mbx-indoor-level-overlapped":{default:["literal",{}]}};function Do(f){return f=f||{},Object.assign(f,ya)}class k extends r.E{constructor(i){super(),this.mergeFloors=!0,this._scope=void 0,this._queryFeatureSetId=void 0,this._buildingEntryFeatureSetId=void 0,this._selectedFloorplan=void 0,this._indoorData=void 0,this._floorplanStates={},r.aV(["_onLoad","_onMove","_checkFloorplanVisible"],this),this._map=i,this._checkFloorplanVisible(),this._map.on("load",this._onLoad),this._map.on("move",this._onMove)}destroy(){this._map.indoor.off("load",this._onLoad),this._map.indoor.off("move",this._onMove),this._map=void 0}_onLoad(){this._map.style.forEachFragmentStyle(i=>{i.stylesheet.indoor&&(this._queryFeatureSetId?this.fire(new r.z(new Error("Multiple indoor map styles detected, simultaneous usage is not allowed currently."))):(this._queryFeatureSetId=i.stylesheet.indoor.floorplanFeaturesetId,this._buildingEntryFeatureSetId=i.stylesheet.indoor.buildingFeaturesetId,this._scope=i.scope))}),this._queryFeatureSetId&&this._buildingEntryFeatureSetId&&this._map.addInteraction("mbx-indoor-buildingclick",{type:"click",target:{featuresetId:this._buildingEntryFeatureSetId,importId:this._scope},handler:i=>(i.feature&&i.feature.properties.floorplan&&this.selectFloorplan(i.feature.properties.floorplan),!0)}),this._checkFloorplanVisible()}_onMove(){this._checkFloorplanVisible()}_checkFloorplanVisible(){if(!this._queryFeatureSetId||!this._map.isStyleLoaded())return;const i=()=>{this._indoorData=void 0,this._selectedFloorplan=void 0,this._map.setConfigProperty(this._scope,"mbx-indoor-underground",!1),this._map.setConfigProperty(this._scope,"mbx-indoor-active-floorplans",["literal",[]]),this.fire(new r.A("floorplangone"))};if(this._map.transform.zoom<13)return void i();const u={target:{featuresetId:this._queryFeatureSetId,importId:this._scope}},p=this._map.transform.width,x=this._map.transform.height,S=p*(2/3),T=x*(2/3),O=.5*(p-S),B=.5*(x-T),j=[new r.P(O,B),new r.P(O+S,B+T)],K=this._map.queryRenderedFeatures(j,u);K.length>0?this._selectedFloorplan&&K[0].properties.id===this._selectedFloorplan.properties.id||(this._selectedFloorplan=K[0],this._floorplanSelected()):i()}_floorplanSelected(){this._indoorData=JSON.parse(this._selectedFloorplan.properties["indoor-data"]),this._indoorData.id=this._selectedFloorplan.properties.id,this._floorplanStates[this._indoorData.id]=this._floorplanStates[this._indoorData.id]||{},this._map.setConfigProperty(this._scope,"mbx-indoor-active-floorplans",["literal",[this._indoorData.id]]);const i=this._floorplanStates[this._indoorData.id].selectedBuilding,u=i?this._indoorData.buildings.find(O=>O.id===i):this._indoorData.buildings.length>0?this._indoorData.buildings[0]:null,p=this._floorplanStates[this._indoorData.id].selectedLevel,x=this._indoorData.levels.find(O=>O.id===p),S=this._indoorData.levels.find(O=>!(!u||!u.levels)&&Number(O.levelOrder)===0&&u.levels.includes(O.id)),T=x?x.id:S?S.id:void 0;this.fire(new r.A("floorplanselected",{buildings:this._indoorData.buildings,levels:this._indoorData.levels,selectedLevelId:T})),u&&this._buildingSelected(u,!1),T&&this._levelSelected(T)}_buildingSelected(i,u){if(!i||!i.id)return void console.warn("IndoorManager: Building or building id is undefined");u&&i.extent&&this._map.fitBounds(i.extent,{pitch:this._map.getPitch(),bearing:this._map.getBearing()}),this._floorplanStates[this._indoorData.id].selectedBuilding=i?i.id:void 0;const p=this._indoorData.levels.filter(x=>i.levels.includes(x.id));this.fire(new r.A("buildingselected",{buildingId:i.id,levels:p}))}_levelSelected(i){const u=this._indoorData.levels.find(p=>p.id===i);u?(this._updateLevels(u,!0),this.fire(new r.A("levelselected",{levelId:u.id}))):console.warn(`IndoorManager: Level with ID ${i} not found in the current floorplan.`)}_updateLevels(i,u){if(!i||!i.id)throw new Error("IndoorManager: Selected level or level ID is undefined");function p(j){const K=j.indexOf("/floor/");if(K===-1)return j;const te=K+7,Q=j.indexOf("/",te);return Q===-1?j.slice(te):j.slice(te,Q)}this._floorplanStates[this._indoorData.id].selectedLevel=i.id;const x=[],S={},T={},O={},B={};for(const j of this._indoorData.levels){if(x.push(j.id),S[j.id]=j.levelOrder>=0?3*Math.abs(j.levelOrder+1):3*Math.abs(j.levelOrder),T[j.id]=j.levelOrder>=0?3*j.levelOrder:0,this.mergeFloors){const K=p(i.id),te=p(j.id);O[j.id]=te===K?"true":"false"}else O[j.id]=j.id===i.id?"true":"false";B[j.id]=j.levelOrder<i.levelOrder?"true":"false"}this._map.setConfigProperty(this._scope,"mbx-indoor-loaded-levels",["literal",x]),this._map.setConfigProperty(this._scope,"mbx-indoor-level-height",["literal",S]),this._map.setConfigProperty(this._scope,"mbx-indoor-level-base",["literal",T]),this._map.setConfigProperty(this._scope,"mbx-indoor-level-selected",["literal",O]),this._map.setConfigProperty(this._scope,"mbx-indoor-level-overlapped",["literal",B]),this._map.setConfigProperty(this._scope,"mbx-indoor-underground",i.levelOrder<0)}selectFloorplan(i){const u={target:{featuresetId:this._queryFeatureSetId,importId:this._scope}},p=[new r.P(0,0),new r.P(this._map.transform.width,this._map.transform.height)],x=this._map.queryRenderedFeatures(p,u);if(x.length>0){for(const S of x)if(JSON.parse(S.properties["indoor-data"]).id===i){this._selectedFloorplan=S,this._floorplanSelected();break}}}selectBuilding(i){const u=this._indoorData.buildings.find(p=>p.id===i);this._buildingSelected(u,!0)}selectLevel(i){this._levelSelected(i)}}function g(f){if(!f.metadata||!f.metadata.content_area)return;const i=r.q.devicePixelRatio,{left:u,top:p,width:x,height:S}=f.metadata.content_area,T=u*i,O=p*i;return[T,O,T+x*i,O+S*i]}function v(f){if(f)return f.map(([i,u])=>[i*r.q.devicePixelRatio,u*r.q.devicePixelRatio])}class I{constructor(i,u,p){this.id=i,this.scope=u,this.sourceCache=p,this.pendingRequests=new Set,this.missingRequests=new Set}addPendingRequest(i){this.missingRequests.has(i.name)||this.pendingRequests.has(i.name)||this.pendingRequests.add(i.name)}hasPendingRequests(){return this.pendingRequests.size>0}resolvePendingRequests(){const i=new Map;if(!this.sourceCache.loaded())return i;const u=this.sourceCache.getVisibleCoordinates();if(u.length===0)return i;const p=this.sourceCache.getSource();if(!(p instanceof hu))return i;const x=u.map(T=>this.sourceCache.getTile(T)),S=p.getImages(x,Array.from(this.pendingRequests));for(const[T,O]of S)i.set(r.I.from({name:T,iconsetId:this.id}),O),this.pendingRequests.delete(T);for(const T of this.pendingRequests)this.missingRequests.add(T);return this.pendingRequests.clear(),i}}const H=(f,i)=>tt(f,i&&i.filter(u=>u.identifier!=="source.canvas")),ne=r.aF(ki,["addLayer","removeLayer","setLights","setPaintProperty","setLayoutProperty","setSlot","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog","setSnow","setRain","setProjection","setCamera","addImport","removeImport","updateImport","addIconset","removeIconset"]),Se=r.aF(ki,["setCenter","setZoom","setBearing","setPitch"]),Le=new Set(["background","sky","slot","custom"]),et={version:8,layers:[],sources:{}},Et={duration:300,delay:0};class tn extends r.E{constructor(i,u={}){super(),this.map=i,this.scope=u.scope||"",this.globalId=null,this.fragments=[],this.importDepth=u.importDepth||0,this.importsCache=u.importsCache||new Map,this.resolvedImports=u.resolvedImports||new Set,this.transition=r.h({},Et),this._buildingIndex=new Md(this),this.crossTileSymbolIndex=new sa,this._mergedOrder=[],this._drapedFirstOrder=[],this._mergedLayers={},this._mergedSourceCaches={},this._mergedOtherSourceCaches={},this._mergedSymbolSourceCaches={},this._clipLayerPresent=!1,this._has3DLayers=!1,this._hasCircleLayers=!1,this._hasSymbolLayers=!1,this._changes=u.styleChanges||new nt,this.dispatcher=u.dispatcher?u.dispatcher:new r.D(r.c$(),this),u.imageManager?this.imageManager=u.imageManager:(this.imageManager=new an(this.map._spriteFormat),this.imageManager.setEventedParent(this)),this.imageManager.addScope(this.scope),this.glyphManager=u.glyphManager?u.glyphManager:new r.d0(i._requestManager,u.localFontFamily?r.d1.all:u.localIdeographFontFamily?r.d1.ideographs:r.d1.none,u.localFontFamily||u.localIdeographFontFamily),u.modelManager?this.modelManager=u.modelManager:(this.modelManager=new rm(i._requestManager),this.modelManager.setEventedParent(this)),this._layers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this._loaded=!1,this._precompileDone=!1,this._shouldPrecompile=!1,this._availableImages=[],this._availableModels={},this._order=[],this._markersNeedUpdate=!1,this.options=u.configOptions?u.configOptions:new Map,this._configDependentLayers=u.configDependentLayers?u.configDependentLayers:new Set,this._config=u.config,this._styleColorTheme={lut:null,lutLoading:!1,lutLoadingCorrelationID:0,colorTheme:null,colorThemeOverride:u.colorThemeOverride},this._styleColorThemeForScope={},this._initialConfig=u.initialConfig,this.dispatcher.broadcast("setReferrer",r.d2());const p=this;this._rtlTextPluginCallback=tn.registerForPluginStateChange(x=>{p.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:x.pluginStatus,pluginURL:x.pluginURL},(S,T)=>{if(r.d3(S),T&&T.every(O=>O))for(const O in p._sourceCaches){const B=p._sourceCaches[O],j=B.getSource().type;j!=="vector"&&j!=="geojson"||B.reload()}})}),this.on("data",x=>{if(x.dataType!=="source"||x.sourceDataType!=="metadata")return;const S=this.getOwnSource(x.sourceId);if(S&&S.vectorLayerIds)for(const T in this._layers){const O=this._layers[T];O.source===S.id&&this._validateLayer(O)}})}load(i){return i?(typeof i=="string"?this.loadURL(i):this.loadJSON(i),this):this}_getGlobalId(i){if(!i)return null;if(typeof i=="string"){if(r.j(i))return i;const u=r.d4(i);if(!u.startsWith("http"))try{return new URL(u,location.href).toString()}catch{return u}return u}return`json://${r.d5(JSON.stringify(i))}`}_diffStyle(i,u,p){this.globalId=this._getGlobalId(i);const x=(S,T)=>{try{T(null,this.setState(S,p))}catch(O){T(O,!1)}};if(typeof i=="string"){const S=this.map._requestManager.normalizeStyleURL(i),T=this.map._requestManager.transformRequest(S,r.R.Style);r.n(T,(O,B)=>{O?this.fire(new r.z(O)):B&&x(B,u)})}else typeof i=="object"&&x(i,u)}loadURL(i,u={}){this.fire(new r.A("dataloading",{dataType:"style"}));const p=typeof u.validate=="boolean"?u.validate:!r.j(i);this.globalId=this._getGlobalId(i),i=this.map._requestManager.normalizeStyleURL(i,u.accessToken),this.resolvedImports.add(i);const x=this.importsCache.get(i);if(x)return this._load(x,p);const S=this.map._requestManager.transformRequest(i,r.R.Style);this._request=r.n(S,(T,O)=>{if(this._request=null,T)this.fire(new r.z(T));else if(O)return this.importsCache.set(i,O),this._load(O,p)})}loadJSON(i,u={}){this.fire(new r.A("dataloading",{dataType:"style"})),this.globalId=this._getGlobalId(i),this._request=r.q.frame(()=>{this._request=null,this._load(i,u.validate!==!1)})}loadEmpty(){this.fire(new r.A("dataloading",{dataType:"style"})),this._load(et,!1)}_loadImports(i,u,p){if(this.importDepth>=4)return r.w("Style doesn't support nesting deeper than 5"),Promise.resolve();const x=[];for(const S of i){const T=this._createFragmentStyle(S),O=new Promise(K=>{T.once("style.import.load",K),T.once("error",K)}).then(()=>this.mergeAll());if(x.push(O),this.resolvedImports.has(S.url)){T.loadEmpty();continue}const B=S.data||this.importsCache.get(S.url);B?(T.loadJSON(B,{validate:u}),this._isInternalStyle(B)&&(T.globalId=null)):S.url?T.loadURL(S.url,{validate:u}):T.loadEmpty();const j={style:T,id:S.id,config:S.config};if(p){const K=this.fragments.findIndex(({id:te})=>te===p);this.fragments=this.fragments.slice(0,K).concat(j).concat(this.fragments.slice(K))}else this.fragments.push(j)}return Promise.allSettled(x)}getImportGlobalIds(i=this,u=new Set){for(const p of i.fragments)p.style.globalId&&u.add(p.style.globalId),this.getImportGlobalIds(p.style,u);return[...u.values()]}_createFragmentStyle(i){const u=this.scope?r.C(i.id,this.scope):i.id;let p;const x=this._initialConfig&&this._initialConfig[u];(i.config||x)&&(p=r.h({},i.config,x));const S=new tn(this.map,{scope:u,styleChanges:this._changes,importDepth:this.importDepth+1,importsCache:this.importsCache,resolvedImports:new Set(this.resolvedImports),dispatcher:this.dispatcher,imageManager:this.imageManager,glyphManager:this.glyphManager,modelManager:this.modelManager,config:p,configOptions:this.options,colorThemeOverride:i["color-theme"],configDependentLayers:this._configDependentLayers});return S.setEventedParent(this.map,{style:S}),S}_reloadImports(){this.mergeAll(),this._updateMapProjection(),this.updateConfigDependencies(),this.map._triggerCameraUpdate(this.camera),this.dispatcher.broadcast("setLayers",{layers:this._serializeLayers(this._order),scope:this.scope,options:this.options}),this._shouldPrecompile=this.map._precompilePrograms&&this.isRootStyle()}_isInternalStyle(i){return this.isRootStyle()&&(i.fragment||!!i.schema&&i.fragment!==!1)}_load(i,u){const p=i.indoor?Do(i.schema):i.schema;if(this._isInternalStyle(i)){const T=r.h({},et,{imports:[{id:"basemap",data:i,url:""}]});return void this._load(T,u)}if(this.updateConfig(this._config,p),u&&H(this,ds(i)))return;this._loaded=!0,this.stylesheet=r.d6(i);const x=()=>{for(const j in i.sources)this.addSource(j,i.sources[j],{validate:!1,isInitialLoad:!0});if(i.iconsets)for(const j in i.iconsets)this.addIconset(j,i.iconsets[j]);i.sprite?this._loadIconset(i.sprite):(this.imageManager.setLoaded(!0,this.scope),this.dispatcher.broadcast("spriteLoaded",{scope:this.scope,isLoaded:!0})),this.setGlyphsUrl(i.glyphs);const T=Ad(this.stylesheet.layers);if(this._order=T.map(j=>j.id),this.stylesheet.light&&r.w("The `light` root property is deprecated, prefer using `lights` with `flat` light type instead."),this.stylesheet.lights)if(this.stylesheet.lights.length===1&&this.stylesheet.lights[0].type==="flat"){const j=this.stylesheet.lights[0];this.light=new $t(j.properties,j.id)}else this.setLights(this.stylesheet.lights);this.light||(this.light=new $t(this.stylesheet.light)),this._layers={};for(const j of T){const K=r.db(j,this.scope,this._styleColorTheme.lut,this.options);K.configDependencies.size!==0&&this._configDependentLayers.add(K.fqid),K.setEventedParent(this,{layer:{id:K.id}}),this._layers[K.id]=K;const te=this.getOwnLayerSourceCache(K),Q=!!this.directionalLight&&this.directionalLight.shadowsEnabled();te&&K.canCastShadows()&&Q&&(te.castsShadows=!0)}this.stylesheet.featuresets&&this.setFeaturesetSelectors(this.stylesheet.featuresets),this.stylesheet.models&&this.addModelURLs(this.stylesheet.models);const O=this.stylesheet.terrain;O&&(this.checkCanvasFingerprintNoise(),this.disableElevatedTerrain||this.terrainSetForDrapingOnly()||this._createTerrain(O,1)),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this.stylesheet.snow&&this._createSnow(this.stylesheet.snow),this.stylesheet.rain&&this._createRain(this.stylesheet.rain),this.stylesheet.transition&&this.setTransition(this.stylesheet.transition),this.fire(new r.A("data",{dataType:"style"}));const B=this.isRootStyle();i.imports?this._loadImports(i.imports,u).then(()=>{this._reloadImports(),this.fire(new r.A(B?"style.load":"style.import.load"))}).catch(j=>{this.fire(new r.z(new Error("Failed to load imports",j))),this.fire(new r.A(B?"style.load":"style.import.load"))}):(this._reloadImports(),this.fire(new r.A(B?"style.load":"style.import.load")))};this._styleColorTheme.colorTheme=this.stylesheet["color-theme"];const S=this._styleColorTheme.colorThemeOverride?this._styleColorTheme.colorThemeOverride:this._styleColorTheme.colorTheme;if(S){const T=this._evaluateColorThemeData(S);this._loadColorTheme(T).then(()=>{x()}).catch(O=>{r.w(`Couldn't load color theme from the stylesheet: ${O}`),x()})}else this._styleColorTheme.lut=null,x()}isRootStyle(){return this.importDepth===0}mergeAll(){let i,u,p,x,S,T,O,B,j,K;const te={};this.terrain&&this.terrain.scope!==this.scope&&delete this.terrain,this.forEachFragmentStyle(Q=>{if(Q.stylesheet){if(Q.light!=null&&(i=Q.light),Q.stylesheet.lights)for(const oe of Q.stylesheet.lights)oe.type==="ambient"&&Q.ambientLight!=null&&(u=Q.ambientLight),oe.type==="directional"&&Q.directionalLight!=null&&(p=Q.directionalLight);x=this._prioritizeTerrain(x,Q.terrain,Q.stylesheet.terrain),Q.stylesheet.fog&&Q.fog!=null&&(S=Q.fog),Q.stylesheet.snow&&Q.snow!=null&&(T=Q.snow),Q.stylesheet.rain&&Q.rain!=null&&(O=Q.rain),Q.stylesheet.camera!=null&&(K=Q.stylesheet.camera),Q.stylesheet.projection!=null&&(B=Q.stylesheet.projection),Q.stylesheet.transition!=null&&(j=Q.stylesheet.transition),te[Q.scope]=Q._styleColorTheme}}),this.light=i,this.ambientLight=u,this.directionalLight=p,this.fog=S,this.snow=T,this.rain=O,this._styleColorThemeForScope=te,x===null?delete this.terrain:this.terrain=x,this.camera=K||{"camera-projection":"perspective"},this.projection=B||{name:"mercator"},this.transition=r.h({},Et,j),this.mergeSources(),this.mergeLayers()}forEachFragmentStyle(i){const u=p=>{for(const x of p.fragments)u(x.style);i(p)};u(this)}_prioritizeTerrain(i,u,p){const x=i&&i.drapeRenderMode===0;return p===null?u&&u.drapeRenderMode===0?u:x?i:null:u!=null&&(!i||x||u&&u.drapeRenderMode===1)?u:i}mergeTerrain(){let i;this.terrain&&this.terrain.scope!==this.scope&&delete this.terrain,this.forEachFragmentStyle(u=>{i=this._prioritizeTerrain(i,u.terrain,u.stylesheet.terrain)}),i===null?delete this.terrain:this.terrain=i}mergeProjection(){let i;this.forEachFragmentStyle(u=>{u.stylesheet.projection!=null&&(i=u.stylesheet.projection)}),this.projection=i||{name:"mercator"}}mergeSources(){const i={},u={},p={};this.forEachFragmentStyle(x=>{for(const S in x._sourceCaches){const T=r.C(S,x.scope);i[T]=x._sourceCaches[S]}for(const S in x._otherSourceCaches){const T=r.C(S,x.scope);u[T]=x._otherSourceCaches[S]}for(const S in x._symbolSourceCaches){const T=r.C(S,x.scope);p[T]=x._symbolSourceCaches[S]}}),this._mergedSourceCaches=i,this._mergedOtherSourceCaches=u,this._mergedSymbolSourceCaches=p}mergeLayers(){const i={},u=[],p={};this._mergedSlots=[],this._has3DLayers=!1,this._hasCircleLayers=!1,this._hasSymbolLayers=!1,this.forEachFragmentStyle(S=>{for(const T of S._order){const O=S._layers[T];if(O.type==="slot"){const B=r.d7(T);if(i[B])continue;i[B]=[]}O.slot&&i[O.slot]?i[O.slot].push(O):u.push(O)}}),this._mergedOrder=[];const x=(S=[])=>{for(const T of S)if(T.type==="slot"){const O=r.d7(T.id);i[O]&&x(i[O]),this._mergedSlots.push(O)}else{const O=r.C(T.id,T.scope);this._mergedOrder.push(O),p[O]=T,T.is3D(!!this.terrain)&&(this._has3DLayers=!0),T.type==="circle"&&(this._hasCircleLayers=!0),T.type==="symbol"&&(this._hasSymbolLayers=!0),T.type==="clip"&&(this._clipLayerPresent=!0)}};x(u),this._mergedOrder.sort((S,T)=>{const O=p[S],B=p[T];return O.hasInitialOcclusionOpacityProperties?B.is3D(!!this.terrain)?1:0:O.is3D(!!this.terrain)&&B.hasInitialOcclusionOpacityProperties?-1:0}),this._mergedLayers=p,this.updateDrapeFirstLayers(),this._buildingIndex.processLayersChanged()}terrainSetForDrapingOnly(){return!!this.terrain&&this.terrain.drapeRenderMode===0}getCamera(){return this.stylesheet.camera}setCamera(i){return this.stylesheet.camera=r.h({},this.stylesheet.camera,i),this.camera=this.stylesheet.camera,this}_evaluateColorThemeData(i){return i.data?function(u,p,x,S){const T=r.h({},p);for(const B of Object.keys(r.a5.colorTheme))T[B]===void 0&&(T[B]=r.a5.colorTheme[B].default);const O=new r.a6(zd,u,new Map(x));return O.setTransitionOrValue(T,x),O.untransitioned().possiblyEvaluate(new r.aa(0,{worldview:void 0}))}(this.scope,i,this.options).get("data"):null}_loadColorTheme(i){this._styleColorTheme.lutLoading=!0,this._styleColorTheme.lutLoadingCorrelationID+=1;const u=this._styleColorTheme.lutLoadingCorrelationID;return new Promise((p,x)=>{const S="data:image/png;base64,";if(!i||i.length===0)return this._styleColorTheme.lut=null,this._styleColorTheme.lutLoading=!1,void p();let T=i;T.startsWith(S)||(T=S+T);const O=r.I.from("mapbox-reserved-lut"),B=new Image;B.src=T,B.onerror=()=>{this._styleColorTheme.lutLoading=!1,x(new Error("Failed to load image data"))},B.onload=()=>{if(this._styleColorTheme.lutLoadingCorrelationID!==u)return void p();this._styleColorTheme.lutLoading=!1;const{width:j,height:K,data:te}=r.q.getImageData(B);if(K>32)return void x(new Error("The height of the image must be less than or equal to 32 pixels."));if(j!==K*K)return void x(new Error("The width of the image must be equal to the height squared."));this.getImage(O)&&this.removeImage(O),this.addImage(O,{data:new r.r({width:j,height:K},te),pixelRatio:1,sdf:!1,usvg:!1,version:0});const Q=this.imageManager.getImage(O,this.scope);Q?(this._styleColorTheme.lut={image:Q.data,data:i},p()):x(new Error("Missing LUT image."))}})}getLut(i){const u=this._styleColorThemeForScope[i];return u?u.lut:null}setProjection(i){i?this.stylesheet.projection=i:delete this.stylesheet.projection,this.mergeProjection(),this._updateMapProjection()}applyProjectionUpdate(){this._loaded&&(this.dispatcher.broadcast("setProjection",this.map.transform.projectionOptions),this.map.transform.projection.requiresDraping?(this.getTerrain()||this.stylesheet.terrain)&&!this.disableElevatedTerrain||this.setTerrainForDraping():this.terrainSetForDrapingOnly()&&this.setTerrain(null,0))}_updateMapProjection(){this.isRootStyle()&&(this.map._useExplicitProjection?this.applyProjectionUpdate():this.map._prioritizeAndUpdateProjection(null,this.projection))}_loadSprite(i){this._spriteRequest=function(u,p,x){let S,T,O;const B=r.q.devicePixelRatio>1?"@2x":"";let j=r.n(p.transformRequest(p.normalizeSpriteURL(u,B,".json"),r.R.SpriteJSON),(Q,oe)=>{j=null,O||(O=Q,S=oe,te())}),K=r.o(p.transformRequest(p.normalizeSpriteURL(u,B,".png"),r.R.SpriteImage),(Q,oe)=>{K=null,O||(O=Q,T=oe,te())});function te(){if(O)x(O);else if(S&&T){const Q=r.q.getImageData(T),oe={};for(const Ce in S){const{width:_e,height:Ee,x:Me,y:ze,sdf:qe,pixelRatio:Je,stretchX:lt,stretchY:ot,content:rt}=S[Ce],Qe=new r.r({width:_e,height:Ee});r.r.copy(Q,Qe,{x:Me,y:ze},{x:0,y:0},{width:_e,height:Ee},null),oe[Ce]={data:Qe,pixelRatio:Je,sdf:qe,stretchX:lt,stretchY:ot,content:rt,usvg:!1}}x(null,oe)}}return{cancel(){j&&(j.cancel(),j=null),K&&(K.cancel(),K=null)}}}(i,this.map._requestManager,(u,p)=>{if(this._spriteRequest=null,u)this.fire(new r.z(u));else if(p){const x=new Map;for(const S in p)x.set(r.I.from(S),p[S]);this.addImages(x)}this.imageManager.setLoaded(!0,this.scope),this.dispatcher.broadcast("spriteLoaded",{scope:this.scope,isLoaded:!0}),this.fire(new r.A("data",{dataType:"style"}))})}addIconset(i,u){if(u.type==="sprite")return void this._loadSprite(u.url);const p=this.getOwnSourceCache(u.source);if(!p)return void this.fire(new r.z(new Error(`Source "${u.source}" as specified by iconset "${i}" does not exist and cannot be used as an iconset source`)));const x=p.getSource();if(x.type!=="raster-array")return void this.fire(new r.z(new Error(`Source "${u.source}" as specified by iconset "${i}" is not a "raster-array" source and cannot be used as an iconset source`)));x.partial=!1;const S=new I(i,this.scope,p);this.imageManager.addImageProvider(S,this.scope)}removeIconset(i){this.imageManager.removeImageProvider(i,this.scope)}_loadIconset(i){if(!r.j(i)&&this.map._spriteFormat!=="icon_set"||this.map._spriteFormat==="raster")return void this._loadSprite(i);const u=this.map._spriteFormat==="auto";var p,x;this._spriteRequest=(x=(S,T)=>{if(this._spriteRequest=null,S)u?this._loadSprite(i):this.fire(new r.z(S));else if(T){const O=new Map;for(const B in T)O.set(r.I.from(B),T[B]);this.addImages(O)}this.imageManager.setLoaded(!0,this.scope),this.dispatcher.broadcast("spriteLoaded",{scope:this.scope,isLoaded:!0}),this.fire(new r.A("data",{dataType:"style"}))},r.br((p=this.map._requestManager).transformRequest(p.normalizeIconsetURL(i),r.R.Iconset),(S,T)=>{if(S)return void x(S);const O={},B=r.c_(new r.bq(T));for(const j of B.icons){const K={version:1,pixelRatio:r.q.devicePixelRatio,content:g(j),stretchX:j.metadata?v(j.metadata.stretch_x_areas):void 0,stretchY:j.metadata?v(j.metadata.stretch_y_areas):void 0,sdf:!1,usvg:!0,icon:j};O[j.name]=K}x(null,O)}))}_validateLayer(i){const u=this.getOwnSource(i.source);if(!u)return;const p=i.sourceLayer;p&&(u.type==="geojson"||u.vectorLayerIds&&u.vectorLayerIds.indexOf(p)===-1)&&this.fire(new r.z(new Error(`Source layer "${p}" does not exist on source "${u.id}" as specified by style layer "${i.id}"`)))}loaded(){if(!this._loaded||Object.keys(this._changes.getUpdatedSourceCaches()).length)return!1;for(const i in this._sourceCaches)if(!this._sourceCaches[i].loaded())return!1;if(!this.imageManager.isLoaded()||this.imageManager.hasPatternsInFlight()||!this.modelManager.isLoaded()||this._styleColorTheme.lutLoading)return!1;for(const{style:i}of this.fragments)if(!i.loaded())return!1;return!0}_serializeImports(){if(this.stylesheet.imports)return this.stylesheet.imports.map((i,u)=>{const p=this.fragments[u];return p&&p.style&&(i.data=p.style.serialize()),i})}_serializeSources(){const i={};for(const u in this._sourceCaches){const p=this._sourceCaches[u].getSource();i[p.id]||(i[p.id]=p.serialize())}return i}_serializeLayers(i){const u=[];for(const p of i){const x=this._layers[p];x&&x.type!=="custom"&&u.push(x.serialize())}return u}hasLightTransitions(){return!(!this.light||!this.light.hasTransition())||!(!this.ambientLight||!this.ambientLight.hasTransition())||!(!this.directionalLight||!this.directionalLight.hasTransition())}hasFogTransition(){return!!this.fog&&this.fog.hasTransition()}hasSnowTransition(){return!!this.snow&&this.snow.hasTransition()}hasRainTransition(){return!!this.rain&&this.rain.hasTransition()}hasTransitions(){if(this.hasLightTransitions()||this.hasFogTransition()||this.hasSnowTransition()||this.hasRainTransition())return!0;for(const i in this._sourceCaches)if(this._sourceCaches[i].hasTransition())return!0;for(const i in this._layers)if(this._layers[i].hasTransition())return!0;return!1}get order(){return this.terrain?this._drapedFirstOrder:this._mergedOrder}_getOrder(i){return i?this.order:this._mergedOrder}isLayerDraped(i){return!!this.terrain&&i.isDraped(this.getLayerSourceCache(i))}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}_checkLayer(i){const u=this.getOwnLayer(i);if(u)return u;this.fire(new r.z(new Error(`The layer '${i}' does not exist in the map's style.`)))}_checkSource(i){const u=this.getOwnSource(i);if(u)return u;this.fire(new r.z(new Error(`The source '${i}' does not exist in the map's style.`)))}precompilePrograms(i,u){const p=this.map.painter;if(p)for(let x=i.minzoom||0;x<(i.maxzoom||25.5);x++){const S=i.getProgramIds();if(S)for(const T of S){const O=i.getDefaultProgramParams(T,u.zoom,this._styleColorTheme.lut);O&&(p.style=this,this.fog&&(p._fogVisible=!0,O.overrideFog=!0,p.getOrCreateProgram(T,O)),p._fogVisible=!1,O.overrideFog=!1,p.getOrCreateProgram(T,O),(this.stylesheet.terrain||this.stylesheet.projection&&this.stylesheet.projection.name==="globe")&&(O.overrideRtt=!0,p.getOrCreateProgram(T,O)))}}}update(i){if(!this._loaded)return;this.ambientLight&&this.ambientLight.recalculate(i),this.directionalLight&&this.directionalLight.recalculate(i);const u=this.calculateLightsBrightness();i.brightness=u||0,u!==this._brightness&&(this._brightness=u,this.dispatcher.broadcast("setBrightness",u)),i.worldview!==this._worldview&&(this._worldview=i.worldview,this.dispatcher.broadcast("setWorldview",this._worldview));const p=this._changes.isDirty();let x=!1;if(this._changes.isDirty()){const O=this._changes.getLayerUpdatesByScope();for(const B in O){const{updatedIds:j,removedIds:K}=O[B];(j||K)&&(this._updateWorkerLayers(B,j,K),x=!0)}this.updateSourceCaches(),this._updateTilesForChangedImages(),this.updateLayers(i),this.light&&this.light.updateTransitions(i),this.ambientLight&&this.ambientLight.updateTransitions(i),this.directionalLight&&this.directionalLight.updateTransitions(i),this.fog&&this.fog.updateTransitions(i),this.snow&&this.snow.updateTransitions(i),this.rain&&this.rain.updateTransitions(i),this._changes.reset()}const S={};for(const O in this._mergedSourceCaches){const B=this._mergedSourceCaches[O];S[O]=B.used,B.used=!1,B.tileCoverLift=0}for(const O of this._mergedOrder){const B=this._mergedLayers[O];if(B.recalculate(i,this._availableImages),!B.isHidden(i.zoom)){const j=this.getLayerSourceCache(B);j&&(j.used=!0,j.tileCoverLift=Math.max(j.tileCoverLift,B.tileCoverLift()))}!this._precompileDone&&this._shouldPrecompile&&("requestIdleCallback"in window?requestIdleCallback(()=>{this.precompilePrograms(B,i)}):this.precompilePrograms(B,i))}this._shouldPrecompile&&(this._precompileDone=!0),this.terrain&&x&&this.mergeLayers();const T=this.imageManager.getPendingImageProviders();for(const O of T)O.sourceCache.used=!0;for(const O in S){const B=this._mergedSourceCaches[O];S[O]!==B.used&&B.getSource().fire(new r.A("data",{sourceDataType:"visibility",dataType:"source",sourceId:B.getSource().id}))}this.light&&this.light.recalculate(i),this.terrain&&this.terrain.recalculate(i),this.fog&&this.fog.recalculate(i),this.snow&&this.snow.recalculate(i),this.rain&&this.rain.recalculate(i),this.z=i.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),this.imageManager.clearUpdatedImages(this.scope),p&&this.fire(new r.A("data",{dataType:"style"}))}updateImageProviders(){const i=this.imageManager.getPendingImageProviders();for(const u of i){const p=u.resolvePendingRequests(),x=this.getFragmentStyle(u.scope);x&&x.addImages(p)}}_updateTilesForChangedImages(){const i={};for(const u in this._mergedSourceCaches){const p=this._mergedSourceCaches[u].getSource().scope;i[p]=i[p]||this._changes.getUpdatedImages(p),i[p].length!==0&&this._mergedSourceCaches[u].reloadTilesForDependencies(["icons","patterns"],i[p])}for(const u in i)this._changes.resetUpdatedImages(u)}_updateWorkerLayers(i,u,p){const x=this.getFragmentStyle(i);x&&this.dispatcher.broadcast("updateLayers",{layers:u?x._serializeLayers(u):[],scope:i,removedIds:p||[],options:x.options})}setState(i,u){if(this._checkLoaded(),H(this,ds(i)))return!1;(i=r.d6(i)).layers=Ad(i.layers);const p=function(T,O){if(!T)return[{command:ki.setStyle,args:[O]}];let B=[];try{if(!r.bv(T.version,O.version))return[{command:ki.setStyle,args:[O]}];if(r.bv(T.center,O.center)||B.push({command:ki.setCenter,args:[O.center]}),r.bv(T.zoom,O.zoom)||B.push({command:ki.setZoom,args:[O.zoom]}),r.bv(T.bearing,O.bearing)||B.push({command:ki.setBearing,args:[O.bearing]}),r.bv(T.pitch,O.pitch)||B.push({command:ki.setPitch,args:[O.pitch]}),r.bv(T.sprite,O.sprite)||B.push({command:ki.setSprite,args:[O.sprite]}),r.bv(T.glyphs,O.glyphs)||B.push({command:ki.setGlyphs,args:[O.glyphs]}),r.bv(T.imports,O.imports)||function(oe=[],Ce=[],_e){Ce=Ce||[];const Ee=(oe=oe||[]).map(Gl),Me=Ce.map(Gl),ze=oe.reduce(ql,{}),qe=Ce.reduce(ql,{}),Je=Ee.slice();let lt,ot,rt,Qe;for(lt=0,ot=0;lt<Ee.length;lt++)rt=Ee[lt],qe.hasOwnProperty(rt)?ot++:(_e.push({command:ki.removeImport,args:[rt]}),Je.splice(Je.indexOf(rt,ot),1));for(lt=0,ot=0;lt<Me.length;lt++)rt=Me[Me.length-1-lt],Je[Je.length-1-lt]!==rt&&(ze.hasOwnProperty(rt)?(_e.push({command:ki.removeImport,args:[rt]}),Je.splice(Je.lastIndexOf(rt,Je.length-ot),1)):ot++,Qe=Je[Je.length-lt],_e.push({command:ki.addImport,args:[qe[rt],Qe]}),Je.splice(Je.length-lt,0,rt));for(const ut of Ce){const pt=ze[ut.id];pt&&(delete pt.data,r.bv(pt,ut)||_e.push({command:ki.updateImport,args:[ut.id,ut]}))}}(T.imports,O.imports,B),r.bv(T.transition,O.transition)||B.push({command:ki.setTransition,args:[O.transition]}),r.bv(T.light,O.light)||B.push({command:ki.setLight,args:[O.light]}),r.bv(T.fog,O.fog)||B.push({command:ki.setFog,args:[O.fog]}),r.bv(T.snow,O.snow)||B.push({command:ki.setSnow,args:[O.snow]}),r.bv(T.rain,O.rain)||B.push({command:ki.setRain,args:[O.rain]}),r.bv(T.projection,O.projection)||B.push({command:ki.setProjection,args:[O.projection]}),r.bv(T.lights,O.lights)||B.push({command:ki.setLights,args:[O.lights]}),r.bv(T.camera,O.camera)||B.push({command:ki.setCamera,args:[O.camera]}),r.bv(T.iconsets,O.iconsets)||function(oe,Ce,_e){let Ee;for(Ee in Ce=Ce||{},oe=oe||{})oe.hasOwnProperty(Ee)&&(Ce.hasOwnProperty(Ee)||_e.push({command:ki.removeIconset,args:[Ee]}));for(Ee in Ce){if(!Ce.hasOwnProperty(Ee))continue;const Me=Ce[Ee];oe.hasOwnProperty(Ee)?r.bv(oe[Ee],Me)||(_e.push({command:ki.removeIconset,args:[Ee]}),_e.push({command:ki.addIconset,args:[Ee,Me]})):_e.push({command:ki.addIconset,args:[Ee,Me]})}}(T.iconsets,O.iconsets,B),!r.bv(T["color-theme"],O["color-theme"]))return[{command:ki.setStyle,args:[O]}];const j={},K=[];(function(oe,Ce,_e,Ee){let Me;for(Me in Ce=Ce||{},oe=oe||{})oe.hasOwnProperty(Me)&&(Ce.hasOwnProperty(Me)||Ac(Me,_e,Ee));for(Me in Ce){if(!Ce.hasOwnProperty(Me))continue;const ze=Ce[Me];oe.hasOwnProperty(Me)?r.bv(oe[Me],ze)||(oe[Me].type==="geojson"&&ze.type==="geojson"&&zs(oe,Ce,Me)?_e.push({command:ki.setGeoJSONSourceData,args:[Me,ze.data]}):Rc(Me,Ce,_e,Ee)):Bu(Me,Ce,_e)}})(T.sources,O.sources,K,j);const te=[];T.layers&&T.layers.forEach(oe=>{oe.source&&j[oe.source]?B.push({command:ki.removeLayer,args:[oe.id]}):te.push(oe)});let Q=T.terrain;Q&&j[Q.source]&&(B.push({command:ki.setTerrain,args:[void 0]}),Q=void 0),B=B.concat(K),r.bv(Q,O.terrain)||B.push({command:ki.setTerrain,args:[O.terrain]}),function(oe,Ce,_e){Ce=Ce||[];const Ee=(oe=oe||[]).map(Gl),Me=Ce.map(Gl),ze=oe.reduce(ql,{}),qe=Ce.reduce(ql,{}),Je=Ee.slice(),lt=Object.create(null);let ot,rt,Qe,ut,pt,zt,Vt;for(ot=0,rt=0;ot<Ee.length;ot++)Qe=Ee[ot],qe.hasOwnProperty(Qe)?rt++:(_e.push({command:ki.removeLayer,args:[Qe]}),Je.splice(Je.indexOf(Qe,rt),1));for(ot=0,rt=0;ot<Me.length;ot++)Qe=Me[Me.length-1-ot],Je[Je.length-1-ot]!==Qe&&(ze.hasOwnProperty(Qe)?(_e.push({command:ki.removeLayer,args:[Qe]}),Je.splice(Je.lastIndexOf(Qe,Je.length-rt),1)):rt++,zt=Je[Je.length-ot],_e.push({command:ki.addLayer,args:[qe[Qe],zt]}),Je.splice(Je.length-ot,0,Qe),lt[Qe]=!0);for(ot=0;ot<Me.length;ot++)if(Qe=Me[ot],ut=ze[Qe],pt=qe[Qe],!lt[Qe]&&!r.bv(ut,pt))if(r.bv(ut.source,pt.source)&&r.bv(ut["source-layer"],pt["source-layer"])&&r.bv(ut.type,pt.type)){for(Vt in ga(ut.layout,pt.layout,_e,Qe,null,ki.setLayoutProperty),ga(ut.paint,pt.paint,_e,Qe,null,ki.setPaintProperty),r.bv(ut.slot,pt.slot)||_e.push({command:ki.setSlot,args:[Qe,pt.slot]}),r.bv(ut.filter,pt.filter)||_e.push({command:ki.setFilter,args:[Qe,pt.filter]}),r.bv(ut.minzoom,pt.minzoom)&&r.bv(ut.maxzoom,pt.maxzoom)||_e.push({command:ki.setLayerZoomRange,args:[Qe,pt.minzoom,pt.maxzoom]}),ut)ut.hasOwnProperty(Vt)&&Vt!=="layout"&&Vt!=="paint"&&Vt!=="filter"&&Vt!=="metadata"&&Vt!=="minzoom"&&Vt!=="maxzoom"&&Vt!=="slot"&&(Vt.indexOf("paint.")===0?ga(ut[Vt],pt[Vt],_e,Qe,Vt.slice(6),ki.setPaintProperty):r.bv(ut[Vt],pt[Vt])||_e.push({command:ki.setLayerProperty,args:[Qe,Vt,pt[Vt]]}));for(Vt in pt)pt.hasOwnProperty(Vt)&&!ut.hasOwnProperty(Vt)&&Vt!=="layout"&&Vt!=="paint"&&Vt!=="filter"&&Vt!=="metadata"&&Vt!=="minzoom"&&Vt!=="maxzoom"&&Vt!=="slot"&&(Vt.indexOf("paint.")===0?ga(ut[Vt],pt[Vt],_e,Qe,Vt.slice(6),ki.setPaintProperty):r.bv(ut[Vt],pt[Vt])||_e.push({command:ki.setLayerProperty,args:[Qe,Vt,pt[Vt]]}))}else _e.push({command:ki.removeLayer,args:[Qe]}),zt=Je[Je.lastIndexOf(Qe)+1],_e.push({command:ki.addLayer,args:[pt,zt]})}(te,O.layers,B)}catch(j){console.warn("Unable to compute style diff:",j),B=[{command:ki.setStyle,args:[O]}]}return B}(this.serialize(),i).filter(T=>!(T.command in Se));if(p.length===0)return!1;const x=p.filter(T=>!(T.command in ne));if(x.length>0)throw new Error(`Unimplemented: ${x.map(T=>T.command).join(", ")}.`);const S=[];return p.forEach(T=>{S.push(this[T.command](...T.args))}),u&&Promise.all(S).then(u).catch(u),this.stylesheet=i,this.mergeAll(),this.dispatcher.broadcast("setLayers",{layers:this._serializeLayers(this._order),scope:this.scope,options:this.options}),!0}_updateWorkerImages(){this._availableImages=this.imageManager.listImages(this.scope),this.dispatcher.broadcast("setImages",{scope:this.scope,images:this._availableImages})}_updateWorkerModels(){this._availableModels=this.modelManager.getModelURIs(this.scope),this.dispatcher.broadcast("setModels",{scope:this.scope,models:this._availableModels})}addImages(i){for(const[u,p]of i.entries()){if(this.getImage(u))return this.fire(new r.z(new Error(`An image with the name "${u.name}" already exists.`)));this.imageManager.addImage(u,this.scope,p),this._changes.updateImage(u,this.scope)}return this._updateWorkerImages(),this.fire(new r.A("data",{dataType:"style"})),this}addImage(i,u){return this.getImage(i)?this.fire(new r.z(new Error(`An image with the name "${i.name}" already exists.`))):(this.imageManager.addImage(i,this.scope,u),this._changes.updateImage(i,this.scope),this._updateWorkerImages(),this.fire(new r.A("data",{dataType:"style"})),this)}updateImage(i,u,p=!1){this.imageManager.updateImage(i,this.scope,u),p&&(this._changes.updateImage(i,this.scope),this._updateWorkerImages(),this.fire(new r.A("data",{dataType:"style"})))}getImage(i){return this.imageManager.getImage(i,this.scope)}removeImage(i){return this.getImage(i)?(this.imageManager.removeImage(i,this.scope),this._changes.updateImage(i,this.scope),this._updateWorkerImages(),this.fire(new r.A("data",{dataType:"style"})),this):this.fire(new r.z(new Error("No image with this name exists.")))}listImages(){return this._checkLoaded(),this._availableImages.slice()}addModelURLs(i){return this.modelManager.addModelURLs(i,this.scope),this._updateWorkerModels(),this.fire(new r.A("data",{dataType:"style"})),this}addModel(i,u,p={}){return this._checkLoaded(),this._validate(Ye,`models.${i}`,u,null,p)||(this.modelManager.addModel(i,u,this.scope),this.fire(new r.A("data",{dataType:"style"}))),this}hasModel(i){return this.modelManager.hasModel(i,this.scope)}removeModel(i){return this.hasModel(i)?(this.modelManager.removeModel(i,this.scope),this.fire(new r.A("data",{dataType:"style"})),this):this.fire(new r.z(new Error("No model with this ID exists.")))}listModels(){return this._checkLoaded(),this.modelManager.listModels(this.scope)}addSource(i,u,p={}){if(this._checkLoaded(),this.getOwnSource(i)!==void 0)throw new Error(`There is already a source with ID "${i}".`);if(!u.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(u).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(u.type)>=0&&this._validate(Qs,`sources.${i}`,u,null,p))return;this.map&&this.map._collectResourceTiming&&(u.collectResourceTiming=!0);const x=Ec(i,u,this.dispatcher,this);x.scope=this.scope,x.setEventedParent(this,()=>({isSourceLoaded:this._isSourceCacheLoaded(x.id),source:x.serialize(),sourceId:x.id}));const S=T=>{const O=(T?"symbol:":"other:")+x.id,B=r.C(O,this.scope),j=this._sourceCaches[O]=new ta(B,x,T);(T?this._symbolSourceCaches:this._otherSourceCaches)[x.id]=j,j.onAdd(this.map)};S(!1),u.type!=="vector"&&u.type!=="geojson"||S(!0),x.onAdd&&x.onAdd(this.map),p.isInitialLoad||(this.mergeSources(),this._changes.setDirty())}removeSource(i){this._checkLoaded();const u=this.getOwnSource(i);if(!u)throw new Error("There is no source with this ID");for(const x in this._layers)if(this._layers[x].source===i)return this.fire(new r.z(new Error(`Source "${i}" cannot be removed while layer "${x}" is using it.`)));if(this.terrain&&this.terrain.scope===this.scope&&this.terrain.get().source===i)return this.fire(new r.z(new Error(`Source "${i}" cannot be removed while terrain is using it.`)));if(this.stylesheet.iconsets){const x=Object.entries(this.stylesheet.iconsets).find(([S,T])=>T.type==="source"&&T.source===i);if(x)return this.fire(new r.z(new Error(`Source "${i}" cannot be removed while iconset "${x[0]}" is using it.`)))}const p=this.getOwnSourceCaches(i);for(const x of p){const S=r.d7(x.id);delete this._sourceCaches[S],this._changes.discardSourceCacheUpdate(x.id),x.fire(new r.A("data",{sourceDataType:"metadata",dataType:"source",sourceId:x.getSource().id})),x.setEventedParent(null),x.clearTiles()}return delete this._otherSourceCaches[i],delete this._symbolSourceCaches[i],this.mergeSources(),u.setEventedParent(null),u.onRemove&&u.onRemove(this.map),this._changes.setDirty(),this}setGeoJSONSourceData(i,u){this._checkLoaded(),this.getOwnSource(i).setData(u),this._changes.setDirty()}getOwnSource(i){const u=this.getOwnSourceCache(i);return u&&u.getSource()}getOwnSources(){const i=[];for(const u in this._otherSourceCaches){const p=this.getOwnSourceCache(u);p&&i.push(p.getSource())}return i}areTilesLoaded(){const i=this._mergedSourceCaches;for(const u in i){const p=i[u]._tiles;for(const x in p){const S=p[x];if(S.state!=="loaded"&&S.state!=="errored")return!1}}return!0}setLights(i){if(this._checkLoaded(),!i)return delete this.ambientLight,void delete this.directionalLight;const u=this._getTransitionParameters();for(const S of i){if(this._validate(ks,"lights",S))return;switch(S.type){case"ambient":if(this.ambientLight){const T=this.ambientLight;T.set(S),T.updateTransitions(u)}else this.ambientLight=new ci(S,kn||(kn=new r.a7({color:new r.a8(r.a5.properties_light_ambient.color),"color-use-theme":new r.a8({type:"string",default:"default","property-type":"data-constant"}),intensity:new r.a8(r.a5.properties_light_ambient.intensity)})),this.scope,this.options);break;case"directional":if(this.directionalLight){const T=this.directionalLight;T.set(S),T.updateTransitions(u)}else this.directionalLight=new ci(S,br||(br=new r.a7({direction:new r.an(r.a5.properties_light_directional.direction),color:new r.a8(r.a5.properties_light_directional.color),"color-use-theme":new r.a8({type:"string",default:"default","property-type":"data-constant"}),intensity:new r.a8(r.a5.properties_light_directional.intensity),"cast-shadows":new r.a8(r.a5.properties_light_directional["cast-shadows"]),"shadow-quality":new r.a8(r.a5.properties_light_directional["shadow-quality"]),"shadow-intensity":new r.a8(r.a5.properties_light_directional["shadow-intensity"])})),this.scope,this.options)}}const p=Object.assign(u,{worldview:this.map.getWorldview()}),x=new r.aa(this.z||0,p);this.ambientLight&&this.ambientLight.recalculate(x),this.directionalLight&&this.directionalLight.recalculate(x),this._brightness=this.calculateLightsBrightness(),this.dispatcher.broadcast("setBrightness",this._brightness)}calculateLightsBrightness(){const i=this.directionalLight,u=this.ambientLight;if(!i||!u)return;const p=Q=>.2126*(Q[0]<=.03928?Q[0]/12.92:Math.pow((Q[0]+.055)/1.055,2.4))+.7152*(Q[1]<=.03928?Q[1]/12.92:Math.pow((Q[1]+.055)/1.055,2.4))+.0722*(Q[2]<=.03928?Q[2]/12.92:Math.pow((Q[2]+.055)/1.055,2.4)),x=i.properties.get("color").toNonPremultipliedRenderColor(null).toArray01(),S=i.properties.get("intensity"),T=i.properties.get("direction"),O=1-r.cR(T.x,T.y,T.z)[2]/90,B=p(x)*S*O,j=u.properties.get("color").toNonPremultipliedRenderColor(null).toArray01(),K=u.properties.get("intensity"),te=p(j)*K;return Number(((B+te)/2).toFixed(6))}getBrightness(){return this._brightness}getLights(){if(!this.enable3dLights())return null;const i=[];return this.directionalLight&&i.push(this.directionalLight.get()),this.ambientLight&&i.push(this.ambientLight.get()),i}enable3dLights(){return!!this.ambientLight&&!!this.directionalLight}getFragmentStyle(i){if(i==null||i===""&&this.isRootStyle())return this;if(r.d8(i)){const u=r.d9(i),p=this.fragments.find(({id:S})=>S===u);if(!p)return;const x=r.d7(i);return p.style.getFragmentStyle(x)}{const u=this.fragments.find(({id:p})=>p===i);return u?u.style:void 0}}setFeaturesetSelectors(i){if(!i)return;const u={},p=(x,S="")=>`${x}::${S}`;this._featuresetSelectors={};for(const x in i){const S=this._featuresetSelectors[x]=[];for(const T of i[x].selectors){if(T.featureNamespace){const B=this.getOwnLayer(T.layer);if(!B){r.w(`Layer is undefined for selector: ${T.layer}`);continue}const j=p(B.source,B.sourceLayer);if(j in u&&u[j]!==T.featureNamespace){r.w(`"featureNamespace ${T.featureNamespace} of featureset ${x}'s selector is not associated to the same source, skip this selector`);continue}u[j]=T.featureNamespace}let O;if(T.properties)for(const B in T.properties){const j=r.X(T.properties[B]);j.result==="success"&&(O=O||{},O[B]=j.value)}S.push({layerId:T.layer,namespace:T.featureNamespace,properties:O,uniqueFeatureID:T._uniqueFeatureID})}}}getFeaturesetDescriptors(i){const u=this.getFragmentStyle(i);if(!u||!u.stylesheet.featuresets)return[];const p=[];for(const x in u.stylesheet.featuresets)p.push({featuresetId:x,importId:u.scope?u.scope:void 0});return p}getFeaturesetLayers(i,u){const p=this.getFragmentStyle(u),x=p.stylesheet.featuresets;if(!x||!x[i])return this.fire(new r.z(new Error(`The featureset '${i}' does not exist in the map's style and cannot be queried.`))),[];const S=[];for(const T of x[i].selectors){const O=p.getOwnLayer(T.layer);O&&S.push(O)}return S}getConfigProperty(i,u){const p=this.getFragmentStyle(i);if(!p)return null;const x=r.C(u,p.scope),S=p.options.get(x),T=S?S.value||S.default:null;return T?T.serialize():null}setConfigProperty(i,u,p){const x=this.getFragmentStyle(i);if(!x)return;const S=x.stylesheet.indoor?Do(x.stylesheet.schema):x.stylesheet.schema;if(!S||!S[u])return;const T=r.X(p);if(T.result!=="success")return void H(this,T.value);const O=T.value.expression,B=r.C(u,x.scope),j=x.options.get(B);if(!j)return;let K;const{minValue:te,maxValue:Q,stepValue:oe,type:Ce,values:_e}=S[u],Ee=r.X(S[u].default);Ee.result==="success"&&(K=Ee.value.expression),K?(this.options.set(B,Object.assign({},j,{value:O,default:K,minValue:te,maxValue:Q,stepValue:oe,type:Ce,values:_e})),this.updateConfigDependencies(u)):this.fire(new r.z(new Error(`No schema defined for the config option "${u}" in the "${i}" fragment.`)))}getConfig(i){const u=this.getFragmentStyle(i);if(!u)return null;const p=u.stylesheet.schema;if(!p)return null;const x={};for(const S in p){const T=r.C(S,u.scope),O=u.options.get(T),B=O?O.value||O.default:null;x[S]=B?B.serialize():null}return x}setConfig(i,u){const p=this.getFragmentStyle(i);p&&(p.updateConfig(u,p.stylesheet.schema),this.updateConfigDependencies())}getSchema(i){const u=this.getFragmentStyle(i);return u?u.stylesheet.schema:null}setSchema(i,u){const p=this.getFragmentStyle(i);p&&(p.stylesheet.schema=u,p.updateConfig(p._config,u),this.updateConfigDependencies())}updateConfig(i,u){if(this._config=i,i||u)if(u)for(const p in u){let x,S;const T=r.X(u[p].default);if(T.result==="success"&&(x=T.value.expression),i&&i[p]!==void 0){const Q=r.X(i[p]);Q.result==="success"&&(S=Q.value.expression)}const{minValue:O,maxValue:B,stepValue:j,type:K,values:te}=u[p];if(x){const Q=r.C(p,this.scope);this.options.set(Q,{default:x,value:S,minValue:O,maxValue:B,stepValue:j,type:K,values:te})}else this.fire(new r.z(new Error(`No schema defined for config option "${p}".`)))}else this.fire(new r.z(new Error("Attempting to set config for a style without schema.")))}updateConfigDependencies(i){for(const u of this._configDependentLayers){const p=this.getLayer(u);if(p){if(i&&!p.configDependencies.has(i))continue;p.possiblyEvaluateVisibility(),this._updateLayer(p)}}this.ambientLight&&this.ambientLight.updateConfig(this.options),this.directionalLight&&this.directionalLight.updateConfig(this.options),this.fog&&this.fog.updateConfig(this.options),this.snow&&this.snow.updateConfig(this.options),this.rain&&this.rain.updateConfig(this.options),this.forEachFragmentStyle(u=>{const p=u._styleColorTheme.colorThemeOverride?u._styleColorTheme.colorThemeOverride:u._styleColorTheme.colorTheme;if(p){const x=u._evaluateColorThemeData(p);(!u._styleColorTheme.lut&&x!==""||u._styleColorTheme.lut&&x!==u._styleColorTheme.lut.data)&&u.setColorTheme(p)}}),this._changes.setDirty()}addLayer(i,u,p={}){this._checkLoaded();const x=i.id;if(this._layers[x])return void this.fire(new r.z(new Error(`Layer with id "${x}" already exists on this map`)));let S;if(i.type==="custom"){if(H(this,r.da(i)))return;S=r.db(i,this.scope,this._styleColorTheme.lut,this.options)}else{if(typeof i.source=="object"&&(this.addSource(x,i.source),i=r.d6(i),i=r.h(i,{source:x})),this._validate(gi,`layers.${x}`,i,{arrayIndex:-1},p))return;S=r.db(i,this.scope,this._styleColorTheme.lut,this.options),this._validateLayer(S),S.setEventedParent(this,{layer:{id:x}})}S.configDependencies.size!==0&&this._configDependentLayers.add(S.fqid);let T=this._order.length;if(u){const K=this._order.indexOf(u);if(K===-1)return void this.fire(new r.z(new Error(`Layer with id "${u}" does not exist on this map.`)));S.slot===this._layers[u].slot?T=K:r.w(`Layer with id "${u}" has a different slot. Layers can only be rearranged within the same slot.`)}this._order.splice(T,0,x),this._layerOrderChanged=!0,this._layers[x]=S;const O=this.getOwnLayerSourceCache(S),B=!!this.directionalLight&&this.directionalLight.shadowsEnabled();O&&S.canCastShadows()&&B&&(O.castsShadows=!0);const j=this._changes.getRemovedLayer(S);if(j&&S.source&&O&&S.type!=="custom"){this._changes.discardLayerRemoval(S);const K=r.C(S.source,S.scope);j.type!==S.type?this._changes.updateSourceCache(K,"clear"):(this._changes.updateSourceCache(K,"reload"),O.pause())}this._updateLayer(S),S.onAdd&&S.onAdd(this.map),S.scope=this.scope,this.mergeLayers()}moveLayer(i,u){this._checkLoaded();const p=this._checkLayer(i);if(!p||i===u)return;const x=this._order.indexOf(i);this._order.splice(x,1);let S=this._order.length;if(u){const T=this._order.indexOf(u);if(T===-1)return void this.fire(new r.z(new Error(`Layer with id "${u}" does not exist on this map.`)));p.slot===this._layers[u].slot?S=T:r.w(`Layer with id "${u}" has a different slot. Layers can only be rearranged within the same slot.`)}this._order.splice(S,0,i),this._changes.setDirty(),this._layerOrderChanged=!0,this.mergeLayers()}removeLayer(i){this._checkLoaded();const u=this._checkLayer(i);if(!u)return;u.setEventedParent(null);const p=this._order.indexOf(i);this._order.splice(p,1),delete this._layers[i],this._changes.setDirty(),this._layerOrderChanged=!0,this._configDependentLayers.delete(u.fqid),this._changes.removeLayer(u);const x=this.getOwnLayerSourceCache(u);if(x&&x.castsShadows){let S=!1;for(const T in this._layers)if(this._layers[T].source===u.source&&this._layers[T].canCastShadows()){S=!0;break}x.castsShadows=S}u.onRemove&&u.onRemove(this.map),this.mergeLayers()}getOwnLayer(i){return this._layers[i]}hasLayer(i){return i in this._mergedLayers}hasLayerType(i){for(const u in this._layers)if(this._layers[u].type===i)return!0;return!1}setLayerZoomRange(i,u,p){this._checkLoaded();const x=this._checkLayer(i);x&&(x.minzoom===u&&x.maxzoom===p||(u!=null&&(x.minzoom=u),p!=null&&(x.maxzoom=p),this._updateLayer(x)))}getSlots(){return this._checkLoaded(),this._mergedSlots}setSlot(i,u){this._checkLoaded();const p=this._checkLayer(i);p&&p.slot!==u&&(p.slot=u,this._updateLayer(p))}setFilter(i,u,p={}){this._checkLoaded();const x=this._checkLayer(i);if(x&&!r.bv(x.filter,u))return u==null?(x.filter=void 0,void this._updateLayer(x)):void(this._validate(Ut,`layers.${x.id}.filter`,u,{layerType:x.type},p)||(x.filter=r.d6(u),this._updateLayer(x)))}getFilter(i){const u=this._checkLayer(i);if(u)return r.d6(u.filter)}setLayoutProperty(i,u,p,x={}){this._checkLoaded();const S=this._checkLayer(i);if(S&&!r.bv(S.getLayoutProperty(u),p)){if(p!=null&&(!x||x.validate!==!1)&&H(S,Oe.call(ds,{key:`layers.${i}.layout.${u}`,layerType:S.type,objectKey:u,value:p,styleSpec:r.a5,style:{glyphs:!0,sprite:!0}})))return;S.setLayoutProperty(u,p),S.configDependencies.size!==0&&this._configDependentLayers.add(S.fqid),this._updateLayer(S)}}getLayoutProperty(i,u){const p=this._checkLayer(i);if(p)return p.getLayoutProperty(u)}setPaintProperty(i,u,p,x={}){this._checkLoaded();const S=this._checkLayer(i);if(!S||r.bv(S.getPaintProperty(u),p)||p!=null&&(!x||x.validate!==!1)&&H(S,ke.call(ds,{key:`layers.${i}.paint.${u}`,layerType:S.type,objectKey:u,value:p,styleSpec:r.a5})))return;const T=S.setPaintProperty(u,p);S.configDependencies.size!==0&&this._configDependentLayers.add(S.fqid),T&&this._updateLayer(S),this._changes.updatePaintProperties(S)}getPaintProperty(i,u){const p=this._checkLayer(i);if(p)return p.getPaintProperty(u)}setFeatureState(i,u){if(this._checkLoaded(),"target"in i){if("featuresetId"in i.target){const{featuresetId:B,importId:j}=i.target,K=this.getFragmentStyle(j),te=K.getFeaturesetLayers(B);for(const{source:Q,sourceLayer:oe}of te)K.setFeatureState({id:i.id,source:Q,sourceLayer:oe},u)}else if("layerId"in i.target){const{layerId:B}=i.target,j=this.getLayer(B);this.setFeatureState({id:i.id,source:j.source,sourceLayer:j.sourceLayer},u)}return}const p=i.source,x=i.sourceLayer,S=this._checkSource(p);if(!S)return;const T=S.type;if(T==="geojson"&&x)return void this.fire(new r.z(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if(T==="vector"&&!x)return void this.fire(new r.z(new Error("The sourceLayer parameter must be provided for vector source types.")));i.id===void 0&&this.fire(new r.z(new Error("The feature id parameter must be provided.")));const O=this.getOwnSourceCaches(p);for(const B of O)B.setFeatureState(x,i.id,u)}removeFeatureState(i,u){if(this._checkLoaded(),"target"in i){if("featuresetId"in i.target){const{featuresetId:B,importId:j}=i.target,K=this.getFragmentStyle(j),te=K.getFeaturesetLayers(B);for(const{source:Q,sourceLayer:oe}of te)K.removeFeatureState({id:i.id,source:Q,sourceLayer:oe},u)}else if("layerId"in i.target){const{layerId:B}=i.target,j=this.getLayer(B);this.removeFeatureState({id:i.id,source:j.source,sourceLayer:j.sourceLayer},u)}return}const p=i.source,x=this._checkSource(p);if(!x)return;const S=x.type,T=S==="vector"?i.sourceLayer:void 0;if(S==="vector"&&!T)return void this.fire(new r.z(new Error("The sourceLayer parameter must be provided for vector source types.")));if(u&&typeof i.id!="string"&&typeof i.id!="number")return void this.fire(new r.z(new Error("A feature id is required to remove its specific state property.")));const O=this.getOwnSourceCaches(p);for(const B of O)B.removeFeatureState(T,i.id,u)}getFeatureState(i){if(this._checkLoaded(),"target"in i){let S;if("featuresetId"in i.target){const{featuresetId:T,importId:O}=i.target,B=this.getFragmentStyle(O),j=B.getFeaturesetLayers(T);for(const{source:K,sourceLayer:te}of j){const Q=B.getFeatureState({id:i.id,source:K,sourceLayer:te});if(Q&&!S)S=Q;else if(!r.bv(S,Q))return void this.fire(new r.z(new Error("The same feature id exists in multiple sources in the featureset, but their feature states are not consistent through the sources.")))}}else if("layerId"in i.target){const{layerId:T}=i.target,O=this.getLayer(T);S=this.getFeatureState({id:i.id,source:O.source,sourceLayer:O.sourceLayer})}return S}const u=i.source,p=i.sourceLayer,x=this._checkSource(u);if(x){if(x.type!=="vector"||p)return i.id===void 0&&this.fire(new r.z(new Error("The feature id parameter must be provided."))),this.getOwnSourceCaches(u)[0].getFeatureState(p,i.id);this.fire(new r.z(new Error("The sourceLayer parameter must be provided for vector source types.")))}}setTransition(i){return this.stylesheet.transition=r.h({},this.stylesheet.transition,i),this.transition=this.stylesheet.transition,this}getTransition(){return r.h({},this.stylesheet.transition)}serialize(){this._checkLoaded();const i=this.getTerrain(),u=i&&this.terrain&&this.terrain.scope===this.scope?i:this.stylesheet.terrain;return r.dc({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,fragment:this.stylesheet.fragment,iconsets:this.stylesheet.iconsets,imports:this._serializeImports(),schema:this.stylesheet.schema,camera:this.stylesheet.camera,light:this.stylesheet.light,lights:this.stylesheet.lights,terrain:u,fog:this.stylesheet.fog,snow:this.stylesheet.snow,rain:this.stylesheet.rain,center:this.stylesheet.center,"color-theme":this.stylesheet["color-theme"],zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,projection:this.stylesheet.projection,sources:this._serializeSources(),layers:this._serializeLayers(this._order)},p=>p!==void 0)}_updateFilteredLayers(i){for(const u of Object.values(this._mergedLayers))i(u)&&this._updateLayer(u)}_updateLayer(i){this._changes.updateLayer(i);const u=this.getLayerSourceCache(i),p=r.C(i.source,i.scope),x=this._changes.getUpdatedSourceCaches();i.source&&!x[p]&&u&&u.getSource().type!=="raster"&&(this._changes.updateSourceCache(p,"reload"),u.pause()),i.invalidateCompiledFilter()}_flattenAndSortRenderedFeatures(i){const u=O=>this._mergedLayers[O].is3D(!!this.terrain),p=this.order,x={},S=[];for(let O=p.length-1;O>=0;O--){const B=p[O];if(u(B)){x[B]=O;for(const j of i){const K=j[B];if(K)for(const te of K)S.push(te)}}}S.sort((O,B)=>B.intersectionZ-O.intersectionZ);const T=[];for(let O=p.length-1;O>=0;O--){const B=p[O];if(u(B))for(let j=S.length-1;j>=0;j--){const K=S[j].feature;if(K.layer&&x[K.layer.id]<O)break;T.push(K),S.pop()}else for(const j of i){const K=j[B];if(K)for(const te of K)T.push(te.feature)}}return T}queryRenderedFeatures(i,u,p){let x;u&&!Array.isArray(u)&&u.filter&&(this._validate(Ut,"queryRenderedFeatures.filter",u.filter,null,u),x=r.b3(u.filter));const S={},T=K=>{if(Le.has(K.type))return;const te=this.getOwnLayerSourceCache(K),Q=S[te.id]=S[te.id]||{sourceCache:te,layers:{},has3DLayers:!1};K.is3D(!!this.terrain)&&(Q.has3DLayers=!0),Q.layers[K.fqid]=Q.layers[K.fqid]||{styleLayer:K,targets:[]},Q.layers[K.fqid].targets.push({filter:x})};if(u&&u.layers){if(!Array.isArray(u.layers))return this.fire(new r.z(new Error("parameters.layers must be an Array."))),[];for(const K of u.layers){const te=this._layers[K];if(!te)return this.fire(new r.z(new Error(`The layer '${K}' does not exist in the map's style and cannot be queried for features.`))),[];T(te)}}else for(const K in this._layers)T(this._layers[K]);const O=this._queryRenderedFeatures(i,S,p),B=this._flattenAndSortRenderedFeatures(O),j=[];for(const K of B)r.dd(K.layer.id)===this.scope&&j.push(K);return j}queryRenderedFeatureset(i,u,p){let x;u&&!Array.isArray(u)&&u.filter&&(this._validate(Ut,"queryRenderedFeatures.filter",u.filter,null,u),x=r.b3(u.filter));const S="mock",T=[];if(u&&u.target)T.push(Object.assign({},u,{targetId:S,filter:x}));else{const K=this.getFeaturesetDescriptors();for(const te of K)T.push({targetId:S,filter:x,target:te});for(const{style:te}of this.fragments){const Q=te.getFeaturesetDescriptors();for(const oe of Q)T.push({targetId:S,filter:x,target:oe})}}const O=this.queryRenderedTargets(i,T,p),B=[],j=new Set;for(const K of O)for(const te of K.variants[S])Nu(te,K,j)||B.push(new r.de(K,te));return B}queryRenderedTargets(i,u,p){const x={},S=(O,B,j,K)=>{const te=x[B.id]=x[B.id]||{sourceCache:B,layers:{},has3DLayers:!1};if(te.layers[O.fqid]=te.layers[O.fqid]||{styleLayer:O,targets:[]},O.is3D(!!this.terrain)&&(te.has3DLayers=!0),!K)return j.uniqueFeatureID=!1,void te.layers[O.fqid].targets.push(j);te.layers[O.fqid].targets.push(Object.assign({},j,{namespace:K.namespace,properties:K.properties,uniqueFeatureID:K.uniqueFeatureID}))};for(const O of u)if("featuresetId"in O.target){const{featuresetId:B,importId:j}=O.target,K=this.getFragmentStyle(j);if(!K||!K._featuresetSelectors)continue;const te=K._featuresetSelectors[B];if(!te){this.fire(new r.z(new Error(`The featureset '${B}' does not exist in the map's style and cannot be queried for features.`)));continue}for(const Q of te){const oe=K.getOwnLayer(Q.layerId);oe&&!Le.has(oe.type)&&S(oe,K.getOwnLayerSourceCache(oe),O,Q)}}else if("layerId"in O.target){const{layerId:B}=O.target,j=this.getLayer(B);if(!j||Le.has(j.type))continue;S(j,this.getLayerSourceCache(j),O)}const T=this._queryRenderedFeatures(i,x,p);return this._flattenAndSortRenderedFeatures(T)}_queryRenderedFeatures(i,u,p){const x=[],S=!!this.map._showQueryGeometry,T=xi.createFromScreenPoints(i,p);for(const O in u){const B=Va(T,u[O],this._availableImages,p,S);Object.keys(B).length&&x.push(B)}if(this.placement)for(const O in u){if(!u[O].sourceCache._onlySymbols)continue;const B=ma(T.screenGeometry,u[O],this._availableImages,this.placement.collisionIndex,this.placement.retainedQueryData,this.map.getWorldview());Object.keys(B).length&&x.push(B)}return x}querySourceFeatures(i,u){const p=u&&u.filter;p&&this._validate(Ut,"querySourceFeatures.filter",p,null,u);let x=[];const S=this.getOwnSourceCaches(i);for(const T of S)x=x.concat(Ic(T,u));return x}addSourceType(i,u,p){return tn.getSourceType(i)?p(new Error(`A source type called "${i}" already exists.`)):(tn.setSourceType(i,u),u.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:i,url:u.workerSourceURL},p):p(null,null))}getFlatLight(){return this.light.getLight()}setFlatLight(i,u,p={}){this._checkLoaded();const x=this.light.getLight();let S=!1;for(const O in i)if(!r.bv(i[O],x[O])){S=!0;break}if(!S)return;const T=this._getTransitionParameters();this.light.setLight(i,u,p),this.light.updateTransitions(T)}getTerrain(){return this.terrain&&this.terrain.drapeRenderMode===1?this.terrain.get():null}setTerrainForDraping(){this.setTerrain({source:"",exaggeration:0},0)}checkCanvasFingerprintNoise(){this.disableElevatedTerrain===void 0&&(this.disableElevatedTerrain=r.q.hasCanvasFingerprintNoise(),this.disableElevatedTerrain&&r.w("Terrain and hillshade are disabled because of Canvas2D limitations when fingerprinting protection is enabled (e.g. in private browsing mode)."))}setTerrain(i,u=1){if(this._checkLoaded(),!i)return this.terrainSetForDrapingOnly()||(delete this.terrain,this.map.transform.projection.requiresDraping&&this.setTerrainForDraping()),u===0&&delete this.terrain,i===null?this.stylesheet.terrain=null:delete this.stylesheet.terrain,this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);this.checkCanvasFingerprintNoise();let p=i;const x=i.source==null;if(u===1){if(this.disableElevatedTerrain)return;if(typeof p.source=="object"){const O="terrain-dem-src";this.addSource(O,p.source),p=r.d6(p),p=r.h(p,{source:O})}const S=r.h({},p),T={};if(this.terrain&&x){S.source=this.terrain.get().source;const O=this.terrain?this.getFragmentStyle(this.terrain.scope):null;O&&(T.style=O.serialize())}if(this._validate(Rn,"terrain",S,T))return}if(!this.terrain||this.terrain.scope!==this.scope&&!x||this.terrain&&u!==this.terrain.drapeRenderMode){if(!p)return;this._createTerrain(p,u),this.fire(new r.A("data",{dataType:"style"}))}else{const S=this.terrain,T=S.get();for(const O of Object.keys(r.a5.terrain))!p.hasOwnProperty(O)&&r.a5.terrain[O].default&&(p[O]=r.a5.terrain[O].default);for(const O in i)if(!r.bv(i[O],T[O])){S.set(i,this.options),this.stylesheet.terrain=i;const B=this._getTransitionParameters({duration:0});S.updateTransitions(B),this.fire(new r.A("data",{dataType:"style"}));break}}this.mergeTerrain(),this.updateDrapeFirstLayers(),this._markersNeedUpdate=!0}_createFog(i){const u=this.fog=new Mr(i,this.map.transform,this.scope,this.options);this.stylesheet.fog=u.get();const p=this._getTransitionParameters({duration:0});u.updateTransitions(p)}_createSnow(i){const u=this.snow=new Rr(i,this.map.transform,this.scope,this.options);this.stylesheet.snow=u.get();const p=this._getTransitionParameters({duration:0});u.updateTransitions(p)}_createRain(i){const u=this.rain=new vi(i,this.map.transform,this.scope,this.options);this.stylesheet.rain=u.get();const p=this._getTransitionParameters({duration:0});u.updateTransitions(p)}_updateMarkersOpacity(){this.map._markers.length!==0&&this.map._requestDomTask(()=>{for(const i of this.map._markers)i._evaluateOpacity()})}getFog(){return this.fog?this.fog.get():null}setFog(i){if(this._checkLoaded(),!i)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){const u=this.fog;if(!r.bv(u.get(),i)){u.set(i,this.options),this.stylesheet.fog=u.get();const p=this._getTransitionParameters({duration:0});u.updateTransitions(p)}}else this._createFog(i);this._markersNeedUpdate=!0}getSnow(){return this.snow?this.snow.get():null}setSnow(i){if(this._checkLoaded(),!i)return delete this.snow,void delete this.stylesheet.snow;if(this.snow){const u=this.snow;if(!r.bv(u.get(),i)){u.set(i,this.options),this.stylesheet.snow=u.get();const p=this._getTransitionParameters({duration:0});u.updateTransitions(p)}}else this._createSnow(i);this._markersNeedUpdate=!0}getRain(){return this.rain?this.rain.get():null}setRain(i){if(this._checkLoaded(),!i)return delete this.rain,void delete this.stylesheet.rain;if(this.rain){const u=this.rain;if(!r.bv(u.get(),i)){u.set(i,this.options),this.stylesheet.rain=u.get();const p=this._getTransitionParameters({duration:0});u.updateTransitions(p)}}else this._createRain(i);this._markersNeedUpdate=!0}_reloadColorTheme(){const i=()=>{for(const x in this._layers)this._layers[x].lut=this._styleColorTheme.lut;for(const x in this._sourceCaches)this._sourceCaches[x].clearTiles()},u=this._styleColorTheme.colorThemeOverride?this._styleColorTheme.colorThemeOverride:this._styleColorTheme.colorTheme;if(!u)return this._styleColorTheme.lut=null,void i();const p=this._evaluateColorThemeData(u);this._loadColorTheme(p).then(()=>{this.fire(new r.A("colorthemeset")),i()}).catch(x=>{r.w(`Couldn't set color theme: ${x}`)})}setColorTheme(i){this._checkLoaded(),this._styleColorTheme.colorThemeOverride&&r.w("Note: setColorTheme is called on a style with a color-theme override, the passed color-theme won't be visible."),this._styleColorTheme.colorTheme=i,this._reloadColorTheme()}setImportColorTheme(i,u){const p=this.getFragmentStyle(i);p&&(p._styleColorTheme.colorThemeOverride=u,p._reloadColorTheme())}_getTransitionParameters(i){return{now:r.q.now(),transition:r.h(this.transition,i)}}updateDrapeFirstLayers(){if(!this.terrain)return;const i=[],u=[];for(const p of this._mergedOrder)this.isLayerDraped(this._mergedLayers[p])?i.push(p):u.push(p);this._drapedFirstOrder=[],this._drapedFirstOrder.push(...i),this._drapedFirstOrder.push(...u)}_createTerrain(i,u){const p=this.terrain=new je(i,u,this.scope,this.options,this.map.getWorldview());u===1&&(this.stylesheet.terrain=i),this.mergeTerrain(),this.updateDrapeFirstLayers(),this._force3DLayerUpdate();const x=this._getTransitionParameters({duration:0});p.updateTransitions(x)}_force3DLayerUpdate(){for(const i in this._layers){const u=this._layers[i];u.type==="fill-extrusion"&&this._updateLayer(u)}}_forceSymbolLayerUpdate(){for(const i in this._layers){const u=this._layers[i];u.type==="symbol"&&this._updateLayer(u)}}_validate(i,u,p,x,S={}){if(S&&S.validate===!1)return!1;const T=r.h({},this.serialize());return H(this,i.call(ds,r.h({key:u,style:T,value:p,styleSpec:r.a5},x)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),r.df.off("pluginStateChange",this._rtlTextPluginCallback);for(const i in this._mergedLayers)this._mergedLayers[i].setEventedParent(null);for(const i in this._mergedSourceCaches)this._mergedSourceCaches[i].clearTiles(),this._mergedSourceCaches[i].setEventedParent(null);this.imageManager.removeScope(this.scope),this.setEventedParent(null),delete this.fog,delete this.snow,delete this.rain,delete this.terrain,delete this.ambientLight,delete this.directionalLight,this.isRootStyle()&&(this.imageManager.setEventedParent(null),this.modelManager.setEventedParent(null),this.modelManager.destroy(),this.dispatcher.remove())}clearSource(i){const u=this.getSourceCaches(i);for(const p of u)p.clearTiles()}clearSources(){for(const i in this._mergedSourceCaches)this._mergedSourceCaches[i].clearTiles()}reloadSource(i){const u=this.getSourceCaches(i);for(const p of u)p.resume(),p.reload()}reloadSources(){for(const i of this.getSources())i.reload&&i.reload()}reloadModels(){this.modelManager.reloadModels(""),this.forEachFragmentStyle(i=>{i.modelManager.reloadModels(i.scope)})}updateSources(i){let u;this.directionalLight&&(u=$c(this.directionalLight));const p=new Set;for(const x in this._mergedLayers){const S=this._mergedLayers[x];S.hasElevation()&&!p.has(S.source)&&p.add(S.source)}for(const x in this._mergedSourceCaches){const S=this._mergedSourceCaches[x],T=p.has(S._source.id);S.update(i,void 0,void 0,u,T)}}_generateCollisionBoxes(){for(const i in this._sourceCaches){const u=this._sourceCaches[i];u.resume(),u.reload()}}_updatePlacement(i,u,p,x,S,T,O=!1){let B=!1,j=!1;const K={},te={};for(const Q of this._mergedOrder){const oe=this._mergedLayers[Q];if(oe.type!=="symbol")continue;const Ce=r.C(oe.source,oe.scope);let _e=K[Ce];if(!_e){const Me=this.getLayerSourceCache(oe);if(!Me)continue;const ze=Me.getRenderableIds(!0).map(qe=>Me.getTileByID(qe));te[Ce]=ze.slice(),_e=K[Ce]=ze.sort((qe,Je)=>Je.tileID.overscaledZ-qe.tileID.overscaledZ||(qe.tileID.isLessThan(Je.tileID)?-1:1))}const Ee=this.crossTileSymbolIndex.addLayer(oe,_e,u.center.lng,u.projection);B=B||Ee}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._mergedOrder),O=O||this._layerOrderChanged||x===0,this._layerOrderChanged&&this.fire(new r.A("neworder")),(O||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(r.q.now(),u.zoom))&&(this.pauseablePlacement=new Dd(u,this._mergedOrder,O,p,x,S,this.placement,this.fog&&u.projection.supportsFog?this.fog.state:null,this._buildingIndex),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._mergedOrder,this._mergedLayers,K,te,this.map.painter.scaleFactor),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(r.q.now()),j=!0),B&&this.pauseablePlacement.placement.setStale()),j||B){this._buildingIndex.onNewFrame(u.zoom);for(let Q=0;Q<this._mergedOrder.length;Q++){const oe=this._mergedLayers[this._mergedOrder[Q]];if(oe.type!=="symbol")continue;const Ce=this.isLayerClipped(oe);this.placement.updateLayerOpacities(oe,K[r.C(oe.source,oe.scope)],Q,Ce?T:null)}}return{needsRerender:!this.pauseablePlacement.isDone()||this.placement.hasTransitions(r.q.now())}}_releaseSymbolFadeTiles(){for(const i in this._sourceCaches)this._sourceCaches[i].releaseSymbolFadeTiles()}addImport(i,u){this._checkLoaded();const p=this.stylesheet.imports=this.stylesheet.imports||[];if(p.findIndex(({id:S})=>S===i.id)!==-1)return void this.fire(new r.z(new Error(`Import with id '${i.id}' already exists in the map's style.`)));if(!u)return p.push(i),this._loadImports([i],!0);const x=p.findIndex(({id:S})=>S===u);return x===-1&&this.fire(new r.z(new Error(`Import with id "${u}" does not exist on this map.`))),this.stylesheet.imports=p.slice(0,x).concat(i).concat(p.slice(x)),this._loadImports([i],!0,u)}updateImport(i,u){this._checkLoaded();const p=this.stylesheet.imports||[],x=this.getImportIndex(i);return x===-1?this:typeof u=="string"?(this.setImportUrl(i,u),this):(u.url&&u.url!==p[x].url&&this.setImportUrl(i,u.url),r.bv(u.config,p[x].config)||this.setImportConfig(i,u.config,u.data.schema),r.bv(u.data,p[x].data)||this.setImportData(i,u.data),this)}moveImport(i,u){this._checkLoaded();let p=this.stylesheet.imports||[];const x=this.getImportIndex(i);if(x===-1)return this;const S=this.getImportIndex(u);if(S===-1)return this;const T=p[x],O=this.fragments[x];return p=p.filter(({id:B})=>B!==i),this.fragments=this.fragments.filter(({id:B})=>B!==i),this.stylesheet.imports=p.slice(0,S).concat(T).concat(p.slice(S)),this.fragments=this.fragments.slice(0,S).concat(O).concat(this.fragments.slice(S)),this.mergeLayers(),this}setImportUrl(i,u){this._checkLoaded();const p=this.stylesheet.imports||[],x=this.getImportIndex(i);if(x===-1)return this;p[x].url=u;const S=this.fragments[x];return S.style=this._createFragmentStyle(p[x]),S.style.on("style.import.load",()=>this.mergeAll()),S.style.loadURL(u),this}setImportData(i,u){this._checkLoaded();const p=this.getImportIndex(i),x=this.stylesheet.imports||[];return p===-1?this:u?(this.fragments[p].style.setState(u),this._reloadImports(),this):(delete x[p].data,this.setImportUrl(i,x[p].url))}setImportConfig(i,u,p){this._checkLoaded();const x=this.getImportIndex(i),S=this.stylesheet.imports||[];if(x===-1)return this;u?S[x].config=u:delete S[x].config;const T=this.fragments[x];p&&T.style.stylesheet&&(T.style.stylesheet.schema=p);const O=T.style.stylesheet&&T.style.stylesheet.schema;return T.config=u,T.style.updateConfig(u,O),this.updateConfigDependencies(),this}removeImport(i){this._checkLoaded();const u=this.stylesheet.imports||[],p=this.getImportIndex(i);p!==-1&&(u.splice(p,1),this.fragments[p].style._remove(),this.fragments.splice(p,1),this._reloadImports())}getImportIndex(i){const u=(this.stylesheet.imports||[]).findIndex(p=>p.id===i);return u===-1&&this.fire(new r.z(new Error(`Import '${i}' does not exist in the map's style and cannot be updated.`))),u}getLayer(i){return this._mergedLayers[i]}getSources(){const i=[];for(const u in this._mergedOtherSourceCaches){const p=this._mergedOtherSourceCaches[u];p&&i.push(p.getSource())}return i}getSource(i,u){const p=this.getSourceCache(i,u);return p&&p.getSource()}getLayerSource(i){const u=this.getLayerSourceCache(i);return u&&u.getSource()}getSourceCache(i,u){const p=r.C(i,u);return this._mergedOtherSourceCaches[p]}getLayerSourceCache(i){const u=r.C(i.source,i.scope);return i.type==="symbol"?this._mergedSymbolSourceCaches[u]:this._mergedOtherSourceCaches[u]}getSourceCaches(i){if(i==null)return Object.values(this._mergedSourceCaches);const u=[];return this._mergedOtherSourceCaches[i]&&u.push(this._mergedOtherSourceCaches[i]),this._mergedSymbolSourceCaches[i]&&u.push(this._mergedSymbolSourceCaches[i]),u}updateSourceCaches(){const i=this._changes.getUpdatedSourceCaches();for(const u in i){const p=i[u];p==="reload"?this.reloadSource(u):p==="clear"&&this.clearSource(u)}}updateLayers(i){const u=this._changes.getUpdatedPaintProperties();for(const p of u){const x=this.getLayer(p);x&&x.updateTransitions(i)}}getGlyphsUrl(){return this.stylesheet.glyphs}setGlyphsUrl(i){this.stylesheet.glyphs=i,this.glyphManager.setURL(i,this.scope)}getImages(i,u,p){this.imageManager.getImages(u.images,u.scope,p),this._updateTilesForChangedImages();const x=T=>{if(T){const O=u.images.map(B=>r.I.toString(B));T.setDependencies(u.tileID.key,u.type,O)}},S=r.C(u.source,u.scope);x(this._mergedOtherSourceCaches[S]),x(this._mergedSymbolSourceCaches[S])}rasterizeImages(i,u,p){this.imageManager.rasterizeImages(u,p)}getGlyphs(i,u,p){this.glyphManager.getGlyphs(u.stacks,u.scope,p)}getResource(i,u,p){return r.dg(u,p)}getOwnSourceCache(i){return this._otherSourceCaches[i]}getOwnLayerSourceCache(i){return i.type==="symbol"?this._symbolSourceCaches[i.source]:this._otherSourceCaches[i.source]}getOwnSourceCaches(i){const u=[];return this._otherSourceCaches[i]&&u.push(this._otherSourceCaches[i]),this._symbolSourceCaches[i]&&u.push(this._symbolSourceCaches[i]),u}_isSourceCacheLoaded(i){const u=this.getOwnSourceCaches(i);return u.length===0?(this.fire(new r.z(new Error(`There is no source with ID '${i}'`))),!1):u.every(p=>p.loaded())}has3DLayers(){return this._has3DLayers}hasSymbolLayers(){return this._hasSymbolLayers}hasCircleLayers(){return this._hasCircleLayers}isLayerClipped(i,u){if(!this._clipLayerPresent&&i.type!=="fill-extrusion"&&i.type!=="building")return!1;const p=i.type==="fill-extrusion"&&i.sourceLayer==="building",x=i.type==="building";if(i.is3D(!!this.terrain)){if(p||x||u&&u.type==="batched-model"||i.type==="model")return!0}else if(i.type==="symbol")return!0;return!1}_clearWorkerCaches(){this.dispatcher.broadcast("clearCaches")}destroy(){this._clearWorkerCaches(),this.fragments.forEach(i=>{i.style._remove()}),this.terrainSetForDrapingOnly()&&(delete this.terrain,delete this.stylesheet.terrain)}}tn.getSourceType=function(f){return Th[f]},tn.setSourceType=function(f,i){Th[f]=i},tn.registerForPluginStateChange=r.dh;var vn=`
#define EPSILON 0.0000001
#define PI 3.141592653589793
#ifdef RENDER_CUTOFF
float cutoff_opacity(vec4 cutoff_params,float depth) {float near=cutoff_params.x;float far=cutoff_params.y;float cutoffStart=cutoff_params.z;float cutoffEnd=cutoff_params.w;float linearDepth=(depth-near)/(far-near);return clamp((linearDepth-cutoffStart)/(cutoffEnd-cutoffStart),0.0,1.0);}
#endif`,or=`
out vec4 glFragColor;highp float unpack_depth(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}highp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(255.0*255.0*255.0,255.0*255.0,255.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/255.0,1.0/255.0,1.0/255.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}
#ifdef INDICATOR_CUTOUT
uniform vec3 u_indicator_cutout_centers;uniform vec4 u_indicator_cutout_params;
#endif
vec4 applyCutout(vec4 color,float height) {
#ifdef INDICATOR_CUTOUT
float verticalFadeRange=u_indicator_cutout_centers.z*0.25;float holeMinOpacity=mix(1.0,u_indicator_cutout_params.x,smoothstep(u_indicator_cutout_centers.z,u_indicator_cutout_centers.z+verticalFadeRange,height));float holeRadius=max(u_indicator_cutout_params.y,0.0);float holeAspectRatio=u_indicator_cutout_params.z;float fadeStart=u_indicator_cutout_params.w;float distA=distance(vec2(gl_FragCoord.x,gl_FragCoord.y*holeAspectRatio),vec2(u_indicator_cutout_centers[0],u_indicator_cutout_centers[1]*holeAspectRatio));return color*min(smoothstep(fadeStart,holeRadius,distA)+holeMinOpacity,1.0);
#else
return color;
#endif
}
#ifdef DEBUG_WIREFRAME
#define HANDLE_WIREFRAME_DEBUG \\
glFragColor=vec4(0.7,0.0,0.0,0.7); \\
gl_FragDepth=gl_FragCoord.z-0.0001;
#else
#define HANDLE_WIREFRAME_DEBUG
#endif
#ifdef RENDER_CUTOFF
uniform highp vec4 u_cutoff_params;in float v_cutoff_opacity;
#endif
vec4 textureLodCustom(sampler2D image,highp vec2 pos,highp vec2 lod_coord) {highp vec2 size=vec2(textureSize(image,0));highp vec2 dx=dFdx(lod_coord.xy*size);highp vec2 dy=dFdy(lod_coord.xy*size);highp float delta_max_sqr=max(dot(dx,dx),dot(dy,dy));highp float lod=0.5*log2(delta_max_sqr);return textureLod(image,pos,lod);}vec4 applyLUT(highp sampler3D lut,vec4 col) {vec3 size=vec3(textureSize(lut,0));vec3 uvw=(col.rbg*float(size-1.0)+0.5)/size;return vec4(texture(lut,uvw).rgb,col.a);}vec3 applyLUT(highp sampler3D lut,vec3 col) {return applyLUT(lut,vec4(col,1.0)).rgb;}`,$r=`
#define EXTENT 8192.0
#define RAD_TO_DEG 180.0/PI
#define DEG_TO_RAD PI/180.0
#define GLOBE_RADIUS EXTENT/PI/2.0
float wrap(float n,float min,float max) {float d=max-min;float w=mod(mod(n-min,d)+d,d)+min;return (w==min) ? max : w;}
#ifdef PROJECTION_GLOBE_VIEW
vec3 mercator_tile_position(mat4 matrix,vec2 tile_anchor,vec3 tile_id,vec2 mercator_center) {
#ifndef PROJECTED_POS_ON_VIEWPORT
float tiles=tile_id.z;vec2 mercator=(tile_anchor/EXTENT+tile_id.xy)/tiles;mercator-=mercator_center;mercator.x=wrap(mercator.x,-0.5,0.5);vec4 mercator_tile=vec4(mercator.xy*EXTENT,EXTENT/(2.0*PI),1.0);mercator_tile=matrix*mercator_tile;return mercator_tile.xyz;
#else
return vec3(0.0);
#endif
}vec3 mix_globe_mercator(vec3 globe,vec3 mercator,float t) {return mix(globe,mercator,t);}mat3 globe_mercator_surface_vectors(vec3 pos_normal,vec3 up_dir,float zoom_transition) {vec3 normal=zoom_transition==0.0 ? pos_normal : normalize(mix(pos_normal,up_dir,zoom_transition));vec3 xAxis=normalize(vec3(normal.z,0.0,-normal.x));vec3 yAxis=normalize(cross(normal,xAxis));return mat3(xAxis,yAxis,normal);}
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(
unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const vec2 units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (units_to_pixels*pos+offset)/pattern_size;}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {return get_pattern_pos(pixel_coord_upper,pixel_coord_lower,pattern_size,vec2(tile_units_to_pixels),pos);}float mercatorXfromLng(float lng) {return (180.0+lng)/360.0;}float mercatorYfromLat(float lat) {return (180.0-(RAD_TO_DEG*log(tan(PI/4.0+lat/2.0*DEG_TO_RAD))))/360.0;}vec3 latLngToECEF(vec2 latLng) {latLng=DEG_TO_RAD*latLng;float cosLat=cos(latLng[0]);float sinLat=sin(latLng[0]);float cosLng=cos(latLng[1]);float sinLng=sin(latLng[1]);float sx=cosLat*sinLng*GLOBE_RADIUS;float sy=-sinLat*GLOBE_RADIUS;float sz=cosLat*cosLng*GLOBE_RADIUS;return vec3(sx,sy,sz);}
#ifdef RENDER_CUTOFF
uniform vec4 u_cutoff_params;out float v_cutoff_opacity;
#endif
const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);const float skirtOffset=24575.0;vec3 decomposeToPosAndSkirt(vec2 posWithComposedSkirt)
{float skirt=float(posWithComposedSkirt.x >=skirtOffset);vec2 pos=posWithComposedSkirt-vec2(skirt*skirtOffset,0.0);return vec3(pos,skirt);}`,Xr="in highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;out highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}",_i=`
#define ELEVATION_SCALE 7.0
#define ELEVATION_OFFSET 450.0
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;vec3 elevationVector(vec2 pos) {vec2 uv=pos/EXTENT;vec3 up=normalize(mix(
mix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}
#else
vec3 elevationVector(vec2 pos) { return vec3(0,0,1); }
#endif
#ifdef TERRAIN
uniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float currentElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture(u_dem,pos).r;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=texture(u_dem,pos).r;float tr=texture(u_dem,pos+vec2(dd,0)).r;float bl=texture(u_dem,pos+vec2(0,dd)).r;float br=texture(u_dem,pos+vec2(dd,dd)).r;return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}float prevElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture(u_dem_prev,pos).r;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=texture(u_dem_prev,pos).r;float tr=texture(u_dem_prev,pos+vec2(dd,0)).r;float bl=texture(u_dem_prev,pos+vec2(0,dd)).r;float br=texture(u_dem_prev,pos+vec2(dd,dd)).r;return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}
#ifdef TERRAIN_VERTEX_MORPHING
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
float nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}
#else
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
return currentElevation(apos);}
#endif
vec4 fourSample(vec2 pos,vec2 off) {float tl=texture(u_dem,pos).r;float tr=texture(u_dem,pos+vec2(off.x,0.0)).r;float bl=texture(u_dem,pos+vec2(0.0,off.y)).r;float br=texture(u_dem,pos+off).r;return vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}
#else
float elevation(vec2 pos) { return 0.0; }
#endif
#ifdef DEPTH_OCCLUSION
uniform highp sampler2D u_depth;uniform highp vec2 u_depth_size_inv;uniform highp vec2 u_depth_range_unpack;uniform highp float u_occluder_half_size;uniform highp float u_occlusion_depth_offset;
#ifdef DEPTH_D24
float unpack_depth(float depth) {return depth*u_depth_range_unpack.x+u_depth_range_unpack.y;}vec4 unpack_depth4(vec4 depth) {return depth*u_depth_range_unpack.x+vec4(u_depth_range_unpack.y);}
#else
highp float unpack_depth_rgba(vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}
#endif
bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;
#ifdef DEPTH_D24
float depth=unpack_depth(texture(u_depth,(coord.xy+1.0)*0.5).r);
#else
float depth=unpack_depth_rgba(texture(u_depth,(coord.xy+1.0)*0.5));
#endif
return coord.z+u_occlusion_depth_offset > depth;}highp vec4 getCornerDepths(vec2 coord) {highp vec3 df=vec3(u_occluder_half_size*u_depth_size_inv,0.0);highp vec2 uv=0.5*coord.xy+0.5;
#ifdef DEPTH_D24
highp vec4 depth=vec4(
texture(u_depth,uv-df.xz).r,texture(u_depth,uv+df.xz).r,texture(u_depth,uv-df.zy).r,texture(u_depth,uv+df.zy).r
);depth=unpack_depth4(depth);
#else
highp vec4 depth=vec4(
unpack_depth_rgba(texture(u_depth,uv-df.xz)),unpack_depth_rgba(texture(u_depth,uv+df.xz)),unpack_depth_rgba(texture(u_depth,uv-df.zy)),unpack_depth_rgba(texture(u_depth,uv+df.zy))
);
#endif
return depth;}highp float occlusionFadeMultiSample(vec4 frag) {highp vec3 coord=frag.xyz/frag.w;highp vec2 uv=0.5*coord.xy+0.5;int NX=3;int NY=4;highp vec2 df=u_occluder_half_size*u_depth_size_inv;highp vec2 oneStep=2.0*u_occluder_half_size*u_depth_size_inv/vec2(NX-1,NY-1);highp float res=0.0;for (int y=0; y < NY;++y) {for (int x=0; x < NX;++x) {
#ifdef DEPTH_D24
highp float depth=unpack_depth(texture(u_depth,uv-df+vec2(float(x)*oneStep.x,float(y)*oneStep.y)).r);
#else
highp float depth=unpack_depth_rgba(texture(u_depth,uv-df+vec2(float(x)*oneStep.x,float(y)*oneStep.y)));
#endif
res+=1.0-clamp(300.0*(coord.z+u_occlusion_depth_offset-depth),0.0,1.0);}}res=clamp(2.0*res/float(NX*NY)-0.5,0.0,1.0);return res;}highp float occlusionFade(vec4 frag) {highp vec3 coord=frag.xyz/frag.w;highp vec4 depth=getCornerDepths(coord.xy);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z+u_occlusion_depth_offset)-depth),0.0,1.0));}
#else
bool isOccluded(vec4 frag) { return false; }highp float occlusionFade(vec4 frag) { return 1.0; }highp float occlusionFadeMultiSample(vec4 frag) { return 1.0; }
#endif//DEPTH_OCCLUSION`,fs=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump mat4 u_fog_matrix;out vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}
#endif`,ss=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump vec2 u_fog_vertical_limit;uniform mediump float u_fog_temporal_offset;in vec3 v_fog_pos;uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform highp vec2 u_viewport;uniform float u_globe_transition;uniform int u_is_globe;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}float globe_glow_progress() {highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float sdf=length(closest_point-u_globe_pos)/u_globe_radius;return sdf+PI*0.5;}float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos,float opacity_limit) {float depth=length(pos);float opacity;if (u_is_globe==1) {float glow_progress=globe_glow_progress();float t=mix(glow_progress,depth,u_globe_transition);opacity=fog_opacity(fog_range(t));} else {opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);}return mix(color,u_fog_color.rgb,min(opacity,opacity_limit));}vec3 fog_apply(vec3 color,vec3 pos) {return fog_apply(color,pos,1.0);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec4 fog_apply_premultiplied(vec4 color,vec3 pos,float heightMeters) {float verticalProgress=(u_fog_vertical_limit.x > 0.0 || u_fog_vertical_limit.y > 0.0) ? smoothstep(u_fog_vertical_limit.x,u_fog_vertical_limit.y,heightMeters) : 0.0;float opacityLimit=1.0-smoothstep(0.9,1.0,fog_opacity(pos));return mix(fog_apply_premultiplied(color,pos),color,min(verticalProgress,opacityLimit));}vec3 fog_dither(vec3 color) {return color;}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}
#endif`,rs=`#ifdef RASTER_ARRAY
uniform highp sampler2D u_image0;uniform sampler2D u_image1;const vec4 NODATA=vec4(1);ivec4 _raTexLinearCoord(highp vec2 texCoord,highp vec2 texResolution,out highp vec2 fxy) {texCoord=texCoord*texResolution-0.5;fxy=fract(texCoord);texCoord-=fxy;return ivec4(texCoord.xxyy+vec2(1.5,0.5).xyxy);}vec2 _raTexLinearMix(highp vec2 fxy,highp vec4 colorMix,highp float colorOffset,highp vec4 t00,highp vec4 t10,highp vec4 t01,highp vec4 t11) {vec2 c00=t00==NODATA ? vec2(0) : vec2(colorOffset+dot(t00,colorMix),1);vec2 c10=t10==NODATA ? vec2(0) : vec2(colorOffset+dot(t10,colorMix),1);vec2 c01=t01==NODATA ? vec2(0) : vec2(colorOffset+dot(t01,colorMix),1);vec2 c11=t11==NODATA ? vec2(0) : vec2(colorOffset+dot(t11,colorMix),1);return mix(mix(c01,c11,fxy.x),mix(c00,c10,fxy.x),fxy.y);}vec2 raTexture2D_image0_linear(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec2 fxy;ivec4 c=_raTexLinearCoord(texCoord,texResolution,fxy);return _raTexLinearMix(fxy,colorMix,colorOffset,texelFetch(u_image0,c.yz,0),texelFetch(u_image0,c.xz,0),texelFetch(u_image0,c.yw,0),texelFetch(u_image0,c.xw,0)
);}vec2 raTexture2D_image1_linear(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec2 fxy;ivec4 c=_raTexLinearCoord(texCoord,texResolution,fxy);return _raTexLinearMix(fxy,colorMix,colorOffset,texelFetch(u_image1,c.yz,0),texelFetch(u_image1,c.xz,0),texelFetch(u_image1,c.yw,0),texelFetch(u_image1,c.xw,0)
);}vec2 raTexture2D_image0_nearest(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec4 t=texelFetch(u_image0,ivec2(texCoord*texResolution),0);return t==NODATA ? vec2(0) : vec2(colorOffset+dot(t,colorMix),1);}vec2 raTexture2D_image1_nearest(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec4 t=texelFetch(u_image1,ivec2(texCoord*texResolution),0);return t==NODATA ? vec2(0) : vec2(colorOffset+dot(t,colorMix),1);}
#endif`,Co=`#ifdef RASTER_ARRAY
uniform sampler2D u_velocity;uniform mediump vec2 u_velocity_res;uniform mediump float u_max_speed;const vec4 NO_DATA=vec4(1);const vec2 INVALID_VELOCITY=vec2(-1);uniform highp vec2 u_uv_offset;uniform highp float u_data_offset;uniform highp vec2 u_data_scale;ivec4 rasterArrayLinearCoord(highp vec2 texCoord,highp vec2 texResolution,out highp vec2 fxy) {texCoord=texCoord*texResolution-0.5;fxy=fract(texCoord);texCoord-=fxy;return ivec4(texCoord.xxyy+vec2(1.5,0.5).xyxy);}highp vec2 lookup_velocity(highp vec2 uv) {uv=u_uv_offset.x+u_uv_offset.y*uv;highp vec2 fxy;ivec4 c=rasterArrayLinearCoord(uv,u_velocity_res,fxy);highp vec4 tl=texelFetch(u_velocity,c.yz,0);highp vec4 tr=texelFetch(u_velocity,c.xz,0);highp vec4 bl=texelFetch(u_velocity,c.yw,0);highp vec4 br=texelFetch(u_velocity,c.xw,0);if (tl==NO_DATA) {return INVALID_VELOCITY;}if (tr==NO_DATA) {return INVALID_VELOCITY;}if (bl==NO_DATA) {return INVALID_VELOCITY;}if (br==NO_DATA) {return INVALID_VELOCITY;}highp vec4 t=mix(mix(bl,br,fxy.x),mix(tl,tr,fxy.x),fxy.y);highp vec2 velocity=u_data_offset+vec2(dot(t.rg,u_data_scale),dot(t.ba,u_data_scale));velocity.y=-velocity.y;velocity/=max(u_max_speed,length(velocity));return velocity;}
#endif
uniform highp float u_particle_pos_scale;uniform highp vec2 u_particle_pos_offset;highp vec4 pack_pos_to_rgba(highp vec2 p) {highp vec2 v=(p+u_particle_pos_offset)/u_particle_pos_scale;highp vec4 r=vec4(v.x,fract(v.x*255.0),v.y,fract(v.y*255.0));return vec4(r.x-r.y/255.0,r.y,r.z-r.w/255.0,r.w);}highp vec2 unpack_pos_from_rgba(highp vec4 v) {v=floor(v*255.0+0.5)/255.0;highp vec2 p=vec2(v.x+(v.y/255.0),v.z+(v.w/255.0));return u_particle_pos_scale*p-u_particle_pos_offset;}`,Pn=`#ifdef RENDER_SHADOWS
uniform mediump vec3 u_shadow_direction;uniform highp vec3 u_shadow_normal_offset;vec3 shadow_normal_offset(vec3 normal) {float tileInMeters=u_shadow_normal_offset[0];vec3 n=vec3(-normal.xy,tileInMeters*normal.z);float dotScale=min(1.0-dot(normal,u_shadow_direction),1.0)*0.5+0.5;return n*dotScale;}vec3 shadow_normal_offset_model(vec3 normal) {vec3 transformed_normal=vec3(-normal.xy,normal.z);float NDotL=dot(normalize(transformed_normal),u_shadow_direction);float dotScale=min(1.0-NDotL,1.0)*0.5+0.5;return normal*dotScale;}float shadow_normal_offset_multiplier0() {return u_shadow_normal_offset[1];}float shadow_normal_offset_multiplier1() {return u_shadow_normal_offset[2];}
#endif//RENDER_SHADOWS`,Zl=`#ifdef RENDER_SHADOWS
precision highp sampler2DShadow;uniform sampler2DShadow u_shadowmap_0;uniform sampler2DShadow u_shadowmap_1;uniform float u_shadow_intensity;uniform float u_shadow_map_resolution;uniform float u_shadow_texel_size;uniform highp vec3 u_shadow_normal_offset;uniform vec2 u_fade_range;uniform mediump vec3 u_shadow_direction;uniform highp vec3 u_shadow_bias;float shadow_sample(sampler2DShadow shadowmap,highp vec3 pos,highp float bias) {highp vec3 coord=vec3(pos.xy*0.5+0.5,pos.z*0.5+0.5-bias);return texture(shadowmap,coord);}float shadow_occlusion(highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth,highp float bias) {light_view_pos0.xyz/=light_view_pos0.w;
#ifdef SHADOWS_SINGLE_CASCADE
vec2 abs_bounds=abs(light_view_pos0.xy);if (abs_bounds.x >=1.0 || abs_bounds.y >=1.0) {return 0.0;}return shadow_sample(u_shadowmap_0,light_view_pos0.xyz,bias);
#else
light_view_pos1.xyz/=light_view_pos1.w;vec4 abs_bounds=abs(vec4(light_view_pos0.xy,light_view_pos1.xy));if (abs_bounds.x < 1.0 && abs_bounds.y < 1.0) {return shadow_sample(u_shadowmap_0,light_view_pos0.xyz,bias);}if (abs_bounds.z >=1.0 || abs_bounds.w >=1.0) {return 0.0;}float occlusion1=shadow_sample(u_shadowmap_1,light_view_pos1.xyz,bias);return clamp(mix(occlusion1,0.0,smoothstep(u_fade_range.x,u_fade_range.y,view_depth)),0.0,1.0);
#endif
}highp float calculate_shadow_bias(float NDotL) {
#ifdef NORMAL_OFFSET
return 0.5*u_shadow_bias.x;
#else
return 0.5*(u_shadow_bias.x+clamp(u_shadow_bias.y*tan(acos(NDotL)),0.0,u_shadow_bias.z));
#endif
}float shadowed_light_factor_normal(vec3 N,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float NDotL=dot(N,u_shadow_direction);float bias=calculate_shadow_bias(NDotL);float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);return mix(0.0,(1.0-(u_shadow_intensity*occlusion))*NDotL,step(0.0,NDotL));}float shadowed_light_factor_normal_opacity(vec3 N,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth,float shadow_opacity) {float NDotL=dot(N,u_shadow_direction);float bias=calculate_shadow_bias(NDotL);float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias)*shadow_opacity;return mix(0.0,(1.0-(u_shadow_intensity*occlusion))*NDotL,step(0.0,NDotL));}float shadowed_light_factor_normal_unbiased(vec3 N,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float NDotL=dot(N,u_shadow_direction);float bias=0.0;float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);return mix(0.0,(1.0-(u_shadow_intensity*occlusion))*NDotL,step(0.0,NDotL));}highp vec2 compute_receiver_plane_depth_bias(highp vec3 pos_dx,highp vec3 pos_dy)
{highp vec2 biasUV=vec2(
pos_dy.y*pos_dx.z-pos_dx.y*pos_dy.z,pos_dx.x*pos_dy.z-pos_dy.x*pos_dx.z);biasUV*=1.0/((pos_dx.x*pos_dy.y)-(pos_dx.y*pos_dy.x));return biasUV;}float shadowed_light_factor_plane_bias(highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {highp vec3 light_view_pos0_xyz=light_view_pos0.xyz/light_view_pos0.w*0.5+0.5;highp vec3 light_view_pos0_ddx=dFdx(light_view_pos0_xyz);highp vec3 light_view_pos0_ddy=dFdy(light_view_pos0_xyz);highp vec2 plane_depth_bias=compute_receiver_plane_depth_bias(light_view_pos0_ddx,light_view_pos0_ddy);highp float bias=dot(vec2(u_shadow_texel_size,u_shadow_texel_size),plane_depth_bias)+0.0001;float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);return 1.0-(u_shadow_intensity*occlusion);}float shadowed_light_factor(highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float bias=0.0;float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);return 1.0-(u_shadow_intensity*occlusion);}float shadow_occlusion(float ndotl,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float bias=calculate_shadow_bias(ndotl);return shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);}
#endif`;const Il=[];Aa(vn,Il),Aa($r,Il),Aa(or,Il);const Ku={"_prelude_fog.vertex.glsl":fs,"_prelude_terrain.vertex.glsl":_i,"_prelude_shadow.vertex.glsl":Pn,"_prelude_fog.fragment.glsl":ss,"_prelude_shadow.fragment.glsl":Zl,"_prelude_lighting.glsl":`
#ifdef LIGHTING_3D_MODE
uniform mediump vec3 u_lighting_ambient_color;uniform mediump vec3 u_lighting_directional_dir;uniform mediump vec3 u_lighting_directional_color;uniform mediump vec3 u_ground_radiance;float calculate_ambient_directional_factor(vec3 normal) {float NdotL=dot(normal,u_lighting_directional_dir);const float factor_reduction_max=0.3;float dir_luminance=dot(u_lighting_directional_color,vec3(0.2126,0.7152,0.0722));float directional_factor_min=1.0-factor_reduction_max*min(dir_luminance,1.0);float ambient_directional_factor=mix(directional_factor_min,1.0,min((NdotL+1.0),1.0));const float vertical_factor_min=0.92;float vertical_factor=mix(vertical_factor_min,1.0,normal.z*0.5+0.5);return vertical_factor*ambient_directional_factor;}vec3 linearProduct(vec3 srgbIn,vec3 k) {return srgbIn*pow(k,vec3(1./2.2));}vec3 apply_lighting(vec3 color,vec3 normal,float dir_factor) {float ambient_directional_factor=calculate_ambient_directional_factor(normal);vec3 ambient_contrib=ambient_directional_factor*u_lighting_ambient_color;vec3 directional_contrib=u_lighting_directional_color*dir_factor;return linearProduct(color,ambient_contrib+directional_contrib);}vec4 apply_lighting(vec4 color,vec3 normal,float dir_factor) {return vec4(apply_lighting(color.rgb,normal,dir_factor),color.a);}vec3 apply_lighting(vec3 color,vec3 normal) {float dir_factor=max(dot(normal,u_lighting_directional_dir),0.0);return apply_lighting(color.rgb,normal,dir_factor);}vec4 apply_lighting(vec4 color,vec3 normal) {float dir_factor=max(dot(normal,u_lighting_directional_dir),0.0);return vec4(apply_lighting(color.rgb,normal,dir_factor),color.a);}vec3 apply_lighting_ground(vec3 color) {return color*u_ground_radiance;}vec4 apply_lighting_ground(vec4 color) {return vec4(apply_lighting_ground(color.rgb),color.a);}float calculate_NdotL(vec3 normal) {const float ext=0.70710678118;return (clamp(dot(normal,u_lighting_directional_dir),-ext,1.0)+ext)/(1.0+ext);}vec4 apply_lighting_with_emission_ground(vec4 color,float emissive_strength) {return mix(apply_lighting_ground(color),color,emissive_strength);}vec3 compute_flood_lighting(vec3 flood_light_color,float fully_occluded_factor,float occlusion,vec3 ground_shadow_factor) {vec3 fully_occluded_color=flood_light_color*mix(ground_shadow_factor,vec3(1.0),fully_occluded_factor);float occlusion_ramp=smoothstep(0.0,0.2,1.0-occlusion);return mix(fully_occluded_color,flood_light_color,occlusion_ramp);}vec3 compute_emissive_draped(vec3 unlit_color,float fully_occluded_factor,float occlusion,vec3 ground_shadow_factor) {vec3 fully_occluded_color=unlit_color*mix(ground_shadow_factor,vec3(1.0),fully_occluded_factor);return mix(fully_occluded_color,unlit_color,1.0-occlusion);}
#endif//LIGHTING_3D_MODE`,"_prelude_raster_array.glsl":rs,"_prelude_raster_particle.glsl":Co},Hc={};yi("",_i),yi(ss,fs),yi(Zl,Pn),yi(rs,""),yi(Co,"");const Uc=yi(or,$r),cl=vn;var Nd={background:yi(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform vec4 u_color;uniform float u_opacity;
#ifdef LIGHTING_3D_MODE
in vec4 v_color;
#endif
void main() {vec4 out_color;
#ifdef LIGHTING_3D_MODE
out_color=v_color;
#else
out_color=u_color;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_lighting.glsl"
in vec2 a_pos;uniform mat4 u_matrix;
#ifdef LIGHTING_3D_MODE
uniform mediump vec4 u_color;out vec4 v_color;uniform float u_emissive_strength;
#endif
void main() {gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef LIGHTING_3D_MODE
v_color=apply_lighting_with_emission_ground(u_color,u_emissive_strength);
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),backgroundPattern:yi(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform vec2 u_pattern_tl;uniform vec2 u_pattern_br;uniform vec2 u_texsize;uniform float u_opacity;uniform float u_emissive_strength;uniform sampler2D u_image;in highp vec2 v_pos;void main() {highp vec2 imagecoord=mod(v_pos,1.0);highp vec2 pos=mix(u_pattern_tl/u_texsize,u_pattern_br/u_texsize,imagecoord);vec4 out_color=textureLodCustom(u_image,pos,v_pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform vec2 u_pattern_size;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec2 u_pattern_units_to_pixels;in vec2 a_pos;out highp vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_pattern_size,u_pattern_units_to_pixels,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),building:yi(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_shadow.fragment.glsl"
#include "_prelude_lighting.glsl"
in vec4 v_color;in highp vec3 v_normal;in highp float v_height;
#ifdef RENDER_SHADOWS
in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in float v_depth_shadows;
#endif
uniform lowp float u_opacity;vec3 linearTosRGB(vec3 color) {return pow(color,vec3(1./2.2));}vec3 apply_lighting_linear(vec3 color,vec3 normal,float dir_factor) {float ambient_directional_factor=calculate_ambient_directional_factor(normal);vec3 ambient_contrib=ambient_directional_factor*u_lighting_ambient_color;vec3 directional_contrib=u_lighting_directional_color*dir_factor;return color*(ambient_contrib+directional_contrib);}void main() {vec4 color=vec4(v_color.rgb,1.0);vec3 normal=normalize(v_normal);vec3 xy_flipped_normal=vec3(-normal.xy,normal.z);float shadowed_lighting_factor=0.0;
#ifdef RENDER_SHADOWS
shadowed_lighting_factor=shadowed_light_factor_normal(xy_flipped_normal,v_pos_light_view_0,v_pos_light_view_1,v_depth_shadows);
#else
shadowed_lighting_factor=dot(normal,u_lighting_directional_dir);
#endif
color.rgb=apply_lighting_linear(color.rgb,xy_flipped_normal,shadowed_lighting_factor);color.rgb=mix(color.rgb,v_color.rgb,v_color.a);
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos,v_height));
#endif
color.rgb=linearTosRGB(color.rgb);color*=u_opacity;
#ifdef RENDER_CUTOFF
color*=v_cutoff_opacity;
#endif
#ifdef INDICATOR_CUTOUT
color=applyCutout(color,v_height);
#endif
glFragColor=color; 
#ifdef DEBUG_SHOW_NORMALS
color.rgb=xy_flipped_normal*0.5+vec3(0.5,0.5,0.5);color.a=1.0;glFragColor=color;
#endif
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
in vec3 a_pos_3f;in vec3 a_normal_3f;out vec4 v_color;out highp vec3 v_normal;out highp float v_height;uniform mat4 u_matrix;uniform mat4 u_normal_matrix;
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out float v_depth_shadows;
#endif
vec3 sRGBToLinear(vec3 srgbIn) {return pow(srgbIn,vec3(2.2));}
#pragma mapbox: define-attribute-vertex-shader-only highp vec2 part_color_emissive
void main() {
#pragma mapbox: initialize-attribute-custom highp vec2 part_color_emissive
vec4 color_emissive=decode_color(part_color_emissive);v_color=vec4(sRGBToLinear(color_emissive.rgb),color_emissive.a);v_normal=vec3(u_normal_matrix*vec4(a_normal_3f,0.0));vec3 pos=a_pos_3f;v_height=pos.z;gl_Position=u_matrix*vec4(pos,1.0);
#ifdef RENDER_SHADOWS
vec3 shadow_pos=pos;
#ifdef NORMAL_OFFSET
vec3 offset=shadow_normal_offset_model(v_normal);shadow_pos+=offset*shadow_normal_offset_multiplier0();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shadow_pos,1.0);v_pos_light_view_1=u_light_matrix_1*vec4(shadow_pos,1.0);v_depth_shadows=gl_Position.w;
#endif
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
#ifdef RENDER_CUTOFF
v_cutoff_opacity=cutoff_opacity(u_cutoff_params,gl_Position.z);
#endif
}`),buildingDepth:yi(`in highp float v_depth;void main() {
#ifndef DEPTH_TEXTURE
glFragColor=pack_depth(v_depth);
#endif
}`,"in vec3 a_pos_3f;uniform mat4 u_matrix;out highp float v_depth;void main() {gl_Position=u_matrix*vec4(a_pos_3f,1.0);v_depth=gl_Position.z/gl_Position.w;}"),circle:yi(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
uniform float u_emissive_strength;void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float blur_positive=blur < 0.0 ? 0.0 : 1.0;lowp float antialiasblur=v_data.z;float extrude_length=length(extrude)+antialiasblur*(1.0-blur_positive);float antialiased_blur=-max(abs(blur),antialiasblur);float antialiase_blur_opacity=smoothstep(0.0,antialiasblur,extrude_length-1.0);float opacity_t=blur_positive==1.0 ? 
smoothstep(0.0,-antialiased_blur,1.0-extrude_length) : 
smoothstep(antialiased_blur,0.0,extrude_length-1.0)-antialiase_blur_opacity;float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(
antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)
);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_apply_premultiplied(out_color,v_fog_pos);
#endif
glFragColor=out_color*(v_visibility*opacity_t);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#define NUM_VISIBILITY_RINGS 2
#define INV_SQRT2 0.70710678
#define ELEVATION_BIAS 0.0001
#define NUM_SAMPLES_PER_RING 16
uniform mat4 u_matrix;uniform mat2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;in vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
#ifdef ELEVATED_ROADS
in float a_circle_z_offset;
#endif
out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
vec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {
#if defined(TERRAIN)
return elevation(pos)+ELEVATION_BIAS;
#else
return 0.0;
#endif
}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale,mat3 surface_vectors) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);
#ifdef PITCH_WITH_MAP
#ifdef PROJECTION_GLOBE_VIEW
return u_matrix*( world_center+vec4(sample_offset.x*surface_vectors[0]+sample_offset.y*surface_vectors[1],0) );
#else
return u_matrix*( world_center+vec4(sample_offset,0,0) );
#endif
#else
return projected_center+vec4(sample_offset,0,0);
#endif
}float get_sample_step() {
#ifdef PITCH_WITH_MAP
return 2.0*PI/float(NUM_SAMPLES_PER_RING);
#else
return PI/float(NUM_SAMPLES_PER_RING);
#endif
}void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);vec4 world_center;mat3 surface_vectors;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(circle_center)*circle_elevation(circle_center);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*circle_elevation(circle_center);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,circle_center,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);world_center=vec4(pos,1);
#else 
surface_vectors=mat3(1.0);float height=circle_elevation(circle_center);world_center=vec4(circle_center,height,1);
#endif
#ifdef ELEVATED_ROADS
world_center.z+=a_circle_z_offset+ELEVATION_BIAS;
#endif
vec4 projected_center=u_matrix*world_center;float view_scale=0.0;
#ifdef PITCH_WITH_MAP
#ifdef SCALE_WITH_MAP
view_scale=1.0;
#else
view_scale=projected_center.w/u_camera_to_center_distance;
#endif
#else
#ifdef SCALE_WITH_MAP
view_scale=u_camera_to_center_distance;
#else
view_scale=projected_center.w;
#endif
#endif
gl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale,surface_vectors);float visibility=0.0;
#ifdef TERRAIN
float step=get_sample_step();vec4 occlusion_world_center;vec4 occlusion_projected_center;
#ifdef PITCH_WITH_MAP
float cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);occlusion_world_center=vec4(circle_center,cantilevered_height,1);occlusion_projected_center=u_matrix*occlusion_world_center;
#else
occlusion_world_center=world_center;occlusion_projected_center=projected_center;
#endif
for(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale,surface_vectors);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);
#else
visibility=1.0;
#endif
#ifdef PROJECTION_GLOBE_VIEW
visibility=1.0;
#endif
v_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);
#ifdef FOG
v_fog_pos=fog_position(world_center.xyz);
#endif
}`),clippingMask:yi("void main() {glFragColor=vec4(1.0);}","in vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:yi(`#include "_prelude_fog.fragment.glsl"
uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);glFragColor=vec4(val,1.0,1.0,1.0);
#ifdef FOG
if (u_is_globe==0) {glFragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);}
#endif
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_terrain.vertex.glsl"
#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;in vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 tilePos=floor(a_pos*0.5);vec3 pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(tilePos)*elevation(tilePos);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*elevation(tilePos);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,tilePos,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#else
pos=vec3(tilePos+extrude,elevation(tilePos));
#endif
gl_Position=u_matrix*vec4(pos,1);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),heatmapTexture:yi(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));glFragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(0.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,"in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:yi("in float v_placed;in float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);glFragColor =mix(red,blue,step(0.5,v_placed))*0.5;glFragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}",`#include "_prelude_terrain.vertex.glsl"
in vec3 a_pos;in vec2 a_anchor_pos;in vec2 a_extrude;in vec2 a_placed;in vec2 a_shift;in vec2 a_elevation_from_sea;in float a_size_scale;in vec2 a_padding;in float a_auto_z_offset;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;out float v_placed;out float v_notUsed;void main() {float feature_elevation=a_elevation_from_sea.x+a_auto_z_offset;float terrain_elevation=(a_elevation_from_sea.y==1.0 ? 0.0 : elevation(a_anchor_pos));vec4 projectedPoint=u_matrix*vec4(a_pos+elevationVector(a_anchor_pos)*(feature_elevation+terrain_elevation),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}`),collisionCircle:yi("in float v_radius;in vec2 v_extrude;in float v_perspective_ratio;in float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);glFragColor=color*alpha*opacity_t;}",`in vec2 a_pos_2f;in float a_radius;in vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;out float v_radius;out vec2 v_extrude;out float v_perspective_ratio;out float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(
mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}`),debug:yi("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);glFragColor=mix(u_color,overlay_color,overlay_color.a);}",`#include "_prelude_terrain.vertex.glsl"
in vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;
#endif
out vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;
#ifdef PROJECTION_GLOBE_VIEW
gl_Position=u_matrix*vec4(a_pos_3+elevationVector(a_pos)*h,1);
#else
gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);
#endif
}`),elevatedStructuresDepth:yi(`void main() {
#ifndef DEPTH_TEXTURE
glFragColor=vec4(0.);
#endif
}`,"in vec2 a_pos;in float a_height;uniform mat4 u_matrix;uniform float u_depth_bias;void main() {gl_Position=u_matrix*vec4(a_pos,a_height,1);gl_Position.z=gl_Position.z+u_depth_bias;}"),elevatedStructuresDepthReconstruct:yi(`#ifdef DEPTH_RECONSTRUCTION
in float v_height;
#endif
void main() {
#ifdef DEPTH_RECONSTRUCTION
if (v_height >=0.0)
discard;
#endif
glFragColor=vec4(1.0,0.0,0.0,1.0);}`,`in vec2 a_pos;in float a_height;uniform mat4 u_matrix;uniform vec3 u_camera_pos;uniform highp float u_depth_bias;uniform lowp float u_height_scale;uniform lowp float u_reset_depth;
#ifdef DEPTH_RECONSTRUCTION
out float v_height;
#endif
void main() {vec3 vpos=vec3(a_pos,a_height*u_height_scale);
#ifdef DEPTH_RECONSTRUCTION
if (u_camera_pos.z > vpos.z) {vpos-=(u_camera_pos-vpos)*(vpos.z/(u_camera_pos.z-vpos.z));}v_height=a_height;
#endif
gl_Position=u_matrix*vec4(vpos,1);gl_Position.z=u_reset_depth==1.0 ? gl_Position.w : gl_Position.z+u_depth_bias;}`),elevatedStructures:yi(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
in vec3 v_normal;in float v_height;
#ifdef RENDER_SHADOWS
in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in float v_depth;
#endif
vec3 linearTosRGB(vec3 color) {return pow(color,vec3(1./2.2));}vec3 sRGBToLinear(vec3 srgbIn) {return pow(srgbIn,vec3(2.2));}vec3 compute_view_dependent_emissive_color(float ndotl,float emissive_strength,vec3 color)
{color=sRGBToLinear(color);color=color*(ndotl+(1.0-min(ndotl*57.29,1.0))*emissive_strength);color=linearTosRGB(color.rgb);return color;}uniform float u_emissive_strength;
#pragma mapbox: define highp vec4 structure_color
void main() {
#pragma mapbox: initialize highp vec4 structure_color
vec3 color=structure_color.xyz;
#ifdef LIGHTING_3D_MODE
vec3 normal=normalize(v_normal);vec3 transformed_normal=vec3(-normal.xy,normal.z);float ndotl=calculate_NdotL(transformed_normal);float emissive_strength=u_emissive_strength;emissive_strength=0.0;vec3 emissive_color=compute_view_dependent_emissive_color(ndotl,emissive_strength,color.xyz);
#ifdef RENDER_SHADOWS
float shadowed_lighting_factor=shadowed_light_factor_normal(transformed_normal,v_pos_light_view_0,v_pos_light_view_1,v_depth);color.rgb=apply_lighting(color.rgb,transformed_normal,shadowed_lighting_factor);
#else
color=apply_lighting(color,transformed_normal);
#endif
color=mix(color,emissive_color,emissive_strength);if (v_height < 0.0) {float penetration=max(v_height+7.5,0.0);float occlusion=1.0-1.0/PI*acos(1.0-penetration/4.0);color=color*(1.0-pow(occlusion,2.0)*0.3);}
#endif
#ifdef FOG
color=fog_apply(color,v_fog_pos);
#endif
vec4 out_color=vec4(color,1.0);
#ifdef INDICATOR_CUTOUT
out_color=applyCutout(out_color,v_height);
#endif
glFragColor=out_color;HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
in vec2 a_pos;in float a_height;in vec3 a_pos_normal_3;uniform mat4 u_matrix;out vec3 v_normal;out float v_height;
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out float v_depth;
#endif
#pragma mapbox: define highp vec4 structure_color
void main() {
#pragma mapbox: initialize highp vec4 structure_color
v_normal=a_pos_normal_3/16384.0;v_height=a_height;vec3 pos=vec3(a_pos,a_height);gl_Position=u_matrix*vec4(pos,1);
#ifdef RENDER_SHADOWS
vec3 shd_pos0=pos;vec3 shd_pos1=pos;
#ifdef NORMAL_OFFSET
vec3 offset=shadow_normal_offset(vec3(-v_normal.xy,v_normal.z));shd_pos0+=offset*shadow_normal_offset_multiplier0();shd_pos1+=offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fill:yi(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
uniform float u_emissive_strength;
#ifdef RENDER_SHADOWS
uniform vec3 u_ground_shadow_factor;in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in highp float v_depth;
#endif
#ifdef ELEVATED_ROADS
in highp float v_road_z_offset;
#endif
#ifdef INDICATOR_CUTOUT
in highp float v_z_offset;
#endif
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
vec4 out_color=color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#ifdef RENDER_SHADOWS
float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);
#ifdef ELEVATED_ROADS
out_color.rgb*=mix(v_road_z_offset !=0.0 ? u_ground_shadow_factor : vec3(1.0),vec3(1.0),light);
#else
out_color.rgb*=mix(u_ground_shadow_factor,vec3(1.0),light);
#endif
#endif
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
out_color*=opacity;
#ifdef INDICATOR_CUTOUT
if (v_z_offset >=0.0) {out_color=applyCutout(out_color,v_z_offset);}
#endif
glFragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
in vec2 a_pos;
#ifdef ELEVATED_ROADS
in float a_road_z_offset;out highp float v_road_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out highp float v_depth;
#endif
#ifdef INDICATOR_CUTOUT
out highp float v_z_offset;
#endif
uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp float z_offset
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp float z_offset
#ifdef ELEVATED_ROADS
z_offset+=a_road_z_offset;v_road_z_offset=z_offset;
#endif
float hidden=float(opacity==0.0);gl_Position=mix(u_matrix*vec4(a_pos,z_offset,1),AWAY,hidden);
#ifdef RENDER_SHADOWS
vec3 shd_pos0=vec3(a_pos,z_offset);vec3 shd_pos1=vec3(a_pos,z_offset);
#ifdef NORMAL_OFFSET
vec3 offset=shadow_normal_offset(vec3(0.0,0.0,1.0));shd_pos0+=offset*shadow_normal_offset_multiplier0();shd_pos1+=offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
#ifdef INDICATOR_CUTOUT
v_z_offset=z_offset;
#endif
}`),fillOutline:yi(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
in highp vec2 v_pos;uniform float u_emissive_strength;
#ifdef RENDER_SHADOWS
uniform vec3 u_ground_shadow_factor;in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in highp float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#ifdef RENDER_SHADOWS
float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);out_color.rgb*=mix(u_ground_shadow_factor,vec3(1.0),light);
#endif
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
in vec2 a_pos;
#ifdef ELEVATED_ROADS
in float a_road_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out highp float v_depth;
#endif
uniform mat4 u_matrix;uniform vec2 u_world;out highp vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp float z_offset
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp float z_offset
#ifdef ELEVATED_ROADS
z_offset+=a_road_z_offset;
#endif
float hidden=float(opacity==0.0);gl_Position=mix(u_matrix*vec4(a_pos,z_offset,1),AWAY,hidden);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef RENDER_SHADOWS
vec3 shd_pos0=vec3(a_pos,z_offset);vec3 shd_pos1=vec3(a_pos,z_offset);
#ifdef NORMAL_OFFSET
vec3 offset=shadow_normal_offset(vec3(0.0,0.0,1.0));shd_pos0+=offset*shadow_normal_offset_multiplier0();shd_pos1+=offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutlinePattern:yi(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
uniform vec2 u_texsize;uniform sampler2D u_image;
#ifdef FILL_PATTERN_TRANSITION
uniform float u_pattern_transition;
#endif
uniform float u_emissive_strength;
#ifdef RENDER_SHADOWS
uniform vec3 u_ground_shadow_factor;in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in highp float v_depth;
#endif
in highp vec2 v_pos;in highp vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#ifdef FILL_PATTERN_TRANSITION
#pragma mapbox: define mediump vec4 pattern_b
#endif
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#ifdef FILL_PATTERN_TRANSITION
#pragma mapbox: initialize mediump vec4 pattern_b
#endif
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;highp vec2 imagecoord=mod(v_pos,1.0);highp vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);highp vec2 lod_pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,v_pos);float dist=length(v_pos_world-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=textureLodCustom(u_image,pos,lod_pos);
#ifdef FILL_PATTERN_TRANSITION
vec2 pattern_b_tl=pattern_b.xy;vec2 pattern_b_br=pattern_b.zw;highp vec2 pos_b=mix(pattern_b_tl/u_texsize,pattern_b_br/u_texsize,imagecoord);vec4 color_b=textureLodCustom(u_image,pos_b,lod_pos);out_color=out_color*(1.0-u_pattern_transition)+color_b*u_pattern_transition;
#endif
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#ifdef RENDER_SHADOWS
float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);out_color.rgb*=mix(u_ground_shadow_factor,vec3(1.0),light);
#endif
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;in vec2 a_pos;
#ifdef ELEVATED_ROADS
in float a_road_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out highp float v_depth;
#endif
out highp vec2 v_pos;out highp vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#ifdef FILL_PATTERN_TRANSITION
#pragma mapbox: define mediump vec4 pattern_b
#endif
#pragma mapbox: define lowp float pixel_ratio
#pragma mapbox: define highp float z_offset
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#ifdef FILL_PATTERN_TRANSITION
#pragma mapbox: initialize mediump vec4 pattern_b
#endif
#pragma mapbox: initialize lowp float pixel_ratio
#pragma mapbox: initialize highp float z_offset
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;
#ifdef ELEVATED_ROADS
z_offset+=a_road_z_offset;
#endif
float hidden=float(opacity==0.0);gl_Position=mix(u_matrix*vec4(a_pos,z_offset,1),AWAY,hidden);vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);v_pos_world=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef RENDER_SHADOWS
vec3 shd_pos0=vec3(a_pos,z_offset);vec3 shd_pos1=vec3(a_pos,z_offset);
#ifdef NORMAL_OFFSET
vec3 offset=shadow_normal_offset(vec3(0.0,0.0,1.0));shd_pos0+=offset*shadow_normal_offset_multiplier0();shd_pos1+=offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillPattern:yi(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
uniform vec2 u_texsize;uniform sampler2D u_image;
#ifdef FILL_PATTERN_TRANSITION
uniform float u_pattern_transition;
#endif
in highp vec2 v_pos;uniform float u_emissive_strength;
#ifdef RENDER_SHADOWS
uniform vec3 u_ground_shadow_factor;in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in highp float v_depth;
#endif
#ifdef ELEVATED_ROADS
in highp float v_road_z_offset;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#ifdef FILL_PATTERN_TRANSITION
#pragma mapbox: define mediump vec4 pattern_b
#endif
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#ifdef FILL_PATTERN_TRANSITION
#pragma mapbox: initialize mediump vec4 pattern_b
#endif
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;highp vec2 imagecoord=mod(v_pos,1.0);highp vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);highp vec2 lod_pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,v_pos);vec4 out_color=textureLodCustom(u_image,pos,lod_pos);
#ifdef FILL_PATTERN_TRANSITION
vec2 pattern_b_tl=pattern_b.xy;vec2 pattern_b_br=pattern_b.zw;highp vec2 pos_b=mix(pattern_b_tl/u_texsize,pattern_b_br/u_texsize,imagecoord);vec4 color_b=textureLodCustom(u_image,pos_b,lod_pos);out_color=out_color*(1.0-u_pattern_transition)+color_b*u_pattern_transition;
#endif
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#ifdef RENDER_SHADOWS
float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);
#ifdef ELEVATED_ROADS
out_color.rgb*=mix(v_road_z_offset !=0.0 ? u_ground_shadow_factor : vec3(1.0),vec3(1.0),light);
#else
out_color.rgb*=mix(u_ground_shadow_factor,vec3(1.0),light);
#endif
#endif
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;in vec2 a_pos;
#ifdef ELEVATED_ROADS
in float a_road_z_offset;out highp float v_road_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out highp float v_depth;
#endif
out highp vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#ifdef FILL_PATTERN_TRANSITION
#pragma mapbox: define mediump vec4 pattern_b
#endif
#pragma mapbox: define lowp float pixel_ratio
#pragma mapbox: define highp float z_offset
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
#pragma mapbox: initialize highp float z_offset
#ifdef FILL_PATTERN_TRANSITION
#pragma mapbox: initialize mediump vec4 pattern_b
#endif
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;
#ifdef ELEVATED_ROADS
z_offset+=a_road_z_offset;v_road_z_offset=z_offset;
#endif
float hidden=float(opacity==0.0);gl_Position=mix(u_matrix*vec4(a_pos,z_offset,1),AWAY,hidden);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);
#ifdef RENDER_SHADOWS
vec3 shd_pos0=vec3(a_pos,z_offset);vec3 shd_pos1=vec3(a_pos,z_offset);
#ifdef NORMAL_OFFSET
vec3 offset=shadow_normal_offset(vec3(0.0,0.0,1.0));shd_pos0+=offset*shadow_normal_offset_multiplier0();shd_pos1+=offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillExtrusion:yi(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_shadow.fragment.glsl"
#include "_prelude_lighting.glsl"
in vec4 v_color;in vec4 v_flat;
#ifdef RENDER_SHADOWS
in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;
#endif
uniform lowp float u_opacity;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;in vec2 v_ao;
#endif
#if defined(ZERO_ROOF_RADIUS) && !defined(LIGHTING_3D_MODE)
in vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)
in highp vec3 v_normal;
#endif
uniform vec3 u_flood_light_color;uniform highp float u_vertical_scale;uniform float u_flood_light_intensity;uniform vec3 u_ground_shadow_factor;
#if defined(LIGHTING_3D_MODE) && defined(FLOOD_LIGHT)
in float v_flood_radius;in float v_has_floodlight;
#endif
in float v_height;
#pragma mapbox: define highp float emissive_strength
void main() {
#pragma mapbox: initialize highp float emissive_strength
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)
vec3 normal=normalize(v_normal);
#endif
float z;vec4 color=v_color;
#ifdef ZERO_ROOF_RADIUS
z=float(normal.z > 0.00001);
#ifdef LIGHTING_3D_MODE
normal=mix(normal,vec3(0.0,0.0,1.0),z);
#else
color=mix(v_color,v_roof_color,z);
#endif
#endif
float h=max(0.0,v_height);float ao_shade=1.0;
#ifdef FAUX_AO
float intensity=u_ao[0];float h_floors=h/(u_ao[1]*u_vertical_scale);float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);ao_shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;
#ifdef ZERO_ROOF_RADIUS
concave*=(1.0-z);
#endif
float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);ao_shade*=mix(1.0,x_shade*x_shade*x_shade,concave);
#ifdef LIGHTING_3D_MODE
#ifdef FLOOD_LIGHT
color.rgb*=mix(ao_shade,1.0,v_has_floodlight);
#else
color.rgb*=ao_shade;
#endif
#else
color.rgb*=ao_shade;
#endif
#endif
#ifdef LIGHTING_3D_MODE
float flood_radiance=0.0;
#ifdef FLOOD_LIGHT
flood_radiance=(1.0-min(h/v_flood_radius,1.0))*u_flood_light_intensity*v_has_floodlight;
#endif
#ifdef RENDER_SHADOWS
#ifdef FLOOD_LIGHT
float ndotl_unclamped=dot(normal,u_shadow_direction);float ndotl=max(0.0,ndotl_unclamped);float occlusion=ndotl_unclamped < 0.0 ? 1.0 : shadow_occlusion(ndotl,v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);vec3 litColor=apply_lighting(color.rgb,normal,(1.0-u_shadow_intensity*occlusion)*ndotl);vec3 floodLitColor=compute_flood_lighting(u_flood_light_color*u_opacity,1.0-u_shadow_intensity,occlusion,u_ground_shadow_factor);color.rgb=mix(litColor,floodLitColor,flood_radiance);
#else
float shadowed_lighting_factor;
#ifdef RENDER_CUTOFF
shadowed_lighting_factor=shadowed_light_factor_normal_opacity(normal,v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w,v_cutoff_opacity);if (v_cutoff_opacity==0.0) {discard;}
#else
shadowed_lighting_factor=shadowed_light_factor_normal(normal,v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);
#endif
color.rgb=apply_lighting(color.rgb,normal,shadowed_lighting_factor);
#endif
#else
color.rgb=apply_lighting(color.rgb,normal);
#ifdef FLOOD_LIGHT
color.rgb=mix(color.rgb,u_flood_light_color*u_opacity,flood_radiance);
#endif
#endif
color.rgb=mix(color.rgb,v_flat.rgb,emissive_strength);color*=u_opacity;
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos,h));
#endif
#ifdef INDICATOR_CUTOUT
color=applyCutout(color,h);
#endif
glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
#include "_prelude_lighting.glsl"
uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_edge_radius;uniform float u_width_scale;in vec4 a_pos_normal_ed;in vec2 a_centroid_pos;
#ifdef RENDER_WALL_MODE
in vec3 a_join_normal_inside;
#endif
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
#ifdef TERRAIN
uniform int u_height_type;uniform int u_base_type;
#endif
uniform highp float u_vertical_scale;out vec4 v_color;out vec4 v_flat;
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;
#endif
#if defined(ZERO_ROOF_RADIUS) && !defined(LIGHTING_3D_MODE)
out vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)
out highp vec3 v_normal;
#endif
#ifdef FAUX_AO
uniform lowp vec2 u_ao;out vec2 v_ao;
#endif
#if defined(LIGHTING_3D_MODE) && defined(FLOOD_LIGHT)
out float v_flood_radius;out float v_has_floodlight;
#endif
out float v_height;vec3 linearTosRGB(vec3 color) {return pow(color,vec3(1./2.2));}vec3 sRGBToLinear(vec3 srgbIn) {return pow(srgbIn,vec3(2.2));}
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
#pragma mapbox: define highp float flood_light_wall_radius
#pragma mapbox: define highp float line_width
#pragma mapbox: define highp float emissive_strength
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize highp float flood_light_wall_radius
#pragma mapbox: initialize highp float line_width
#pragma mapbox: initialize highp float emissive_strength
base*=u_vertical_scale;height*=u_vertical_scale;vec4 pos_nx=floor(a_pos_normal_ed*0.5);vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)
v_normal=normal;
#endif
base=max(0.0,base);float attr_height=height;height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=0.0;float c_ele=0.0;vec3 pos;
#ifdef TERRAIN
bool is_flat_height=centroid_pos.x !=0.0 && u_height_type==1;bool is_flat_base=centroid_pos.x !=0.0 && u_base_type==1;ele=elevation(pos_nx.xy);c_ele=is_flat_height || is_flat_base ? (centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos)) : ele;float h_height=is_flat_height ? max(c_ele+height,ele+base+2.0) : ele+height;float h_base=is_flat_base ? max(c_ele+base,ele+base) : ele+(base==0.0 ?-5.0 : base);h=t > 0.0 ? max(h_base,h_height) : h_base;pos=vec3(pos_nx.xy,h);
#else
h=t > 0.0 ? height : base;pos=vec3(pos_nx.xy,h);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*h);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,pos.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*pos.z;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float cutoff=1.0;vec3 scaled_pos=pos;
#ifdef RENDER_CUTOFF
vec3 centroid_random=vec3(centroid_pos.xy,centroid_pos.x+centroid_pos.y+1.0);vec3 ground_pos=centroid_pos.x==0.0 ? pos.xyz : (centroid_random/8.0);vec4 ground=u_matrix*vec4(ground_pos.xy,ele,1.0);cutoff=cutoff_opacity(u_cutoff_params,ground.z);if (centroid_pos.y !=0.0 && centroid_pos.x !=0.0) {vec3 g=floor(ground_pos);vec3 mod_=centroid_random-g*8.0;float seed=min(1.0,0.1*(min(3.5,max(mod_.x+mod_.y,0.2*attr_height))*0.35+mod_.z));if (cutoff < 0.8-seed) {cutoff=0.0;}}float cutoff_scale=cutoff;v_cutoff_opacity=cutoff;scaled_pos.z=mix(c_ele,h,cutoff_scale);
#endif
float hidden=float((centroid_pos.x==0.0 && centroid_pos.y==1.0) || (cutoff==0.0 && centroid_pos.x !=0.0) || (color.a==0.0));
#ifdef RENDER_WALL_MODE
vec2 wall_offset=u_width_scale*line_width*(a_join_normal_inside.xy/EXTENT);scaled_pos.xy+=(1.0-a_join_normal_inside.z)*wall_offset*0.5;scaled_pos.xy-=a_join_normal_inside.z*wall_offset*0.5;
#endif
gl_Position=mix(u_matrix*vec4(scaled_pos,1),AWAY,hidden);h=h-ele;v_height=h;
#ifdef RENDER_SHADOWS
vec3 shd_pos0=pos;vec3 shd_pos1=pos;
#ifdef NORMAL_OFFSET
vec3 offset=shadow_normal_offset(normal);shd_pos0+=offset*shadow_normal_offset_multiplier0();shd_pos1+=offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);
#endif
float NdotL=0.0;float colorvalue=0.0;
#ifndef LIGHTING_3D_MODE
colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),NdotL);if (normal.y !=0.0) {float r=0.84;r=mix(0.7,0.98,1.0-u_lightintensity);NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}
#endif
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec2(mix(concave,-concave,start),y_ground);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
#ifdef FLOOD_LIGHT
float is_wall=1.0-float(t > 0.0 && top_up_ny.y > 0.0);v_has_floodlight=float(flood_light_wall_radius > 0.0 && is_wall > 0.0);v_flood_radius=flood_light_wall_radius*u_vertical_scale;
#endif
v_color=vec4(color.rgb,1.0);float ndotl=calculate_NdotL(normal);v_flat.rgb=sRGBToLinear(color.rgb);v_flat.rgb=v_flat.rgb*(ndotl+(1.0-min(ndotl*57.29,1.0))*emissive_strength);v_flat=vec4(linearTosRGB(v_flat.rgb),1.0);
#else
v_color=vec4(0.0,0.0,0.0,1.0);v_color.rgb+=clamp(color.rgb*NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_color*=u_opacity;
#endif
#if defined(ZERO_ROOF_RADIUS) && !defined(LIGHTING_3D_MODE)
float roofNdotL=clamp(u_lightpos.z,0.0,1.0);roofNdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),roofNdotL);v_roof_color=vec4(0.0,0.0,0.0,1.0);v_roof_color.rgb+=clamp(color.rgb*roofNdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_roof_color*=u_opacity;
#endif
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),fillExtrusionDepth:yi(`in highp float v_depth;void main() {
#ifndef DEPTH_TEXTURE
glFragColor=pack_depth(v_depth);
#endif
}`,`#include "_prelude_terrain.vertex.glsl"
uniform mat4 u_matrix;uniform float u_edge_radius;uniform float u_width_scale;uniform float u_vertical_scale;
#ifdef TERRAIN
uniform int u_height_type;uniform int u_base_type;
#endif
in vec4 a_pos_normal_ed;in vec2 a_centroid_pos;
#ifdef RENDER_WALL_MODE
in vec3 a_join_normal_inside;
#endif
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp float line_width
#pragma mapbox: define highp vec4 color
out highp float v_depth;void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp float line_width
#pragma mapbox: initialize highp vec4 color
base*=u_vertical_scale;height*=u_vertical_scale;vec3 pos_nx=floor(a_pos_normal_ed.xyz*0.5);mediump vec3 top_up_ny=a_pos_normal_ed.xyz-2.0*pos_nx;base=max(0.0,base);height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
vec3 pos;
#ifdef TERRAIN
bool is_flat_height=centroid_pos.x !=0.0 && u_height_type==1;bool is_flat_base=centroid_pos.x !=0.0 && u_base_type==1;float ele=elevation(pos_nx.xy);float c_ele=is_flat_height || is_flat_base ? (centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos)) : ele;float h_height=is_flat_height ? max(c_ele+height,ele+base+2.0) : ele+height;float h_base=is_flat_base ? max(c_ele+base,ele+base) : ele+(base==0.0 ?-5.0 : base);float h=t > 0.0 ? max(h_base,h_height) : h_base;pos=vec3(pos_nx.xy,h);
#else
pos=vec3(pos_nx.xy,t > 0.0 ? height : base);
#endif
#ifdef RENDER_WALL_MODE
vec2 wall_offset=u_width_scale*line_width*(a_join_normal_inside.xy/EXTENT);pos.xy+=(1.0-a_join_normal_inside.z)*wall_offset*0.5;pos.xy-=a_join_normal_inside.z*wall_offset*0.5;
#endif
float hidden=float((centroid_pos.x==0.0 && centroid_pos.y==1.0) || (color.a==0.0));gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);v_depth=gl_Position.z/gl_Position.w;}`),fillExtrusionPattern:yi(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform vec2 u_texsize;uniform sampler2D u_image;
#ifdef FILL_EXTRUSION_PATTERN_TRANSITION
uniform float u_pattern_transition;
#endif
#ifdef FAUX_AO
uniform lowp vec2 u_ao;in vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
in vec3 v_normal;
#endif
in highp vec2 v_pos;in vec4 v_lighting;uniform lowp float u_opacity;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define mediump vec4 pattern
#ifdef FILL_EXTRUSION_PATTERN_TRANSITION
#pragma mapbox: define mediump vec4 pattern_b
#endif
#pragma mapbox: define highp float pixel_ratio
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize mediump vec4 pattern
#ifdef FILL_EXTRUSION_PATTERN_TRANSITION
#pragma mapbox: initialize mediump vec4 pattern_b
#endif
#pragma mapbox: initialize highp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;highp vec2 imagecoord=mod(v_pos,1.0);highp vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);highp vec2 lod_pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,v_pos);vec4 out_color=textureLodCustom(u_image,pos,lod_pos);
#ifdef FILL_EXTRUSION_PATTERN_TRANSITION
vec2 pattern_b_tl=pattern_b.xy;vec2 pattern_b_br=pattern_b.zw;highp vec2 pos_b=mix(pattern_b_tl/u_texsize,pattern_b_br/u_texsize,imagecoord);vec4 color_b=textureLodCustom(u_image,pos_b,lod_pos);out_color=out_color*(1.0-u_pattern_transition)+color_b*u_pattern_transition;
#endif
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color,normalize(v_normal))*u_opacity;
#else
out_color=out_color*v_lighting;
#endif
#ifdef FAUX_AO
float intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);out_color.rgb=out_color.rgb*shade;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
#ifdef INDICATOR_CUTOUT
out_color=applyCutout(out_color,height);
#endif
glFragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#include "_prelude_lighting.glsl"
uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform float u_tile_units_to_pixels;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_width_scale;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;in vec4 a_pos_normal_ed;in vec2 a_centroid_pos;
#ifdef RENDER_WALL_MODE
in vec3 a_join_normal_inside;
#endif
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
#ifdef TERRAIN
uniform int u_height_type;uniform int u_base_type;
#endif
out highp vec2 v_pos;out vec4 v_lighting;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;out vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
out vec3 v_normal;
#endif
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump vec4 pattern
#ifdef FILL_EXTRUSION_PATTERN_TRANSITION
#pragma mapbox: define mediump vec4 pattern_b
#endif
#pragma mapbox: define highp float pixel_ratio
#pragma mapbox: define highp float line_width
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump vec4 pattern
#ifdef FILL_EXTRUSION_PATTERN_TRANSITION
#pragma mapbox: initialize mediump vec4 pattern_b
#endif
#pragma mapbox: initialize highp float pixel_ratio
#pragma mapbox: initialize highp float line_width
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec4 pos_nx=floor(a_pos_normal_ed*0.5);mediump vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;mediump vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=z;vec3 p;float c_ele;
#ifdef TERRAIN
bool is_flat_height=centroid_pos.x !=0.0 && u_height_type==1;bool is_flat_base=centroid_pos.x !=0.0 && u_base_type==1;ele=elevation(pos_nx.xy);c_ele=is_flat_height || is_flat_base ? (centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos)) : ele;float h_height=is_flat_height ? max(c_ele+height,ele+base+2.0) : ele+height;float h_base=is_flat_base ? max(c_ele+base,ele+base) : ele+(base==0.0 ?-5.0 : base);h=t > 0.0 ? max(h_base,h_height) : h_base;p=vec3(pos_nx.xy,h);
#else
p=vec3(pos_nx.xy,z);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(p.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,p.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*p.z;p=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
#ifdef RENDER_WALL_MODE
vec2 wall_offset=u_width_scale*line_width*(a_join_normal_inside.xy/EXTENT);p.xy+=(1.0-a_join_normal_inside.z)*wall_offset*0.5;p.xy-=a_join_normal_inside.z*wall_offset*0.5;
#endif
float hidden=float((centroid_pos.x==0.0 && centroid_pos.y==1.0) || (color.a==0.0));gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0
? pos_nx.xy
: vec2(edgedistance,z*u_height_factor);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float NdotL=0.0;
#ifdef LIGHTING_3D_MODE
NdotL=calculate_NdotL(normal);
#else
NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),NdotL);
#endif
if (normal.y !=0.0) {float r=0.84;
#ifndef LIGHTING_3D_MODE
r=mix(0.7,0.98,1.0-u_lightintensity);
#endif
NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
v_normal=normal;
#else
v_lighting.rgb+=clamp(NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;
#endif
#ifdef FOG
v_fog_pos=fog_position(p);
#endif
}`),groundShadow:yi(`#include "_prelude_shadow.fragment.glsl"
precision highp float;uniform vec3 u_ground_shadow_factor;in vec4 v_pos_light_view_0;in vec4 v_pos_light_view_1;
#ifdef FOG
in float v_fog_opacity;
#endif
void main() {float light=shadowed_light_factor_plane_bias(v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);vec3 shadow=mix(u_ground_shadow_factor,vec3(1.0),light);
#ifdef RENDER_CUTOFF
shadow=mix(vec3(1.0),shadow,cutoff_opacity(u_cutoff_params,1.0/gl_FragCoord.w));
#endif
#ifdef FOG
shadow=mix(shadow,vec3(1.0),v_fog_opacity);
#endif
#ifdef INDICATOR_CUTOUT
shadow=mix(shadow,vec3(1.0),1.0-applyCutout(vec4(1.0),0.0).r);
#endif
glFragColor=vec4(shadow,1.0);}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;in vec2 a_pos;out vec4 v_pos_light_view_0;out vec4 v_pos_light_view_1;
#ifdef FOG
out float v_fog_opacity;
#endif
void main() {gl_Position=u_matrix*vec4(a_pos,0.0,1.0);v_pos_light_view_0=u_light_matrix_0*vec4(a_pos,0.0,1.0);v_pos_light_view_1=u_light_matrix_1*vec4(a_pos,0.0,1.0);
#ifdef FOG
v_fog_pos=fog_position(a_pos);v_fog_opacity=fog(v_fog_pos);
#endif
}`),fillExtrusionGroundEffect:yi(`uniform highp float u_ao_pass;uniform highp float u_opacity;uniform highp float u_flood_light_intensity;uniform highp vec3 u_flood_light_color;uniform highp float u_attenuation;uniform sampler2D u_fb;uniform float u_fb_size;
#ifdef SDF_SUBPASS
in highp vec2 v_pos;in highp vec4 v_line_segment;in highp float v_flood_light_radius_tile;in highp vec2 v_ao;float line_df(highp vec2 a,highp vec2 b,highp vec2 p) {highp vec2 ba=b-a;highp vec2 pa=p-a;highp float r=clamp(dot(pa,ba)/dot(ba,ba),0.0,1.0);return length(pa-r*ba);}
#ifdef FOG
in highp float v_fog;
#endif
#endif
void main() {
#ifdef CLEAR_SUBPASS
vec4 color=vec4(1.0);
#ifdef CLEAR_FROM_TEXTURE
color=texture(u_fb,gl_FragCoord.xy/vec2(u_fb_size));
#endif
glFragColor=color;
#else
#ifdef SDF_SUBPASS
highp float d=line_df(v_line_segment.xy,v_line_segment.zw,v_pos);highp float effect_radius=mix(v_flood_light_radius_tile,v_ao.y,u_ao_pass);d/=effect_radius;d=min(d,1.0);d=1.0-pow(1.0-d,u_attenuation);highp float effect_intensity=mix(u_flood_light_intensity,v_ao.x,u_ao_pass);highp float fog=1.0;
#ifdef FOG
fog=v_fog;
#endif
#ifdef RENDER_CUTOFF
fog*=v_cutoff_opacity;
#endif
glFragColor=vec4(vec3(0.0),mix(1.0,d,effect_intensity*u_opacity*fog));
#else
vec4 color=mix(vec4(u_flood_light_color,1.0),vec4(vec3(0.0),1.0),u_ao_pass);
#ifdef OVERDRAW_INSPECTOR
color=vec4(1.0);
#endif
glFragColor=color;
#endif
HANDLE_WIREFRAME_DEBUG;
#endif
}`,`#include "_prelude_fog.vertex.glsl"
in highp vec4 a_pos_end;in highp float a_angular_offset_factor;in highp float a_hidden_by_landmark;
#ifdef SDF_SUBPASS
out highp vec2 v_pos;out highp vec4 v_line_segment;out highp float v_flood_light_radius_tile;out highp vec2 v_ao;
#ifdef FOG
out highp float v_fog;
#endif
#endif
uniform highp float u_flood_light_intensity;uniform highp mat4 u_matrix;uniform highp float u_ao_pass;uniform highp float u_meter_to_tile;uniform highp float u_edge_radius;uniform highp float u_dynamic_offset;uniform highp vec2 u_ao;
#pragma mapbox: define highp float flood_light_ground_radius
const float TANGENT_CUTOFF=4.0;const float NORM=32767.0;void main() {
#pragma mapbox: initialize highp float flood_light_ground_radius
vec2 p=a_pos_end.xy;vec2 q=floor(a_pos_end.zw*0.5);vec2 start_bottom=a_pos_end.zw-q*2.0;float fl_ground_radius=flood_light_ground_radius;fl_ground_radius=abs(flood_light_ground_radius);float direction=flood_light_ground_radius < 0.0 ?-1.0 : 1.0;float flood_radius_tile=fl_ground_radius*u_meter_to_tile;vec2 v=normalize(q-p);float ao_radius=u_ao.y/3.5;float effect_radius=mix(flood_radius_tile,ao_radius,u_ao_pass)+u_edge_radius;float angular_offset_factor=a_angular_offset_factor/NORM*TANGENT_CUTOFF;float angular_offset=direction*angular_offset_factor*effect_radius;float top=1.0-start_bottom.y;float side=(0.5-start_bottom.x)*2.0;vec2 extrusion_parallel=v*side*mix(u_dynamic_offset,angular_offset,top);vec2 perp=vec2(v.y,-v.x);vec2 extrusion_perp=direction*perp*effect_radius*top;vec3 pos=vec3(mix(q,p,start_bottom.x),0.0);pos.xy+=extrusion_parallel+extrusion_perp;
#ifdef SDF_SUBPASS
v_pos=pos.xy;v_line_segment=vec4(p,q)+perp.xyxy*u_edge_radius;v_flood_light_radius_tile=flood_radius_tile;v_ao=vec2(u_ao.x,ao_radius);
#ifdef FOG
v_fog_pos=fog_position(pos);v_fog=1.0-fog(v_fog_pos);
#endif
#endif
float hidden_by_landmark=0.0;
#ifdef HAS_CENTROID
hidden_by_landmark=a_hidden_by_landmark;
#endif
float isFloodlit=float(fl_ground_radius > 0.0 && u_flood_light_intensity > 0.0);float hidden=mix(1.0-isFloodlit,isFloodlit,u_ao_pass);hidden+=hidden_by_landmark;gl_Position=mix(u_matrix*vec4(pos,1.0),AWAY,float(hidden > 0.0));
#ifdef RENDER_CUTOFF
v_cutoff_opacity=cutoff_opacity(u_cutoff_params,gl_Position.z);
#endif
}`),hillshadePrepare:yi(`precision highp float;uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;float getElevation(vec2 coord) {return texture(u_image,coord).r/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos+vec2(epsilon.x,0));float f=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float g=getElevation(v_pos+vec2(0,epsilon.y));float h=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(
(c+e+e+h)-(a+d+d+f),(f+g+g+h)-(a+b+b+c)
)/pow(2.0,exaggeration+(19.2562-u_zoom));glFragColor=clamp(vec4(
deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:yi(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;uniform float u_emissive_strength;void main() {vec4 pixel=texture(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);glFragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef LIGHTING_3D_MODE
glFragColor=apply_lighting_with_emission_ground(glFragColor,u_emissive_strength);
#endif
#ifdef FOG
glFragColor=fog_dither(fog_apply_premultiplied(glFragColor,v_fog_pos));
#endif
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),line:yi(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
uniform lowp float u_device_pixel_ratio;uniform highp float u_width_scale;uniform highp float u_floor_width_scale;uniform float u_alpha_discard_threshold;uniform highp vec2 u_trim_offset;uniform highp vec2 u_trim_fade_range;uniform lowp vec4 u_trim_color;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec3 v_uv;
#ifdef ELEVATED_ROADS
in highp float v_road_z_offset;
#endif
#ifdef RENDER_LINE_DASH
uniform sampler2D u_dash_image;in vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform sampler2D u_gradient_image;
#endif
#ifdef INDICATOR_CUTOUT
in highp float v_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform vec3 u_ground_shadow_factor;in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in highp float v_depth;
#endif
float luminance(vec3 c) {return (c.r+c.r+c.b+c.g+c.g+c.g)*0.1667;}uniform float u_emissive_strength;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float border_width
#pragma mapbox: define lowp vec4 border_color
float linearstep(float edge0,float edge1,float x) {return  clamp((x-edge0)/(edge1-edge0),0.0,1.0);}void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float border_width
#pragma mapbox: initialize lowp vec4 border_color
float dist=length(v_normal)*v_width2.s;float blur2=(u_width_scale*blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);
#ifdef RENDER_LINE_DASH
float sdfdist=texture(u_dash_image,v_tex).r;float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/dash.z;float scaled_floorwidth=(floorwidth*u_floor_width_scale);alpha*=linearstep(0.5-sdfgamma/scaled_floorwidth,0.5+sdfgamma/scaled_floorwidth,sdfdist);
#endif
highp vec4 out_color;
#ifdef RENDER_LINE_GRADIENT
out_color=texture(u_gradient_image,v_uv.xy);
#else
out_color=color;
#endif
float trim_alpha=1.0;
#ifdef RENDER_LINE_TRIM_OFFSET
highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=v_uv[2];if (trim_end > trim_start) {highp float start_transition=max(0.0,min(1.0,(line_progress-trim_start)/max(u_trim_fade_range[0],1.0e-9)));highp float end_transition=max(0.0,min(1.0,(trim_end-line_progress)/max(u_trim_fade_range[1],1.0e-9)));highp float transition_factor=min(start_transition,end_transition);out_color=mix(out_color,u_trim_color,transition_factor);trim_alpha=1.0-transition_factor;}
#endif
if (u_alpha_discard_threshold !=0.0) {if (alpha < u_alpha_discard_threshold) {discard;}}
#ifdef RENDER_LINE_BORDER
float edgeBlur=((border_width*u_width_scale)+1.0/u_device_pixel_ratio);float alpha2=clamp(min(dist-(v_width2.t-edgeBlur),v_width2.s-dist)/edgeBlur,0.0,1.0);if (alpha2 < 1.) {float smoothAlpha=smoothstep(0.6,1.0,alpha2);if (border_color.a==0.0) {float Y=(out_color.a > 0.01) ? luminance(out_color.rgb/out_color.a) : 1.;float adjustment=(Y > 0.) ? 0.5/Y : 0.45;if (out_color.a > 0.25 && Y < 0.25) {vec3 borderColor=(Y > 0.) ? out_color.rgb : vec3(1,1,1)*out_color.a;out_color.rgb=out_color.rgb+borderColor*(adjustment*(1.0-smoothAlpha));} else {out_color.rgb*=(0.6 +0.4*smoothAlpha);}} else {out_color=mix(border_color*trim_alpha,out_color,smoothAlpha);}}
#endif
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#ifdef RENDER_SHADOWS
float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);
#ifdef ELEVATED_ROADS
out_color.rgb*=mix(v_road_z_offset !=0.0 ? u_ground_shadow_factor : vec3(1.0),vec3(1.0),light);
#else
out_color.rgb*=mix(u_ground_shadow_factor,vec3(1.0),light);
#endif
#endif
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
out_color*=(alpha*opacity);
#ifdef INDICATOR_CUTOUT
out_color=applyCutout(out_color,v_z_offset);
#endif
glFragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#define EXTRUDE_SCALE 0.015873016
in vec2 a_pos_normal;in vec4 a_data;
#if defined(ELEVATED) || defined(ELEVATED_ROADS) || defined(VARIABLE_LINE_WIDTH)
in vec3 a_z_offset_width;
#endif
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
in highp vec3 a_packed;
#endif
#ifdef RENDER_LINE_DASH
in float a_linesofar;
#endif
uniform mat4 u_matrix;uniform mat2 u_pixels_to_tile_units;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;uniform float u_width_scale;uniform highp float u_floor_width_scale;
#ifdef ELEVATED
uniform lowp float u_zbias_factor;uniform lowp float u_tile_to_meter;float sample_elevation(vec2 apos) {
#ifdef ELEVATION_REFERENCE_SEA
return 0.0;
#else
return elevation(apos);
#endif
}
#endif
out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec3 v_uv;
#ifdef ELEVATED_ROADS
out highp float v_road_z_offset;
#endif
#ifdef RENDER_LINE_DASH
uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;out vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform float u_image_height;
#endif
#ifdef INDICATOR_CUTOUT
out highp float v_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out highp float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float border_width
#pragma mapbox: define lowp vec4 border_color
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float border_width
#pragma mapbox: initialize lowp vec4 border_color
float a_z_offset;
#if defined(ELEVATED) || defined(ELEVATED_ROADS)
a_z_offset=a_z_offset_width.x;
#endif
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth;
#ifdef VARIABLE_LINE_WIDTH
float left=a_pos_normal.y-2.0*floor(a_pos_normal.y*0.5);halfwidth=(u_width_scale*(left==1.0 ? a_z_offset_width.y : a_z_offset_width.z))/2.0;
#else
halfwidth=(u_width_scale*width)/2.0;
#endif
offset=-1.0*offset*u_width_scale;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);float hidden=float(opacity==0.0);vec2 extrude=dist*u_pixels_to_tile_units;vec4 projected_extrude=u_matrix*vec4(extrude,0.0,0.0);vec2 projected_extrude_xy=projected_extrude.xy;
#ifdef ELEVATED_ROADS
v_road_z_offset=a_z_offset;gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,a_z_offset,1.0)+projected_extrude;
#else
#ifdef ELEVATED
vec2 offsetTile=offset2*u_pixels_to_tile_units;vec2 offset_pos=pos+offsetTile;float ele=0.0;
#ifdef CROSS_SLOPE_VERTICAL
float top=a_pos_normal.y-2.0*floor(a_pos_normal.y*0.5);float line_height=2.0*u_tile_to_meter*outset*top*u_pixels_to_tile_units[1][1]+a_z_offset;ele=sample_elevation(offset_pos)+line_height;projected_extrude=vec4(0);
#else
#ifdef CROSS_SLOPE_HORIZONTAL
float ele0=sample_elevation(offset_pos);float ele1=max(sample_elevation(offset_pos+extrude),sample_elevation(offset_pos+extrude/2.0));float ele2=max(sample_elevation(offset_pos-extrude),sample_elevation(offset_pos-extrude/2.0));float ele_max=max(ele0,max(ele1,ele2));ele=ele_max+a_z_offset;
#else
float ele0=sample_elevation(offset_pos);float ele1=max(sample_elevation(offset_pos+extrude),sample_elevation(offset_pos+extrude/2.0));float ele2=max(sample_elevation(offset_pos-extrude),sample_elevation(offset_pos-extrude/2.0));float ele_max=max(ele0,0.5*(ele1+ele2));ele=ele_max-ele0+ele1+a_z_offset;
#endif
#endif
gl_Position=u_matrix*vec4(offset_pos,ele,1.0)+projected_extrude;float z=clamp(gl_Position.z/gl_Position.w,0.5,1.0);float zbias=max(0.00005,(pow(z,0.8)-z)*u_zbias_factor*u_exaggeration);gl_Position.z-=(gl_Position.w*zbias);gl_Position=mix(gl_Position,AWAY,hidden);
#else
gl_Position=mix(u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude,AWAY,hidden);
#endif
#endif
#ifdef ELEVATED_ROADS
#ifdef RENDER_SHADOWS
vec3 shd_pos=vec3(pos+(offset2+dist)*u_pixels_to_tile_units,a_z_offset);vec3 shd_pos0=shd_pos;vec3 shd_pos1=shd_pos;
#ifdef NORMAL_OFFSET
vec3 shd_pos_offset=shadow_normal_offset(vec3(0.0,0.0,1.0));shd_pos0+=shd_pos_offset*shadow_normal_offset_multiplier0();shd_pos1+=shd_pos_offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#endif
#ifndef RENDER_TO_TEXTURE
float epsilon=0.0001;float extrude_length_without_perspective=max(length(dist),epsilon);float extrude_length_with_perspective=max(length(projected_extrude_xy/gl_Position.w*u_units_to_pixels),epsilon);v_gamma_scale=mix(extrude_length_without_perspective/extrude_length_with_perspective,1.0,step(0.01,blur));
#else
v_gamma_scale=1.0;
#endif
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
highp float a_uv_x=a_packed[0];float a_split_index=a_packed[1];highp float line_progress=a_packed[2];
#ifdef RENDER_LINE_GRADIENT
highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec3(a_uv_x,a_split_index*texel_height-half_texel_height,line_progress);
#else
v_uv=vec3(a_uv_x,0.0,line_progress);
#endif
#endif
#ifdef RENDER_LINE_DASH
float scale=dash.z==0.0 ? 0.0 : u_tile_units_to_pixels/dash.z;float height=dash.y;v_tex=vec2(a_linesofar*scale/(floorwidth*u_floor_width_scale),(-normal.y*height+dash.x+0.5)/u_texsize.y);
#endif
v_width2=vec2(outset,inset);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
#ifdef INDICATOR_CUTOUT
v_z_offset=a_z_offset;
#endif
}`),linePattern:yi(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
uniform highp float u_device_pixel_ratio;uniform highp float u_width_scale;uniform highp float u_alpha_discard_threshold;uniform highp vec2 u_texsize;uniform highp float u_tile_units_to_pixels;uniform highp vec2 u_trim_offset;uniform highp vec2 u_trim_fade_range;uniform lowp vec4 u_trim_color;uniform sampler2D u_image;
#ifdef LINE_PATTERN_TRANSITION
uniform float u_pattern_transition;
#endif
in vec2 v_normal;in vec2 v_width2;in highp float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef RENDER_LINE_TRIM_OFFSET
in highp vec3 v_uv;
#endif
#ifdef ELEVATED_ROADS
in highp float v_road_z_offset;
#endif
#ifdef LINE_JOIN_NONE
in vec2 v_pattern_data;
#endif
#ifdef INDICATOR_CUTOUT
in highp float v_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform vec3 u_ground_shadow_factor;in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in highp float v_depth;
#endif
uniform float u_emissive_strength;
#pragma mapbox: define mediump vec4 pattern
#ifdef LINE_PATTERN_TRANSITION
#pragma mapbox: define mediump vec4 pattern_b
#endif
#pragma mapbox: define mediump float pixel_ratio
#pragma mapbox: define mediump float blur
#pragma mapbox: define mediump float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern
#ifdef LINE_PATTERN_TRANSITION
#pragma mapbox: initialize mediump vec4 pattern_b
#endif
#pragma mapbox: initialize mediump float pixel_ratio
#pragma mapbox: initialize mediump float blur
#pragma mapbox: initialize mediump float opacity
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;highp float pattern_size=display_size.x/u_tile_units_to_pixels;float aspect=display_size.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(u_width_scale*blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);highp float pattern_x=v_linesofar/pattern_size*aspect;highp float x=mod(pattern_x,1.0);highp float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;highp vec2 pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(x,y));highp vec2 lod_pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(pattern_x,y));vec4 color=textureLodCustom(u_image,pos,lod_pos);
#ifdef LINE_PATTERN_TRANSITION
vec2 pattern_b_tl=pattern_b.xy;vec2 pattern_b_br=pattern_b.zw;highp vec2 pos_b=mix(pattern_b_tl*texel_size-texel_size,pattern_b_br*texel_size+texel_size,vec2(x,y));vec4 color_b=textureLodCustom(u_image,pos_b,lod_pos);color=color*(1.0-u_pattern_transition)+color_b*u_pattern_transition;
#endif
#ifdef RENDER_LINE_TRIM_OFFSET
highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=v_uv[2];if (trim_end > trim_start) {highp float start_transition=max(0.0,min(1.0,(line_progress-trim_start)/max(u_trim_fade_range[0],1.0e-9)));highp float end_transition=max(0.0,min(1.0,(trim_end-line_progress)/max(u_trim_fade_range[1],1.0e-9)));highp float transition_factor=min(start_transition,end_transition);color=mix(color,color.a*u_trim_color,transition_factor);}
#endif
#ifdef LINE_JOIN_NONE
highp float pattern_len=pattern_size/aspect;highp float segment_phase=pattern_len-mod(v_linesofar-v_pattern_data.x+pattern_len,pattern_len);highp float visible_start=segment_phase-step(pattern_len*0.5,segment_phase)*pattern_len;highp float visible_end=floor((v_pattern_data.y-segment_phase)/pattern_len)*pattern_len+segment_phase;visible_end+=step(pattern_len*0.5,v_pattern_data.y-visible_end)*pattern_len;if (v_pattern_data.x < visible_start || v_pattern_data.x >=visible_end) {color=vec4(0.0);}
#endif
#ifdef LIGHTING_3D_MODE
color=apply_lighting_with_emission_ground(color,u_emissive_strength);
#ifdef RENDER_SHADOWS
float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);
#ifdef ELEVATED_ROADS
color.rgb*=mix(v_road_z_offset !=0.0 ? u_ground_shadow_factor : vec3(1.0),vec3(1.0),light);
#else
color.rgb*=mix(u_ground_shadow_factor,vec3(1.0),light);
#endif
#endif
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
color*=(alpha*opacity);if (u_alpha_discard_threshold !=0.0) {if (color.a < u_alpha_discard_threshold) {discard;}}
#ifdef INDICATOR_CUTOUT
color=applyCutout(color,v_z_offset);
#endif
glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;
#if defined(ELEVATED) || defined(ELEVATED_ROADS)
in vec3 a_z_offset_width;
#endif
#ifdef RENDER_LINE_TRIM_OFFSET
in highp vec3 a_packed;
#endif
in highp float a_linesofar;
#ifdef LINE_JOIN_NONE
in highp vec3 a_pattern_data;out vec2 v_pattern_data;
#endif
#ifdef INDICATOR_CUTOUT
out highp float v_z_offset;
#endif
uniform mat4 u_matrix;uniform float u_tile_units_to_pixels;uniform vec2 u_units_to_pixels;uniform mat2 u_pixels_to_tile_units;uniform float u_device_pixel_ratio;uniform float u_width_scale;uniform float u_floor_width_scale;
#ifdef ELEVATED
uniform lowp float u_zbias_factor;uniform lowp float u_tile_to_meter;float sample_elevation(vec2 apos) {
#ifdef ELEVATION_REFERENCE_SEA
return 0.0;
#else
return elevation(apos);
#endif
}
#endif
out vec2 v_normal;out vec2 v_width2;out highp float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef RENDER_LINE_TRIM_OFFSET
out highp vec3 v_uv;
#endif
#ifdef ELEVATED_ROADS
out highp float v_road_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out highp float v_depth;
#endif
#pragma mapbox: define mediump float blur
#pragma mapbox: define mediump float opacity
#pragma mapbox: define mediump float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define mediump float floorwidth
#pragma mapbox: define mediump vec4 pattern
#ifdef LINE_PATTERN_TRANSITION
#pragma mapbox: define mediump vec4 pattern_b
#endif
#pragma mapbox: define mediump float pixel_ratio
void main() {
#pragma mapbox: initialize mediump float blur
#pragma mapbox: initialize mediump float opacity
#pragma mapbox: initialize mediump float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize mediump float floorwidth
#pragma mapbox: initialize mediump vec4 pattern
#ifdef LINE_PATTERN_TRANSITION
#pragma mapbox: initialize mediump vec4 pattern_b
#endif
#pragma mapbox: initialize mediump float pixel_ratio
float a_z_offset;
#if defined(ELEVATED) || defined(ELEVATED_ROADS)
a_z_offset=a_z_offset_width.x;
#endif
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=(u_width_scale*width)/2.0;offset=-1.0*offset*u_width_scale;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);vec2 dist=outset*a_extrude*scale;float u=0.5*a_direction;float t=1.0-abs(u);vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float hidden=float(opacity==0.0);vec2 extrude=dist*u_pixels_to_tile_units;vec4 projected_extrude=u_matrix*vec4(extrude,0.0,0.0);vec2 projected_extrude_xy=projected_extrude.xy;
#ifdef ELEVATED_ROADS
v_road_z_offset=a_z_offset;gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,a_z_offset,1.0)+projected_extrude;
#else
#ifdef ELEVATED
vec2 offsetTile=offset2*u_pixels_to_tile_units;vec2 offset_pos=pos+offsetTile;float ele=0.0;
#ifdef CROSS_SLOPE_VERTICAL
float top=a_pos_normal.y-2.0*floor(a_pos_normal.y*0.5);float line_height=2.0*u_tile_to_meter*outset*top*u_pixels_to_tile_units[1][1]+a_z_offset;ele=sample_elevation(offset_pos)+line_height;projected_extrude=vec4(0);
#else
#ifdef CROSS_SLOPE_HORIZONTAL
float ele0=sample_elevation(offset_pos);float ele1=max(sample_elevation(offset_pos+extrude),sample_elevation(offset_pos+extrude/2.0));float ele2=max(sample_elevation(offset_pos-extrude),sample_elevation(offset_pos-extrude/2.0));float ele_max=max(ele0,max(ele1,ele2));ele=ele_max+a_z_offset;
#else
float ele0=sample_elevation(offset_pos);float ele1=max(sample_elevation(offset_pos+extrude),sample_elevation(offset_pos+extrude/2.0));float ele2=max(sample_elevation(offset_pos-extrude),sample_elevation(offset_pos-extrude/2.0));float ele_max=max(ele0,0.5*(ele1+ele2));ele=ele_max-ele0+ele1+a_z_offset;
#endif
#endif
gl_Position=u_matrix*vec4(offset_pos,ele,1.0)+projected_extrude;float z=clamp(gl_Position.z/gl_Position.w,0.5,1.0);float zbias=max(0.00005,(pow(z,0.8)-z)*u_zbias_factor*u_exaggeration);gl_Position.z-=(gl_Position.w*zbias);gl_Position=mix(gl_Position,AWAY,hidden);
#else
gl_Position=mix(u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude,AWAY,hidden);
#endif
#endif
#ifdef ELEVATED_ROADS
#ifdef RENDER_SHADOWS
vec3 shd_pos=vec3(pos+(offset2+dist)*u_pixels_to_tile_units,a_z_offset);vec3 shd_pos0=shd_pos;vec3 shd_pos1=shd_pos;
#ifdef NORMAL_OFFSET
vec3 shd_pos_offset=shadow_normal_offset(vec3(0.0,0.0,1.0));shd_pos0+=shd_pos_offset*shadow_normal_offset_multiplier0();shd_pos1+=shd_pos_offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#endif
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude_xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=mix(extrude_length_without_perspective/extrude_length_with_perspective,1.0,step(0.01,blur));
#else
v_gamma_scale=1.0;
#endif
#ifdef RENDER_LINE_TRIM_OFFSET
highp float a_uv_x=a_packed[0];highp float line_progress=a_packed[2];v_uv=vec3(a_uv_x,0.0,line_progress);
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=(floorwidth*u_floor_width_scale);
#ifdef LINE_JOIN_NONE
v_width=(floorwidth*u_floor_width_scale)+ANTIALIASING;mediump float pixels_to_tile_units=1.0/u_tile_units_to_pixels;mediump float pixel_ratio_inverse=1.0/pixel_ratio;mediump float aspect=v_width/((pattern.w-pattern.y)*pixel_ratio_inverse);highp float subt_multiple=(pattern.z-pattern.x)*pixel_ratio_inverse*pixels_to_tile_units*aspect*32.0;highp float subt=floor(a_pattern_data.z/subt_multiple)*subt_multiple;float offset_sign=(fract(a_pattern_data.x)-0.5)*4.0;float line_progress_offset=offset_sign*v_width*0.5*pixels_to_tile_units;v_linesofar=(a_pattern_data.z-subt)+a_linesofar+line_progress_offset;v_pattern_data=vec2(a_pattern_data.x+line_progress_offset,a_pattern_data.y);
#endif
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
#ifdef INDICATOR_CUTOUT
v_z_offset=a_z_offset;
#endif
}`),raster:yi(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_raster_array.glsl"
uniform float u_fade_t;uniform float u_opacity;uniform highp float u_raster_elevation;uniform highp float u_zoom_transition;in vec2 v_pos0;in vec2 v_pos1;in float v_depth;
#ifdef PROJECTION_GLOBE_VIEW
in float v_split_fade;
#endif
uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;uniform float u_emissive_strength;
#ifndef RASTER_ARRAY
uniform highp sampler2D u_image0;uniform sampler2D u_image1;
#endif
#ifdef RASTER_COLOR
uniform sampler2D u_color_ramp;uniform highp vec4 u_colorization_mix;uniform highp float u_colorization_offset;uniform vec2 u_texture_res;
#endif
void main() {vec4 color0,color1,color;vec2 value;
#ifdef RASTER_COLOR
#ifdef RASTER_ARRAY
#ifdef RASTER_ARRAY_LINEAR
value=mix(
raTexture2D_image0_linear(v_pos0,u_texture_res,u_colorization_mix,u_colorization_offset),raTexture2D_image1_linear(v_pos1,u_texture_res,u_colorization_mix,u_colorization_offset),u_fade_t
);
#else
value=mix(
raTexture2D_image0_nearest(v_pos0,u_texture_res,u_colorization_mix,u_colorization_offset),raTexture2D_image1_nearest(v_pos1,u_texture_res,u_colorization_mix,u_colorization_offset),u_fade_t
);
#endif
if (value.y > 0.0) value.x/=value.y;
#else
color=mix(texture(u_image0,v_pos0),texture(u_image1,v_pos1),u_fade_t);value=vec2(u_colorization_offset+dot(color.rgb,u_colorization_mix.rgb),color.a);
#endif
color=texture(u_color_ramp,vec2(value.x,0.5));if (color.a > 0.0) color.rgb/=color.a;color.a*=value.y;
#else
color0=texture(u_image0,v_pos0);color1=texture(u_image1,v_pos1);if (color0.a > 0.0) color0.rgb/=color0.a;if (color1.a > 0.0) color1.rgb/=color1.a;color=mix(color0,color1,u_fade_t);
#endif
color.a*=u_opacity;
#ifdef GLOBE_POLES
color.a*=1.0-smoothstep(0.0,0.05,u_zoom_transition);
#endif
vec3 rgb=color.rgb;rgb=vec3(
dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(vec4(out_color,1.0),u_emissive_strength).rgb;
#endif
#ifdef FOG
highp float fog_limit_high_meters=1000000.0;highp float fog_limit_low_meters=600000.0;float fog_limit=1.0-smoothstep(fog_limit_low_meters,fog_limit_high_meters,u_raster_elevation);out_color=fog_dither(fog_apply(out_color,v_fog_pos,fog_limit));
#endif
glFragColor=vec4(out_color*color.a,color.a);
#ifdef PROJECTION_GLOBE_VIEW
glFragColor*=mix(1.0,1.0-smoothstep(0.0,0.05,u_zoom_transition),smoothstep(0.8,0.9,v_split_fade));
#endif
#ifdef RENDER_CUTOFF
glFragColor=glFragColor*cutoff_opacity(u_cutoff_params,v_depth);
#endif
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform mat3 u_grid_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform vec2 u_perspective_transform;uniform vec2 u_texture_offset;uniform float u_raster_elevation;uniform float u_zoom_transition;uniform vec2 u_merc_center;
#define GLOBE_UPSCALE GLOBE_RADIUS/6371008.8
#ifdef GLOBE_POLES
in vec3 a_globe_pos;in vec2 a_uv;
#else
in vec2 a_pos;in vec2 a_texture_pos;
#endif
out vec2 v_pos0;out vec2 v_pos1;out float v_depth;
#ifdef PROJECTION_GLOBE_VIEW
out float v_split_fade;
#endif
void main() {vec2 uv;
#ifdef GLOBE_POLES
vec3 globe_pos=a_globe_pos;globe_pos+=normalize(globe_pos)*u_raster_elevation*GLOBE_UPSCALE;gl_Position=u_matrix*u_globe_matrix*vec4(globe_pos   ,1.0);uv=a_uv;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(a_globe_pos,1.0)).xyz);
#endif
#else
float w=1.0+dot(a_texture_pos,u_perspective_transform);uv=a_texture_pos/8192.0;
#ifdef PROJECTION_GLOBE_VIEW
vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);vec3 globe_pos=latLngToECEF(latLng.xy);globe_pos+=normalize(globe_pos)*u_raster_elevation*GLOBE_UPSCALE;vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);float mercatorY=mercatorYfromLat(latLng[0]);float mercatorX=mercatorXfromLng(latLng[1]);    
v_split_fade=0.0;if (u_zoom_transition > 0.0) {vec2 merc_pos=vec2(mercatorX,mercatorY);merc_world_pos=vec4(merc_pos,u_raster_elevation,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;float opposite_merc_center=mod(u_merc_center.x+0.5,1.0);float dist_from_poles=(abs(mercatorY-0.5)*2.0);float range=0.1;v_split_fade=abs(opposite_merc_center-mercatorX);v_split_fade=clamp(1.0-v_split_fade,0.0,1.0);v_split_fade=max(smoothstep(1.0-range,1.0,dist_from_poles),max(smoothstep(1.0-range,1.0,v_split_fade),smoothstep(1.0-range,1.0,1.0-v_split_fade)));}float tiles=u_grid_matrix[0][2];if (tiles > 0.0) {float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];float uvY=mercatorY*tiles-idy;float uvX=mercatorX*tiles-idx;uv=vec2(uvX,uvY);}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition)*w,w);gl_Position=u_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
#else
gl_Position=u_matrix*vec4(a_pos*w,u_raster_elevation*w,w);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
#endif
#endif
v_pos0=uv;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;v_pos0=u_texture_offset.x+u_texture_offset.y*v_pos0;v_pos1=u_texture_offset.x+u_texture_offset.y*v_pos1;
#ifdef RENDER_CUTOFF
v_depth=gl_Position.z;
#endif
}`),rasterParticle:yi(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform float u_fade_t;uniform float u_opacity;uniform highp float u_raster_elevation;in vec2 v_pos0;in vec2 v_pos1;uniform sampler2D u_image0;uniform sampler2D u_image1;void main() {vec4 color0,color1,color;color0=texture(u_image0,v_pos0);color1=texture(u_image1,v_pos1);if (color0.a > 0.0) color0.rgb/=color0.a;if (color1.a > 0.0) color1.rgb/=color1.a;color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 out_color=color.rgb;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(vec4(out_color,1.0),0.0).rgb;
#endif
#ifdef FOG
highp float fog_limit_high_meters=1000000.0;highp float fog_limit_low_meters=600000.0;float fog_limit=1.0-smoothstep(fog_limit_low_meters,fog_limit_high_meters,u_raster_elevation);out_color=fog_dither(fog_apply(out_color,v_fog_pos,fog_limit));
#endif
glFragColor=vec4(out_color*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform mat3 u_grid_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_raster_elevation;uniform float u_zoom_transition;uniform vec2 u_merc_center;
#define GLOBE_UPSCALE GLOBE_RADIUS/6371008.8
in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {float w=1.0;vec2 uv;
#ifdef PROJECTION_GLOBE_VIEW
vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float mercatorX=mercatorXfromLng(latLng[1]);float tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];float uvX=mercatorX*tiles-idx;float uvY=mercatorY*tiles-idy;uv=vec2(uvX,uvY);vec3 globe_pos=latLngToECEF(latLng.xy);globe_pos+=normalize(globe_pos)*u_raster_elevation*GLOBE_UPSCALE;vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {vec2 merc_pos=vec2(mercatorX,mercatorY);merc_world_pos=vec4(merc_pos,u_raster_elevation,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition)*w,w);gl_Position=u_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
#else
uv=a_texture_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*w,u_raster_elevation*w,w);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
#endif
v_pos0=uv;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),rasterParticleDraw:yi("uniform sampler2D u_color_ramp;in float v_particle_speed;void main() {glFragColor=texture(u_color_ramp,vec2(v_particle_speed,0.5));}",`#include "_prelude_raster_particle.glsl"
in float a_index;uniform sampler2D u_particle_texture;uniform float u_particle_texture_side_len;uniform vec2 u_tile_offset;out float v_particle_speed;void main() {ivec2 pixel_coord=ivec2(
mod(a_index,u_particle_texture_side_len),a_index/u_particle_texture_side_len);vec4 pixel=texelFetch(u_particle_texture,pixel_coord,0);vec2 pos=unpack_pos_from_rgba(pixel)+u_tile_offset;vec2 tex_coord=fract(pos);vec2 velocity=lookup_velocity(tex_coord);if (velocity==INVALID_VELOCITY) {gl_Position=AWAY;v_particle_speed=0.0;} else {gl_Position=vec4(2.0*pos-1.0,0,1);v_particle_speed=length(velocity);}gl_PointSize=1.0;}`),rasterParticleTexture:yi("uniform sampler2D u_texture;uniform float u_opacity;in vec2 v_tex_pos;void main() {vec4 color=texture(u_texture,v_tex_pos);glFragColor=vec4(floor(255.0*color*u_opacity)/255.0);}","in vec2 a_pos;out vec2 v_tex_pos;void main() {vec2 uv=0.5*a_pos+vec2(0.5);v_tex_pos=uv;gl_Position=vec4(a_pos,0.0,1.0);}"),rasterParticleUpdate:yi(`#include "_prelude_raster_particle.glsl"
uniform sampler2D u_particle_texture;uniform mediump float u_particle_texture_side_len;uniform mediump float u_speed_factor;uniform highp float u_reset_rate;uniform highp float u_rand_seed;in highp vec2 v_tex_coord;vec2 linearstep(vec2 edge0,vec2 edge1,vec2 x) {return  clamp((x-edge0)/(edge1-edge0),vec2(0),vec2(1));}const highp vec3 rand_constants=vec3(12.9898,78.233,4375.85453);highp float rand(const highp vec2 co) {highp float t=dot(rand_constants.xy,co);return fract(sin(t)*(rand_constants.z+t));}void main() {ivec2 pixel_coord=ivec2(v_tex_coord*u_particle_texture_side_len);highp vec4 pixel=texelFetch(u_particle_texture,pixel_coord,0);highp vec2 pos=unpack_pos_from_rgba(pixel);highp vec2 velocity=lookup_velocity(clamp(pos,0.0,1.0));highp vec2 dp=velocity==INVALID_VELOCITY ? vec2(0) : velocity*u_speed_factor;pos=pos+dp;highp vec2 seed=(pos+v_tex_coord)*u_rand_seed;highp vec2 random_pos=vec2(rand(seed+1.3),rand(seed+2.1));highp vec2 persist_rate=pow(
linearstep(vec2(-u_particle_pos_offset),vec2(0),pos)*linearstep(vec2(1.0+u_particle_pos_offset),vec2(1),pos),vec2(4)
);highp vec2 per_frame_persist=pow(persist_rate,abs(dp)/u_particle_pos_offset);highp float drop_rate=1.0-per_frame_persist.x*per_frame_persist.y;drop_rate=any(greaterThanEqual(abs(pos-0.5),vec2(0.5+u_particle_pos_offset))) ? 1.0 : drop_rate;highp float drop=step(1.0-drop_rate-u_reset_rate,rand(seed));highp vec2 next_pos=mix(pos,random_pos,drop);glFragColor=pack_pos_to_rgba(next_pos);}`,"in vec2 a_pos;out vec2 v_tex_coord;void main() {v_tex_coord=0.5*(a_pos+vec2(1.0));gl_Position=vec4(a_pos,0.0,1.0);}"),symbol:yi(`#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;uniform bool u_is_halo;uniform lowp float u_scale_factor;
#ifdef ICON_TRANSITION
uniform float u_icon_transition;
#endif
#ifdef COLOR_ADJUSTMENT
uniform mat4 u_color_adj_mat;
#endif
#ifdef INDICATOR_CUTOUT
in highp float v_z_offset;
#else
#ifdef Z_OFFSET
#ifdef RENDER_SHADOWS
in highp float v_z_offset;
#endif
#endif
#endif
in vec2 v_tex_a;
#ifdef ICON_TRANSITION
in vec2 v_tex_b;
#endif
in float v_draw_halo;in vec3 v_gamma_scale_size_fade_opacity;
#ifdef RENDER_TEXT_AND_SYMBOL
in float is_sdf;in vec2 v_tex_a_icon;
#endif
#ifdef Z_OFFSET
#ifdef RENDER_SHADOWS
uniform vec3 u_ground_shadow_factor;in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in highp float v_depth;
#endif
#endif
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
#pragma mapbox: define lowp float emissive_strength
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
#pragma mapbox: initialize lowp float emissive_strength
vec4 out_color;float fade_opacity=v_gamma_scale_size_fade_opacity[2];
#ifdef RENDER_TEXT_AND_SYMBOL
if (is_sdf==ICON) {vec2 tex_icon=v_tex_a_icon;lowp float alpha=opacity*fade_opacity;glFragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
return;}
#endif
#ifdef RENDER_SDF
float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_gamma_scale_size_fade_opacity.x;float size=v_gamma_scale_size_fade_opacity.y;float fontScale=u_is_text ? size/24.0 : size;out_color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;bool draw_halo=v_draw_halo > 0.0;if (draw_halo) {out_color=halo_color;gamma=(halo_blur*u_scale_factor*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width*u_scale_factor/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,v_tex_a).r;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);out_color*=alpha;
#else
#ifdef ICON_TRANSITION
vec4 a=texture(u_texture,v_tex_a)*(1.0-u_icon_transition);vec4 b=texture(u_texture,v_tex_b)*u_icon_transition;out_color=(a+b);
#else
out_color=texture(u_texture,v_tex_a);
#endif
#ifdef COLOR_ADJUSTMENT
out_color=u_color_adj_mat*out_color;
#endif
#endif
out_color*=opacity*fade_opacity;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,emissive_strength);
#ifdef Z_OFFSET
#ifdef RENDER_SHADOWS
float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);out_color.rgb*=mix(v_z_offset !=0.0 ? u_ground_shadow_factor : vec3(1.0),vec3(1.0),light);
#endif
#endif
#endif
#ifdef INDICATOR_CUTOUT
out_color=applyCutout(out_color,v_z_offset);
#endif
glFragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_terrain.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
in vec4 a_pos_offset;in vec4 a_tex_size;in vec4 a_pixeloffset;in vec4 a_projected_pos;in float a_fade_opacity;
#ifdef Z_OFFSET
in float a_auto_z_offset;
#endif
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_globe_anchor;in vec3 a_globe_normal;
#endif
#ifdef ICON_TRANSITION
in vec2 a_texb;
#endif
#ifdef OCCLUSION_QUERIES
in float a_occlusion_query_opacity;
#endif
#ifdef ELEVATED_ROADS
in vec3 a_x_axis;in vec3 a_y_axis;uniform float u_normal_scale;
#endif
#ifdef INDICATOR_CUTOUT
out highp float v_z_offset;
#else
#ifdef Z_OFFSET
#ifdef RENDER_SHADOWS
out highp float v_z_offset;
#endif
#endif
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_elevation_from_sea;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform vec2 u_texsize_icon;uniform bool u_is_halo;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
out vec2 v_tex_a;
#ifdef ICON_TRANSITION
out vec2 v_tex_b;
#endif
out float v_draw_halo;out vec3 v_gamma_scale_size_fade_opacity;
#ifdef RENDER_TEXT_AND_SYMBOL
out float is_sdf;out vec2 v_tex_a_icon;
#endif
#ifdef Z_OFFSET
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out highp float v_depth;
#endif
#endif
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
#pragma mapbox: define lowp float emissive_strength
#pragma mapbox: define lowp float occlusion_opacity
#pragma mapbox: define lowp float z_offset
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
#pragma mapbox: initialize lowp float emissive_strength
#pragma mapbox: initialize lowp float occlusion_opacity
#pragma mapbox: initialize lowp float z_offset
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_min_font_scale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;float e=u_elevation_from_sea ? z_offset : z_offset+elevation(tile_anchor);
#ifdef Z_OFFSET
e+=a_auto_z_offset;
#endif
vec3 h=elevationVector(tile_anchor)*e;float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;vec3 world_pos_globe;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos_globe=a_globe_anchor+h;world_pos=mix_globe_mercator(world_pos_globe,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetprojected_point;vec2 a;
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetprojected_point=u_matrix*vec4(a_globe_anchor+displacement,1);vec4 projected_point_globe=u_matrix*vec4(world_pos_globe,1);a=projected_point_globe.xy/projected_point_globe.w;
#else
offsetprojected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);a=projected_point.xy/projected_point.w;
#endif
vec2 b=offsetprojected_point.xy/offsetprojected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
#ifdef PROJECTED_POS_ON_VIEWPORT
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xyz+h,1.0);
#else
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz,mercator_pos,u_zoom_transition)+h;projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);    
#endif
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_min_font_scale,font_scale)+a_pxoffset/16.0);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
#ifdef Z_OFFSET
z+=u_pitch_with_map ? a_auto_z_offset+z_offset : 0.0;
#else
z+=u_pitch_with_map ? z_offset : 0.0;
#endif
float occlusion_fade=globe_occlusion_fade;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float out_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));
#ifdef DEPTH_OCCLUSION
float depth_occlusion=occlusionFadeMultiSample(projected_point);float depth_occlusion_multplier=mix(occlusion_opacity,1.0,depth_occlusion);out_fade_opacity*=depth_occlusion_multplier;
#endif
#ifdef OCCLUSION_QUERIES
float occludedFadeMultiplier=mix(occlusion_opacity,1.0,a_occlusion_query_opacity);out_fade_opacity*=occludedFadeMultiplier;
#endif
float alpha=opacity*out_fade_opacity;float hidden=float(alpha==0.0 || projected_point.w <=0.0 || occlusion_fade==0.0);vec3 pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);pos=projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y;
#else
#ifdef ELEVATED_ROADS
vec3 xAxis=vec3(a_x_axis.xy,a_x_axis.z*u_normal_scale);vec3 yAxis=vec3(a_y_axis.xy,a_y_axis.z*u_normal_scale);pos=projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y;
#else
pos=vec3(projected_pos.xy/projected_pos.w+offset,z);
#endif
#endif
gl_Position=mix(u_coord_matrix*vec4(pos,1.0),AWAY,hidden);float gamma_scale=gl_Position.w;v_draw_halo=(u_is_halo && float(gl_InstanceID)==0.0) ? 1.0 : 0.0;v_gamma_scale_size_fade_opacity=vec3(gamma_scale,size,out_fade_opacity);v_tex_a=a_tex/u_texsize;
#ifdef RENDER_TEXT_AND_SYMBOL
is_sdf=a_size[0]-2.0*a_size_min;v_tex_a_icon=a_tex/u_texsize_icon;
#endif
#ifdef ICON_TRANSITION
v_tex_b=a_texb/u_texsize;
#endif
#ifdef Z_OFFSET
#ifdef RENDER_SHADOWS
vec4 shd_pos=u_inv_matrix*vec4(pos,1.0);vec3 shd_pos0=shd_pos.xyz;vec3 shd_pos1=shd_pos.xyz;
#ifdef NORMAL_OFFSET
vec3 shd_pos_offset=shadow_normal_offset(vec3(0.0,0.0,1.0));shd_pos0+=shd_pos_offset*shadow_normal_offset_multiplier0();shd_pos1+=shd_pos_offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#endif
#ifdef INDICATOR_CUTOUT
v_z_offset=e;
#else
#ifdef Z_OFFSET
#ifdef RENDER_SHADOWS
v_z_offset=e;
#endif
#endif
#endif
}`),terrainRaster:yi(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_shadow.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform sampler2D u_image0;in vec2 v_pos0;
#ifdef FOG
in float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
in vec4 v_pos_light_view_0;in vec4 v_pos_light_view_1;
#endif
uniform vec3 u_ground_shadow_factor;void main() {vec4 image_color=texture(u_image0,v_pos0);vec4 color;
#ifdef LIGHTING_3D_MODE
const vec3 normal=vec3(0.0,0.0,1.0);
#ifdef RENDER_SHADOWS
float cutoffOpacity=1.0;
#ifdef RENDER_CUTOFF
cutoffOpacity=cutoff_opacity(u_cutoff_params,1.0/gl_FragCoord.w);
#endif
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
vec3 unlit_base=image_color.rgb*(1.0-image_color.a);vec3 emissive_base=image_color.rgb*image_color.a;float ndotl=u_shadow_direction.z;float occlusion=ndotl < 0.0 ? 1.0 : shadow_occlusion(v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w,0.0);ndotl=max(0.0,ndotl);vec3 lit=apply_lighting(unlit_base,normal,mix(1.0,(1.0-(u_shadow_intensity*occlusion))*ndotl,cutoffOpacity));vec3 emissive=compute_emissive_draped(emissive_base,1.0-u_shadow_intensity,occlusion,u_ground_shadow_factor);color.rgb=lit+emissive;color.a=1.0;
#else
float lighting_factor=shadowed_light_factor_normal_unbiased(normal,v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);color=apply_lighting(image_color,normal,mix(1.0,lighting_factor,cutoffOpacity));
#endif
#else
float lighting_factor=u_lighting_directional_dir.z;color=apply_lighting(image_color,normal,lighting_factor);
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
color.rgb=mix(color.rgb,image_color.rgb,image_color.a);color.a=1.0;
#endif
#endif
#else
color=image_color;
#endif
#ifdef FOG
#ifdef ZERO_EXAGGERATION
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#else
color=fog_dither(fog_apply_from_vert(color,v_fog_opacity));
#endif
#endif
glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
uniform mat4 u_matrix;uniform float u_skirt_height;in vec2 a_pos;out vec2 v_pos0;
#ifdef FOG
out float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out vec4 v_pos_light_view_0;out vec4 v_pos_light_view_1;out float v_depth;
#endif
void main() {vec3 decomposedPosAndSkirt=decomposeToPosAndSkirt(a_pos);float skirt=decomposedPosAndSkirt.z;vec2 decodedPos=decomposedPosAndSkirt.xy;float elevation=elevation(decodedPos)-skirt*u_skirt_height;v_pos0=decodedPos/8192.0;gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);
#ifdef FOG
#ifdef ZERO_EXAGGERATION
v_fog_pos=fog_position(decodedPos);
#else
v_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));
#endif
#endif
#ifdef RENDER_SHADOWS
vec3 pos=vec3(decodedPos,elevation);v_pos_light_view_0=u_light_matrix_0*vec4(pos,1.);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1.);
#endif
}`),terrainDepth:yi("precision highp float;in float v_depth;void main() {glFragColor=pack_depth(v_depth);}",`#include "_prelude_terrain.vertex.glsl"
uniform mat4 u_matrix;in vec2 a_pos;out float v_depth;void main() {float elevation=elevation(a_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}`),skybox:yi(`#include "_prelude_fog.fragment.glsl"
in lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(
cos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=texture(u_cubemap,uv).rgb;
#ifdef FOG
sky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);
#endif
sky_color+=0.1*sun_disk(v_uv,u_sun_direction);glFragColor=vec4(sky_color*u_opacity,u_opacity);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
}`,Xr),skyboxGradient:yi(`#include "_prelude_fog.fragment.glsl"
in highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture(u_color_ramp,vec2(progress,0.5));
#ifdef FOG
color.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;
#endif
color*=u_opacity;glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
}`,Xr),skyboxCapture:yi(`
in highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;precision highp float;
#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)
#define BETA_M                  vec3(21e-6,21e-6,21e-6)
#define MIE_G                   0.76
#define DENSITY_HEIGHT_SCALE_R  8000.0
#define DENSITY_HEIGHT_SCALE_M  1200.0
#define PLANET_RADIUS           6360e3
#define ATMOSPHERE_RADIUS       6420e3
#define SAMPLE_STEPS            10
#define DENSITY_STEPS           4
float ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;glFragColor=vec4(color,1.0);}`,"in highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;out highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}"),globeRaster:yi(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform sampler2D u_image0;uniform float u_far_z_cutoff;in vec2 v_pos0;
#ifndef FOG
uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform vec2 u_viewport;
#endif
void main() {vec4 color;
#ifdef CUSTOM_ANTIALIASING
highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float norm_dist_from_center=1.0-length(closest_point-u_globe_pos)/u_globe_radius;const float antialias_pixel=2.0;highp float antialias_factor=antialias_pixel*fwidth(norm_dist_from_center);highp float antialias=smoothstep(0.0,antialias_factor,norm_dist_from_center);vec4 raster=texture(u_image0,v_pos0);
#ifdef LIGHTING_3D_MODE
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
raster=apply_lighting_with_emission_ground(raster,raster.a);color=vec4(clamp(raster.rgb,vec3(0),vec3(1))*antialias,antialias);
#else
raster=apply_lighting_ground(raster);color=vec4(raster.rgb*antialias,raster.a*antialias);
#endif
#else
color=vec4(raster.rgb*antialias,raster.a*antialias);
#endif
#else
color=texture(u_image0,v_pos0);
#ifdef LIGHTING_3D_MODE
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
color=apply_lighting_with_emission_ground(color,color.a);color.a=1.0;
#else
color=apply_lighting_ground(color);
#endif
#endif
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
color*=1.0-step(u_far_z_cutoff,1.0/gl_FragCoord.w);glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
uniform mat4 u_proj_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;uniform mat3 u_grid_matrix;uniform float u_skirt_height;
#ifdef GLOBE_POLES
in vec3 a_globe_pos;in vec2 a_uv;
#else
in vec2 a_pos;
#endif
out vec2 v_pos0;void main() {
#ifdef GLOBE_POLES
vec3 globe_pos=a_globe_pos;vec2 uv=a_uv;
#else
float tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float uvY=mercatorY*tiles-idy;float mercatorX=mercatorXfromLng(latLng[1]);float uvX=mercatorX*tiles-idx;vec3 globe_pos=latLngToECEF(latLng.xy);vec2 merc_pos=vec2(mercatorX,mercatorY);vec2 uv=vec2(uvX,uvY);
#endif
v_pos0=uv;vec2 tile_pos=uv*EXTENT;vec3 globe_derived_up_vector=normalize(globe_pos)*u_tile_up_scale;
#ifdef GLOBE_POLES
vec3 up_vector=globe_derived_up_vector;
#else
vec3 up_vector=elevationVector(tile_pos);
#endif
float height=elevation(tile_pos);globe_pos+=up_vector*height;
#ifndef GLOBE_POLES
globe_pos-=globe_derived_up_vector*u_skirt_height*decomposed_pos_and_skirt.z;
#endif
#ifdef GLOBE_POLES
vec4 interpolated_pos=u_globe_matrix*vec4(globe_pos,1.0);
#else
vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {merc_world_pos=vec4(merc_pos,height-u_skirt_height*decomposed_pos_and_skirt.z,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition),1.0);
#endif
gl_Position=u_proj_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
}`),globeAtmosphere:yi(`#include "_prelude_fog.fragment.glsl"
uniform float u_transition;uniform highp float u_fadeout_range;uniform highp float u_temporal_offset;uniform vec4 u_color;uniform vec4 u_high_color;uniform vec4 u_space_color;uniform float u_horizon_angle;in highp vec3 v_ray_dir;in highp vec3 v_horizon_dir;void main() {highp vec3 dir=normalize(v_ray_dir);float globe_pos_dot_dir;
#ifdef PROJECTION_GLOBE_VIEW
globe_pos_dot_dir=dot(u_globe_pos,dir);highp vec3 closest_point_forward=abs(globe_pos_dot_dir)*dir;float norm_dist_from_center=length(closest_point_forward-u_globe_pos)/u_globe_radius;if (norm_dist_from_center < 0.98) {
#ifdef ALPHA_PASS
glFragColor=vec4(0,0,0,0);return;
#else
#ifdef NATIVE
glFragColor=vec4(1,1,1,1);
#else
glFragColor=vec4(0,0,0,1);
#endif
return;
#endif
}
#endif
highp vec3 horizon_dir=normalize(v_horizon_dir);float horizon_angle_mercator=dir.y < horizon_dir.y ?
0.0 : max(acos(clamp(dot(dir,horizon_dir),-1.0,1.0)),0.0);float horizon_angle;
#ifdef PROJECTION_GLOBE_VIEW
highp vec3 closest_point=globe_pos_dot_dir*dir;highp float closest_point_to_center=length(closest_point-u_globe_pos);highp float theta=asin(clamp(closest_point_to_center/length(u_globe_pos),-1.0,1.0));horizon_angle=globe_pos_dot_dir < 0.0 ?
PI-theta-u_horizon_angle : theta-u_horizon_angle;float angle_t=pow(u_transition,10.0);horizon_angle=mix(horizon_angle,horizon_angle_mercator,angle_t);
#else
horizon_angle=horizon_angle_mercator;
#endif
horizon_angle/=PI;float t=exp(-horizon_angle/u_fadeout_range);float alpha_0=u_color.a;float alpha_1=u_high_color.a;float alpha_2=u_space_color.a;vec3 color_stop_0=u_color.rgb;vec3 color_stop_1=u_high_color.rgb;vec3 color_stop_2=u_space_color.rgb;
#ifdef ALPHA_PASS
float a0=mix(alpha_2,1.0,alpha_1);float a1=mix(a0,1.0,alpha_0);float a2=mix(a0,a1,t);float a =mix(alpha_2,a2,t);glFragColor=vec4(1.0,1.0,1.0,a);
#else
vec3 c0=mix(color_stop_2,color_stop_1,alpha_1);vec3 c1=mix(c0,color_stop_0,alpha_0);vec3 c2=mix(c0,c1,t);vec3 c=c2;glFragColor=vec4(c*t,t);
#endif
}`,`in vec3 a_pos;in vec2 a_uv;uniform vec3 u_frustum_tl;uniform vec3 u_frustum_tr;uniform vec3 u_frustum_br;uniform vec3 u_frustum_bl;uniform float u_horizon;out highp vec3 v_ray_dir;out highp vec3 v_horizon_dir;void main() {v_ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,a_uv.x),mix(u_frustum_bl,u_frustum_br,a_uv.x),a_uv.y);v_horizon_dir=mix(
mix(u_frustum_tl,u_frustum_bl,u_horizon),mix(u_frustum_tr,u_frustum_br,u_horizon),a_uv.x);gl_Position=vec4(a_pos,1.0);}`),model:yi(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_shadow.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform float u_opacity;uniform vec3 u_lightcolor;uniform vec3 u_lightpos;uniform float u_lightintensity;uniform vec4 u_baseColorFactor;uniform vec4 u_emissiveFactor;uniform float u_metallicFactor;uniform float u_roughnessFactor;uniform float u_emissive_strength;in highp vec4 v_position_height;in lowp vec4 v_color_mix;
#ifdef RENDER_SHADOWS
in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in float v_depth_shadows;
#endif
#ifdef OCCLUSION_TEXTURE_TRANSFORM
uniform vec4 u_occlusionTextureTransform;
#endif
#pragma mapbox: define-attribute highp vec3 normal_3f
#pragma mapbox: define-attribute highp vec3 color_3f
#pragma mapbox: define-attribute highp vec4 color_4f
#pragma mapbox: define-attribute highp vec2 uv_2f
#pragma mapbox: initialize-attribute highp vec3 normal_3f
#pragma mapbox: initialize-attribute highp vec3 color_3f
#pragma mapbox: initialize-attribute highp vec4 color_4f
#pragma mapbox: initialize-attribute highp vec2 uv_2f
#ifdef HAS_ATTRIBUTE_a_pbr
in lowp vec4 v_roughness_metallic_emissive_alpha;in mediump vec4 v_height_based_emission_params;
#endif
#ifdef HAS_TEXTURE_u_baseColorTexture
uniform sampler2D u_baseColorTexture;uniform bool u_baseTextureIsAlpha;uniform bool u_alphaMask;uniform float u_alphaCutoff;
#endif
#ifdef HAS_TEXTURE_u_metallicRoughnessTexture
uniform sampler2D u_metallicRoughnessTexture;
#endif
#ifdef HAS_TEXTURE_u_occlusionTexture
uniform sampler2D u_occlusionTexture;uniform float u_aoIntensity;
#endif
#ifdef HAS_TEXTURE_u_normalTexture
uniform sampler2D u_normalTexture;
#endif
#ifdef HAS_TEXTURE_u_emissionTexture
uniform sampler2D u_emissionTexture;
#endif
#ifdef APPLY_LUT_ON_GPU
uniform highp sampler3D u_lutTexture;
#endif
#ifdef TERRAIN_FRAGMENT_OCCLUSION
in highp float v_depth;uniform highp sampler2D u_depthTexture;uniform highp vec2 u_inv_depth_size;uniform highp vec2 u_depth_range_unpack;
#ifdef DEPTH_D24
highp float unpack_depth(highp float depth) {return  depth*u_depth_range_unpack.x+u_depth_range_unpack.y;}
#else
highp float unpack_depth_rgba(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}
#endif
bool isOccluded() {highp vec2 coord=gl_FragCoord.xy*u_inv_depth_size;
#ifdef DEPTH_D24
highp float depth=unpack_depth(texture(u_depthTexture,coord).r);
#else
highp float depth=unpack_depth_rgba(texture(u_depthTexture,coord));
#endif
return v_depth > depth+0.0005;}
#endif
#define saturate(_x) clamp(_x,0.,1.)
vec3 linearTosRGB(vec3 color) {return pow(color,vec3(1./2.2));}vec3 sRGBToLinear(vec3 srgbIn) {return pow(srgbIn,vec3(2.2));}float calculate_NdotL(vec3 normal,vec3 lightDir) {const float ext=0.70710678118;return (clamp(dot(normal,lightDir),-ext,1.0)+ext)/(1.0+ext);}vec3 getDiffuseShadedColor(vec3 albedo,vec3 normal,vec3 lightDir,vec3 lightColor)
{
#ifdef LIGHTING_3D_MODE
vec3 transformed_normal=vec3(-normal.xy,normal.z);float lighting_factor;
#ifdef RENDER_SHADOWS
lighting_factor=shadowed_light_factor_normal(transformed_normal,v_pos_light_view_0,v_pos_light_view_1,v_depth_shadows);
#else
lighting_factor=saturate(dot(transformed_normal,u_lighting_directional_dir));
#endif
return apply_lighting(albedo,transformed_normal,lighting_factor);
#else
vec3 n=normal;float colorvalue=((albedo.x*0.2126)+(albedo.y*0.7152))+(albedo.z*0.0722);vec3 c=vec3(0.03,0.03,0.03);float directional=clamp(dot(n,vec3(lightDir)),0.0,1.0);directional=mix(1.0-u_lightintensity,max((1.0-colorvalue)+u_lightintensity,1.0),directional);vec3 c3=c+clamp((albedo*directional)*lightColor,mix(vec3(0.0),vec3(0.3),vec3(1.0)-lightColor),vec3(1.0));return c3;
#endif
}vec4 getBaseColor() {vec4 albedo=u_baseColorFactor;
#ifdef HAS_ATTRIBUTE_a_color_3f
albedo*=vec4(color_3f,1.0);
#endif
#ifdef HAS_ATTRIBUTE_a_pbr
#else
#ifdef HAS_ATTRIBUTE_a_color_4f
albedo*=color_4f;
#endif
#endif
#if defined (HAS_TEXTURE_u_baseColorTexture) && defined (HAS_ATTRIBUTE_a_uv_2f)
vec4 texColor=texture(u_baseColorTexture,uv_2f);if(u_alphaMask) {if (texColor.w < u_alphaCutoff) {discard;}}
#ifdef UNPREMULT_TEXTURE_IN_SHADER
if(texColor.w > 0.0) {texColor.rgb/=texColor.w;}texColor.w=1.0;
#endif
if(u_baseTextureIsAlpha) {if (texColor.r < 0.5) {discard;}} else {texColor.rgb=sRGBToLinear(texColor.rgb);albedo*=texColor;}
#endif
vec4 color=vec4(mix(albedo.rgb,v_color_mix.rgb,v_color_mix.a),albedo.a);
#ifdef APPLY_LUT_ON_GPU
color=applyLUT(u_lutTexture,color);
#endif
return color;}highp mat3 cotangentFrame(highp vec3 N,highp vec3 p,highp vec2 uv ) {
#ifdef HAS_TEXTURE_u_normalTexture
highp vec3 dp1=vec3(dFdx(p.x),dFdx(p.y),dFdx(p.z));highp vec3 dp2=vec3(dFdy(p.x),dFdy(p.y),dFdy(p.z));highp vec2 duv1=vec2(dFdx(uv.x),dFdx(uv.y));highp vec2 duv2=vec2(dFdy(uv.x),dFdy(uv.y));highp vec3 dp2perp=cross( dp2,N );highp vec3 dp1perp=cross( N,dp1 );highp vec3 T=dp2perp*duv1.x+dp1perp*duv2.x;highp vec3 B=dp2perp*duv1.y+dp1perp*duv2.y;highp float lengthT=dot(T,T);highp float lengthB=dot(B,B);highp float maxLength=max(lengthT,lengthB);highp float invmax=inversesqrt( maxLength );highp mat3 res=mat3( T*invmax,B*invmax,N );return res;
#else
return mat3(1.0);
#endif
}highp vec3 getNormal(){highp vec3 n;
#ifdef HAS_ATTRIBUTE_a_normal_3f
n=normalize(normal_3f);
#else
highp vec3 fdx=vec3(dFdx(v_position_height.x),dFdx(v_position_height.y),dFdx(v_position_height.z));highp vec3 fdy=vec3(dFdy(v_position_height.x),dFdy(v_position_height.y),dFdy(v_position_height.z));n=normalize(cross(fdx,fdy))*-1.0;
#endif
#if defined(HAS_TEXTURE_u_normalTexture) && defined(HAS_ATTRIBUTE_a_uv_2f)
vec3 nMap=texture( u_normalTexture,uv_2f).xyz;nMap=normalize(2.0*nMap-vec3(1.0));highp vec3 v=normalize(-v_position_height.xyz);highp mat3 TBN=cotangentFrame(n,v,uv_2f);n=normalize(TBN*nMap);
#endif
return n;}struct Material {float perceptualRoughness;float alphaRoughness;float metallic;vec3 f90;vec4 baseColor;vec3 diffuseColor;vec3 specularColor;highp vec3 normal;};Material getPBRMaterial() {Material mat;mat.baseColor=getBaseColor();mat.perceptualRoughness=u_roughnessFactor;mat.metallic=u_metallicFactor;
#ifdef HAS_ATTRIBUTE_a_pbr
mat.perceptualRoughness=v_roughness_metallic_emissive_alpha.x;mat.metallic=v_roughness_metallic_emissive_alpha.y;mat.baseColor.w*=v_roughness_metallic_emissive_alpha.w;
#endif
#if defined(HAS_TEXTURE_u_metallicRoughnessTexture) && defined(HAS_ATTRIBUTE_a_uv_2f) 
vec4 mrSample=texture(u_metallicRoughnessTexture,uv_2f);mat.perceptualRoughness*=mrSample.g;mat.metallic*=mrSample.b;
#endif
const float c_minRoughness=0.04;mat.perceptualRoughness=clamp(mat.perceptualRoughness,c_minRoughness,1.0);mat.metallic=saturate(mat.metallic);mat.alphaRoughness=mat.perceptualRoughness*mat.perceptualRoughness;const vec3 f0=vec3(0.04);mat.diffuseColor=mat.baseColor.rgb*(vec3(1.0)-f0);mat.diffuseColor*=1.0-mat.metallic;mat.specularColor=mix(f0,mat.baseColor.rgb,mat.metallic);highp float reflectance=max(max(mat.specularColor.r,mat.specularColor.g),mat.specularColor.b);highp float reflectance90=saturate(reflectance*25.0);mat.f90=vec3(reflectance90);mat.normal=getNormal();return mat;}float V_GGX(float NdotL,float NdotV,float roughness)
{float a2=roughness*roughness;float GGXV=NdotL*sqrt(NdotV*NdotV*(1.0-a2)+a2);float GGXL=NdotV*sqrt(NdotL*NdotL*(1.0-a2)+a2);return 0.5/(GGXV+GGXL);}float V_GGXFast(float NdotL,float NdotV,float roughness) {float a=roughness;float GGXV=NdotL*(NdotV*(1.0-a)+a);float GGXL=NdotV*(NdotL*(1.0-a)+a);return 0.5/(GGXV+GGXL);}vec3 F_Schlick(vec3 specularColor,vec3 f90,float VdotH)
{return specularColor+(f90-specularColor)*pow(clamp(1.0-VdotH,0.0,1.0),5.0);}vec3 F_SchlickFast(vec3 specularColor,float VdotH)
{float x=1.0-VdotH;float x4=x*x*x*x;return specularColor+(1.0-specularColor)*x4*x;}float D_GGX(highp float NdotH,float alphaRoughness)
{highp float a4=alphaRoughness*alphaRoughness;highp float f=(NdotH*a4-NdotH)*NdotH+1.0;return a4/(PI*f*f);}vec3 diffuseBurley(Material mat,float LdotH,float NdotL,float NdotV)
{float f90=2.0*LdotH*LdotH*mat.alphaRoughness-0.5;return (mat.diffuseColor/PI)*(1.0+f90*pow((1.0-NdotL),5.0))*(1.0+f90*pow((1.0-NdotV),5.0));}vec3 diffuseLambertian(Material mat)
{
#ifdef LIGHTING_3D_MODE
return mat.diffuseColor;
#else
return mat.diffuseColor/PI;
#endif
}vec3 EnvBRDFApprox(vec3 specularColor,float roughness,highp float NdotV)
{vec4 c0=vec4(-1,-0.0275,-0.572,0.022);vec4 c1=vec4(1,0.0425,1.04,-0.04);highp vec4 r=roughness*c0+c1;highp float a004=min(r.x*r.x,exp2(-9.28*NdotV))*r.x+r.y;vec2 AB=vec2(-1.04,1.04)*a004+r.zw;return specularColor*AB.x+AB.y;}vec3 computeIndirectLightContribution(Material mat,float NdotV,vec3 normal)
{vec3 env_light=vec3(0.65,0.65,0.65);
#ifdef LIGHTING_3D_MODE
float ambient_factor=calculate_ambient_directional_factor(normal);env_light=u_lighting_ambient_color*ambient_factor;
#endif
vec3 envBRDF=EnvBRDFApprox(mat.specularColor,mat.perceptualRoughness,NdotV);vec3 indirectSpecular= envBRDF*env_light;vec3 indirectDiffuse=mat.diffuseColor*env_light;return indirectSpecular+indirectDiffuse;}vec3 computeLightContribution(Material mat,vec3 lightPosition,vec3 lightColor)
{highp vec3 n=mat.normal;highp vec3 v=normalize(-v_position_height.xyz);highp vec3 l=normalize(lightPosition);highp vec3 h=normalize(v+l);float NdotV=clamp(abs(dot(n,v)),0.001,1.0);float NdotL=saturate(dot(n,l));highp float NdotH=saturate(dot(n,h));float VdotH=saturate(dot(v,h));vec3 f=F_SchlickFast(mat.specularColor,VdotH);float g=V_GGXFast(NdotL,NdotV,mat.alphaRoughness);float d=D_GGX(NdotH,mat.alphaRoughness);vec3 diffuseTerm=(1.0-f)*diffuseLambertian(mat);vec3 specularTerm=f*g*d;vec3 transformed_normal=vec3(-n.xy,n.z);float lighting_factor;
#ifdef RENDER_SHADOWS
lighting_factor=shadowed_light_factor_normal(transformed_normal,v_pos_light_view_0,v_pos_light_view_1,v_depth_shadows);
#else
lighting_factor=NdotL;
#endif
vec3 directLightColor=(specularTerm+diffuseTerm)*lighting_factor*lightColor;vec3 indirectLightColor=computeIndirectLightContribution(mat,NdotV,transformed_normal);vec3 color=(saturate(directLightColor)+indirectLightColor);float intensityFactor=1.0;
#if !defined(LIGHTING_3D_MODE)
const vec3 luminosityFactor=vec3(0.2126,0.7152,0.0722);float luminance=dot(diffuseTerm,luminosityFactor);intensityFactor=mix((1.0-u_lightintensity),max((1.0-luminance+u_lightintensity),1.0),NdotL);
#endif
color*=intensityFactor;return color;}void main() {
#ifdef TERRAIN_FRAGMENT_OCCLUSION
if (isOccluded()) {discard;}
#endif
vec3 lightDir=u_lightpos;vec3 lightColor=u_lightcolor;
#ifdef LIGHTING_3D_MODE
lightDir=u_lighting_directional_dir;lightDir.xy=-lightDir.xy;lightColor=u_lighting_directional_color;
#endif
vec4 finalColor;
#ifdef DIFFUSE_SHADED
vec3 N=getNormal();vec3 baseColor=getBaseColor().rgb;vec3 diffuse=getDiffuseShadedColor(baseColor,N,lightDir,lightColor);
#ifdef HAS_TEXTURE_u_occlusionTexture
float ao=(texture(u_occlusionTexture,uv_2f).r-1.0)*u_aoIntensity+1.0;diffuse*=ao;
#endif
finalColor=vec4(mix(diffuse,baseColor,u_emissive_strength),1.0)*u_opacity;
#else
Material mat=getPBRMaterial();vec3 color=computeLightContribution(mat,lightDir,lightColor);float ao=1.0;
#if defined (HAS_TEXTURE_u_occlusionTexture) && defined(HAS_ATTRIBUTE_a_uv_2f)
#ifdef OCCLUSION_TEXTURE_TRANSFORM
vec2 uv=uv_2f.xy*u_occlusionTextureTransform.zw+u_occlusionTextureTransform.xy;
#else
vec2 uv=uv_2f;
#endif
ao=(texture(u_occlusionTexture,uv).x-1.0)*u_aoIntensity+1.0;color*=ao;
#endif
vec4 emissive=u_emissiveFactor;
#if defined(HAS_TEXTURE_u_emissionTexture) && defined(HAS_ATTRIBUTE_a_uv_2f)
emissive.rgb*=sRGBToLinear(texture(u_emissionTexture,uv_2f).rgb);
#endif
#ifdef APPLY_LUT_ON_GPU
float emissiveFactorLength=max(length(u_emissiveFactor.rgb),0.001);emissive.rgb=sRGBToLinear(applyLUT(u_lutTexture,linearTosRGB(emissive.rgb/emissiveFactorLength).rbg))*emissiveFactorLength;
#endif
color+=emissive.rgb;float opacity=mat.baseColor.w*u_opacity;
#ifdef HAS_ATTRIBUTE_a_pbr
float resEmission=v_roughness_metallic_emissive_alpha.z;resEmission*=v_height_based_emission_params.z+v_height_based_emission_params.w*pow(clamp(v_height_based_emission_params.x,0.0,1.0),v_height_based_emission_params.y);vec3 color_mix=v_color_mix.rgb;
#ifdef APPLY_LUT_ON_GPU
color_mix=applyLUT(u_lutTexture,color_mix);
#endif
color=mix(color,color_mix,min(1.0,resEmission));
#ifdef HAS_ATTRIBUTE_a_color_4f
float distance=length(vec2(1.3*max(0.0,abs(color_4f.x)-color_4f.z),color_4f.y));distance+= mix(0.5,0.0,clamp(resEmission-1.0,0.0,1.0));opacity*=v_roughness_metallic_emissive_alpha.w*saturate(1.0-distance*distance);
#endif
#endif
vec3 unlitColor=mat.baseColor.rgb*ao+emissive.rgb;color=mix(color,unlitColor,u_emissive_strength);color=linearTosRGB(color);color*=opacity;finalColor=vec4(color,opacity);
#endif
#ifdef FOG
finalColor=fog_dither(fog_apply_premultiplied(finalColor,v_fog_pos,v_position_height.w));
#endif
#ifdef RENDER_CUTOFF
finalColor*=v_cutoff_opacity;
#endif
#ifdef INDICATOR_CUTOUT
finalColor=applyCutout(finalColor,v_position_height.w);
#endif
glFragColor=finalColor;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
in vec3 a_pos_3f;
#pragma mapbox: define-attribute highp vec3 normal_3f
#pragma mapbox: define-attribute highp vec2 uv_2f
#pragma mapbox: define-attribute highp vec3 color_3f
#pragma mapbox: define-attribute highp vec4 color_4f
#pragma mapbox: define-attribute-vertex-shader-only highp vec4 pbr
#pragma mapbox: define-attribute-vertex-shader-only highp vec3 heightBasedEmissiveStrength
uniform mat4 u_matrix;uniform mat4 u_node_matrix;uniform mat4 u_lighting_matrix;uniform vec3 u_camera_pos;uniform vec4 u_color_mix;
#ifdef INSTANCED_ARRAYS
in vec4 a_normal_matrix0;in vec4 a_normal_matrix1;in vec4 a_normal_matrix2;in vec4 a_normal_matrix3;
#else
uniform highp mat4 u_normal_matrix;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out float v_depth_shadows;
#endif
out vec4 v_position_height;out lowp vec4 v_color_mix;
#ifdef TERRAIN_FRAGMENT_OCCLUSION
out highp float v_depth;
#endif
#ifdef HAS_ATTRIBUTE_a_pbr
out lowp vec4 v_roughness_metallic_emissive_alpha;out mediump vec4 v_height_based_emission_params;
#endif
vec3 sRGBToLinear(vec3 srgbIn) {return pow(srgbIn,vec3(2.2));}void main() {
#pragma mapbox: initialize-attribute highp vec3 normal_3f
#pragma mapbox: initialize-attribute highp vec2 uv_2f
#pragma mapbox: initialize-attribute highp vec3 color_3f
#pragma mapbox: initialize-attribute highp vec4 color_4f
#pragma mapbox: initialize-attribute-custom highp vec4 pbr
#pragma mapbox: initialize-attribute-custom highp vec3 heightBasedEmissiveStrength
highp mat4 normal_matrix;
#ifdef INSTANCED_ARRAYS
normal_matrix=mat4(a_normal_matrix0,a_normal_matrix1,a_normal_matrix2,a_normal_matrix3);
#else
normal_matrix=u_normal_matrix;
#endif
vec3 local_pos;mat3 rs;
#ifdef MODEL_POSITION_ON_GPU
vec3 pos_color=normal_matrix[0].xyz;vec4 translate=normal_matrix[1];vec3 pos_a=floor(pos_color);vec3 rgb=1.05*(pos_color-pos_a);float hidden=float(pos_a.x > EXTENT);float color_mix=pos_a.z/100.0;v_color_mix=vec4(sRGBToLinear(rgb),color_mix);float meter_to_tile=normal_matrix[0].w;vec4 pos=vec4(pos_a.xy,translate.z,1.0);rs[0].x=normal_matrix[1].w;rs[0].yz=normal_matrix[2].xy;rs[1].xy=normal_matrix[2].zw;rs[1].z=normal_matrix[3].x;rs[2].xyz=normal_matrix[3].yzw;vec4 pos_node=u_lighting_matrix*vec4(a_pos_3f,1.0);vec3 rotated_pos_node=rs*pos_node.xyz;vec3 pos_model_tile=(rotated_pos_node+vec3(translate.xy,0.0))*vec3(meter_to_tile,meter_to_tile,1.0);pos.xyz+=pos_model_tile;local_pos=pos.xyz;gl_Position=mix(u_matrix*pos,AWAY,hidden);pos.z*=meter_to_tile;v_position_height.xyz=pos.xyz-u_camera_pos;
#else
local_pos=a_pos_3f;gl_Position=u_matrix*vec4(a_pos_3f,1);v_position_height.xyz=vec3(u_lighting_matrix*vec4(a_pos_3f,1));v_color_mix=vec4(sRGBToLinear(u_color_mix.rgb),u_color_mix.a);
#endif
v_position_height.w=a_pos_3f.z;
#ifdef HAS_ATTRIBUTE_a_pbr
vec4 albedo_c=decode_color(pbr.xy);vec2 e_r_m=unpack_float(pbr.z);vec2 r_m= unpack_float(e_r_m.y*16.0);r_m.r=r_m.r*16.0;v_color_mix=vec4(albedo_c.rgb,1.0);v_roughness_metallic_emissive_alpha=vec4(vec3(r_m,e_r_m.x)/255.0,albedo_c.a);v_roughness_metallic_emissive_alpha.z*=2.0;float heightBasedRelativeIntepolation=a_pos_3f.z*heightBasedEmissiveStrength.x+heightBasedEmissiveStrength.y;v_height_based_emission_params.x=heightBasedRelativeIntepolation;v_height_based_emission_params.y=heightBasedEmissiveStrength.z;vec2 emissionMultiplierValues=unpack_float(pbr.w)/256.0;v_height_based_emission_params.z=emissionMultiplierValues.x;v_height_based_emission_params.w=emissionMultiplierValues.y-emissionMultiplierValues.x;
#endif
#ifdef FOG
v_fog_pos=fog_position(local_pos);
#endif
#ifdef RENDER_CUTOFF
v_cutoff_opacity=cutoff_opacity(u_cutoff_params,gl_Position.z);
#endif
#ifdef TERRAIN_FRAGMENT_OCCLUSION
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef HAS_ATTRIBUTE_a_normal_3f
#ifdef MODEL_POSITION_ON_GPU
float x_squared_scale=dot(rs[0],rs[0]);float y_squared_scale=dot(rs[1],rs[1]);float z_squared_scale=dot(rs[2],rs[2]);vec3 squared_scale=vec3(x_squared_scale,y_squared_scale,z_squared_scale);normal_3f=rs*((u_lighting_matrix*vec4(normal_3f,0.0)).xyz/squared_scale);normal_3f=normalize(normal_3f);
#else
normal_3f=vec3(normal_matrix*vec4(normal_3f,0));
#endif
#endif
#ifdef HAS_ATTRIBUTE_a_pbr
#ifdef HAS_ATTRIBUTE_a_color_4f
v_roughness_metallic_emissive_alpha.w=clamp(color_4f.a*v_roughness_metallic_emissive_alpha.w*(v_roughness_metallic_emissive_alpha.z-1.0),0.0,1.0);
#endif
#endif
#ifdef RENDER_SHADOWS
vec4 shadow_pos=u_node_matrix*vec4(local_pos,1.0);
#ifdef NORMAL_OFFSET
#ifdef HAS_ATTRIBUTE_a_normal_3f
#ifdef MODEL_POSITION_ON_GPU
vec3 offset=shadow_normal_offset(vec3(-normal_3f.xy,normal_3f.z));shadow_pos.xyz+=offset*shadow_normal_offset_multiplier0();
#else
vec3 offset=shadow_normal_offset_model(normal_3f);shadow_pos.xyz+=offset*shadow_normal_offset_multiplier0();
#endif
#endif
#endif
v_pos_light_view_0=u_light_matrix_0*shadow_pos;v_pos_light_view_1=u_light_matrix_1*shadow_pos;v_depth_shadows=gl_Position.w;
#endif
}`),modelDepth:yi(`in highp float v_depth;void main() {
#ifndef DEPTH_TEXTURE
glFragColor=pack_depth(v_depth);
#endif
}`,`in vec3 a_pos_3f;uniform mat4 u_matrix;out highp float v_depth;
#ifdef MODEL_POSITION_ON_GPU
#ifdef INSTANCED_ARRAYS
in vec4 a_normal_matrix0;in vec4 a_normal_matrix1;in vec4 a_normal_matrix2;in vec4 a_normal_matrix3;
#else
uniform highp mat4 u_instance;
#endif
uniform highp mat4 u_node_matrix;
#endif
void main() {
#ifdef MODEL_POSITION_ON_GPU
highp mat4 instance;
#ifdef INSTANCED_ARRAYS
instance=mat4(a_normal_matrix0,a_normal_matrix1,a_normal_matrix2,a_normal_matrix3);
#else
instance=u_instance;
#endif
vec3 pos_color=instance[0].xyz;vec4 translate=instance[1];vec3 pos_a=floor(pos_color);float hidden=float(pos_a.x > EXTENT);float meter_to_tile=instance[0].w;vec4 pos=vec4(pos_a.xy,translate.z,1.0);mat3 rs;rs[0].x=instance[1].w;rs[0].yz=instance[2].xy;rs[1].xy=instance[2].zw;rs[1].z=instance[3].x;rs[2].xyz=instance[3].yzw;vec4 pos_node=u_node_matrix*vec4(a_pos_3f,1.0);vec3 rotated_pos_node=rs*pos_node.xyz;vec3 pos_model_tile=(rotated_pos_node+vec3(translate.xy,0.0))*vec3(meter_to_tile,meter_to_tile,1.0);pos.xyz+=pos_model_tile;gl_Position=mix(u_matrix*pos,AWAY,hidden);
#else
gl_Position=u_matrix*vec4(a_pos_3f,1);
#endif
v_depth=gl_Position.z/gl_Position.w;}`),stars:yi(`in highp vec2 v_uv;in mediump float v_intensity;float shapeCircle(in vec2 uv)
{float beginFade=0.6;float lengthFromCenter=length(v_uv);return 1.0-clamp((lengthFromCenter-beginFade)/(1.0-beginFade),0.0,1.0);}void main() {float alpha=shapeCircle(v_uv);vec3 color=vec3(1.0,1.0,1.0);alpha*=v_intensity;glFragColor=vec4(color*alpha,alpha);HANDLE_WIREFRAME_DEBUG;}`,`
in vec3 a_pos_3f;in vec2 a_uv;in float a_size_scale;in float a_fade_opacity;uniform mat4 u_matrix;uniform vec3 u_up;uniform vec3 u_right;uniform float u_intensity_multiplier;out highp vec2 v_uv;out mediump float v_intensity;void main() {v_uv=a_uv;v_intensity=a_fade_opacity*u_intensity_multiplier;vec3 pos=a_pos_3f;pos+=a_uv.x*u_right*a_size_scale;pos+=a_uv.y*u_up*a_size_scale;gl_Position=u_matrix*vec4(pos,1.0);}`),snowParticle:yi("in highp vec2 uv;in highp float alphaMultiplier;uniform vec4 u_particleColor;uniform vec2 u_simpleShapeParameters;void main() {float t=clamp((length(uv)-u_simpleShapeParameters.x)/(1.0-u_simpleShapeParameters.x),0.0,1.0);float alpha=1.0-pow(t,pow(10.0,u_simpleShapeParameters.y));alpha*=alphaMultiplier;alpha*=u_particleColor.a;vec3 color=u_particleColor.rgb*alpha;glFragColor=vec4(color,alpha) ;HANDLE_WIREFRAME_DEBUG;}",`
in highp vec3 a_pos_3f;in highp vec2 a_uv;in highp vec4 a_snowParticleData;in highp vec4 a_snowParticleDataHorizontalOscillation;uniform mat4 u_modelview;uniform mat4 u_projection;uniform vec3 u_cam_pos;uniform vec2 u_screenSize;uniform float u_time;uniform float u_boxSize;uniform float u_velocityConeAperture; 
uniform float u_velocity;uniform vec3 u_direction;uniform float u_horizontalOscillationRadius; 
uniform float u_horizontalOscillationRate; 
uniform float u_billboardSize;uniform vec2 u_thinningCenterPos;uniform vec3 u_thinningShape;uniform float u_thinningAffectedRatio;uniform float u_thinningParticleOffset;out highp vec2 uv;out highp float alphaMultiplier;void main() {vec3 pos=a_pos_3f;float halfBoxSize=0.5*u_boxSize;pos.xyz*=halfBoxSize;pos+=u_cam_pos;float velocityConeApertureRad=radians(u_velocityConeAperture*0.5);float coneAnglePichRad=velocityConeApertureRad*a_snowParticleData.z;float coneAngleHeadingRad=a_snowParticleData.w*radians(360.0);vec3 localZ=normalize(u_direction);vec3 localX=normalize(cross(localZ,vec3(1,0,0)));vec3 localY=normalize(cross(localZ,localX));vec3 direction;direction.x=cos(coneAngleHeadingRad)*sin(coneAnglePichRad);direction.y=sin(coneAngleHeadingRad)*sin(coneAnglePichRad);direction.z=cos(coneAnglePichRad);direction=normalize(direction);vec3 simPosLocal=vec3(0,0,0);float velocityScale=(1.0+3.0*a_snowParticleData.y)*u_velocity;simPosLocal+=direction*velocityScale*u_time;float horizontalOscillationRadius=u_horizontalOscillationRadius*a_snowParticleDataHorizontalOscillation.x;float horizontalOscillationAngle=u_horizontalOscillationRate*u_time*(-1.0+2.0*a_snowParticleDataHorizontalOscillation.y);simPosLocal.xy+=horizontalOscillationRadius*vec2(cos(horizontalOscillationAngle),sin(horizontalOscillationAngle));vec3 simPos=localX*simPosLocal.x+
localY*simPosLocal.y+localZ*simPosLocal.z;pos+=simPos;pos=fract((pos+vec3(halfBoxSize))/vec3(u_boxSize))*u_boxSize-vec3(halfBoxSize);float clipZ=-u_cam_pos.z+pos.z;vec4 posView=u_modelview*vec4(pos,1.0);float size=u_billboardSize;alphaMultiplier=1.0;vec4 posScreen=u_projection*posView;posScreen/=posScreen.w;posScreen.xy=vec2(0.5)+posScreen.xy*0.5;posScreen.xy*=u_screenSize;vec2 thinningCenterPos=u_thinningCenterPos.xy;thinningCenterPos.y=u_screenSize.y-thinningCenterPos.y;float screenDist=length((thinningCenterPos-posScreen.xy)/(0.5*u_screenSize));screenDist+=a_snowParticleData.x*u_thinningParticleOffset;float scaleFactorMode=0.0;float thinningShapeDist=u_thinningShape.x+u_thinningShape.y;if (screenDist < thinningShapeDist) {float thinningFadeRatio=clamp((screenDist-u_thinningShape.x)/u_thinningShape.y,0.0,1.0);thinningFadeRatio=pow(thinningFadeRatio,u_thinningShape.z);if (a_snowParticleData.x < u_thinningAffectedRatio) {scaleFactorMode=1.0-thinningFadeRatio;alphaMultiplier=thinningFadeRatio;}}vec4 posScreen1=u_projection*vec4(posView.x-size,posView.yzw);posScreen1/=posScreen1.w;vec4 posScreen2=u_projection*vec4(posView.x+size,posView.yzw);posScreen2/=posScreen2.w;posScreen1.xy=vec2(0.5)+posScreen1.xy*0.5;posScreen1.xy*=u_screenSize;posScreen2.xy=vec2(0.5)+posScreen2.xy*0.5;posScreen2.xy*=u_screenSize;float screenLength=length(posScreen1.xy-posScreen2.xy);float screenEpsilon=3.0;float scaleFactor=1.0;if (screenLength < screenEpsilon) {scaleFactor=screenEpsilon/max(screenLength,0.01);scaleFactor=mix(scaleFactor,1.0,scaleFactorMode);}float screenEpsilon2=15.0;if (screenLength > screenEpsilon2) {scaleFactor=screenEpsilon2/max(screenLength,0.01);}size*=scaleFactor;vec2 right=size*vec2(1,0);vec2 up=size*vec2(0,1);posView.xy+=right*a_uv.x;posView.xy+=up*a_uv.y;uv=a_uv;gl_Position=u_projection*posView;}`),rainParticle:yi("in highp vec2 uv;in highp float particleRandomValue;uniform sampler2D u_texScreen;uniform float u_distortionStrength;uniform vec4 u_color;uniform vec2 u_thinningCenterPos;uniform vec3 u_thinningShape;uniform float u_thinningAffectedRatio;uniform float u_thinningParticleOffset;uniform float u_shapeDirectionalPower;uniform float u_mode;void main() {vec2 st=uv*0.5+vec2(0.5);vec2 uvm=uv;uvm.y=-1.0+2.0*pow(st.y,u_shapeDirectionalPower);float shape=clamp(1.0-length(uvm),0.0,1.0);float alpha=abs(shape)*u_color.a;vec2 screenSize=vec2(textureSize(u_texScreen,0));vec2 thinningCenterPos=u_thinningCenterPos.xy;thinningCenterPos.y=screenSize.y-thinningCenterPos.y;float screenDist=length((thinningCenterPos-gl_FragCoord.xy)/(0.5*screenSize));screenDist+=(0.5+0.5*particleRandomValue)*u_thinningParticleOffset;float thinningShapeDist=u_thinningShape.x+u_thinningShape.y;float thinningAlpha=1.0;if (screenDist < thinningShapeDist) {float thinningFadeRatio=clamp((screenDist-u_thinningShape.x)/u_thinningShape.y,0.0,1.0);thinningFadeRatio=pow(thinningFadeRatio,u_thinningShape.z);thinningAlpha*=thinningFadeRatio;}vec2 offsetXY=normalize(uvm)*abs(shape);vec2 stScreen=(gl_FragCoord.xy+offsetXY*u_distortionStrength*thinningAlpha)/screenSize;vec3 colorScreen=texture(u_texScreen,stScreen).rgb;alpha*=thinningAlpha;glFragColor=mix(vec4(colorScreen,1.0),vec4(u_color.rgb*alpha,alpha),u_mode);HANDLE_WIREFRAME_DEBUG;}",`
in highp vec3 a_pos_3f;in highp vec2 a_uv;in highp vec4 a_rainParticleData;uniform mat4 u_modelview;uniform mat4 u_projection;uniform vec3 u_cam_pos;uniform float u_time;uniform float u_boxSize;uniform float u_velocityConeAperture; 
uniform float u_velocity; 
uniform vec2 u_rainDropletSize;uniform vec3 u_rainDirection;out highp vec2 uv;out highp float particleRandomValue;void main() {vec3 pos=a_pos_3f;float halfBoxSize=0.5*u_boxSize;pos*=halfBoxSize; 
pos+=u_cam_pos;float velocityConeApertureRad=radians(u_velocityConeAperture*0.5);float coneAnglePichRad=velocityConeApertureRad*a_rainParticleData.z;float coneAngleHeadingRad=a_rainParticleData.w*radians(360.0);vec3 localZ=normalize(u_rainDirection);vec3 localX=normalize(cross(localZ,vec3(1,0,0)));vec3 localY=normalize(cross(localZ,localX));vec3 directionLocal;directionLocal.x=cos(coneAngleHeadingRad)*sin(coneAnglePichRad);directionLocal.y=sin(coneAngleHeadingRad)*sin(coneAnglePichRad);directionLocal.z=cos(coneAnglePichRad);directionLocal=normalize(directionLocal);vec3 directionWorld=localX*directionLocal.x+localY*directionLocal.y+localZ*directionLocal.z;float velocityScale=(1.0+3.0*a_rainParticleData.y)*u_velocity;vec3 simPosLocal=vec3(0,0,0);simPosLocal+=directionLocal*velocityScale*u_time;vec3 simPos=localX*simPosLocal.x+
localY*simPosLocal.y+localZ*simPosLocal.z;pos+=simPos;pos=fract((pos+vec3(halfBoxSize))/vec3(u_boxSize))*u_boxSize-vec3(halfBoxSize);vec4 posView=u_modelview*vec4(pos,1.0);vec3 directionView=normalize((u_modelview*vec4(directionWorld,0.0)).xyz);vec3 side=cross(directionView,normalize(posView.xyz));posView.xyz+=side*a_uv.x*u_rainDropletSize.x;posView.xyz+=directionView*a_uv.y*u_rainDropletSize.y;uv=a_uv;particleRandomValue=a_rainParticleData.x;gl_Position=u_projection*posView;}`),vignette:yi("uniform vec3 u_vignetteShape;uniform vec4 u_vignetteColor;in vec2 st;void main() {float screenDist=length(st);float alpha=clamp((screenDist-u_vignetteShape.x)/u_vignetteShape.y,0.0,1.0);alpha=pow(alpha,u_vignetteShape.z)*u_vignetteColor.a;vec3 color=u_vignetteColor.rgb;glFragColor=vec4(color*alpha,alpha) ;}","in vec2 a_pos_2f;out vec2 st;void main() {st=a_pos_2f;gl_Position=vec4(a_pos_2f,0,1);}"),occlusion:yi("uniform vec4 u_color;void main() {glFragColor=u_color;}",`#include "_prelude_terrain.vertex.glsl"
in highp vec2 a_offset_xy;uniform highp vec3 u_anchorPos;uniform mat4 u_matrix;uniform vec2 u_screenSizePx;uniform vec2 u_occluderSizePx;void main() {vec3 world_pos=u_anchorPos;
#ifdef TERRAIN
float e=elevation(world_pos.xy);world_pos.z+=e;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1.0);projected_point.xy+=projected_point.w*a_offset_xy*0.5*u_occluderSizePx/u_screenSizePx;gl_Position=projected_point;}`)};function Aa(f,i){const u=f.replace(/\s*\/\/[^\n]*\n/g,`
`).split(`
`);for(let p of u)if(p=p.trim(),p[0]==="#"&&p.includes("if")&&!p.includes("endif")){p=p.replace("#","").replace(/ifdef|ifndef|elif|if/g,"").replace(/!|defined|\(|\)|\|\||&&/g,"").replace(/\s+/g," ").trim();const x=p.split(" ");for(const S of x)i.includes(S)||i.push(S)}}function yi(f,i){const u=/#include\s+"([^"]+)"/g,p=/#pragma mapbox: ([\w\-]+) ([\w]+) ([\w]+) ([\w]+)/g;let x=i.match(/(attribute(\S*)|(^\s*|;)in) (highp |mediump |lowp )?([\w]+) ([\w]+)/gm);x&&(x=x.map(j=>{const K=j.split(" ");return K[K.length-1]}),x=[...new Set(x)]);const S={},T=[],O=[];if(f=f.replace(u,(j,K)=>(O.push(K),"")),(i=i.replace(u,(j,K)=>(T.push(K),""))).includes("flat out"))return void console.error('The usage of "flat" qualifier is disallowed, see: https://bugs.webkit.org/show_bug.cgi?id=268071');let B=[...Il];Aa(f,B),Aa(i,B);for(const j of[...T,...O])Ku[j]||console.error(`Undefined include: ${j}`),Hc[j]||(Hc[j]=[],Aa(Ku[j],Hc[j])),B=[...B,...Hc[j]];return{fragmentSource:f=f.replace(p,(j,K,te,Q,oe)=>(S[oe]=!0,K==="define"?`
#ifndef HAS_UNIFORM_u_${oe}
in ${te} ${Q} ${oe};
#else
uniform ${te} ${Q} u_${oe};
#endif
`:K==="initialize"?`
#ifdef HAS_UNIFORM_u_${oe}
    ${te} ${Q} ${oe} = u_${oe};
#endif
`:K==="define-attribute"?`
#ifdef HAS_ATTRIBUTE_a_${oe}
    in ${te} ${Q} ${oe};
#endif
`:K==="initialize-attribute"?"":void 0)),vertexSource:i=i.replace(p,(j,K,te,Q,oe)=>{const Ce=Q==="float"?"vec2":Q,_e=oe.match(/color/)?"color":Ce;return K==="define-attribute-vertex-shader-only"?`
#ifdef HAS_ATTRIBUTE_a_${oe}
in ${te} ${Q} a_${oe};
#endif
`:S[oe]?K==="define"?`
#ifndef HAS_UNIFORM_u_${oe}
uniform lowp float u_${oe}_t;
in ${te} ${Ce} a_${oe};
out ${te} ${Q} ${oe};
#else
uniform ${te} ${Q} u_${oe};
#endif
`:K==="initialize"?_e==="vec4"?`
#ifndef HAS_UNIFORM_u_${oe}
    ${oe} = a_${oe};
#else
    ${te} ${Q} ${oe} = u_${oe};
#endif
`:`
#ifndef HAS_UNIFORM_u_${oe}
    ${oe} = unpack_mix_${_e}(a_${oe}, u_${oe}_t);
#else
    ${te} ${Q} ${oe} = u_${oe};
#endif
`:K==="define-attribute"?`
#ifdef HAS_ATTRIBUTE_a_${oe}
    in ${te} ${Q} a_${oe};
    out ${te} ${Q} ${oe};
#endif
`:K==="initialize-attribute"?`
#ifdef HAS_ATTRIBUTE_a_${oe}
    ${oe} = a_${oe};
#endif
`:void 0:K==="define"?`
#ifndef HAS_UNIFORM_u_${oe}
uniform lowp float u_${oe}_t;
in ${te} ${Ce} a_${oe};
#else
uniform ${te} ${Q} u_${oe};
#endif
`:K==="define-instanced"?_e==="mat4"?`
#ifdef INSTANCED_ARRAYS
in vec4 a_${oe}0;
in vec4 a_${oe}1;
in vec4 a_${oe}2;
in vec4 a_${oe}3;
#else
uniform ${te} ${Q} u_${oe};
#endif
`:`
#ifdef INSTANCED_ARRAYS
in ${te} ${Ce} a_${oe};
#else
uniform ${te} ${Q} u_${oe};
#endif
`:K==="initialize-attribute-custom"?`
#ifdef HAS_ATTRIBUTE_a_${oe}
    ${te} ${Q} ${oe} = a_${oe};
#endif
`:_e==="vec4"?`
#ifndef HAS_UNIFORM_u_${oe}
    ${te} ${Q} ${oe} = a_${oe};
#else
    ${te} ${Q} ${oe} = u_${oe};
#endif
`:`
#ifndef HAS_UNIFORM_u_${oe}
    ${te} ${Q} ${oe} = unpack_mix_${_e}(a_${oe}, u_${oe}_t);
#else
    ${te} ${Q} ${oe} = u_${oe};
#endif
`}),staticAttributes:x,usedDefines:B,vertexIncludes:T,fragmentIncludes:O}}class gu{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffers=[],this.vao=null}bind(i,u,p,x,S,T,O,B){this.context=i;let j=this.boundPaintVertexBuffers.length!==x.length;for(let te=0;!j&&te<x.length;te++)this.boundPaintVertexBuffers[te]!==x[te]&&(j=!0);let K=this.boundDynamicVertexBuffers.length!==O.length;for(let te=0;!K&&te<O.length;te++)this.boundDynamicVertexBuffers[te]!==O[te]&&(K=!0);if(!this.vao||this.boundProgram!==u||this.boundLayoutVertexBuffer!==p||j||K||this.boundIndexBuffer!==S||this.boundVertexOffset!==T)this.freshBind(u,p,x,S,T,O,B);else{i.bindVertexArrayOES.set(this.vao);for(const te of O)te&&(te.bind(),B&&te.instanceCount&&te.setVertexAttribDivisor(i.gl,u,B));S&&S.dynamicDraw&&S.bind()}}freshBind(i,u,p,x,S,T,O){const B=i.numAttributes,j=this.context,K=j.gl;this.vao&&this.destroy(),this.vao=j.gl.createVertexArray(),j.bindVertexArrayOES.set(this.vao),this.boundProgram=i,this.boundLayoutVertexBuffer=u,this.boundPaintVertexBuffers=p,this.boundIndexBuffer=x,this.boundVertexOffset=S,this.boundDynamicVertexBuffers=T,u.enableAttributes(K,i),u.bind(),u.setVertexAttribPointers(K,i,S);for(const te of p)te.enableAttributes(K,i),te.bind(),te.setVertexAttribPointers(K,i,S);for(const te of T)te&&(te.enableAttributes(K,i),te.bind(),te.setVertexAttribPointers(K,i,S),O&&te.instanceCount&&te.setVertexAttribDivisor(K,i,O));x&&x.bind(),j.currentNumAttributes=B}destroy(){this.vao&&(this.context.gl.deleteVertexArray(this.vao),this.vao=null)}}function Ux(f,i){const u=Math.pow(2,i.canonical.z),p=i.canonical.y;return[new r.ac(0,p/u).toLngLat().lat,new r.ac(0,(p+1)/u).toLngLat().lat]}function jx(f,i,u,p,x,S,T){const O=f.context,B=O.gl,j=u.hillshadeFBO;if(!j)return;f.prepareDrawTile();const K=f.isTileAffectedByFog(i),te=f.getOrCreateProgram("hillshade",{overrideFog:K});O.activeTexture.set(B.TEXTURE0),B.bindTexture(B.TEXTURE_2D,j.colorAttachment.get());const Q=((Ee,Me,ze,qe)=>{const Je=ze.paint.get("hillshade-shadow-color"),lt=ze.paint.get("hillshade-shadow-color-use-theme").constantOr("default")==="none",ot=ze.paint.get("hillshade-highlight-color"),rt=ze.paint.get("hillshade-highlight-color-use-theme").constantOr("default")==="none",Qe=ze.paint.get("hillshade-accent-color"),ut=ze.paint.get("hillshade-accent-color-use-theme").constantOr("default")==="none",pt=ze.paint.get("hillshade-emissive-strength");let zt=r.al(ze.paint.get("hillshade-illumination-direction"));if(ze.paint.get("hillshade-illumination-anchor")==="viewport")zt-=Ee.transform.angle;else if(Ee.style&&Ee.style.enable3dLights()&&Ee.style.directionalLight){const nn=Ee.style.directionalLight.properties.get("direction"),sn=r.cR(nn.x,nn.y,nn.z);zt=r.al(sn[1])}const Vt=!Ee.options.moving;return{u_matrix:qe||Ee.transform.calculateProjMatrix(Me.tileID.toUnwrapped(),Vt),u_image:0,u_latrange:Ux(0,Me.tileID),u_light:[ze.paint.get("hillshade-exaggeration"),zt],u_shadow:Je.toPremultipliedRenderColor(lt?null:ze.lut),u_highlight:ot.toPremultipliedRenderColor(rt?null:ze.lut),u_emissive_strength:pt,u_accent:Qe.toPremultipliedRenderColor(ut?null:ze.lut)}})(f,u,p,f.terrain?i.projMatrix:null);f.uploadCommonUniforms(O,te,i.toUnwrapped());const{tileBoundsBuffer:oe,tileBoundsIndexBuffer:Ce,tileBoundsSegments:_e}=f.getTileBoundsBuffers(u);te.draw(f,B.TRIANGLES,x,S,T,Pr.disabled,Q,p.id,oe,Ce,_e)}function im(f,i,u){if(!i.needsDEMTextureUpload)return;const p=f.context,x=p.gl;p.pixelStoreUnpackPremultiplyAlpha.set(!1),i.demTexture=i.demTexture||f.getTileTexture(u.stride);const S=u.getPixels();i.demTexture?i.demTexture.update(S,{premultiply:!1}):i.demTexture=new r.T(p,S,x.R32F,{premultiply:!1}),i.needsDEMTextureUpload=!1}function Gx(f,i,u){const p=f.context,x=p.gl;if(!i.dem)return;const S=i.dem;if(p.activeTexture.set(x.TEXTURE1),im(f,i,S),!i.demTexture)return;i.demTexture.bind(x.NEAREST,x.CLAMP_TO_EDGE);const T=S.dim;p.activeTexture.set(x.TEXTURE0);let O=i.hillshadeFBO;if(!O){const Q=new r.T(p,{width:T,height:T,data:null},x.RGBA8);Q.bind(x.LINEAR,x.CLAMP_TO_EDGE),O=i.hillshadeFBO=p.createFramebuffer(T,T,!0,"renderbuffer"),O.colorAttachment.set(Q.texture)}p.bindFramebuffer.set(O.framebuffer),p.viewport.set([0,0,T,T]);const{tileBoundsBuffer:B,tileBoundsIndexBuffer:j,tileBoundsSegments:K}=f.getMercatorTileBoundsBuffers(),te=[];f.linearFloatFilteringSupported()&&te.push("TERRAIN_DEM_FLOAT_FORMAT"),f.getOrCreateProgram("hillshadePrepare",{defines:te}).draw(f,x.TRIANGLES,Jn.disabled,Vr.disabled,ai.unblended,Pr.disabled,((Q,oe)=>{const Ce=oe.stride,_e=r.bz();return r.c5(_e,0,r.aj,-8192,0,0,1),r.bo(_e,_e,[0,-8192,0]),{u_matrix:_e,u_image:1,u_dimension:[Ce,Ce],u_zoom:Q.overscaledZ}})(i.tileID,S),u.id,B,j,K),i.needsHillshadePrepare=!1}class Ns{constructor(i){this.gl=i.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(i){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class gy extends Ns{getDefault(){return r.am.transparent.toNonPremultipliedRenderColor(null)}set(i){const u=this.current;(i.r!==u.r||i.g!==u.g||i.b!==u.b||i.a!==u.a||this.dirty)&&(this.gl.clearColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)}}class y0 extends Ns{getDefault(){return 1}set(i){(i!==this.current||this.dirty)&&(this.gl.clearDepth(i),this.current=i,this.dirty=!1)}}class qx extends Ns{getDefault(){return 0}set(i){(i!==this.current||this.dirty)&&(this.gl.clearStencil(i),this.current=i,this.dirty=!1)}}class Wx extends Ns{getDefault(){return[!0,!0,!0,!0]}set(i){const u=this.current;(i[0]!==u[0]||i[1]!==u[1]||i[2]!==u[2]||i[3]!==u[3]||this.dirty)&&(this.gl.colorMask(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class Kx extends Ns{getDefault(){return!0}set(i){(i!==this.current||this.dirty)&&(this.gl.depthMask(i),this.current=i,this.dirty=!1)}}class Yx extends Ns{getDefault(){return 255}set(i){(i!==this.current||this.dirty)&&(this.gl.stencilMask(i),this.current=i,this.dirty=!1)}}class _y extends Ns{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(i){const u=this.current;(i.func!==u.func||i.ref!==u.ref||i.mask!==u.mask||this.dirty)&&(this.gl.stencilFunc(i.func,i.ref,i.mask),this.current=i,this.dirty=!1)}}class Zx extends Ns{getDefault(){const i=this.gl;return[i.KEEP,i.KEEP,i.KEEP]}set(i){const u=this.current;(i[0]!==u[0]||i[1]!==u[1]||i[2]!==u[2]||this.dirty)&&(this.gl.stencilOp(i[0],i[1],i[2]),this.current=i,this.dirty=!1)}}class sm extends Ns{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;i?u.enable(u.STENCIL_TEST):u.disable(u.STENCIL_TEST),this.current=i,this.dirty=!1}}class Xx extends Ns{getDefault(){return[0,1]}set(i){const u=this.current;(i[0]!==u[0]||i[1]!==u[1]||this.dirty)&&(this.gl.depthRange(i[0],i[1]),this.current=i,this.dirty=!1)}}class vy extends Ns{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;i?u.enable(u.DEPTH_TEST):u.disable(u.DEPTH_TEST),this.current=i,this.dirty=!1}}class b0 extends Ns{getDefault(){return this.gl.LESS}set(i){(i!==this.current||this.dirty)&&(this.gl.depthFunc(i),this.current=i,this.dirty=!1)}}class om extends Ns{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;i?u.enable(u.BLEND):u.disable(u.BLEND),this.current=i,this.dirty=!1}}class x0 extends Ns{getDefault(){const i=this.gl;return[i.ONE,i.ZERO,i.ONE,i.ZERO]}set(i){const u=this.current;(i[0]!==u[0]||i[1]!==u[1]||i[2]!==u[2]||i[3]!==u[3]||this.dirty)&&(this.gl.blendFuncSeparate(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class Fd extends Ns{getDefault(){return r.am.transparent.toNonPremultipliedRenderColor(null)}set(i){const u=this.current;(i.r!==u.r||i.g!==u.g||i.b!==u.b||i.a!==u.a||this.dirty)&&(this.gl.blendColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)}}class Rh extends Ns{getDefault(){return this.gl.FUNC_ADD}set(i){(i!==this.current||this.dirty)&&(this.gl.blendEquationSeparate(i,i),this.current=i,this.dirty=!1)}}class am extends Ns{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;i?u.enable(u.CULL_FACE):u.disable(u.CULL_FACE),this.current=i,this.dirty=!1}}class lm extends Ns{getDefault(){return this.gl.BACK}set(i){(i!==this.current||this.dirty)&&(this.gl.cullFace(i),this.current=i,this.dirty=!1)}}class Ph extends Ns{getDefault(){return this.gl.CCW}set(i){(i!==this.current||this.dirty)&&(this.gl.frontFace(i),this.current=i,this.dirty=!1)}}let yy=class extends Ns{getDefault(){return null}set(f){(f!==this.current||this.dirty)&&(this.gl.useProgram(f),this.current=f,this.dirty=!1)}};class w0 extends Ns{getDefault(){return this.gl.TEXTURE0}set(i){(i!==this.current||this.dirty)&&(this.gl.activeTexture(i),this.current=i,this.dirty=!1)}}class by extends Ns{getDefault(){const i=this.gl;return[0,0,i.drawingBufferWidth,i.drawingBufferHeight]}set(i){const u=this.current;(i[0]!==u[0]||i[1]!==u[1]||i[2]!==u[2]||i[3]!==u[3]||this.dirty)&&(this.gl.viewport(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class Lh extends Ns{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.bindFramebuffer(u.FRAMEBUFFER,i),this.current=i,this.dirty=!1}}class um extends Ns{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.bindRenderbuffer(u.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class cm extends Ns{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.bindTexture(u.TEXTURE_2D,i),this.current=i,this.dirty=!1}}class S0 extends Ns{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.bindBuffer(u.ARRAY_BUFFER,i),this.current=i,this.dirty=!1}}class dm extends Ns{getDefault(){return null}set(i){const u=this.gl;u.bindBuffer(u.ELEMENT_ARRAY_BUFFER,i),this.current=i,this.dirty=!1}}class Ff extends Ns{getDefault(){return null}set(i){this.gl&&(i!==this.current||this.dirty)&&(this.gl.bindVertexArray(i),this.current=i,this.dirty=!1)}}class xy extends Ns{getDefault(){return 4}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_ALIGNMENT,i),this.current=i,this.dirty=!1}}class wy extends Ns{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i),this.current=i,this.dirty=!1}}class Sy extends Ns{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_FLIP_Y_WEBGL,i),this.current=i,this.dirty=!1}}class jc extends Ns{constructor(i,u){super(i),this.context=i,this.parent=u}getDefault(){return null}}class Cy extends jc{setDirty(){this.dirty=!0}set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferTexture2D(u.FRAMEBUFFER,u.COLOR_ATTACHMENT0,u.TEXTURE_2D,i,0),this.current=i,this.dirty=!1}}class Ey extends jc{attachment(){return this.gl.DEPTH_ATTACHMENT}set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferRenderbuffer(u.FRAMEBUFFER,this.attachment(),u.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class Jx extends jc{attachment(){return this.gl.DEPTH_ATTACHMENT}set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferTexture2D(u.FRAMEBUFFER,this.attachment(),u.TEXTURE_2D,i,0),this.current=i,this.dirty=!1}}class Qx extends Ey{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}const C0=(f,i,u)=>({u_matrix:f,u_image0:0,u_skirt_height:i,u_ground_shadow_factor:u}),hm=(f,i,u,p,x,S,T,O,B,j,K,te,Q,oe,Ce,_e)=>({u_proj_matrix:Float32Array.from(f),u_globe_matrix:i,u_normalize_matrix:Float32Array.from(p),u_merc_matrix:u,u_zoom_transition:x,u_merc_center:S,u_image0:0,u_frustum_tl:T,u_frustum_tr:O,u_frustum_br:B,u_frustum_bl:j,u_globe_pos:K,u_globe_radius:te,u_viewport:Q,u_grid_matrix:_e?Float32Array.from(_e):new Float32Array(9),u_skirt_height:oe,u_far_z_cutoff:Ce});function fm(f,i){return f!=null&&i!=null&&!(!f.hasData()||!i.hasData())&&f.demTexture!=null&&i.demTexture!=null&&f.tileID.key!==i.tileID.key}const Gc=new class{constructor(){this.operations={}}newMorphing(f,i,u,p,x){if(f in this.operations){const S=this.operations[f];S.to.tileID.key!==u.tileID.key&&(S.queued=u)}else this.operations[f]={startTime:p,phase:0,duration:x,from:i,to:u,queued:null}}getMorphValuesForProxy(f){if(!(f in this.operations))return null;const i=this.operations[f];return{from:i.from,to:i.to,phase:i.phase}}update(f){for(const i in this.operations){const u=this.operations[i];for(u.phase=(f-u.startTime)/u.duration;u.phase>=1||!this._validOp(u);)if(!this._nextOp(u,f)){delete this.operations[i];break}}}_nextOp(f,i){return!!f.queued&&(f.from=f.to,f.to=f.queued,f.queued=null,f.phase=0,f.startTime=i,!0)}_validOp(f){return f.from.hasData()&&f.to.hasData()}},E0={0:null,1:"TERRAIN_VERTEX_MORPHING"};function T0(f,i,u){if(i===0)return 0;const p=i<1&&u===514?.25/i:1;return 6*Math.pow(1.5,22-f)*Math.max(i,1)*p}function ew(f,i){const u=1<<f.z;return!i&&(f.x===0||f.x===u-1)||f.y===0||f.y===u-1}const Bd=f=>({u_matrix:f});function Vd(f,i,u,p,x){if(x>0){const S=r.q.now(),T=(S-f.timeAdded)/x,O=i?(S-i.timeAdded)/x:-1,B=u.getSource(),j=p.coveringZoomLevel({tileSize:B.tileSize,roundZoom:B.roundZoom}),K=!i||Math.abs(i.tileID.overscaledZ-j)>Math.abs(f.tileID.overscaledZ-j),te=K&&f.refreshedUponExpiration?1:r.ay(K?T:1-O,0,1);return f.refreshedUponExpiration&&T>=1&&(f.refreshedUponExpiration=!1),i?{opacity:1,mix:1-te}:{opacity:te,mix:0}}return{opacity:1,mix:0}}class Ty extends ta{constructor(i){const u={type:"raster-dem",maxzoom:i.transform.maxZoom},p=new r.D(r.c$(),null),x=Ec("mock-dem",u,p,i.style);super("mock-dem",x,!1),x.setEventedParent(this),this._sourceLoaded=!0}_loadTile(i,u){i.state="loaded",u(null)}}class dl extends ta{constructor(i){const u=Ec("proxy",{type:"geojson",maxzoom:i.transform.maxZoom},new r.D(r.c$(),null),i.style);super("proxy",u,!1),u.setEventedParent(this),this.map=this.getSource().map=i,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(i,u,p){if(i.freezeTileCoverage)return;this.transform=i;const x=i.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce((S,T)=>{if(S[T.key]="",!this._tiles[T.key]){const O=new Fu(T,this._source.tileSize*T.overscaleFactor(),i.tileZoom,void 0,void 0,this._source.worldview);O.state="loaded",this._tiles[T.key]=O}return S},{});for(const S in this._tiles)S in x||(this.freeFBO(S),this._tiles[S].unloadVectorData(),delete this._tiles[S])}freeFBO(i){const u=this.proxyCachedFBO[i];if(u!==void 0){const p=Object.values(u);this.renderCachePool.push(...p),delete this.proxyCachedFBO[i]}}deallocRenderCache(){this.renderCache.forEach(i=>i.fb.destroy()),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class pm extends r.aM{constructor(i,u,p){super(i.overscaledZ,i.wrap,i.canonical.z,i.canonical.x,i.canonical.y),this.proxyTileKey=u,this.projMatrix=p}}class Bf extends r.dt{constructor(i,u){super(),this._debugParams={sortTilesHiZFirst:!0,disableRenderCache:!1},i.tp.registerParameter(this._debugParams,["Terrain"],"sortTilesHiZFirst",{},()=>{this._style.map.triggerRepaint()}),i.tp.registerParameter(this._debugParams,["Terrain"],"disableRenderCache",{},()=>{this._style.map.triggerRepaint()}),i.tp.registerButton(["Terrain"],"Invalidate Render Cache",()=>{this.invalidateRenderCache=!0,this._style.map.triggerRepaint()}),this.painter=i,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[p,x,S]=function(B){const j=new r.ba,K=new r.a_,te=131;j.reserve(17161),K.reserve(33800);const Q=r.aj/128,oe=r.aj+Q/2,Ce=oe+Q;for(let Ee=-64;Ee<Ce;Ee+=Q)for(let Me=-64;Me<Ce;Me+=Q){const ze=Me<0||Me>oe||Ee<0||Ee>oe?24575:0,qe=r.ay(Math.round(Me),0,r.aj),Je=r.ay(Math.round(Ee),0,r.aj);j.emplaceBack(qe+ze,Je)}const _e=(Ee,Me)=>{const ze=Me*te+Ee;K.emplaceBack(ze+1,ze,ze+te),K.emplaceBack(ze+te,ze+te+1,ze+1)};for(let Ee=1;Ee<129;Ee++)for(let Me=1;Me<129;Me++)_e(Me,Ee);return[0,129].forEach(Ee=>{for(let Me=0;Me<130;Me++)_e(Me,Ee),_e(Ee,Me)}),[j,K,32768]}(),T=i.context;this.gridBuffer=T.createVertexBuffer(p,r.bc.members),this.gridIndexBuffer=T.createIndexBuffer(x),this.gridSegments=r.bd.simpleSegment(0,0,p.length,x.length),this.gridNoSkirtSegments=r.bd.simpleSegment(0,0,p.length,S),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new dl(u.map),this.orthoMatrix=r.bz(),r.c5(this.orthoMatrix,this.painter.transform.projection.name==="globe"?.015:0,r.aj,0,r.aj,0,1);const O=T.gl;this._overlapStencilMode=new Vr({func:O.GEQUAL,mask:255},0,255,O.KEEP,O.KEEP,O.REPLACE),this._previousZoom=i.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=u,this._useVertexMorphing=!0,this._exaggeration=1,this._mockSourceCache=new Ty(u.map),this._pendingGroundEffectLayers=[]}set style(i){i.on("data",this._onStyleDataEvent.bind(this)),this._style=i,this._style.map.on("moveend",()=>{this._clearLineLayersFromRenderCache()})}update(i,u,p){if(i&&i.terrain){this._style!==i&&(this.style=i,this._evaluationZoom=void 0);const x=i.terrain.properties,S=i.terrain.drapeRenderMode===0,T=i.terrain.isZoomDependent();this._previousUpdateTimestamp=this.enabled?this._updateTimestamp:void 0,this._updateTimestamp=r.q.now();const O=i.terrain&&i.terrain.scope,B=x.get("source"),j=S?this._mockSourceCache:i.getSourceCache(B,O);if(!j)return void r.w(`Couldn't find terrain source "${B}".`);if(this.sourceCache=j,this._attenuationRange=i.terrain.getAttenuationRange(),this._exaggeration=T?this.calculateExaggeration(u):x.get("exaggeration"),!u.projection.requiresDraping&&T&&this._exaggeration===0)return void this._disable();this.enabled=!0;const K=()=>{this.sourceCache.used&&r.w(`Raster DEM source '${this.sourceCache.id}' is used both for terrain and as layer source.
This leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.`);const te=this.getScaledDemTileSize();this.sourceCache.update(u,te,!0),this.resetTileLookupCache(this.sourceCache.id)};this.sourceCache.usedForTerrain||(this.resetTileLookupCache(this.sourceCache.id),this.sourceCache.usedForTerrain=!0,K(),this._initializing=!0),K(),u.updateElevation(!0,p),this.resetTileLookupCache(this.proxySourceCache.id),this.proxySourceCache.update(u),this._emptyDEMTextureDirty=!0,this._previousZoom=u.zoom}else this._disable()}calculateExaggeration(i){if(this._attenuationRange&&i.zoom>=Math.ceil(this._attenuationRange[1]))return this._style.terrain.getExaggeration(i.zoom);const u=this._previousCameraAltitude,p=i.getFreeCameraOptions().position.z/i.pixelsPerMeter*i.worldSize;this._previousCameraAltitude=p;const x=u!=null?p-u:Number.MAX_VALUE;if(Math.abs(x)<2)return this._exaggeration;const S=i.zoom,T=this._style.terrain;if(!this._previousUpdateTimestamp)return T.getExaggeration(S);let O=S-this._previousZoom;const B=this._previousUpdateTimestamp;let j=S;this._evaluationZoom!=null&&(j=this._evaluationZoom,Math.abs(S-j)>.5&&(O=.5*(S-j+O)),O*x<0&&(j+=O)),this._evaluationZoom=j;const K=T.getExaggeration(j),te=K===T.getExaggeration(Math.max(0,j-.1));if(te&&Math.abs(K-this._exaggeration)<.01)return K;let Q=Math.min(.1,.00375*(this._updateTimestamp-B));return(te||K<.1||Math.abs(O)<1e-4)&&(Q=Math.min(.2,4*Q)),r.ai(this._exaggeration,K,Q)}resetTileLookupCache(i){this._findCoveringTileCache[i]={}}attenuationRange(){return this._attenuationRange}getDemUpscale(){return this.proxySourceCache.getSource().tileSize/128}getScaledDemTileSize(){return this.sourceCache.getSource().tileSize/128*this.proxySourceCache.getSource().tileSize}_onStyleDataEvent(i){i.coord&&i.dataType==="source"?this._clearRenderCacheForTile(i.sourceCacheId,i.coord):i.dataType==="style"&&(this.invalidateRenderCache=!0,this._evaluationZoom=void 0,this._previousUpdateTimestamp=void 0,this._previousCameraAltitude=void 0)}_disable(){if(this.enabled&&(this.enabled=!1,this._emptyDEMTextureDirty=!0,this._sharedDepthStencil=void 0,this._evaluationZoom=void 0,this._previousUpdateTimestamp=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(const i in this._style._mergedSourceCaches)this._style._mergedSourceCaches[i].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this.pool.forEach(i=>i.fb.destroy()),this.pool=[],this.framebufferCopyTexture&&this.framebufferCopyTexture.destroy()}_source(){return this.enabled?this.sourceCache:null}isUsingMockSource(){return this.sourceCache===this._mockSourceCache}exaggeration(){return this.enabled?this._exaggeration:0}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const i=2*this.proxySourceCache.getSource().tileSize;return[i,i]}set useVertexMorphing(i){this._useVertexMorphing=i}updateTileBinding(i){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const u=this.proxySourceCache,p=this.painter.transform;this._initializing&&(this._initializing=p._centerAltitude===0&&this.getAtPointOrZero(r.ac.fromLngLat(p.center),-1)===-1,this._emptyDEMTextureDirty=!this._initializing);const x=this.proxyCoords=u.getIds().map(B=>{const j=u.getTileByID(B).tileID;return j.projMatrix=p.calculateProjMatrix(j.toUnwrapped()),j});(function(B,j){const K=j.transform.pointCoordinate(j.transform.getCameraPoint()),te=new r.P(K.x,K.y);B.sort((Q,oe)=>{if(oe.overscaledZ-Q.overscaledZ)return oe.overscaledZ-Q.overscaledZ;const Ce=new r.P(Q.canonical.x+(1<<Q.canonical.z)*Q.wrap,Q.canonical.y),_e=new r.P(oe.canonical.x+(1<<oe.canonical.z)*oe.wrap,oe.canonical.y),Ee=te.mult(1<<Q.canonical.z);return Ee.x-=.5,Ee.y-=.5,Ee.distSqr(Ce)-Ee.distSqr(_e)})})(x,this.painter);const S=this.proxyToSource||{};this.proxyToSource={},x.forEach(B=>{this.proxyToSource[B.key]={}}),this.terrainTileForTile={};const T=this._style._mergedSourceCaches;for(const B in T){const j=T[B];if(!j.used||(j!==this.sourceCache&&this.resetTileLookupCache(j.id),this._setupProxiedCoordsForOrtho(j,i[B],S),j.usedForTerrain))continue;const K=i[B];j.getSource().reparseOverscaled&&this._assignTerrainTiles(K)}this.proxiedCoords[u.id]=x.map(B=>new pm(B,B.key,this.orthoMatrix)),this._assignTerrainTiles(x),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(S),this.renderingToTexture=!1;const O={};this._visibleDemTiles=[];for(const B of this.proxyCoords){const j=this.terrainTileForTile[B.key];if(!j)continue;const K=j.tileID.key;K in O||(this._visibleDemTiles.push(j),O[K]=K)}}_assignTerrainTiles(i){this._initializing||i.forEach(u=>{if(this.terrainTileForTile[u.key])return;const p=this._findTileCoveringTileID(u,this.sourceCache);p&&(this.terrainTileForTile[u.key]=p)})}_prepareDEMTextures(){const i=this.painter.context,u=i.gl;for(const p in this.terrainTileForTile){const x=this.terrainTileForTile[p],S=x.dem;!S||x.demTexture&&!x.needsDEMTextureUpload||(i.activeTexture.set(u.TEXTURE1),im(this.painter,x,S))}}_prepareDemTileUniforms(i,u,p,x){if(!u||u.demTexture==null)return!1;const S=i.tileID.canonical,T=Math.pow(2,u.tileID.canonical.z-S.z),O=x||"";return p[`u_dem_tl${O}`]=[S.x*T%1,S.y*T%1],p[`u_dem_scale${O}`]=T,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}_getLoadedAreaMinimum(){if(!this.enabled)return 0;let i=0;const u=this._visibleDemTiles.reduce((p,x)=>{if(!x.dem)return p;const S=x.dem.tree.minimums[0];return S>0&&i++,p+S},0);return i?u/i:0}_updateEmptyDEMTexture(){const i=this.painter.context,u=i.gl;i.activeTexture.set(u.TEXTURE2);const p=this._getLoadedAreaMinimum(),x=new r.du({width:1,height:1},new Float32Array([p]));this._emptyDEMTextureDirty=!1;let S=this._emptyDEMTexture;return S?S.update(x,{premultiply:!1}):S=this._emptyDEMTexture=new r.T(i,x,u.R32F,{premultiply:!1}),S}setupElevationDraw(i,u,p){const x=this.painter.context,S=x.gl,T={u_dem:2,u_dem_prev:4,u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_depth_range_unpack:[0,1],u_occluder_half_size:16,u_occlusion_depth_offset:-1e-4,u_exaggeration:0};T.u_exaggeration=this.exaggeration();let O=null,B=null,j=1;if(p&&p.morphing&&this._useVertexMorphing){const oe=p.morphing.srcDemTile,Ce=p.morphing.dstDemTile;j=p.morphing.phase,oe&&Ce&&(this._prepareDemTileUniforms(i,oe,T,"_prev")&&(B=oe),this._prepareDemTileUniforms(i,Ce,T)&&(O=Ce))}const K=oe=>oe&&oe.demTexture&&this.painter.linearFloatFilteringSupported()?S.LINEAR:S.NEAREST;let te=null;var Q;if(this.enabled?B&&O?(te=O.demTexture,x.activeTexture.set(S.TEXTURE4),B.demTexture.bind(K(B),S.CLAMP_TO_EDGE),T.u_dem_lerp=j):(O=this.terrainTileForTile[i.tileID.key],te=this._prepareDemTileUniforms(i,O,T)?O.demTexture:this.emptyDEMTexture):te=this.emptyDEMTexture,x.activeTexture.set(S.TEXTURE2),te&&(T.u_dem_size=(Q=te).size[0]===1?1:Q.size[0]-2,te.bind(K(O),S.CLAMP_TO_EDGE)),this.painter.setupDepthForOcclusion(p&&p.useDepthForOcclusion,u,T),p&&p.useMeterToDem&&O){const oe=(1<<O.tileID.canonical.z)*r.c6(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;T.u_meter_to_dem=oe}if(p&&p.labelPlaneMatrixInv&&(T.u_label_plane_matrix_inv=p.labelPlaneMatrixInv),u.setTerrainUniformValues(x,T),this.painter.transform.projection.name==="globe"){const oe=this.globeUniformValues(this.painter.transform,i.tileID.canonical,p&&p.useDenormalizedUpVectorScale);u.setGlobeUniformValues(x,oe)}}globeUniformValues(i,u,p){const x=i.projection;return{u_tile_tl_up:x.upVector(u,0,0),u_tile_tr_up:x.upVector(u,r.aj,0),u_tile_br_up:x.upVector(u,r.aj,r.aj),u_tile_bl_up:x.upVector(u,0,r.aj),u_tile_up_scale:p?r.dv(1):x.upVectorScale(u,i.center.lat,i.worldSize).metersToTile}}renderToBackBuffer(i){const u=this.painter,p=this.painter.context;i.length!==0&&(p.bindFramebuffer.set(null),p.viewport.set([0,0,u.width,u.height]),u.gpuTimingDeferredRenderStart(),this.renderingToTexture=!1,function(x,S,T,O,B){if(x.transform.projection.name==="globe")(function(j,K,te,Q,oe){const Ce=j.context,_e=Ce.gl;let Ee,Me;const ze=j.transform,qe=r.dl(j,Ce,ze),Je=(nn,sn)=>{if(Me===sn)return;const wn=[E0[sn],"PROJECTION_GLOBE_VIEW"];qe&&wn.push("CUSTOM_ANTIALIASING");const Pt=j.isTileAffectedByFog(nn);Ee=j.getOrCreateProgram("globeRaster",{defines:wn,overrideFog:Pt}),Me=sn},lt=j.colorModeForRenderPass(),ot=new Jn(_e.LEQUAL,Jn.ReadWrite,j.depthRangeFor3D);Gc.update(oe);const rt=r.dm(ze),Qe=[r.aD(ze.center.lng),r.aH(ze.center.lat)],ut=j.globeSharedBuffers,pt=[ze.width*r.q.devicePixelRatio,ze.height*r.q.devicePixelRatio],zt=Float32Array.from(ze.globeMatrix),Vt={useDenormalizedUpVectorScale:!0};{const nn=j.transform,sn=T0(nn.zoom,K.exaggeration(),K.sourceCache._source.tileSize);Me=-1;const wn=_e.TRIANGLES;for(const Pt of Q){const Kt=te.getTile(Pt),kt=Vr.disabled,cn=K.prevTerrainTileForTile[Pt.key],qt=K.terrainTileForTile[Pt.key];fm(cn,qt)&&Gc.newMorphing(Pt.key,cn,qt,oe,250),Ce.activeTexture.set(_e.TEXTURE0),Kt.texture&&Kt.texture.bind(_e.LINEAR,_e.CLAMP_TO_EDGE);const _n=Gc.getMorphValuesForProxy(Pt.key),zn=_n?1:0;_n&&r.L(Vt,{morphing:{srcDemTile:_n.from,dstDemTile:_n.to,phase:r.dk(_n.phase)}});const un=r.dn(Pt.canonical),On=r.dp(un.getCenter().lat),er=r.dq(Pt.canonical,un,On,nn.worldSize/nn._pixelsPerMercatorPixel),tr=r.bh(r.dr(Pt.canonical)),Zn=hm(nn.expandedFarZProjMatrix,zt,rt,tr,r.ah(nn.zoom),Qe,nn.frustumCorners.TL,nn.frustumCorners.TR,nn.frustumCorners.BR,nn.frustumCorners.BL,nn.globeCenterInViewSpace,nn.globeRadius,pt,sn,nn._farZ,er);if(Je(Pt,zn),Ee&&(K.setupElevationDraw(Kt,Ee,Vt),j.uploadCommonUniforms(Ce,Ee,Pt.toUnwrapped()),ut)){const[mr,yr,kr]=ut.getGridBuffers(On,sn!==0);Ee.draw(j,wn,ot,kt,lt,Pr.backCCW,Zn,"globe_raster",mr,yr,kr)}}}if(ut&&(j.renderDefaultNorthPole||j.renderDefaultSouthPole)){const nn=["GLOBE_POLES","PROJECTION_GLOBE_VIEW"];qe&&nn.push("CUSTOM_ANTIALIASING"),Ee=j.getOrCreateProgram("globeRaster",{defines:nn});for(const sn of Q){const{x:wn,y:Pt,z:Kt}=sn.canonical,kt=Pt===0,cn=Pt===(1<<Kt)-1,[qt,_n,zn,un]=ut.getPoleBuffers(Kt,!1);if(un&&(kt||cn)){const On=te.getTile(sn);Ce.activeTexture.set(_e.TEXTURE0),On.texture&&On.texture.bind(_e.LINEAR,_e.CLAMP_TO_EDGE);let er=r.ds(Kt,wn,ze);const tr=r.bh(r.dr(sn.canonical)),Zn=(mr,yr)=>mr.draw(j,_e.TRIANGLES,ot,Vr.disabled,lt,Pr.disabled,hm(ze.expandedFarZProjMatrix,er,er,tr,0,Qe,ze.frustumCorners.TL,ze.frustumCorners.TR,ze.frustumCorners.BR,ze.frustumCorners.BL,ze.globeCenterInViewSpace,ze.globeRadius,pt,0,ze._farZ),"globe_pole_raster",yr,zn,un);K.setupElevationDraw(On,Ee,Vt),j.uploadCommonUniforms(Ce,Ee,sn.toUnwrapped()),kt&&j.renderDefaultNorthPole&&Zn(Ee,qt),cn&&j.renderDefaultSouthPole&&(er=r.cE(r.bz(),er,[1,-1,1]),Zn(Ee,_n))}}}})(x,S,T,O,B);else{const j=x.context,K=j.gl;let te,Q;const oe=x.shadowRenderer,Ce=Tl(x,x.longestCutoffRange),_e=lt=>{if(Q===lt)return;const ot=[];ot.push(E0[lt]),Ce.shouldRenderCutoff&&ot.push("RENDER_CUTOFF"),oe&&(ot.push("RENDER_SHADOWS","DEPTH_TEXTURE"),oe.useNormalOffset&&ot.push("NORMAL_OFFSET")),te=x.getOrCreateProgram("terrainRaster",{defines:ot}),Q=lt},Ee=x.colorModeForRenderPass(),Me=new Jn(K.LEQUAL,Jn.ReadWrite,x.depthRangeFor3D);Gc.update(B);const ze=x.transform,qe=T0(ze.zoom,S.exaggeration(),S.sourceCache._source.tileSize);let Je=[0,0,0];if(oe){const lt=x.style.directionalLight,ot=x.style.ambientLight;lt&&ot&&(Je=Wu(x.style,lt,ot))}{Q=-1;const lt=K.TRIANGLES,[ot,rt]=[S.gridIndexBuffer,S.gridSegments];for(const Qe of O){const ut=T.getTile(Qe),pt=Vr.disabled,zt=S.prevTerrainTileForTile[Qe.key],Vt=S.terrainTileForTile[Qe.key];fm(zt,Vt)&&Gc.newMorphing(Qe.key,zt,Vt,B,250),j.activeTexture.set(K.TEXTURE0),ut.texture&&ut.texture.bind(K.LINEAR,K.CLAMP_TO_EDGE);const nn=Gc.getMorphValuesForProxy(Qe.key),sn=nn?1:0;let wn;nn&&(wn={morphing:{srcDemTile:nn.from,dstDemTile:nn.to,phase:r.dk(nn.phase)}});const Pt=C0(Qe.projMatrix,ew(Qe.canonical,ze.renderWorldCopies)?qe/10:qe,Je);if(_e(sn),!te)continue;S.setupElevationDraw(ut,te,wn);const Kt=Qe.toUnwrapped();oe&&oe.setupShadows(Kt,te),x.uploadCommonUniforms(j,te,Kt,null,Ce),te.draw(x,lt,Me,pt,Ee,Pr.backCCW,Pt,"terrain_raster",S.gridBuffer,ot,rt)}}}}(u,this,this.proxySourceCache,i,this._updateTimestamp),this.renderingToTexture=!0,u.gpuTimingDeferredRenderEnd(),i.splice(0,i.length))}renderBatch(i){if(this._drapedRenderBatches.length===0)return i+1;this.renderingToTexture=!0;const u=this.painter,p=this.painter.context,x=this.proxySourceCache,S=this.proxiedCoords[x.id],T=this._drapedRenderBatches.shift(),O=u.style.order,B=[];let j=0;for(const K of S){const te=x.getTileByID(K.proxyTileKey),Q=x.proxyCachedFBO[K.key]?x.proxyCachedFBO[K.key][i]:void 0,oe=Q!==void 0?x.renderCache[Q]:this.pool[j++],Ce=Q!==void 0;if(te.texture=oe.tex,Ce&&!oe.dirty){B.push(te.tileID);continue}let _e;p.bindFramebuffer.set(oe.fb.framebuffer),this.renderedToTile=!1,oe.dirty&&(p.clear({color:r.am.transparent,stencil:0}),oe.dirty=!1);for(let Ee=T.start;Ee<=T.end;++Ee){const Me=u.style._mergedLayers[O[Ee]];if(Me.isHidden(u.transform.zoom))continue;const ze=u.style.getLayerSourceCache(Me),qe=ze?this.proxyToSource[K.key][ze.id]:[K];if(!qe)continue;const Je=qe;p.viewport.set([0,0,oe.fb.width,oe.fb.height]),_e!==(ze?ze.id:null)&&(this._setupStencil(oe,qe,Me,ze),_e=ze?ze.id:null),u.renderLayer(u,ze,Me,Je)}if(this._drapedRenderBatches.length===0)for(const Ee of this._pendingGroundEffectLayers){const Me=u.style._mergedLayers[O[Ee]];if(Me.isHidden(u.transform.zoom))continue;const ze=u.style.getLayerSourceCache(Me),qe=ze?this.proxyToSource[K.key][ze.id]:[K];if(!qe)continue;const Je=qe;p.viewport.set([0,0,oe.fb.width,oe.fb.height]),_e!==(ze?ze.id:null)&&(this._setupStencil(oe,qe,Me,ze),_e=ze?ze.id:null),u.renderLayer(u,ze,Me,Je)}this.renderedToTile?(oe.dirty=!0,B.push(te.tileID)):Ce||--j,j===5&&(j=0,this.renderToBackBuffer(B))}return this.renderToBackBuffer(B),this.renderingToTexture=!1,p.bindFramebuffer.set(null),p.viewport.set([0,0,u.width,u.height]),T.end+1}postRender(){}isLayerOrderingCorrect(i){const u=i.order.length;let p=-1,x=u;for(let S=0;S<u;++S)this._style.isLayerDraped(i._mergedLayers[i.order[S]])?p=Math.max(p,S):x=Math.min(x,S);return x>p}getMinElevationBelowMSL(){let i=0;return this._visibleDemTiles.filter(u=>u.dem).forEach(u=>{i=Math.min(i,u.dem.tree.minimums[0])}),i===0?i:(i-30)*this._exaggeration}raycast(i,u,p){if(!this._visibleDemTiles)return null;const x=this._visibleDemTiles.filter(S=>S.dem).map(S=>{const T=S.tileID,O=1<<T.overscaledZ,{x:B,y:j}=T.canonical,K=B/O,te=(B+1)/O,Q=j/O,oe=(j+1)/O;return{minx:K,miny:Q,maxx:te,maxy:oe,t:S.dem.tree.raycastRoot(K,Q,te,oe,i,u,p),tile:S}});x.sort((S,T)=>(S.t!==null?S.t:Number.MAX_VALUE)-(T.t!==null?T.t:Number.MAX_VALUE));for(const S of x){if(S.t==null)return null;const T=S.tile.dem.tree.raycast(S.minx,S.miny,S.maxx,S.maxy,i,u,p);if(T!=null)return T}return null}_createFBO(){const i=this.painter.context,u=i.gl,p=this.drapeBufferSize;i.activeTexture.set(u.TEXTURE0);const x=new r.T(i,{width:p[0],height:p[1],data:null},u.RGBA8);x.bind(u.LINEAR,u.CLAMP_TO_EDGE);const S=i.createFramebuffer(p[0],p[1],!0,null);return S.colorAttachment.set(x.texture),S.depthAttachment=new Qx(i,S.framebuffer),this._sharedDepthStencil===void 0?(this._sharedDepthStencil=i.createRenderbuffer(i.gl.DEPTH_STENCIL,p[0],p[1]),this._stencilRef=0,S.depthAttachment.set(this._sharedDepthStencil),i.clear({stencil:0})):S.depthAttachment.set(this._sharedDepthStencil),i.extTextureFilterAnisotropic&&u.texParameterf(u.TEXTURE_2D,i.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,i.extTextureFilterAnisotropicMax),{fb:S,tex:x,dirty:!1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){if(this._debugParams.disableRenderCache||this._style.hasLightTransitions())return!0;for(const i in this._style._mergedSourceCaches)if(this._style._mergedSourceCaches[i].hasTransition())return!0;return this._style.order.some(i=>{const u=this._style._mergedLayers[i],p=u.isHidden(this.painter.transform.zoom);return u.type==="hillshade"||u.type==="custom"?!p&&u.shouldRedrape():!p&&u.hasTransition()})}_clearLineLayersFromRenderCache(){let i=!1;for(const p of this._style.getSources())if(p instanceof zu){i=!0;break}if(!i)return;const u={};for(let p=0;p<this._style.order.length;++p){const x=this._style._mergedLayers[this._style.order[p]],S=this._style.getLayerSourceCache(x);if(S&&!u[S.id]&&!x.isHidden(this.painter.transform.zoom)&&x.type==="line"&&x.widthExpression()instanceof r.ab){u[S.id]=!0;for(const T of this.proxyCoords){const O=this.proxyToSource[T.key][S.id];if(O)for(const B of O)this._clearRenderCacheForTile(S.id,B)}}}}_clearRasterLayersFromRenderCache(){let i=!1;for(const p in this._style._mergedSourceCaches)if(this._style._mergedSourceCaches[p]._source instanceof ko){i=!0;break}if(!i)return;const u={};for(let p=0;p<this._style.order.length;++p){const x=this._style._mergedLayers[this._style.order[p]],S=this._style.getLayerSourceCache(x);if(!S||u[S.id]||x.isHidden(this.painter.transform.zoom)||x.type!=="raster")continue;const T=x.paint.get("raster-fade-duration");for(const O of this.proxyCoords){const B=this.proxyToSource[O.key][S.id];if(B)for(const j of B){const K=Vd(S.getTile(j),S.findLoadedParent(j,0),S,this.painter.transform,T);(K.opacity!==1||K.mix!==0)&&this._clearRenderCacheForTile(S.id,j)}}}}_setupDrapedRenderBatches(){this._style.updateDrapeFirstLayers();const i=this._style.order,u=i.length;if(u===0)return;const p=[];this._pendingGroundEffectLayers=[];let x,S=0,T=this._style._mergedLayers[i[S]];for(;!this._style.isLayerDraped(T)&&T.isHidden(this.painter.transform.zoom)&&++S<u;)T=this._style._mergedLayers[i[S]];for(;S<u;++S){const O=this._style._mergedLayers[i[S]];O.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(O)?x===void 0&&(x=S):(O.type==="fill-extrusion"&&this._pendingGroundEffectLayers.push(S),x!==void 0&&(p.push({start:x,end:S-1}),x=void 0)))}if(x!==void 0&&p.push({start:x,end:S-1}),p.length!==0){const O=p[p.length-1];this._pendingGroundEffectLayers.every(B=>B>O.end)||r.w("fill-extrusion with flood lighting and/or ground ambient occlusion should be moved to be on top of all draped layers.")}this._drapedRenderBatches=p}_setupRenderCache(i){const u=this.proxySourceCache;if(this._shouldDisableRenderCache()||this.invalidateRenderCache){if(this.invalidateRenderCache=!1,u.renderCache.length>u.renderCachePool.length){const T=Object.values(u.proxyCachedFBO);u.proxyCachedFBO={};for(let O=0;O<T.length;++O){const B=Object.values(T[O]);u.renderCachePool.push(...B)}}return}this._clearRasterLayersFromRenderCache();const p=this.proxyCoords,x=this._tilesDirty;for(let T=p.length-1;T>=0;T--){const O=p[T];if(u.getTileByID(O.key),u.proxyCachedFBO[O.key]!==void 0){const B=i[O.key],j=this.proxyToSource[O.key];let K=0;for(const te in j){const Q=j[te],oe=B[te];if(!oe||oe.length!==Q.length||Q.some((Ce,_e)=>Ce!==oe[_e]||x[te]&&x[te].hasOwnProperty(Ce.key))){K=-1;break}++K}for(const te in u.proxyCachedFBO[O.key])u.renderCache[u.proxyCachedFBO[O.key][te]].dirty=K<0||K!==Object.values(B).length}}const S=[...this._drapedRenderBatches];S.sort((T,O)=>O.end-O.start-(T.end-T.start));for(const T of S)for(const O of p){if(u.proxyCachedFBO[O.key])continue;let B=u.renderCachePool.pop();B===void 0&&u.renderCache.length<50&&(B=u.renderCache.length,u.renderCache.push(this._createFBO())),B!==void 0&&(u.proxyCachedFBO[O.key]={},u.proxyCachedFBO[O.key][T.start]=B,u.renderCache[B].dirty=!0)}this._tilesDirty={}}_setupStencil(i,u,p,x){if(!x||!this._sourceTilesOverlap[x.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const S=this.painter.context,T=S.gl;if(u.length<=1)return void(this._overlapStencilType=!1);let O;if(p.isTileClipped())O=u.length,this._overlapStencilMode.test={func:T.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(u[0].overscaledZ>u[u.length-1].overscaledZ))return void(this._overlapStencilType=!1);O=1,this._overlapStencilMode.test={func:T.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+O>255&&(S.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=O,this._overlapStencilMode.ref=this._stencilRef,p.isTileClipped()&&this._renderTileClippingMasks(u,this._overlapStencilMode.ref)}clipOrMaskOverlapStencilType(){return this._overlapStencilType==="Clip"||this._overlapStencilType==="Mask"}stencilModeForRTTOverlap(i){return this.renderingToTexture&&this._overlapStencilType?(this._overlapStencilType==="Clip"&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[i.key]),this._overlapStencilMode):Vr.disabled}_renderTileClippingMasks(i,u){const p=this.painter,x=this.painter.context,S=x.gl;p._tileClippingMaskIDs={},x.setColorMode(ai.disabled),x.setDepthMode(Jn.disabled);const T=p.getOrCreateProgram("clippingMask");for(const O of i){const B=p._tileClippingMaskIDs[O.key]=--u;T.draw(p,S.TRIANGLES,Jn.disabled,new Vr({func:S.ALWAYS,mask:0},B,255,S.KEEP,S.KEEP,S.REPLACE),ai.disabled,Pr.disabled,Bd(O.projMatrix),"$clipping",p.tileExtentBuffer,p.quadTriangleIndexBuffer,p.tileExtentSegments)}}pointCoordinate(i){const u=this.painter.transform;if(i.x<0||i.x>u.width||i.y<0||i.y>u.height)return null;const p=[i.x,i.y,1,1];r.aA(p,p,u.pixelMatrixInverse),r.cw(p,p,1/p[3]),p[0]/=u.worldSize,p[1]/=u.worldSize;const x=u._camera.position,S=r.c6(1,u.center.lat),T=[x[0],x[1],x[2]/S,0],O=r.cX([],p.slice(0,3),T);r.au(O,O);const B=this.raycast(T,O,this._exaggeration);return B!==null&&B?(r.bE(T,T,O,B),T[3]=T[2],T[2]*=S,T):null}_setupProxiedCoordsForOrtho(i,u,p){if(i.getSource()instanceof r.aP)return this._setupProxiedCoordsForImageSource(i,u,p);this._findCoveringTileCache[i.id]=this._findCoveringTileCache[i.id]||{};const x=this.proxiedCoords[i.id]=[],S=this.proxyCoords;for(let B=0;B<S.length;B++){const j=S[B],K=this._findTileCoveringTileID(j,i);if(K){const te=this._createProxiedId(j,K,p[j.key]&&p[j.key][i.id]);x.push(te),this.proxyToSource[j.key][i.id]=[te]}}let T=!1;const O=new Set;for(let B=0;B<u.length;B++){const j=i.getTile(u[B]);if(!j||!j.hasData())continue;const K=this._findTileCoveringTileID(j.tileID,this.proxySourceCache);if(K&&K.tileID.canonical.z!==j.tileID.canonical.z){const te=this.proxyToSource[K.tileID.key][i.id],Q=this._createProxiedId(K.tileID,j,p[K.tileID.key]&&p[K.tileID.key][i.id]);te?te.splice(te.length-1,0,Q):this.proxyToSource[K.tileID.key][i.id]=[Q];const oe=this.proxyToSource[K.tileID.key][i.id];O.has(oe)||O.add(oe),x.push(Q),T=!0}}if(this._sourceTilesOverlap[i.id]=T,T&&this._debugParams.sortTilesHiZFirst)for(const B of O)B.sort((j,K)=>K.overscaledZ-j.overscaledZ)}_setupProxiedCoordsForImageSource(i,u,p){if(!i.getSource().loaded())return;const x=this.proxiedCoords[i.id]=[],S=this.proxyCoords,T=i.getSource(),O=T.tileID;if(!O)return;const B=new r.P(O.x,O.y)._div(1<<O.z),j=T.coordinates.map(r.ac.fromLngLat).reduce((te,Q)=>(te.min.x=Math.min(te.min.x,Q.x-B.x),te.min.y=Math.min(te.min.y,Q.y-B.y),te.max.x=Math.max(te.max.x,Q.x-B.x),te.max.y=Math.max(te.max.y,Q.y-B.y),te),{min:new r.P(Number.MAX_VALUE,Number.MAX_VALUE),max:new r.P(-Number.MAX_VALUE,-Number.MAX_VALUE)}),K=(te,Q)=>{const oe=te.wrap+te.canonical.x/(1<<te.canonical.z),Ce=te.canonical.y/(1<<te.canonical.z),_e=r.aj/(1<<te.canonical.z),Ee=Q.wrap+Q.canonical.x/(1<<Q.canonical.z),Me=Q.canonical.y/(1<<Q.canonical.z);return oe+_e<Ee+j.min.x||oe>Ee+j.max.x||Ce+_e<Me+j.min.y||Ce>Me+j.max.y};for(let te=0;te<S.length;te++){const Q=S[te];for(let oe=0;oe<u.length;oe++){const Ce=i.getTile(u[oe]);if(!Ce||!Ce.hasData()||K(Q,Ce.tileID))continue;const _e=this._createProxiedId(Q,Ce,p[Q.key]&&p[Q.key][i.id]),Ee=this.proxyToSource[Q.key][i.id];Ee?Ee.push(_e):this.proxyToSource[Q.key][i.id]=[_e],x.push(_e)}}}_createProxiedId(i,u,p){let x=this.orthoMatrix;if(p){const S=p.find(T=>T.key===u.tileID.key);if(S)return S}if(u.tileID.key!==i.key){const S=i.canonical.z-u.tileID.canonical.z;let T,O,B;x=r.bz();const j=u.tileID.wrap-i.wrap<<i.overscaledZ;S>0?(T=r.aj>>S,O=T*((u.tileID.canonical.x<<S)-i.canonical.x+j),B=T*((u.tileID.canonical.y<<S)-i.canonical.y)):(T=r.aj<<-S,O=r.aj*(u.tileID.canonical.x-(i.canonical.x+j<<-S)),B=r.aj*(u.tileID.canonical.y-(i.canonical.y<<-S))),r.c5(x,0,T,0,T,0,1),r.bo(x,x,[O,B,0])}return new pm(u.tileID,i.key,x)}_findTileCoveringTileID(i,u){let p=u.getTile(i);if(p&&p.hasData())return p;const x=this._findCoveringTileCache[u.id],S=x[i.key];if(p=S?u.getTileByID(S):null,p&&p.hasData()||S===null)return p;let T=p?p.tileID:i,O=T.overscaledZ;const B=u.getSource().minzoom,j=[];if(!S){const te=u.getSource().maxzoom;if(i.canonical.z>=te){const Q=i.canonical.z-te;u.getSource().reparseOverscaled?(O=Math.max(i.canonical.z+2,u.transform.tileZoom),T=new r.aM(O,i.wrap,te,i.canonical.x>>Q,i.canonical.y>>Q)):Q!==0&&(O=te,T=new r.aM(O,i.wrap,te,i.canonical.x>>Q,i.canonical.y>>Q))}T.key!==i.key&&(j.push(T.key),p=u.getTile(T))}const K=te=>{j.forEach(Q=>{x[Q]=te}),j.length=0};for(O-=1;O>=B&&(!p||!p.hasData());O--){p&&K(p.tileID.key);const te=T.calculateScaledKey(O);if(p=u.getTileByID(te),p&&p.hasData())break;const Q=x[te];if(Q===null)break;Q===void 0?j.push(te):p=u.getTileByID(Q)}return K(p?p.tileID.key:null),p&&p.hasData()?p:null}findDEMTileFor(i){return this.enabled?this._findTileCoveringTileID(i,this.sourceCache):null}prepareDrawTile(){this.renderedToTile=!0}_clearRenderCacheForTile(i,u){let p=this._tilesDirty[i];p||(p=this._tilesDirty[i]={}),p[u.key]=!0}}function mm(f,i,u){const p=function(O,B,j){const K=r.bG(B,O),te=r.bG(j,[.2126,.7152,.0722]),Q=(Ce,_e,Ee)=>(1-Ee)*Ce+Ee*_e,oe=Q(1-.3*Math.min(te,1),1,Math.min(K+1,1));return Q(.92,1,Math.asin(r.ay(B[2],-1,1))/Math.PI+.5)*oe}(f,[0,0,1],i),x=[0,0,0];r.bY(x,u.slice(0,3),p);const S=[0,0,0];r.bY(S,i.slice(0,3),f[2]);const T=[0,0,0];return r.cV(T,x,S),r.cY(T)}const I0=["fill","fillOutline","fillPattern","line","linePattern","background","backgroundPattern","hillshade","raster"],k0=["stars","rainParticle","snowParticle","fillExtrusion","fillExtrusionGroundEffect","elevatedStructures","model","symbol"];class gm{static cacheKey(i,u,p,x){let S=`${u}${x?x.cacheKey:""}`;for(const T of p)i.usedDefines.includes(T)&&(S+=`/${T}`);return S}constructor(i,u,p,x,S,T){const O=i.gl;this.program=O.createProgram(),this.configuration=x,this.name=u,this.fixedDefines=[...T];const B=x?x.getBinderAttributes():[],j=(p.staticAttributes||[]).concat(B);let K=x?x.defines():[];K=K.concat(T.map(Ee=>`#define ${Ee}`));const te=`#version 300 es
`;let Q=te+K.concat("precision mediump float;",cl,Uc.fragmentSource).join(`
`);for(const Ee of p.fragmentIncludes)Q+=`
${Ku[Ee]}`;Q+=`
${p.fragmentSource}`;let oe=te+K.concat("precision highp float;",cl,Uc.vertexSource).join(`
`);for(const Ee of p.vertexIncludes)oe+=`
${Ku[Ee]}`;this.forceManualRenderingForInstanceIDShaders=i.forceManualRenderingForInstanceIDShaders&&p.vertexSource.indexOf("gl_InstanceID")!==-1,this.forceManualRenderingForInstanceIDShaders&&(oe+=`
uniform int u_instanceID;
`),oe+=`
${p.vertexSource}`,this.forceManualRenderingForInstanceIDShaders&&(oe=oe.replaceAll("gl_InstanceID","u_instanceID"));const Ce=O.createShader(O.FRAGMENT_SHADER);if(O.isContextLost())return void(this.failedToCreate=!0);O.shaderSource(Ce,Q),O.compileShader(Ce),O.attachShader(this.program,Ce);const _e=O.createShader(O.VERTEX_SHADER);if(O.isContextLost())this.failedToCreate=!0;else{O.shaderSource(_e,oe),O.compileShader(_e),O.attachShader(this.program,_e),this.attributes={},this.numAttributes=j.length;for(let Ee=0;Ee<this.numAttributes;Ee++)if(j[Ee]){const Me=j[Ee].startsWith("a_")?j[Ee]:`a_${j[Ee]}`;O.bindAttribLocation(this.program,Ee,Me),this.attributes[Me]=Ee}O.linkProgram(this.program),O.deleteShader(_e),O.deleteShader(Ce),this.fixedUniforms=S(i),this.binderUniforms=x?x.getUniforms(i):[],this.forceManualRenderingForInstanceIDShaders&&(this.instancingUniforms=(Ee=>({u_instanceID:new r.c8(Ee)}))(i)),(T.includes("TERRAIN")||u.indexOf("symbol")!==-1||u.indexOf("circle")!==-1)&&(this.terrainUniforms=(Ee=>({u_dem:new r.c8(Ee),u_dem_prev:new r.c8(Ee),u_dem_tl:new r.cb(Ee),u_dem_scale:new r.ca(Ee),u_dem_tl_prev:new r.cb(Ee),u_dem_scale_prev:new r.ca(Ee),u_dem_size:new r.ca(Ee),u_dem_lerp:new r.ca(Ee),u_exaggeration:new r.ca(Ee),u_depth:new r.c8(Ee),u_depth_size_inv:new r.cb(Ee),u_depth_range_unpack:new r.cb(Ee),u_occluder_half_size:new r.ca(Ee),u_occlusion_depth_offset:new r.ca(Ee),u_meter_to_dem:new r.ca(Ee),u_label_plane_matrix_inv:new r.cc(Ee)}))(i)),T.includes("GLOBE")&&(this.globeUniforms=(Ee=>({u_tile_tl_up:new r.c9(Ee),u_tile_tr_up:new r.c9(Ee),u_tile_br_up:new r.c9(Ee),u_tile_bl_up:new r.c9(Ee),u_tile_up_scale:new r.ca(Ee)}))(i)),T.includes("FOG")&&(this.fogUniforms=(Ee=>({u_fog_matrix:new r.cc(Ee),u_fog_range:new r.cb(Ee),u_fog_color:new r.cQ(Ee),u_fog_horizon_blend:new r.ca(Ee),u_fog_vertical_limit:new r.cb(Ee),u_fog_temporal_offset:new r.ca(Ee),u_frustum_tl:new r.c9(Ee),u_frustum_tr:new r.c9(Ee),u_frustum_br:new r.c9(Ee),u_frustum_bl:new r.c9(Ee),u_globe_pos:new r.c9(Ee),u_globe_radius:new r.ca(Ee),u_globe_transition:new r.ca(Ee),u_is_globe:new r.c8(Ee),u_viewport:new r.cb(Ee)}))(i)),T.includes("RENDER_CUTOFF")&&(this.cutoffUniforms=(Ee=>({u_cutoff_params:new r.cQ(Ee)}))(i)),T.includes("LIGHTING_3D_MODE")&&(this.lightsUniforms=(Ee=>({u_lighting_ambient_color:new r.c9(Ee),u_lighting_directional_dir:new r.c9(Ee),u_lighting_directional_color:new r.c9(Ee),u_ground_radiance:new r.c9(Ee)}))(i)),T.includes("RENDER_SHADOWS")&&(this.shadowUniforms=(Ee=>({u_light_matrix_0:new r.cc(Ee),u_light_matrix_1:new r.cc(Ee),u_fade_range:new r.cb(Ee),u_shadow_normal_offset:new r.c9(Ee),u_shadow_intensity:new r.ca(Ee),u_shadow_texel_size:new r.ca(Ee),u_shadow_map_resolution:new r.ca(Ee),u_shadow_direction:new r.c9(Ee),u_shadow_bias:new r.c9(Ee),u_shadowmap_0:new r.c8(Ee),u_shadowmap_1:new r.c8(Ee)}))(i))}}setTerrainUniformValues(i,u){if(!this.terrainUniforms)return;const p=this.terrainUniforms;if(!this.failedToCreate){i.program.set(this.program);for(const x in u)p[x]&&p[x].set(this.program,x,u[x])}}setGlobeUniformValues(i,u){if(!this.globeUniforms)return;const p=this.globeUniforms;if(!this.failedToCreate){i.program.set(this.program);for(const x in u)p[x]&&p[x].set(this.program,x,u[x])}}setFogUniformValues(i,u){if(!this.fogUniforms)return;const p=this.fogUniforms;if(!this.failedToCreate){i.program.set(this.program);for(const x in u)p[x].set(this.program,x,u[x])}}setCutoffUniformValues(i,u){if(!this.cutoffUniforms)return;const p=this.cutoffUniforms;if(!this.failedToCreate){i.program.set(this.program);for(const x in u)p[x].set(this.program,x,u[x])}}setLightsUniformValues(i,u){if(!this.lightsUniforms)return;const p=this.lightsUniforms;if(!this.failedToCreate){i.program.set(this.program);for(const x in u)p[x].set(this.program,x,u[x])}}setShadowUniformValues(i,u){if(this.failedToCreate||!this.shadowUniforms)return;const p=this.shadowUniforms;i.program.set(this.program);for(const x in u)p[x].set(this.program,x,u[x])}_drawDebugWireframe(i,u,p,x,S,T,O,B,j,K){const te=i.options.wireframe;if(te.terrain===!1&&te.layers2D===!1&&te.layers3D===!1)return;const Q=i.context;if(!(!(!te.terrain||this.name!=="terrainRaster"&&this.name!=="globeRaster")||!(!te.layers2D||i._terrain&&i._terrain.renderingToTexture||!I0.includes(this.name))||!(!te.layers3D||!k0.includes(this.name))))return;const oe=Q.gl,Ce=i.wireframeDebugCache.getLinesFromTrianglesBuffer(i.frameCounter,S,Q);if(!Ce)return;const _e=[...this.fixedDefines];_e.push("DEBUG_WIREFRAME");const Ee=i.getOrCreateProgram(this.name,{config:this.configuration,defines:_e});Q.program.set(Ee.program);const Me=(Je,lt,ot)=>{if(lt[Je]&&ot[Je])for(const rt in lt[Je])ot[Je][rt]&&ot[Je][rt].set(ot.program,rt,lt[Je][rt].current)};j&&j.setUniforms(Ee.program,Q,Ee.binderUniforms,O,{zoom:B}),Me("fixedUniforms",this,Ee),Me("terrainUniforms",this,Ee),Me("globeUniforms",this,Ee),Me("fogUniforms",this,Ee),Me("lightsUniforms",this,Ee),Me("shadowUniforms",this,Ee),Ce.bind(),Q.setColorMode(new ai([oe.ONE,oe.ONE_MINUS_SRC_ALPHA,oe.ZERO,oe.ONE],r.am.transparent,[!0,!0,!0,!1])),Q.setDepthMode(new Jn(u.func===oe.LESS?oe.LEQUAL:u.func,Jn.ReadOnly,u.range)),Q.setStencilMode(Vr.disabled);const ze=3*T.primitiveLength*2,qe=3*T.primitiveOffset*2*2;if(this.forceManualRenderingForInstanceIDShaders){const Je=K||1;for(let lt=0;lt<Je;++lt)Ee.instancingUniforms.u_instanceID.set(this.program,"u_instanceID",lt),oe.drawElements(oe.LINES,ze,oe.UNSIGNED_SHORT,qe)}else K&&K>1?oe.drawElementsInstanced(oe.LINES,ze,oe.UNSIGNED_SHORT,qe,K):oe.drawElements(oe.LINES,ze,oe.UNSIGNED_SHORT,qe);S.bind(),Q.program.set(this.program),Q.setDepthMode(u),Q.setStencilMode(p),Q.setColorMode(x)}checkUniforms(i,u,p){if(this.fixedDefines.includes(u)){for(const x of Object.keys(p))if(!p[x].initialized)throw new Error(`Program '${this.name}', from draw '${i}': uniform ${x} not set but required by ${u} being defined`)}}draw(i,u,p,x,S,T,O,B,j,K,te,Q,oe,Ce,_e,Ee){const Me=i.context,ze=Me.gl;if(this.failedToCreate)return;Me.program.set(this.program),Me.setDepthMode(p),Me.setStencilMode(x),Me.setColorMode(S),Me.setCullFace(T);for(const lt of Object.keys(this.fixedUniforms))this.fixedUniforms[lt].set(this.program,lt,O[lt]);Ce&&Ce.setUniforms(this.program,Me,this.binderUniforms,Q,{zoom:oe});const qe={[ze.POINTS]:1,[ze.LINES]:2,[ze.TRIANGLES]:3,[ze.LINE_STRIP]:1}[u];this.checkUniforms(B,"RENDER_SHADOWS",this.shadowUniforms);const Je=Ee&&Ee>0?1:void 0;for(const lt of te.get()){const ot=lt.vaos||(lt.vaos={});if((ot[B]||(ot[B]=new gu)).bind(Me,this,j,Ce?Ce.getPaintVertexBuffers():[],K,lt.vertexOffset,_e||[],Je),this.forceManualRenderingForInstanceIDShaders){const rt=Ee||1;for(let Qe=0;Qe<rt;++Qe)this.instancingUniforms.u_instanceID.set(this.program,"u_instanceID",Qe),K?ze.drawElements(u,lt.primitiveLength*qe,ze.UNSIGNED_SHORT,lt.primitiveOffset*qe*2):ze.drawArrays(u,lt.vertexOffset,lt.vertexLength)}else Ee&&Ee>1?ze.drawElementsInstanced(u,lt.primitiveLength*qe,ze.UNSIGNED_SHORT,lt.primitiveOffset*qe*2,Ee):K?ze.drawElements(u,lt.primitiveLength*qe,ze.UNSIGNED_SHORT,lt.primitiveOffset*qe*2):ze.drawArrays(u,lt.vertexOffset,lt.vertexLength);u===ze.TRIANGLES&&K&&this._drawDebugWireframe(i,p,x,S,K,lt,Q,oe,Ce,Ee)}}}function Vf(f,i,u=0){const p=Math.pow(2,i.tileID.overscaledZ),x=i.tileSize*Math.pow(2,f.transform.tileZoom)/p,S=x*(i.tileID.canonical.x+i.tileID.wrap*p),T=x*i.tileID.canonical.y;return{u_image:0,u_texsize:i.imageAtlasTexture?i.imageAtlasTexture.size:[0,0],u_tile_units_to_pixels:1/r.aw(i,1,f.transform.tileZoom),u_pixel_coord_upper:[S>>16,T>>16],u_pixel_coord_lower:[65535&S,65535&T],u_pattern_transition:u}}const Oh={terrain:0,flat:1},M0=r.bz(),$f=(f,i,u,p,x,S,T,O,B,j,K,te,Q,oe,Ce,_e,Ee,Me)=>{const ze=i.style.light,qe=ze.properties.get("position"),Je=[qe.x,qe.y,qe.z],lt=r.dx();ze.properties.get("anchor")==="viewport"&&(r.dy(lt,-i.transform.angle),r.dz(Je,Je,lt));const ot=ze.properties.get("color").toPremultipliedRenderColor(null),rt=i.transform,Qe={u_matrix:f,u_lightpos:Je,u_lightintensity:ze.properties.get("intensity"),u_lightcolor:[ot.r,ot.g,ot.b],u_vertical_gradient:+u,u_opacity:p,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:M0,u_merc_center:[0,0],u_up_dir:[0,0,0],u_height_lift:0,u_height_type:Oh[j],u_base_type:Oh[K],u_ao:x,u_edge_radius:S,u_width_scale:T,u_flood_light_color:Ce,u_vertical_scale:_e,u_flood_light_intensity:Ee,u_ground_shadow_factor:Me};return rt.projection.name==="globe"&&(Qe.u_tile_id=[O.canonical.x,O.canonical.y,1<<O.canonical.z],Qe.u_zoom_transition=te,Qe.u_inv_rot_matrix=oe,Qe.u_merc_center=Q,Qe.u_up_dir=rt.projection.upVector(new r.cp(0,0,0),Q[0]*r.aj,Q[1]*r.aj),Qe.u_height_lift=B),Qe},Iy=(f,i,u,p,x,S)=>({u_matrix:f,u_edge_radius:i,u_width_scale:u,u_vertical_scale:p,u_height_type:Oh[x],u_base_type:Oh[S]}),ky=(f,i,u,p,x,S,T,O,B,j,K,te,Q,oe,Ce,_e,Ee,Me)=>{const ze=$f(f,i,u,p,x,S,T,O,j,K,te,Q,oe,Ce,_e,Ee,1,[0,0,0]),qe={u_height_factor:-Math.pow(2,O.overscaledZ)/B.tileSize/8};return r.h(ze,Vf(i,B,Me),qe)},$d=(f,i,u)=>({u_matrix:f,u_emissive_strength:i,u_ground_shadow_factor:u}),My=(f,i,u,p,x,S=0)=>r.h($d(f,i,x),Vf(u,p,S)),tw=(f,i,u,p)=>({u_matrix:f,u_world:u,u_emissive_strength:i,u_ground_shadow_factor:p}),nw=(f,i,u,p,x,S,T=0)=>r.h(My(f,i,u,p,S,T),{u_world:x}),rw=(f,i)=>({u_matrix:f,u_ground_shadow_factor:i}),_m=(f,i,u,p,x)=>({u_matrix:f,u_camera_pos:[i[0],i[1],i[2]],u_depth_bias:u,u_height_scale:p,u_reset_depth:x}),iw=(f,i,u,p)=>{const x=r.aj/u.tileSize;return{u_matrix:f,u_camera_to_center_distance:i.getCameraToCenterDistance(p),u_extrude_scale:[i.pixelsToGLUnits[0]/x,i.pixelsToGLUnits[1]/x]}},vm=(f,i,u=1)=>({u_matrix:f,u_color:i,u_overlay:0,u_overlay_scale:u}),A0=r.bz(),Ay=(f,i,u,p,x,S,T)=>{const O=f.transform,B=O.projection.name==="globe",j=B?r.dA(O.zoom,i.canonical)*O._pixelsPerMercatorPixel:r.aw(u,1,S),K={u_matrix:i.projMatrix,u_extrude_scale:j,u_intensity:T,u_inv_rot_matrix:A0,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(B){K.u_inv_rot_matrix=p,K.u_merc_center=x,K.u_tile_id=[i.canonical.x,i.canonical.y,1<<i.canonical.z],K.u_zoom_transition=r.ah(O.zoom);const te=x[0]*r.aj,Q=x[1]*r.aj;K.u_up_dir=O.projection.upVector(new r.cp(0,0,0),te,Q)}return K};function Hd(f,[i,u,p,x],[S,T]){if(S===T)return[0,0,0,0];const O=255*(f-1)/(f*(T-S));return[i*O,u*O,p*O,x*O]}function R0(f,i,[u,p]){return u===p?0:.5/f+(i-u)*(f-1)/(f*(p-u))}const P0=(f,i,u,p,x,S,T,O,B,j,K,te,Q,oe,Ce,_e,Ee,Me,ze,qe,Je)=>({u_matrix:f,u_normalize_matrix:i,u_globe_matrix:u,u_merc_matrix:p,u_grid_matrix:x,u_tl_parent:S,u_scale_parent:j,u_fade_t:K.mix,u_opacity:K.opacity*te.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:te.paint.get("raster-brightness-min"),u_brightness_high:te.paint.get("raster-brightness-max"),u_saturation_factor:r.dC(te.paint.get("raster-saturation")),u_contrast_factor:r.dB(te.paint.get("raster-contrast")),u_spin_weights:Ry(te.paint.get("raster-hue-rotate")),u_perspective_transform:Q,u_raster_elevation:oe,u_zoom_transition:T,u_merc_center:O,u_cutoff_params:B,u_colorization_mix:Hd(r.dD,_e,Me),u_colorization_offset:R0(r.dD,Ee,Me),u_color_ramp:Ce,u_texture_offset:[qe/(ze+2*qe),ze/(ze+2*qe)],u_texture_res:[ze+2*qe,ze+2*qe],u_emissive_strength:Je});function Ry(f){f*=Math.PI/180;const i=Math.sin(f),u=Math.cos(f);return[(2*u+1)/3,(-Math.sqrt(3)*i-u+1)/3,(Math.sqrt(3)*i-u+1)/3]}const qc=.05,Ud=(f,i,u,p,x,S,T,O,B,j,K,te)=>({u_matrix:f,u_normalize_matrix:i,u_globe_matrix:u,u_merc_matrix:p,u_grid_matrix:x,u_tl_parent:S,u_scale_parent:j,u_fade_t:K.mix,u_opacity:K.opacity,u_image0:0,u_image1:1,u_raster_elevation:te,u_zoom_transition:T,u_merc_center:O,u_cutoff_params:B}),Py=(f,i,u,p,x,S,T,O,B,j)=>({u_particle_texture:f,u_particle_texture_side_len:i,u_tile_offset:u,u_velocity:p,u_color_ramp:S,u_velocity_res:x,u_max_speed:T,u_uv_offset:O,u_data_scale:[255*B[0],255*B[1]],u_data_offset:j,u_particle_pos_scale:1.1,u_particle_pos_offset:[qc,qc]}),Wc=(f,i,u,p,x,S,T,O,B,j)=>({u_particle_texture:f,u_particle_texture_side_len:i,u_velocity:u,u_velocity_res:p,u_max_speed:x,u_speed_factor:S,u_reset_rate:T,u_rand_seed:Math.random(),u_uv_offset:O,u_data_scale:[255*B[0],255*B[1]],u_data_offset:j,u_particle_pos_scale:1.1,u_particle_pos_offset:[qc,qc]}),ym=r.bz(),Hf=(f,i,u,p,x,S,T,O,B,j,K,te,Q,oe,Ce,_e,Ee,Me,ze,qe,Je,lt,ot,rt)=>{const Qe=x.transform,ut={u_is_size_zoom_constant:+(f==="constant"||f==="source"),u_is_size_feature_constant:+(f==="constant"||f==="camera"),u_size_t:i?i.uSizeT:0,u_size:i?i.uSize:0,u_camera_to_center_distance:Qe.getCameraToCenterDistance(ze),u_rotate_symbol:+u,u_aspect_ratio:Qe.width/Qe.height,u_fade_change:x.options.fadeDuration?x.symbolFadeChange:1,u_matrix:S,u_label_plane_matrix:T,u_coord_matrix:O,u_is_text:+j,u_elevation_from_sea:B?1:0,u_pitch_with_map:+p,u_texsize:K,u_texsize_icon:te,u_texture:0,u_texture_icon:1,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:ym,u_merc_center:[0,0],u_camera_forward:[0,0,0],u_ecef_origin:[0,0,0],u_tile_matrix:ym,u_up_vector:[0,-1,0],u_color_adj_mat:lt,u_icon_transition:ot||0,u_gamma_scale:p?x.transform.getCameraToCenterDistance(ze)*Math.cos(x.terrain?0:x.transform._pitch):1,u_device_pixel_ratio:r.q.devicePixelRatio,u_is_halo:1,u_scale_factor:rt||1,u_ground_shadow_factor:qe,u_inv_matrix:r.bi(r.bz(),T),u_normal_scale:Je};return ze.name==="globe"&&(ut.u_tile_id=[oe.canonical.x,oe.canonical.y,1<<oe.canonical.z],ut.u_zoom_transition=Ce,ut.u_inv_rot_matrix=Ee,ut.u_merc_center=_e,ut.u_camera_forward=Qe._camera.forward(),ut.u_ecef_origin=r.dE(Qe.globeMatrix,oe.toUnwrapped()),ut.u_tile_matrix=Float32Array.from(Qe.globeMatrix),ut.u_up_vector=Me),ut},L0=(f,i,u,p)=>({u_matrix:f,u_emissive_strength:i,u_opacity:u,u_color:p}),O0=(f,i,u,p,x,S,T,O,B)=>r.h(function(j,K,te,Q,oe,Ce){const{width:_e,height:Ee}=Q.imageManager.getPixelSize(K),Me=Math.pow(2,Ce.tileID.overscaledZ),ze=Ce.tileSize*Math.pow(2,Q.transform.tileZoom)/Me,qe=ze*(Ce.tileID.canonical.x+Ce.tileID.wrap*Me),Je=ze*Ce.tileID.canonical.y;return{u_image:0,u_pattern_tl:te.tl,u_pattern_br:te.br,u_texsize:[_e,Ee],u_pattern_size:te.displaySize,u_pattern_units_to_pixels:oe?[Q.transform.width,-1*Q.transform.height]:[1/r.aw(Ce,1,Q.transform.tileZoom),1/r.aw(Ce,1,Q.transform.tileZoom)],u_pixel_coord_upper:[qe>>16,Je>>16],u_pixel_coord_lower:[65535&qe,65535&Je]}}(0,S,T,p,O,B),{u_matrix:f,u_emissive_strength:i,u_opacity:u}),Uf=new Float32Array(r.bx([])),jf=(f,i,u,p,x,S,T,O,B,j,K,te,Q,oe=[0,0,0],Ce)=>{const _e=x.style.light,Ee=_e.properties.get("position"),Me=[-Ee.x,-Ee.y,Ee.z],ze=r.dx();_e.properties.get("anchor")==="viewport"&&(r.dy(ze,-x.transform.angle),r.dz(Me,Me,ze));const qe=K.alphaMode==="MASK",Je=_e.properties.get("color").toNonPremultipliedRenderColor(null),lt=Q.paint.get("model-ambient-occlusion-intensity"),ot=Q.paint.get("model-color").constantOr(r.am.white).toNonPremultipliedRenderColor(null);return ot.a=Q.paint.get("model-color-mix-intensity").constantOr(0),{u_matrix:f,u_lighting_matrix:i,u_normal_matrix:u,u_node_matrix:p||Uf,u_lightpos:Me,u_lightintensity:_e.properties.get("intensity"),u_lightcolor:[Je.r,Je.g,Je.b],u_camera_pos:oe,u_opacity:S,u_baseTextureIsAlpha:0,u_alphaMask:+qe,u_alphaCutoff:K.alphaCutoff,u_baseColorFactor:T.toNonPremultipliedRenderColor(null).toArray01(),u_emissiveFactor:O.toNonPremultipliedRenderColor(null).toArray01(),u_metallicFactor:B,u_roughnessFactor:j,u_baseColorTexture:Yo.BaseColor,u_metallicRoughnessTexture:Yo.MetallicRoughness,u_normalTexture:Yo.Normal,u_occlusionTexture:Yo.Occlusion,u_emissionTexture:Yo.Emission,u_lutTexture:Yo.LUT,u_color_mix:ot.toArray01(),u_aoIntensity:lt,u_emissive_strength:te,u_occlusionTextureTransform:Ce||[0,0,0,0]}},Ly=(f,i=Uf,u=Uf)=>({u_matrix:f,u_instance:i,u_node_matrix:u}),Oy={fillExtrusion:f=>({u_matrix:new r.cc(f),u_lightpos:new r.c9(f),u_lightintensity:new r.ca(f),u_lightcolor:new r.c9(f),u_vertical_gradient:new r.ca(f),u_opacity:new r.ca(f),u_edge_radius:new r.ca(f),u_width_scale:new r.ca(f),u_ao:new r.cb(f),u_height_type:new r.c8(f),u_base_type:new r.c8(f),u_tile_id:new r.c9(f),u_zoom_transition:new r.ca(f),u_inv_rot_matrix:new r.cc(f),u_merc_center:new r.cb(f),u_up_dir:new r.c9(f),u_height_lift:new r.ca(f),u_flood_light_color:new r.c9(f),u_vertical_scale:new r.ca(f),u_flood_light_intensity:new r.ca(f),u_ground_shadow_factor:new r.c9(f)}),fillExtrusionDepth:f=>({u_matrix:new r.cc(f),u_edge_radius:new r.ca(f),u_width_scale:new r.ca(f),u_vertical_scale:new r.ca(f),u_height_type:new r.c8(f),u_base_type:new r.c8(f)}),fillExtrusionPattern:f=>({u_matrix:new r.cc(f),u_lightpos:new r.c9(f),u_lightintensity:new r.ca(f),u_lightcolor:new r.c9(f),u_vertical_gradient:new r.ca(f),u_height_factor:new r.ca(f),u_edge_radius:new r.ca(f),u_width_scale:new r.ca(f),u_ao:new r.cb(f),u_height_type:new r.c8(f),u_base_type:new r.c8(f),u_tile_id:new r.c9(f),u_zoom_transition:new r.ca(f),u_inv_rot_matrix:new r.cc(f),u_merc_center:new r.cb(f),u_up_dir:new r.c9(f),u_height_lift:new r.ca(f),u_image:new r.c8(f),u_texsize:new r.cb(f),u_pixel_coord_upper:new r.cb(f),u_pixel_coord_lower:new r.cb(f),u_tile_units_to_pixels:new r.ca(f),u_opacity:new r.ca(f),u_pattern_transition:new r.ca(f)}),fillExtrusionGroundEffect:f=>({u_matrix:new r.cc(f),u_opacity:new r.ca(f),u_ao_pass:new r.ca(f),u_meter_to_tile:new r.ca(f),u_ao:new r.cb(f),u_flood_light_intensity:new r.ca(f),u_flood_light_color:new r.c9(f),u_attenuation:new r.ca(f),u_edge_radius:new r.ca(f),u_fb:new r.c8(f),u_fb_size:new r.ca(f),u_dynamic_offset:new r.ca(f)}),fill:f=>({u_matrix:new r.cc(f),u_emissive_strength:new r.ca(f),u_ground_shadow_factor:new r.c9(f)}),fillPattern:f=>({u_matrix:new r.cc(f),u_emissive_strength:new r.ca(f),u_image:new r.c8(f),u_texsize:new r.cb(f),u_pixel_coord_upper:new r.cb(f),u_pixel_coord_lower:new r.cb(f),u_tile_units_to_pixels:new r.ca(f),u_ground_shadow_factor:new r.c9(f),u_pattern_transition:new r.ca(f)}),fillOutline:f=>({u_matrix:new r.cc(f),u_emissive_strength:new r.ca(f),u_world:new r.cb(f),u_ground_shadow_factor:new r.c9(f)}),fillOutlinePattern:f=>({u_matrix:new r.cc(f),u_emissive_strength:new r.ca(f),u_world:new r.cb(f),u_image:new r.c8(f),u_texsize:new r.cb(f),u_pixel_coord_upper:new r.cb(f),u_pixel_coord_lower:new r.cb(f),u_tile_units_to_pixels:new r.ca(f),u_ground_shadow_factor:new r.c9(f),u_pattern_transition:new r.ca(f)}),building:f=>({u_matrix:new r.cc(f),u_normal_matrix:new r.cc(f),u_opacity:new r.ca(f)}),buildingDepth:f=>({u_matrix:new r.cc(f)}),elevatedStructuresDepth:f=>({u_matrix:new r.cc(f),u_depth_bias:new r.ca(f)}),elevatedStructures:f=>({u_matrix:new r.cc(f),u_ground_shadow_factor:new r.c9(f)}),elevatedStructuresDepthReconstruct:f=>({u_matrix:new r.cc(f),u_camera_pos:new r.c9(f),u_depth_bias:new r.ca(f),u_height_scale:new r.ca(f),u_reset_depth:new r.ca(f)}),circle:r.dH,collisionBox:f=>({u_matrix:new r.cc(f),u_camera_to_center_distance:new r.ca(f),u_extrude_scale:new r.cb(f)}),collisionCircle:f=>({u_matrix:new r.cc(f),u_inv_matrix:new r.cc(f),u_camera_to_center_distance:new r.ca(f),u_viewport_size:new r.cb(f)}),debug:f=>({u_color:new r.di(f),u_matrix:new r.cc(f),u_overlay:new r.c8(f),u_overlay_scale:new r.ca(f)}),clippingMask:f=>({u_matrix:new r.cc(f)}),heatmap:f=>({u_extrude_scale:new r.ca(f),u_intensity:new r.ca(f),u_matrix:new r.cc(f),u_inv_rot_matrix:new r.cc(f),u_merc_center:new r.cb(f),u_tile_id:new r.c9(f),u_zoom_transition:new r.ca(f),u_up_dir:new r.c9(f)}),heatmapTexture:f=>({u_image:new r.c8(f),u_color_ramp:new r.c8(f),u_opacity:new r.ca(f)}),hillshade:f=>({u_matrix:new r.cc(f),u_image:new r.c8(f),u_latrange:new r.cb(f),u_light:new r.cb(f),u_shadow:new r.di(f),u_highlight:new r.di(f),u_emissive_strength:new r.ca(f),u_accent:new r.di(f)}),hillshadePrepare:f=>({u_matrix:new r.cc(f),u_image:new r.c8(f),u_dimension:new r.cb(f),u_zoom:new r.ca(f)}),line:r.dG,linePattern:r.dF,raster:f=>({u_matrix:new r.cc(f),u_normalize_matrix:new r.cc(f),u_globe_matrix:new r.cc(f),u_merc_matrix:new r.cc(f),u_grid_matrix:new r.dj(f),u_tl_parent:new r.cb(f),u_scale_parent:new r.ca(f),u_fade_t:new r.ca(f),u_opacity:new r.ca(f),u_image0:new r.c8(f),u_image1:new r.c8(f),u_brightness_low:new r.ca(f),u_brightness_high:new r.ca(f),u_saturation_factor:new r.ca(f),u_contrast_factor:new r.ca(f),u_spin_weights:new r.c9(f),u_perspective_transform:new r.cb(f),u_raster_elevation:new r.ca(f),u_zoom_transition:new r.ca(f),u_merc_center:new r.cb(f),u_cutoff_params:new r.cQ(f),u_colorization_mix:new r.cQ(f),u_colorization_offset:new r.ca(f),u_color_ramp:new r.c8(f),u_texture_offset:new r.cb(f),u_texture_res:new r.cb(f),u_emissive_strength:new r.ca(f)}),rasterParticle:f=>({u_matrix:new r.cc(f),u_normalize_matrix:new r.cc(f),u_globe_matrix:new r.cc(f),u_merc_matrix:new r.cc(f),u_grid_matrix:new r.dj(f),u_tl_parent:new r.cb(f),u_scale_parent:new r.ca(f),u_fade_t:new r.ca(f),u_opacity:new r.ca(f),u_image0:new r.c8(f),u_image1:new r.c8(f),u_raster_elevation:new r.ca(f),u_zoom_transition:new r.ca(f),u_merc_center:new r.cb(f),u_cutoff_params:new r.cQ(f)}),rasterParticleTexture:f=>({u_texture:new r.c8(f),u_opacity:new r.ca(f)}),rasterParticleDraw:f=>({u_particle_texture:new r.c8(f),u_particle_texture_side_len:new r.ca(f),u_tile_offset:new r.cb(f),u_velocity:new r.c8(f),u_color_ramp:new r.c8(f),u_velocity_res:new r.cb(f),u_max_speed:new r.ca(f),u_uv_offset:new r.cb(f),u_data_scale:new r.cb(f),u_data_offset:new r.ca(f),u_particle_pos_scale:new r.ca(f),u_particle_pos_offset:new r.cb(f)}),rasterParticleUpdate:f=>({u_particle_texture:new r.c8(f),u_particle_texture_side_len:new r.ca(f),u_velocity:new r.c8(f),u_velocity_res:new r.cb(f),u_max_speed:new r.ca(f),u_speed_factor:new r.ca(f),u_reset_rate:new r.ca(f),u_rand_seed:new r.ca(f),u_uv_offset:new r.cb(f),u_data_scale:new r.cb(f),u_data_offset:new r.ca(f),u_particle_pos_scale:new r.ca(f),u_particle_pos_offset:new r.cb(f)}),symbol:f=>({u_is_size_zoom_constant:new r.c8(f),u_is_size_feature_constant:new r.c8(f),u_size_t:new r.ca(f),u_size:new r.ca(f),u_camera_to_center_distance:new r.ca(f),u_rotate_symbol:new r.c8(f),u_aspect_ratio:new r.ca(f),u_fade_change:new r.ca(f),u_matrix:new r.cc(f),u_label_plane_matrix:new r.cc(f),u_coord_matrix:new r.cc(f),u_is_text:new r.c8(f),u_elevation_from_sea:new r.c8(f),u_pitch_with_map:new r.c8(f),u_texsize:new r.cb(f),u_texsize_icon:new r.cb(f),u_texture:new r.c8(f),u_texture_icon:new r.c8(f),u_gamma_scale:new r.ca(f),u_device_pixel_ratio:new r.ca(f),u_tile_id:new r.c9(f),u_zoom_transition:new r.ca(f),u_inv_rot_matrix:new r.cc(f),u_merc_center:new r.cb(f),u_camera_forward:new r.c9(f),u_tile_matrix:new r.cc(f),u_up_vector:new r.c9(f),u_ecef_origin:new r.c9(f),u_is_halo:new r.c8(f),u_icon_transition:new r.ca(f),u_color_adj_mat:new r.cc(f),u_scale_factor:new r.ca(f),u_ground_shadow_factor:new r.c9(f),u_inv_matrix:new r.cc(f),u_normal_scale:new r.ca(f)}),background:f=>({u_matrix:new r.cc(f),u_emissive_strength:new r.ca(f),u_opacity:new r.ca(f),u_color:new r.di(f)}),backgroundPattern:f=>({u_matrix:new r.cc(f),u_emissive_strength:new r.ca(f),u_opacity:new r.ca(f),u_image:new r.c8(f),u_pattern_tl:new r.cb(f),u_pattern_br:new r.cb(f),u_texsize:new r.cb(f),u_pattern_size:new r.cb(f),u_pixel_coord_upper:new r.cb(f),u_pixel_coord_lower:new r.cb(f),u_pattern_units_to_pixels:new r.cb(f)}),terrainRaster:f=>({u_matrix:new r.cc(f),u_image0:new r.c8(f),u_skirt_height:new r.ca(f),u_ground_shadow_factor:new r.c9(f)}),skybox:f=>({u_matrix:new r.cc(f),u_sun_direction:new r.c9(f),u_cubemap:new r.c8(f),u_opacity:new r.ca(f),u_temporal_offset:new r.ca(f)}),skyboxGradient:f=>({u_matrix:new r.cc(f),u_color_ramp:new r.c8(f),u_center_direction:new r.c9(f),u_radius:new r.ca(f),u_opacity:new r.ca(f),u_temporal_offset:new r.ca(f)}),skyboxCapture:f=>({u_matrix_3f:new r.dj(f),u_sun_direction:new r.c9(f),u_sun_intensity:new r.ca(f),u_color_tint_r:new r.cQ(f),u_color_tint_m:new r.cQ(f),u_luminance:new r.ca(f)}),globeRaster:f=>({u_proj_matrix:new r.cc(f),u_globe_matrix:new r.cc(f),u_normalize_matrix:new r.cc(f),u_merc_matrix:new r.cc(f),u_zoom_transition:new r.ca(f),u_merc_center:new r.cb(f),u_image0:new r.c8(f),u_grid_matrix:new r.dj(f),u_skirt_height:new r.ca(f),u_far_z_cutoff:new r.ca(f),u_frustum_tl:new r.c9(f),u_frustum_tr:new r.c9(f),u_frustum_br:new r.c9(f),u_frustum_bl:new r.c9(f),u_globe_pos:new r.c9(f),u_globe_radius:new r.ca(f),u_viewport:new r.cb(f)}),globeAtmosphere:f=>({u_frustum_tl:new r.c9(f),u_frustum_tr:new r.c9(f),u_frustum_br:new r.c9(f),u_frustum_bl:new r.c9(f),u_horizon:new r.ca(f),u_transition:new r.ca(f),u_fadeout_range:new r.ca(f),u_color:new r.cQ(f),u_high_color:new r.cQ(f),u_space_color:new r.cQ(f),u_temporal_offset:new r.ca(f),u_horizon_angle:new r.ca(f)}),model:f=>({u_matrix:new r.cc(f),u_lighting_matrix:new r.cc(f),u_normal_matrix:new r.cc(f),u_node_matrix:new r.cc(f),u_lightpos:new r.c9(f),u_lightintensity:new r.ca(f),u_lightcolor:new r.c9(f),u_camera_pos:new r.c9(f),u_opacity:new r.ca(f),u_baseColorFactor:new r.cQ(f),u_emissiveFactor:new r.cQ(f),u_metallicFactor:new r.ca(f),u_roughnessFactor:new r.ca(f),u_baseTextureIsAlpha:new r.c8(f),u_alphaMask:new r.c8(f),u_alphaCutoff:new r.ca(f),u_baseColorTexture:new r.c8(f),u_metallicRoughnessTexture:new r.c8(f),u_normalTexture:new r.c8(f),u_occlusionTexture:new r.c8(f),u_emissionTexture:new r.c8(f),u_lutTexture:new r.c8(f),u_color_mix:new r.cQ(f),u_aoIntensity:new r.ca(f),u_emissive_strength:new r.ca(f),u_occlusionTextureTransform:new r.cQ(f)}),modelDepth:f=>({u_matrix:new r.cc(f),u_instance:new r.cc(f),u_node_matrix:new r.cc(f)}),groundShadow:f=>({u_matrix:new r.cc(f),u_ground_shadow_factor:new r.c9(f)}),stars:f=>({u_matrix:new r.cc(f),u_up:new r.c9(f),u_right:new r.c9(f),u_intensity_multiplier:new r.ca(f)}),snowParticle:f=>({u_modelview:new r.cc(f),u_projection:new r.cc(f),u_time:new r.ca(f),u_cam_pos:new r.c9(f),u_velocityConeAperture:new r.ca(f),u_velocity:new r.ca(f),u_horizontalOscillationRadius:new r.ca(f),u_horizontalOscillationRate:new r.ca(f),u_boxSize:new r.ca(f),u_billboardSize:new r.ca(f),u_simpleShapeParameters:new r.cb(f),u_screenSize:new r.cb(f),u_thinningCenterPos:new r.cb(f),u_thinningShape:new r.c9(f),u_thinningAffectedRatio:new r.ca(f),u_thinningParticleOffset:new r.ca(f),u_particleColor:new r.cQ(f),u_direction:new r.c9(f)}),rainParticle:f=>({u_modelview:new r.cc(f),u_projection:new r.cc(f),u_time:new r.ca(f),u_cam_pos:new r.c9(f),u_texScreen:new r.c8(f),u_velocityConeAperture:new r.ca(f),u_velocity:new r.ca(f),u_boxSize:new r.ca(f),u_rainDropletSize:new r.cb(f),u_distortionStrength:new r.ca(f),u_rainDirection:new r.c9(f),u_color:new r.cQ(f),u_screenSize:new r.cb(f),u_thinningCenterPos:new r.cb(f),u_thinningShape:new r.c9(f),u_thinningAffectedRatio:new r.ca(f),u_thinningParticleOffset:new r.ca(f),u_shapeDirectionalPower:new r.ca(f),u_shapeNormalPower:new r.ca(f),u_mode:new r.ca(f)}),vignette:f=>({u_vignetteShape:new r.c9(f),u_vignetteColor:new r.cQ(f)}),occlusion:f=>({u_matrix:new r.cc(f),u_anchorPos:new r.c9(f),u_screenSizePx:new r.cb(f),u_occluderSizePx:new r.cb(f),u_color:new r.cQ(f)})};class kl{constructor(i,u,p,x){this.id=kl.uniqueIdxCounter,kl.uniqueIdxCounter++,this.context=i;const S=i.gl;this.buffer=S.createBuffer(),this.dynamicDraw=!!p,this.context.unbindVAO(),i.bindElementBuffer.set(this.buffer),S.bufferData(S.ELEMENT_ARRAY_BUFFER,u.arrayBuffer,this.dynamicDraw?S.DYNAMIC_DRAW:S.STATIC_DRAW),this.dynamicDraw||x||u.destroy()}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(i){this.id=kl.uniqueIdxCounter,kl.uniqueIdxCounter++;const u=this.context.gl;this.context.unbindVAO(),this.bind(),u.bufferSubData(u.ELEMENT_ARRAY_BUFFER,0,i.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}kl.uniqueIdxCounter=0;const sw={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class ow{constructor(i,u,p,x,S,T){this.length=u.length,this.attributes=p,this.itemSize=u.bytesPerElement,this.dynamicDraw=x,this.instanceCount=T,this.context=i;const O=i.gl;this.buffer=O.createBuffer(),i.bindVertexBuffer.set(this.buffer),O.bufferData(O.ARRAY_BUFFER,u.arrayBuffer,this.dynamicDraw?O.DYNAMIC_DRAW:O.STATIC_DRAW),this.dynamicDraw||S||u.destroy()}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(i){const u=this.context.gl;this.bind(),u.bufferSubData(u.ARRAY_BUFFER,0,i.arrayBuffer)}enableAttributes(i,u){for(let p=0;p<this.attributes.length;p++){const x=u.attributes[this.attributes[p].name];x!==void 0&&i.enableVertexAttribArray(x)}}setVertexAttribPointers(i,u,p){for(let x=0;x<this.attributes.length;x++){const S=this.attributes[x],T=u.attributes[S.name];T!==void 0&&i.vertexAttribPointer(T,S.components,i[sw[S.type]],!1,this.itemSize,S.offset+this.itemSize*(p||0))}}setVertexAttribDivisor(i,u,p){for(let x=0;x<this.attributes.length;x++){const S=u.attributes[this.attributes[x].name];S!==void 0&&this.instanceCount&&this.instanceCount>0&&i.vertexAttribDivisor(S,p)}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class D0{constructor(i,u,p,x,S){this.context=i,this.width=u,this.height=p;const T=this.framebuffer=i.gl.createFramebuffer();x&&(this.colorAttachment=new Cy(i,T)),S&&(this.depthAttachmentType=S,this.depthAttachment=S==="renderbuffer"?new Ey(i,T):new Jx(i,T))}destroy(){const i=this.context.gl;if(this.colorAttachment){const u=this.colorAttachment.get();u&&i.deleteTexture(u)}if(this.depthAttachment&&this.depthAttachmentType)if(this.depthAttachmentType==="renderbuffer"){const u=this.depthAttachment.get();u&&i.deleteRenderbuffer(u)}else{const u=this.depthAttachment.get();u&&i.deleteTexture(u)}i.deleteFramebuffer(this.framebuffer)}}class aw{constructor(i,u){this.gl=i,this.clearColor=new gy(this),this.clearDepth=new y0(this),this.clearStencil=new qx(this),this.colorMask=new Wx(this),this.depthMask=new Kx(this),this.stencilMask=new Yx(this),this.stencilFunc=new _y(this),this.stencilOp=new Zx(this),this.stencilTest=new sm(this),this.depthRange=new Xx(this),this.depthTest=new vy(this),this.depthFunc=new b0(this),this.blend=new om(this),this.blendFunc=new x0(this),this.blendColor=new Fd(this),this.blendEquation=new Rh(this),this.cullFace=new am(this),this.cullFaceSide=new lm(this),this.frontFace=new Ph(this),this.program=new yy(this),this.activeTexture=new w0(this),this.viewport=new by(this),this.bindFramebuffer=new Lh(this),this.bindRenderbuffer=new um(this),this.bindTexture=new cm(this),this.bindVertexBuffer=new S0(this),this.bindElementBuffer=new dm(this),this.bindVertexArrayOES=new Ff(this),this.pixelStoreUnpack=new xy(this),this.pixelStoreUnpackPremultiplyAlpha=new wy(this),this.pixelStoreUnpackFlipY=new Sy(this),this.options=u?Object.assign({},u):{},this.options.extTextureFilterAnisotropicForceOff||(this.extTextureFilterAnisotropic=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=i.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT))),this.extDebugRendererInfo=i.getExtension("WEBGL_debug_renderer_info"),this.extDebugRendererInfo&&(this.renderer=i.getParameter(this.extDebugRendererInfo.UNMASKED_RENDERER_WEBGL),this.vendor=i.getParameter(this.extDebugRendererInfo.UNMASKED_VENDOR_WEBGL)),this.forceManualRenderingForInstanceIDShaders=u&&!!u.forceManualRenderingForInstanceIDShaders||this.renderer&&this.renderer.indexOf("PowerVR")!==-1,this.options.extTextureFloatLinearForceOff||(this.extTextureFloatLinear=i.getExtension("OES_texture_float_linear")),this.extRenderToTextureHalfFloat=i.getExtension("EXT_color_buffer_half_float"),this.extTimerQuery=i.getExtension("EXT_disjoint_timer_query_webgl2"),this.maxTextureSize=i.getParameter(i.MAX_TEXTURE_SIZE),this.maxPointSize=i.getParameter(i.ALIASED_POINT_SIZE_RANGE)[1]}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArrayOES.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(i,u,p){return new kl(this,i,u,p)}createVertexBuffer(i,u,p,x,S){return new ow(this,i,u,p,x,S)}createRenderbuffer(i,u,p){const x=this.gl,S=x.createRenderbuffer();return this.bindRenderbuffer.set(S),x.renderbufferStorage(x.RENDERBUFFER,i,u,p),this.bindRenderbuffer.set(null),S}createFramebuffer(i,u,p,x){return new D0(this,i,u,p,x)}clear({color:i,depth:u,stencil:p,colorMask:x}){const S=this.gl;let T=0;i&&(T|=S.COLOR_BUFFER_BIT,this.clearColor.set(i.toNonPremultipliedRenderColor(null)),this.colorMask.set(x||[!0,!0,!0,!0])),u!==void 0&&(T|=S.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(u),this.depthMask.set(!0)),p!==void 0&&(T|=S.STENCIL_BUFFER_BIT,this.clearStencil.set(p),this.stencilMask.set(255)),S.clear(T)}setCullFace(i){i.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(i.mode),this.frontFace.set(i.frontFace))}setDepthMode(i){i.func!==this.gl.ALWAYS||i.mask?(this.depthTest.set(!0),this.depthFunc.set(i.func),this.depthMask.set(i.mask),this.depthRange.set(i.range)):this.depthTest.set(!1)}setStencilMode(i){i.test.func!==this.gl.ALWAYS||i.mask?(this.stencilTest.set(!0),this.stencilMask.set(i.mask),this.stencilOp.set([i.fail,i.depthFail,i.pass]),this.stencilFunc.set({func:i.test.func,ref:i.ref,mask:i.test.mask})):this.stencilTest.set(!1)}setColorMode(i){r.bv(i.blendFunction,ai.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(i.blendFunction),this.blendColor.set(i.blendColor),i.blendEquation?this.blendEquation.set(i.blendEquation):this.blendEquation.setDefault()),this.colorMask.set(i.mask)}unbindVAO(){this.bindVertexArrayOES.set(null)}}let Dh;function bm(f,i,u,p,x,S,T){const O=f.context,B=O.gl,j=f.transform,K=f.getOrCreateProgram("collisionBox"),te=[];let Q=0,oe=0;for(let Je=0;Je<p.length;Je++){const lt=p[Je],ot=i.getTile(lt),rt=ot.getBucket(u);if(!rt)continue;const Qe=Dr(lt,rt,j);let ut=Qe;x[0]===0&&x[1]===0||(ut=f.translatePosMatrix(Qe,ot,x,S));const pt=T?rt.textCollisionBox:rt.iconCollisionBox,zt=rt.collisionCircleArray;if(zt.length>0){const Vt=r.bz(),nn=ut;r.cB(Vt,rt.placementInvProjMatrix,j.glCoordMatrix),r.cB(Vt,Vt,rt.placementViewportMatrix),te.push({circleArray:zt,circleOffset:oe,transform:nn,invTransform:Vt,projection:rt.getProjection()}),Q+=zt.length/4,oe=Q}pt&&(f.terrain&&f.terrain.setupElevationDraw(ot,K),K.draw(f,B.LINES,Jn.disabled,Vr.disabled,f.colorModeForRenderPass(),Pr.disabled,iw(ut,j,ot,rt.getProjection()),u.id,pt.layoutVertexBuffer,pt.indexBuffer,pt.segments,null,j.zoom,null,[pt.collisionVertexBuffer,pt.collisionVertexBufferExt]))}if(!T||!te.length)return;const Ce=f.getOrCreateProgram("collisionCircle"),_e=new r.dI;_e.resize(4*Q),_e._trim();let Ee=0;for(const Je of te)for(let lt=0;lt<Je.circleArray.length/4;lt++){const ot=4*lt,rt=Je.circleArray[ot+0],Qe=Je.circleArray[ot+1],ut=Je.circleArray[ot+2],pt=Je.circleArray[ot+3];_e.emplace(Ee++,rt,Qe,ut,pt,0),_e.emplace(Ee++,rt,Qe,ut,pt,1),_e.emplace(Ee++,rt,Qe,ut,pt,2),_e.emplace(Ee++,rt,Qe,ut,pt,3)}(!Dh||Dh.length<2*Q)&&(Dh=function(Je){const lt=2*Je,ot=new r.a_;ot.resize(lt),ot._trim();for(let rt=0;rt<lt;rt++){const Qe=6*rt;ot.uint16[Qe+0]=4*rt+0,ot.uint16[Qe+1]=4*rt+1,ot.uint16[Qe+2]=4*rt+2,ot.uint16[Qe+3]=4*rt+2,ot.uint16[Qe+4]=4*rt+3,ot.uint16[Qe+5]=4*rt+0}return ot}(Q));const Me=O.createIndexBuffer(Dh,!0),ze=O.createVertexBuffer(_e,r.dJ.members,!0);for(const Je of te){const lt={u_matrix:Je.transform,u_inv_matrix:Je.invTransform,u_camera_to_center_distance:(qe=j).getCameraToCenterDistance(Je.projection),u_viewport_size:[qe.width,qe.height]};Ce.draw(f,B.TRIANGLES,Jn.disabled,Vr.disabled,f.colorModeForRenderPass(),Pr.disabled,lt,u.id,ze,Me,r.bd.simpleSegment(0,2*Je.circleOffset,Je.circleArray.length,Je.circleArray.length/2),null,j.zoom)}var qe;ze.destroy(),Me.destroy()}const Yu=r.bz();function Gf(f){const i=f._camera.getWorldToCamera(f.worldSize,1),u=r.az([],i,f.globeMatrix);r.bi(u,u);const p=[0,0,0],x=[0,1,0,0];return r.aA(x,x,u),p[0]=x[0],p[1]=x[1],p[2]=x[2],r.au(p,p),p}function qf({width:f,height:i,anchor:u,textOffset:p,textScale:x},S){const{horizontalAlign:T,verticalAlign:O}=r.bT(u),B=-(T-.5)*f,j=-(O-.5)*i,K=r.bU(u,p);return new r.P((B/x+K[0])*S,(j/x+K[1])*S)}function Dy(f,i,u,p,x,S,T,O,B,j){const K=f.text.placedSymbolArray,te=f.text.dynamicLayoutVertexArray,Q=f.icon.dynamicLayoutVertexArray,oe={},Ce=f.getProjection(),_e=kh(T,Ce,x),Ee=x.elevation,Me=Ce.upVectorScale(T.canonical,x.center.lat,x.worldSize).metersToTile;te.clear();for(let ze=0;ze<K.length;ze++){const qe=K.get(ze),{tileAnchorX:Je,tileAnchorY:lt,numGlyphs:ot}=qe,rt=qe.hidden||!qe.crossTileID||f.allowVerticalPlacement&&!qe.placedOrientation?null:p[qe.crossTileID];if(rt){let Qe=0,ut=0,pt=0;if(Ee){const cn=Ee?Ee.getAtTileOffset(T,Je,lt):0,[qt,_n,zn]=Ce.upVector(T.canonical,Je,lt);Qe=cn*qt*Me,ut=cn*_n*Me,pt=cn*zn*Me}let[zt,Vt,nn,sn]=al(qe.projectedAnchorX+Qe,qe.projectedAnchorY+ut,qe.projectedAnchorZ+pt,u?_e:S);const wn=Pc(x.getCameraToCenterDistance(Ce),sn);let Pt=r.bJ(f.textSizeData,B,qe)*wn/r.bO;u&&(Pt*=f.tilePixelRatio/O);const Kt=qf(rt,Pt);u?({x:zt,y:Vt,z:nn}=Ce.projectTilePoint(Je+Kt.x,lt+Kt.y,T.canonical),[zt,Vt,nn]=al(zt+Qe,Vt+ut,nn+pt,S)):(i&&Kt._rotate(-x.angle),zt+=Kt.x,Vt+=Kt.y,nn=0);const kt=f.allowVerticalPlacement&&qe.placedOrientation===r.bI.vertical?Math.PI/2:0;for(let cn=0;cn<ot;cn++)r.bL(te,zt,Vt,nn,kt);j&&qe.associatedIconIndex>=0&&(oe[qe.associatedIconIndex]={x:zt,y:Vt,z:nn,angle:kt})}else ja(ot,te)}if(j){Q.clear();const ze=f.icon.placedSymbolArray;for(let qe=0;qe<ze.length;qe++){const Je=ze.get(qe),{numGlyphs:lt}=Je,ot=oe[qe];if(Je.hidden||!ot)ja(lt,Q);else{const{x:rt,y:Qe,z:ut,angle:pt}=ot;for(let zt=0;zt<lt;zt++)r.bL(Q,rt,Qe,ut,pt)}}f.icon.dynamicLayoutVertexBuffer.updateData(Q)}f.text.dynamicLayoutVertexBuffer.updateData(te)}function zh(f,i,u,p,x,S,T={}){const O=u.paint.get("icon-translate"),B=u.paint.get("text-translate"),j=u.paint.get("icon-translate-anchor"),K=u.paint.get("text-translate-anchor"),te=u.layout.get("icon-rotation-alignment"),Q=u.layout.get("text-rotation-alignment"),oe=u.layout.get("icon-pitch-alignment"),Ce=u.layout.get("text-pitch-alignment"),_e=u.layout.get("icon-keep-upright"),Ee=u.layout.get("text-keep-upright"),Me=u.paint.get("icon-color-saturation"),ze=u.paint.get("icon-color-contrast"),qe=u.paint.get("icon-color-brightness-min"),Je=u.paint.get("icon-color-brightness-max"),lt=u.layout.get("symbol-elevation-reference")==="sea",ot=f.context,rt=ot.gl,Qe=f.transform,ut=te==="map",pt=Q==="map",zt=oe==="map",Vt=Ce==="map",nn=u.layout.get("symbol-sort-key").constantOr(1)!==void 0;let sn=!1;const wn=f.depthModeForSublayer(0,Jn.ReadOnly),Pt=new Jn(f.context.gl.LEQUAL,Jn.ReadOnly,f.depthRangeFor3D),Kt=[r.aD(Qe.center.lng),r.aH(Qe.center.lat)],kt=u.layout.get("text-variable-anchor"),cn=Qe.projection.name==="globe",qt=[],_n=[0,-1,0];for(const zn of p){const un=i.getTile(zn),On=un.getBucket(u);if(!On||On.projection.name==="mercator"&&cn||On.fullyClipped)continue;const er=On.projection.name==="globe",tr=er?r.ah(Qe.zoom):0,Zn=kh(zn,On.getProjection(),Qe),mr=Qe.calculatePixelsToTileUnitsMatrix(un),yr=kt&&On.hasTextData(),kr=On.hasIconTextFit()&&yr&&On.hasIconData(),Hr=On.getProjection().createInversionMatrix(Qe,zn.canonical),ti=(1<<un.tileID.canonical.z)*r.aj/f.transform.worldSize,ji=ms=>{let Vi=[0,0,0];if(ms){const $s=f.style.directionalLight,Mi=f.style.ambientLight;$s&&Mi&&(Vi=Wu(f.style,$s,Mi))}return Vi},ps=ms=>{Qe.depthOcclusionForSymbolsAndCircles&&(u.hasInitialOcclusionOpacityProperties||f.terrain)&&(ms.push("DEPTH_D24"),ms.push("DEPTH_OCCLUSION"))},Yi=()=>{const ms=ut&&u.layout.get("symbol-placement")!=="point",Vi=[];ps(Vi);const $s=ms||kr,Mi=On.elevationType==="road"&&zt,ro=f.shadowRenderer,ws=Mi&&!!ro&&ro.enabled,as=ji(ws),Ss=Mi?Pt:wn,Hi=u.paint.get("icon-image-cross-fade");f.terrainRenderModeElevated()&&zt&&Vi.push("PITCH_WITH_MAP_TERRAIN"),er&&(Vi.push("PROJECTION_GLOBE_VIEW"),$s&&Vi.push("PROJECTED_POS_ON_VIEWPORT")),Hi>0&&Vi.push("ICON_TRANSITION"),On.icon.zOffsetVertexBuffer&&Vi.push("Z_OFFSET"),Me===0&&ze===0&&qe===0&&Je===1||Vi.push("COLOR_ADJUSTMENT"),On.sdfIcons&&Vi.push("RENDER_SDF"),ws&&Vi.push("RENDER_SHADOWS","DEPTH_TEXTURE","NORMAL_OFFSET"),Mi&&On.icon.orientationVertexBuffer&&Vi.push("ELEVATED_ROADS");const js=On.icon.programConfigurations.get(u.id),Uo=f.getOrCreateProgram("symbol",{config:js,defines:Vi}),As=un.imageAtlasTexture?un.imageAtlasTexture.size:[0,0],Fi=On.iconSizeData,Ya=r.bH(Fi,Qe.zoom),Ra=zt||!Qe.isOrthographic,hl=ol(Zn,un.tileID.canonical,zt,ut,Qe,On.getProjection(),mr),Ql=Pd(Zn,un.tileID.canonical,zt,ut,Qe,On.getProjection(),mr),Al=f.translatePosMatrix(Ql,un,O,j,!0),Pa=f.translatePosMatrix(Zn,un,O,j),nd=$s?Yu:hl,eu=ut&&!zt&&!ms;let rd=_n;!cn&&!Qe.mercatorFromTransition||ut||(rd=Gf(Qe));const up=er?rd:_n,s_=u.getColorAdjustmentMatrix(Me,ze,qe,Je),Zh=Hf(Fi.kind,Ya,eu,zt,f,Pa,nd,Al,lt,!1,As,[0,0],0,zn,tr,Kt,Hr,up,On.getProjection(),as,ti,s_,Hi,null),o_=un.imageAtlasTexture?un.imageAtlasTexture:null,cp=u.layout.get("icon-size").constantOr(0)!==1||On.iconsNeedLinear,Bm=On.sdfIcons||f.options.rotating||f.options.zooming||cp||Ra?rt.LINEAR:rt.NEAREST,Vm=On.sdfIcons&&u.paint.get("icon-halo-width").constantOr(1)!==0,bu=f.terrain&&zt&&ms?r.bi(r.bz(),hl):Yu;if(ms&&On.icon){const Xh=Qe.elevation,Yd=Xh?Xh.getAtTileOffsetFunc(zn,Qe.center.lat,Qe.worldSize,On.getProjection()):null,id=Rd(Zn,un.tileID.canonical,zt,ut,Qe,On.getProjection(),mr);$u(On,Zn,f,!1,id,Ql,zt,_e,Yd,zn)}return{program:Uo,buffers:On.icon,uniformValues:Zh,atlasTexture:o_,atlasTextureIcon:null,atlasInterpolation:Bm,atlasInterpolationIcon:null,isSDF:On.sdfIcons,hasHalo:Vm,depthMode:Ss,tile:un,renderWithShadows:ws,labelPlaneMatrixInv:bu}},Xi=()=>{const ms=pt&&u.layout.get("symbol-placement")!=="point",Vi=[],$s=ms||kt||kr,Mi=On.elevationType==="road"&&Vt,ro=f.shadowRenderer,ws=Mi&&!!ro&&ro.enabled,as=ji(ws),Ss=Mi?Pt:wn;f.terrainRenderModeElevated()&&Vt&&Vi.push("PITCH_WITH_MAP_TERRAIN"),er&&(Vi.push("PROJECTION_GLOBE_VIEW"),$s&&Vi.push("PROJECTED_POS_ON_VIEWPORT")),On.text.zOffsetVertexBuffer&&Vi.push("Z_OFFSET"),On.iconsInText&&Vi.push("RENDER_TEXT_AND_SYMBOL"),Vi.push("RENDER_SDF"),ws&&Vi.push("RENDER_SHADOWS","DEPTH_TEXTURE","NORMAL_OFFSET"),Mi&&On.text.orientationVertexBuffer&&Vi.push("ELEVATED_ROADS"),ps(Vi);const Hi=On.text.programConfigurations.get(u.id),js=f.getOrCreateProgram("symbol",{config:Hi,defines:Vi});let Uo,As=[0,0],Fi=null;const Ya=On.textSizeData;On.iconsInText&&(As=un.imageAtlasTexture?un.imageAtlasTexture.size:[0,0],Fi=un.imageAtlasTexture?un.imageAtlasTexture:null,Uo=Vt||!Qe.isOrthographic||f.options.rotating||f.options.zooming||Ya.kind==="composite"||Ya.kind==="camera"?rt.LINEAR:rt.NEAREST);const Ra=un.glyphAtlasTexture?un.glyphAtlasTexture.size:[0,0],hl=u.layout.get("text-size-scale-range"),Ql=r.ay(f.scaleFactor,hl[0],hl[1]),Al=r.bH(Ya,Qe.zoom,Ql),Pa=ol(Zn,un.tileID.canonical,Vt,pt,Qe,On.getProjection(),mr),nd=Pd(Zn,un.tileID.canonical,Vt,pt,Qe,On.getProjection(),mr),eu=f.translatePosMatrix(nd,un,B,K,!0),rd=f.translatePosMatrix(Zn,un,B,K),up=$s?Yu:Pa,s_=pt&&!Vt&&!ms;let Zh=_n;!cn&&!Qe.mercatorFromTransition||pt||(Zh=Gf(Qe));const o_=Hf(Ya.kind,Al,s_,Vt,f,rd,up,eu,lt,!0,Ra,As,0,zn,tr,Kt,Hr,er?Zh:_n,On.getProjection(),as,ti,null,null,Ql),cp=un.glyphAtlasTexture?un.glyphAtlasTexture:null,Bm=rt.LINEAR,Vm=u.paint.get("text-halo-width").constantOr(1)!==0,bu=f.terrain&&Vt&&ms?r.bi(r.bz(),Pa):Yu;if(ms&&On.text){const Xh=Qe.elevation,Yd=Xh?Xh.getAtTileOffsetFunc(zn,Qe.center.lat,Qe.worldSize,On.getProjection()):null,id=Rd(Zn,un.tileID.canonical,Vt,pt,Qe,On.getProjection(),mr);$u(On,Zn,f,!0,id,nd,Vt,Ee,Yd,zn)}return{program:js,buffers:On.text,uniformValues:o_,atlasTexture:cp,atlasTextureIcon:Fi,atlasInterpolation:Bm,atlasInterpolationIcon:Uo,isSDF:!0,hasHalo:Vm,depthMode:Ss,tile:un,renderWithShadows:ws,labelPlaneMatrixInv:bu}},Ws=On.icon.segments.get().length,Kr=On.text.segments.get().length,ii=Ws&&!T.onlyText?Yi():null,bi=Kr&&!T.onlyIcons?Xi():null,xs=u.paint.get("icon-opacity").constantOr(1),lo=u.paint.get("text-opacity").constantOr(1);if(nn&&On.canOverlap){sn=!0;const ms=xs&&!T.onlyText?On.icon.segments.get():[],Vi=lo&&!T.onlyIcons?On.text.segments.get():[];for(const $s of ms)qt.push({segments:new r.bd([$s]),sortKey:$s.sortKey,state:ii});for(const $s of Vi)qt.push({segments:new r.bd([$s]),sortKey:$s.sortKey,state:bi})}else T.onlyText||qt.push({segments:xs?On.icon.segments:new r.bd([]),sortKey:0,state:ii}),T.onlyIcons||qt.push({segments:lo?On.text.segments:new r.bd([]),sortKey:0,state:bi})}sn&&qt.sort((zn,un)=>zn.sortKey-un.sortKey);for(const zn of qt){const un=zn.state;if(un)if(f.terrain?f.terrain.setupElevationDraw(un.tile,un.program,{useDepthForOcclusion:Qe.depthOcclusionForSymbolsAndCircles,labelPlaneMatrixInv:un.labelPlaneMatrixInv}):f.setupDepthForOcclusion(Qe.depthOcclusionForSymbolsAndCircles,un.program),ot.activeTexture.set(rt.TEXTURE0),un.atlasTexture&&un.atlasTexture.bind(un.atlasInterpolation,rt.CLAMP_TO_EDGE,!0),un.atlasTextureIcon&&(ot.activeTexture.set(rt.TEXTURE1),un.atlasTextureIcon&&un.atlasTextureIcon.bind(un.atlasInterpolationIcon,rt.CLAMP_TO_EDGE,!0)),un.renderWithShadows&&f.shadowRenderer.setupShadows(un.tile.tileID.toUnwrapped(),un.program,"vector-tile",un.tile.tileID.overscaledZ),f.uploadCommonLightUniforms(f.context,un.program),un.hasHalo){const On=un.uniformValues;On.u_is_halo=1,Nh(un.buffers,zn.segments,u,f,un.program,un.depthMode,x,S,On,2),On.u_is_halo=0}else{if(un.isSDF){const On=un.uniformValues;un.hasHalo&&(On.u_is_halo=1,Nh(un.buffers,zn.segments,u,f,un.program,un.depthMode,x,S,On,1)),On.u_is_halo=0}Nh(un.buffers,zn.segments,u,f,un.program,un.depthMode,x,S,un.uniformValues,1)}}}function Nh(f,i,u,p,x,S,T,O,B,j){const K=[f.dynamicLayoutVertexBuffer,f.opacityVertexBuffer,f.iconTransitioningVertexBuffer,f.globeExtVertexBuffer,f.zOffsetVertexBuffer,f.orientationVertexBuffer];x.draw(p,p.context.gl.TRIANGLES,S,T,O,Pr.disabled,B,u.id,f.layoutVertexBuffer,f.indexBuffer,i,u.paint,p.transform.zoom,f.programConfigurations.get(u.id),K,j)}function xm(f,i){const u=1<<f.canonical.z,p=(i.x*u-f.canonical.x-f.wrap*u)*r.aj,x=(i.y*u-f.canonical.y)*r.aj,S=r.dS(i.z,i.y);return r.cS(p,x,S)}function z0(f,i,u,p,x){if(!u.layout||u.layout.get("fill-elevation-reference")==="none")return;const S=f.context.gl,T=new Jn(f.context.gl.LEQUAL,Jn.ReadWrite,f.depthRangeFor3D),O=new Jn(f.context.gl.GREATER,Jn.ReadWrite,f.depthRangeFor3D),B=function(oe){const Ce=r.cJ(oe.pitch);let _e=.01;return oe.isOrthographic&&(_e=r.ai(1e-4,_e,r.cN(Ce>=bo?1:Ce/bo))),2*_e}(f.transform),j=f.transform.getFreeCameraOptions().position,K="elevatedStructuresDepthReconstruct",te=f.getOrCreateProgram(K,{defines:["DEPTH_RECONSTRUCTION"]}),Q=f.getOrCreateProgram(K);for(const oe of p){const Ce=i.getTile(oe),_e=Ce.getBucket(u);if(!_e)continue;const Ee=_e.elevatedStructures;if(!Ee)continue;const Me=_e.elevationBufferData.heightRange,ze=xm(oe.toUnwrapped(),j),qe=f.translatePosMatrix(oe.projMatrix,Ce,u.paint.get("fill-translate"),u.paint.get("fill-translate-anchor"));let Je,lt,ot,rt;if(x==="initialize"){if(!Me||Me.min>=1||Ee.depthSegments.segments[0].primitiveLength===0)continue;Je=_m(qe,ze,B,1,0),lt=T,ot=Ee.depthSegments,rt=te}else if(x==="reset"){if(!Me||Me.min>=0||Ee.maskSegments.segments[0].primitiveLength===0)continue;Je=_m(qe,ze,0,0,1),lt=O,ot=Ee.maskSegments,rt=te}else if(x==="geometry"){if(Ee.depthSegments.segments[0].primitiveLength===0)continue;Je=_m(qe,ze,B,1,0),lt=T,ot=Ee.depthSegments,rt=Q}rt.draw(f,S.TRIANGLES,lt,Vr.disabled,ai.disabled,Pr.disabled,Je,u.id,Ee.vertexBuffer,Ee.indexBuffer,ot,u.paint,f.transform.zoom)}}function N0(f,i,u){const{painter:p,sourceCache:x,layer:S,coords:T,colorMode:O,elevationType:B,terrainEnabled:j,pass:K}=f,te=p.context.gl,Q=S.paint.get("fill-pattern"),oe=S.paint.get("fill-pattern-cross-fade"),Ce=Q.constantOr(null);let _e=B;B!=="road"||i&&!j||(_e="none");const Ee=_e==="road",Me=f.painter.shadowRenderer,ze=Ee&&!!Me&&Me.enabled,qe=new Jn(p.context.gl.LEQUAL,Jn.ReadOnly,p.depthRangeFor3D);let Je=[0,0,0];if(ze){const rt=p.style.directionalLight,Qe=p.style.ambientLight;rt&&Qe&&(Je=Wu(p.style,rt,Qe))}const lt=Q&&Q.constantOr(1),ot=(rt,Qe)=>{let ut,pt,zt,Vt,nn;Qe?(ut=lt&&!S.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",zt=te.LINES):(ut=lt?"fillPattern":"fill",zt=te.TRIANGLES);for(const sn of T){const wn=x.getTile(sn);if(lt&&!wn.patternsLoaded())continue;const Pt=wn.getBucket(S);if(!Pt)continue;const Kt=i?Pt.elevationBufferData:Pt.bufferData;if(Kt.isEmpty())continue;p.prepareDrawTile();const kt=Kt.programConfigurations.get(S.id),cn=p.isTileAffectedByFog(sn),qt=[],_n=[];Ee&&(qt.push("ELEVATED_ROADS"),_n.push(Kt.elevatedLayoutVertexBuffer)),ze&&qt.push("RENDER_SHADOWS","DEPTH_TEXTURE","NORMAL_OFFSET"),lt&&(p.context.activeTexture.set(te.TEXTURE0),wn.imageAtlasTexture&&wn.imageAtlasTexture.bind(te.LINEAR,te.CLAMP_TO_EDGE),kt.updatePaintBuffers());let zn=!1;if(Ce&&wn.imageAtlas){const Zn=wn.imageAtlas,mr=r.dN.from(Ce),yr=mr.getPrimary().scaleSelf(r.q.devicePixelRatio).toString(),kr=mr.getSecondary(),Hr=Zn.patternPositions.get(yr),ti=kr?Zn.patternPositions.get(kr.scaleSelf(r.q.devicePixelRatio).toString()):null;zn=!!Hr&&!!ti,Hr&&kt.setConstantPatternPositions(Hr,ti)}oe>0&&(zn||kt.getPatternTransitionVertexBuffer("fill-pattern"))&&qt.push("FILL_PATTERN_TRANSITION");const un=p.getOrCreateProgram(ut,{config:kt,overrideFog:cn,defines:qt}),On=p.translatePosMatrix(sn.projMatrix,wn,S.paint.get("fill-translate"),S.paint.get("fill-translate-anchor"));ze&&Me.setupShadows(wn.tileID.toUnwrapped(),un,"vector-tile",wn.tileID.overscaledZ);const er=S.paint.get("fill-emissive-strength");if(Qe){Vt=Kt.lineIndexBuffer,nn=Kt.lineSegments;const Zn=p.terrain&&p.terrain.renderingToTexture?p.terrain.drapeBufferSize:[te.drawingBufferWidth,te.drawingBufferHeight];pt=ut==="fillOutlinePattern"&&lt?nw(On,er,p,wn,Zn,Je,oe):tw(On,er,Zn,Je)}else Vt=Kt.indexBuffer,nn=Kt.triangleSegments,pt=lt?My(On,er,p,wn,Je,oe):$d(On,er,Je);p.uploadCommonUniforms(p.context,un,sn.toUnwrapped());let tr=rt;(B==="road"&&!j||B==="offset")&&(tr=qe),un.draw(p,zt,tr,u||p.stencilModeForClipping(sn),O,Pr.disabled,pt,S.id,Kt.layoutVertexBuffer,Vt,nn,S.paint,p.transform.zoom,kt,_n)}};p.renderPass===K&&ot(p.depthModeForSublayer(1,p.renderPass==="opaque"?Jn.ReadWrite:Jn.ReadOnly),!1),_e==="none"&&p.renderPass==="translucent"&&S.paint.get("fill-antialias")&&ot(p.depthModeForSublayer(S.getPaintProperty("fill-outline-color")?2:0,Jn.ReadOnly),!0)}function Zu(f,i,u,p,x,S,T,O){u.resetLayerRenderingStats(f);const B=f.context,j=B.gl,K=f.transform,te=u.paint.get("fill-extrusion-pattern"),Q=u.paint.get("fill-extrusion-pattern-cross-fade"),oe=te.constantOr(null),Ce=te.constantOr(1),_e=u.paint.get("fill-extrusion-opacity"),Ee=f.style.enable3dLights(),Me=u.paint.get(Ee&&!Ce?"fill-extrusion-ambient-occlusion-wall-radius":"fill-extrusion-ambient-occlusion-radius"),ze=[u.paint.get("fill-extrusion-ambient-occlusion-intensity"),Me],qe=u.layout.get("fill-extrusion-edge-radius"),Je=qe>0&&!u.paint.get("fill-extrusion-rounded-roof"),lt=Je?0:qe,ot=K.projection.name==="globe"?r.dV():0,rt=K.projection.name==="globe",Qe=rt?r.ah(K.zoom):0,ut=[r.aD(K.center.lng),r.aH(K.center.lat)],pt=u.paint.get("fill-extrusion-flood-light-color-use-theme").constantOr("default")==="none",zt=u.paint.get("fill-extrusion-flood-light-color").toNonPremultipliedRenderColor(pt?null:u.lut).toArray01().slice(0,3),Vt=u.paint.get("fill-extrusion-flood-light-intensity"),nn=u.paint.get("fill-extrusion-vertical-scale"),sn=u.paint.get("fill-extrusion-line-width").constantOr(1)!==0,wn=u.paint.get("fill-extrusion-height-alignment"),Pt=u.paint.get("fill-extrusion-base-alignment"),Kt=Tl(f,u.paint.get("fill-extrusion-cutoff-fade-range")),kt=[];let cn;rt&&kt.push("PROJECTION_GLOBE_VIEW"),ze[0]>0&&kt.push("FAUX_AO"),Je&&kt.push("ZERO_ROOF_RADIUS"),O&&kt.push("HAS_CENTROID"),Vt>0&&kt.push("FLOOD_LIGHT"),Kt.shouldRenderCutoff&&kt.push("RENDER_CUTOFF"),sn&&kt.push("RENDER_WALL_MODE");const qt=f.renderPass==="shadow",_n=f.shadowRenderer,zn=qt&&!!_n,un=qt?Pr.disabled:Pr.backCCW;f.shadowRenderer&&(f.shadowRenderer.useNormalOffset=!0);let On=[0,0,0];if(_n){const Zn=f.style.directionalLight,mr=f.style.ambientLight;Zn&&mr&&(On=Wu(f.style,Zn,mr)),qt||(kt.push("RENDER_SHADOWS","DEPTH_TEXTURE"),_n.useNormalOffset&&kt.push("NORMAL_OFFSET")),cn=kt.concat(["SHADOWS_SINGLE_CASCADE"])}const er=zn?"fillExtrusionDepth":Ce?"fillExtrusionPattern":"fillExtrusion",tr=u.getLayerRenderingStats();for(const Zn of p){const mr=i.getTile(Zn),yr=mr.getBucket(u);if(!yr||yr.projection.name!==K.projection.name)continue;let kr=!1;_n&&(kr=_n.getMaxCascadeForTile(Zn.toUnwrapped())===0);const Hr=f.isTileAffectedByFog(Zn),ti=yr.programConfigurations.get(u.id);let ji=!1;if(oe&&mr.imageAtlas){const bi=mr.imageAtlas,xs=r.dN.from(oe),lo=xs.getPrimary().scaleSelf(r.q.devicePixelRatio).toString(),ms=xs.getSecondary(),Vi=bi.patternPositions.get(lo),$s=ms?bi.patternPositions.get(ms.scaleSelf(r.q.devicePixelRatio).toString()):null;ji=!!Vi&&!!$s,Vi&&ti.setConstantPatternPositions(Vi,$s)}Q>0&&(ji||ti.getPatternTransitionVertexBuffer("fill-extrusion-pattern"))&&kt.push("FILL_EXTRUSION_PATTERN_TRANSITION");const ps=f.getOrCreateProgram(er,{config:ti,defines:kr?cn:kt,overrideFog:Hr});if(f.terrain&&f.terrain.setupElevationDraw(mr,ps,{useMeterToDem:!0}),!yr.centroidVertexBuffer){const bi=ps.attributes.a_centroid_pos;bi!==void 0&&j.vertexAttrib2f(bi,0,0)}!qt&&_n&&_n.setupShadows(mr.tileID.toUnwrapped(),ps,"vector-tile",mr.tileID.overscaledZ),Ce&&(f.context.activeTexture.set(j.TEXTURE0),mr.imageAtlasTexture&&mr.imageAtlasTexture.bind(j.LINEAR,j.CLAMP_TO_EDGE),ti.updatePaintBuffers());const Yi=u.paint.get("fill-extrusion-vertical-gradient"),Xi=1/yr.tileToMeter;let Ws;if(qt&&_n){if(Yc(mr.tileID,yr,f))continue;const bi=_n.calculateShadowPassMatrixFromTile(mr.tileID.toUnwrapped());Ws=Iy(bi,lt,Xi,nn,wn,Pt)}else{const bi=f.translatePosMatrix(Zn.expandedProjMatrix,mr,u.paint.get("fill-extrusion-translate"),u.paint.get("fill-extrusion-translate-anchor")),xs=K.projection.createInversionMatrix(K,Zn.canonical);Ws=Ce?ky(bi,f,Yi,_e,ze,lt,Xi,Zn,mr,ot,wn,Pt,Qe,ut,xs,zt,nn,Q):$f(bi,f,Yi,_e,ze,lt,Xi,Zn,ot,wn,Pt,Qe,ut,xs,zt,nn,Vt,On)}f.uploadCommonUniforms(B,ps,Zn.toUnwrapped(),null,Kt);let Kr=yr.segments;if(K.projection.name==="mercator"&&!qt&&(Kr=yr.getVisibleSegments(mr.tileID,f.terrain,f.transform.getFrustum(0)),!Kr.get().length))continue;if(tr)if(qt)for(const bi of Kr.get())tr.numRenderedVerticesInShadowPass+=bi.primitiveLength;else for(const bi of Kr.get())tr.numRenderedVerticesInTransparentPass+=bi.primitiveLength;const ii=[];(f.terrain||O)&&ii.push(yr.centroidVertexBuffer),rt&&ii.push(yr.layoutVertexExtBuffer),sn&&ii.push(yr.wallVertexBuffer),ps.draw(f,B.gl.TRIANGLES,x,S,T,un,Ws,u.id,yr.layoutVertexBuffer,yr.indexBuffer,Kr,u.paint,f.transform.zoom,ti,ii)}f.shadowRenderer&&(f.shadowRenderer.useNormalOffset=!1)}function Xu(f,i,u,p,x,S,T,O,B,j,K,te,Q,oe,Ce,_e,Ee,Me,ze){const qe=f.context,Je=qe.gl,lt=f.transform,ot=f.transform.zoom,rt=[],Qe=Tl(f,u.paint.get("fill-extrusion-cutoff-fade-range"));j==="clear"?(rt.push("CLEAR_SUBPASS"),ze&&(rt.push("CLEAR_FROM_TEXTURE"),qe.activeTexture.set(Je.TEXTURE0),ze.bind(Je.LINEAR,Je.CLAMP_TO_EDGE))):j==="sdf"&&rt.push("SDF_SUBPASS"),Ee&&rt.push("HAS_CENTROID"),Qe.shouldRenderCutoff&&rt.push("RENDER_CUTOFF");const ut=u.layout.get("fill-extrusion-edge-radius"),pt=(zt,Vt,nn,sn,wn)=>{const Pt=Vt.programConfigurations.get(u.id),Kt=f.isTileAffectedByFog(zt),kt=f.getOrCreateProgram("fillExtrusionGroundEffect",{config:Pt,defines:rt,overrideFog:Kt}),cn=((_n,zn,un,On,er,tr,Zn,mr,yr,kr,Hr)=>({u_matrix:zn,u_opacity:un,u_ao_pass:On?1:0,u_meter_to_tile:er,u_ao:tr,u_flood_light_intensity:Zn,u_flood_light_color:mr,u_attenuation:yr,u_edge_radius:kr,u_fb:0,u_fb_size:Hr,u_dynamic_offset:1}))(0,sn,K,B,wn,[te,Q*wn],oe,Ce,_e,ot>=17?0:ut*wn,ze?ze.size[0]:0),qt=[];Ee&&qt.push(Vt.hiddenByLandmarkVertexBuffer),f.uploadCommonUniforms(qe,kt,zt.toUnwrapped(),null,Qe),kt.draw(f,qe.gl.TRIANGLES,x,S,T,O,cn,u.id,Vt.vertexBuffer,Vt.indexBuffer,nn,u.paint,ot,Pt,qt)};for(const zt of p){const Vt=i.getTile(zt),nn=Vt.getBucket(u);if(!nn||nn.projection.name!==lt.projection.name||!nn.groundEffect||nn.groundEffect&&!nn.groundEffect.hasData())continue;const sn=nn.groundEffect,wn=1/nn.tileToMeter;{const Pt=f.translatePosMatrix(zt.projMatrix,Vt,u.paint.get("fill-extrusion-translate"),u.paint.get("fill-extrusion-translate-anchor")),Kt=sn.getDefaultSegment();pt(zt,sn,Kt,Pt,wn)}if(Me)for(let Pt=0;Pt<4;Pt++){const Kt=r.dT[Pt](zt),kt=i.getTile(Kt);if(!kt)continue;const cn=kt.getBucket(u);if(!cn||cn.projection.name!==lt.projection.name||!cn.groundEffect||cn.groundEffect&&!cn.groundEffect.hasData())continue;const qt=cn.groundEffect;let _n,zn;Pt===0?(_n=[-8192,0,0],zn=1):Pt===1?(_n=[r.aj,0,0],zn=0):Pt===2?(_n=[0,-8192,0],zn=3):(_n=[0,r.aj,0],zn=2);const un=qt.regionSegments[zn];if(!un)continue;const On=new Float32Array(16);r.bo(On,zt.projMatrix,_n),pt(zt,qt,un,f.translatePosMatrix(On,Vt,u.paint.get("fill-extrusion-translate"),u.paint.get("fill-extrusion-translate-anchor")),wn)}}}function Qn(f,i,u,p,x,S,T){p.centroidVertexArray.length===0&&p.createCentroidsBuffer();const O=S?S.findDEMTileFor(u):null;if(!(O&&O.dem||T))return;S&&O&&O.dem&&p.selfDEMTileTimestamp!==O.dem._timestamp&&(p.borderDoneWithNeighborZ=[-1,-1,-1,-1],p.selfDEMTileTimestamp=O.dem._timestamp);const B=Me=>new r.P(Math.ceil((Me+r.dX)*r.dY),0),j=Me=>{const ze=i.getSource().minzoom,qe=lt=>{const ot=i.getTileByID(lt);if(ot&&ot.hasData())return ot.getBucket(x)},Je=[0,-1,1];for(const lt of Je){if(Me.overscaledZ+lt<ze)continue;const ot=qe(Me.calculateScaledKey(Me.overscaledZ+lt));if(ot)return ot}},K=[0,0,0],te=(Me,ze)=>(K[0]=Math.min(Me.min.y,ze.min.y),K[1]=Math.max(Me.max.y,ze.max.y),K[2]=r.aj-ze.min.x>Me.max.x?ze.min.x-r.aj:Me.max.x,K),Q=(Me,ze)=>(K[0]=Math.min(Me.min.x,ze.min.x),K[1]=Math.max(Me.max.x,ze.max.x),K[2]=r.aj-ze.min.y>Me.max.y?ze.min.y-r.aj:Me.max.y,K),oe=[(Me,ze)=>te(Me,ze),(Me,ze)=>te(ze,Me),(Me,ze)=>Q(Me,ze),(Me,ze)=>Q(ze,Me)],Ce=(Me,ze,qe,Je,lt,ot,rt)=>{if(!S)return 0;const Qe=[[ot?qe:Me,ot?Me:qe,0],[ot?qe:ze,ot?ze:qe,0]],ut=rt<0?r.aj+rt:rt,pt=[ot?ut:(Me+ze)/2,ot?(Me+ze)/2:ut,0];return qe===0&&rt<0||qe!==0&&rt>0?S.getForTilePoints(lt,[pt],!0,Je):Qe.push(pt),S.getForTilePoints(u,Qe,!0,O),Math.max(Qe[0][2],Qe[1][2],pt[2])/S.exaggeration()};for(let Me=0;Me<4;Me++){const ze=p.borderFeatureIndices[Me];if(ze.length===0)continue;const qe=r.dT[Me](u),Je=j(qe);if(!(Je&&Je instanceof r.dU))continue;const lt=S?S.findDEMTileFor(qe):null;if(!(lt&&lt.dem||T)||(S&&lt&&lt.dem&&p.borderDEMTileTimestamp[Me]!==lt.dem._timestamp&&(p.borderDoneWithNeighborZ[Me]=-1,p.borderDEMTileTimestamp[Me]=lt.dem._timestamp),p.borderDoneWithNeighborZ[Me]===Je.canonical.z))continue;Je.centroidVertexArray.length===0&&Je.createCentroidsBuffer();const ot=(Me<2?1:5)-Me,rt=Je.borderDoneWithNeighborZ[ot]!==p.canonical.z,Qe=Je.borderFeatureIndices[ot];let ut=0;if(p.canonical.z!==Je.canonical.z){for(const pt of ze)p.showCentroid(p.featuresOnBorder[pt]);if(rt)for(const pt of Qe)Je.showCentroid(Je.featuresOnBorder[pt]);p.borderDoneWithNeighborZ[Me]=Je.canonical.z,Je.borderDoneWithNeighborZ[ot]=p.canonical.z}for(const pt of ze){const zt=p.featuresOnBorder[pt],Vt=p.centroidData[zt.centroidDataIndex],nn=zt.borders[Me];let sn;for(;ut<Qe.length;){sn=Je.featuresOnBorder[Qe[ut]];const wn=sn.borders[ot];if(wn[1]>nn[0]+3||wn[0]>nn[0]-3)break;Je.showCentroid(sn),ut++}if(sn&&ut<Qe.length){const wn=ut;let Pt=0;for(;!(sn.borders[ot][0]>nn[1]-3)&&(Pt++,++ut!==Qe.length);)sn=Je.featuresOnBorder[Qe[ut]];sn=Je.featuresOnBorder[Qe[wn]];let Kt=!1;if(Pt>=1){const qt=sn.borders[ot];Math.abs(nn[0]-qt[0])<3&&Math.abs(nn[1]-qt[1])<3&&(Pt=1,Kt=!0,ut=wn+1)}else if(Pt===0){p.showCentroid(zt);continue}const kt=Je.centroidData[sn.centroidDataIndex];T&&Kt&&(((_e=Vt).flags|(Ee=kt).flags)&r.dW?(_e.flags|=r.dW,Ee.flags|=r.dW):(_e.flags&=2147483647,Ee.flags&=2147483647));const cn=zt.intersectsCount()>1||sn.intersectsCount()>1;if(Pt>1)ut=wn,Vt.centroidXY=kt.centroidXY=new r.P(0,0);else if(lt&&lt.dem&&!cn){const qt=oe[Me](Vt,kt),_n=Me%2?r.aj-1:0,zn=Ce(qt[0],Math.min(r.aj-1,qt[1]),_n,lt,qe,Me<2,qt[2]);Vt.centroidXY=kt.centroidXY=B(zn)}else cn?Vt.centroidXY=kt.centroidXY=new r.P(0,0):(Vt.centroidXY=p.encodeBorderCentroid(zt),kt.centroidXY=Je.encodeBorderCentroid(sn));p.writeCentroidToBuffer(Vt),Je.writeCentroidToBuffer(kt)}else p.showCentroid(zt)}p.borderDoneWithNeighborZ[Me]=Je.canonical.z,Je.borderDoneWithNeighborZ[ot]=p.canonical.z}var _e,Ee;(p.needsCentroidUpdate||!p.centroidVertexBuffer&&p.centroidVertexArray.length!==0)&&p.uploadCentroid(f)}const zy=[1,0,0],Ny=[0,1,0],Kc=[0,0,1];function Yc(f,i,u){const p=u.transform,x=u.shadowRenderer;if(!x)return!0;const S=f.toUnwrapped(),T=p.tileSize*x._cascades[u.currentShadowCascade].scale;let O=i.maxHeight;if(p.elevation){const _e=p.elevation.getMinMaxForTile(f);_e&&(O+=_e.max)}const B=[...x.shadowDirection];B[2]=-B[2];const j=x.computeSimplifiedTileShadowVolume(S,O,T,B);if(!j)return!1;const K=[zy,Ny,Kc,B,[B[0],0,B[2]],[0,B[1],B[2]]],te=p.projection.name==="globe",Q=p.scaleZoom(T),oe=r.cn.fromInvProjectionMatrix(p.invProjMatrix,p.worldSize,Q,!te),Ce=x.getCurrentCascadeFrustum();return oe.intersectsPrecise(j.vertices,j.planes,K)===0||Ce.intersectsPrecise(j.vertices,j.planes,K)===0}function Ar(f){return[f[0]*r.dZ,f[1]*r.dZ,f[2]*r.dZ,0]}function Wf(f,i,u,p,x,S,T,O,B){const j=p.getSource(),K=u.globeSharedBuffers;if(!K)return;let te,Q,oe;if(i&&(te=p.getTile(i)),j instanceof r.aP?(Q=j.texture,oe=r.ds(0,0,u.transform)):te&&i&&(Q=te.texture,oe=r.ds(i.canonical.z,i.canonical.x,u.transform)),!Q||!oe)return;f||(oe=r.cE(r.bz(),oe,[1,-1,1]));const Ce=u.context,_e=Ce.gl,Ee=x.paint.get("raster-resampling")==="nearest"?_e.NEAREST:_e.LINEAR,Me=u.colorModeForDrapableLayerRenderPass(S),ze=T.defines;ze.push("GLOBE_POLES");const qe=new Jn(_e.LEQUAL,Jn.ReadWrite,u.depthRangeFor3D),Je=Float32Array.from(u.transform.expandedFarZProjMatrix),lt=Float32Array.from(r.bh(r.dr(new r.cp(0,0,0))));u.terrain&&u.terrain.prepareDrawTile(),Ce.activeTexture.set(_e.TEXTURE0),Q.bind(Ee,_e.CLAMP_TO_EDGE),Ce.activeTexture.set(_e.TEXTURE1),Q.bind(Ee,_e.CLAMP_TO_EDGE),"useMipmap"in Q&&Ce.extTextureFilterAnisotropic&&u.transform.pitch>20&&_e.texParameterf(_e.TEXTURE_2D,Ce.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,Ce.extTextureFilterAnisotropicMax);const[ot,rt,Qe,ut]=i?K.getPoleBuffers(i.canonical.z,!1):K.getPoleBuffers(0,!0),pt=x.paint.get("raster-elevation");let zt;f?(zt=ot,u.renderDefaultNorthPole=pt!==0):(zt=rt,u.renderDefaultSouthPole=pt!==0);const Vt=Ar(T.mix),nn=((wn,Pt,Kt,kt,cn,qt,_n,zn,un,On,er,tr,Zn)=>P0(wn,Pt,Kt,new Float32Array(16),new Float32Array(9),[0,0],kt,[0,0],[0,0,0,0],1,{opacity:1,mix:0},qt,[0,0],zn,2,On,er,tr,1,0,Zn))(Je,lt,oe,r.ah(u.transform.zoom),0,x,0,pt,0,Vt,T.offset,T.range,S),sn=u.getOrCreateProgram("raster",{defines:ze});u.uploadCommonUniforms(Ce,sn,null),sn.draw(u,_e.TRIANGLES,qe,B,Me,O,nn,x.id,zt,Qe,ut)}function lw(f){const i=f._nearZ,u=f.projection.farthestPixelDistance(f),p=u-i,x=.2*f.height,S=i+x;return[i,u,(S-x-i)/p,(S-i)/p]}function uw(f,i,u,p){if(f)return i instanceof hu&&f instanceof fu?i.getTextureDescriptor(f,u,!0):{texture:f.texture,mix:Ar(p.mix),offset:p.offset,buffer:0,tileSize:1}}var F0=r.d_([{name:"a_index",type:"Int16",components:1}]);class Fy{constructor(i,u,p,x){const S={width:p[0],height:p[1],data:null},T=i.gl;this.targetColorTexture=new r.T(i,S,T.RGBA8,{useMipmap:!1}),this.backgroundColorTexture=new r.T(i,S,T.RGBA8,{useMipmap:!1}),this.context=i,this.updateParticleTexture(u,x),this.lastInvalidatedAt=0}updateParticleTexture(i,u){if(this.particleTextureDimension===u.width)return;(this.particleTexture0||this.particleTexture1||this.particleIndexBuffer||this.particleSegment)&&(this.particleTexture0.destroy(),this.particleTexture1.destroy(),this.particleIndexBuffer.destroy(),this.particleSegment.destroy());const p=this.context.gl,x=u.width*u.height;this.particleTexture0=new r.T(this.context,u,p.RGBA8,{premultiply:!1,useMipmap:!1}),this.particleTexture1=new r.T(this.context,u,p.RGBA8,{premultiply:!1,useMipmap:!1});const S=new r.d$;S.reserve(x);for(let T=0;T<x;T++)S.emplaceBack(T);this.particleIndexBuffer=this.context.createVertexBuffer(S,F0.members,!0),this.particleSegment=r.bd.simpleSegment(0,0,this.particleIndexBuffer.length,0),this.particleTextureDimension=u.width}update(i){return!(this.lastInvalidatedAt<i&&(this.lastInvalidatedAt=r.q.now(),1))}destroy(){this.targetColorTexture.destroy(),this.backgroundColorTexture.destroy(),this.particleIndexBuffer.destroy(),this.particleTexture0.destroy(),this.particleTexture1.destroy(),this.particleSegment.destroy()}}function cw(f,i,u){if(!f)return null;const p=i.getTextureDescriptor(f,u,!0);if(!p)return null;let{texture:x,mix:S,offset:T,tileSize:O,buffer:B,format:j}=p;if(!x||!j)return null;let K=!1;return j==="uint32"&&(K=!0,S[3]=0,S=Hd(r.e0,S,[0,u.paint.get("raster-particle-max-speed")]),T=R0(r.e0,T,[0,u.paint.get("raster-particle-max-speed")])),{texture:x,textureOffset:[B/(O+2*B),O/(O+2*B)],tileSize:O,scalarData:K,scale:S,offset:T,defines:["RASTER_ARRAY",{uint8:"DATA_FORMAT_UINT8",uint16:"DATA_FORMAT_UINT16",uint32:"DATA_FORMAT_UINT32"}[j]]}}function By(f){const i=f._nearZ,u=f.projection.farthestPixelDistance(f),p=u-i,x=.2*f.height,S=i+x;return[i,u,(S-x-i)/p,(S-i)/p]}const dw=new r.am(1,0,0,1),hw=new r.am(0,1,0,1),Ka=new r.am(0,0,1,1),B0=new r.am(1,0,1,1),ba=new r.am(0,1,1,1);function Ju(f,i,u,p,x,S){for(let T=0;T<u.length;T++)if(x){const j=new r.am(p.r*.8,p.g*.8,p.b*.8,1);jd(f,i,u[T],p,-1,-1,S),jd(f,i,u[T],p,-1,1,S),jd(f,i,u[T],p,1,1,S),jd(f,i,u[T],p,1,-1,S),jd(f,i,u[T],j,0,0,S)}else jd(f,i,u[T],p,0,0,S)}function jd(f,i,u,p,x,S,T){const O=f.context,B=f.transform,j=O.gl,K=B.projection.name==="globe",te=K?["PROJECTION_GLOBE_VIEW"]:[];let Q=r.bw(u.projMatrix);if(K&&r.ah(B.zoom)>0){const Vt=r.bg(u.canonical,B),nn=r.e1(Vt);Q=r.az(new Float32Array(16),B.globeMatrix,nn),r.az(Q,B.projMatrix,Q)}const oe=r.bz();oe[12]+=2*x/(r.q.devicePixelRatio*B.width),oe[13]+=2*S/(r.q.devicePixelRatio*B.height),r.az(Q,oe,Q);const Ce=f.getOrCreateProgram("debug",{defines:te}),_e=i.getTileByID(u.key);f.terrain&&f.terrain.setupElevationDraw(_e,Ce);const Ee=Jn.disabled,Me=Vr.disabled,ze=f.colorModeForRenderPass(),qe="$debug";O.activeTexture.set(j.TEXTURE0),f.emptyTexture.bind(j.LINEAR,j.CLAMP_TO_EDGE),K?_e._makeGlobeTileDebugBuffers(f.context,B):_e._makeDebugTileBoundsBuffers(f.context,B.projection);const Je=_e._tileDebugBuffer||f.debugBuffer,lt=_e._tileDebugIndexBuffer||f.debugIndexBuffer,ot=_e._tileDebugSegments||f.debugSegments;if(Ce.draw(f,j.LINE_STRIP,Ee,Me,ze,Pr.disabled,vm(Q,p.toPremultipliedRenderColor(null)),qe,Je,lt,ot,null,null,null,[_e._globeTileDebugBorderBuffer]),T){const Vt=_e.latestRawTileData,nn=Math.floor((Vt&&Vt.byteLength||0)/1024);let sn=u.canonical.toString();u.overscaledZ!==u.canonical.z&&(sn+=` => ${u.overscaledZ}`),sn+=` ${_e.state}`,sn+=` ${nn}kb`,function(wn,Pt){wn.initDebugOverlayCanvas();const Kt=wn.debugOverlayCanvas,kt=wn.context.gl,cn=wn.debugOverlayCanvas.getContext("2d");cn.clearRect(0,0,Kt.width,Kt.height),cn.shadowColor="white",cn.shadowBlur=2,cn.lineWidth=1.5,cn.strokeStyle="white",cn.textBaseline="top",cn.font="bold 36px Open Sans, sans-serif",cn.fillText(Pt,5,5),cn.strokeText(Pt,5,5),wn.debugOverlayTexture.update(Kt),wn.debugOverlayTexture.bind(kt.LINEAR,kt.CLAMP_TO_EDGE)}(f,sn)}const rt=i.getTile(u).tileSize,Qe=512/Math.min(rt,512)*(u.overscaledZ/B.zoom)*.5,ut=_e._tileDebugTextBuffer||f.debugBuffer,pt=_e._tileDebugTextIndexBuffer||f.quadTriangleIndexBuffer,zt=_e._tileDebugTextSegments||f.debugSegments;Ce.draw(f,j.TRIANGLES,Ee,Me,ai.alphaBlended,Pr.disabled,vm(Q,r.am.transparent.toPremultipliedRenderColor(null),Qe),qe,ut,pt,zt,null,null,null,[_e._globeTileDebugTextBuffer])}function wm(f,i,u,p){Fh(f,0,i+u/2,f.transform.width,u,p)}function Sm(f,i,u,p){Fh(f,i-u/2,0,u,f.transform.height,p)}function Fh(f,i,u,p,x,S){const T=f.context,O=T.gl;O.enable(O.SCISSOR_TEST),O.scissor(i*r.q.devicePixelRatio,u*r.q.devicePixelRatio,p*r.q.devicePixelRatio,x*r.q.devicePixelRatio),T.clear({color:S}),O.disable(O.SCISSOR_TEST)}const Vy=r.d_([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:Qu}=Vy;function Qi(f,i,u,p){f.emplaceBack(i,u,p)}class Kf{constructor(i){this.vertexArray=new r.e2,this.indices=new r.a_,Qi(this.vertexArray,-1,-1,1),Qi(this.vertexArray,1,-1,1),Qi(this.vertexArray,-1,1,1),Qi(this.vertexArray,1,1,1),Qi(this.vertexArray,-1,-1,-1),Qi(this.vertexArray,1,-1,-1),Qi(this.vertexArray,-1,1,-1),Qi(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=i.createVertexBuffer(this.vertexArray,Qu),this.indexBuffer=i.createIndexBuffer(this.indices),this.segment=r.bd.simpleSegment(0,0,36,12)}}function Zc(f,i,u,p,x,S){const T=f.context.gl,O=i.paint.get("sky-atmosphere-color"),B=i.paint.get("sky-atmosphere-halo-color"),j=i.paint.get("sky-atmosphere-sun-intensity"),K=((te,Q,oe,Ce,_e)=>({u_matrix_3f:te,u_sun_direction:Q,u_sun_intensity:oe,u_color_tint_r:[Ce.r,Ce.g,Ce.b,Ce.a],u_color_tint_m:[_e.r,_e.g,_e.b,_e.a],u_luminance:5e-5}))(r.e4(r.dx(),p),x,j,O.toPremultipliedRenderColor(null),B.toPremultipliedRenderColor(null));T.framebufferTexture2D(T.FRAMEBUFFER,T.COLOR_ATTACHMENT0,T.TEXTURE_CUBE_MAP_POSITIVE_X+S,i.skyboxTexture,0),u.draw(f,T.TRIANGLES,Jn.disabled,Vr.disabled,ai.unblended,Pr.frontCW,K,"skyboxCapture",i.skyboxGeometry.vertexBuffer,i.skyboxGeometry.indexBuffer,i.skyboxGeometry.segment)}const $y=r.d_([{type:"Float32",name:"a_pos",components:3},{type:"Float32",name:"a_uv",components:2}]);class Hy{constructor(i){const u=new r.e5;u.emplaceBack(-1,1,1,0,0),u.emplaceBack(1,1,1,1,0),u.emplaceBack(1,-1,1,1,1),u.emplaceBack(-1,-1,1,0,1);const p=new r.a_;p.emplaceBack(0,1,2),p.emplaceBack(2,3,0),this.vertexBuffer=i.createVertexBuffer(u,$y.members),this.indexBuffer=i.createIndexBuffer(p),this.segments=r.bd.simpleSegment(0,0,4,2)}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy()}}const Uy=r.d_([{type:"Float32",name:"a_pos_3f",components:3},{type:"Float32",name:"a_uv",components:2},{type:"Float32",name:"a_size_scale",components:1},{type:"Float32",name:"a_fade_opacity",components:1}]);class fw{constructor(){this.starsCount=16e3,this.sizeMultiplier=.15,this.sizeRange=100,this.intensityRange=200}}class Bh{constructor(i){this.colorModeAlphaBlendedWriteRGB=new ai([1,Gu,1,Gu],r.am.transparent,[!0,!0,!0,!1]),this.colorModeWriteAlpha=new ai([1,0,1,0],r.am.transparent,[!1,!1,!1,!0]),this.params=new fw,this.updateNeeded=!0,i.tp.registerParameter(this.params,["Stars"],"starsCount",{min:100,max:16e3,step:1},()=>{this.updateNeeded=!0}),i.tp.registerParameter(this.params,["Stars"],"sizeMultiplier",{min:.01,max:2,step:.01}),i.tp.registerParameter(this.params,["Stars"],"sizeRange",{min:0,max:200,step:1},()=>{this.updateNeeded=!0}),i.tp.registerParameter(this.params,["Stars"],"intensityRange",{min:0,max:200,step:1},()=>{this.updateNeeded=!0})}update(i){const u=i.context;if(!this.atmosphereBuffer||this.updateNeeded){this.updateNeeded=!1,this.atmosphereBuffer=new Hy(u);const p=this.params.sizeRange,x=this.params.intensityRange,S=function(K){const te=r.e7(30),Q=[];for(let oe=0;oe<K;++oe){const Ce=2*Math.PI*te(),_e=Math.acos(1-2*te())-.5*Math.PI;Q.push(r.cS(Math.cos(_e)*Math.cos(Ce),Math.cos(_e)*Math.sin(Ce),Math.sin(_e)))}return Q}(this.params.starsCount),T=r.e7(300),O=new r.e6,B=new r.a_;let j=0;for(let K=0;K<S.length;++K){const te=r.bY([],S[K],200),Q=Math.max(0,1+.01*p*(1*T()-.5)),oe=Math.max(0,1+.01*x*(1*T()-.5));O.emplaceBack(te[0],te[1],te[2],-1,-1,Q,oe),O.emplaceBack(te[0],te[1],te[2],1,-1,Q,oe),O.emplaceBack(te[0],te[1],te[2],1,1,Q,oe),O.emplaceBack(te[0],te[1],te[2],-1,1,Q,oe),B.emplaceBack(j+0,j+1,j+2),B.emplaceBack(j+0,j+2,j+3),j+=4}this.starsVx=u.createVertexBuffer(O,Uy.members),this.starsIdx=u.createIndexBuffer(B),this.starsSegments=r.bd.simpleSegment(0,0,O.length,B.length)}}destroy(){this.atmosphereBuffer&&this.atmosphereBuffer.destroy(),this.starsVx&&this.starsVx.destroy(),this.starsIdx&&this.starsIdx.destroy()}drawAtmosphereGlow(i,u){const p=i.context,x=p.gl,S=i.transform,T=new Jn(x.LEQUAL,Jn.ReadOnly,[0,1]),O=r.ah(S.zoom),B=i.style.getLut(u.scope),j=u.properties.get("color-use-theme")==="none",K=u.properties.get("color").toNonPremultipliedRenderColor(j?null:B).toArray01(),te=u.properties.get("high-color-use-theme")==="none",Q=u.properties.get("high-color").toNonPremultipliedRenderColor(te?null:B).toArray01(),oe=u.properties.get("space-color-use-theme")==="none",Ce=u.properties.get("space-color").toNonPremultipliedRenderColor(oe?null:B).toArray01(),_e=5e-4,Ee=r.e8(u.properties.get("horizon-blend"),0,1,_e,.25),Me=r.dl(i,p,S)&&Ee===_e?S.worldSize/(2*Math.PI*1.025)-1:S.globeRadius,ze=i.frameCounter/1e3%1,qe=r.ae(S.globeCenterInViewSpace),Je=Math.sqrt(Math.pow(qe,2)-Math.pow(Me,2)),lt=Math.acos(Je/qe),ot=rt=>{const Qe=S.projection.name==="globe"?["PROJECTION_GLOBE_VIEW","FOG"]:["FOG"];rt&&Qe.push("ALPHA_PASS");const ut=i.getOrCreateProgram("globeAtmosphere",{defines:Qe}),pt=((Vt,nn,sn,wn,Pt,Kt,kt,cn,qt,_n,zn,un)=>({u_frustum_tl:Vt,u_frustum_tr:nn,u_frustum_br:sn,u_frustum_bl:wn,u_horizon:Pt,u_transition:Kt,u_fadeout_range:kt,u_color:cn,u_high_color:qt,u_space_color:_n,u_temporal_offset:zn,u_horizon_angle:un}))(S.frustumCorners.TL,S.frustumCorners.TR,S.frustumCorners.BR,S.frustumCorners.BL,S.frustumCorners.horizon,O,Ee,K,Q,Ce,ze,lt);i.uploadCommonUniforms(p,ut);const zt=this.atmosphereBuffer;zt&&ut.draw(i,x.TRIANGLES,T,Vr.disabled,rt?this.colorModeWriteAlpha:this.colorModeAlphaBlendedWriteRGB,Pr.backCW,pt,rt?"atmosphere_glow_alpha":"atmosphere_glow",zt.vertexBuffer,zt.indexBuffer,zt.segments)};ot(!1),ot(!0)}drawStars(i,u){const p=r.ay(u.properties.get("star-intensity"),0,1);if(p===0)return;const x=i.context,S=x.gl,T=i.transform,O=i.getOrCreateProgram("stars"),B=r.b_([]);r.c0(B,B,-T._pitch),r.b$(B,B,-T.angle),r.c0(B,B,r.al(T._center.lat)),r.e9(B,B,-r.al(T._center.lng));const j=r.c3(new Float32Array(16),B),K=r.az([],T.starsProjMatrix,j),te=r.e4([],j),Q=r.ea([],te),oe=[0,1,0];r.dz(oe,oe,Q),r.bY(oe,oe,this.params.sizeMultiplier);const Ce=[1,0,0];r.dz(Ce,Ce,Q),r.bY(Ce,Ce,this.params.sizeMultiplier);const _e=(Ee=oe,Me=Ce,ze=p,{u_matrix:Float32Array.from(K),u_up:Ee,u_right:Me,u_intensity_multiplier:ze});var Ee,Me,ze;i.uploadCommonUniforms(x,O),this.starsVx&&this.starsIdx&&O.draw(i,S.TRIANGLES,Jn.disabled,Vr.disabled,this.colorModeAlphaBlendedWriteRGB,Pr.disabled,_e,"atmosphere_stars",this.starsVx,this.starsIdx,this.starsSegments)}}function Gd(f,i){const u=[...f],p=i.cameraWorldSizeForFog/i.worldSize,x=r.bx([]);return r.cE(x,x,[p,p,1]),r.az(u,x,u),r.az(u,i.worldToFogMatrix,u),u}function Mn(f,i,u,p,x){const S=u.material,T=p.context,{baseColorTexture:O,metallicRoughnessTexture:B}=S.pbrMetallicRoughness,{normalTexture:j,occlusionTexture:K,emissionTexture:te}=S;function Q(Ce,_e,Ee){if(Ce&&(f.push(_e),T.activeTexture.set(T.gl.TEXTURE0+Ee),Ce.gfxTexture)){const{minFilter:Me,magFilter:ze,wrapS:qe,wrapT:Je}=Ce.sampler;Ce.gfxTexture.bindExtraParam(Me,ze,qe,Je)}}Q(O,"HAS_TEXTURE_u_baseColorTexture",Yo.BaseColor),Q(B,"HAS_TEXTURE_u_metallicRoughnessTexture",Yo.MetallicRoughness),Q(j,"HAS_TEXTURE_u_normalTexture",Yo.Normal),Q(K,"HAS_TEXTURE_u_occlusionTexture",Yo.Occlusion),Q(te,"HAS_TEXTURE_u_emissionTexture",Yo.Emission),x&&(x.texture||(x.texture=new r.eh(p.context,x.image,[x.image.height,x.image.height,x.image.height],T.gl.RGBA8)),T.activeTexture.set(T.gl.TEXTURE0+Yo.LUT),x.texture&&x.texture.bind(T.gl.LINEAR,T.gl.CLAMP_TO_EDGE),f.push("APPLY_LUT_ON_GPU")),u.texcoordBuffer&&(f.push("HAS_ATTRIBUTE_a_uv_2f"),i.push(u.texcoordBuffer)),u.colorBuffer&&(f.push(u.colorBuffer.itemSize===12?"HAS_ATTRIBUTE_a_color_3f":"HAS_ATTRIBUTE_a_color_4f"),i.push(u.colorBuffer)),u.normalBuffer&&(f.push("HAS_ATTRIBUTE_a_normal_3f"),i.push(u.normalBuffer)),u.pbrBuffer&&(f.push("HAS_ATTRIBUTE_a_pbr"),f.push("HAS_ATTRIBUTE_a_heightBasedEmissiveStrength"),i.push(u.pbrBuffer)),S.alphaMode!=="OPAQUE"&&S.alphaMode!=="MASK"||f.push("UNPREMULT_TEXTURE_IN_SHADER"),S.defined||f.push("DIFFUSE_SHADED");const oe=p.shadowRenderer;oe&&(f.push("RENDER_SHADOWS","DEPTH_TEXTURE"),oe.useNormalOffset&&f.push("NORMAL_OFFSET"))}function Yn(f,i,u,p,x,S){const T=u.paint.get("model-opacity").constantOr(1),O=i.context,B=new Jn(i.context.gl.LEQUAL,Jn.ReadWrite,i.depthRangeFor3D),j=i.transform,K=f.mesh,te=K.material,Q=te.pbrMetallicRoughness,oe=i.style.fog;let Ce;Ce=i.transform.projection.zAxisUnit==="pixels"?[...f.nodeModelMatrix]:r.az([],p.zScaleMatrix,f.nodeModelMatrix),r.az(Ce,p.negCameraPosMatrix,Ce);const _e=r.bi([],Ce);r.ee(_e,_e);const Ee=u.paint.get("model-color-use-theme").constantOr("default")==="none",Me=u.paint.get("model-emissive-strength").constantOr(0),ze=jf(new Float32Array(f.worldViewProjection),new Float32Array(Ce),new Float32Array(_e),null,i,T,Q.baseColorFactor,te.emissiveFactor,Q.metallicFactor,Q.roughnessFactor,te,Me,u),qe={defines:[]},Je=[],lt=i.shadowRenderer;lt&&(lt.useNormalOffset=!1),Mn(qe.defines,Je,K,i,Ee?null:u.lut);let ot=null;if(oe){const ut=Gd(f.nodeModelMatrix,i.transform);if(ot=new Float32Array(ut),j.projection.name!=="globe"){const pt=K.aabb.min,zt=K.aabb.max,[Vt,nn]=oe.getOpacityForBounds(ut,pt[0],pt[1],zt[0],zt[1]);qe.overrideFog=Vt>=Ft||nn>=Ft}}const rt=Tl(i,u.paint.get("model-cutoff-fade-range"));rt.shouldRenderCutoff&&qe.defines.push("RENDER_CUTOFF");const Qe=i.getOrCreateProgram("model",qe);i.uploadCommonUniforms(O,Qe,null,ot,rt),i.renderPass!=="shadow"&&lt&&lt.setupShadowsFromMatrix(f.nodeModelMatrix,Qe),Qe.draw(i,O.gl.TRIANGLES,B,x,S,K.material.doubleSided?Pr.disabled:Pr.backCCW,ze,u.id,K.vertexBuffer,K.indexBuffer,K.segments,u.paint,i.transform.zoom,void 0,Je)}function qd(f,i,u,p,x,S,T){let O;O=f.projection.name==="globe"?r.ed(u,f):[...u],r.az(O,O,i.matrix);const B=r.az([],p,O);if(i.meshes)for(const j of i.meshes){if(j.material.alphaMode!=="BLEND"){T.push({mesh:j,depth:0,modelIndex:x,worldViewProjection:B,nodeModelMatrix:O});continue}const K=r.ad([],j.centroid,B);!f.isOrthographic&&K[2]<=0||S.push({mesh:j,depth:K[2],modelIndex:x,worldViewProjection:B,nodeModelMatrix:O})}if(i.children)for(const j of i.children)qd(f,j,u,p,x,S,T)}function Vs(f,i,u,p){const x=u.shadowRenderer;if(!x)return;const S=x.getShadowPassDepthMode(),T=x.getShadowPassColorMode(),O=x.calculateShadowPassMatrixFromMatrix(i),B=Ly(O);u.getOrCreateProgram("modelDepth",{defines:u._shadowMapDebug?[]:["DEPTH_TEXTURE"]}).draw(u,u.context.gl.TRIANGLES,S,Vr.disabled,T,Pr.backCCW,B,p.id,f.vertexBuffer,f.indexBuffer,f.segments,p.paint,u.transform.zoom,void 0,void 0)}function Dt(f,i,u){const p=i.updateZoomBasedPaintProperties(),x=function(S,T,O){let B,j,K,te=S.terrain?S.terrain.exaggeration():0;if(S.terrain&&te>0){const Q=S.terrain,oe=Q.findDEMTileFor(O);oe&&oe.dem?B=r.ei.create(Q,O,oe):te=0}if(te===0&&(T.terrainElevationMin=0,T.terrainElevationMax=0),te===T.validForExaggeration&&(te===0||B&&B._demTile&&B._demTile.tileID===T.validForDEMTile.id&&B._dem._timestamp===T.validForDEMTile.timestamp))return!1;for(const Q in T.instancesPerModel){const oe=T.instancesPerModel[Q];for(let Ce=0;Ce<oe.instancedDataArray.length;++Ce){const _e=(B?te*B.getElevationAt(0|oe.instancedDataArray.float32[16*Ce],0|oe.instancedDataArray.float32[16*Ce+1],!0,!0):0)+oe.instancesEvaluatedElevation[Ce];oe.instancedDataArray.float32[16*Ce+6]=_e,j=j?Math.min(T.terrainElevationMin,_e):_e,K=K?Math.max(T.terrainElevationMax,_e):_e}}return T.terrainElevationMin=j||0,T.terrainElevationMax=K||0,T.validForExaggeration=te,T.validForDEMTile=B&&B._demTile?{id:B._demTile.tileID,timestamp:B._dem._timestamp}:{id:void 0,timestamp:0},!0}(f,i,u);(p||x)&&(i.uploaded=!1,i.upload(f.context))}const Xl={shadowUniformsInitialized:!1,useSingleShadowCascade:!1,tileMatrix:new Float64Array(16),shadowTileMatrix:new Float32Array(16),aabb:new r.cW([0,0,0],[r.aj,r.aj,0])};function Cm(f,i){const u=1<<f.canonical.z,p=i.getFreeCameraOptions().position,x=i.elevation,S=f.canonical.x/u,T=(f.canonical.x+1)/u,O=f.canonical.y/u,B=(f.canonical.y+1)/u;let j=i._centerAltitude;if(x){const oe=x.getMinMaxForTile(f);oe&&oe.max>j&&(j=oe.max)}const K=r.ay(p.x,S,T)-p.x,te=r.ay(p.y,O,B)-p.y,Q=r.c6(j,i.center.lat)-p.z;return i._zoomFromMercatorZ(Math.sqrt(K*K+te*te+Q*Q))}function Em(f,i,u,p,x,S,T){const O=f.context,B=f.renderPass==="shadow",j=f.shadowRenderer,K=B&&j?j.getShadowPassDepthMode():new Jn(O.gl.LEQUAL,Jn.ReadWrite,f.depthRangeFor3D),te=f.isTileAffectedByFog(S);if(u.meshes)for(const Q of u.meshes){const oe=["MODEL_POSITION_ON_GPU"],Ce=[];let _e,Ee,Me;p.instancedDataArray.length>20&&oe.push("INSTANCED_ARRAYS");const ze=Tl(f,i.paint.get("model-cutoff-fade-range"));if(ze.shouldRenderCutoff&&oe.push("RENDER_CUTOFF"),B&&j)_e=f.getOrCreateProgram("modelDepth",{defines:oe}),Ee=Ly(T.shadowTileMatrix,T.shadowTileMatrix,Float32Array.from(u.matrix)),Me=j.getShadowPassColorMode();else{Mn(oe,Ce,Q,f,i.paint.get("model-color-use-theme").constantOr("default")==="none"?null:i.lut),_e=f.getOrCreateProgram("model",{defines:oe,overrideFog:te});const Je=Q.material,lt=Je.pbrMetallicRoughness,ot=i.paint.get("model-opacity").constantOr(1),rt=i.paint.get("model-emissive-strength").constantOr(0);Ee=jf(S.expandedProjMatrix,Float32Array.from(u.matrix),new Float32Array(16),null,f,ot,lt.baseColorFactor,Je.emissiveFactor,lt.metallicFactor,lt.roughnessFactor,Je,rt,i,x),j&&(T.shadowUniformsInitialized?_e.setShadowUniformValues(O,j.getShadowUniformValues()):(j.setupShadows(S.toUnwrapped(),_e,"model-tile",S.overscaledZ),T.shadowUniformsInitialized=!0)),Me=ze.shouldRenderCutoff||ot<1||Je.alphaMode!=="OPAQUE"?ai.alphaBlended:ai.unblended}f.uploadCommonUniforms(O,_e,S.toUnwrapped(),null,ze);const qe=Q.material.doubleSided?Pr.disabled:Pr.backCCW;if(p.instancedDataArray.length>20)Ce.push(p.instancedDataBuffer),_e.draw(f,O.gl.TRIANGLES,K,Vr.disabled,Me,qe,Ee,i.id,Q.vertexBuffer,Q.indexBuffer,Q.segments,i.paint,f.transform.zoom,void 0,Ce,p.instancedDataArray.length);else{const Je=B?"u_instance":"u_normal_matrix";for(let lt=0;lt<p.instancedDataArray.length;++lt)Ee[Je]=new Float32Array(p.instancedDataArray.arrayBuffer,64*lt,16),_e.draw(f,O.gl.TRIANGLES,K,Vr.disabled,Me,qe,Ee,i.id,Q.vertexBuffer,Q.indexBuffer,Q.segments,i.paint,f.transform.zoom,void 0,Ce)}}if(u.children)for(const Q of u.children)Em(f,i,Q,p,x,S,T)}const V0=[1,-1,1];function jy(f,i,u,p){if(!u.modelManager)return!0;const x=u.modelManager;if(!u.shadowRenderer)return!0;const S=u.shadowRenderer,T=i.aabb;let O=!0,B=f.maxHeight;if(B===0){let K=0;for(const te in f.instancesPerModel){const Q=x.getModel(te,p);Q?K=Math.max(K,Math.max(Math.max(Q.aabb.max[0],Q.aabb.max[1]),Q.aabb.max[2])):O=!1}B=f.maxScale*K*1.41+f.maxVerticalOffset,O&&(f.maxHeight=B)}T.max[2]=B,T.min[2]+=f.terrainElevationMin,T.max[2]+=f.terrainElevationMax,r.ad(T.min,T.min,i.tileMatrix),r.ad(T.max,T.max,i.tileMatrix);const j=T.intersects(S.getCurrentCascadeFrustum());return u.currentShadowCascade===0&&(f.isInsideFirstShadowMapFrustum=j===2),j===0}function Gy(f,i){const u=f.uniformValues.u_cutoff_params[0],p=f.uniformValues.u_cutoff_params[1],x=f.uniformValues.u_cutoff_params[2],S=f.uniformValues.u_cutoff_params[3];return p===u||S===x?1:r.ay(((i-u)/(p-u)-x)/(S-x),0,1)}function Vh(f,i,u,p){if(i.pitch<20)return 1;const x=i.getWorldToCameraMatrix();r.az(x,x,f);const S=r.ej(u.min[0],u.min[1],u.min[2],1);let T=r.aA(r.ek(),S,x),O=T,B=T;S[1]=u.max[1],T=r.aA(r.ek(),S,x),O=T[1]<O[1]?T:O,B=T[1]>B[1]?T:B,S[0]=u.max[0],T=r.aA(r.ek(),S,x),O=T[1]<O[1]?T:O,B=T[1]>B[1]?T:B,S[1]=u.min[1],T=r.aA(r.ek(),S,x),O=T[1]<O[1]?T:O,B=T[1]>B[1]?T:B;const j=r.ay(p[0],0,1),K=100*i.pixelsPerMeter*r.ay(p[1],0,1),te=r.ay(p[2],0,1),Q=r.el(r.ek(),O,B,j),oe=Math.tan(.5*i.fovX),Ce=-Q[2]*oe;if(K===0)return Q[1]<-Math.abs(Ce)?te:1;const _e=(-Math.abs(Ce)-Q[1])/K,Ee=(ze,qe,Je)=>(1-Je)*ze+Je*qe,Me=r.ay(Ee(1,te,_e),te,1);return Ee(1,Me,r.ay((i.pitch-20)/20,0,1))}class pw{}class mw{constructor(){this._storage=new Map}getLinesFromTrianglesBuffer(i,u,p){{const te=this._storage.get(u.id);if(te)return te.lastUsedFrameIdx=i,te.buf}const x=p.gl,S=x.getBufferParameter(x.ELEMENT_ARRAY_BUFFER,x.BUFFER_SIZE),T=new ArrayBuffer(S),O=new Int16Array(T);x.getBufferSubData(x.ELEMENT_ARRAY_BUFFER,0,new Int16Array(T));const B=new r.en;for(let te=0;te<S/2;te+=3){const Q=O[te],oe=O[te+1],Ce=O[te+2];B.emplaceBack(Q,oe),B.emplaceBack(oe,Ce),B.emplaceBack(Ce,Q)}const j=p.bindVertexArrayOES.current,K=new pw;return K.buf=new kl(p,B),K.lastUsedFrameIdx=i,this._storage.set(u.id,K),p.bindVertexArrayOES.set(j),K.buf}update(i){for(const[u,p]of this._storage)i-p.lastUsedFrameIdx>30&&(p.buf.destroy(),this._storage.delete(u))}destroy(){for(const[i,u]of this._storage)u.buf.destroy(),this._storage.delete(i)}}class qy{constructor(i){this.occluderSize=30,this.depthOffset=-1e-4,i.registerParameter(this,["Occlusion"],"occluderSize",{min:1,max:100,step:1}),i.registerParameter(this,["Occlusion"],"depthOffset",{min:-.05,max:0,step:1e-5})}}const Tm=r.d_([{type:"Float32",name:"a_pos_3f",components:3},{type:"Float32",name:"a_uv",components:2},{type:"Float32",name:"a_rainParticleData",components:4}]);class $0{registerParameter(){}registerButton(){}registerBinding(){}refreshUI(){}}class H0{constructor(i,u){this.revealStart=11,this.revealRange=2,i.registerParameter(this,[...u,"Reveal"],"revealStart",{min:0,max:17,step:.05}),i.registerParameter(this,[...u,"Reveal"],"revealRange",{min:.1,max:5.1,step:.05})}}const Wy=r.d_([{type:"Float32",name:"a_pos_2f",components:2}]);class Im{destroy(){this.vignetteVx&&this.vignetteVx.destroy(),this.vignetteIdx&&this.vignetteIdx.destroy()}draw(i,u){const p=i.getOrCreateProgram("vignette");if(!this.vignetteVx||!this.vignetteIdx){const T=new r.eo,O=new r.a_;T.emplaceBack(-1,-1),T.emplaceBack(1,-1),T.emplaceBack(1,1),T.emplaceBack(-1,1),O.emplaceBack(0,1,2),O.emplaceBack(0,2,3),this.vignetteVx=i.context.createVertexBuffer(T,Wy.members),this.vignetteIdx=i.context.createIndexBuffer(O)}const x=r.bd.simpleSegment(0,0,4,6);if(this.vignetteVx&&this.vignetteIdx){i.uploadCommonUniforms(i.context,p);const T={u_vignetteShape:(S={vignetteShape:[u.start,u.range,Math.pow(10,u.fadePower)],vignetteColor:[u.color.r,u.color.g,u.color.b,u.color.a*u.strength]}).vignetteShape,u_vignetteColor:S.vignetteColor};p.draw(i,i.context.gl.TRIANGLES,Jn.disabled,Vr.disabled,ai.alphaBlended,Pr.disabled,T,"vignette",this.vignetteVx,this.vignetteIdx,x)}var S}}class Yf{constructor(){this._accumulatedOffsetX=0,this._accumulatedOffsetY=0,this._accumulatedElevation=0}update(i,u){const p=i.getFreeCameraOptions().position,x=p.toAltitude(),S=p.toLngLat(),T=r.al(S.lng),O=r.al(S.lat),B=i.pixelsPerMeter/u,j=T*r.eq,K=r.eq*Math.log(Math.tan(Math.PI/4+O/2));if(this._offsetXPrev===void 0)this._offsetXPrev=0,this._offsetYPrev=0,this._elevationPrev=0,this._accumulatedOffsetX=0,this._accumulatedOffsetY=0,this._accumulatedElevation=0;else{const te=-this._offsetYPrev+K,Q=-this._elevationPrev+x;this._accumulatedOffsetX+=(-this._offsetXPrev+j)*B,this._accumulatedOffsetY+=te*B,this._accumulatedElevation+=Q*B,this._offsetXPrev=j,this._offsetYPrev=K,this._elevationPrev=x}}getPosition(){return[this._accumulatedOffsetX,this._accumulatedOffsetY,this._accumulatedElevation]}}function Wd(f,i){return[-(f[0]-Math.floor(f[0]/i)*i),-(f[1]-Math.floor(f[1]/i)*i),-(f[2]-Math.floor(f[2]/i)*i)]}function U0(f){const i=r.e7(1323123451230),u=[];for(let p=0;p<f;++p){const x=2*i()-1,S=2*i()-1,T=2*i()-1;u.push(r.cS(x,S,T))}return u}function Xc(f,i,u,p,x){const S=r.ay((x-u)/(p-u),0,1);return(1-S)*f+S*i}class oa{constructor(i){this._movement=new Yf,this._accumulatedTimeFromStart=0,this._prevTime=Date.now()/1e3,this._vignette=new Im,this._ppmScaleFactor=i}destroy(){this.particlesVx&&this.particlesVx.destroy(),this.particlesIdx&&this.particlesIdx.destroy(),this._vignette&&this._vignette.destroy()}updateOnRender(i,u){const p=i.transform;this._movement.update(p,this._ppmScaleFactor);const x=p.starsProjMatrix,S=r.b_([]);r.c0(S,S,r.al(90)-p._pitch),r.b$(S,S,-p.angle);const T=r.c3(new Float32Array(16),S),O=r.ep(1,0,0,0,0,0,1,0,0,-1,0,0,0,0,0,1),B=r.ee([],O),j=r.az([],B,T),K=Date.now()/1e3;return this._accumulatedTimeFromStart+=(K-this._prevTime)*u,this._prevTime=K,{projectionMatrix:x,modelviewMatrix:j}}}class gw extends oa{constructor(i){super(4.25),this._params={overrideStyleParameters:!1,intensity:.5,timeFactor:1,velocityConeAperture:0,velocity:300,boxSize:2500,dropletSizeX:1,dropletSizeYScale:10,distortionStrength:70,screenThinning:{intensity:.57,start:.46,range:1.17,fadePower:.17,affectedRatio:1,particleOffset:-.2},color:{r:.66,g:.68,b:.74,a:.7},direction:{x:-50,y:-35},shapeDirPower:2,shapeNormalPower:1},this._revealParams=new H0(i.tp,["Precipitation","Rain"]),this._vignetteParams={strength:1,start:.7,range:1,fadePower:.4,color:{r:.27,g:.27,b:.27,a:1}},this.particlesCount=16e3}update(i){const u=i.context;if(!this.particlesVx){const p=U0(this.particlesCount),x=new r.er,S=new r.a_;let T=0;const O=r.e7(1323123451230);for(let B=0;B<p.length;++B){const j=p[B],K=[2*O()-1,O(),O(),O()];x.emplaceBack(j[0],j[1],j[2],-1,-1,...K),x.emplaceBack(j[0],j[1],j[2],1,-1,...K),x.emplaceBack(j[0],j[1],j[2],1,1,...K),x.emplaceBack(j[0],j[1],j[2],-1,1,...K),S.emplaceBack(T+0,T+1,T+2),S.emplaceBack(T+0,T+2,T+3),T+=4}this.particlesVx=u.createVertexBuffer(x,Tm.members),this.particlesIdx=u.createIndexBuffer(S)}}draw(i){if(!this._params.overrideStyleParameters&&!i.style.rain)return;const u=this._params.overrideStyleParameters?this._revealParams:{revealStart:0,revealRange:.01},p=i.transform.zoom;if(u.revealStart>p)return;const x=Xc(0,1,u.revealStart,u.revealStart+u.revealRange,p);if(!this.particlesVx||!this.particlesIdx)return;const S=structuredClone(this._params);let T=[-S.direction.x,S.direction.y,-100];r.au(T,T);const O=structuredClone(this._vignetteParams);O.strength*=x,S.overrideStyleParameters||(S.intensity=i.style.rain.state.density,S.timeFactor=i.style.rain.state.intensity,S.color=structuredClone(i.style.rain.state.color),T=structuredClone(i.style.rain.state.direction),S.screenThinning.intensity=i.style.rain.state.centerThinning,S.dropletSizeX=i.style.rain.state.dropletSize[0],S.dropletSizeYScale=i.style.rain.state.dropletSize[1]/i.style.rain.state.dropletSize[0],S.distortionStrength=100*i.style.rain.state.distortionStrength,O.strength=1,O.color=structuredClone(i.style.rain.state.vignetteColor));const B=this.updateOnRender(i,S.timeFactor),j=i.context,K=j.gl,te=i.transform;this.screenTexture&&this.screenTexture.size[0]===i.width&&this.screenTexture.size[1]===i.height||(this.screenTexture=new r.T(j,{width:i.width,height:i.height,data:null},K.RGBA8)),S.distortionStrength>0&&(j.activeTexture.set(K.TEXTURE0),this.screenTexture.bind(K.LINEAR,K.CLAMP_TO_EDGE),K.copyTexSubImage2D(K.TEXTURE_2D,0,0,0,0,0,i.width,i.height));const Q=i.getOrCreateProgram("rainParticle");i.uploadCommonUniforms(j,Q),j.activeTexture.set(K.TEXTURE0),this.screenTexture.bind(K.LINEAR,K.CLAMP_TO_EDGE);const oe=[S.color.r,S.color.g,S.color.b,S.color.a],Ce=(_e,Ee)=>{const Me=Wd(this._movement.getPosition(),_e),ze=S.dropletSizeX,qe=S.dropletSizeX*S.dropletSizeYScale,Je=i.width/2,lt=i.height/2,ot=Xc(0,S.screenThinning.start,0,1,S.screenThinning.intensity),rt=Xc(.001,S.screenThinning.range,0,1,S.screenThinning.intensity),Qe=Xc(0,S.screenThinning.particleOffset,0,1,S.screenThinning.intensity),ut=(pt={modelview:B.modelviewMatrix,projection:B.projectionMatrix,time:this._accumulatedTimeFromStart,camPos:Me,velocityConeAperture:S.velocityConeAperture,velocity:S.velocity,boxSize:_e,rainDropletSize:[ze,qe],distortionStrength:S.distortionStrength,rainDirection:T,color:oe,screenSize:[te.width,te.height],thinningCenterPos:[Je,lt],thinningShape:[ot,rt,Math.pow(10,S.screenThinning.fadePower)],thinningAffectedRatio:S.screenThinning.affectedRatio,thinningParticleOffset:Qe,shapeDirectionalPower:S.shapeDirPower,shapeNormalPower:S.shapeNormalPower,mode:Ee?0:1},{u_modelview:Float32Array.from(pt.modelview),u_projection:Float32Array.from(pt.projection),u_time:pt.time,u_cam_pos:pt.camPos,u_texScreen:0,u_velocityConeAperture:pt.velocityConeAperture,u_velocity:pt.velocity,u_boxSize:pt.boxSize,u_rainDropletSize:pt.rainDropletSize,u_distortionStrength:pt.distortionStrength,u_rainDirection:pt.rainDirection,u_color:pt.color,u_screenSize:pt.screenSize,u_thinningCenterPos:pt.thinningCenterPos,u_thinningShape:pt.thinningShape,u_thinningAffectedRatio:pt.thinningAffectedRatio,u_thinningParticleOffset:pt.thinningParticleOffset,u_shapeDirectionalPower:pt.shapeDirectionalPower,u_shapeNormalPower:pt.shapeNormalPower,u_mode:pt.mode});var pt;const zt=Math.round(S.intensity*this.particlesCount),Vt=r.bd.simpleSegment(0,0,4*zt,2*zt);Q.draw(i,K.TRIANGLES,Jn.disabled,Vr.disabled,ai.alphaBlended,Pr.disabled,ut,"rain_particles",this.particlesVx,this.particlesIdx,Vt)};S.distortionStrength>0&&Ce(S.boxSize,!0),Ce(S.boxSize,!1),this._vignette.draw(i,O)}}const Zf=r.d_([{type:"Float32",name:"a_pos_3f",components:3},{type:"Float32",name:"a_uv",components:2},{type:"Float32",name:"a_snowParticleData",components:4},{type:"Float32",name:"a_snowParticleDataHorizontalOscillation",components:2}]);class Ms extends oa{constructor(i){super(2.25),this._params={overrideStyleParameters:!1,intensity:.85,timeFactor:.75,velocityConeAperture:70,velocity:40,horizontalOscillationRadius:4,horizontalOscillationRate:1.5,boxSize:2e3,billboardSize:2,shapeFadeStart:.27,shapeFadePower:.21,screenThinning:{intensity:.4,start:.15,range:1.4,fadePower:.24,affectedRatio:1,particleOffset:-.2},color:{r:1,g:1,b:1,a:1},direction:{x:-50,y:-35}},this._revealParams=new H0(i.tp,["Precipitation","Snow"]),this._vignetteParams={strength:.3,start:.78,range:.46,fadePower:.2,color:{r:1,g:1,b:1,a:1}},this.particlesCount=16e3}update(i){const u=i.context;if(!this.particlesVx){const p=U0(this.particlesCount),x=new r.es,S=new r.a_;let T=0;const O=r.e7(1323123451230);for(let B=0;B<p.length;++B){const j=p[B],K=O(),te=O(),Q=O(),oe=[B/p.length,K,te,Q],Ce=[O(),O()];x.emplaceBack(j[0],j[1],j[2],-1,-1,...oe,...Ce),x.emplaceBack(j[0],j[1],j[2],1,-1,...oe,...Ce),x.emplaceBack(j[0],j[1],j[2],1,1,...oe,...Ce),x.emplaceBack(j[0],j[1],j[2],-1,1,...oe,...Ce),S.emplaceBack(T+0,T+1,T+2),S.emplaceBack(T+0,T+2,T+3),T+=4}this.particlesVx=u.createVertexBuffer(x,Zf.members),this.particlesIdx=u.createIndexBuffer(S)}}draw(i){if(!this._params.overrideStyleParameters&&!i.style.snow)return;const u=structuredClone(this._params);let p=[-u.direction.x,u.direction.y,-100];r.au(p,p);const x=structuredClone(this._vignetteParams),S=u.overrideStyleParameters?this._revealParams:{revealStart:0,revealRange:.01},T=i.transform.zoom;if(S.revealStart>T)return;const O=Xc(0,1,S.revealStart,S.revealStart+S.revealRange,T);x.strength*=O,u.overrideStyleParameters||(u.intensity=i.style.snow.state.density,u.timeFactor=i.style.snow.state.intensity,u.color=structuredClone(i.style.snow.state.color),p=structuredClone(i.style.snow.state.direction),u.screenThinning.intensity=i.style.snow.state.centerThinning,u.billboardSize=2.79*i.style.snow.state.flakeSize,x.strength=1,x.color=structuredClone(i.style.snow.state.vignetteColor));const B=this.updateOnRender(i,u.timeFactor);if(!this.particlesVx||!this.particlesIdx)return;const j=i.context,K=j.gl,te=i.transform,Q=i.getOrCreateProgram("snowParticle");i.uploadCommonUniforms(j,Q),((oe,Ce,_e)=>{const Ee=Wd(this._movement.getPosition(),oe),Me=te.width/2,ze=te.height/2,qe=Xc(0,_e.screenThinning.start,0,1,_e.screenThinning.intensity),Je=Xc(.001,_e.screenThinning.range,0,1,_e.screenThinning.intensity),lt=Xc(0,_e.screenThinning.particleOffset,0,1,_e.screenThinning.intensity),ot=(rt={modelview:B.modelviewMatrix,projection:B.projectionMatrix,time:this._accumulatedTimeFromStart,camPos:Ee,velocityConeAperture:_e.velocityConeAperture,velocity:_e.velocity,horizontalOscillationRadius:_e.horizontalOscillationRadius,horizontalOscillationRate:_e.horizontalOscillationRate,boxSize:oe,billboardSize:1*_e.billboardSize,simpleShapeParameters:[_e.shapeFadeStart,_e.shapeFadePower],screenSize:[te.width,te.height],thinningCenterPos:[Me,ze],thinningShape:[qe,Je,Math.pow(10,_e.screenThinning.fadePower)],thinningAffectedRatio:_e.screenThinning.affectedRatio,thinningParticleOffset:lt,color:[_e.color.r,_e.color.g,_e.color.b,_e.color.a],direction:p},{u_modelview:Float32Array.from(rt.modelview),u_projection:Float32Array.from(rt.projection),u_time:rt.time,u_cam_pos:rt.camPos,u_velocityConeAperture:rt.velocityConeAperture,u_velocity:rt.velocity,u_horizontalOscillationRadius:rt.horizontalOscillationRadius,u_horizontalOscillationRate:rt.horizontalOscillationRate,u_boxSize:rt.boxSize,u_billboardSize:rt.billboardSize,u_simpleShapeParameters:rt.simpleShapeParameters,u_screenSize:rt.screenSize,u_thinningCenterPos:rt.thinningCenterPos,u_thinningShape:rt.thinningShape,u_thinningAffectedRatio:rt.thinningAffectedRatio,u_thinningParticleOffset:rt.thinningParticleOffset,u_particleColor:rt.color,u_direction:rt.direction});var rt;const Qe=Math.round(_e.intensity*this.particlesCount),ut=r.bd.simpleSegment(0,0,4*Qe,2*Qe);this.particlesVx&&this.particlesIdx&&Q.draw(i,K.TRIANGLES,Jn.disabled,Vr.disabled,ai.alphaBlended,Pr.disabled,ot,"snow_particles",this.particlesVx,this.particlesIdx,ut)})(u.boxSize,0,u),this._vignette.draw(i,x)}}const zi={symbol:function(f,i,u,p,x){if(f.renderPass!=="translucent")return;const S=Vr.disabled,T=f.colorModeForRenderPass(),O=u.layout.get("text-variable-anchor"),B=u.layout.get("text-size-scale-range"),j=r.ay(f.scaleFactor,B[0],B[1]);O&&function(Q,oe,Ce,_e,Ee,Me,ze,qe){const Je=oe.transform,lt=Ee==="map",ot=Me==="map";for(const rt of Q){const Qe=_e.getTile(rt),ut=Qe.getBucket(Ce);if(!ut||!ut.text||!ut.text.segments.get().length)continue;const pt=r.bH(ut.textSizeData,Je.zoom,qe),zt=kh(rt,ut.getProjection(),Je),Vt=Je.calculatePixelsToTileUnitsMatrix(Qe),nn=ol(zt,Qe.tileID.canonical,ot,lt,Je,ut.getProjection(),Vt),sn=ut.hasIconTextFit()&&ut.hasIconData();pt&&Dy(ut,lt,ot,ze,Je,nn,rt,Math.pow(2,Je.zoom-Qe.tileID.overscaledZ),pt,sn)}}(p,f,u,i,u.layout.get("text-rotation-alignment"),u.layout.get("text-pitch-alignment"),x,j);const K=u.paint.get("icon-opacity").constantOr(1)!==0,te=u.paint.get("text-opacity").constantOr(1)!==0;u.layout.get("symbol-sort-key").constantOr(1)!==void 0&&(K||te)?zh(f,i,u,p,S,T):(K&&zh(f,i,u,p,S,T,{onlyIcons:!0}),te&&zh(f,i,u,p,S,T,{onlyText:!0})),i.map.showCollisionBoxes&&(bm(f,i,u,p,u.paint.get("text-translate"),u.paint.get("text-translate-anchor"),!0),bm(f,i,u,p,u.paint.get("icon-translate"),u.paint.get("icon-translate-anchor"),!1))},circle:function(f,i,u,p){if(f.renderPass!=="translucent")return;const x=u.paint.get("circle-opacity"),S=u.paint.get("circle-stroke-width"),T=u.paint.get("circle-stroke-opacity"),O=u.layout.get("circle-sort-key").constantOr(1)!==void 0,B=u.paint.get("circle-emissive-strength");if(x.constantOr(1)===0&&(S.constantOr(1)===0||T.constantOr(1)===0))return;const j=f.context,K=j.gl,te=f.transform,Q=!(!f.terrain||!f.terrain.enabled),oe=u.layout.get("circle-elevation-reference"),Ce=f.depthModeForSublayer(0,Jn.ReadOnly),_e=new Jn(f.context.gl.LEQUAL,Jn.ReadOnly,f.depthRangeFor3D),Ee=oe==="none"||Q?Ce:_e,Me=Vr.disabled,ze=f.colorModeForDrapableLayerRenderPass(B),qe=te.projection.name==="globe",Je=[r.aD(te.center.lng),r.aH(te.center.lat)],lt=[];for(let rt=0;rt<p.length;rt++){const Qe=p[rt],ut=i.getTile(Qe),pt=ut.getBucket(u);if(!pt||pt.projection.name!==te.projection.name)continue;const zt=pt.programConfigurations.get(u.id),Vt=pt.layoutVertexBuffer,nn=pt.globeExtVertexBuffer,sn=pt.indexBuffer,wn=r.dK(u),Pt=[nn],Kt=f.isTileAffectedByFog(Qe);qe&&wn.push("PROJECTION_GLOBE_VIEW"),wn.push("DEPTH_D24"),f.terrain&&te.depthOcclusionForSymbolsAndCircles&&wn.push("DEPTH_OCCLUSION"),pt.hasElevation&&(wn.push("ELEVATED_ROADS"),Pt.push(pt.elevatedLayoutVertexBuffer));const kt=f.getOrCreateProgram("circle",{config:zt,defines:wn,overrideFog:Kt}),cn=te.projection.createInversionMatrix(te,Qe.canonical),qt={programConfiguration:zt,program:kt,layoutVertexBuffer:Vt,dynamicBuffers:Pt,indexBuffer:sn,uniformValues:r.dL(f,Qe,ut,cn,Je,u),tile:ut};if(O){const _n=pt.segments.get();for(const zn of _n)lt.push({segments:new r.bd([zn]),sortKey:zn.sortKey,state:qt})}else lt.push({segments:pt.segments,sortKey:0,state:qt})}O&&lt.sort((rt,Qe)=>rt.sortKey-Qe.sortKey);const ot={useDepthForOcclusion:te.depthOcclusionForSymbolsAndCircles};for(const rt of lt){const{programConfiguration:Qe,program:ut,layoutVertexBuffer:pt,dynamicBuffers:zt,indexBuffer:Vt,uniformValues:nn,tile:sn}=rt.state,wn=rt.segments;f.terrain&&f.terrain.setupElevationDraw(sn,ut,ot),f.uploadCommonUniforms(j,ut,sn.tileID.toUnwrapped()),ut.draw(f,K.TRIANGLES,Ee,Me,ze,Pr.disabled,nn,u.id,pt,Vt,wn,u.paint,te.zoom,Qe,zt)}},heatmap:function(f,i,u,p){if(u.paint.get("heatmap-opacity")!==0)if(f.renderPass==="offscreen"){const x=f.context,S=x.gl,T=Vr.disabled,O=new ai([S.ONE,S.ONE,S.ONE,S.ONE],r.am.transparent,[!0,!0,!0,!0]);(function(oe,Ce,_e,Ee){const Me=oe.gl,ze=Ce.width*Ee,qe=Ce.height*Ee;oe.activeTexture.set(Me.TEXTURE1),oe.viewport.set([0,0,ze,qe]);let Je=_e.heatmapFbo;if(!Je||Je&&(Je.width!==ze||Je.height!==qe)){Je&&Je.destroy();const lt=Me.createTexture();Me.bindTexture(Me.TEXTURE_2D,lt),Me.texParameteri(Me.TEXTURE_2D,Me.TEXTURE_WRAP_S,Me.CLAMP_TO_EDGE),Me.texParameteri(Me.TEXTURE_2D,Me.TEXTURE_WRAP_T,Me.CLAMP_TO_EDGE),Me.texParameteri(Me.TEXTURE_2D,Me.TEXTURE_MIN_FILTER,Me.LINEAR),Me.texParameteri(Me.TEXTURE_2D,Me.TEXTURE_MAG_FILTER,Me.LINEAR),Je=_e.heatmapFbo=oe.createFramebuffer(ze,qe,!0,null),function(ot,rt,Qe,ut,pt,zt){const Vt=ot.gl;Vt.texImage2D(Vt.TEXTURE_2D,0,ot.extRenderToTextureHalfFloat?Vt.RGBA16F:Vt.RGBA,pt,zt,0,Vt.RGBA,ot.extRenderToTextureHalfFloat?Vt.HALF_FLOAT:Vt.UNSIGNED_BYTE,null),ut.colorAttachment.set(Qe)}(oe,0,lt,Je,ze,qe)}else Me.bindTexture(Me.TEXTURE_2D,Je.colorAttachment.get()),oe.bindFramebuffer.set(Je.framebuffer)})(x,f,u,f.transform.projection.name==="globe"?.5:.25),x.clear({color:r.am.transparent});const B=f.transform,j=B.projection.name==="globe",K=j?["PROJECTION_GLOBE_VIEW"]:[],te=j?Pr.frontCCW:Pr.disabled,Q=[r.aD(B.center.lng),r.aH(B.center.lat)];for(let oe=0;oe<p.length;oe++){const Ce=p[oe];if(i.hasRenderableParent(Ce))continue;const _e=i.getTile(Ce),Ee=_e.getBucket(u);if(!Ee||Ee.projection.name!==B.projection.name)continue;const Me=f.isTileAffectedByFog(Ce),ze=Ee.programConfigurations.get(u.id),qe=f.getOrCreateProgram("heatmap",{config:ze,defines:K,overrideFog:Me}),{zoom:Je}=f.transform;f.terrain&&f.terrain.setupElevationDraw(_e,qe),f.uploadCommonUniforms(x,qe,Ce.toUnwrapped());const lt=B.projection.createInversionMatrix(B,Ce.canonical);qe.draw(f,S.TRIANGLES,Jn.disabled,T,O,te,Ay(f,Ce,_e,lt,Q,Je,u.paint.get("heatmap-intensity")),u.id,Ee.layoutVertexBuffer,Ee.indexBuffer,Ee.segments,u.paint,f.transform.zoom,ze,j?[Ee.globeExtVertexBuffer]:null)}x.viewport.set([0,0,f.width,f.height])}else f.renderPass==="translucent"&&(f.context.setColorMode(f.colorModeForRenderPass()),function(x,S){const T=x.context,O=T.gl,B=S.heatmapFbo;if(!B)return;T.activeTexture.set(O.TEXTURE0),O.bindTexture(O.TEXTURE_2D,B.colorAttachment.get()),T.activeTexture.set(O.TEXTURE1);let j=S.colorRampTexture;j||(j=S.colorRampTexture=new r.T(T,S.colorRamp,O.RGBA8)),j.bind(O.LINEAR,O.CLAMP_TO_EDGE),x.getOrCreateProgram("heatmapTexture").draw(x,O.TRIANGLES,Jn.disabled,Vr.disabled,x.colorModeForRenderPass(),Pr.disabled,((K,te,Q,oe)=>({u_image:0,u_color_ramp:1,u_opacity:te.paint.get("heatmap-opacity")}))(0,S),S.id,x.viewportBuffer,x.quadTriangleIndexBuffer,x.viewportSegments,S.paint,x.transform.zoom)}(f,u))},line:function(f,i,u,p){if(f.renderPass!=="translucent")return;const x=u.paint.get("line-opacity"),S=u.paint.get("line-width");if(x.constantOr(1)===0||S.constantOr(1)===0)return;const T=u.paint.get("line-emissive-strength"),O=u.paint.get("line-occlusion-opacity"),B=u.layout.get("line-elevation-reference"),j=u.layout.get("line-width-unit")==="meters",K=B==="sea",te=!(!f.terrain||!f.terrain.enabled),Q=f.context,oe=Q.gl;if(u.hasElevatedBuckets&&f.transform.projection.name==="globe")return;const Ce=u.layout.get("line-cross-slope"),_e=Ce!==void 0,Ee=Ce<1,Me=f.colorModeForDrapableLayerRenderPass(T),ze=f.terrain&&f.terrain.renderingToTexture,qe=ze?1:r.q.devicePixelRatio,Je=u.paint.get("line-dasharray"),lt=Je.constantOr(1),ot=u.layout.get("line-cap"),rt=Je.constantOr(null),Qe=ot.constantOr(null),ut=u.paint.get("line-pattern"),pt=ut.constantOr(1),zt=u.paint.get("line-pattern-cross-fade"),Vt=ut.constantOr(null),nn=u.paint.get("line-opacity").constantOr(1);let sn=!pt&&nn!==1||f.depthOcclusion&&O>0&&O<1;const wn=u.paint.get("line-gradient"),Pt=pt?"linePattern":"line",Kt=r.dM(u);let kt;if(ze&&f.terrain&&f.terrain.clipOrMaskOverlapStencilType()&&(sn=!1),O!==0&&f.depthOcclusion){const zn=u.paint._values["line-opacity"];zn&&zn.value&&zn.value.kind==="constant"?kt=zn.value:r.w(`Occlusion opacity for layer ${u.id} is supported only when line-opacity isn't data-driven.`)}S.value.kind!=="constant"&&S.value.isLineProgressConstant===!1&&Kt.push("VARIABLE_LINE_WIDTH");const cn=(zn,un,On,er,tr,Zn)=>{for(const mr of zn){const yr=i.getTile(mr);if(pt&&!yr.patternsLoaded())continue;const kr=yr.getBucket(u);if(!kr||kr.elevationType!=="none"&&!tr||kr.elevationType==="none"&&tr)continue;f.prepareDrawTile();const Hr=[...un],ti=f.shadowRenderer,ji=kr.elevationType==="road"&&!!ti&&ti.enabled;let ps=[0,0,0];if(ji){const Mi=f.style.directionalLight,ro=f.style.ambientLight;Mi&&ro&&(ps=Wu(f.style,Mi,ro)),Hr.push("RENDER_SHADOWS","DEPTH_TEXTURE","NORMAL_OFFSET")}const Yi=kr.programConfigurations.get(u.id);let Xi=!1;if(Vt&&yr.imageAtlas){const Mi=r.dN.from(Vt),ro=Mi.getPrimary().scaleSelf(qe).toString(),ws=yr.imageAtlas.patternPositions.get(ro),as=Mi.getSecondary(),Ss=as?yr.imageAtlas.patternPositions.get(as.scaleSelf(qe).toString()):null;Xi=!!ws&&!!Ss,ws&&Yi.setConstantPatternPositions(ws,Ss)}zt>0&&(Xi||Yi.getPatternTransitionVertexBuffer("line-pattern"))&&Hr.push("LINE_PATTERN_TRANSITION");const Ws=f.isTileAffectedByFog(mr),Kr=f.getOrCreateProgram(Pt,{config:Yi,defines:Hr,overrideFog:Ws,overrideRtt:!tr&&void 0});if(!pt&&rt&&Qe&&yr.lineAtlas){const Mi=yr.lineAtlas.getDash(rt,Qe);Mi&&Yi.setConstantPatternPositions(Mi)}ji&&ti.setupShadows(yr.tileID.toUnwrapped(),Kr,"vector-tile",yr.tileID.overscaledZ);let[ii,bi]=u.paint.get("line-trim-offset");(Qe==="round"||Qe==="square")&&ii!==bi&&(ii===0&&(ii-=1),bi===1&&(bi+=1));const xs=ze?mr.projMatrix:null,lo=j?1/kr.tileToMeter/r.aw(yr,1,f.transform.zoom):1,ms=j?1/kr.tileToMeter/r.aw(yr,1,Math.floor(f.transform.zoom)):1,Vi=pt?r.dO(f,yr,u,xs,qe,lo,ms,[ii,bi],ps,zt):r.dP(f,yr,u,xs,kr.lineClipsArray.length,qe,lo,ms,[ii,bi],ps);if(wn){const Mi=kr.gradients[u.id];let ro=Mi.texture;if(u.gradientVersion!==Mi.version){let ws=256;if(u.stepInterpolant){const as=i.getSource().maxzoom,Ss=mr.canonical.z===as?Math.ceil(1<<f.transform.maxZoom-mr.canonical.z):1;ws=r.ay(r.dQ(kr.maxLineLength/r.aj*1024*Ss),256,Q.maxTextureSize)}Mi.gradient=r.dR({expression:u.gradientExpression(),evaluationKey:"lineProgress",resolution:ws,image:Mi.gradient||void 0,clips:kr.lineClipsArray}),Mi.texture?Mi.texture.update(Mi.gradient):Mi.texture=new r.T(Q,Mi.gradient,oe.RGBA8),Mi.version=u.gradientVersion,ro=Mi.texture}Q.activeTexture.set(oe.TEXTURE1),ro.bind(u.stepInterpolant?oe.NEAREST:oe.LINEAR,oe.CLAMP_TO_EDGE)}lt&&(Q.activeTexture.set(oe.TEXTURE0),yr.lineAtlasTexture&&yr.lineAtlasTexture.bind(oe.LINEAR,oe.REPEAT),Yi.updatePaintBuffers()),pt&&(Q.activeTexture.set(oe.TEXTURE0),yr.imageAtlasTexture&&yr.imageAtlasTexture.bind(oe.LINEAR,oe.CLAMP_TO_EDGE),Yi.updatePaintBuffers()),tr&&!K&&f.terrain.setupElevationDraw(yr,Kr),f.uploadCommonUniforms(Q,Kr,mr.toUnwrapped());const $s=Mi=>{kt!=null&&(kt.value=nn*O),Kr.draw(f,oe.TRIANGLES,On,Mi,Me,Pr.disabled,Vi,u.id,kr.layoutVertexBuffer,kr.indexBuffer,kr.segments,u.paint,f.transform.zoom,Yi,[kr.layoutVertexBuffer2,kr.patternVertexBuffer,kr.zOffsetVertexBuffer]),kt!=null&&(kt.value=nn)};if(sn&&!tr){const Mi=f.stencilModeForClipping(mr).ref;Mi===0&&ze&&Q.clear({stencil:0});const ro={func:oe.EQUAL,mask:255};Vi.u_alpha_discard_threshold=.8,$s(new Vr(ro,Mi,255,oe.KEEP,oe.KEEP,oe.INVERT)),Vi.u_alpha_discard_threshold=0,$s(new Vr(ro,Mi,255,oe.KEEP,oe.KEEP,oe.KEEP))}else Vi.u_alpha_discard_threshold=sn&&tr&&Zn?.8:0,$s(tr?er:f.stencilModeForClipping(mr))}};let qt=f.depthModeForSublayer(0,Jn.ReadOnly);const _n=new Jn(f.depthOcclusion?oe.GREATER:oe.LEQUAL,Jn.ReadOnly,f.depthRangeFor3D);if(u.hasNonElevatedBuckets){const zn=!ze&&f.terrain;O!==0&&zn?r.w(`Occlusion opacity for layer ${u.id} is supported on terrain only if the layer has line-z-offset enabled.`):zn?r.w(`Cannot render non-elevated lines in immediate mode when terrain is enabled. Layer: ${u.id}.`):cn(p,Kt,qt,Vr.disabled,!1,!0)}if(u.hasElevatedBuckets){B==="hd-road-markup"?te||(qt=_n,Kt.push("ELEVATED_ROADS")):(Kt.push("ELEVATED"),qt=_n,_e&&Kt.push(Ee?"CROSS_SLOPE_HORIZONTAL":"CROSS_SLOPE_VERTICAL"),K&&Kt.push("ELEVATION_REFERENCE_SEA"));const zn=sn?f.stencilModeFor3D():Vr.disabled;f.forceTerrainMode=!0,cn(p,Kt,qt,zn,!0,!0),sn&&cn(p,Kt,qt,zn,!0,!1),f.forceTerrainMode=!1}sn&&(f.resetStencilClippingMasks(),ze&&Q.clear({stencil:0})),O===0||f.depthOcclusion||ze||f.layersWithOcclusionOpacity.push(f.currentLayer)},fill:function(f,i,u,p){const x=u.paint.get("fill-color"),S=u.paint.get("fill-opacity");if(S.constantOr(1)===0)return;const T=u.paint.get("fill-emissive-strength"),O=f.colorModeForDrapableLayerRenderPass(T),B=u.paint.get("fill-pattern"),j=f.opaquePassEnabledForLayer()&&!B.constantOr(1)&&x.constantOr(r.am.transparent).a===1&&S.constantOr(0)===1?"opaque":"translucent";let K="none";u.layout.get("fill-elevation-reference")!=="none"?K="road":u.paint.get("fill-z-offset").constantOr(1)!==0&&(K="offset");const te=!(!f.terrain||!f.terrain.enabled),Q={painter:f,sourceCache:i,layer:u,coords:p,colorMode:O,elevationType:K,terrainEnabled:te,pass:j};if(f.renderPass!=="shadow")if(K!=="offset"){if(N0(Q,!1),K==="road"){const oe=!te&&f.renderPass==="translucent";oe&&z0(f,i,u,p,"geometry"),N0(Q,!0,Vr.disabled),oe&&function(Ce){const{painter:_e,sourceCache:Ee,layer:Me,coords:ze,colorMode:qe}=Ce,Je=_e.context.gl,lt=Ce.painter.shadowRenderer,ot=!!lt&&lt.enabled,rt=new Jn(_e.context.gl.LEQUAL,Jn.ReadOnly,_e.depthRangeFor3D);let Qe=[0,0,0];if(ot){const pt=_e.style.directionalLight,zt=_e.style.ambientLight;pt&&zt&&(Qe=Wu(_e.style,pt,zt))}const ut=pt=>{for(const zt of ze){const Vt=Ee.getTile(zt),nn=Vt.getBucket(Me);if(!nn)continue;const sn=nn.elevatedStructures;if(!sn)continue;let wn,Pt;if(pt?(wn=sn.renderableBridgeSegments,Pt=sn.bridgeProgramConfigurations.get(Me.id)):(wn=sn.renderableTunnelSegments,Pt=sn.tunnelProgramConfigurations.get(Me.id)),!wn||wn.segments[0].primitiveLength===0)continue;Pt.updatePaintBuffers(),_e.prepareDrawTile();const Kt=_e.isTileAffectedByFog(zt),kt=[];ot&&kt.push("RENDER_SHADOWS","DEPTH_TEXTURE","NORMAL_OFFSET");const cn=_e.getOrCreateProgram("elevatedStructures",{config:Pt,overrideFog:Kt,defines:kt}),qt=_e.translatePosMatrix(zt.projMatrix,Vt,Me.paint.get("fill-translate"),Me.paint.get("fill-translate-anchor"));ot&&lt.setupShadows(Vt.tileID.toUnwrapped(),cn,"vector-tile",Vt.tileID.overscaledZ);const _n=rw(qt,Qe);_e.uploadCommonUniforms(_e.context,cn,zt.toUnwrapped()),cn.draw(_e,Je.TRIANGLES,rt,Vr.disabled,qe,Pr.backCCW,_n,Me.id,sn.vertexBuffer,sn.indexBuffer,wn,Me.paint,_e.transform.zoom,Pt,[sn.vertexBufferNormal])}};ut(!0),ut(!1)}(Q)}}else N0(Q,!1,f.stencilModeFor3D());else f.shadowRenderer&&K==="road"&&!te&&function(oe){const{painter:Ce,sourceCache:_e,layer:Ee,coords:Me}=oe,ze=Ce.context.gl,qe=oe.painter.shadowRenderer;for(const Je of Me){const lt=_e.getTile(Je),ot=lt.getBucket(Ee);if(!ot)continue;const rt=ot.elevatedStructures;if(!rt||!rt.shadowCasterSegments||rt.shadowCasterSegments.segments[0].primitiveLength===0)continue;Ce.prepareDrawTile();const Qe=ot.bufferData.programConfigurations.get(Ee.id),ut=Ce.isTileAffectedByFog(Je),pt=Ce.getOrCreateProgram("elevatedStructuresDepth",{config:Qe,overrideFog:ut}),zt=qe.calculateShadowPassMatrixFromTile(lt.tileID.toUnwrapped());Ce.uploadCommonUniforms(Ce.context,pt,Je.toUnwrapped());const Vt={u_matrix:zt,u_depth_bias:.001};pt.draw(Ce,ze.TRIANGLES,qe.getShadowPassDepthMode(),Vr.disabled,qe.getShadowPassColorMode(),Pr.disabled,Vt,Ee.id,rt.vertexBuffer,rt.indexBuffer,rt.shadowCasterSegments,Ee.paint,Ce.transform.zoom,Qe)}}(Q)},"fill-extrusion":function(f,i,u,p){const x=u.paint.get("fill-extrusion-opacity"),S=f.context,T=S.gl,O=f.terrain,B=O&&O.renderingToTexture;if(x===0)return;const j=f.conflationActive&&f.style.isLayerClipped(u,i.getSource()),K=f.style.order.indexOf(u.fqid);if(j&&function(te,Q,oe,Ce,_e){for(const Ee of Ce){const Me=Q.getTile(Ee).getBucket(oe);Me&&(Me.updateReplacement(Ee,te.replacementSource,_e),Me.uploadCentroid(te.context))}}(f,i,u,p,K),O||j)for(const te of p){const Q=i.getTile(te).getBucket(u);Q&&Qn(f.context,i,te,Q,u,O,j)}if(f.renderPass==="shadow"&&f.shadowRenderer){const te=f.shadowRenderer;if(O&&x<.65&&u._transitionablePaint._values["fill-extrusion-opacity"].value.expression instanceof r.ab)return;const Q=te.getShadowPassDepthMode(),oe=te.getShadowPassColorMode();Zu(f,i,u,p,Q,Vr.disabled,oe,j)}else if(f.renderPass==="translucent"){const te=!u.paint.get("fill-extrusion-pattern").constantOr(1),Q=u.paint.get("fill-extrusion-color").constantOr(r.am.white);if(!B&&Q.a!==0){const oe=new Jn(f.context.gl.LEQUAL,Jn.ReadWrite,f.depthRangeFor3D);x===1&&te?Zu(f,i,u,p,oe,Vr.disabled,ai.unblended,j):(Zu(f,i,u,p,oe,Vr.disabled,ai.disabled,j),Zu(f,i,u,p,oe,f.stencilModeFor3D(),f.colorModeForRenderPass(),j),f.resetStencilClippingMasks())}if(f.style.enable3dLights()&&te&&(!O&&f.transform.projection.name!=="globe"||B)){const oe=u.paint.get("fill-extrusion-opacity"),Ce=u.paint.get("fill-extrusion-ambient-occlusion-intensity"),_e=u.paint.get("fill-extrusion-ambient-occlusion-ground-radius"),Ee=u.paint.get("fill-extrusion-flood-light-intensity"),Me=u.paint.get("fill-extrusion-flood-light-color-use-theme").constantOr("default")==="none",ze=u.paint.get("fill-extrusion-flood-light-color").toNonPremultipliedRenderColor(Me?null:u.lut).toArray01().slice(0,3),qe=Ce>0&&_e>0,Je=Ee>0,lt=(rt,Qe,ut)=>(1-ut)*rt+ut*Qe,ot=rt=>{const Qe=f.depthModeForSublayer(1,Jn.ReadOnly,T.LEQUAL,!0),ut=u.paint.get(rt?"fill-extrusion-ambient-occlusion-ground-attenuation":"fill-extrusion-flood-light-ground-attenuation"),pt=lt(.1,3,ut),zt=f._showOverdrawInspector;if(!zt){const Vt=new Vr({func:T.ALWAYS,mask:255},255,255,T.KEEP,T.KEEP,T.REPLACE),nn=new ai([T.ONE,T.ONE,T.ONE,T.ONE],r.am.transparent,[!1,!1,!1,!0],T.MIN);Xu(f,i,u,p,Qe,Vt,nn,Pr.disabled,rt,"sdf",oe,Ce,_e,Ee,ze,pt,j,!1)}{const Vt=zt?Vr.disabled:new Vr({func:T.EQUAL,mask:255},255,255,T.KEEP,T.DECR,T.DECR),nn=zt?f.colorModeForRenderPass():new ai([T.ONE_MINUS_DST_ALPHA,T.DST_ALPHA,T.ONE,T.ONE],r.am.transparent,[!0,!0,!0,!0]);Xu(f,i,u,p,Qe,Vt,nn,Pr.disabled,rt,"color",oe,Ce,_e,Ee,ze,pt,j,!1)}};if(B){const rt=(Qe,ut,pt)=>{const zt=f.depthModeForSublayer(1,Jn.ReadOnly,T.LEQUAL,!1),Vt=u.paint.get(Qe?"fill-extrusion-ambient-occlusion-ground-attenuation":"fill-extrusion-flood-light-ground-attenuation"),nn=lt(.1,3,Vt);{const sn=new ai([T.ONE,T.ONE,T.ONE,T.ONE],r.am.transparent,[!1,!1,!1,!0]);Xu(f,i,u,p,zt,Vr.disabled,sn,Pr.disabled,Qe,"clear",oe,Ce,_e,Ee,ze,nn,j,ut)}{const sn=new Vr({func:T.ALWAYS,mask:255},255,255,T.KEEP,T.KEEP,T.REPLACE),wn=new ai([T.ONE,T.ONE,T.ONE,T.ONE],r.am.transparent,[!1,!1,!1,!0],T.MIN);Xu(f,i,u,p,zt,sn,wn,Pr.disabled,Qe,"sdf",oe,Ce,_e,Ee,ze,nn,j,ut)}{const sn=Qe?T.ZERO:T.ONE_MINUS_DST_ALPHA,wn=new Vr({func:T.EQUAL,mask:255},255,255,T.KEEP,T.DECR,T.DECR),Pt=new ai([sn,T.DST_ALPHA,T.ONE_MINUS_DST_ALPHA,T.ZERO],r.am.transparent,[!0,!0,!0,!0]);Xu(f,i,u,p,zt,wn,Pt,Pr.disabled,Qe,"color",oe,Ce,_e,Ee,ze,nn,j,ut)}{const sn=new ai([T.ONE,T.ONE,T.ONE,Qe?T.ZERO:T.ONE],r.am.transparent,[!1,!1,!1,!0],Qe?T.FUNC_ADD:T.MAX);Xu(f,i,u,p,zt,Vr.disabled,sn,Pr.disabled,Qe,"clear",oe,Ce,_e,Ee,ze,nn,j,ut,pt)}};if(qe||Je){let Qe;if(f.prepareDrawTile(),O){const ut=O.drapeBufferSize[0],pt=O.drapeBufferSize[1];Qe=O.framebufferCopyTexture,Qe&&(!Qe||Qe.size[0]===ut&&Qe.size[1]===pt)||(Qe&&Qe.destroy(),Qe=O.framebufferCopyTexture=new r.T(S,new r.r({width:ut,height:pt}),T.RGBA8)),Qe.bind(T.LINEAR,T.CLAMP_TO_EDGE),T.copyTexSubImage2D(T.TEXTURE_2D,0,0,0,0,0,ut,pt)}qe&&rt(!0,!1,Qe),Je&&rt(!1,!0,Qe)}}else qe&&ot(!0),Je&&ot(!1),(qe||Je)&&f.resetStencilClippingMasks()}}},building:function(f,i,u,p){},hillshade:function(f,i,u,p){if(f.renderPass!=="offscreen"&&f.renderPass!=="translucent"||f.style.disableElevatedTerrain)return;const x=f.context,S=f.terrain&&f.terrain.renderingToTexture,[T,O]=f.renderPass!=="translucent"||S?[{},p]:f.stencilConfigForOverlap(p);for(const B of O){const j=i.getTile(B);if(j.needsHillshadePrepare&&f.renderPass==="offscreen")Gx(f,j,u);else if(f.renderPass==="translucent"){const K=f.depthModeForSublayer(0,Jn.ReadOnly),te=u.paint.get("hillshade-emissive-strength"),Q=f.colorModeForDrapableLayerRenderPass(te),oe=S&&f.terrain?f.terrain.stencilModeForRTTOverlap(B):T[B.overscaledZ];jx(f,B,j,u,K,oe,Q)}}x.viewport.set([0,0,f.width,f.height]),f.resetStencilClippingMasks()},raster:function(f,i,u,p,x,S){if(f.renderPass!=="translucent"||u.paint.get("raster-opacity")===0)return;const T=f.transform.projection.name==="globe",O=u.paint.get("raster-elevation")!==0,B=O&&T;if(f.renderElevatedRasterBackface&&!B)return;const j=f.context,K=j.gl,te=i.getSource(),Q=function(ot,rt,Qe,ut){const pt=rt.paint.get("raster-color"),zt=ot.type==="raster-array",Vt=[],nn=rt.paint.get("raster-resampling"),sn=rt.paint.get("raster-color-mix");let wn=rt.paint.get("raster-color-range");const Pt=[sn[0],sn[1],sn[2],0],Kt=sn[3];let kt=nn==="nearest"?ut.NEAREST:ut.LINEAR;if(zt&&(Vt.push("RASTER_ARRAY"),pt||Vt.push("RASTER_COLOR"),nn==="linear"&&Vt.push("RASTER_ARRAY_LINEAR"),kt=ut.NEAREST,!wn&&ot.rasterLayers)){const cn=ot.rasterLayers.find(({id:qt})=>qt===rt.sourceLayer);cn&&cn.fields&&cn.fields.range&&(wn=cn.fields.range)}if(wn=wn||[0,1],pt){Vt.push("RASTER_COLOR"),Qe.activeTexture.set(ut.TEXTURE2),rt.updateColorRamp(wn);let cn=rt.colorRampTexture;cn||(cn=rt.colorRampTexture=new r.T(Qe,rt.colorRamp,ut.RGBA8)),cn.bind(ut.LINEAR,ut.CLAMP_TO_EDGE)}return{mix:Pt,range:wn,offset:Kt,defines:Vt,resampling:kt}}(te,u,j,K);if(te instanceof r.aP&&!p.length&&!T)return;const oe=u.paint.get("raster-emissive-strength"),Ce=f.colorModeForDrapableLayerRenderPass(oe),_e=f.terrain&&f.terrain.renderingToTexture,Ee=!f.options.moving,Me=u.paint.get("raster-resampling")==="nearest"?K.NEAREST:K.LINEAR;if(te instanceof r.aP&&!p.length&&(te.onNorthPole||te.onSouthPole)){const ot=O?f.stencilModeFor3D():Vr.disabled;return void Wf(!!te.onNorthPole,null,f,i,u,oe,Q,Pr.disabled,ot)}if(!p.length)return;const[ze,qe]=te instanceof r.aP||_e?[{},p]:f.stencilConfigForOverlap(p),Je=qe[qe.length-1].overscaledZ;B&&Q.defines.push("PROJECTION_GLOBE_VIEW"),O&&Q.defines.push("RENDER_CUTOFF");const lt=(ot,rt,Qe)=>{for(const ut of ot){const pt=ut.toUnwrapped(),zt=i.getTile(ut);if(_e&&(!zt||!zt.hasData()))continue;j.activeTexture.set(K.TEXTURE0);const Vt=uw(zt,te,u,Q);if(!Vt||!Vt.texture)continue;const{texture:nn,mix:sn,offset:wn,tileSize:Pt,buffer:Kt}=Vt;let kt,cn;_e?(kt=Jn.disabled,cn=ut.projMatrix):O?(kt=new Jn(K.LEQUAL,Jn.ReadWrite,f.depthRangeFor3D),cn=T?Float32Array.from(f.transform.expandedFarZProjMatrix):f.transform.calculateProjMatrix(pt,Ee)):(kt=f.depthModeForSublayer(ut.overscaledZ-Je,u.paint.get("raster-opacity")===1?Jn.ReadWrite:Jn.ReadOnly,K.LESS),cn=f.transform.calculateProjMatrix(pt,Ee));const qt=f.terrain&&_e?f.terrain.stencilModeForRTTOverlap(ut):ze[ut.overscaledZ],_n=S?0:u.paint.get("raster-fade-duration");zt.registerFadeDuration(_n);const zn=i.findLoadedParent(ut,0),un=Vd(zt,zn,i,f.transform,_n);let On,er;f.terrain&&f.terrain.prepareDrawTile(),j.activeTexture.set(K.TEXTURE0),nn.bind(Me,K.CLAMP_TO_EDGE),j.activeTexture.set(K.TEXTURE1),zn?(zn.texture&&zn.texture.bind(Me,K.CLAMP_TO_EDGE),On=Math.pow(2,zn.tileID.overscaledZ-zt.tileID.overscaledZ),er=[zt.tileID.canonical.x*On%1,zt.tileID.canonical.y*On%1]):nn.bind(Me,K.CLAMP_TO_EDGE),"useMipmap"in nn&&j.extTextureFilterAnisotropic&&f.transform.pitch>20&&K.texParameterf(K.TEXTURE_2D,j.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,j.extTextureFilterAnisotropicMax);const tr=f.transform;let Zn;const mr=O?lw(tr):[0,0,0,0];let yr,kr,Hr,ti,ji,ps=0;if(B&&te instanceof r.aP&&te.coordinates.length>3)yr=Float32Array.from(r.bh(r.dr(new r.cp(0,0,0)))),kr=Float32Array.from(tr.globeMatrix),Hr=Float32Array.from(r.dm(tr)),ti=[r.aD(tr.center.lng),r.aH(tr.center.lat)],Zn=te.elevatedGlobePerspectiveTransform,ji=te.elevatedGlobeGridMatrix||new Float32Array(9);else if(B){const Kr=r.dn(ut.canonical);ps=r.dp(Kr.getCenter().lat),yr=Float32Array.from(r.bh(r.dr(ut.canonical))),kr=Float32Array.from(tr.globeMatrix),Hr=Float32Array.from(r.dm(tr)),ti=[r.aD(tr.center.lng),r.aH(tr.center.lat)],Zn=[0,0],ji=Float32Array.from(r.dq(ut.canonical,Kr,ps,tr.worldSize/tr._pixelsPerMercatorPixel))}else Zn=te instanceof r.aP?te.perspectiveTransform:[0,0],yr=new Float32Array(16),kr=new Float32Array(9),Hr=new Float32Array(16),ti=[0,0],ji=new Float32Array(9);const Yi=P0(cn,yr,kr,Hr,ji,er||[0,0],r.ah(f.transform.zoom),ti,mr,On||1,un,u,Zn,O?u.paint.get("raster-elevation"):0,2,sn,wn,Q.range,Pt,Kt,oe),Xi=f.isTileAffectedByFog(ut),Ws=f.getOrCreateProgram("raster",{defines:Q.defines,overrideFog:Xi});if(f.uploadCommonUniforms(j,Ws,pt),te instanceof r.aP){const Kr=te.elevatedGlobeVertexBuffer,ii=te.elevatedGlobeIndexBuffer;if(_e||!T)te.boundsBuffer&&te.boundsSegments&&Ws.draw(f,K.TRIANGLES,kt,Vr.disabled,Ce,Pr.disabled,Yi,u.id,te.boundsBuffer,f.quadTriangleIndexBuffer,te.boundsSegments);else if(Kr&&ii){const bi=tr.zoom<=r.cL?te.elevatedGlobeSegments:te.getSegmentsForLongitude(tr.center.lng);bi&&Ws.draw(f,K.TRIANGLES,kt,Vr.disabled,Ce,rt,Yi,u.id,Kr,ii,bi)}}else if(B){kt=new Jn(K.LEQUAL,Jn.ReadOnly,f.depthRangeFor3D);const Kr=f.globeSharedBuffers;if(Kr){const[ii,bi,xs]=Kr.getGridBuffers(ps,!1);Ws.draw(f,K.TRIANGLES,kt,Qe||qt,f.colorModeForRenderPass(),rt,Yi,u.id,ii,bi,xs)}}else{const{tileBoundsBuffer:Kr,tileBoundsIndexBuffer:ii,tileBoundsSegments:bi}=f.getTileBoundsBuffers(zt);Ws.draw(f,K.TRIANGLES,kt,qt,Ce,Pr.disabled,Yi,u.id,Kr,ii,bi)}}if(!(te instanceof r.aP)&&B)for(const ut of ot){const pt=ut.canonical.y===(1<<ut.canonical.z)-1;ut.canonical.y===0&&Wf(!0,ut,f,i,u,oe,Q,rt,Qe||Vr.disabled),pt&&Wf(!1,ut,f,i,u,oe,Q,rt===Pr.frontCW?Pr.backCW:Pr.frontCW,Qe||Vr.disabled)}};B?lt(qe,f.renderElevatedRasterBackface?Pr.backCW:Pr.frontCW,f.stencilModeFor3D()):lt(qe,Pr.disabled,void 0),f.resetStencilClippingMasks()},"raster-particle":function(f,i,u,p,x,S){f.renderPass==="offscreen"&&function(T,O,B,j){if(!j.length)return;const K=T.context,te=K.gl,Q=O.getSource();if(!(Q instanceof hu))return;const oe=Math.ceil(Math.sqrt(B.paint.get("raster-particle-count")));let Ce=B.particlePositionRGBAImage;if(!Ce||Ce.width!==oe){const qe=function(Je){const lt=Je*Je,ot=new Uint8Array(4*lt),rt=function(ut){return ut|=0,ut=Math.imul(2747636419^ut,2654435769),ut=Math.imul(ut^ut>>>16,2654435769),((ut=Math.imul(ut^ut>>>16,2654435769))>>>0)/4294967296},Qe=1/1.1;for(let ut=0;ut<lt;ut++){const pt=Qe*(rt(2*ut+0)+qc),zt=Qe*(rt(2*ut+1)+qc),Vt=255*pt%1,nn=255*zt%1,sn=Vt,wn=zt-nn/255,Pt=nn;ot[4*ut+0]=255*(pt-Vt/255),ot[4*ut+1]=255*sn,ot[4*ut+2]=255*wn,ot[4*ut+3]=255*Pt}return ot}(oe);Ce=B.particlePositionRGBAImage=new r.r({width:oe,height:oe},qe)}let _e=B.particleFramebuffer;_e?_e.width!==oe&&(_e.destroy(),_e=B.particleFramebuffer=K.createFramebuffer(oe,oe,!0,null)):_e=B.particleFramebuffer=K.createFramebuffer(oe,oe,!0,null);const Ee=[];for(const qe of j){const Je=O.getTile(qe);if(!(Je instanceof fu))continue;const lt=cw(Je,Q,B);if(!lt)continue;const ot=[Je.tileSize,Je.tileSize];let rt=B.tileFramebuffer;rt||(rt=B.tileFramebuffer=K.createFramebuffer(ot[0],ot[1],!0,null));let Qe=Je.rasterParticleState;Qe||(Qe=Je.rasterParticleState=new Fy(K,qe,ot,Ce));const ut=Qe.update(B.lastInvalidatedAt);Qe.particleTextureDimension!==oe&&Qe.updateParticleTexture(qe,Ce);const pt=Qe.targetColorTexture;Qe.targetColorTexture=Qe.backgroundColorTexture,Qe.backgroundColorTexture=pt;const zt=Qe.particleTexture0;Qe.particleTexture0=Qe.particleTexture1,Qe.particleTexture1=zt,Ee.push([qe,lt,Qe,ut])}if(Ee.length===0)return;const Me=r.q.now(),ze=B.previousDrawTimestamp?.001*(Me-B.previousDrawTimestamp):.0167;if(B.previousDrawTimestamp=Me,B.hasColorMap()){K.activeTexture.set(te.TEXTURE0+2);let qe=B.colorRampTexture;qe||(qe=B.colorRampTexture=new r.T(K,B.colorRamp,te.RGBA8)),qe.bind(te.LINEAR,te.CLAMP_TO_EDGE)}K.bindFramebuffer.set(B.tileFramebuffer.framebuffer),function(qe,Je,lt){const ot=qe.context,rt=ot.gl,Qe=Je.tileFramebuffer;ot.activeTexture.set(rt.TEXTURE0);const ut={u_texture:0,u_opacity:1.05*(zt=Je.paint.get("raster-particle-fade-opacity-factor"))/(zt+.05)},pt=qe.getOrCreateProgram("rasterParticleTexture",{defines:[],overrideFog:!1});var zt;for(const Vt of lt){const[,,nn,sn]=Vt;Qe.colorAttachment.set(nn.targetColorTexture.texture),ot.viewport.set([0,0,Qe.width,Qe.height]),ot.clear({color:r.am.transparent}),sn&&(nn.backgroundColorTexture.bind(rt.NEAREST,rt.CLAMP_TO_EDGE),pt.draw(qe,rt.TRIANGLES,Jn.disabled,Vr.disabled,ai.alphaBlended,Pr.disabled,ut,Je.id,qe.viewportBuffer,qe.quadTriangleIndexBuffer,qe.viewportSegments))}}(T,B,Ee),function(qe,Je,lt,ot){const rt=qe.context,Qe=rt.gl,ut=lt.tileFramebuffer,pt=qe.transform.projection.name==="globe",zt=lt.paint.get("raster-particle-max-speed");for(const Vt of ot){const[nn,sn,wn]=Vt;rt.activeTexture.set(Qe.TEXTURE0+0),sn.texture.bind(Qe.LINEAR,Qe.CLAMP_TO_EDGE),ut.colorAttachment.set(wn.targetColorTexture.texture);const Pt=qe.getOrCreateProgram("rasterParticleDraw",{defines:sn.defines,overrideFog:!1});rt.activeTexture.set(Qe.TEXTURE0+1);const Kt=sn.scalarData?[]:[0,1,2,3].map(qt=>r.dT[qt](nn));Kt.push(nn);const kt=nn.canonical.x,cn=nn.canonical.y;for(const qt of Kt){const _n=Je.getTile(pt?qt.wrapped():qt);if(!_n)continue;const zn=_n.rasterParticleState;if(!zn)continue;const un=qt.canonical.x+(1<<qt.canonical.z)*(qt.wrap-nn.wrap),On=qt.canonical.y;zn.particleTexture0.bind(Qe.NEAREST,Qe.CLAMP_TO_EDGE);const er=Py(1,zn.particleTexture0.size[0],[un-kt,On-cn],0,sn.texture.size,2,zt,sn.textureOffset,sn.scale,sn.offset);Pt.draw(qe,Qe.POINTS,Jn.disabled,Vr.disabled,ai.alphaBlended,Pr.disabled,er,lt.id,zn.particleIndexBuffer,void 0,zn.particleSegment)}}}(T,O,B,Ee),K.bindFramebuffer.set(B.particleFramebuffer.framebuffer),function(qe,Je,lt,ot){const rt=qe.context,Qe=rt.gl,ut=Je.paint.get("raster-particle-max-speed"),pt=ot*Je.paint.get("raster-particle-speed-factor")*.15,zt=function(nn){return Math.pow(nn,6)}(.01+1*Je.paint.get("raster-particle-reset-rate-factor")),Vt=Je.particleFramebuffer;rt.viewport.set([0,0,Vt.width,Vt.height]);for(const nn of lt){const[,sn,wn]=nn;rt.activeTexture.set(Qe.TEXTURE0+0),sn.texture.bind(Qe.LINEAR,Qe.CLAMP_TO_EDGE),rt.activeTexture.set(Qe.TEXTURE0+1);const Pt=wn.particleTexture0;Pt.bind(Qe.NEAREST,Qe.CLAMP_TO_EDGE);const Kt=Wc(1,Pt.size[0],0,sn.texture.size,ut,pt,zt,sn.textureOffset,sn.scale,sn.offset);Vt.colorAttachment.set(wn.particleTexture1.texture),rt.clear({color:r.am.transparent}),qe.getOrCreateProgram("rasterParticleUpdate",{defines:sn.defines}).draw(qe,Qe.TRIANGLES,Jn.disabled,Vr.disabled,ai.unblended,Pr.disabled,Kt,Je.id,qe.viewportBuffer,qe.quadTriangleIndexBuffer,qe.viewportSegments)}}(T,B,Ee,ze)}(f,i,u,p),f.renderPass==="translucent"&&(function(T,O,B,j,K){const te=T.context,Q=te.gl,oe=O.getSource().tileSize,Ce=5*(1-r.af(r.cx,r.cx+1,T.transform.zoom))*oe+B.paint.get("raster-particle-elevation"),_e=!T.options.moving,Ee=T.transform.projection.name==="globe";if(!j.length)return;const[Me,ze]=T.stencilConfigForOverlap(j),qe=[];Ee&&qe.push("PROJECTION_GLOBE_VIEW");const Je=T.stencilModeFor3D();for(const lt of ze){const ot=lt.toUnwrapped(),rt=O.getTile(lt);if(!rt.rasterParticleState)continue;const Qe=rt.rasterParticleState,ut=100;rt.registerFadeDuration(ut);const pt=O.findLoadedParent(lt,0),zt=Vd(rt,pt,O,T.transform,ut);let Vt,nn;T.terrain&&T.terrain.prepareDrawTile(),te.activeTexture.set(Q.TEXTURE0),Qe.targetColorTexture.bind(Q.LINEAR,Q.CLAMP_TO_EDGE),te.activeTexture.set(Q.TEXTURE1),pt&&pt.rasterParticleState?(pt.rasterParticleState.targetColorTexture.bind(Q.LINEAR,Q.CLAMP_TO_EDGE),Vt=Math.pow(2,pt.tileID.overscaledZ-rt.tileID.overscaledZ),nn=[rt.tileID.canonical.x*Vt%1,rt.tileID.canonical.y*Vt%1]):Qe.targetColorTexture.bind(Q.LINEAR,Q.CLAMP_TO_EDGE);const sn=Ee?Float32Array.from(T.transform.expandedFarZProjMatrix):T.transform.calculateProjMatrix(ot,_e),wn=T.transform,Pt=By(wn),Kt=r.dn(lt.canonical),kt=r.dp(Kt.getCenter().lat);let cn,qt,_n,zn,un;Ee?(cn=Float32Array.from(r.bh(r.dr(lt.canonical))),qt=Float32Array.from(wn.globeMatrix),_n=Float32Array.from(r.dm(wn)),zn=[r.aD(wn.center.lng),r.aH(wn.center.lat)],un=Float32Array.from(r.dq(lt.canonical,Kt,kt,wn.worldSize/wn._pixelsPerMercatorPixel))):(cn=new Float32Array(16),qt=new Float32Array(9),_n=new Float32Array(16),zn=[0,0],un=new Float32Array(9));const On=Ud(sn,cn,qt,_n,un,nn||[0,0],r.ah(T.transform.zoom),zn,Pt,Vt||1,zt,Ce),er=T.isTileAffectedByFog(lt),tr=T.getOrCreateProgram("rasterParticle",{defines:qe,overrideFog:er});if(T.uploadCommonUniforms(te,tr,ot),Ee){const Zn=new Jn(Q.LEQUAL,Jn.ReadOnly,T.depthRangeFor3D),mr=0,yr=T.globeSharedBuffers;if(yr){const[kr,Hr,ti]=yr.getGridBuffers(kt,mr!==0);tr.draw(T,Q.TRIANGLES,Zn,Je,ai.alphaBlended,T.renderElevatedRasterBackface?Pr.frontCCW:Pr.backCCW,On,B.id,kr,Hr,ti)}}else{const Zn=T.depthModeForSublayer(0,Jn.ReadOnly),mr=Me[lt.overscaledZ],{tileBoundsBuffer:yr,tileBoundsIndexBuffer:kr,tileBoundsSegments:Hr}=T.getTileBoundsBuffers(rt);tr.draw(T,Q.TRIANGLES,Zn,mr,ai.alphaBlended,Pr.disabled,On,B.id,yr,kr,Hr)}}T.resetStencilClippingMasks()}(f,i,u,p),f.style.map.triggerRepaint())},background:function(f,i,u,p){const x=u.paint.get("background-color"),S=u.paint.get("background-color-use-theme").constantOr("default")==="none",T=u.paint.get("background-opacity"),O=u.paint.get("background-emissive-strength"),B=u.paint.get("background-pitch-alignment")==="viewport";if(T===0)return;const j=f.context,K=j.gl,te=f.transform,Q=te.tileSize,oe=u.paint.get("background-pattern");let Ce;if(oe!==void 0&&(oe===null||(Ce=f.imageManager.getPattern(r.I.from(oe.toString()),u.scope,f.style.getLut(u.scope)),!Ce)))return;const _e=!oe&&x.a===1&&T===1&&f.opaquePassEnabledForLayer()?"opaque":"translucent";if(f.renderPass!==_e)return;const Ee=Vr.disabled,Me=f.depthModeForSublayer(0,_e==="opaque"?Jn.ReadWrite:Jn.ReadOnly),ze=f.colorModeForDrapableLayerRenderPass(O),qe=oe?"backgroundPattern":"background";let Je,lt=p;if(lt||(Je=f.getBackgroundTiles(),lt=Object.values(Je).map(ot=>ot.tileID)),oe&&(j.activeTexture.set(K.TEXTURE0),f.imageManager.bind(f.context,u.scope)),B){const ot=f.getOrCreateProgram(qe,{overrideFog:!1,overrideRtt:!0}),rt=new Float32Array(r.bx([])),Qe=new r.aM(0,0,0,0,0),ut=oe?O0(rt,O,T,f,0,u.scope,Ce,B,{tileID:Qe,tileSize:Q}):L0(rt,O,T,x.toPremultipliedRenderColor(S?null:u.lut));ot.draw(f,K.TRIANGLES,Me,Ee,ze,Pr.disabled,ut,u.id,f.viewportBuffer,f.quadTriangleIndexBuffer,f.viewportSegments)}else for(const ot of lt){const rt=f.isTileAffectedByFog(ot),Qe=f.getOrCreateProgram(qe,{overrideFog:rt}),ut=ot.toUnwrapped(),pt=p?ot.projMatrix:f.transform.calculateProjMatrix(ut);f.prepareDrawTile();const zt=i?i.getTile(ot):Je?Je[ot.key]:new Fu(ot,Q,te.zoom,f),Vt=oe?O0(pt,O,T,f,0,u.scope,Ce,B,{tileID:ot,tileSize:Q}):L0(pt,O,T,x.toPremultipliedRenderColor(S?null:u.lut));f.uploadCommonUniforms(j,Qe,ut);const{tileBoundsBuffer:nn,tileBoundsIndexBuffer:sn,tileBoundsSegments:wn}=f.getTileBoundsBuffers(zt);Qe.draw(f,K.TRIANGLES,Me,Ee,ze,Pr.disabled,Vt,u.id,nn,sn,wn)}},sky:function(f,i,u){const p=f._atmosphere?r.ah(f.transform.zoom):1,x=u.paint.get("sky-opacity")*p;if(x===0)return;const S=f.context,T=u.paint.get("sky-type"),O=new Jn(S.gl.LEQUAL,Jn.ReadOnly,[0,1]),B=f.frameCounter/1e3%1;T==="atmosphere"?f.renderPass==="offscreen"?u.needsSkyboxCapture(f)&&(function(j,K,te,Q){const oe=j.context,Ce=oe.gl;let _e=K.skyboxFbo;if(!_e){_e=K.skyboxFbo=oe.createFramebuffer(32,32,!0,null),K.skyboxGeometry=new Kf(oe),K.skyboxTexture=oe.gl.createTexture(),Ce.bindTexture(Ce.TEXTURE_CUBE_MAP,K.skyboxTexture),Ce.texParameteri(Ce.TEXTURE_CUBE_MAP,Ce.TEXTURE_WRAP_S,Ce.CLAMP_TO_EDGE),Ce.texParameteri(Ce.TEXTURE_CUBE_MAP,Ce.TEXTURE_WRAP_T,Ce.CLAMP_TO_EDGE),Ce.texParameteri(Ce.TEXTURE_CUBE_MAP,Ce.TEXTURE_MIN_FILTER,Ce.LINEAR),Ce.texParameteri(Ce.TEXTURE_CUBE_MAP,Ce.TEXTURE_MAG_FILTER,Ce.LINEAR);for(let qe=0;qe<6;++qe)Ce.texImage2D(Ce.TEXTURE_CUBE_MAP_POSITIVE_X+qe,0,Ce.RGBA,32,32,0,Ce.RGBA,Ce.UNSIGNED_BYTE,null)}oe.bindFramebuffer.set(_e.framebuffer),oe.viewport.set([0,0,32,32]);const Ee=K.getCenter(j,!0),Me=j.getOrCreateProgram("skyboxCapture"),ze=new Float64Array(16);r.bx(ze),r.e3(ze,ze,.5*-Math.PI),Zc(j,K,Me,ze,Ee,0),r.bx(ze),r.e3(ze,ze,.5*Math.PI),Zc(j,K,Me,ze,Ee,1),r.bx(ze),r.cG(ze,ze,.5*-Math.PI),Zc(j,K,Me,ze,Ee,2),r.bx(ze),r.cG(ze,ze,.5*Math.PI),Zc(j,K,Me,ze,Ee,3),r.bx(ze),Zc(j,K,Me,ze,Ee,4),r.bx(ze),r.e3(ze,ze,Math.PI),Zc(j,K,Me,ze,Ee,5),oe.viewport.set([0,0,j.width,j.height])}(f,u),u.markSkyboxValid(f)):f.renderPass==="sky"&&function(j,K,te,Q,oe){const Ce=j.context,_e=Ce.gl,Ee=j.transform,Me=j.getOrCreateProgram("skybox");Ce.activeTexture.set(_e.TEXTURE0),_e.bindTexture(_e.TEXTURE_CUBE_MAP,K.skyboxTexture);const ze=((qe,Je,lt,ot,rt)=>({u_matrix:qe,u_sun_direction:Je,u_cubemap:0,u_opacity:ot,u_temporal_offset:rt}))(Ee.skyboxMatrix,K.getCenter(j,!1),0,Q,oe);j.uploadCommonUniforms(Ce,Me),Me.draw(j,_e.TRIANGLES,te,Vr.disabled,j.colorModeForRenderPass(),Pr.backCW,ze,"skybox",K.skyboxGeometry.vertexBuffer,K.skyboxGeometry.indexBuffer,K.skyboxGeometry.segment)}(f,u,O,x,B):T==="gradient"&&f.renderPass==="sky"&&function(j,K,te,Q,oe){const Ce=j.context,_e=Ce.gl,Ee=j.transform,Me=j.getOrCreateProgram("skyboxGradient");K.skyboxGeometry||(K.skyboxGeometry=new Kf(Ce)),Ce.activeTexture.set(_e.TEXTURE0);let ze=K.colorRampTexture;ze||(ze=K.colorRampTexture=new r.T(Ce,K.colorRamp,_e.RGBA8)),ze.bind(_e.LINEAR,_e.CLAMP_TO_EDGE);const qe=((Je,lt,ot,rt,Qe)=>({u_matrix:Je,u_color_ramp:0,u_center_direction:lt,u_radius:r.al(ot),u_opacity:rt,u_temporal_offset:Qe}))(Ee.skyboxMatrix,K.getCenter(j,!1),K.paint.get("sky-gradient-radius"),Q,oe);j.uploadCommonUniforms(Ce,Me),Me.draw(j,_e.TRIANGLES,te,Vr.disabled,j.colorModeForRenderPass(),Pr.backCW,qe,"skyboxGradient",K.skyboxGeometry.vertexBuffer,K.skyboxGeometry.indexBuffer,K.skyboxGeometry.segment)}(f,u,O,x,B)},custom:function(f,i,u,p){const x=f.context,S=u.implementation;if(!f.transform.projection.unsupportedLayers||!f.transform.projection.unsupportedLayers.includes("custom")||f.terrain&&(f.terrain.renderingToTexture||f.renderPass==="offscreen")&&u.isDraped(i)){if(f.renderPass==="offscreen"){const T=S.prerender;if(T){if(f.setCustomLayerDefaults(),x.setColorMode(f.colorModeForRenderPass()),f.transform.projection.name==="globe"){const O=f.transform.pointMerc;T.call(S,x.gl,f.transform.customLayerMatrix(),f.transform.getProjection(),f.transform.globeToMercatorMatrix(),r.ah(f.transform.zoom),[O.x,O.y],f.transform.pixelsPerMeterRatio)}else T.call(S,x.gl,f.transform.customLayerMatrix());x.setDirty(),f.setBaseState()}}else if(f.renderPass==="translucent"){if(f.terrain&&f.terrain.renderingToTexture){const O=S.renderToTile;if(O){const B=p[0].canonical,j={x:B.x+p[0].wrap*(S.wrapTileId?0:1<<B.z),y:B.y,z:B.z};x.setDepthMode(Jn.disabled),x.setStencilMode(Vr.disabled),x.setColorMode(f.colorModeForRenderPass()),f.setCustomLayerDefaults(),O.call(S,x.gl,j),x.setDirty(),f.setBaseState()}return}f.setCustomLayerDefaults(),x.setColorMode(f.colorModeForRenderPass()),x.setStencilMode(Vr.disabled);const T=S.renderingMode==="3d"?new Jn(f.context.gl.LEQUAL,Jn.ReadWrite,f.depthRangeFor3D):f.depthModeForSublayer(0,Jn.ReadOnly);if(x.setDepthMode(T),f.transform.projection.name==="globe"){const O=f.transform.pointMerc;S.render(x.gl,f.transform.customLayerMatrix(),f.transform.getProjection(),f.transform.globeToMercatorMatrix(),r.ah(f.transform.zoom),[O.x,O.y],f.transform.pixelsPerMeterRatio)}else S.render(x.gl,f.transform.customLayerMatrix());x.setDirty(),f.setBaseState(),x.bindFramebuffer.set(null)}}else r.w("Custom layers are not yet supported with this projection. Use mercator or globe to enable usage of custom layers.")},model:function(f,i,u,p){if(f.renderPass==="opaque")return;const x=u.paint.get("model-opacity").constantOr(1);if(x===0)return;const S=u.paint.get("model-cast-shadows");if(f.renderPass==="shadow"&&(!S||f.terrain&&x<.65&&u._transitionablePaint._values["model-opacity"].value.expression instanceof r.ab))return;const T=f.shadowRenderer,O=u.paint.get("model-receive-shadows");T&&(T.useNormalOffset=!0,O||(T.enabled=!1));const B=()=>{T&&(T.useNormalOffset=!0,O||(T.enabled=!0))},j=i.getSource();if(f.renderPass==="light-beam"&&j.type!=="batched-model")return;if(j.type==="vector"||j.type==="geojson")return function(Me,ze,qe,Je,lt){const ot=Me.transform;if(ot.projection.name!=="mercator")return void r.w(`Drawing 3D models for ${ot.projection.name} projection is not yet implemented`);const rt=ot.getFreeCameraOptions().position;if(!Me.modelManager)return;const Qe=Me.modelManager;qe.modelManager=Qe;const ut=Me.shadowRenderer;if(!qe._unevaluatedLayout._values.hasOwnProperty("model-id"))return;const pt=qe._unevaluatedLayout._values["model-id"],zt=Object.assign({},qe.layout.get("model-id").parameters),Vt=Me.style.order.indexOf(qe.fqid);for(const nn of Je){const sn=ze.getTile(nn).getBucket(qe);if(!sn||sn.projection.name!==ot.projection.name)continue;const wn=sn.getModelUris();wn&&!sn.modelsRequested&&(Qe.addModelsFromBucket(wn,lt),sn.modelsRequested=!0);const Pt=Cm(nn,ot);zt.zoom=Pt;const Kt=pt.possiblyEvaluate(zt);if(Dt(Me,sn,nn),Xl.shadowUniformsInitialized=!1,Xl.useSingleShadowCascade=!!ut&&ut.getMaxCascadeForTile(nn.toUnwrapped())===0,Me.renderPass==="shadow"&&ut){if(Me.currentShadowCascade===1&&sn.isInsideFirstShadowMapFrustum)continue;const qt=ot.calculatePosMatrix(nn.toUnwrapped(),ot.worldSize);if(Xl.tileMatrix.set(qt),Xl.shadowTileMatrix=Float32Array.from(ut.calculateShadowPassMatrixFromMatrix(qt)),Xl.aabb.min.fill(0),Xl.aabb.max[0]=Xl.aabb.max[1]=r.aj,Xl.aabb.max[2]=0,jy(sn,Xl,Me,qe.scope))continue}const kt=1<<nn.canonical.z,cn=[((rt.x-nn.wrap)*kt-nn.canonical.x)*r.aj,(rt.y*kt-nn.canonical.y)*r.aj,rt.z*kt*r.aj];Me.conflationActive&&Object.keys(sn.instancesPerModel).length>0&&Me.style.isLayerClipped(qe,ze.getSource())&&sn.updateReplacement(nn,Me.replacementSource,Vt,lt)&&(sn.uploaded=!1,sn.upload(Me.context));for(let qt in sn.instancesPerModel){const _n=sn.instancesPerModel[qt];_n.features.length>0&&(qt=Kt.evaluate(_n.features[0].feature,{}));const zn=Qe.getModel(qt,lt);if(zn||Qe.hasURLBeenRequested(qt)||sn.modelUris.includes(qt)||(sn.modelUris.push(qt),sn.modelsRequested=!1),zn&&zn.uploaded)for(const un of zn.nodes)Em(Me,qe,un,_n,cn,nn,Xl)}}}(f,i,u,p,j.type==="vector"?u.scope:""),void B();if(!j.loaded())return;if(j.type==="batched-model")return function(Me,ze,qe,Je){qe.resetLayerRenderingStats(Me);const lt=Me.context,ot=Me.transform,rt=Me.style.fog,Qe=Me.shadowRenderer;if(ot.projection.name!=="mercator")return void r.w(`Drawing 3D landmark models for ${ot.projection.name} projection is not yet implemented`);const ut=Me.transform.getFreeCameraOptions().position,pt=r.bY([],[ut.x,ut.y,ut.z],Me.transform.worldSize),zt=r.eb([],pt),Vt=r.bx([]),nn=r.ec(ot.center.lat,ot.zoom),sn=r.bn([],[1,1,1/nn]);r.bo(Vt,Vt,zt);const wn=qe.paint.get("model-opacity").constantOr(1),Pt=new Jn(lt.gl.LEQUAL,Jn.ReadWrite,Me.depthRangeFor3D),Kt=new Jn(lt.gl.LEQUAL,Jn.ReadOnly,Me.depthRangeFor3D),kt=new r.cW([1/0,1/0,1/0],[-1/0,-1/0,-1/0]),cn=Me.renderPass==="shadow",qt=cn&&Qe?Qe.getCurrentCascadeFrustum():ot.getFrustum(ot.scaleZoom(ot.worldSize)),_n=qe.paint.get("model-front-cutoff"),zn=_n[2]<1,un=Tl(Me,qe.paint.get("model-cutoff-fade-range")),On=qe.getLayerRenderingStats();(function(er,tr,Zn,mr){const yr=er.terrain?er.terrain.exaggeration():0,kr=er.transform.zoom;for(const Hr of mr){const ti=tr.getTile(Hr).getBucket(Zn);ti&&(ti.setFilter(Zn.filter),er.conflationActive&&ti.updateReplacement(Hr,er.replacementSource),ti.evaluateTransform(er,Zn),er.terrain&&yr>0&&ti.elevationUpdate(er.terrain,yr,Hr,Zn.source),ti.needsReEvaluation(er,kr,Zn)&&ti.evaluate(Zn))}})(Me,ze,qe,Je),function(){let er,tr,Zn;zn?(er=Je.length-1,tr=-1,Zn=-1):(er=0,tr=Je.length,Zn=1);const mr=new Float64Array(16),yr=r.ef(),kr=new r.P(0,0);for(let Hr=er;Hr!==tr;Hr+=Zn){const ti=Je[Hr],ji=ze.getTile(ti).getBucket(qe);if(!ji||!ji.uploaded)continue;let ps=!1;Qe&&(ps=Qe.getMaxCascadeForTile(ti.toUnwrapped())===0);const Yi=ot.calculatePosMatrix(ti.toUnwrapped(),ot.worldSize),Xi=ji.modelTraits;!cn&&zn&&(r.bi(mr,Yi),r.ad(yr,pt,mr),kr.x=yr[0],kr.y=yr[1]);const Ws=[];ji.setFilter(qe.filter);for(const Kr of ji.getNodesInfo()){if(Kr.hiddenByReplacement||!Kr.node.meshes)continue;const ii=Kr.node;let bi=0;Me.terrain&&ii.elevation&&(bi=ii.elevation*Me.terrain.exaggeration());const xs=(()=>{const js=Kr.aabb;return kt.min=[...js.min],kt.max=[...js.max],kt.min[2]+=bi,kt.max[2]+=bi,r.ad(kt.min,kt.min,Yi),r.ad(kt.max,kt.max,Yi),kt})(),lo=Kr.evaluatedScale;if(lo[0]<=1&&lo[1]<=1&&lo[2]<=1&&xs.intersects(qt)===0)continue;if(!cn&&zn){const js=.16666666666666666;Kr.cameraCollisionOpacity=pt[0]>xs.min[0]&&pt[0]<xs.max[0]&&pt[1]>xs.min[1]&&pt[1]<xs.max[1]&&pt[2]*nn<xs.max[2]&&ii.footprint&&r.bS(kr,ii.footprint)?Math.max(Kr.cameraCollisionOpacity-js,0):Math.min(1,Kr.cameraCollisionOpacity+js)}const ms=[...Yi],Vi=1/r.cU(ti.canonical),$s=ii.anchor?ii.anchor[0]:0,Mi=ii.anchor?ii.anchor[1]:0;r.bo(ms,ms,[$s*(lo[0]-1)+Kr.evaluatedTranslation[0]*Vi,Mi*(lo[1]-1)+Kr.evaluatedTranslation[1]*Vi,bi+Kr.evaluatedTranslation[2]]),r.ci(lo,r.eg)||r.cE(ms,ms,lo);const ro=r.az([],ms,ii.matrix),ws=r.az([],ot.expandedFarZProjMatrix,ro),as=r.az([],ot.expandedFarZProjMatrix,ms),Ss=r.aA([],[$s,Mi,bi,1],ws)[2];ii.hidden=!1;let Hi=wn;cn||(zn&&(Hi*=Kr.cameraCollisionOpacity,Hi*=Vh(ms,ot,Kr.aabb,_n)),Hi*=Gy(un,Ss)),Hi!==0?Ws.push({nodeInfo:Kr,depth:Ss,opacity:Hi,wvpForNode:ws,wvpForTile:as,nodeModelMatrix:ro,tileModelMatrix:ms}):ii.hidden=!0}cn||Ws.sort((Kr,ii)=>!zn||Kr.opacity===1&&ii.opacity===1?Kr.depth<ii.depth?-1:1:Kr.opacity===1?-1:ii.opacity===1?1:Kr.depth>ii.depth?-1:1);for(const Kr of Ws){const ii=Kr.nodeInfo,bi=ii.node;let xs=r.az([],sn,Kr.tileModelMatrix);r.az(xs,Vt,xs);const lo=r.bi([],xs);r.ee(lo,lo),r.cE(lo,lo,V0),xs=r.az(xs,xs,bi.matrix);const ms=Me.renderPass==="light-beam",Vi=qe.paint.get("model-color-use-theme").constantOr("default")==="none",$s=Xi&r.em.HasMapboxMeshFeatures,Mi=$s?0:ii.evaluatedRMEA[0][2];for(let ro=0;ro<bi.meshes.length;++ro){const ws=bi.meshes[ro],as=ro===bi.lightMeshIndex;let Ss=Kr.wvpForNode;if(as){if(!ms&&!Me.terrain&&Me.shadowRenderer){Me.currentLayer<Me.firstLightBeamLayer&&(Me.firstLightBeamLayer=Me.currentLayer);continue}Ss=Kr.wvpForTile}else if(ms)continue;const Hi={defines:[]},js=[];if(!cn&&Qe&&(Qe.useNormalOffset=!!ws.normalBuffer),Mn(Hi.defines,js,ws,Me,Vi?null:qe.lut),$s||Hi.defines.push("DIFFUSE_SHADED"),ps&&Hi.defines.push("SHADOWS_SINGLE_CASCADE"),On&&(cn?On.numRenderedVerticesInShadowPass+=ws.vertexArray.length:On.numRenderedVerticesInTransparentPass+=ws.vertexArray.length),cn){Vs(ws,Kr.nodeModelMatrix,Me,qe);continue}let Uo=null;if(rt){const Ql=Gd(Kr.nodeModelMatrix,Me.transform);if(Uo=new Float32Array(Ql),ot.projection.name!=="globe"){const Al=ws.aabb.min,Pa=ws.aabb.max,[nd,eu]=rt.getOpacityForBounds(Ql,Al[0],Al[1],Pa[0],Pa[1]);Hi.overrideFog=nd>=Ft||eu>=Ft}}const As=ws.material;let Fi;As.occlusionTexture&&As.occlusionTexture.offsetScale&&(Fi=As.occlusionTexture.offsetScale,Hi.defines.push("OCCLUSION_TEXTURE_TRANSFORM"));const Ya=Me.getOrCreateProgram("model",Hi);!cn&&Qe&&Qe.setupShadowsFromMatrix(Kr.tileModelMatrix,Ya,Qe.useNormalOffset),Me.uploadCommonUniforms(lt,Ya,null,Uo);const Ra=As.pbrMetallicRoughness;Ra.metallicFactor=.9,Ra.roughnessFactor=.5;const hl=jf(new Float32Array(Ss),new Float32Array(xs),new Float32Array(lo),new Float32Array(bi.matrix),Me,Kr.opacity,Ra.baseColorFactor,As.emissiveFactor,Ra.metallicFactor,Ra.roughnessFactor,As,Mi,qe,[0,0,0],Fi);!as&&(ii.hasTranslucentParts||Kr.opacity<1)&&Ya.draw(Me,lt.gl.TRIANGLES,Pt,Vr.disabled,ai.disabled,Pr.backCCW,hl,qe.id,ws.vertexBuffer,ws.indexBuffer,ws.segments,qe.paint,Me.transform.zoom,void 0,js),Ya.draw(Me,lt.gl.TRIANGLES,as?Kt:Pt,Vr.disabled,as||Kr.opacity<1||ii.hasTranslucentParts?ai.alphaBlended:ai.unblended,Pr.backCCW,hl,qe.id,ws.vertexBuffer,ws.indexBuffer,ws.segments,qe.paint,Me.transform.zoom,void 0,js)}}}}()}(f,i,u,p),void B();if(j.type!=="model")return;const K=j.getModels(),te=[],Q=f.transform.getFreeCameraOptions().position,oe=r.bY([],[Q.x,Q.y,Q.z],f.transform.worldSize);r.eb(oe,oe);const Ce=[],_e=[];let Ee=0;for(const Me of K){const ze=u.paint.get("model-rotation").constantOr(null),qe=u.paint.get("model-scale").constantOr(null),Je=u.paint.get("model-translation").constantOr(null);Me.computeModelMatrix(f,ze,qe,Je,!0,!0,!1);const lt=r.bx([]),ot=r.ec(Me.position.lat,f.transform.zoom),rt=r.bn([],[1,1,1/ot]);r.bo(lt,lt,oe),te.push({zScaleMatrix:rt,negCameraPosMatrix:lt});for(const Qe of Me.nodes)qd(f.transform,Qe,Me.matrix,f.transform.expandedFarZProjMatrix,Ee,Ce,_e);Ee++}if(Ce.sort((Me,ze)=>ze.depth-Me.depth),f.renderPass!=="shadow"){if(x===1)for(const Me of _e)Yn(Me,f,u,te[Me.modelIndex],Vr.disabled,f.colorModeForRenderPass());else{for(const Me of _e)Yn(Me,f,u,te[Me.modelIndex],Vr.disabled,ai.disabled);for(const Me of _e)Yn(Me,f,u,te[Me.modelIndex],f.stencilModeFor3D(),f.colorModeForRenderPass());f.resetStencilClippingMasks()}for(const Me of Ce)Yn(Me,f,u,te[Me.modelIndex],Vr.disabled,f.colorModeForRenderPass());B()}else{for(const Me of _e)Vs(Me.mesh,Me.nodeModelMatrix,f,u);for(const Me of Ce)Vs(Me.mesh,Me.nodeModelMatrix,f,u);B()}}},j0={line:function(f,i,u){if(f.hasElevatedBuckets=!1,f.hasNonElevatedBuckets=!1,f._unevaluatedLayout.getValue("line-elevation-reference")!==void 0||f._unevaluatedLayout.getValue("line-z-offset")!==void 0){if(i){const p=i.getVisibleCoordinates();for(const x of p){const S=i.getTile(x).getBucket(f);if(S&&(S.elevationType!=="none"?f.hasElevatedBuckets=!0:f.hasNonElevatedBuckets=!0,f.hasElevatedBuckets&&f.hasNonElevatedBuckets))break}}}else f.hasNonElevatedBuckets=!0},model:function(f,i,u){const p=i.getSource();if(!p.loaded())return;if(p.type==="vector"||p.type==="geojson")return void(u.modelManager&&u.modelManager.upload(u,p.type==="vector"?f.scope:""));if(p.type==="batched-model"||p.type!=="model")return;const x=p.getModels();for(const S of x)S.upload(u.context)},raster:function(f,i,u){const p=i.getSource();if(!(p instanceof hu&&p.loaded()))return;const x=f.sourceLayer||p.rasterLayerIds&&p.rasterLayerIds[0];if(!x)return;const S=f.paint.get("raster-array-band")||p.getInitialBand(x);if(S==null)return;const T=i.getIds().map(O=>i.getTileByID(O));for(const O of T)O.updateNeeded(x,S)&&p.prepareTile(O,x,S)},"raster-particle":function(f,i,u){const p=i.getSource();if(!(p instanceof hu&&p.loaded()))return;const x=f.sourceLayer||p.rasterLayerIds&&p.rasterLayerIds[0];if(!x)return;const S=f.paint.get("raster-particle-array-band")||p.getInitialBand(x);if(S==null)return;const T=i.getIds().map(O=>i.getTileByID(O));for(const O of T)O.updateNeeded(x,S)&&p.prepareTile(O,x,S)}},ec={fill:z0},Xf={fill:function(f,i,u,p){if(!u.layout||u.layout.get("fill-elevation-reference")==="none")return;const x=f.context.gl,S=new Jn(x.LEQUAL,Jn.ReadOnly,f.depthRangeFor3D),T=new Vr({func:x.ALWAYS,mask:255},255,255,x.KEEP,x.KEEP,x.REPLACE),O=f.transform.getFreeCameraOptions().position,B=f.getOrCreateProgram("elevatedStructuresDepthReconstruct",{defines:["DEPTH_RECONSTRUCTION"]});for(const j of p){const K=i.getTile(j),te=K.getBucket(u);if(!te)continue;const Q=te.elevatedStructures;if(!Q||Q.maskSegments.segments[0].primitiveLength===0)continue;const oe=xm(j.toUnwrapped(),O),Ce=f.translatePosMatrix(j.projMatrix,K,u.paint.get("fill-translate"),u.paint.get("fill-translate-anchor")),_e=_m(Ce,oe,0,0,0);B.draw(f,x.TRIANGLES,S,T,ai.disabled,Pr.disabled,_e,u.id,Q.vertexBuffer,Q.indexBuffer,Q.maskSegments,u.paint,f.transform.zoom)}}};class $h{constructor(i,u,p,x,S,T){this.context=new aw(i,u),this.transform=p,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.tp=S,this._timeStamp=r.q.now(),this._averageFPS=0,this._fpsHistory=[],this._dt=0,this._debugParams={forceEnablePrecipitation:!1,showTerrainProxyTiles:!1,fpsWindow:30,continousRedraw:!1,enabledLayers:{}};const O=["fill","line","symbol","circle","heatmap","fill-extrusion","building","raster","raster-particle","hillshade","model","background","sky"];for(const j of O)this._debugParams.enabledLayers[j]=!0;S.registerParameter(this._debugParams,["Terrain"],"showTerrainProxyTiles",{},()=>{this.style.map.triggerRepaint()}),S.registerParameter(this._debugParams,["Precipitation"],"forceEnablePrecipitation"),S.registerParameter(this._debugParams,["FPS"],"fpsWindow",{min:1,max:100,step:1}),S.registerBinding(this._debugParams,["FPS"],"continousRedraw",{readonly:!0,label:"continuous redraw"}),S.registerBinding(this,["FPS"],"_averageFPS",{readonly:!0,label:"value"}),S.registerBinding(this,["FPS"],"_averageFPS",{readonly:!0,label:"graph",view:"graph",min:0,max:200});for(const j of O)S.registerParameter(this._debugParams.enabledLayers,["Debug","Layers"],j);this.occlusionParams=new qy(S),this.setup(),this.numSublayers=ta.maxUnderzooming+ta.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.deferredRenderGpuTimeQueries=[],this.gpuTimers={},this.frameCounter=0,this._backgroundTiles={},this.conflationActive=!1,this.replacementSource=new r.et,this.longestCutoffRange=0,this.minCutoffZoom=0,this._fogVisible=!1,this._cachedTileFogOpacities={},this._shadowRenderer=new nm(this),this._wireframeDebugCache=new mw,this.renderDefaultNorthPole=!0,this.renderDefaultSouthPole=!0,this.layersWithOcclusionOpacity=[];const B=new r.r({width:1,height:1},Uint8Array.of(0,0,0,0));this.emptyDepthTexture=new r.T(this.context,B,i.RGBA8),this._clippingActiveLastFrame=!1,this.scaleFactor=x,this.worldview=T}updateTerrain(i,u){const p=!!i&&!!i.terrain&&this.transform.projection.supportsTerrain;if(!(p||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new Bf(this,i));const x=this._terrain;this.transform.elevation=p?x:null,x.update(i,this.transform,u),this.transform.elevation&&!x.enabled&&(this.transform.elevation=null)}_updateFog(i){const u=i.fog;if(!u||this.transform.projection.name==="globe"||u.getOpacity(this.transform.pitch)<1||u.properties.get("horizon-blend")<.03)return void(this.transform.fogCullDistSq=null);const[p,x]=u.getFovAdjustedRange(this.transform._fov);if(p>x)return void(this.transform.fogCullDistSq=null);const S=p+.78*(x-p);this.transform.fogCullDistSq=S*S}get terrain(){return this.transform._terrainEnabled()&&this._terrain&&this._terrain.enabled||this._forceTerrainMode?this._terrain:null}get forceTerrainMode(){return this._forceTerrainMode}set forceTerrainMode(i){i&&!this._terrain&&(this._terrain=new Bf(this,this.style)),this._forceTerrainMode=i}get shadowRenderer(){return this._shadowRenderer&&this._shadowRenderer.enabled?this._shadowRenderer:null}get wireframeDebugCache(){return this._wireframeDebugCache}resize(i,u){if(this.width=i*r.q.devicePixelRatio,this.height=u*r.q.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const p of this.style.order)this.style._mergedLayers[p].resize()}setup(){const i=this.context,u=new r.ba;u.emplaceBack(0,0),u.emplaceBack(r.aj,0),u.emplaceBack(0,r.aj),u.emplaceBack(r.aj,r.aj),this.tileExtentBuffer=i.createVertexBuffer(u,r.bc.members),this.tileExtentSegments=r.bd.simpleSegment(0,0,4,2);const p=new r.ba;p.emplaceBack(0,0),p.emplaceBack(r.aj,0),p.emplaceBack(0,r.aj),p.emplaceBack(r.aj,r.aj),this.debugBuffer=i.createVertexBuffer(p,r.bc.members),this.debugSegments=r.bd.simpleSegment(0,0,4,5);const x=new r.ba;x.emplaceBack(-1,-1),x.emplaceBack(1,-1),x.emplaceBack(-1,1),x.emplaceBack(1,1),this.viewportBuffer=i.createVertexBuffer(x,r.bc.members),this.viewportSegments=r.bd.simpleSegment(0,0,4,2);const S=new r.aZ;S.emplaceBack(0,0,0,0),S.emplaceBack(r.aj,0,r.aj,0),S.emplaceBack(0,r.aj,0,r.aj),S.emplaceBack(r.aj,r.aj,r.aj,r.aj),this.mercatorBoundsBuffer=i.createVertexBuffer(S,r.bf.members),this.mercatorBoundsSegments=r.bd.simpleSegment(0,0,4,2);const T=new r.a_;T.emplaceBack(0,1,2),T.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=i.createIndexBuffer(T);const O=new r.bb;for(const j of[0,1,3,2,0])O.emplaceBack(j);this.debugIndexBuffer=i.createIndexBuffer(O),this.emptyTexture=new r.T(i,new r.r({width:1,height:1},Uint8Array.of(0,0,0,0)),i.gl.RGBA8),this.identityMat=r.bz();const B=this.context.gl;this.stencilClearMode=new Vr({func:B.ALWAYS,mask:0},0,255,B.ZERO,B.ZERO,B.ZERO),this.loadTimeStamps.push(performance.now())}getMercatorTileBoundsBuffers(){return{tileBoundsBuffer:this.mercatorBoundsBuffer,tileBoundsIndexBuffer:this.quadTriangleIndexBuffer,tileBoundsSegments:this.mercatorBoundsSegments}}getTileBoundsBuffers(i){return i._makeTileBoundsBuffers(this.context,this.transform.projection),i._tileBoundsBuffer?{tileBoundsBuffer:i._tileBoundsBuffer,tileBoundsIndexBuffer:i._tileBoundsIndexBuffer,tileBoundsSegments:i._tileBoundsSegments}:this.getMercatorTileBoundsBuffers()}clearStencil(){const i=this.context.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this._tileClippingMaskIDs={},this.getOrCreateProgram("clippingMask").draw(this,i.TRIANGLES,Jn.disabled,this.stencilClearMode,ai.disabled,Pr.disabled,Bd(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}resetStencilClippingMasks(){this.terrain||(this.currentStencilSource=void 0,this._tileClippingMaskIDs={})}_renderTileClippingMasks(i,u,p){if(!u||this.currentStencilSource===u.id||!i.isTileClipped()||!p||p.length===0)return;if(this._tileClippingMaskIDs&&!this.terrain){let O=!1;for(const B of p)if(this._tileClippingMaskIDs[B.key]===void 0){O=!0;break}if(!O)return}this.currentStencilSource=u.id;const x=this.context,S=x.gl;this.nextStencilID+p.length>256&&this.clearStencil(),x.setColorMode(ai.disabled),x.setDepthMode(Jn.disabled);const T=this.getOrCreateProgram("clippingMask");this._tileClippingMaskIDs={};for(const O of p){const B=u.getTile(O),j=this._tileClippingMaskIDs[O.key]=this.nextStencilID++,{tileBoundsBuffer:K,tileBoundsIndexBuffer:te,tileBoundsSegments:Q}=this.getTileBoundsBuffers(B);T.draw(this,S.TRIANGLES,Jn.disabled,new Vr({func:S.ALWAYS,mask:0},j,255,S.KEEP,S.KEEP,S.REPLACE),ai.disabled,Pr.disabled,Bd(O.projMatrix),"$clipping",K,te,Q)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const i=this.nextStencilID++,u=this.context.gl;return new Vr({func:u.NOTEQUAL,mask:255},i,255,u.KEEP,u.KEEP,u.REPLACE)}stencilModeForClipping(i){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(i);const u=this.context.gl;return new Vr({func:u.EQUAL,mask:255},this._tileClippingMaskIDs[i.key],0,u.KEEP,u.KEEP,u.REPLACE)}stencilConfigForOverlap(i){const u=this.context.gl,p=i.sort((T,O)=>O.overscaledZ-T.overscaledZ),x=p[p.length-1].overscaledZ,S=p[0].overscaledZ-x+1;if(S>1){this.currentStencilSource=void 0,this.nextStencilID+S>256&&this.clearStencil();const T={};for(let O=0;O<S;O++)T[O+x]=new Vr({func:u.GEQUAL,mask:255},O+this.nextStencilID,255,u.KEEP,u.KEEP,u.REPLACE);return this.nextStencilID+=S,[T,p]}return[{[x]:Vr.disabled},p]}colorModeForRenderPass(){const i=this.context.gl;return this._showOverdrawInspector?new ai([i.CONSTANT_COLOR,i.ONE,i.CONSTANT_COLOR,i.ONE],new r.am(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?ai.unblended:ai.alphaBlended}colorModeForDrapableLayerRenderPass(i){const u=this.context.gl;return this.style&&this.style.enable3dLights()&&this.terrain&&this.terrain.renderingToTexture&&this.renderPass==="translucent"?new ai([u.ONE,u.ONE_MINUS_SRC_ALPHA,u.CONSTANT_ALPHA,u.ONE_MINUS_SRC_ALPHA],new r.am(0,0,0,i===void 0?0:i),[!0,!0,!0,!0]):this.colorModeForRenderPass()}depthModeForSublayer(i,u,p,x=!1){if(this.depthOcclusion)return new Jn(this.context.gl.GREATER,Jn.ReadOnly,this.depthRangeFor3D);if(!this.opaquePassEnabledForLayer()&&!x)return Jn.disabled;const S=1-((1+this.currentLayer)*this.numSublayers+i)*this.depthEpsilon;return new Jn(p||this.context.gl.LEQUAL,u,[S,S])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}blitDepth(){const i=this.context.gl,u=Math.ceil(this.width),p=Math.ceil(this.height),x=this.context.bindFramebuffer.get(),S=i.getParameter(i.TEXTURE_BINDING_2D);this.depthFBO&&this.depthFBO.width===u&&this.depthFBO.height===p||(this.depthFBO&&(this.depthFBO.destroy(),this.depthFBO=void 0,this.depthTexture=void 0),u!==0&&p!==0&&(this.depthFBO=new D0(this.context,u,p,!1,"texture"),this.depthTexture=new r.T(this.context,{width:u,height:p,data:null},i.DEPTH24_STENCIL8),this.depthFBO.depthAttachment.set(this.depthTexture.texture))),this.context.bindFramebuffer.set(x),i.bindTexture(i.TEXTURE_2D,S),this.depthFBO&&(i.bindFramebuffer(i.READ_FRAMEBUFFER,null),i.bindFramebuffer(i.DRAW_FRAMEBUFFER,this.depthFBO.framebuffer),i.blitFramebuffer(0,0,u,p,0,0,u,p,i.DEPTH_BUFFER_BIT,i.NEAREST),i.bindFramebuffer(i.FRAMEBUFFER,this.context.bindFramebuffer.current))}updateAverageFPS(){this._fpsHistory.push(this._dt===0?0:1e3/this._dt),this._fpsHistory.length>this._debugParams.fpsWindow&&this._fpsHistory.splice(0,this._fpsHistory.length-this._debugParams.fpsWindow),this._averageFPS=Math.round(this._fpsHistory.reduce((i,u)=>i+u/this._fpsHistory.length,0))}render(i,u){const p=r.q.now();this._dt=p-this._timeStamp,this._timeStamp=p,this._wireframeDebugCache.update(this.frameCounter),this._debugParams.continousRedraw=i.map.repaint,this.style=i,this.options=u;const x=this.style._mergedLayers,S=!(!this.terrain||!this.terrain.enabled),T=()=>this.style._getOrder(S).filter(Pt=>{const Kt=x[Pt];return!(Kt.type in this._debugParams.enabledLayers)||this._debugParams.enabledLayers[Kt.type]});let O=T(),B=!1,j=!1;for(const Pt of O){const Kt=x[Pt];Kt.type==="circle"&&(B=!0),Kt.type==="symbol"&&(Kt.hasInitialOcclusionOpacityProperties?j=!0:B=!0)}let K=O.map(Pt=>x[Pt]);const te=this.style._mergedSourceCaches;this.imageManager=i.imageManager,this.modelManager=i.modelManager,this.symbolFadeChange=i.placement.symbolFadeChange(r.q.now()),this.imageManager.beginFrame();let Q=0,oe=!1;for(const Pt in te){const Kt=te[Pt];Kt.used&&(Kt.prepare(this.context),Kt.getSource().usedInConflation&&++Q)}let Ce=!1;for(const Pt of K)Pt.isHidden(this.transform.zoom)||(Pt.type==="clip"&&(Ce=!0),this.prepareLayer(Pt));const _e={},Ee={},Me={},ze={},qe={};for(const Pt in te){const Kt=te[Pt];_e[Pt]=Kt.getVisibleCoordinates(),Ee[Pt]=_e[Pt].slice().reverse(),Me[Pt]=Kt.getVisibleCoordinates(!0).reverse(),ze[Pt]=Kt.getShadowCasterCoordinates(),qe[Pt]=Kt.sortCoordinatesByDistance(_e[Pt])}const Je=Pt=>{const Kt=this.style.getLayerSourceCache(Pt);return Kt&&Kt.used?Kt.getSource():null};if(Q||Ce||this._clippingActiveLastFrame){const Pt=[],Kt=[];let kt=0;for(const cn of K)this.isSourceForClippingOrConflation(cn,Je(cn))&&(Pt.push(cn),Kt.push(kt)),kt++;if(Pt&&(Ce||Pt.length>1)||this._clippingActiveLastFrame){Ce=!1;const cn=[];for(let qt=0;qt<Pt.length;qt++){const _n=Pt[qt],zn=Kt[qt],un=this.style.getLayerSourceCache(_n);if(!un||!un.used||!un.getSource().usedInConflation&&_n.type!=="clip")continue;let On=r.eu,er=r.bQ.None;const tr=[];let Zn=!0;if(_n.type==="clip"){On=zn;for(const mr of _n.layout.get("clip-layer-types"))er|=mr==="model"?r.bQ.Model:mr==="symbol"?r.bQ.Symbol:r.bQ.FillExtrusion;for(const mr of _n.layout.get("clip-layer-scope"))tr.push(mr);_n.isHidden(this.transform.zoom)?Zn=!1:Ce=!0}Zn&&cn.push({layer:_n.fqid,cache:un,order:On,clipMask:er,clipScope:tr})}this.replacementSource.setSources(cn),oe=!0}}this._clippingActiveLastFrame=Ce,oe||this.replacementSource.clear(),this.conflationActive=oe,this.minCutoffZoom=0,this.longestCutoffRange=0,this.opaquePassCutoff=1/0,this._lastOcclusionLayer=-1,this.layersWithOcclusionOpacity=[];for(let Pt=0;Pt<K.length;Pt++){const Kt=K[Pt],kt=Kt.cutoffRange();if(this.longestCutoffRange=Math.max(kt,this.longestCutoffRange),kt>0){const cn=Je(Kt);cn&&(this.minCutoffZoom=Math.max(cn.minzoom,this.minCutoffZoom)),Kt.minzoom&&(this.minCutoffZoom=Math.max(Kt.minzoom,this.minCutoffZoom))}Kt.is3D(S)&&(this.opaquePassCutoff===1/0&&(this.opaquePassCutoff=Pt),this._lastOcclusionLayer=Pt)}const lt=this.style&&this.style.fog;lt?(this._fogVisible=lt.getOpacity(this.transform.pitch)!==0,this._fogVisible&&this.transform.projection.name!=="globe"&&(this._fogVisible=lt.isVisibleOnFrustum(this.transform.cameraFrustum))):this._fogVisible=!1,this._cachedTileFogOpacities={},this.terrain&&(this.terrain.updateTileBinding(Me),this.opaquePassCutoff=0,O=T(),K=O.map(Pt=>x[Pt]));const ot=this._shadowRenderer;if(ot){ot.updateShadowParameters(this.transform,this.style.directionalLight);for(const Pt in te)for(const Kt of _e[Pt]){let kt={min:0,max:0};this.terrain&&(kt=this.terrain.getMinMaxForTile(Kt)||kt),ot.addShadowReceiver(Kt.toUnwrapped(),kt.min,kt.max)}}this.transform.projection.name!=="globe"||this.globeSharedBuffers||(this.globeSharedBuffers=new r.ev(this.context)),this.style.fog&&this.transform.projection.supportsFog?(this._atmosphere||(this._atmosphere=new Bh(this)),this._atmosphere.update(this)):this._atmosphere&&(this._atmosphere.destroy(),this._atmosphere=void 0);const rt=this._debugParams.forceEnablePrecipitation||!(!this.style||!this.style.snow),Qe=this._debugParams.forceEnablePrecipitation||!(!this.style||!this.style.rain);if(rt&&!this._snow&&(this._snow=new Ms(this)),!rt&&this._snow&&(this._snow.destroy(),delete this._snow),Qe&&!this._rain&&(this._rain=new gw(this)),!Qe&&this._rain&&(this._rain.destroy(),delete this._rain),this._snow&&this._snow.update(this),this._rain&&this._rain.update(this),!Ht.has(this.context.gl))return;this.renderPass="offscreen";for(const Pt of K){const Kt=i.getLayerSourceCache(Pt);if(!Pt.hasOffscreenPass()||Pt.isHidden(this.transform.zoom))continue;const kt=Kt?Ee[Kt.id]:void 0;(Pt.type==="custom"||Pt.type==="raster"||Pt.type==="raster-particle"||Pt.isSky()||kt&&kt.length)&&this.renderLayer(this,Kt,Pt,kt)}this.depthRangeFor3D=[0,1-(K.length+2)*this.numSublayers*this.depthEpsilon],this._shadowRenderer&&(this.renderPass="shadow",this._shadowRenderer.drawShadowPass(this.style,ze)),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]);const ut=this.transform.projection.name==="globe"||this.transform.isHorizonVisible(),pt=(()=>{if(u.showOverdrawInspector)return r.am.black;const Pt=this.style.fog;if(Pt&&this.transform.projection.supportsFog){const Kt=this.style.getLut(Pt.scope);if(!ut){const kt=Pt.properties.get("color-use-theme")==="none",cn=Pt.properties.get("color").toNonPremultipliedRenderColor(kt?null:Kt).toArray01();return new r.am(...cn)}if(ut){const kt=Pt.properties.get("space-color-use-theme")==="none",cn=Pt.properties.get("space-color").toNonPremultipliedRenderColor(kt?null:Kt).toArray01();return new r.am(...cn)}}return r.am.transparent})();if(this.context.clear({color:pt,depth:1}),this.clearStencil(),this._showOverdrawInspector=u.showOverdrawInspector,this.renderPass="opaque",this.style.fog&&this.transform.projection.supportsFog&&this._atmosphere&&!this._showOverdrawInspector&&ut&&this._atmosphere.drawStars(this,this.style.fog),!this.terrain)for(this.currentLayer=O.length-1;this.currentLayer>=0;this.currentLayer--){const Pt=K[this.currentLayer],Kt=i.getLayerSourceCache(Pt);if(Pt.isSky())continue;const kt=Kt?(Pt.is3D(S)?qe:Ee)[Kt.id]:void 0;this._renderTileClippingMasks(Pt,Kt,kt),this.renderLayer(this,Kt,Pt,kt)}if(this.style.fog&&this.transform.projection.supportsFog&&this._atmosphere&&!this._showOverdrawInspector&&ut&&this._atmosphere.drawAtmosphereGlow(this,this.style.fog),this.renderPass="sky",(!this._atmosphere||r.ah(this.transform.zoom)>0)&&(this.transform.projection.name==="globe"||this.transform.isHorizonVisible()))for(this.currentLayer=0;this.currentLayer<O.length;this.currentLayer++){const Pt=K[this.currentLayer],Kt=i.getLayerSourceCache(Pt);Pt.isSky()&&this.renderLayer(this,Kt,Pt,Kt?Ee[Kt.id]:void 0)}function zt(Pt,Kt){let kt;return Kt&&(kt=(Pt.type==="symbol"?Me:Pt.is3D(S)?qe:Ee)[Kt.id]),kt}if(this.renderPass="translucent",this.transform.projection.name==="globe"){for(this.renderElevatedRasterBackface=!0,this.currentLayer=0;this.currentLayer<O.length;){const Pt=K[this.currentLayer];if(Pt.type==="raster"||Pt.type==="raster-particle"){const Kt=i.getLayerSourceCache(Pt);this.renderLayer(this,Kt,Pt,zt(Pt,Kt))}++this.currentLayer}this.renderElevatedRasterBackface=!1}this.currentLayer=0,this.firstLightBeamLayer=Number.MAX_SAFE_INTEGER;let Vt=0;ot&&(Vt=ot.getShadowCastingLayerCount());let nn=!1,sn=-1;for(let Pt=0;Pt<O.length;++Pt){const Kt=K[Pt];Kt.isHidden(this.transform.zoom)||Kt.is3D(S)&&(sn=Pt)}j&&sn===-1&&(B=!0);let wn=!1;for(;this.currentLayer<O.length;){const Pt=K[this.currentLayer],Kt=i.getLayerSourceCache(Pt);if(Pt.isSky())++this.currentLayer;else if(this.terrain&&this.style.isLayerDraped(Pt)){if(Pt.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer),this._lastOcclusionLayer=Math.max(this.currentLayer,this._lastOcclusionLayer)}else{if(!wn&&Pt.is3D(S)&&!S){const kt=this.currentLayer,cn=qt=>{for(this.currentLayer=0;this.currentLayer<K.length;this.currentLayer++){const _n=K[this.currentLayer];if(ec[_n.type]){const zn=this.style.getLayerSourceCache(_n);ec[_n.type](this,zn,_n,zt(_n,zn),qt)}}};cn("initialize"),cn("reset"),this.currentLayer=kt,wn=!0}if(B&&!nn&&this.terrain&&!this.transform.isOrthographic&&(nn=!0,this.blitDepth()),j&&sn!==-1&&this.currentLayer===sn+1&&!this.transform.isOrthographic&&this.blitDepth(),this.terrain||this._renderTileClippingMasks(Pt,Kt,Kt?_e[Kt.id]:void 0),this.renderLayer(this,Kt,Pt,zt(Pt,Kt)),!this.terrain&&ot&&Vt>0&&Pt.hasShadowPass()&&--Vt==0){{this.clearStencil();const kt=this.currentLayer;for(this.currentLayer=0;this.currentLayer<K.length;this.currentLayer++){const cn=K[this.currentLayer];if(Xf[cn.type]){const qt=this.style.getLayerSourceCache(cn);Xf[cn.type](this,qt,cn,zt(cn,qt))}}this.currentLayer=kt}if(ot.drawGroundShadows(),this.firstLightBeamLayer<=this.currentLayer){const kt=this.currentLayer;for(this.renderPass="light-beam",this.currentLayer=this.firstLightBeamLayer;this.currentLayer<=kt;this.currentLayer++){const cn=K[this.currentLayer];if(!cn.hasLightBeamPass())continue;const qt=i.getLayerSourceCache(cn);this.renderLayer(this,qt,cn,qt?Ee[qt.id]:void 0)}this.currentLayer=kt,this.renderPass="translucent"}}if(this.currentLayer>=this._lastOcclusionLayer&&this.layersWithOcclusionOpacity.length>0){const kt=this.currentLayer;this.depthOcclusion=!0;for(const cn of this.layersWithOcclusionOpacity){this.currentLayer=cn;const qt=K[this.currentLayer],_n=i.getLayerSourceCache(qt),zn=_n?Ee[_n.id]:void 0;this.terrain||this._renderTileClippingMasks(qt,_n,_n?_e[_n.id]:void 0),this.renderLayer(this,_n,qt,zn)}this.depthOcclusion=!1,this.currentLayer=kt,this.renderPass="translucent",this.layersWithOcclusionOpacity=[]}++this.currentLayer}}if(this.terrain&&this.terrain.postRender(),this._snow&&this._snow.draw(this),this._rain&&this._rain.draw(this),this.options.showTileBoundaries||this.options.showQueryGeometry||this.options.showTileAABBs){let Pt=null;K.forEach(Kt=>{const kt=i.getLayerSourceCache(Kt);kt&&!Kt.isHidden(this.transform.zoom)&&kt.getVisibleCoordinates().length&&(!Pt||Pt.getSource().maxzoom<kt.getSource().maxzoom)&&(Pt=kt)}),Pt&&this.options.showTileBoundaries&&Ju(this,Pt,Pt.getVisibleCoordinates(),r.am.red,!1,this.options.showParseStatus)}this.terrain&&this._debugParams.showTerrainProxyTiles&&Ju(this,this.terrain.proxySourceCache,this.terrain.proxyCoords,new r.am(1,.8,.1,1),!0,this.options.showParseStatus),this.options.showPadding&&function(Pt){const Kt=Pt.transform.padding;wm(Pt,Pt.transform.height-(Kt.top||0),3,dw),wm(Pt,Kt.bottom||0,3,hw),Sm(Pt,Kt.left||0,3,Ka),Sm(Pt,Pt.transform.width-(Kt.right||0),3,B0);const kt=Pt.transform.centerPoint;(function(cn,qt,_n,zn){Fh(cn,qt-1,_n-10,2,20,zn),Fh(cn,qt-10,_n-1,20,2,zn)})(Pt,kt.x,Pt.transform.height-kt.y,ba)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%Number.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(performance.now()),this.saveCanvasCopy()),oe||(this.conflationActive=!1)}prepareLayer(i){this.gpuTimingStart(i);const{unsupportedLayers:u}=this.transform.projection,p=!u||!u.includes(i.type);if(j0[i.type]&&(p||this.terrain&&i.type==="custom")){const x=this.style.getLayerSourceCache(i);j0[i.type](i,x,this)}this.gpuTimingEnd()}renderLayer(i,u,p,x){p.isHidden(this.transform.zoom)||(p.type==="background"||p.type==="sky"||p.type==="custom"||p.type==="model"||p.type==="raster"||p.type==="raster-particle"||x&&x.length)&&(this.id=p.id,this.gpuTimingStart(p),i.transform.projection.unsupportedLayers&&i.transform.projection.unsupportedLayers.includes(p.type)&&(!i.terrain||p.type!=="custom")||p.type==="clip"||zi[p.type](i,u,p,x,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(i){if(!this.options.gpuTiming)return;const u=this.context.extTimerQuery,p=this.context.gl;let x=this.gpuTimers[i.id];x||(x=this.gpuTimers[i.id]={calls:0,cpuTime:0,query:p.createQuery()}),x.calls++,p.beginQuery(u.TIME_ELAPSED_EXT,x.query)}gpuTimingDeferredRenderStart(){if(this.options.gpuTimingDeferredRender){const i=this.context.extTimerQuery,u=this.context.gl,p=u.createQuery();this.deferredRenderGpuTimeQueries.push(p),u.beginQuery(i.TIME_ELAPSED_EXT,p)}}gpuTimingDeferredRenderEnd(){this.options.gpuTimingDeferredRender&&this.context.gl.endQuery(this.context.extTimerQuery.TIME_ELAPSED_EXT)}gpuTimingEnd(){this.options.gpuTiming&&this.context.gl.endQuery(this.context.extTimerQuery.TIME_ELAPSED_EXT)}collectGpuTimers(){const i=this.gpuTimers;return this.gpuTimers={},i}collectDeferredRenderGpuQueries(){const i=this.deferredRenderGpuTimeQueries;return this.deferredRenderGpuTimeQueries=[],i}queryGpuTimers(i){const u={};for(const p in i){const x=i[p],S=this.context.extTimerQuery,T=S.getQueryParameter(x.query,this.context.gl.QUERY_RESULT)/1e6;S.deleteQueryEXT(x.query),u[p]=T}return u}queryGpuTimeDeferredRender(i){if(!this.options.gpuTimingDeferredRender)return 0;const u=this.context.gl;let p=0;for(const x of i)p+=u.getQueryParameter(x,u.QUERY_RESULT)/1e6,u.deleteQuery(x);return p}translatePosMatrix(i,u,p,x,S){if(!p[0]&&!p[1])return i;const T=S?x==="map"?this.transform.angle:0:x==="viewport"?-this.transform.angle:0;if(T){const j=Math.sin(T),K=Math.cos(T);p=[p[0]*K-p[1]*j,p[0]*j+p[1]*K]}const O=[S?p[0]:r.aw(u,p[0],this.transform.zoom),S?p[1]:r.aw(u,p[1],this.transform.zoom),0],B=new Float32Array(16);return r.bo(B,i,O),B}saveTileTexture(i){const u=i.size[0],p=this._tileTextures[u];p?p.push(i):this._tileTextures[u]=[i]}getTileTexture(i){const u=this._tileTextures[i];return u&&u.length>0?u.pop():null}terrainRenderModeElevated(){return this.style&&!!this.style.getTerrain()&&!!this.terrain&&!this.terrain.renderingToTexture||this.forceTerrainMode}linearFloatFilteringSupported(){return this.context.extTextureFloatLinear!=null}currentGlobalDefines(i,u,p){const x=p===void 0?this.terrain&&this.terrain.renderingToTexture:p,S=[];return this.style&&this.style.enable3dLights()&&(i==="globeRaster"||i==="terrainRaster"?(S.push("LIGHTING_3D_MODE"),S.push("LIGHTING_3D_ALPHA_EMISSIVENESS")):x||S.push("LIGHTING_3D_MODE")),this.renderPass==="shadow"&&(this._shadowMapDebug||S.push("DEPTH_TEXTURE")),this.terrainRenderModeElevated()&&(S.push("TERRAIN"),this.linearFloatFilteringSupported()&&S.push("TERRAIN_DEM_FLOAT_FORMAT")),this.transform.projection.name==="globe"&&S.push("GLOBE"),!this._fogVisible||x||u!==void 0&&!u||S.push("FOG","FOG_DITHERING"),x&&S.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&S.push("OVERDRAW_INSPECTOR"),S}getOrCreateProgram(i,u){this.cache=this.cache||{};const p=u&&u.defines||[],x=u&&u.config,S=this.currentGlobalDefines(i,u&&u.overrideFog,u&&u.overrideRtt).concat(p),T=gm.cacheKey(Nd[i],i,S,x);return this.cache[T]||(this.cache[T]=new gm(this.context,i,Nd[i],x,Oy[i],S)),this.cache[T]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const i=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(i.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new r.T(this.context,this.debugOverlayCanvas,this.context.gl.RGBA8))}destroy(){this._terrain&&this._terrain.destroy(),this._atmosphere&&(this._atmosphere.destroy(),this._atmosphere=void 0),this.globeSharedBuffers&&this.globeSharedBuffers.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this._wireframeDebugCache.destroy(),this.depthFBO&&(this.depthFBO.destroy(),this.depthFBO=void 0,this.depthTexture=void 0),this.emptyDepthTexture&&this.emptyDepthTexture.destroy()}prepareDrawTile(){this.terrain&&this.terrain.prepareDrawTile()}uploadCommonLightUniforms(i,u){if(this.style.enable3dLights()){const p=this.style.directionalLight,x=this.style.ambientLight;if(p&&x){const S=((T,O,B)=>{const j=T.properties.get("direction"),K=T.properties.get("color-use-theme")==="none",te=T.properties.get("color").toNonPremultipliedRenderColor(K?null:B.getLut(T.scope)).toArray01(),Q=T.properties.get("intensity"),oe=O.properties.get("color-use-theme")==="none",Ce=O.properties.get("color").toNonPremultipliedRenderColor(oe?null:B.getLut(O.scope)).toArray01(),_e=O.properties.get("intensity"),Ee=[j.x,j.y,j.z],Me=r.dw(Ce,_e),ze=r.dw(te,Q);return{u_lighting_ambient_color:Me,u_lighting_directional_dir:Ee,u_lighting_directional_color:ze,u_ground_radiance:mm(Ee,ze,Me)}})(p,x,this.style);u.setLightsUniformValues(i,S)}}}uploadCommonUniforms(i,u,p,x,S){if(this.uploadCommonLightUniforms(i,u),this.terrain&&this.terrain.renderingToTexture)return;const T=this.style.fog;if(T){const O=T.getOpacity(this.transform.pitch),B=((j,K,te,Q,oe,Ce,_e,Ee,Me,ze,qe,Je)=>{const lt=j.transform,ot=K.properties.get("color-use-theme")==="none",rt=K.properties.get("color").toNonPremultipliedRenderColor(ot?null:j.style.getLut(K.scope)).toArray01();rt[3]=Q;const Qe=j.frameCounter/1e3%1,[ut,pt]=K.properties.get("vertical-range");return{u_fog_matrix:te?lt.calculateFogTileMatrix(te):Je||j.identityMat,u_fog_range:K.getFovAdjustedRange(lt._fov),u_fog_color:rt,u_fog_horizon_blend:K.properties.get("horizon-blend"),u_fog_vertical_limit:[Math.min(ut,pt),pt],u_fog_temporal_offset:Qe,u_frustum_tl:oe,u_frustum_tr:Ce,u_frustum_br:_e,u_frustum_bl:Ee,u_globe_pos:Me,u_globe_radius:ze,u_viewport:qe,u_globe_transition:r.ah(lt.zoom),u_is_globe:+(lt.projection.name==="globe")}})(this,T,p,O,this.transform.frustumCorners.TL,this.transform.frustumCorners.TR,this.transform.frustumCorners.BR,this.transform.frustumCorners.BL,this.transform.globeCenterInViewSpace,this.transform.globeRadius,[this.transform.width*r.q.devicePixelRatio,this.transform.height*r.q.devicePixelRatio],x);u.setFogUniformValues(i,B)}S&&u.setCutoffUniformValues(i,S.uniformValues)}setTileLoadedFlag(i){this.tileLoaded=i}saveCanvasCopy(){const i=this.canvasCopy();i&&(this.frameCopies.push(i),this.tileLoaded=!1)}canvasCopy(){const i=this.context.gl,u=i.createTexture();return i.bindTexture(i.TEXTURE_2D,u),i.copyTexImage2D(i.TEXTURE_2D,0,i.RGBA,0,0,i.drawingBufferWidth,i.drawingBufferHeight,0),u}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return!1;const i=this.style&&this.style.fog;return!!i&&i.getOpacity(this.transform.pitch)!==0}getBackgroundTiles(){const i=this._backgroundTiles,u=this._backgroundTiles={},p=this.transform.coveringTiles({tileSize:512});for(const x of p)u[x.key]=i[x.key]||new Fu(x,512,this.transform.tileZoom,this,void 0,this.worldview);return u}clearBackgroundTiles(){this._backgroundTiles={}}isSourceForClippingOrConflation(i,u){return!(!i.is3D(!(!this.terrain||!this.terrain.enabled))||i.type!=="clip"&&(i.minzoom&&i.minzoom>this.transform.zoom||(this.style._clipLayerPresent||i.sourceLayer!=="building")&&(!u||u.type!=="batched-model")))}isTileAffectedByFog(i){if(!this.style||!this.style.fog)return!1;if(this.transform.projection.name==="globe")return!0;let u=this._cachedTileFogOpacities[i.key];return u||(this._cachedTileFogOpacities[i.key]=u=this.style.fog.getOpacityForTile(i)),u[0]>=Ft||u[1]>=Ft}setupDepthForOcclusion(i,u,p){const x=this.context,S=x.gl,T=!!p;var O;p||(p={u_dem:2,u_dem_prev:4,u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_depth_range_unpack:[0,1],u_occluder_half_size:16,u_occlusion_depth_offset:-1e-4,u_exaggeration:0}),x.activeTexture.set(S.TEXTURE3),i&&this.depthFBO&&this.depthTexture?(this.depthTexture.bind(S.NEAREST,S.CLAMP_TO_EDGE),p.u_depth_size_inv=[1/this.depthFBO.width,1/this.depthFBO.height],p.u_depth_range_unpack=[2/((O=this.depthRangeFor3D)[1]-O[0]),-1-2*O[0]/(O[1]-O[0])],p.u_occluder_half_size=.5*this.occlusionParams.occluderSize,p.u_occlusion_depth_offset=this.occlusionParams.depthOffset):this.emptyDepthTexture.bind(S.NEAREST,S.CLAMP_TO_EDGE),x.activeTexture.set(S.TEXTURE0),T||u.setTerrainUniformValues(x,p)}}function Jc(f,i){let u=!1,p=null;const x=()=>{p=null,u&&(f(),p=setTimeout(x,i),u=!1)};return()=>(u=!0,p||x(),p)}class G0{constructor(i){this._hashName=i&&encodeURIComponent(i),r.aV(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=Jc(this._updateHashUnthrottled.bind(this),300)}addTo(i){return this._map=i,window.addEventListener("hashchange",this._onHashChange,!1),i.on("moveend",this._updateHash),this}remove(){return this._map?(this._map.off("moveend",this._updateHash),window.removeEventListener("hashchange",this._onHashChange,!1),clearTimeout(this._updateHash()),this._map=void 0,this):this}getHashString(){const i=this._map;if(!i)return"";const u=km(i);if(this._hashName){const p=this._hashName;let x=!1;const S=location.hash.slice(1).split("&").map(T=>{const O=T.split("=")[0];return O===p?(x=!0,`${O}=${u}`):T}).filter(T=>T);return x||S.push(`${p}=${u}`),`#${S.join("&")}`}return`#${u}`}_getCurrentHash(){const i=location.hash.replace("#","");if(this._hashName){let u;return i.split("&").map(p=>p.split("=")).forEach(p=>{p[0]===this._hashName&&(u=p)}),(u&&u[1]||"").split("/")}return i.split("/")}_onHashChange(){const i=this._map;if(!i)return!1;const u=this._getCurrentHash();if(u.length>=3&&!u.some(p=>isNaN(Number(p)))){const p=i.dragRotate.isEnabled()&&i.touchZoomRotate.isEnabled()?+(u[3]||0):i.getBearing();return i.jumpTo({center:[+u[2],+u[1]],zoom:+u[0],bearing:p,pitch:+(u[4]||0)}),!0}return!1}_updateHashUnthrottled(){history.replaceState(history.state,"",location.href.replace(/(#.+)?$/,this.getHashString()))}}function km(f,i){const u=f.getCenter(),p=Math.round(100*f.getZoom())/100,x=Math.ceil((p*Math.LN2+Math.log(512/360/.5))/Math.LN10),S=Math.pow(10,x),T=Math.round(u.lng*S)/S,O=Math.round(u.lat*S)/S,B=f.getBearing(),j=f.getPitch();let K=i?`/${T}/${O}/${p}`:`${p}/${O}/${T}`;return(B||j)&&(K+="/"+Math.round(10*B)/10),j&&(K+=`/${Math.round(j)}`),K}const Hh={linearity:.3,easing:r.ew(0,0,.3,1)},q0=r.h({deceleration:2500,maxSpeed:1400},Hh),_u=r.h({deceleration:20,maxSpeed:1400},Hh),Qc=r.h({deceleration:1e3,maxSpeed:360},Hh),Jf=r.h({deceleration:1e3,maxSpeed:90},Hh);class Mm{constructor(i){this._map=i,this.clear()}clear(){this._inertiaBuffer=[]}record(i){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:r.q.now(),settings:i})}_drainInertiaBuffer(){const i=this._inertiaBuffer,u=r.q.now();for(;i.length>0&&u-i[0].time>160;)i.shift()}_onMoveEnd(i){if(this._map._prefersReducedMotion()||(this._drainInertiaBuffer(),this._inertiaBuffer.length<2))return;const u={zoom:0,bearing:0,pitch:0,pan:new r.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:S}of this._inertiaBuffer)u.zoom+=S.zoomDelta||0,u.bearing+=S.bearingDelta||0,u.pitch+=S.pitchDelta||0,S.panDelta&&u.pan._add(S.panDelta),S.around&&(u.around=S.around),S.pinchAround&&(u.pinchAround=S.pinchAround);const p=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,x={};if(u.pan.mag()){const S=jh(u.pan.mag(),p,r.h({},q0,i||{}));x.offset=u.pan.mult(S.amount/u.pan.mag()),x.center=this._map.transform.center,Uh(x,S)}if(u.zoom){const S=jh(u.zoom,p,_u);x.zoom=this._map.transform.zoom+S.amount,Uh(x,S)}if(u.bearing){const S=jh(u.bearing,p,Qc);x.bearing=this._map.transform.bearing+r.ay(S.amount,-179,179),Uh(x,S)}if(u.pitch){const S=jh(u.pitch,p,Jf);x.pitch=this._map.transform.pitch+S.amount,Uh(x,S)}if(x.zoom||x.bearing){const S=u.pinchAround===void 0?u.around:u.pinchAround;x.around=S?this._map.unproject(S):this._map.getCenter()}return this.clear(),x.noMoveStart=!0,x}}function Uh(f,i){(!f.duration||f.duration<i.duration)&&(f.duration=i.duration,f.easing=i.easing)}function jh(f,i,u){const{maxSpeed:p,linearity:x,deceleration:S}=u,T=r.ay(f*x/(i/1e3),-p,p),O=Math.abs(T)/(S*x);return{easing:u.easing,duration:1e3*O,amount:T*(O/2)}}class $o extends r.A{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,u,p,x={}){const S=fe(u.getCanvasContainer(),p),T=u.unproject(S);super(i,r.h({point:S,lngLat:T,originalEvent:p},x)),this._defaultPrevented=!1,this.target=u}}class Gh extends r.A{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,u,p){const x=i==="touchend"?p.changedTouches:p.touches,S=ce(u.getCanvasContainer(),x),T=S.map(B=>u.unproject(B)),O=S.reduce((B,j,K,te)=>B.add(j.div(te.length)),new r.P(0,0));super(i,{points:S,point:O,lngLats:T,lngLat:u.unproject(O),originalEvent:p}),this._defaultPrevented=!1}}class ed extends r.A{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,u){super("wheel",{originalEvent:u}),this._defaultPrevented=!1}}class W0{constructor(i,u){this._map=i,this._clickTolerance=u.clickTolerance}reset(){this._mousedownPos=void 0}wheel(i){return this._firePreventable(new ed(this._map,i))}mousedown(i,u){return this._mousedownPos=u,this._firePreventable(new $o(i.type,this._map,i))}mouseup(i){this._map.fire(new $o(i.type,this._map,i))}preclick(i){const u=r.h({},i);u.type="preclick",this._map.fire(new $o(u.type,this._map,u))}click(i,u){this._mousedownPos&&this._mousedownPos.dist(u)>=this._clickTolerance||(this.preclick(i),this._map.fire(new $o(i.type,this._map,i)))}dblclick(i){return this._firePreventable(new $o(i.type,this._map,i))}mouseover(i){this._map.fire(new $o(i.type,this._map,i))}mouseout(i){this._map.fire(new $o(i.type,this._map,i))}touchstart(i){return this._firePreventable(new Gh(i.type,this._map,i))}touchmove(i){this._map.fire(new Gh(i.type,this._map,i))}touchend(i){this._map.fire(new Gh(i.type,this._map,i))}touchcancel(i){this._map.fire(new Gh(i.type,this._map,i))}_firePreventable(i){if(this._map.fire(i),i.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Am{constructor(i){this._map=i}reset(){this._delayContextMenu=!1,this._contextMenuEvent=void 0}mousemove(i){this._map.fire(new $o(i.type,this._map,i))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new $o("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(i){this._delayContextMenu?this._contextMenuEvent=i:this._map.fire(new $o(i.type,this._map,i)),this._map.listens("contextmenu")&&i.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class K0{constructor(i,u){this._map=i,this._el=i.getCanvasContainer(),this._container=i.getContainer(),this._clickTolerance=u.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(i,u){this.isEnabled()&&i.shiftKey&&i.button===0&&(Y(),this._startPos=this._lastPos=u,this._active=!0)}mousemoveWindow(i,u){if(!this._active)return;const p=u,x=this._startPos,S=this._lastPos;if(!x||!S||S.equals(p)||!this._box&&p.dist(x)<this._clickTolerance)return;this._lastPos=p,this._box||(this._box=N("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",i));const T=Math.min(x.x,p.x),O=Math.max(x.x,p.x),B=Math.min(x.y,p.y),j=Math.max(x.y,p.y);this._map._requestDomTask(()=>{this._box&&(this._box.style.transform=`translate(${T}px,${B}px)`,this._box.style.width=O-T+"px",this._box.style.height=j-B+"px")})}mouseupWindow(i,u){if(!this._active)return;const p=this._startPos,x=u;if(p&&i.button===0){if(this.reset(),he(),p.x!==x.x||p.y!==x.y)return this._map.fire(new r.A("boxzoomend",{originalEvent:i})),{cameraAnimation:S=>S.fitScreenCoordinates(p,x,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",i)}}keydown(i){this._active&&i.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",i))}blur(){this.reset()}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.remove(),this._box=null),J(),delete this._startPos,delete this._lastPos}_fireEvent(i,u){return this._map.fire(new r.A(i,{originalEvent:u}))}}function Qf(f,i){const u={};for(let p=0;p<f.length;p++)u[f[p].identifier]=i[p];return u}class Ho{constructor(i){this.reset(),this.numTouches=i.numTouches}reset(){this.centroid=void 0,this.startTime=0,this.touches={},this.aborted=!1}touchstart(i,u,p){(this.centroid||p.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===0&&(this.startTime=i.timeStamp),p.length===this.numTouches&&(this.centroid=function(x){const S=new r.P(0,0);for(const T of x)S._add(T);return S.div(x.length)}(u),this.touches=Qf(p,u)))}touchmove(i,u,p){if(this.aborted||!this.centroid)return;const x=Qf(p,u);for(const S in this.touches){const T=x[S];(!T||T.dist(this.touches[S])>30)&&(this.aborted=!0)}}touchend(i,u,p){if((!this.centroid||i.timeStamp-this.startTime>500)&&(this.aborted=!0),p.length===0){const x=!this.aborted&&this.centroid;if(this.reset(),x)return x}}}class ep{constructor(i){this.singleTap=new Ho(i),this.numTaps=i.numTaps,this.reset()}reset(){this.lastTime=1/0,this.lastTap=void 0,this.count=0,this.singleTap.reset()}touchstart(i,u,p){this.singleTap.touchstart(i,u,p)}touchmove(i,u,p){this.singleTap.touchmove(i,u,p)}touchend(i,u,p){const x=this.singleTap.touchend(i,u,p);if(x){const S=i.timeStamp-this.lastTime<500,T=!this.lastTap||this.lastTap.dist(x)<30;if(S&&T||this.reset(),this.count++,this.lastTime=i.timeStamp,this.lastTap=x,this.count===this.numTaps)return this.reset(),x}}}class Y0{constructor(){this._zoomIn=new ep({numTouches:1,numTaps:2}),this._zoomOut=new ep({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(i,u,p){this._zoomIn.touchstart(i,u,p),this._zoomOut.touchstart(i,u,p)}touchmove(i,u,p){this._zoomIn.touchmove(i,u,p),this._zoomOut.touchmove(i,u,p)}touchend(i,u,p){const x=this._zoomIn.touchend(i,u,p),S=this._zoomOut.touchend(i,u,p);return x?(this._active=!0,i.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:T=>T.easeTo({duration:300,zoom:T.getZoom()+1,around:T.unproject(x)},{originalEvent:i})}):S?(this._active=!0,i.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:T=>T.easeTo({duration:300,zoom:T.getZoom()-1,around:T.unproject(S)},{originalEvent:i})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const Z0={0:1,2:2},td={Control:"ctrlKey",Alt:"altKey",Shift:"shiftKey",Meta:"metaKey"};class tp{constructor(i){this.reset(),this._clickTolerance=i.clickTolerance||1}blur(){this.reset()}reset(){this._active=!1,this._moved=!1,this._lastPoint=void 0,this._eventButton=void 0}_correctButton(i,u){return!1}_move(i,u){return{}}mousedown(i,u){if(this._lastPoint)return;const p=me(i);this._correctButton(i,p)&&(this._lastPoint=u,this._eventButton=p)}mousemoveWindow(i,u){const p=this._lastPoint;if(p){if(i.preventDefault(),this._eventButton!=null&&function(x,S){const T=Z0[S];return x.buttons===void 0||(x.buttons&T)!==T}(i,this._eventButton))this.reset();else if(this._moved||!(u.dist(p)<this._clickTolerance))return this._moved=!0,this._lastPoint=u,this._move(p,u)}}mouseupWindow(i){this._lastPoint&&me(i)===this._eventButton&&(this._moved&&he(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class X0 extends tp{mousedown(i,u){super.mousedown(i,u),this._lastPoint&&(this._active=!0)}_correctButton(i,u){return u===0&&!i.ctrlKey}_move(i,u){return{around:u,panDelta:u.sub(i)}}}class Rm extends tp{constructor(i){super(i),this._pitchRotateKey=i.pitchRotateKey?td[i.pitchRotateKey]:void 0}_correctButton(i,u){return this._pitchRotateKey?u===0&&i[this._pitchRotateKey]:u===0&&i.ctrlKey||u===2}_move(i,u){const p=.8*(u.x-i.x);if(p)return this._active=!0,{bearingDelta:p}}contextmenu(i){this._pitchRotateKey||i.preventDefault()}}class Kd extends tp{constructor(i){super(i),this._pitchRotateKey=i.pitchRotateKey?td[i.pitchRotateKey]:void 0}_correctButton(i,u){return this._pitchRotateKey?u===0&&i[this._pitchRotateKey]:u===0&&i.ctrlKey||u===2}_move(i,u){const p=-.5*(u.y-i.y);if(p)return this._active=!0,{pitchDelta:p}}contextmenu(i){this._pitchRotateKey||i.preventDefault()}}class J0{constructor(i,u){this._map=i,this._el=i.getCanvasContainer(),this._minTouches=1,this._clickTolerance=u.clickTolerance||1,this.reset(),r.aV(["_addTouchPanBlocker","_showTouchPanBlockerAlert"],this)}reset(){this._active=!1,this._touches={},this._sum=new r.P(0,0)}touchstart(i,u,p){return this._calculateTransform(i,u,p)}touchmove(i,u,p){if(this._active&&!(p.length<this._minTouches)){if(this._map._cooperativeGestures&&!this._map.isMoving()){if(p.length===1&&!r.ex())return void this._showTouchPanBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}return i.cancelable&&i.preventDefault(),this._calculateTransform(i,u,p)}}touchend(i,u,p){this._calculateTransform(i,u,p),this._active&&p.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(i,u,p){p.length>0&&(this._active=!0);const x=Qf(p,u),S=new r.P(0,0),T=new r.P(0,0);let O=0;for(const j in x){const K=x[j],te=this._touches[j];te&&(S._add(K),T._add(K.sub(te)),O++,x[j]=K)}if(this._touches=x,O<this._minTouches||!T.mag())return;const B=T.div(O);return this._sum._add(B),this._sum.mag()<this._clickTolerance?void 0:{around:S.div(O),panDelta:B}}enable(){this._enabled=!0,this._map._cooperativeGestures&&(this._addTouchPanBlocker(),this._el.classList.add("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page"))}disable(){this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove(),this._el.classList.remove("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page")),this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}_addTouchPanBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=N("div","mapboxgl-touch-pan-blocker",this._map._container),this._alertContainer.textContent=this._map._getUIString("TouchPanBlocker.Message"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showTouchPanBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=window.setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-touch-pan-blocker-show"),this._alertContainer.removeAttribute("role")},500)}}class np{constructor(){this.reset()}reset(){this._active=!1,this._firstTwoTouches=void 0}_start(i){}_move(i,u,p){return{}}touchstart(i,u,p){this._firstTwoTouches||p.length<2||(this._firstTwoTouches=[p[0].identifier,p[1].identifier],this._start([u[0],u[1]]))}touchmove(i,u,p){const x=this._firstTwoTouches;if(!x)return;i.preventDefault();const[S,T]=x,O=qh(p,u,S),B=qh(p,u,T);if(!O||!B)return;const j=this._aroundCenter?null:O.add(B).div(2);return this._move([O,B],j,i)}touchend(i,u,p){if(!this._firstTwoTouches)return;const[x,S]=this._firstTwoTouches,T=qh(p,u,x),O=qh(p,u,S);T&&O||(this._active&&he(),this.reset())}touchcancel(){this.reset()}enable(i){this._enabled=!0,this._aroundCenter=!!i&&i.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function qh(f,i,u){for(let p=0;p<f.length;p++)if(f[p].identifier===u)return i[p]}function rp(f,i){return Math.log(f/i)/Math.LN2}class Q0 extends np{reset(){super.reset(),this._distance=0,this._startDistance=0}_start(i){this._startDistance=this._distance=i[0].dist(i[1])}_move(i,u){const p=this._distance;if(this._distance=i[0].dist(i[1]),this._active||!(Math.abs(rp(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:rp(this._distance,p),pinchAround:u}}}function Pm(f,i){return 180*f.angleWith(i)/Math.PI}class Ky extends np{reset(){super.reset(),this._minDiameter=0,this._startVector=void 0,this._vector=void 0}_start(i){this._startVector=this._vector=i[0].sub(i[1]),this._minDiameter=i[0].dist(i[1])}_move(i,u){const p=this._vector;if(this._vector=i[0].sub(i[1]),p&&(this._active||!this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:Pm(this._vector,p),pinchAround:u}}_isBelowThreshold(i){this._minDiameter=Math.min(this._minDiameter,i.mag());const u=25/(Math.PI*this._minDiameter)*360,p=this._startVector;if(!p)return!1;const x=Pm(i,p);return Math.abs(x)<u}}function Lm(f){return Math.abs(f.y)>Math.abs(f.x)}class Yy extends np{constructor(i){super(),this._map=i}reset(){super.reset(),this._valid=void 0,this._firstMove=void 0,this._lastPoints=void 0}_start(i){this._lastPoints=i,Lm(i[0].sub(i[1]))&&(this._valid=!1)}_move(i,u,p){const x=this._lastPoints;if(!x)return;const S=i[0].sub(x[0]),T=i[1].sub(x[1]);return this._map._cooperativeGestures&&!r.ex()&&p.touches.length<3||(this._valid=this.gestureBeginsVertically(S,T,p.timeStamp),!this._valid)?void 0:(this._lastPoints=i,this._active=!0,{pitchDelta:(S.y+T.y)/2*-.5})}gestureBeginsVertically(i,u,p){if(this._valid!==void 0)return this._valid;const x=i.mag()>=2,S=u.mag()>=2;if(!x&&!S)return;if(!x||!S)return this._firstMove==null&&(this._firstMove=p),p-this._firstMove<100&&void 0;const T=i.y>0==u.y>0;return Lm(i)&&Lm(u)&&T}}const Zy={panStep:100,bearingStep:15,pitchStep:10};class Xy{constructor(){const i=Zy;this._panStep=i.panStep,this._bearingStep=i.bearingStep,this._pitchStep=i.pitchStep,this._rotationDisabled=!1}blur(){this.reset()}reset(){this._active=!1}keydown(i){if(i.altKey||i.ctrlKey||i.metaKey)return;let u=0,p=0,x=0,S=0,T=0;switch(i.keyCode){case 61:case 107:case 171:case 187:u=1;break;case 189:case 109:case 173:u=-1;break;case 37:i.shiftKey?p=-1:(i.preventDefault(),S=-1);break;case 39:i.shiftKey?p=1:(i.preventDefault(),S=1);break;case 38:i.shiftKey?x=1:(i.preventDefault(),T=-1);break;case 40:i.shiftKey?x=-1:(i.preventDefault(),T=1);break;default:return}return this._rotationDisabled&&(p=0,x=0),{cameraAnimation:O=>{const B=O.getZoom();O.easeTo({duration:300,easeId:"keyboardHandler",easing:Jy,zoom:u?Math.round(B)+u*(i.shiftKey?2:1):B,bearing:O.getBearing()+p*this._bearingStep,pitch:O.getPitch()+x*this._pitchStep,offset:[-S*this._panStep,-T*this._panStep],center:O.getCenter()},{originalEvent:i})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Jy(f){return f*(2-f)}const e_=4.000244140625,Qy=1/450;class e1{constructor(i,u){this._map=i,this._el=i.getCanvasContainer(),this._handler=u,this._delta=0,this._lastDelta=0,this._defaultZoomRate=.01,this._wheelZoomRate=Qy,r.aV(["_onTimeout","_addScrollZoomBlocker","_showBlockerAlert"],this)}setZoomRate(i){this._defaultZoomRate=i}setWheelZoomRate(i){this._wheelZoomRate=i}isEnabled(){return!!this._enabled}isActive(){return this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(i){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!i&&i.around==="center",this._map._cooperativeGestures&&this._addScrollZoomBlocker())}disable(){this.isEnabled()&&(this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove()))}wheel(i){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!(i.ctrlKey||i.metaKey||this.isZooming()||r.ex()))return void this._showBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}let u=i.deltaMode===WheelEvent.DOM_DELTA_LINE?40*i.deltaY:i.deltaY;const p=r.q.now(),x=p-(this._lastWheelEventTime||0);this._lastWheelEventTime=p,u!==0&&u%e_==0?this._type="wheel":u!==0&&Math.abs(u)<4?this._type="trackpad":x>400?(this._type=null,this._lastValue=u,this._timeout=window.setTimeout(this._onTimeout,40,i)):this._type||(this._type=Math.abs(x*u)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,u+=this._lastValue)),i.shiftKey&&u&&(u/=4),this._type&&(this._lastWheelEvent=i,this._delta-=u,this._active||this._start(i)),i.preventDefault()}_onTimeout(i){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(i)}_start(i){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const u=fe(this._el,i);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:u,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const i=this._map.transform;this._type==="wheel"&&i.projection.wrap&&(i._center.lng>=180||i._center.lng<=-180)&&(this._prevEase=null,this._easing=null,this._lastWheelEvent=null,this._lastWheelEventTime=0);const u=()=>i._terrainEnabled()&&this._aroundCoord?i.computeZoomRelativeTo(this._aroundCoord):i.zoom;if(this._delta!==0){const j=this._type==="wheel"&&Math.abs(this._delta)>e_?this._wheelZoomRate:this._defaultZoomRate;let K=2/(1+Math.exp(-Math.abs(this._delta*j)));this._delta<0&&K!==0&&(K=1/K);const te=u(),Q=Math.pow(2,te),oe=typeof this._targetZoom=="number"?i.zoomScale(this._targetZoom):Q;this._targetZoom=Math.min(i.maxZoom,Math.max(i.minZoom,i.scaleZoom(oe*K))),this._type==="wheel"&&(this._startZoom=te,this._easing=this._smoothOutEasing(200)),this._lastDelta=this._delta,this._delta=0}const p=typeof this._targetZoom=="number"?this._targetZoom:u(),x=this._startZoom,S=this._easing;let T,O=!1;if(this._type==="wheel"&&x&&S){const j=Math.min((r.q.now()-this._lastWheelEventTime)/200,1),K=S(j);T=r.ai(x,p,K),j<1?this._frameId||(this._frameId=!0):O=!0}else T=p,O=!0;this._active=!0,O&&(this._active=!1,this._finishTimeout=window.setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200));let B=T-u();return B*this._lastDelta<0&&(B=0),{noInertia:!0,needsRenderFrame:!O,zoomDelta:B,around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(i){let u=r.ey;if(this._prevEase){const p=this._prevEase,x=(r.q.now()-p.start)/p.duration,S=p.easing(x+.01)-p.easing(x),T=.27/Math.sqrt(S*S+1e-4)*.01,O=Math.sqrt(.0729-T*T);u=r.ew(T,O,.25,1)}return this._prevEase={start:r.q.now(),duration:i,easing:u},u}blur(){this.reset()}reset(){this._active=!1}_addScrollZoomBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=N("div","mapboxgl-scroll-zoom-blocker",this._map._container),this._alertContainer.textContent=/(Mac|iPad)/i.test(navigator.userAgent)?this._map._getUIString("ScrollZoomBlocker.CmdMessage"):this._map._getUIString("ScrollZoomBlocker.CtrlMessage"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=window.setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.removeAttribute("role")},200)}}class t1{constructor(i,u){this._clickZoom=i,this._tapZoom=u}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class n1{constructor(){this.reset()}reset(){this._active=!1}blur(){this.reset()}dblclick(i,u){return i.preventDefault(),{cameraAnimation:p=>{p.easeTo({duration:300,zoom:p.getZoom()+(i.shiftKey?-1:1),around:p.unproject(u)},{originalEvent:i})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class r1{constructor(){this._tap=new ep({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,this._swipePoint=void 0,this._swipeTouch=0,this._tapTime=0,this._tap.reset()}touchstart(i,u,p){this._swipePoint||(this._tapTime&&i.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?p.length>0&&(this._swipePoint=u[0],this._swipeTouch=p[0].identifier):this._tap.touchstart(i,u,p))}touchmove(i,u,p){if(this._tapTime){if(this._swipePoint){if(p[0].identifier!==this._swipeTouch)return;const x=u[0],S=x.y-this._swipePoint.y;return this._swipePoint=x,i.preventDefault(),this._active=!0,{zoomDelta:S/128}}}else this._tap.touchmove(i,u,p)}touchend(i,u,p){this._tapTime?this._swipePoint&&p.length===0&&this.reset():this._tap.touchend(i,u,p)&&(this._tapTime=i.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class i1{constructor(i,u,p){this._el=i,this._mousePan=u,this._touchPan=p}enable(i){this._inertiaOptions=i||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class _w{constructor(i,u,p){this._pitchWithRotate=i.pitchWithRotate,this._mouseRotate=u,this._mousePitch=p}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class vw{constructor(i,u,p,x){this._el=i,this._touchZoom=u,this._touchRotate=p,this._tapDragZoom=x,this._rotationDisabled=!1,this._enabled=!0}enable(i){this._touchZoom.enable(i),this._rotationDisabled||this._touchRotate.enable(i),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const Om=f=>f.zoom||f.drag||f.pitch||f.rotate;class Us extends r.A{}class s1{constructor(){this.constants=[1,1,.01],this.radius=0}setup(i,u){const p=r.at([],u,i);this.radius=r.ae(p[2]<0?r.eA([],p,this.constants):[p[0],p[1],0])}projectRay(i){r.eA(i,i,this.constants),r.au(i,i),r.eB(i,i,this.constants);const u=r.bY([],i,this.radius);if(u[2]>0){const p=r.bY([],[0,0,1],r.bG(u,[0,0,1])),x=r.bY([],r.au([],[u[0],u[1],0]),this.radius),S=r.cV([],u,r.bY([],r.at([],r.cV([],x,p),u),2));u[0]=S[0],u[1]=S[1]}return u}}function Dm(f){return f.panDelta&&f.panDelta.mag()||f.zoomDelta||f.bearingDelta||f.pitchDelta}class t_{constructor(i,u){this._map=i,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Mm(i),this._bearingSnap=u.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new s1,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(u),r.aV(["handleEvent","handleWindowEvent"],this);const p=this._el;this._listeners=[[p,"touchstart",{passive:!0}],[p,"touchmove",{passive:!1}],[p,"touchend",void 0],[p,"touchcancel",void 0],[p,"mousedown",void 0],[p,"mousemove",void 0],[p,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[p,"mouseover",void 0],[p,"mouseout",void 0],[p,"dblclick",void 0],[p,"click",void 0],[p,"keydown",{capture:!1}],[p,"keyup",void 0],[p,"wheel",{passive:!1}],[p,"contextmenu",void 0],[window,"blur",void 0]];for(const[x,S,T]of this._listeners){const O=x===document?this.handleWindowEvent:this.handleEvent;x.addEventListener(S,O,T)}}destroy(){for(const[i,u,p]of this._listeners){const x=i===document?this.handleWindowEvent:this.handleEvent;i.removeEventListener(u,x,p)}}_addDefaultHandlers(i){const u=this._map,p=u.getCanvasContainer();this._add("mapEvent",new W0(u,i));const x=u.boxZoom=new K0(u,i);this._add("boxZoom",x);const S=new Y0,T=new n1;u.doubleClickZoom=new t1(T,S),this._add("tapZoom",S),this._add("clickZoom",T);const O=new r1;this._add("tapDragZoom",O);const B=u.touchPitch=new Yy(u);this._add("touchPitch",B);const j=new Rm(i),K=new Kd(i);u.dragRotate=new _w(i,j,K),this._add("mouseRotate",j,["mousePitch"]),this._add("mousePitch",K,["mouseRotate"]);const te=new X0(i),Q=new J0(u,i);u.dragPan=new i1(p,te,Q),this._add("mousePan",te),this._add("touchPan",Q,["touchZoom","touchRotate"]);const oe=new Ky,Ce=new Q0;u.touchZoomRotate=new vw(p,Ce,oe,O),this._add("touchRotate",oe,["touchPan","touchZoom"]),this._add("touchZoom",Ce,["touchPan","touchRotate"]),this._add("blockableMapEvent",new Am(u));const _e=u.scrollZoom=new e1(u,this);this._add("scrollZoom",_e,["mousePan"]);const Ee=u.keyboard=new Xy;this._add("keyboard",Ee);for(const Me of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])i.interactive&&i[Me]&&u[Me].enable(i[Me])}_add(i,u,p){this._handlers.push({handlerName:i,handler:u,allowed:p}),this._handlersById[i]=u}stop(i){if(!this._updatingCamera){for(const{handler:u}of this._handlers)u.reset();this._inertia.clear(),this._fireEvents({},{},i),this._changes=[],this._originalZoom=void 0}}isActive(){for(const{handler:i}of this._handlers)if(i.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Om(this._eventsInProgress)||this.isZooming()}_isDragging(){return!!this._eventsInProgress.drag}_blockedByActive(i,u,p){for(const x in i)if(x!==p&&(!u||u.indexOf(x)<0))return!0;return!1}handleWindowEvent(i){this.handleEvent(i,`${i.type}Window`)}_getMapTouches(i){const u=[];for(const p of i)this._el.contains(p.target)&&u.push(p);return u}handleEvent(i,u){this._updatingCamera=!0;const p=i.type==="renderFrame",x=p?void 0:i,S={needsRenderFrame:!1},T={},O={},B=i.touches?this._getMapTouches(i.touches):void 0,j=B?ce(this._el,B):p?void 0:fe(this._el,i);for(const{handlerName:Q,handler:oe,allowed:Ce}of this._handlers){if(!oe.isEnabled())continue;let _e;this._blockedByActive(O,Ce,Q)?oe.reset():oe[u||i.type]&&(_e=oe[u||i.type](i,j,B),this.mergeHandlerResult(S,T,_e,Q,x),_e&&_e.needsRenderFrame&&this._triggerRenderFrame()),(_e||oe.isActive())&&(O[Q]=oe)}const K={};for(const Q in this._previousActiveHandlers)O[Q]||(K[Q]=x);this._previousActiveHandlers=O,(Object.keys(K).length||Dm(S))&&(this._changes.push([S,T,K]),this._triggerRenderFrame()),(Object.keys(O).length||Dm(S))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:te}=S;te&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],te(this._map))}mergeHandlerResult(i,u,p,x,S){if(!p)return;r.h(i,p);const T={handlerName:x,originalEvent:p.originalEvent||S};p.zoomDelta!==void 0&&(u.zoom=T),p.panDelta!==void 0&&(u.drag=T),p.pitchDelta!==void 0&&(u.pitch=T),p.bearingDelta!==void 0&&(u.rotate=T)}_applyChanges(){const i={},u={},p={};for(const[x,S,T]of this._changes)x.panDelta&&(i.panDelta=(i.panDelta||new r.P(0,0))._add(x.panDelta)),x.zoomDelta&&(i.zoomDelta=(i.zoomDelta||0)+x.zoomDelta),x.bearingDelta&&(i.bearingDelta=(i.bearingDelta||0)+x.bearingDelta),x.pitchDelta&&(i.pitchDelta=(i.pitchDelta||0)+x.pitchDelta),x.around!==void 0&&(i.around=x.around),x.aroundCoord!==void 0&&(i.aroundCoord=x.aroundCoord),x.pinchAround!==void 0&&(i.pinchAround=x.pinchAround),x.noInertia&&(i.noInertia=x.noInertia),r.h(u,S),r.h(p,T);this._updateMapTransform(i,u,p),this._changes=[]}_updateMapTransform(i,u,p){const x=this._map,S=x.transform,T=ze=>[ze.x,ze.y,ze.z];if((ze=>{const qe=this._eventsInProgress.drag;return qe&&!this._handlersById[qe.handlerName].isActive()})()&&!Dm(i)){const ze=S.zoom;S.cameraElevationReference="sea",this._originalZoom!=null&&S._orthographicProjectionAtLowPitch&&S.projection.name!=="globe"&&S.pitch===0?(S.cameraElevationReference="ground",S.zoom=this._originalZoom):(S.recenterOnTerrain(),S.cameraElevationReference="ground"),ze!==S.zoom&&this._map._update(!0)}if(S._isCameraConstrained&&x._stop(!0),!Dm(i))return void this._fireEvents(u,p,!0);let{panDelta:O,zoomDelta:B,bearingDelta:j,pitchDelta:K,around:te,aroundCoord:Q,pinchAround:oe}=i;S._isCameraConstrained&&(B>0&&(B=0),S._isCameraConstrained=!1),oe!==void 0&&(te=oe),(B||(ze=>u[ze]&&!this._eventsInProgress[ze])("drag"))&&te&&(this._dragOrigin=T(S.pointCoordinate3D(te)),this._originalZoom=S.zoom,this._trackingEllipsoid.setup(S._camera.position,this._dragOrigin)),S.cameraElevationReference="sea",x._stop(!0),te=te||x.transform.centerPoint,j&&(S.bearing+=j),K&&(S.pitch+=K),S._updateCameraState();const Ce=[0,0,0];if(O)if(S.projection.name==="mercator"){const ze=this._trackingEllipsoid.projectRay(S.screenPointToMercatorRay(te).dir),qe=this._trackingEllipsoid.projectRay(S.screenPointToMercatorRay(te.sub(O)).dir);Ce[0]=qe[0]-ze[0],Ce[1]=qe[1]-ze[1]}else{const ze=S.pointCoordinate(te);if(S.projection.name==="globe"){O=O.rotate(-S.angle);const qe=S._pixelsPerMercatorPixel/S.worldSize;Ce[0]=-O.x*r.ez(r.aY(ze.y))*qe,Ce[1]=-O.y*r.ez(S.center.lat)*qe}else{const qe=S.pointCoordinate(te.sub(O));ze&&qe&&(Ce[0]=qe.x-ze.x,Ce[1]=qe.y-ze.y)}}const _e=S.zoom,Ee=[0,0,0];if(B){const ze=T(Q||S.pointCoordinate3D(te)),qe={dir:r.au([],r.at([],ze,S._camera.position))};if(qe.dir[2]<0){const Je=S.zoomDeltaToMovement(ze,B);r.bY(Ee,qe.dir,Je)}}const Me=r.cV(Ce,Ce,Ee);S._translateCameraConstrained(Me),B&&Math.abs(S.zoom-_e)>1e-4&&S.recenterOnTerrain(),S.cameraElevationReference="ground",this._map._update(),i.noInertia||this._inertia.record(i),this._fireEvents(u,p,!0)}_fireEvents(i,u,p){const x=Om(this._eventsInProgress),S=Om(i),T={};for(const K in i){const{originalEvent:te}=i[K];this._eventsInProgress[K]||(T[`${K}start`]=te),this._eventsInProgress[K]=i[K]}!x&&S&&this._fireEvent("movestart",S.originalEvent);for(const K in T)this._fireEvent(K,T[K]);S&&this._fireEvent("move",S.originalEvent);for(const K in i){const{originalEvent:te}=i[K];this._fireEvent(K,te)}const O={};let B;for(const K in this._eventsInProgress){const{handlerName:te,originalEvent:Q}=this._eventsInProgress[K];this._handlersById[te].isActive()||(delete this._eventsInProgress[K],B=u[te]||Q,O[`${K}end`]=B)}for(const K in O)this._fireEvent(K,O[K]);const j=Om(this._eventsInProgress);if(p&&(x||S)&&!j){this._updatingCamera=!0;const K=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),te=Q=>Q!==0&&-this._bearingSnap<Q&&Q<this._bearingSnap;K?(te(K.bearing||this._map.getBearing())&&(K.bearing=0),this._map.easeTo(K,{originalEvent:B})):(this._map.fire(new r.A("moveend",{originalEvent:B})),te(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(i,u){this._map.fire(new r.A(i,u?{originalEvent:u}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(i=>{this._frameId=void 0,this.handleEvent(new Us("renderFrame",{timeStamp:i})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}const o1="map.setFreeCameraOptions(...) and map.getFreeCameraOptions() are not yet supported for non-mercator projections.";class ip extends r.E{constructor(i,u){super(),this._moving=!1,this._zooming=!1,this.transform=i,this._bearingSnap=u.bearingSnap,this._respectPrefersReducedMotion=u.respectPrefersReducedMotion!==!1,r.aV(["_renderFrameCallback"],this)}getCenter(){return new r.cd(this.transform.center.lng,this.transform.center.lat)}setCenter(i,u){return this.jumpTo({center:i},u)}panBy(i,u,p){return i=r.P.convert(i).mult(-1),this.panTo(this.transform.center,r.h({offset:i},u),p)}panTo(i,u,p){return this.easeTo(r.h({center:i},u),p)}getZoom(){return this.transform.zoom}setZoom(i,u){return this.jumpTo({zoom:i},u),this}zoomTo(i,u,p){return this.easeTo(r.h({zoom:i},u),p)}zoomIn(i,u){return this.zoomTo(this.getZoom()+1,i,u),this}zoomOut(i,u){return this.zoomTo(this.getZoom()-1,i,u),this}getBearing(){return this.transform.bearing}setBearing(i,u){return this.jumpTo({bearing:i},u),this}getPadding(){return this.transform.padding}setPadding(i,u){return this.jumpTo({padding:i},u),this}rotateTo(i,u,p){return this.easeTo(r.h({bearing:i},u),p)}resetNorth(i,u){return this.rotateTo(0,r.h({duration:1e3},i),u),this}resetNorthPitch(i,u){return this.easeTo(r.h({bearing:0,pitch:0,duration:1e3},i),u),this}snapToNorth(i,u){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(i,u):this}getPitch(){return this.transform.pitch}setPitch(i,u){return this.jumpTo({pitch:i},u),this}cameraForBounds(i,u){i=r.aG.convert(i);const p=u&&u.bearing||0,x=u&&u.pitch||0,S=i.getNorthWest(),T=i.getSouthEast();return this._cameraForBounds(this.transform,S,T,p,x,u)}_extendPadding(i){const u={top:0,right:0,bottom:0,left:0};return i==null?r.h({},u,this.transform.padding):typeof i=="number"?{top:i,bottom:i,right:i,left:i}:r.h({},u,i)}_extendCameraOptions(i){return(i=r.h({offset:[0,0],maxZoom:this.transform.maxZoom},i)).padding=this._extendPadding(i.padding),i}_minimumAABBFrustumDistance(i,u){const p=u.max[0]-u.min[0],x=u.max[1]-u.min[1];return p/x>i.aspect?p/(2*Math.tan(.5*i.fovX)*i.aspect):x/(2*Math.tan(.5*i.fovY)*i.aspect)}_cameraForBoundsOnGlobe(i,u,p,x,S,T){const O=i.clone(),B=this._extendCameraOptions(T);O.bearing=x,O.pitch=S;const j=r.cd.convert(u),K=r.cd.convert(p),te=.5*(j.lat+K.lat),Q=.5*(j.lng+K.lng),oe=r.eC(te,Q),Ce=r.au([],oe),_e=r.au([],r.bF([],Ce,[0,1,0])),Ee=r.bF([],_e,Ce),Me=[_e[0],_e[1],_e[2],0,Ee[0],Ee[1],Ee[2],0,Ce[0],Ce[1],Ce[2],0,0,0,0,1],ze=[oe,r.eC(j.lat,j.lng),r.eC(K.lat,j.lng),r.eC(K.lat,K.lng),r.eC(j.lat,K.lng),r.eC(te,j.lng),r.eC(te,K.lng),r.eC(j.lat,Q),r.eC(K.lat,Q)];let qe=r.cW.fromPoints(ze.map(qt=>[r.bG(_e,qt),r.bG(Ee,qt),r.bG(Ce,qt)]));const Je=r.ad([],qe.center,Me);r.eD(Je)===0&&r.eE(Je,0,0,1),r.au(Je,Je),r.bY(Je,Je,r.aB),O.center=r.eF(Je);const lt=O.getWorldToCameraMatrix(),ot=r.bi(new Float64Array(16),lt);qe=r.cW.applyTransform(qe,r.az([],lt,Me));const rt=this._extendAABB(qe,O,B,x);if(!rt)return void r.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");qe=rt,r.ad(Je,Je,lt);const Qe=.5*(qe.max[2]-qe.min[2]),ut=this._minimumAABBFrustumDistance(O,qe),pt=r.bY([],[0,0,1],Qe),zt=r.cV(pt,Je,pt),Vt=ut+(O.pitch===0?0:r.bD(Je,zt)),nn=O.globeCenterInViewSpace,sn=r.at([],Je,[nn[0],nn[1],nn[2]]);r.au(sn,sn),r.bY(sn,sn,Vt);const wn=r.cV([],Je,sn);r.ad(wn,wn,ot);const Pt=r.eq/r.aB,Kt=r.ae(wn),kt=r.c6(Math.max(Kt*Pt-r.eq,Number.EPSILON),0),cn=Math.min(O.zoomFromMercatorZAdjusted(kt),B.maxZoom);return cn>.5*(r.cL+r.cx)?(O.setProjection({name:"mercator"}),O.zoom=cn,this._cameraForBounds(O,u,p,x,S,T)):{center:O.center,zoom:cn,bearing:x,pitch:S}}_extendAABB(i,u,p,x){const S=.5*((p.padding.left||0)+(p.padding.right||0)),T=.5*((p.padding.top||0)+(p.padding.bottom||0)),O=T,B=S,j=S,K=T,te=u.width-(B+j),Q=u.height-(O+K),oe=r.at([],i.max,i.min),Ce=Math.min(te/oe[0],Q/oe[1]),_e=Math.min(u.scaleZoom(u.scale*Ce),p.maxZoom);if(isNaN(_e))return null;const Ee=u.scale/u.zoomScale(_e),Me=new r.cW([i.min[0]-B*Ee,i.min[1]-K*Ee,i.min[2]],[i.max[0]+j*Ee,i.max[1]+O*Ee,i.max[2]]),ze=(typeof p.offset.x=="number"&&typeof p.offset.y=="number"?new r.P(p.offset.x,p.offset.y):r.P.convert(p.offset)).rotate(-r.al(x));return Me.center[0]-=ze.x*Ee,Me.center[1]+=ze.y*Ee,Me}queryTerrainElevation(i,u){const p=this.transform.elevation;return p?(u=r.h({},{exaggerated:!0},u),p.getAtPoint(r.ac.fromLngLat(i),null,u.exaggerated)):null}_cameraForBounds(i,u,p,x,S,T){if(i.projection.name==="globe")return this._cameraForBoundsOnGlobe(i,u,p,x,S,T);const O=i.clone(),B=this._extendCameraOptions(T);O.bearing=x,O.pitch=S;const j=r.cd.convert(u),K=r.cd.convert(p),te=new r.cd(j.lng,K.lat),Q=new r.cd(K.lng,j.lat),oe=O.project(j),Ce=O.project(K),_e=this.queryTerrainElevation(j),Ee=this.queryTerrainElevation(K),Me=this.queryTerrainElevation(te),ze=this.queryTerrainElevation(Q),qe=[[oe.x,oe.y,Math.min(_e||0,Ee||0,Me||0,ze||0)],[Ce.x,Ce.y,Math.max(_e||0,Ee||0,Me||0,ze||0)]];let Je=r.cW.fromPoints(qe);const lt=O.getWorldToCameraMatrix(),ot=r.bi(new Float64Array(16),lt);Je=r.cW.applyTransform(Je,lt);const rt=this._extendAABB(Je,O,B,x);if(!rt)return void r.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");Je=rt;const Qe=.5*r.at([],Je.max,Je.min)[2],ut=this._minimumAABBFrustumDistance(O,Je),pt=[0,0,1,0];r.aA(pt,pt,lt),r.eG(pt,pt);const zt=r.bY([],pt,ut+Qe),Vt=r.cV([],Je.center,zt);r.ad(Je.center,Je.center,ot),r.ad(Vt,Vt,ot);const nn=O.unproject(new r.P(Je.center[0],Je.center[1])),sn=r.eH(O.projection,nn),wn=Math.pow(2,sn),Pt=Math.min(O._zoomFromMercatorZ(Vt[2]*O.pixelsPerMeter*wn/O.worldSize),B.maxZoom);return O.mercatorFromTransition&&Pt<.5*(r.cL+r.cx)?(O.setProjection({name:"globe"}),O.zoom=Pt,this._cameraForBounds(O,u,p,x,S,T)):{center:nn,zoom:Pt,bearing:x,pitch:S}}fitBounds(i,u,p){const x=this.cameraForBounds(i,u);return this._fitInternal(x,u,p)}fitScreenCoordinates(i,u,p,x,S){const T=r.P.convert(i),O=r.P.convert(u),B=new r.P(Math.min(T.x,O.x),Math.min(T.y,O.y)),j=new r.P(Math.max(T.x,O.x),Math.max(T.y,O.y));if(this.transform.projection.name==="mercator"&&this.transform.anyCornerOffEdge(T,O))return this;const K=this.transform.pointLocation3D(B),te=this.transform.pointLocation3D(j),Q=this.transform.pointLocation3D(new r.P(B.x,j.y)),oe=this.transform.pointLocation3D(new r.P(j.x,B.y)),Ce=[Math.min(K.lng,te.lng,Q.lng,oe.lng),Math.min(K.lat,te.lat,Q.lat,oe.lat)],_e=[Math.max(K.lng,te.lng,Q.lng,oe.lng),Math.max(K.lat,te.lat,Q.lat,oe.lat)],Ee=x&&x.pitch?x.pitch:this.getPitch(),Me=this._cameraForBounds(this.transform,Ce,_e,p,Ee,x);return this._fitInternal(Me,x,S)}_fitInternal(i,u,p){return i?(u=r.h(i,u)).linear?this.easeTo(u,p):this.flyTo(u,p):this}jumpTo(i,u){this.stop();const p=i.preloadOnly?this.transform.clone():this.transform;let x=!1,S=!1,T=!1;"zoom"in i&&p.zoom!==+i.zoom&&(x=!0,p.zoom=+i.zoom),i.center!==void 0&&(p.center=r.cd.convert(i.center)),"bearing"in i&&p.bearing!==+i.bearing&&(S=!0,p.bearing=+i.bearing),"pitch"in i&&p.pitch!==+i.pitch&&(T=!0,p.pitch=+i.pitch);const O=typeof i.padding=="number"?this._extendPadding(i.padding):i.padding;if(i.padding!=null&&!p.isPaddingEqual(O))if(i.retainPadding===!1){const B=p.clone();B.padding=O,p.setLocationAtPoint(p.center,B.centerPoint)}else p.padding=O;return i.preloadOnly?(this._preloadTiles(p),this):(this.fire(new r.A("movestart",u)).fire(new r.A("move",u)),x&&this.fire(new r.A("zoomstart",u)).fire(new r.A("zoom",u)).fire(new r.A("zoomend",u)),S&&this.fire(new r.A("rotatestart",u)).fire(new r.A("rotate",u)).fire(new r.A("rotateend",u)),T&&this.fire(new r.A("pitchstart",u)).fire(new r.A("pitch",u)).fire(new r.A("pitchend",u)),this.fire(new r.A("moveend",u)))}getFreeCameraOptions(){return this.transform.projection.supportsFreeCamera||r.w(o1),this.transform.getFreeCameraOptions()}setFreeCameraOptions(i,u){const p=this.transform;if(!p.projection.supportsFreeCamera)return r.w(o1),this;this.stop();const x=p.zoom,S=p.pitch,T=p.bearing;p.setFreeCameraOptions(i);const O=x!==p.zoom,B=S!==p.pitch,j=T!==p.bearing;return this.fire(new r.A("movestart",u)).fire(new r.A("move",u)),O&&this.fire(new r.A("zoomstart",u)).fire(new r.A("zoom",u)).fire(new r.A("zoomend",u)),j&&this.fire(new r.A("rotatestart",u)).fire(new r.A("rotate",u)).fire(new r.A("rotateend",u)),B&&this.fire(new r.A("pitchstart",u)).fire(new r.A("pitch",u)).fire(new r.A("pitchend",u)),this.fire(new r.A("moveend",u)),this}easeTo(i,u){this._stop(!1,i.easeId),((i=r.h({offset:[0,0],duration:500,easing:r.ey},i)).animate===!1||this._prefersReducedMotion(i))&&(i.duration=0);const p=this.transform,x=this.getZoom(),S=this.getBearing(),T=this.getPitch(),O=this.getPadding(),B="zoom"in i?+i.zoom:x,j="bearing"in i?this._normalizeBearing(i.bearing,S):S,K="pitch"in i?+i.pitch:T,te=this._extendPadding(i.padding),Q=r.P.convert(i.offset);let oe,Ce,_e;if(p.projection.name==="globe"){const pt=r.ac.fromLngLat(p.center),zt=Q.rotate(-p.angle);pt.x+=zt.x/p.worldSize,pt.y+=zt.y/p.worldSize;const Vt=pt.toLngLat(),nn=r.cd.convert(i.center||Vt);this._normalizeCenter(nn),oe=p.centerPoint.add(zt),Ce=new r.P(pt.x,pt.y).mult(p.worldSize),_e=new r.P(r.aD(nn.lng),r.aH(nn.lat)).mult(p.worldSize).sub(Ce)}else{oe=p.centerPoint.add(Q);const pt=p.pointLocation(oe),zt=r.cd.convert(i.center||pt);this._normalizeCenter(zt),Ce=p.project(pt),_e=p.project(zt).sub(Ce)}const Ee=p.zoomScale(B-x);let Me,ze;i.around&&(Me=r.cd.convert(i.around),ze=p.locationPoint(Me));const qe=this._zooming||B!==x,Je=this._rotating||S!==j,lt=this._pitching||K!==T,ot=!p.isPaddingEqual(te),rt=i.retainPadding===!1?p.clone():p,Qe=pt=>zt=>{if(qe&&(pt.zoom=r.ai(x,B,zt)),Je&&(pt.bearing=r.ai(S,j,zt)),lt&&(pt.pitch=r.ai(T,K,zt)),ot&&(rt.interpolatePadding(O,te,zt),oe=rt.centerPoint.add(Q)),Me)pt.setLocationAtPoint(Me,ze);else{const Vt=pt.zoomScale(pt.zoom-x),nn=B>x?Math.min(2,Ee):Math.max(.5,Ee),sn=Math.pow(nn,1-zt),wn=pt.unproject(Ce.add(_e.mult(zt*sn)).mult(Vt));pt.setLocationAtPoint(pt.renderWorldCopies?wn.wrap():wn,oe)}return i.preloadOnly||this._fireMoveEvents(u),pt};if(i.preloadOnly){const pt=this._emulate(Qe,i.duration,p);return this._preloadTiles(pt),this}const ut={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=qe,this._rotating=Je,this._pitching=lt,this._padding=ot,this._easeId=i.easeId,this._prepareEase(u,i.noMoveStart,ut),this._ease(Qe(p),pt=>{p.cameraElevationReference==="sea"&&p.recenterOnTerrain(),this._afterEase(u,pt)},i),this}_prepareEase(i,u,p={}){this._moving=!0,this.transform.cameraElevationReference="sea",this.transform._orthographicProjectionAtLowPitch&&this.transform.pitch===0&&this.transform.projection.name!=="globe"&&(this.transform.cameraElevationReference="ground"),u||p.moving||this.fire(new r.A("movestart",i)),this._zooming&&!p.zooming&&this.fire(new r.A("zoomstart",i)),this._rotating&&!p.rotating&&this.fire(new r.A("rotatestart",i)),this._pitching&&!p.pitching&&this.fire(new r.A("pitchstart",i))}_fireMoveEvents(i){this.fire(new r.A("move",i)),this._zooming&&this.fire(new r.A("zoom",i)),this._rotating&&this.fire(new r.A("rotate",i)),this._pitching&&this.fire(new r.A("pitch",i))}_afterEase(i,u){if(this._easeId&&u&&this._easeId===u)return;this._easeId=void 0,this.transform.cameraElevationReference="ground";const p=this._zooming,x=this._rotating,S=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,p&&this.fire(new r.A("zoomend",i)),x&&this.fire(new r.A("rotateend",i)),S&&this.fire(new r.A("pitchend",i)),this.fire(new r.A("moveend",i))}flyTo(i,u){if(this._prefersReducedMotion(i)){const qt=r.aF(i,["center","zoom","bearing","pitch","around","padding","retainPadding"]);return this.jumpTo(qt,u)}this.stop(),i=r.h({offset:[0,0],speed:1.2,curve:1.42,easing:r.ey},i);const p=this.transform,x=this.getZoom(),S=this.getBearing(),T=this.getPitch(),O=this.getPadding(),B="zoom"in i?r.ay(+i.zoom,p.minZoom,p.maxZoom):x,j="bearing"in i?this._normalizeBearing(i.bearing,S):S,K="pitch"in i?+i.pitch:T,te=this._extendPadding(i.padding),Q=p.zoomScale(B-x),oe=r.P.convert(i.offset);let Ce=p.centerPoint.add(oe);const _e=p.pointLocation(Ce),Ee=r.cd.convert(i.center||_e);this._normalizeCenter(Ee);const Me=p.project(_e),ze=p.project(Ee).sub(Me);let qe=i.curve;const Je=Math.max(p.width,p.height),lt=Je/Q,ot=ze.mag();if("minZoom"in i){const qt=r.ay(Math.min(i.minZoom,x,B),p.minZoom,p.maxZoom),_n=Je/p.zoomScale(qt-x);qe=Math.sqrt(_n/ot*2)}const rt=qe*qe;function Qe(qt){const _n=(lt*lt-Je*Je+(qt?-1:1)*rt*rt*ot*ot)/(2*(qt?lt:Je)*rt*ot);return Math.log(Math.sqrt(_n*_n+1)-_n)}function ut(qt){return(Math.exp(qt)-Math.exp(-qt))/2}function pt(qt){return(Math.exp(qt)+Math.exp(-qt))/2}const zt=Qe(0);let Vt=function(qt){return pt(zt)/pt(zt+qe*qt)},nn=function(qt){return Je*((pt(zt)*(ut(_n=zt+qe*qt)/pt(_n))-ut(zt))/rt)/ot;var _n},sn=(Qe(1)-zt)/qe;if(Math.abs(ot)<1e-6||!isFinite(sn)){if(Math.abs(Je-lt)<1e-6)return this.easeTo(i,u);const qt=lt<Je?-1:1;sn=Math.abs(Math.log(lt/Je))/qe,nn=function(){return 0},Vt=function(_n){return Math.exp(qt*qe*_n)}}i.duration="duration"in i?+i.duration:1e3*sn/("screenSpeed"in i?+i.screenSpeed/qe:+i.speed),i.maxDuration&&i.duration>i.maxDuration&&(i.duration=0);const wn=S!==j,Pt=K!==T,Kt=!p.isPaddingEqual(te),kt=i.retainPadding===!1?p.clone():p,cn=qt=>_n=>{const zn=_n*sn,un=1/Vt(zn);qt.zoom=_n===1?B:x+qt.scaleZoom(un),wn&&(qt.bearing=r.ai(S,j,_n)),Pt&&(qt.pitch=r.ai(T,K,_n)),Kt&&(kt.interpolatePadding(O,te,_n),Ce=kt.centerPoint.add(oe));const On=_n===1?Ee:qt.unproject(Me.add(ze.mult(nn(zn))).mult(un));return qt.setLocationAtPoint(qt.renderWorldCopies?On.wrap():On,Ce),qt._updateCameraOnTerrain(),i.preloadOnly||this._fireMoveEvents(u),qt};if(i.preloadOnly){const qt=this._emulate(cn,i.duration,p);return this._preloadTiles(qt),this}return this._zooming=!0,this._rotating=wn,this._pitching=Pt,this._padding=Kt,this._prepareEase(u,!1),this._ease(cn(p),()=>this._afterEase(u),i),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_requestRenderFrame(i){}_cancelRenderFrame(i){}_stop(i,u){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),this._easeFrameId=void 0,this._onEaseFrame=void 0),this._onEaseEnd){const p=this._onEaseEnd;this._onEaseEnd=void 0,p.call(this,u)}if(!i){const p=this.handlers;p&&p.stop(!1)}return this}_ease(i,u,p){p.animate===!1||p.duration===0?(i(1),u()):(this._easeStart=r.q.now(),this._easeOptions=p,this._onEaseFrame=i,this._onEaseEnd=u,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const i=Math.min((r.q.now()-this._easeStart)/this._easeOptions.duration,1),u=this._onEaseFrame;u&&u(this._easeOptions.easing(i)),i<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(i,u){i=r.bX(i,-180,180);const p=Math.abs(i-u);return Math.abs(i-360-u)<p&&(i-=360),Math.abs(i+360-u)<p&&(i+=360),i}_normalizeCenter(i){const u=this.transform;if(u.maxBounds||u.projection.name!=="globe"&&!u.renderWorldCopies)return;const p=i.lng-u.center.lng;i.lng+=p>180?-360:p<-180?360:0}_prefersReducedMotion(i){return this._respectPrefersReducedMotion&&r.q.prefersReducedMotion&&!(i&&i.essential)}_emulate(i,u,p){const x=Math.ceil(15*u/1e3),S=[],T=i(p.clone());for(let O=0;O<=x;O++){const B=T(O/x);S.push(B.clone())}return S}_preloadTiles(i,u){}}class n_{constructor(i={}){this.options=i,r.aV(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(i){const u=this.options&&this.options.compact,p=i._getUIString("AttributionControl.ToggleAttribution");this._map=i,this._container=N("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=N("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._compactButton.setAttribute("aria-label",p);const x=N("span","mapboxgl-ctrl-icon",this._compactButton);return x.setAttribute("aria-hidden","true"),x.setAttribute("title",p),this._innerContainer=N("div","mapboxgl-ctrl-attrib-inner",this._container),u&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),u===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){this._container.remove(),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","true"))}_updateEditLink(){let i=this._editLink;i||(i=this._editLink=this._container.querySelector(".mapbox-improve-map"));const u=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||r.e.ACCESS_TOKEN}];if(i){const p=u.reduce((x,S,T)=>(S.value&&(x+=`${S.key}=${S.value}${T<u.length-1?"&":""}`),x),"?");i.href=`${r.e.FEEDBACK_URL}/${p}#${km(this._map,!0)}`,i.rel="noopener nofollow"}}_updateData(i){!i||i.sourceDataType!=="metadata"&&i.sourceDataType!=="visibility"&&i.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let i=[];if(this._map.style.stylesheet){const x=this._map.style.stylesheet;this.styleOwner=x.owner,this.styleId=x.id}const u=this._map.style._mergedSourceCaches;for(const x in u){const S=u[x];if(S.used){const T=S.getSource();T.attribution&&i.indexOf(T.attribution)<0&&i.push(T.attribution)}}i.sort((x,S)=>x.length-S.length),i=i.filter((x,S)=>{for(let T=S+1;T<i.length;T++)if(i[T].indexOf(x)>=0)return!1;return!0}),this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?i=[...this.options.customAttribution,...i]:i.unshift(this.options.customAttribution));const p=i.join(" | ");p!==this._attribHTML&&(this._attribHTML=p,i.length?(this._innerContainer.innerHTML=p,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class zm{constructor(){r.aV(["_updateLogo","_updateCompact"],this)}onAdd(i){this._map=i,this._container=N("div","mapboxgl-ctrl");const u=N("a","mapboxgl-ctrl-logo");return u.target="_blank",u.rel="noopener nofollow",u.href="https://www.mapbox.com/",u.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),u.setAttribute("rel","noopener nofollow"),this._container.appendChild(u),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){this._container.remove(),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(i){i&&i.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return!0;const i=this._map.style._sourceCaches;if(Object.entries(i).length===0)return!0;for(const u in i){const p=i[u].getSource();if(p.hasOwnProperty("mapbox_logo")&&!p.mapbox_logo)return!1}return!0}_updateCompact(){const i=this._container.children;if(i.length){const u=i[0];this._map.getCanvasContainer().offsetWidth<250?u.classList.add("mapboxgl-compact"):u.classList.remove("mapboxgl-compact")}}}class sp{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(i){const u=++this._id;return this._queue.push({callback:i,id:u,cancelled:!1}),u}remove(i){const u=this._currentlyRunning,p=u?this._queue.concat(u):this._queue;for(const x of p)if(x.id===i)return void(x.cancelled=!0)}run(i=0){const u=this._currentlyRunning=this._queue;this._queue=[];for(const p of u)if(!p.cancelled&&(p.callback(i),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}class tc{constructor(i){this.jumpTo(i)}getValue(i){if(i<=this._startTime)return this._start;if(i>=this._endTime)return this._end;const u=r.dk((i-this._startTime)/(this._endTime-this._startTime));return this._start*(1-u)+this._end*u}isEasing(i){return i>=this._startTime&&i<=this._endTime}jumpTo(i){this._startTime=-1/0,this._endTime=-1/0,this._start=i,this._end=i}easeTo(i,u,p){this._start=this.getValue(u),this._end=i,this._startTime=u,this._endTime=u+p}}const Nm={"AttributionControl.ToggleAttribution":"Toggle attribution","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox homepage","Map.Title":"Map","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScrollZoomBlocker.CtrlMessage":"Use ctrl + scroll to zoom the map","ScrollZoomBlocker.CmdMessage":"Use  + scroll to zoom the map","TouchPanBlocker.Message":"Use two fingers to move the map"};class no extends r.A{constructor(i,u,p,x){const{point:S,lngLat:T,originalEvent:O,target:B}=i;super(i.type,{point:S,lngLat:T,originalEvent:O,target:B}),this.preventDefault=()=>{i.preventDefault()},this.id=u,this.interaction=p,this.feature=x}}class vu{constructor(i){this.map=i,this.interactionsByType=new Map,this.delegatedInteractions=new Map,this.typeById=new Map,this.filters=new Map,this.handleType=this.handleType.bind(this),this.handleMove=this.handleMove.bind(this),this.handleOut=this.handleOut.bind(this),this.hoveredFeatures=new Map,this.prevHoveredFeatures=new Map}add(i,u){if(this.typeById.has(i))throw new Error(`Interaction id "${i}" already exists.`);const p=u.filter;let x=u.type;p&&this.filters.set(i,r.b3(p)),x==="mouseover"&&(x="mouseenter"),x==="mouseout"&&(x="mouseleave");const S=this.interactionsByType.get(x)||new Map;x==="mouseenter"||x==="mouseleave"?(this.delegatedInteractions.size===0&&(this.map.on("mousemove",this.handleMove),this.map.on("mouseout",this.handleOut)),this.delegatedInteractions.set(i,u)):S.size===0&&this.map.on(x,this.handleType),S.size===0&&this.interactionsByType.set(x,S),S.set(i,u),this.typeById.set(i,x)}get(i){const u=this.typeById.get(i);if(!u)return;const p=this.interactionsByType.get(u);return p?p.get(i):void 0}remove(i){const u=this.typeById.get(i);if(!u)return;this.typeById.delete(i),this.filters.delete(i);const p=this.interactionsByType.get(u);p&&(p.delete(i),u==="mouseenter"||u==="mouseleave"?(this.delegatedInteractions.delete(i),this.delegatedInteractions.size===0&&(this.map.off("mousemove",this.handleMove),this.map.off("mouseout",this.handleOut))):p.size===0&&this.map.off(u,this.handleType))}queryTargets(i,u){const p=[];for(const[x,S]of u)S.target&&p.push({targetId:x,target:S.target,filter:this.filters.get(x)});return this.map.style.queryRenderedTargets(i,p,this.map.transform)}handleMove(i){this.prevHoveredFeatures=this.hoveredFeatures,this.hoveredFeatures=new Map;const u=this.queryTargets(i.point,Array.from(this.delegatedInteractions).reverse());u.length&&(i.type="mouseenter",this.handleType(i,u));const p=new Map;for(const[x,{feature:S}]of this.prevHoveredFeatures)this.hoveredFeatures.has(x)||p.set(S.id,S);p.size&&(i.type="mouseleave",this.handleType(i,Array.from(p.values())))}handleOut(i){const u=Array.from(this.hoveredFeatures.values()).map(({feature:p})=>p);u.length&&(i.type="mouseleave",this.handleType(i,u)),this.hoveredFeatures.clear()}handleType(i,u){const p=i.type==="mouseenter";if(p&&!this.interactionsByType.has(i.type))return void r.w("mouseenter interaction required for mouseleave to work.");const x=Array.from(this.interactionsByType.get(i.type)).reverse(),S=!!u;u=u||this.queryTargets(i.point,x);let T=!1;const O=new Set;for(const B of u){for(const[j,K]of x){if(!K.target)continue;const te=B.variants?B.variants[j]:null;if(te){for(const Q of te){if(Nu(Q,B,O,j))continue;const oe=new r.de(B,Q),Ce=Tc(Q,B,j);S&&(oe.state=this.map.getFeatureState(oe));const _e=p?this.prevHoveredFeatures.get(Ce):null,Ee=new no(i,j,K,oe),Me=_e?_e.stop:K.handler(Ee);if(p&&this.hoveredFeatures.set(Ce,{feature:B,stop:Me}),Me!==!1){T=!0;break}}if(T)break}}if(T)break}if(!T)for(const[B,j]of x){const{handler:K,target:te}=j;if(!te&&K(new no(i,B,j,null))!==!1)break}}}function op(f,i){if(Array.isArray(f)&&Array.isArray(i)){const u=new Set(f),p=new Set(i);return u.size===p.size&&f.every(x=>p.has(x))}return r.bv(f,i)}const Fm={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,performanceMetricsCollection:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,antialias:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,minTileCacheSize:null,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,respectPrefersReducedMotion:!0,crossSourceCollisions:!0,collectResourceTiming:!1,testMode:!1,precompilePrograms:!0,scaleFactor:1,spriteFormat:"auto"},a1={showCompass:!0,showZoom:!0,visualizePitch:!1};class yw{constructor(i,u,p=!1){this._clickTolerance=10,this.element=u,this.mouseRotate=new Rm({clickTolerance:i.dragRotate._mouseRotate._clickTolerance}),this.map=i,p&&(this.mousePitch=new Kd({clickTolerance:i.dragRotate._mousePitch._clickTolerance})),r.aV(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),u.addEventListener("mousedown",this.mousedown),u.addEventListener("touchstart",this.touchstart,{passive:!1}),u.addEventListener("touchmove",this.touchmove),u.addEventListener("touchend",this.touchend),u.addEventListener("touchcancel",this.reset)}down(i,u){this.mouseRotate.mousedown(i,u),this.mousePitch&&this.mousePitch.mousedown(i,u),Y()}move(i,u){const p=this.map,x=this.mouseRotate.mousemoveWindow(i,u),S=x&&x.bearingDelta;if(S&&p.setBearing(p.getBearing()+S),this.mousePitch){const T=this.mousePitch.mousemoveWindow(i,u),O=T&&T.pitchDelta;O&&p.setPitch(p.getPitch()+O)}}off(){const i=this.element;i.removeEventListener("mousedown",this.mousedown),i.removeEventListener("touchstart",this.touchstart),i.removeEventListener("touchmove",this.touchmove),i.removeEventListener("touchend",this.touchend),i.removeEventListener("touchcancel",this.reset),this.offTemp()}offTemp(){J(),window.removeEventListener("mousemove",this.mousemove),window.removeEventListener("mouseup",this.mouseup)}mousedown(i){this.down(r.h({},i,{ctrlKey:!0,preventDefault:()=>i.preventDefault()}),fe(this.element,i)),window.addEventListener("mousemove",this.mousemove),window.addEventListener("mouseup",this.mouseup)}mousemove(i){this.move(i,fe(this.element,i))}mouseup(i){this.mouseRotate.mouseupWindow(i),this.mousePitch&&this.mousePitch.mouseupWindow(i),this.offTemp()}touchstart(i){i.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=ce(this.element,i.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>i.preventDefault()},this._startPos))}touchmove(i){i.targetTouches.length!==1?this.reset():(this._lastPos=ce(this.element,i.targetTouches)[0],this.move({preventDefault:()=>i.preventDefault()},this._lastPos))}touchend(i){i.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}function Wh(f,i,u){if(f=new r.cd(f.lng,f.lat),i){const p=new r.cd(f.lng-360,f.lat),x=new r.cd(f.lng+360,f.lat),S=360*Math.ceil(Math.abs(f.lng-u.center.lng)/360),T=u.locationPoint3D(f).distSqr(i),O=i.x<0||i.y<0||i.x>u.width||i.y>u.height;u.locationPoint3D(p).distSqr(i)<T&&(O||Math.abs(p.lng-u.center.lng)<S)?f=p:u.locationPoint3D(x).distSqr(i)<T&&(O||Math.abs(x.lng-u.center.lng)<S)&&(f=x)}for(;Math.abs(f.lng-u.center.lng)>180;){const p=u.locationPoint3D(f);if(p.x>=0&&p.y>=0&&p.x<=u.width&&p.y<=u.height)break;f.lng>u.center.lng?f.lng-=360:f.lng+=360}return f}const r_={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"},yu={rotation:0,rotationAlignment:"auto",pitchAlignment:"auto",occludedOpacity:.2,altitude:0};class ap extends r.E{constructor(i,u){super(),(i instanceof HTMLElement||u)&&(i=r.h({element:i},u)),r.aV(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],this);const{anchor:p="center",color:x="#3FB1CE",scale:S=1,draggable:T=!1,clickTolerance:O=0,rotation:B=yu.rotation,rotationAlignment:j=yu.rotationAlignment,pitchAlignment:K=yu.pitchAlignment,occludedOpacity:te=yu.occludedOpacity,altitude:Q=yu.altitude}=i||{};this._anchor=p,this._color=x,this._scale=S,this._draggable=T,this._clickTolerance=O,this._rotation=B,this._rotationAlignment=j,this._pitchAlignment=K,this._occludedOpacity=te,this._altitude=Q,this._state="inactive",this._isDragging=!1,this._updateMoving=()=>this._update(!0),i&&i.element?(this._element=i.element,this._offset=r.P.convert(i&&i.offset||[0,0])):(this._defaultMarker=!0,this._element=this._createDefaultMarker(),this._offset=r.P.convert(i&&i.offset||[0,-14])),this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label","Map marker"),this._element.hasAttribute("role")||this._element.setAttribute("role","img"),this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",_e=>{_e.preventDefault()}),this._element.addEventListener("mousedown",_e=>{_e.preventDefault()});const oe=this._element.classList;for(const _e in r_)oe.remove(`mapboxgl-marker-anchor-${_e}`);oe.add(`mapboxgl-marker-anchor-${this._anchor}`);const Ce=i&&i.className?i.className.trim().split(/\s+/):[];oe.add(...Ce),this._popup=null}_createDefaultMarker(){const i=N("div"),u=q("svg",{display:"block",height:41*this._scale+"px",width:27*this._scale+"px",viewBox:"0 0 27 41"},i);if(this._altitude===0){const p=q("radialGradient",{id:"shadowGradient"},q("defs",{},u));q("stop",{offset:"10%","stop-opacity":.4},p),q("stop",{offset:"100%","stop-opacity":.05},p),q("ellipse",{cx:13.5,cy:34.8,rx:10.5,ry:5.25,fill:"url(#shadowGradient)"},u)}return q("path",{fill:this._color,d:"M27,13.5C27,19.07 20.25,27 14.75,34.5C14.02,35.5 12.98,35.5 12.25,34.5C6.75,27 0,19.22 0,13.5C0,6.04 6.04,0 13.5,0C20.96,0 27,6.04 27,13.5Z"},u),q("path",{opacity:.25,d:"M13.5,0C6.04,0 0,6.04 0,13.5C0,19.22 6.75,27 12.25,34.5C13,35.52 14.02,35.5 14.75,34.5C20.25,27 27,19.07 27,13.5C27,6.04 20.96,0 13.5,0ZM13.5,1C20.42,1 26,6.58 26,13.5C26,15.9 24.5,19.18 22.22,22.74C19.95,26.3 16.71,30.14 13.94,33.91C13.74,34.18 13.61,34.32 13.5,34.44C13.39,34.32 13.26,34.18 13.06,33.91C10.28,30.13 7.41,26.31 5.02,22.77C2.62,19.23 1,15.95 1,13.5C1,6.58 6.58,1 13.5,1Z"},u),q("circle",{fill:"white",cx:13.5,cy:13.5,r:5.5},u),i}addTo(i){return i===this._map||(this.remove(),this._map=i,i.getCanvasContainer().appendChild(this._element),i.on("move",this._updateMoving),i.on("moveend",this._update),i.on("remove",this._clearFadeTimer),i._addMarker(this),this.setDraggable(this._draggable),this._update(),i.on("click",this._onMapClick)),this}remove(){const i=this._map;return i&&(i.off("click",this._onMapClick),i.off("move",this._updateMoving),i.off("moveend",this._update),i.off("mousedown",this._addDragHandler),i.off("touchstart",this._addDragHandler),i.off("mouseup",this._onUp),i.off("touchend",this._onUp),i.off("mousemove",this._onMove),i.off("touchmove",this._onMove),i.off("remove",this._clearFadeTimer),i._removeMarker(this),this._map=void 0),this._clearFadeTimer(),this._element.remove(),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(i){return this._lngLat=r.cd.convert(i),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(!0),this}setAltitude(i){return i===this._altitude||(this._defaultMarker&&(this._altitude===0&&i!==0||this._altitude!==0&&i===0)&&(this._element=this._createDefaultMarker()),this._altitude=i||yu.altitude,this._update()),this}getAltitude(){return this._altitude}getElement(){return this._element}setPopup(i){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeAttribute("role"),this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),i){if(!("offset"in i.options)){const x=Math.sqrt(Math.pow(13.5,2)/2);i.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[x,-1*(38.1-13.5+x)],"bottom-right":[-x,-1*(38.1-13.5+x)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=i,i._marker=this,i._altitude=this._altitude,this._lngLat&&this._popup.setLngLat(this._lngLat),this._element.setAttribute("role","button"),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress),this._element.setAttribute("aria-expanded","false")}return this}_onKeyPress(i){const u=i.code,p=i.charCode||i.keyCode;u!=="Space"&&u!=="Enter"&&p!==32&&p!==13||this.togglePopup()}_onMapClick(i){const u=i.originalEvent.target,p=this._element;this._popup&&(u===p||p.contains(u))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const i=this._popup;return i?(i.isOpen()?(i.remove(),this._element.setAttribute("aria-expanded","false")):this._map&&(i.addTo(this._map),this._element.setAttribute("aria-expanded","true")),this):this}_behindTerrain(){const i=this._map,u=this._pos;if(!i||!u)return!1;const p=i.unproject(u,this._altitude),x=i.getFreeCameraOptions();if(!x.position)return!1;const S=x.position.toLngLat();return S.distanceTo(p)<.9*S.distanceTo(this._lngLat)}_evaluateOpacity(){const i=this._map;if(!i)return;const u=this._pos;if(!u||u.x<0||u.x>i.transform.width||u.y<0||u.y>i.transform.height)return void this._clearFadeTimer();const p=i.unproject(u,this._altitude);let x;i._showingGlobe()&&r.eK(i.transform,this._lngLat)?x=0:(x=1-i._queryFogOpacity(p),i.transform._terrainEnabled()&&i.getTerrain()&&this._behindTerrain()&&(x*=this._occludedOpacity)),this._element.style.opacity=`${x}`,this._element.style.pointerEvents=x>0?"auto":"none",this._popup&&this._popup._setOpacity(x),this._fadeTimer=null}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}_updateDOM(){const i=this._pos;if(!i||!this._map)return;const u=this._offset.mult(this._scale);this._element.style.transform=`
            translate(${i.x}px,${i.y}px)
            ${r_[this._anchor]}
            ${this._calculateXYTransform()} ${this._calculateZTransform()}
            translate(${u.x}px,${u.y}px)
        `}_calculateXYTransform(){const i=this._pos,u=this._map,p=this.getPitchAlignment();if(!u||!i||p!=="map")return"";if(!u._showingGlobe()){const B=u.getPitch();return B?`rotateX(${B}deg)`:""}const x=r.cJ(r.eL(u.transform,this._lngLat)),S=i.sub(r.eM(u.transform)),T=Math.abs(S.x)+Math.abs(S.y);if(T===0)return"";const O=x/T;return`rotateX(${-S.y*O}deg) rotateY(${S.x*O}deg)`}_calculateZTransform(){const i=this._pos,u=this._map;if(!u||!i)return"";let p=0;const x=this.getRotationAlignment();if(x==="map")if(u._showingGlobe()){const S=u.project(new r.cd(this._lngLat.lng,this._lngLat.lat+.001),this._altitude),T=u.project(new r.cd(this._lngLat.lng,this._lngLat.lat-.001),this._altitude).sub(S);p=r.cJ(Math.atan2(T.y,T.x))-90}else p=-u.getBearing();else if(x==="horizon"){const S=r.af(4,6,u.getZoom()),T=r.eM(u.transform);T.y+=S*u.transform.height;const O=i.sub(T),B=r.cJ(Math.atan2(O.y,O.x));p=(B>90?B-270:B+90)*(1-S)}return p+=this._rotation,p?`rotateZ(${p}deg)`:""}_update(i){cancelAnimationFrame(this._updateFrameId);const u=this._map;u&&(u.transform.renderWorldCopies&&(this._lngLat=Wh(this._lngLat,this._pos,u.transform)),this._pos=u.project(this._lngLat,this._altitude),i===!0?this._updateFrameId=requestAnimationFrame(()=>{this._element&&this._pos&&this._anchor&&(this._pos=this._pos.round(),this._updateDOM())}):this._pos=this._pos.round(),u._requestDomTask(()=>{this._map&&(this._element&&this._pos&&this._anchor&&this._updateDOM(),(u._showingGlobe()||u.getTerrain()||u.getFog())&&!this._fadeTimer&&(this._fadeTimer=window.setTimeout(this._evaluateOpacity.bind(this),60)))}))}getOffset(){return this._offset}setOffset(i){return this._offset=r.P.convert(i),this._update(),this}addClassName(i){return this._element.classList.add(i),this}removeClassName(i){return this._element.classList.remove(i),this}toggleClassName(i){return this._element.classList.toggle(i)}_onMove(i){const u=this._map;if(!u)return;const p=this._pointerdownPos,x=this._positionDelta;if(p&&x){if(!this._isDragging){const S=this._clickTolerance||u._clickTolerance;if(i.point.dist(p)<S)return;this._isDragging=!0}this._pos=i.point.sub(x),this._lngLat=u.unproject(this._pos,this._altitude),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new r.A("dragstart"))),this.fire(new r.A("drag"))}}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1;const i=this._map;i&&(i.off("mousemove",this._onMove),i.off("touchmove",this._onMove)),this._state==="active"&&this.fire(new r.A("dragend")),this._state="inactive"}_addDragHandler(i){const u=this._map,p=this._pos;u&&p&&this._element.contains(i.originalEvent.target)&&(i.preventDefault(),this._positionDelta=i.point.sub(p),this._pointerdownPos=i.point,this._state="pending",u.on("mousemove",this._onMove),u.on("touchmove",this._onMove),u.once("mouseup",this._onUp),u.once("touchend",this._onUp))}setDraggable(i){this._draggable=!!i;const u=this._map;return u&&(i?(u.on("mousedown",this._addDragHandler),u.on("touchstart",this._addDragHandler)):(u.off("mousedown",this._addDragHandler),u.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(i){return this._rotation=i||yu.rotation,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(i){return this._rotationAlignment=i||yu.rotationAlignment,this._update(),this}getRotationAlignment(){return this._rotationAlignment==="auto"||this._rotationAlignment==="horizon"&&this._map&&!this._map._showingGlobe()?"viewport":this._rotationAlignment}setPitchAlignment(i){return this._pitchAlignment=i||yu.pitchAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment==="auto"?this.getRotationAlignment():this._pitchAlignment}setOccludedOpacity(i){return this._occludedOpacity=i||yu.occludedOpacity,this._update(),this}getOccludedOpacity(){return this._occludedOpacity}}const i_={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1},lp={maxWidth:100,unit:"metric"},Kh={kilometer:"km",meter:"m",mile:"mi",foot:"ft","nautical-mile":"nm"},nc={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",altitude:0},Jl=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Ml(f=new r.P(0,0),i="bottom"){if(typeof f=="number"){const u=Math.round(Math.sqrt(.5*Math.pow(f,2)));switch(i){case"top":return new r.P(0,f);case"top-left":return new r.P(u,u);case"top-right":return new r.P(-u,u);case"bottom":return new r.P(0,-f);case"bottom-left":return new r.P(u,-u);case"bottom-right":return new r.P(-u,-u);case"left":return new r.P(f,0);case"right":return new r.P(-f,0)}return new r.P(0,0)}return f instanceof r.P||Array.isArray(f)?r.P.convert(f):r.P.convert(f[i]||[0,0])}return{version:E,supported:F.supported,setRTLTextPlugin:r.eQ,getRTLTextPluginStatus:r.eP,Map:class extends ip{constructor(f){A.mark(M.create);const i=f;if((f=r.h({},Fm,f)).minZoom!=null&&f.maxZoom!=null&&f.minZoom>f.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(f.minPitch!=null&&f.maxPitch!=null&&f.minPitch>f.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(f.minPitch!=null&&f.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(f.maxPitch!=null&&f.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(f.antialias&&r.eI(window)&&(f.antialias=!1,r.w("Antialiasing is disabled for this WebGL context to avoid browser bug: https://github.com/mapbox/mapbox-gl-js/issues/11609")),super(new Ah(f.minZoom,f.maxZoom,f.minPitch,f.maxPitch,f.renderWorldCopies,null,null),f),this._repaint=!!f.repaint,this._interactive=f.interactive,this._minTileCacheSize=f.minTileCacheSize,this._maxTileCacheSize=f.maxTileCacheSize,this._failIfMajorPerformanceCaveat=f.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=f.preserveDrawingBuffer,this._antialias=f.antialias,this._trackResize=f.trackResize,this._bearingSnap=f.bearingSnap,this._refreshExpiredTiles=f.refreshExpiredTiles,this._fadeDuration=f.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=f.crossSourceCollisions,this._collectResourceTiming=f.collectResourceTiming,this._language=this._parseLanguage(f.language),this._worldview=f.worldview,this._renderTaskQueue=new sp,this._domRenderTaskQueue=new sp,this._controls=[],this._markers=[],this._popups=[],this._mapId=r.a$(),this._locale=r.h({},Nm,f.locale),this._clickTolerance=f.clickTolerance,this._cooperativeGestures=f.cooperativeGestures,this._performanceMetricsCollection=f.performanceMetricsCollection,this._tessellationStep=f.tessellationStep,this._containerWidth=0,this._containerHeight=0,this._showParseStatus=!0,this._precompilePrograms=f.precompilePrograms,this._scaleFactorChanged=!1,this._averageElevationLastSampledAt=-1/0,this._averageElevationExaggeration=0,this._averageElevation=new tc(0),this._interactionRange=[1/0,-1/0],this._visibilityHidden=0,this._useExplicitProjection=!1,this._frameId=0,this._scaleFactor=f.scaleFactor,this._requestManager=new Ne(f.transformRequest,f.accessToken,f.testMode),this._silenceAuthErrors=!!f.testMode,this._contextCreateOptions=f.contextCreateOptions?Object.assign({},f.contextCreateOptions):{},typeof f.container=="string"){const u=document.getElementById(f.container);if(!u)throw new Error(`Container '${f.container.toString()}' not found.`);this._container=u}else{if(!(f.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=f.container}if(this._container.childNodes.length>0&&r.w("The map container element should be empty, otherwise the map's interactivity will be negatively impacted. If you want to display a message when WebGL is not supported, use the Mapbox GL Supported plugin instead."),f.maxBounds&&this.setMaxBounds(f.maxBounds),this._spriteFormat=f.spriteFormat,r.aV(["_onWindowOnline","_onWindowResize","_onVisibilityChange","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._tp||(this._tp=new $0),this._tp.registerParameter(this,["Debug"],"showOverdrawInspector"),this._tp.registerParameter(this,["Debug"],"showTileBoundaries"),this._tp.registerParameter(this,["Debug"],"showParseStatus"),this._tp.registerParameter(this,["Debug"],"repaint"),this._tp.registerParameter(this,["Debug"],"showTileAABBs"),this._tp.registerParameter(this,["Debug"],"showPadding"),this._tp.registerParameter(this,["Debug"],"showCollisionBoxes",{noSave:!0}),this._tp.registerParameter(this.transform,["Debug"],"freezeTileCoverage",{noSave:!0},()=>{this._update()}),this._tp.registerParameter(this,["Debug","Wireframe"],"showTerrainWireframe"),this._tp.registerParameter(this,["Debug","Wireframe"],"showLayers2DWireframe"),this._tp.registerParameter(this,["Debug","Wireframe"],"showLayers3DWireframe"),this._tp.registerParameter(this,["Scaling"],"_scaleFactor",{min:.1,max:10,step:.1},()=>{this.setScaleFactor(this._scaleFactor)}),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");if(this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this._fullscreenchangeEvent="onfullscreenchange"in document?"fullscreenchange":"webkitfullscreenchange",window.addEventListener("online",this._onWindowOnline,!1),window.addEventListener("resize",this._onWindowResize,!1),window.addEventListener("orientationchange",this._onWindowResize,!1),window.addEventListener(this._fullscreenchangeEvent,this._onWindowResize,!1),window.addEventListener("visibilitychange",this._onVisibilityChange,!1),this.handlers=new t_(this,f),this._localFontFamily=f.localFontFamily,this._localIdeographFontFamily=f.localIdeographFontFamily,(f.style||!f.testMode)&&this.setStyle(f.style||r.e.DEFAULT_STYLE,{config:f.config,localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),f.projection&&this.setProjection(f.projection),this.indoor=new k(this),f.hash&&(this._hash=new G0(typeof f.hash=="string"&&f.hash||void 0).addTo(this)),!this._hash||!this._hash._onHashChange()){i.center==null&&i.zoom==null||(this.transform._unmodified=!1),this.jumpTo({center:f.center,zoom:f.zoom,bearing:f.bearing,pitch:f.pitch});const u=f.bounds;u&&(this.resize(),this.fitBounds(u,r.h({},f.fitBoundsOptions,{duration:0})))}this.resize(),f.attributionControl&&this.addControl(new n_({customAttribution:f.customAttribution})),this._logoControl=new zm,this.addControl(this._logoControl,f.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet),this._postStyleLoadEvent()}),this.on("data",u=>{this._update(u.dataType==="style"),this.fire(new r.A(`${u.dataType}data`,u))}),this.on("dataloading",u=>{this.fire(new r.A(`${u.dataType}dataloading`,u))}),this._interactions=new vu(this)}_getMapId(){return this._mapId}addControl(f,i){if(i===void 0&&(i=f.getDefaultPosition?f.getDefaultPosition():"top-right"),!f||!f.onAdd)return this.fire(new r.z(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const u=f.onAdd(this);this._controls.push(f);const p=this._controlPositions[i];return i.indexOf("bottom")!==-1?p.insertBefore(u,p.firstChild):p.appendChild(u),this}removeControl(f){if(!f||!f.onRemove)return this.fire(new r.z(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const i=this._controls.indexOf(f);return i>-1&&this._controls.splice(i,1),f.onRemove(this),this}hasControl(f){return this._controls.indexOf(f)>-1}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}resize(f){if(this._updateContainerDimensions(),this._containerWidth===this.transform.width&&this._containerHeight===this.transform.height)return this;this._resizeCanvas(this._containerWidth,this._containerHeight),this.transform.resize(this._containerWidth,this._containerHeight),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight));const i=!this._moving;return i&&this.fire(new r.A("movestart",f)).fire(new r.A("move",f)),this.fire(new r.A("resize",f)),i&&this.fire(new r.A("moveend",f)),this}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()||null}setMaxBounds(f){return this.transform.setMaxBounds(r.aG.convert(f)),this._update()}setMinZoom(f){if((f=f??-2)>=-2&&f<=this.transform.maxZoom)return this.transform.minZoom=f,this._update(),this.getZoom()<f?this.setZoom(f):this.fire(new r.A("zoomstart")).fire(new r.A("zoom")).fire(new r.A("zoomend")),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(f){if((f=f??22)>=this.transform.minZoom)return this.transform.maxZoom=f,this._update(),this.getZoom()>f?this.setZoom(f):this.fire(new r.A("zoomstart")).fire(new r.A("zoom")).fire(new r.A("zoomend")),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(f){if((f=f??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(f>=0&&f<=this.transform.maxPitch)return this.transform.minPitch=f,this._update(),this.getPitch()<f?this.setPitch(f):this.fire(new r.A("pitchstart")).fire(new r.A("pitch")).fire(new r.A("pitchend")),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(f){if((f=f??85)>85)throw new Error("maxPitch must be less than or equal to 85");if(f>=this.transform.minPitch)return this.transform.maxPitch=f,this._update(),this.getPitch()>f?this.setPitch(f):this.fire(new r.A("pitchstart")).fire(new r.A("pitch")).fire(new r.A("pitchend")),this;throw new Error("maxPitch must be greater than or equal to minPitch")}getMaxPitch(){return this.transform.maxPitch}getScaleFactor(){return this._scaleFactor}setScaleFactor(f){return this._scaleFactor=f,this.painter.scaleFactor=f,this._tp.refreshUI(),this._scaleFactorChanged=!0,this.style._updateFilteredLayers(i=>i.type==="symbol"),this._update(!0),this}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(f){return this.transform.renderWorldCopies=f,this.transform.renderWorldCopies||this._forceMarkerAndPopupUpdate(!0),this._update()}getLanguage(){return this._language}_parseLanguage(f){return f==="auto"?navigator.language:Array.isArray(f)?f.length===0?void 0:f.map(i=>i==="auto"?navigator.language:i):f}setLanguage(f){const i=this._parseLanguage(f);if(!this.style||i===this._language)return this;this._language=i,this.style.reloadSources();for(const u of this._controls)u._setLanguage&&u._setLanguage(this._language);return this}getWorldview(){return this._worldview}setWorldview(f){return this.style&&f!==this._worldview?(this._worldview=f,this._styleDirty=!0,this.style.reloadSources(),this):this}getProjection(){return this.transform.mercatorFromTransition?{name:"globe",center:[0,0]}:this.transform.getProjection()}_showingGlobe(){return this.transform.projection.name==="globe"}setProjection(f){return this._lazyInitEmptyStyle(),f?typeof f=="string"&&(f={name:f}):f=null,this._useExplicitProjection=!!f,this._prioritizeAndUpdateProjection(f,this.style.projection)}_updateProjectionTransition(){if(this.getProjection().name!=="globe")return;const f=this.transform,i=f.projection.name;let u;i==="globe"&&f.zoom>=r.cx?(f.setMercatorFromTransition(),u=!0):i==="mercator"&&f.zoom<r.cx&&(f.setProjection({name:"globe"}),u=!0),u&&(this.style.applyProjectionUpdate(),this.style._forceSymbolLayerUpdate(),this._update(!0))}_prioritizeAndUpdateProjection(f,i){return this._updateProjection(f||i||{name:"mercator"})}_updateProjection(f){let i;return i=f.name==="globe"&&this.transform.zoom>=r.cx?this.transform.setMercatorFromTransition():this.transform.setProjection(f),this.style.applyProjectionUpdate(),i&&(this.painter.clearBackgroundTiles(),this.style.clearSources(),this._update(!0),this._forceMarkerAndPopupUpdate(!0)),this}project(f,i){return this.transform.locationPoint3D(r.cd.convert(f),i)}unproject(f,i){return this.transform.pointLocation3D(r.P.convert(f),i)}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()||!1}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()||!1}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()||!1}_isDragging(){return this.handlers&&this.handlers._isDragging()||!1}_createDelegatedListener(f,i,u){const p=x=>{let S=[];if(Array.isArray(i)){const T=i.filter(O=>this.getLayer(O));S=T.length?this.queryRenderedFeatures(x,{layers:T}):[]}else S=this.queryRenderedFeatures(x,{target:i});return S};if(f==="mouseenter"||f==="mouseover"){let x=!1;return{listener:u,targets:i,delegates:{mousemove:T=>{const O=p(T.point);O.length?x||(x=!0,u.call(this,new $o(f,this,T.originalEvent,{features:O}))):x=!1},mouseout:()=>{x=!1}}}}if(f==="mouseleave"||f==="mouseout"){let x=!1;return{listener:u,targets:i,delegates:{mousemove:O=>{p(O.point).length?x=!0:x&&(x=!1,u.call(this,new $o(f,this,O.originalEvent)))},mouseout:O=>{x&&(x=!1,u.call(this,new $o(f,this,O.originalEvent)))}}}}{const x=S=>{const T=p(S.point);T.length&&(S.features=T,u.call(this,S),delete S.features)};return{listener:u,targets:i,delegates:{[f]:x}}}}on(f,i,u){if(typeof i=="function"||u===void 0)return super.on(f,i);if(typeof i=="string"&&(i=[i]),!this._areTargetsValid(i))return this;const p=this._createDelegatedListener(f,i,u);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[f]=this._delegatedListeners[f]||[],this._delegatedListeners[f].push(p);for(const x in p.delegates)this.on(x,p.delegates[x]);return this}once(f,i,u){if(typeof i=="function"||u===void 0)return super.once(f,i);if(typeof i=="string"&&(i=[i]),!this._areTargetsValid(i))return this;const p=this._createDelegatedListener(f,i,u);for(const x in p.delegates)this.once(x,p.delegates[x]);return this}off(f,i,u){if(typeof i=="function"||u===void 0)return super.off(f,i);if(typeof i=="string"&&(i=[i]),!this._areTargetsValid(i))return this;const p=this._delegatedListeners?this._delegatedListeners[f]:void 0;return p&&(x=>{for(let S=0;S<x.length;S++){const T=x[S];if(T.listener===u&&op(T.targets,i)){for(const O in T.delegates)this.off(O,T.delegates[O]);return x.splice(S,1),this}}})(p),this}queryRenderedFeatures(f,i){if(!this.style)return[];if(f===void 0||f instanceof r.P||Array.isArray(f)||i!==void 0||(i=f,f=void 0),f=f||[[0,0],[this.transform.width,this.transform.height]],!i){const S=this.style.queryRenderedFeatures(f,void 0,this.transform),T=this.style.queryRenderedFeatureset(f,void 0,this.transform);return S.concat(T)}let u=!0;if(i.target&&(u=this._isTargetValid(i.target),u&&!i.layers))return this.style.queryRenderedFeatureset(f,i,this.transform);let p=!0;if(i.layers&&Array.isArray(i.layers)){for(const S of i.layers)if(!this._isValidId(S)){p=!1;break}if(p&&!i.target)return this.style.queryRenderedFeatures(f,i,this.transform)}let x=[];return p&&(x=x.concat(this.style.queryRenderedFeatures(f,i,this.transform))),u&&(x=x.concat(this.style.queryRenderedFeatureset(f,i,this.transform))),x}querySourceFeatures(f,i){return!f||typeof f=="string"&&!this._isValidId(f)?[]:this.style.querySourceFeatures(f,i)}isPointOnSurface(f){const{name:i}=this.transform.projection;return i!=="globe"&&i!=="mercator"&&r.w(`${i} projection does not support isPointOnSurface, this API may behave unexpectedly.`),this.transform.isPointOnSurface(r.P.convert(f))}addInteraction(f,i){return this._interactions.add(f,i),this}removeInteraction(f){return this._interactions.remove(f),this}getCooperativeGestures(){return this._cooperativeGestures}setCooperativeGestures(f){return this._cooperativeGestures=f,this}setStyle(f,i){return i=r.h({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},i),this.style&&f&&i.diff!==!1&&i.localFontFamily===this._localFontFamily&&i.localIdeographFontFamily===this._localIdeographFontFamily&&!i.config?(this.style._diffStyle(f,(u,p)=>{if(u){const x=typeof u=="string"?u:u instanceof Error?u.message:u.error;r.w(`Unable to perform style diff: ${x}. Rebuilding the style from scratch.`),this._updateStyle(f,i)}else p&&this._update(!0)},()=>this._postStyleLoadEvent()),this):(this._localIdeographFontFamily=i.localIdeographFontFamily,this._localFontFamily=i.localFontFamily,this._updateStyle(f,i))}_getUIString(f){const i=this._locale[f];if(i==null)throw new Error(`Missing UI string '${f}'`);return i}_updateStyle(f,i){if(this.style&&(this.style.setEventedParent(null),this.style._remove(),this.style=void 0),f){const u=r.h({},i);i&&i.config&&(u.initialConfig=i.config,delete u.config),this.style=new tn(this,u).load(f),this.style.setEventedParent(this,{style:this.style})}return this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new tn(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():(r.w("There is no style added to the map."),!1)}_isValidId(f){return f==null?(this.fire(new r.z(new Error("IDs can't be empty."))),!1):!r.d8(f)||(this.fire(new r.z(new Error(`IDs can't contain special symbols: "${f}".`))),!1)}_isTargetValid(f){return"featuresetId"in f?this._isValidId("importId"in f?f.importId:f.featuresetId):"layerId"in f&&this._isValidId(f.layerId)}_areTargetsValid(f){if(Array.isArray(f)){for(const i of f)if(!this._isValidId(i))return!1;return!0}return this._isTargetValid(f)}addSource(f,i){return this._isValidId(f)?(this._lazyInitEmptyStyle(),this.style.addSource(f,i),this._update(!0)):this}isSourceLoaded(f){return!!this._isValidId(f)&&!!this.style&&this.style._isSourceCacheLoaded(f)}areTilesLoaded(){return this.style.areTilesLoaded()}addSourceType(f,i,u){this._lazyInitEmptyStyle(),this.style.addSourceType(f,i,u)}removeSource(f){return this._isValidId(f)?(this.style.removeSource(f),this._updateTerrain(),this._update(!0)):this}getSource(f){return this._isValidId(f)?this.style.getOwnSource(f):null}addImage(f,i,{pixelRatio:u=1,sdf:p=!1,stretchX:x,stretchY:S,content:T}={}){this._lazyInitEmptyStyle();const O=r.I.from(f);if(i instanceof HTMLImageElement||ImageBitmap&&i instanceof ImageBitmap){const{width:B,height:j,data:K}=r.q.getImageData(i);this.style.addImage(O,{data:new r.r({width:B,height:j},K),pixelRatio:u,stretchX:x,stretchY:S,content:T,sdf:p,version:0,usvg:!1})}else if(i.width===void 0||i.height===void 0)this.fire(new r.z(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));else{const{width:B,height:j}=i,K=i;this.style.addImage(O,{data:new r.r({width:B,height:j},new Uint8Array(K.data)),pixelRatio:u,stretchX:x,stretchY:S,content:T,sdf:p,usvg:!1,version:0,userImage:K}),K.onAdd&&K.onAdd(this,f)}}updateImage(f,i){this._lazyInitEmptyStyle();const u=r.I.from(f),p=this.style.getImage(u);if(!p)return void this.fire(new r.z(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const x=i instanceof HTMLImageElement||ImageBitmap&&i instanceof ImageBitmap?r.q.getImageData(i):i,{width:S,height:T,data:O}=x;if(S===void 0||T===void 0)return void this.fire(new r.z(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(S!==(p.usvg?p.icon.usvg_tree.width:p.data.width)||T!==(p.usvg?p.icon.usvg_tree.height:p.data.height))return void this.fire(new r.z(new Error(`The width and height of the updated image (${S}, ${T})
                must be that same as the previous version of the image
                (${p.data.width}, ${p.data.height})`)));const B=!(i instanceof HTMLImageElement||ImageBitmap&&i instanceof ImageBitmap);let j=!1;p.usvg?(p.data=new r.r({width:S,height:T},new Uint8Array(O)),p.usvg=!1,p.icon=void 0,j=!0):p.data.replace(O,B),this.style.updateImage(u,p,j)}hasImage(f){return f?!!this.style&&!!this.style.getImage(r.I.from(f)):(this.fire(new r.z(new Error("Missing required image id"))),!1)}removeImage(f){this.style.removeImage(r.I.from(f))}loadImage(f,i){r.o(this._requestManager.transformRequest(f,r.R.Image),(u,p)=>{i(u,p instanceof HTMLImageElement?r.q.getImageData(p):p)})}listImages(){return this.style.listImages().map(f=>f.name)}addModel(f,i){this._lazyInitEmptyStyle(),this.style.addModel(f,i)}hasModel(f){return f?this.style.hasModel(f):(this.fire(new r.z(new Error("Missing required model id"))),!1)}removeModel(f){this.style.removeModel(f)}listModels(){return this.style.listModels()}addLayer(f,i){return this._isValidId(f.id)?(this._lazyInitEmptyStyle(),this.style.addLayer(f,i),this._update(!0)):this}getSlot(f){const i=this.getLayer(f);return i&&i.slot||null}setSlot(f,i){return this.style.setSlot(f,i),this.style.mergeLayers(),this._update(!0)}addImport(f,i){return this.style.addImport(f,i).catch(u=>this.fire(new r.z(new Error("Failed to add import",u)))),this}updateImport(f,i){return typeof i!="string"&&i.id!==f?(this.removeImport(f),this.addImport(i)):(this.style.updateImport(f,i),this._update(!0))}removeImport(f){return this.style.removeImport(f),this}moveImport(f,i){return this.style.moveImport(f,i),this._update(!0)}moveLayer(f,i){return this._isValidId(f)?(this.style.moveLayer(f,i),this._update(!0)):this}removeLayer(f){return this._isValidId(f)?(this.style.removeLayer(f),this._update(!0)):this}getLayer(f){if(!this._isValidId(f))return null;const i=this.style.getOwnLayer(f);return i?i.type==="custom"?i.implementation:i.serialize():void 0}getSlots(){return this.style.getSlots()}setLayerZoomRange(f,i,u){return this._isValidId(f)?(this.style.setLayerZoomRange(f,i,u),this._update(!0)):this}setFilter(f,i,u={}){return this._isValidId(f)?(this.style.setFilter(f,i,u),this._update(!0)):this}getFilter(f){return this._isValidId(f)?this.style.getFilter(f):null}setPaintProperty(f,i,u,p={}){return this._isValidId(f)?(this.style.setPaintProperty(f,i,u,p),this._update(!0)):this}getPaintProperty(f,i){return this._isValidId(f)?this.style.getPaintProperty(f,i):null}setLayoutProperty(f,i,u,p={}){return this._isValidId(f)?(this.style.setLayoutProperty(f,i,u,p),this._update(!0)):this}getLayoutProperty(f,i){return this._isValidId(f)?this.style.getLayoutProperty(f,i):null}getGlyphsUrl(){return this.style.getGlyphsUrl()}setGlyphsUrl(f){return this.style.setGlyphsUrl(f),this._update(!0)}getSchema(f){return this.style.getSchema(f)}setSchema(f,i){return this.style.setSchema(f,i),this._update(!0)}getConfig(f){return this.style.getConfig(f)}setConfig(f,i){return this.style.setConfig(f,i),this._update(!0)}getConfigProperty(f,i){return this.style.getConfigProperty(f,i)}setConfigProperty(f,i,u){return this.style.setConfigProperty(f,i,u),this._update(!0)}getFeaturesetDescriptors(f){return this.style.getFeaturesetDescriptors(f)}setLights(f){if(this._lazyInitEmptyStyle(),f&&f.length===1&&f[0].type==="flat"){const i=f[0];i.properties?this.style.setFlatLight(i.properties,i.id,{}):this.style.setFlatLight({},"flat")}else this.style.setLights(f),this.painter.terrain&&(this.painter.terrain.invalidateRenderCache=!0);return this._update(!0)}getLights(){const f=this.style.getLights()||[];return f.length===0&&f.push({id:this.style.light.id,type:"flat",properties:this.style.getFlatLight()}),f}setLight(f,i={}){return console.log("The `map.setLight` function is deprecated, prefer using `map.setLights` with `flat` light type instead."),this.setLights([{id:"flat",type:"flat",properties:f}])}getLight(){return console.log("The `map.getLight` function is deprecated, prefer using `map.getLights` instead."),this.style.getFlatLight()}setTerrain(f){return this._lazyInitEmptyStyle(),!f&&this.transform.projection.requiresDraping?this.style.setTerrainForDraping():this.style.setTerrain(f),this._averageElevationLastSampledAt=-1/0,this._update(!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(f){return this._lazyInitEmptyStyle(),this.style.setFog(f),this._update(!0)}getFog(){return this.style?this.style.getFog():null}setSnow(f){return this._lazyInitEmptyStyle(),this.style.setSnow(f),this._update(!0)}getSnow(){return this.style?this.style.getSnow():null}setRain(f){return this._lazyInitEmptyStyle(),this.style.setRain(f),this._update(!0)}getRain(){return this.style?this.style.getRain():null}setColorTheme(f){return this._lazyInitEmptyStyle(),this.style.setColorTheme(f),this._update(!0)}setImportColorTheme(f,i){return this._lazyInitEmptyStyle(),this.style.setImportColorTheme(f,i),this._update(!0)}setCamera(f){return this.style.setCamera(f),this._triggerCameraUpdate(f)}_triggerCameraUpdate(f){return this._update(this.transform.setOrthographicProjectionAtLowPitch(f["camera-projection"]==="orthographic"))}getCamera(){return this.style.camera}_queryFogOpacity(f){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(r.cd.convert(f),this.transform):0}setFeatureState(f,i){return f.source&&!this._isValidId(f.source)?this:(this.style.setFeatureState(f,i),this._update())}removeFeatureState(f,i){return f.source&&!this._isValidId(f.source)?this:(this.style.removeFeatureState(f,i),this._update())}getFeatureState(f){return f.source&&!this._isValidId(f.source)?null:this.style.getFeatureState(f)}_updateContainerDimensions(){if(!this._container)return;const f=this._container.getBoundingClientRect().width||400,i=this._container.getBoundingClientRect().height||300;let u,p,x,S=this._container;for(;S&&(!p||!x);){const T=window.getComputedStyle(S).transform;T&&T!=="none"&&(u=T.match(/matrix.*\((.+)\)/)[1].split(", "),u[0]&&u[0]!=="0"&&u[0]!=="1"&&(p=u[0]),u[3]&&u[3]!=="0"&&u[3]!=="1"&&(x=u[3])),S=S.parentElement}this._containerWidth=p?Math.abs(f/p):f,this._containerHeight=x?Math.abs(i/x):i}_detectMissingCSS(){window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&r.w("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const f=this._container;f.classList.add("mapboxgl-map"),(this._missingCSSCanary=N("div","mapboxgl-canary",f)).style.visibility="hidden",this._detectMissingCSS();const i=this._canvasContainer=N("div","mapboxgl-canvas-container",f);this._canvas=N("canvas","mapboxgl-canvas",i),this._interactive&&(i.classList.add("mapboxgl-interactive"),this._canvas.setAttribute("tabindex","0")),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region"),this._updateContainerDimensions(),this._resizeCanvas(this._containerWidth,this._containerHeight);const u=this._controlContainer=N("div","mapboxgl-control-container",f),p=this._controlPositions={};["top-left","top","top-right","right","bottom-right","bottom","bottom-left","left"].forEach(x=>{p[x]=N("div",`mapboxgl-ctrl-${x}`,u)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(f,i){const u=r.q.devicePixelRatio||1;this._canvas.width=u*Math.ceil(f),this._canvas.height=u*Math.ceil(i),this._canvas.style.width=`${f}px`,this._canvas.style.height=`${i}px`}_addMarker(f){this._markers.push(f)}_removeMarker(f){const i=this._markers.indexOf(f);i!==-1&&this._markers.splice(i,1)}_addPopup(f){this._popups.push(f)}_removePopup(f){const i=this._popups.indexOf(f);i!==-1&&this._popups.splice(i,1)}_setupPainter(){const f=r.h({},F.supported.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),i=this._canvas.getContext("webgl2",f);i?(le(i,!0),this.painter=new $h(i,this._contextCreateOptions,this.transform,this._scaleFactor,this._tp,this._worldview),this.on("data",u=>{u.dataType==="source"&&this.painter.setTileLoadedFlag(!0)}),r.l.testSupport(i)):this.fire(new r.z(new Error("Failed to initialize WebGL")))}_contextLost(f){f.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new r.A("webglcontextlost",{originalEvent:f}))}_contextRestored(f){this._setupPainter(),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight)),this._updateTerrain(),this.style&&(this.style.reloadModels(),this.style.clearSources()),this._update(),this.fire(new r.A("webglcontextrestored",{originalEvent:f}))}_onMapScroll(f){if(f.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}idle(){return!this.isMoving()&&this.loaded()}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}frameReady(){return this.loaded()&&!this._placementDirty}_update(f){return this.style?(this._styleDirty=this._styleDirty||f,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(f){return this._update(),this._renderTaskQueue.add(f)}_cancelRenderFrame(f){this._renderTaskQueue.remove(f)}_requestDomTask(f){!this.loaded()||this.loaded()&&!this.isMoving()?f():this._domRenderTaskQueue.add(f)}_render(f){let i;this.fire(new r.A("renderstart")),++this._frameId;const u=this.painter.context.extTimerQuery,p=r.q.now(),x=this.painter.context.gl;if(this.listens("gpu-timing-frame")&&(i=x.createQuery(),x.beginQuery(u.TIME_ELAPSED_EXT,i)),this.painter.context.setDirty(),this.painter.setBaseState(),(this.isMoving()||this.isRotating()||this.isZooming())&&(this._interactionRange[0]=Math.min(this._interactionRange[0],performance.now()),this._interactionRange[1]=Math.max(this._interactionRange[1],performance.now())),this._renderTaskQueue.run(f),this._domRenderTaskQueue.run(f),this._removed)return;this._updateProjectionTransition();const S=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const j=this.transform.zoom,K=this.transform.pitch,te=r.q.now(),Q=new r.aa(j,{now:te,fadeDuration:S,pitch:K,transition:this.style.transition,worldview:this._worldview});this.style.update(Q)}this.style&&this.style.hasFogTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0);let T=!1;this.style&&this._sourcesDirty?(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),T=this._updateAverageElevation(p),this.style.updateSources(this.transform),this.style.updateImageProviders(),this.isMoving()||this._forceMarkerAndPopupUpdate()):T=this._updateAverageElevation(p);const O=this.style&&this.style._updatePlacement(this.painter,this.painter.transform,this.showCollisionBoxes,S,this._crossSourceCollisions,this.painter.replacementSource,this._scaleFactorChanged);if(this._scaleFactorChanged&&(this._scaleFactorChanged=!1),O&&(this._placementDirty=O.needsRerender),this.style&&this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showParseStatus:this.showParseStatus,wireframe:{terrain:this.showTerrainWireframe,layers2D:this.showLayers2DWireframe,layers3D:this.showLayers3DWireframe},showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,showTileAABBs:this.showTileAABBs,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:S,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),gpuTimingDeferredRender:!!this.listens("gpu-timing-deferred-render"),speedIndexTiming:this.speedIndexTiming}),this.fire(new r.A("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,A.mark(M.load),this.fire(new r.A("load"))),this.style&&this.style.hasTransitions()&&(this._styleDirty=!0),this.style&&(this.style.snow||this.style.rain)&&(this._styleDirty=!0),this.style&&this.style.imageManager.hasPatternsInFlight()&&(this._styleDirty=!0),this.style&&!this.style.modelManager.isLoaded()&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),i){const j=r.q.now()-p;x.endQuery(u.TIME_ELAPSED_EXT),setTimeout(()=>{const K=x.getQueryParameter(i,x.QUERY_RESULT)/1e6;x.deleteQuery(i),this.fire(new r.A("gpu-timing-frame",{cpuTime:j,gpuTime:K}))},50)}if(this.listens("gpu-timing-layer")){const j=this.painter.collectGpuTimers();setTimeout(()=>{const K=this.painter.queryGpuTimers(j);this.fire(new r.A("gpu-timing-layer",{layerTimes:K}))},50)}if(this.listens("gpu-timing-deferred-render")){const j=this.painter.collectDeferredRenderGpuQueries();setTimeout(()=>{const K=this.painter.queryGpuTimeDeferredRender(j);this.fire(new r.A("gpu-timing-deferred-render",{gpuTime:K}))},50)}const B=this._sourcesDirty||this._styleDirty||this._placementDirty||T;if(B||this._repaint)this.triggerRepaint();else{const j=this.idle();if(j&&(T=this._updateAverageElevation(p,!0)),T)this.triggerRepaint();else if(this._triggerFrame(!1),j&&(this.fire(new r.A("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){const K=this._calculateSpeedIndex();this.fire(new r.A("speedindexcompleted",{speedIndex:K})),this.speedIndexTiming=!1}}!this._loaded||this._fullyLoaded||B||(this._fullyLoaded=!0,A.mark(M.fullLoad),this._performanceMetricsCollection&&Ke(this._requestManager._customAccessToken,{width:this.painter.width,height:this.painter.height,interactionRange:this._interactionRange,visibilityHidden:this._visibilityHidden,terrainEnabled:!!this.painter.style.getTerrain(),fogEnabled:!!this.painter.style.getFog(),projection:this.getProjection().name,zoom:this.transform.zoom,renderer:this.painter.context.renderer,vendor:this.painter.context.vendor}),this._authenticate())}_forceMarkerAndPopupUpdate(f){for(const i of this._markers)f&&!this.getRenderWorldCopies()&&(i._lngLat=i._lngLat.wrap()),i._update();for(const i of this._popups)!f||this.getRenderWorldCopies()||i._trackPointer||(i._lngLat=i._lngLat.wrap()),i._update()}_updateAverageElevation(f,i=!1){const u=x=>(this.transform.averageElevation=x,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return this.transform.averageElevation!==0&&u(0);const p=this.transform.elevation&&this.transform.elevation.exaggeration()!==this._averageElevationExaggeration;if(p||(i||f-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(f)){const x=this.transform.averageElevation;let S=this.transform.sampleAverageElevation();this.transform.elevation!=null&&(this._averageElevationExaggeration=this.transform.elevation.exaggeration()),isNaN(S)?S=0:this._averageElevationLastSampledAt=f;const T=Math.abs(x-S);if(T>1){if(this._isInitialLoad||p)return this._averageElevation.jumpTo(S),u(S);this._averageElevation.easeTo(S,f,300)}else if(T>1e-4)return this._averageElevation.jumpTo(S),u(S)}return!!this._averageElevation.isEasing(f)&&u(this._averageElevation.getValue(f))}_authenticate(){xn(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,f=>{if(f&&(f.message===Ue||f.status===401)){const i=this.painter.context.gl;le(i,!1),this._logoControl instanceof zm&&this._logoControl._updateLogo(),i&&i.clear(i.DEPTH_BUFFER_BIT|i.COLOR_BUFFER_BIT|i.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new r.z(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}}),ct(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,()=>{})}_postStyleLoadEvent(){this.style.globalId&&Ct(this._requestManager._customAccessToken,{map:this,style:this.style.globalId,importedStyles:this.style.getImportGlobalIds()})}_updateTerrain(){const f=this._isDragging();this.painter.updateTerrain(this.style,f)}_calculateSpeedIndex(){const f=this.painter.canvasCopy(),i=this.painter.getCanvasCopiesAndTimestamps();i.timeStamps.push(performance.now());const u=this.painter.context.gl,p=u.createFramebuffer();function x(S){u.framebufferTexture2D(u.FRAMEBUFFER,u.COLOR_ATTACHMENT0,u.TEXTURE_2D,S,0);const T=new Uint8Array(u.drawingBufferWidth*u.drawingBufferHeight*4);return u.readPixels(0,0,u.drawingBufferWidth,u.drawingBufferHeight,u.RGBA,u.UNSIGNED_BYTE,T),T}return u.bindFramebuffer(u.FRAMEBUFFER,p),this._canvasPixelComparison(x(f),i.canvasCopies.map(x),i.timeStamps)}_canvasPixelComparison(f,i,u){let p=u[1]-u[0];const x=f.length/4;for(let S=0;S<i.length;S++){const T=i[S];let O=0;for(let B=0;B<T.length;B+=4)T[B]===f[B]&&T[B+1]===f[B+1]&&T[B+2]===f[B+2]&&T[B+3]===f[B+3]&&(O+=1);p+=(u[S+2]-u[S+1])*(1-O/x)}return p}remove(){this._hash&&this._hash.remove();for(const i of this._controls)i.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.style&&this.style.destroy(),this.indoor.destroy(),this.painter.destroy(),this.handlers&&this.handlers.destroy(),this.handlers=void 0,this.setStyle(null),window.removeEventListener("resize",this._onWindowResize,!1),window.removeEventListener("orientationchange",this._onWindowResize,!1),window.removeEventListener(this._fullscreenchangeEvent,this._onWindowResize,!1),window.removeEventListener("online",this._onWindowOnline,!1),window.removeEventListener("visibilitychange",this._onVisibilityChange,!1);const f=this.painter.context.gl.getExtension("WEBGL_lose_context");f&&f.loseContext(),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvasContainer.remove(),this._controlContainer.remove(),this._missingCSSCanary.remove(),this._canvas=void 0,this._canvasContainer=void 0,this._controlContainer=void 0,this._missingCSSCanary=void 0,this._container.classList.remove("mapboxgl-map"),this._container.removeEventListener("scroll",this._onMapScroll,!1),Ht.delete(this.painter.context.gl),Lt.remove(),at.remove(),this._removed=!0,this.fire(new r.A("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(f){this._renderNextFrame=this._renderNextFrame||f,this.style&&!this._frame&&(this._frame=r.q.frame(i=>{const u=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,u&&this._render(i)}))}_preloadTiles(f){const i=this.style?this.style.getSourceCaches():[];return r.bt(i,(u,p)=>u._preloadTiles(f,p),()=>{this.triggerRepaint()}),this}_onWindowOnline(){this._update()}_onWindowResize(f){this._trackResize&&this.resize({originalEvent:f})._update()}_onVisibilityChange(){document.visibilityState==="hidden"&&this._visibilityHidden++}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(f){this._showTileBoundaries!==f&&(this._showTileBoundaries=f,this._tp.refreshUI(),this._update())}get showParseStatus(){return!!this._showParseStatus}set showParseStatus(f){this._showParseStatus!==f&&(this._showParseStatus=f,this._tp.refreshUI(),this._update())}get showTerrainWireframe(){return!!this._showTerrainWireframe}set showTerrainWireframe(f){this._showTerrainWireframe!==f&&(this._showTerrainWireframe=f,this._tp.refreshUI(),this._update())}get showLayers2DWireframe(){return!!this._showLayers2DWireframe}set showLayers2DWireframe(f){this._showLayers2DWireframe!==f&&(this._showLayers2DWireframe=f,this._tp.refreshUI(),this._update())}get showLayers3DWireframe(){return!!this._showLayers3DWireframe}set showLayers3DWireframe(f){this._showLayers3DWireframe!==f&&(this._showLayers3DWireframe=f,this._tp.refreshUI(),this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(f){this._speedIndexTiming!==f&&(this._speedIndexTiming=f,this._update())}get showPadding(){return!!this._showPadding}set showPadding(f){this._showPadding!==f&&(this._showPadding=f,this._tp.refreshUI(),this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(f){this._showCollisionBoxes!==f&&(this._showCollisionBoxes=f,this._tp.refreshUI(),f?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(f){this._showOverdrawInspector!==f&&(this._showOverdrawInspector=f,this._tp.refreshUI(),this._update())}get repaint(){return!!this._repaint}set repaint(f){this._repaint!==f&&(this._repaint=f,this._tp.refreshUI(),this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(f){this._vertices=f,this._update()}get showTileAABBs(){return!!this._showTileAABBs}set showTileAABBs(f){this._showTileAABBs!==f&&(this._showTileAABBs=f,this._tp.refreshUI(),f&&this._update())}_setCacheLimits(f,i){r.eJ(f,i)}get version(){return E}},NavigationControl:class{constructor(f={}){this.options=r.h({},a1,f),this._container=N("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",i=>i.preventDefault()),this.options.showZoom&&(r.aV(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",i=>{this._map&&this._map.zoomIn({},{originalEvent:i})}),N("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",i=>{this._map&&this._map.zoomOut({},{originalEvent:i})}),N("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(r.aV(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",i=>{const u=this._map;u&&(this.options.visualizePitch?u.resetNorthPitch({},{originalEvent:i}):u.resetNorth({},{originalEvent:i}))}),this._compassIcon=N("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const f=this._map;if(!f)return;const i=f.getZoom(),u=i===f.getMaxZoom(),p=i===f.getMinZoom();this._zoomInButton.disabled=u,this._zoomOutButton.disabled=p,this._zoomInButton.setAttribute("aria-disabled",u.toString()),this._zoomOutButton.setAttribute("aria-disabled",p.toString())}_rotateCompassArrow(){const f=this._map;if(!f)return;const i=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(f.transform.pitch*(Math.PI/180)),.5)}) rotateX(${f.transform.pitch}deg) rotateZ(${f.transform.angle*(180/Math.PI)}deg)`:`rotate(${f.transform.angle*(180/Math.PI)}deg)`;f._requestDomTask(()=>{this._compassIcon&&(this._compassIcon.style.transform=i)})}onAdd(f){return this._map=f,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),f.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&f.on("pitch",this._rotateCompassArrow),f.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new yw(f,this._compass,this.options.visualizePitch)),this._container}onRemove(){const f=this._map;f&&(this._container.remove(),this.options.showZoom&&f.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&f.off("pitch",this._rotateCompassArrow),f.off("rotate",this._rotateCompassArrow),this._handler&&this._handler.off(),this._handler=void 0),this._map=void 0)}_createButton(f,i){const u=N("button",f,this._container);return u.type="button",u.addEventListener("click",i),u}_setButtonTitle(f,i){if(!this._map)return;const u=this._map._getUIString(`NavigationControl.${i}`);f.setAttribute("aria-label",u),f.firstElementChild&&f.firstElementChild.setAttribute("title",u)}},GeolocateControl:class extends r.E{constructor(f={}){super();const i=navigator.geolocation;this.options=r.h({geolocation:i},i_,f),r.aV(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation","_onDeviceOrientation"],this),this._updateMarkerRotationThrottled=Jc(this._updateMarkerRotation,20),this._numberOfWatches=0}onAdd(f){return this._map=f,this._container=N("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkGeolocationSupport(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(this.options.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),this._container.remove(),this._map.off("zoom",this._onZoom),this._map=void 0,this._numberOfWatches=0,this._noTimeout=!1}_checkGeolocationSupport(f){const i=(u=!!this.options.geolocation)=>{this._supportsGeolocation=u,f(u)};this._supportsGeolocation!==void 0?f(this._supportsGeolocation):navigator.permissions!==void 0?navigator.permissions.query({name:"geolocation"}).then(u=>i(u.state!=="denied")).catch(()=>i()):i()}_isOutOfMapMaxBounds(f){const i=this._map.getMaxBounds(),u=f.coords;return!!i&&(u.longitude<i.getWest()||u.longitude>i.getEast()||u.latitude<i.getSouth()||u.latitude>i.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(f){if(this._map){if(this._isOutOfMapMaxBounds(f))return this._setErrorState(),this.fire(new r.A("outofmaxbounds",f)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=f,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(f),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(f),this.options.showUserLocation&&this._userLocationDotMarker.removeClassName("mapboxgl-user-location-dot-stale"),this.fire(new r.A("geolocate",f)),this._finish()}}_updateCamera(f){const i=new r.cd(f.coords.longitude,f.coords.latitude),u=f.coords.accuracy,p=this._map.getBearing(),x=r.h({bearing:p},this.options.fitBoundsOptions);this._map.fitBounds(i.toBounds(u),x,{geolocateSource:!0})}_updateMarker(f){if(f){const i=new r.cd(f.coords.longitude,f.coords.latitude);this._accuracyCircleMarker.setLngLat(i).addTo(this._map),this._userLocationDotMarker.setLngLat(i).addTo(this._map),this._accuracy=f.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const f=this._map.transform,i=r.c6(1,f._center.lat)*f.worldSize,u=Math.ceil(2*this._accuracy*i);this._circleElement.style.width=`${u}px`,this._circleElement.style.height=`${u}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_updateMarkerRotation(){this._userLocationDotMarker&&typeof this._heading=="number"?(this._userLocationDotMarker.setRotation(this._heading),this._userLocationDotMarker.addClassName("mapboxgl-user-location-show-heading")):(this._userLocationDotMarker.removeClassName("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}_onError(f){if(this._map){if(this.options.trackUserLocation)if(f.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const i=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.setAttribute("aria-label",i),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",i),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(f.code===3&&this._noTimeout)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._userLocationDotMarker.addClassName("mapboxgl-user-location-dot-stale"),this.fire(new r.A("error",f)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(f){if(this._map!==void 0){if(this._container.addEventListener("contextmenu",i=>i.preventDefault()),this._geolocateButton=N("button","mapboxgl-ctrl-geolocate",this._container),N("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",f===!1){r.w("Geolocation support is not available so the GeolocateControl will be disabled.");const i=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.setAttribute("aria-label",i),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",i)}else{const i=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.setAttribute("aria-label",i),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",i)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=N("div","mapboxgl-user-location"),this._dotElement.appendChild(N("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(N("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new ap({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=N("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new ap({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",i=>{i.geolocateSource||this._watchState!=="ACTIVE_LOCK"||i.originalEvent&&i.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new r.A("trackuserlocationend")))})}}_onDeviceOrientation(f){this._userLocationDotMarker&&(f.webkitCompassHeading?this._heading=f.webkitCompassHeading:f.absolute===!0&&(this._heading=-1*f.alpha),this._updateMarkerRotationThrottled())}trigger(){if(!this._setup)return r.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new r.A("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._numberOfWatches--,this._noTimeout=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new r.A("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new r.A("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let f;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._numberOfWatches++,this._numberOfWatches>1?(f={maximumAge:6e5,timeout:0},this._noTimeout=!0):(f=this.options.positionOptions,this._noTimeout=!1),this._geolocationWatchID=this.options.geolocation.watchPosition(this._onSuccess,this._onError,f),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else this.options.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=window.setTimeout(this._finish,1e4);return!0}_addDeviceOrientationListener(){const f=()=>{"ondeviceorientationabsolute"in window?window.addEventListener("deviceorientationabsolute",this._onDeviceOrientation):window.addEventListener("deviceorientation",this._onDeviceOrientation)};typeof DeviceMotionEvent<"u"&&typeof DeviceMotionEvent.requestPermission=="function"?DeviceOrientationEvent.requestPermission().then(i=>{i==="granted"&&f()}).catch(console.error):f()}_clearWatch(){this.options.geolocation.clearWatch(this._geolocationWatchID),window.removeEventListener("deviceorientation",this._onDeviceOrientation),window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientation),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:n_,ScaleControl:class{constructor(f={}){this.options=r.h({},lp,f),this._isNumberFormatSupported=function(){try{return new Intl.NumberFormat("en",{style:"unit",unitDisplay:"short",unit:"meter"}),!0}catch{return!1}}(),r.aV(["_update","_setScale","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_update(){const f=this.options.maxWidth||100,i=this._map,u=i._containerHeight/2,p=i._containerWidth/2-f/2,x=i.unproject([p,u]),S=i.unproject([p+f,u]),T=x.distanceTo(S);if(this.options.unit==="imperial"){const O=3.2808*T;O>5280?this._setScale(f,O/5280,"mile"):this._setScale(f,O,"foot")}else this.options.unit==="nautical"?this._setScale(f,T/1852,"nautical-mile"):T>=1e3?this._setScale(f,T/1e3,"kilometer"):this._setScale(f,T,"meter")}_setScale(f,i,u){this._map._requestDomTask(()=>{const p=function(S){const T=Math.pow(10,`${Math.floor(S)}`.length-1);let O=S/T;return O=O>=10?10:O>=5?5:O>=3?3:O>=2?2:O>=1?1:function(B){const j=Math.pow(10,Math.ceil(-Math.log(B)/Math.LN10));return Math.round(B*j)/j}(O),T*O}(i),x=p/i;this._container.innerHTML=this._isNumberFormatSupported&&u!=="nautical-mile"?new Intl.NumberFormat(this._language,{style:"unit",unitDisplay:"short",unit:u}).format(p):`${p}&nbsp;${Kh[u]}`,this._container.style.width=f*x+"px"})}onAdd(f){return this._map=f,this._language=f.getLanguage(),this._container=N("div","mapboxgl-ctrl mapboxgl-ctrl-scale",f.getContainer()),this._container.dir="auto",this._map.on("move",this._update),this._update(),this._container}onRemove(){this._container.remove(),this._map.off("move",this._update),this._map=void 0}_setLanguage(f){this._language=f,this._update()}setUnit(f){this.options.unit=f,this._update()}},FullscreenControl:class{constructor(f={}){this._fullscreen=!1,f&&f.container&&(f.container instanceof HTMLElement?this._container=f.container:r.w("Full screen control 'container' must be a DOM element.")),r.aV(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(f){return this._map=f,this._container||(this._container=this._map.getContainer()),this._controlContainer=N("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",r.w("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){this._controlContainer.remove(),this._map=null,document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!document.fullscreenEnabled&&!document.webkitFullscreenEnabled)}_setupUI(){const f=this._fullscreenButton=N("button","mapboxgl-ctrl-fullscreen",this._controlContainer);N("span","mapboxgl-ctrl-icon",f).setAttribute("aria-hidden","true"),f.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const f=this._getTitle();this._fullscreenButton.setAttribute("aria-label",f),this._fullscreenButton.firstElementChild&&this._fullscreenButton.firstElementChild.setAttribute("title",f)}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(document.fullscreenElement||document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?document.exitFullscreen?document.exitFullscreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends r.E{constructor(f){super(),this.options=r.h(Object.create(nc),f),this._altitude=this.options.altitude,r.aV(["_update","_onClose","remove","_onMouseEvent"],this),this._classList=new Set(f&&f.className?f.className.trim().split(/\s+/):[])}addTo(f){return this._map&&this.remove(),this._map=f,this.options.closeOnClick&&f.on("preclick",this._onClose),this.options.closeOnMove&&f.on("move",this._onClose),f.on("remove",this.remove),this._update(),f._addPopup(this),this._focusFirstElement(),this._trackPointer?(f.on("mousemove",this._onMouseEvent),f.on("mouseup",this._onMouseEvent),f._canvasContainer.classList.add("mapboxgl-track-pointer")):f.on("move",this._update),this.fire(new r.A("open")),this}isOpen(){return!!this._map}remove(){this._content&&this._content.remove(),this._container&&(this._container.remove(),this._container=void 0);const f=this._map;return f&&(f.off("move",this._update),f.off("move",this._onClose),f.off("preclick",this._onClose),f.off("click",this._onClose),f.off("remove",this.remove),f.off("mousemove",this._onMouseEvent),f.off("mouseup",this._onMouseEvent),f.off("drag",this._onMouseEvent),f._canvasContainer&&f._canvasContainer.classList.remove("mapboxgl-track-pointer"),f._removePopup(this),this._map=void 0),this.fire(new r.A("close")),this}getLngLat(){return this._lngLat}setLngLat(f){this._lngLat=r.cd.convert(f),this._pos=null,this._trackPointer=!1,this._update();const i=this._map;return i&&(i.on("move",this._update),i.off("mousemove",this._onMouseEvent),i._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}getAltitude(){return this._altitude}setAltitude(f){return this._altitude=f,this._update(),this}trackPointer(){this._trackPointer=!0,this._pos=null,this._update();const f=this._map;return f&&(f.off("move",this._update),f.on("mousemove",this._onMouseEvent),f.on("drag",this._onMouseEvent),f._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(f){return this.setDOMContent(document.createTextNode(f))}setHTML(f){const i=document.createDocumentFragment(),u=document.createElement("body");let p;for(u.innerHTML=f;p=u.firstChild,p;)i.appendChild(p);return this.setDOMContent(i)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(f){return this.options.maxWidth=f,this._update(),this}setDOMContent(f){let i=this._content;if(i)for(;i.hasChildNodes();)i.firstChild&&i.removeChild(i.firstChild);else i=this._content=N("div","mapboxgl-popup-content",this._container||void 0);if(i.appendChild(f),this.options.closeButton){const u=this._closeButton=N("button","mapboxgl-popup-close-button",i);u.type="button",u.setAttribute("aria-label","Close popup"),u.innerHTML='<span aria-hidden="true">&#215;</span>',u.addEventListener("click",this._onClose)}return this._update(),this._focusFirstElement(),this}addClassName(f){return this._classList.add(f),this._updateClassList(),this}removeClassName(f){return this._classList.delete(f),this._updateClassList(),this}setOffset(f){return this.options.offset=f,this._update(),this}toggleClassName(f){let i;return this._classList.delete(f)?i=!1:(this._classList.add(f),i=!0),this._updateClassList(),i}_onMouseEvent(f){this._update(f.point)}_getAnchor(f){if(this.options.anchor)return this.options.anchor;const i=this._map,u=this._container,p=this._pos;if(!i||!u||!p)return"bottom";const x=u.offsetWidth,S=u.offsetHeight,T=p.x<x/2,O=p.x>i.transform.width-x/2;if(p.y+f<S)return T?"top-left":O?"top-right":"top";if(p.y>i.transform.height-S){if(T)return"bottom-left";if(O)return"bottom-right"}return T?"left":O?"right":"bottom"}_updateClassList(){const f=this._container;if(!f)return;const i=[...this._classList];i.push("mapboxgl-popup"),this._anchor&&i.push(`mapboxgl-popup-anchor-${this._anchor}`),this._trackPointer&&i.push("mapboxgl-popup-track-pointer"),f.className=i.join(" ")}_update(f){const i=this._map,u=this._content;if(!i||!this._lngLat&&!this._trackPointer||!u)return;let p=this._container;if(p||(p=this._container=N("div","mapboxgl-popup",i.getContainer()),this._tip=N("div","mapboxgl-popup-tip",p),p.appendChild(u)),this.options.maxWidth&&p.style.maxWidth!==this.options.maxWidth&&(p.style.maxWidth=this.options.maxWidth),i.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Wh(this._lngLat,this._pos,i.transform)),!this._trackPointer||f){const x=this._pos=this._trackPointer&&f instanceof r.P?f:i.project(this._lngLat,this._altitude),S=Ml(this.options.offset),T=this._anchor=this._getAnchor(S.y),O=Ml(this.options.offset,T),B=x.add(O).round();i._requestDomTask(()=>{this._container&&T&&(this._container.style.transform=`${r_[T]} translate(${B.x}px,${B.y}px)`)})}if(!this._marker&&i._showingGlobe()){const x=r.eK(i.transform,this._lngLat)?0:1;this._setOpacity(x)}this._updateClassList()}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const f=this._container.querySelector(Jl);f&&f.focus()}_onClose(){this.remove()}_setOpacity(f){this._container&&(this._container.style.opacity=`${f}`),this._content&&(this._content.style.pointerEvents=f?"auto":"none")}},Marker:ap,Style:tn,LngLat:r.cd,LngLatBounds:r.aG,Point:r.P,MercatorCoordinate:r.ac,FreeCameraOptions:tm,Evented:r.E,config:r.e,prewarm:r.eO,clearPrewarmedResources:r.eN,get accessToken(){return r.e.ACCESS_TOKEN},set accessToken(f){r.e.ACCESS_TOKEN=f},get baseApiUrl(){return r.e.API_URL},set baseApiUrl(f){r.e.API_URL=f},get workerCount(){return r.eX.workerCount},set workerCount(f){r.eX.workerCount=f},get maxParallelImageRequests(){return r.e.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(f){r.e.MAX_PARALLEL_IMAGE_REQUESTS=f},clearStorage(f){r.eW(f)},get workerUrl(){return r.eV.workerUrl},set workerUrl(f){r.eV.workerUrl=f},get workerClass(){return r.eV.workerClass},set workerClass(f){r.eV.workerClass=f},get workerParams(){return r.eV.workerParams},set workerParams(f){r.eV.workerParams=f},get dracoUrl(){return r.eU()},set dracoUrl(f){r.eT(f)},get meshoptUrl(){return r.eS()},set meshoptUrl(f){r.eR(f)},setNow:r.q.setNow,restoreNow:r.q.restoreNow}});var b=d;return b})}(D2)),D2.exports}var Q$=J$();const Hk=bc(Q$),LP=(e,n)=>{const s=e.__vccOpts||e;for(const[l,d]of n)s[l]=d;return s},eH={name:"MyMap",props:{center:{type:Array,default:()=>[139.7793490405977,35.675065123476045]},zoom:{type:Number,default:13}},mounted(){Hk.accessToken="pk.eyJ1Ijoia3pob3U4IiwiYSI6ImNtYXFqdGRoNDAwcWQycHB0dTF4MWRrY2sifQ.6_LIbgwea8qHfJpFVdqC-A",this.map=new Hk.Map({container:this.$refs.mapContainer,style:"mapbox://styles/mapbox/streets-v12",center:this.center,zoom:this.zoom}),this.map.on("load",()=>{this.$emit("map-loaded",this.map)})}},tH={ref:"mapContainer",class:"map-container"};function nH(e,n,s,l,d,m){return Z(),ue("div",tH,null,512)}const rH=LP(eH,[["render",nH],["__scopeId","data-v-752b0ff8"]]);var Ol=63710088e-1,OP={centimeters:Ol*100,centimetres:Ol*100,degrees:360/(2*Math.PI),feet:Ol*3.28084,inches:Ol*39.37,kilometers:Ol/1e3,kilometres:Ol/1e3,meters:Ol,metres:Ol,miles:Ol/1609.344,millimeters:Ol*1e3,millimetres:Ol*1e3,nauticalmiles:Ol/1852,radians:1,yards:Ol*1.0936};function DP(e,n,s={}){const l={type:"Feature"};return(s.id===0||s.id)&&(l.id=s.id),s.bbox&&(l.bbox=s.bbox),l.properties=n||{},l.geometry=e,l}function N4(e,n,s={}){if(!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!Uk(e[0])||!Uk(e[1]))throw new Error("coordinates must contain numbers");return DP({type:"Point",coordinates:e},n,s)}function Dl(e,n={}){const s={type:"FeatureCollection"};return n.id&&(s.id=n.id),n.bbox&&(s.bbox=n.bbox),s.features=e,s}function iH(e,n="kilometers"){const s=OP[n];if(!s)throw new Error(n+" units is invalid");return e*s}function sH(e,n="kilometers"){const s=OP[n];if(!s)throw new Error(n+" units is invalid");return e/s}function Uk(e){return!isNaN(e)&&e!==null&&!Array.isArray(e)}function zP(e,n,s){if(e!==null)for(var l,d,m,b,r,E,M,A=0,P=0,D,z=e.type,F=z==="FeatureCollection",N=z==="Feature",q=F?e.features.length:1,G=0;G<q;G++){M=F?e.features[G].geometry:N?e.geometry:e,D=M?M.type==="GeometryCollection":!1,r=D?M.geometries.length:1;for(var ie=0;ie<r;ie++){var W=0,Y=0;if(b=D?M.geometries[ie]:M,b!==null){E=b.coordinates;var J=b.type;switch(A=0,J){case null:break;case"Point":if(n(E,P,G,W,Y)===!1)return!1;P++,W++;break;case"LineString":case"MultiPoint":for(l=0;l<E.length;l++){if(n(E[l],P,G,W,Y)===!1)return!1;P++,J==="MultiPoint"&&W++}J==="LineString"&&W++;break;case"Polygon":case"MultiLineString":for(l=0;l<E.length;l++){for(d=0;d<E[l].length-A;d++){if(n(E[l][d],P,G,W,Y)===!1)return!1;P++}J==="MultiLineString"&&W++,J==="Polygon"&&Y++}J==="Polygon"&&W++;break;case"MultiPolygon":for(l=0;l<E.length;l++){for(Y=0,d=0;d<E[l].length;d++){for(m=0;m<E[l][d].length-A;m++){if(n(E[l][d][m],P,G,W,Y)===!1)return!1;P++}Y++}W++}break;case"GeometryCollection":for(l=0;l<b.geometries.length;l++)if(zP(b.geometries[l],n)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function jk(e,n){if(e.type==="Feature")n(e,0);else if(e.type==="FeatureCollection")for(var s=0;s<e.features.length&&n(e.features[s],s)!==!1;s++);}function NP(e,n){var s,l,d,m,b,r,E,M,A,P,D=0,z=e.type==="FeatureCollection",F=e.type==="Feature",N=z?e.features.length:1;for(s=0;s<N;s++){for(r=z?e.features[s].geometry:F?e.geometry:e,M=z?e.features[s].properties:F?e.properties:{},A=z?e.features[s].bbox:F?e.bbox:void 0,P=z?e.features[s].id:F?e.id:void 0,E=r?r.type==="GeometryCollection":!1,b=E?r.geometries.length:1,d=0;d<b;d++){if(m=E?r.geometries[d]:r,m===null){if(n(null,D,M,A,P)===!1)return!1;continue}switch(m.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(n(m,D,M,A,P)===!1)return!1;break}case"GeometryCollection":{for(l=0;l<m.geometries.length;l++)if(n(m.geometries[l],D,M,A,P)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}D++}}function F4(e,n={}){if(e.bbox!=null&&n.recompute!==!0)return e.bbox;const s=[1/0,1/0,-1/0,-1/0];return zP(e,l=>{s[0]>l[0]&&(s[0]=l[0]),s[1]>l[1]&&(s[1]=l[1]),s[2]<l[0]&&(s[2]=l[0]),s[3]<l[1]&&(s[3]=l[1])}),s}function oH(e,n={}){const s=F4(e),l=(s[0]+s[2])/2,d=(s[1]+s[3])/2;return N4([l,d],n.properties,n)}var z2={exports:{}},aH=z2.exports,Gk;function lH(){return Gk||(Gk=1,function(e,n){(function(s,l){e.exports=l()})(aH,function(){function s(k,g){(g==null||g>k.length)&&(g=k.length);for(var v=0,I=Array(g);v<g;v++)I[v]=k[v];return I}function l(k,g,v){return g=A(g),function(I,H){if(H&&(typeof H=="object"||typeof H=="function"))return H;if(H!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(ne){if(ne===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ne}(I)}(k,D()?Reflect.construct(g,v||[],A(k).constructor):g.apply(k,v))}function d(k,g){if(!(k instanceof g))throw new TypeError("Cannot call a class as a function")}function m(k,g,v){if(D())return Reflect.construct.apply(null,arguments);var I=[null];I.push.apply(I,g);var H=new(k.bind.apply(k,I));return v&&z(H,v.prototype),H}function b(k,g){for(var v=0;v<g.length;v++){var I=g[v];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(k,q(I.key),I)}}function r(k,g,v){return g&&b(k.prototype,g),v&&b(k,v),Object.defineProperty(k,"prototype",{writable:!1}),k}function E(k,g){var v=typeof Symbol<"u"&&k[Symbol.iterator]||k["@@iterator"];if(!v){if(Array.isArray(k)||(v=G(k))||g){v&&(k=v);var I=0,H=function(){};return{s:H,n:function(){return I>=k.length?{done:!0}:{done:!1,value:k[I++]}},e:function(et){throw et},f:H}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ne,Se=!0,Le=!1;return{s:function(){v=v.call(k)},n:function(){var et=v.next();return Se=et.done,et},e:function(et){Le=!0,ne=et},f:function(){try{Se||v.return==null||v.return()}finally{if(Le)throw ne}}}}function M(){return M=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(k,g,v){var I=function(ne,Se){for(;!{}.hasOwnProperty.call(ne,Se)&&(ne=A(ne))!==null;);return ne}(k,g);if(I){var H=Object.getOwnPropertyDescriptor(I,g);return H.get?H.get.call(arguments.length<3?k:v):H.value}},M.apply(null,arguments)}function A(k){return A=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(g){return g.__proto__||Object.getPrototypeOf(g)},A(k)}function P(k,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function");k.prototype=Object.create(g&&g.prototype,{constructor:{value:k,writable:!0,configurable:!0}}),Object.defineProperty(k,"prototype",{writable:!1}),g&&z(k,g)}function D(){try{var k=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(D=function(){return!!k})()}function z(k,g){return z=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(v,I){return v.__proto__=I,v},z(k,g)}function F(k,g,v,I){var H=M(A(1&I?k.prototype:k),g,v);return 2&I&&typeof H=="function"?function(ne){return H.apply(v,ne)}:H}function N(k){return function(g){if(Array.isArray(g))return s(g)}(k)||function(g){if(typeof Symbol<"u"&&g[Symbol.iterator]!=null||g["@@iterator"]!=null)return Array.from(g)}(k)||G(k)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function q(k){var g=function(v,I){if(typeof v!="object"||!v)return v;var H=v[Symbol.toPrimitive];if(H!==void 0){var ne=H.call(v,I);if(typeof ne!="object")return ne;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(v)}(k,"string");return typeof g=="symbol"?g:g+""}function G(k,g){if(k){if(typeof k=="string")return s(k,g);var v={}.toString.call(k).slice(8,-1);return v==="Object"&&k.constructor&&(v=k.constructor.name),v==="Map"||v==="Set"?Array.from(k):v==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(v)?s(k,g):void 0}}function ie(k){var g=typeof Map=="function"?new Map:void 0;return ie=function(v){if(v===null||!function(H){try{return Function.toString.call(H).indexOf("[native code]")!==-1}catch{return typeof H=="function"}}(v))return v;if(typeof v!="function")throw new TypeError("Super expression must either be null or a function");if(g!==void 0){if(g.has(v))return g.get(v);g.set(v,I)}function I(){return m(v,arguments,A(this).constructor)}return I.prototype=Object.create(v.prototype,{constructor:{value:I,enumerable:!1,writable:!0,configurable:!0}}),z(I,v)},ie(k)}var W=function(){function k(){d(this,k),k.constructor_.apply(this,arguments)}return r(k,[{key:"getEndCapStyle",value:function(){return this._endCapStyle}},{key:"isSingleSided",value:function(){return this._isSingleSided}},{key:"setQuadrantSegments",value:function(g){this._quadrantSegments=g,this._quadrantSegments===0&&(this._joinStyle=k.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=k.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),g<=0&&(this._quadrantSegments=1),this._joinStyle!==k.JOIN_ROUND&&(this._quadrantSegments=k.DEFAULT_QUADRANT_SEGMENTS)}},{key:"getJoinStyle",value:function(){return this._joinStyle}},{key:"setJoinStyle",value:function(g){this._joinStyle=g}},{key:"setSimplifyFactor",value:function(g){this._simplifyFactor=g<0?0:g}},{key:"getSimplifyFactor",value:function(){return this._simplifyFactor}},{key:"getQuadrantSegments",value:function(){return this._quadrantSegments}},{key:"setEndCapStyle",value:function(g){this._endCapStyle=g}},{key:"getMitreLimit",value:function(){return this._mitreLimit}},{key:"setMitreLimit",value:function(g){this._mitreLimit=g}},{key:"setSingleSided",value:function(g){this._isSingleSided=g}}],[{key:"constructor_",value:function(){if(this._quadrantSegments=k.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=k.CAP_ROUND,this._joinStyle=k.JOIN_ROUND,this._mitreLimit=k.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=k.DEFAULT_SIMPLIFY_FACTOR,arguments.length!==0){if(arguments.length===1){var g=arguments[0];this.setQuadrantSegments(g)}else if(arguments.length===2){var v=arguments[0],I=arguments[1];this.setQuadrantSegments(v),this.setEndCapStyle(I)}else if(arguments.length===4){var H=arguments[0],ne=arguments[1],Se=arguments[2],Le=arguments[3];this.setQuadrantSegments(H),this.setEndCapStyle(ne),this.setJoinStyle(Se),this.setMitreLimit(Le)}}}},{key:"bufferDistanceError",value:function(g){var v=Math.PI/2/g;return 1-Math.cos(v/2)}}])}();W.CAP_ROUND=1,W.CAP_FLAT=2,W.CAP_SQUARE=3,W.JOIN_ROUND=1,W.JOIN_MITRE=2,W.JOIN_BEVEL=3,W.DEFAULT_QUADRANT_SEGMENTS=8,W.DEFAULT_MITRE_LIMIT=5,W.DEFAULT_SIMPLIFY_FACTOR=.01;var Y=function(k){function g(v){var I;return d(this,g),(I=l(this,g,[v])).name=Object.keys({Exception:g})[0],I}return P(g,k),r(g,[{key:"toString",value:function(){return this.message}}])}(ie(Error)),J=function(k){function g(v){var I;return d(this,g),(I=l(this,g,[v])).name=Object.keys({IllegalArgumentException:g})[0],I}return P(g,k),r(g)}(Y),re=function(){return r(function k(){d(this,k)},[{key:"filter",value:function(k){}}])}();function he(){}function fe(){}function ce(){}var me,we,ye,Ue,Ne,Pe,ve,$e,Te=function(){return r(function k(){d(this,k)},null,[{key:"equalsWithTolerance",value:function(k,g,v){return Math.abs(k-g)<=v}}])}(),Ae=function(){return r(function k(g,v){d(this,k),this.low=v||0,this.high=g||0},null,[{key:"toBinaryString",value:function(k){var g,v="";for(g=2147483648;g>0;g>>>=1)v+=(k.high&g)===g?"1":"0";for(g=2147483648;g>0;g>>>=1)v+=(k.low&g)===g?"1":"0";return v}}])}();function Ve(){}function We(){}Ve.NaN=NaN,Ve.isNaN=function(k){return Number.isNaN(k)},Ve.isInfinite=function(k){return!Number.isFinite(k)},Ve.MAX_VALUE=Number.MAX_VALUE,Ve.POSITIVE_INFINITY=Number.POSITIVE_INFINITY,Ve.NEGATIVE_INFINITY=Number.NEGATIVE_INFINITY,typeof Float64Array=="function"&&typeof Int32Array=="function"?(Pe=2146435072,ve=new Float64Array(1),$e=new Int32Array(ve.buffer),Ve.doubleToLongBits=function(k){ve[0]=k;var g=0|$e[0],v=0|$e[1];return(v&Pe)===Pe&&1048575&v&&g!==0&&(g=0,v=2146959360),new Ae(v,g)},Ve.longBitsToDouble=function(k){return $e[0]=k.low,$e[1]=k.high,ve[0]}):(me=1023,we=Math.log2,ye=Math.floor,Ue=Math.pow,Ne=function(){for(var k=53;k>0;k--){var g=Ue(2,k)-1;if(ye(we(g))+1===k)return g}return 0}(),Ve.doubleToLongBits=function(k){var g,v,I,H,ne,Se,Le,et,Et;if(k<0||1/k===Number.NEGATIVE_INFINITY?(Se=1<<31,k=-k):Se=0,k===0)return new Ae(et=Se,Et=0);if(k===1/0)return new Ae(et=2146435072|Se,Et=0);if(k!=k)return new Ae(et=2146959360,Et=0);if(H=0,Et=0,(g=ye(k))>1)if(g<=Ne)(H=ye(we(g)))<=20?(Et=0,et=g<<20-H&1048575):(Et=g%(v=Ue(2,I=H-20))<<32-I,et=g/v&1048575);else for(I=g,Et=0;(I=ye(v=I/2))!==0;)H++,Et>>>=1,Et|=(1&et)<<31,et>>>=1,v!==I&&(et|=524288);if(Le=H+me,ne=g===0,g=k-g,H<52&&g!==0)for(I=0;;){if((v=2*g)>=1?(g=v-1,ne?(Le--,ne=!1):(I<<=1,I|=1,H++)):(g=v,ne?--Le==0&&(H++,ne=!1):(I<<=1,H++)),H===20)et|=I,I=0;else if(H===52){Et|=I;break}if(v===1){H<20?et|=I<<20-H:H<52&&(Et|=I<<52-H);break}}return et|=Le<<20,new Ae(et|=Se,Et)},Ve.longBitsToDouble=function(k){var g,v,I,H,ne=k.high,Se=k.low,Le=ne&1<<31?-1:1;for(I=((2146435072&ne)>>20)-me,H=0,v=1<<19,g=1;g<=20;g++)ne&v&&(H+=Ue(2,-g)),v>>>=1;for(v=1<<31,g=21;g<=52;g++)Se&v&&(H+=Ue(2,-g)),v>>>=1;if(I===-1023){if(H===0)return 0*Le;I=-1022}else{if(I===1024)return H===0?Le/0:NaN;H+=1}return Le*H*Ue(2,I)});var ft=function(k){function g(v){var I;return d(this,g),(I=l(this,g,[v])).name=Object.keys({RuntimeException:g})[0],I}return P(g,k),r(g)}(Y),at=function(k){function g(){var v;return d(this,g),v=l(this,g),g.constructor_.apply(v,arguments),v}return P(g,k),r(g,null,[{key:"constructor_",value:function(){if(arguments.length===0)ft.constructor_.call(this);else if(arguments.length===1){var v=arguments[0];ft.constructor_.call(this,v)}}}])}(ft),ct=function(){function k(){d(this,k)}return r(k,null,[{key:"shouldNeverReachHere",value:function(){if(arguments.length===0)k.shouldNeverReachHere(null);else if(arguments.length===1){var g=arguments[0];throw new at("Should never reach here"+(g!==null?": "+g:""))}}},{key:"isTrue",value:function(){if(arguments.length===1){var g=arguments[0];k.isTrue(g,null)}else if(arguments.length===2){var v=arguments[1];if(!arguments[0])throw v===null?new at:new at(v)}}},{key:"equals",value:function(){if(arguments.length===2){var g=arguments[0],v=arguments[1];k.equals(g,v,null)}else if(arguments.length===3){var I=arguments[0],H=arguments[1],ne=arguments[2];if(!H.equals(I))throw new at("Expected "+I+" but encountered "+H+(ne!==null?": "+ne:""))}}}])}(),Mt=new ArrayBuffer(8),Ct=new Float64Array(Mt),gt=new Int32Array(Mt),Ke=function(){function k(){d(this,k),k.constructor_.apply(this,arguments)}return r(k,[{key:"getM",value:function(){return Ve.NaN}},{key:"setOrdinate",value:function(g,v){switch(g){case k.X:this.x=v;break;case k.Y:this.y=v;break;case k.Z:this.setZ(v);break;default:throw new J("Invalid ordinate index: "+g)}}},{key:"equals2D",value:function(){if(arguments.length===1){var g=arguments[0];return this.x===g.x&&this.y===g.y}if(arguments.length===2){var v=arguments[0],I=arguments[1];return!!Te.equalsWithTolerance(this.x,v.x,I)&&!!Te.equalsWithTolerance(this.y,v.y,I)}}},{key:"setM",value:function(g){throw new J("Invalid ordinate index: "+k.M)}},{key:"getZ",value:function(){return this.z}},{key:"getOrdinate",value:function(g){switch(g){case k.X:return this.x;case k.Y:return this.y;case k.Z:return this.getZ()}throw new J("Invalid ordinate index: "+g)}},{key:"equals3D",value:function(g){return this.x===g.x&&this.y===g.y&&(this.getZ()===g.getZ()||Ve.isNaN(this.getZ())&&Ve.isNaN(g.getZ()))}},{key:"equals",value:function(g){return g instanceof k&&this.equals2D(g)}},{key:"equalInZ",value:function(g,v){return Te.equalsWithTolerance(this.getZ(),g.getZ(),v)}},{key:"setX",value:function(g){this.x=g}},{key:"compareTo",value:function(g){var v=g;return this.x<v.x?-1:this.x>v.x?1:this.y<v.y?-1:this.y>v.y?1:0}},{key:"getX",value:function(){return this.x}},{key:"setZ",value:function(g){this.z=g}},{key:"clone",value:function(){try{return null}catch(g){if(g instanceof CloneNotSupportedException)return ct.shouldNeverReachHere("this shouldn't happen because this class is Cloneable"),null;throw g}}},{key:"copy",value:function(){return new k(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+", "+this.getZ()+")"}},{key:"distance3D",value:function(g){var v=this.x-g.x,I=this.y-g.y,H=this.getZ()-g.getZ();return Math.sqrt(v*v+I*I+H*H)}},{key:"getY",value:function(){return this.y}},{key:"setY",value:function(g){this.y=g}},{key:"distance",value:function(g){var v=this.x-g.x,I=this.y-g.y;return Math.sqrt(v*v+I*I)}},{key:"hashCode",value:function(){var g=17;return g=37*(g=37*g+k.hashCode(this.x))+k.hashCode(this.y)}},{key:"setCoordinate",value:function(g){this.x=g.x,this.y=g.y,this.z=g.getZ()}},{key:"interfaces_",get:function(){return[he,fe,ce]}}],[{key:"constructor_",value:function(){if(this.x=null,this.y=null,this.z=null,arguments.length===0)k.constructor_.call(this,0,0);else if(arguments.length===1){var g=arguments[0];k.constructor_.call(this,g.x,g.y,g.getZ())}else if(arguments.length===2){var v=arguments[0],I=arguments[1];k.constructor_.call(this,v,I,k.NULL_ORDINATE)}else if(arguments.length===3){var H=arguments[0],ne=arguments[1],Se=arguments[2];this.x=H,this.y=ne,this.z=Se}}},{key:"hashCode",value:function(g){return Ct[0]=g,gt[0]^gt[1]}}])}(),Lt=function(){function k(){d(this,k),k.constructor_.apply(this,arguments)}return r(k,[{key:"compare",value:function(g,v){var I=k.compare(g.x,v.x);if(I!==0)return I;var H=k.compare(g.y,v.y);return H!==0?H:this._dimensionsToTest<=2?0:k.compare(g.getZ(),v.getZ())}},{key:"interfaces_",get:function(){return[We]}}],[{key:"constructor_",value:function(){if(this._dimensionsToTest=2,arguments.length===0)k.constructor_.call(this,2);else if(arguments.length===1){var g=arguments[0];if(g!==2&&g!==3)throw new J("only 2 or 3 dimensions may be specified");this._dimensionsToTest=g}}},{key:"compare",value:function(g,v){return g<v?-1:g>v?1:Ve.isNaN(g)?Ve.isNaN(v)?0:-1:Ve.isNaN(v)?1:0}}])}();Ke.DimensionalComparator=Lt,Ke.NULL_ORDINATE=Ve.NaN,Ke.X=0,Ke.Y=1,Ke.Z=2,Ke.M=3;var xn=function(){function k(){d(this,k),k.constructor_.apply(this,arguments)}return r(k,[{key:"getArea",value:function(){return this.getWidth()*this.getHeight()}},{key:"equals",value:function(g){if(!(g instanceof k))return!1;var v=g;return this.isNull()?v.isNull():this._maxx===v.getMaxX()&&this._maxy===v.getMaxY()&&this._minx===v.getMinX()&&this._miny===v.getMinY()}},{key:"intersection",value:function(g){if(this.isNull()||g.isNull()||!this.intersects(g))return new k;var v=this._minx>g._minx?this._minx:g._minx,I=this._miny>g._miny?this._miny:g._miny;return new k(v,this._maxx<g._maxx?this._maxx:g._maxx,I,this._maxy<g._maxy?this._maxy:g._maxy)}},{key:"isNull",value:function(){return this._maxx<this._minx}},{key:"getMaxX",value:function(){return this._maxx}},{key:"covers",value:function(){if(arguments.length===1){if(arguments[0]instanceof Ke){var g=arguments[0];return this.covers(g.x,g.y)}if(arguments[0]instanceof k){var v=arguments[0];return!this.isNull()&&!v.isNull()&&v.getMinX()>=this._minx&&v.getMaxX()<=this._maxx&&v.getMinY()>=this._miny&&v.getMaxY()<=this._maxy}}else if(arguments.length===2){var I=arguments[0],H=arguments[1];return!this.isNull()&&I>=this._minx&&I<=this._maxx&&H>=this._miny&&H<=this._maxy}}},{key:"intersects",value:function(){if(arguments.length===1){if(arguments[0]instanceof k){var g=arguments[0];return!this.isNull()&&!g.isNull()&&!(g._minx>this._maxx||g._maxx<this._minx||g._miny>this._maxy||g._maxy<this._miny)}if(arguments[0]instanceof Ke){var v=arguments[0];return this.intersects(v.x,v.y)}}else if(arguments.length===2){if(arguments[0]instanceof Ke&&arguments[1]instanceof Ke){var I=arguments[0],H=arguments[1];return!this.isNull()&&!((I.x<H.x?I.x:H.x)>this._maxx)&&!((I.x>H.x?I.x:H.x)<this._minx)&&!((I.y<H.y?I.y:H.y)>this._maxy)&&!((I.y>H.y?I.y:H.y)<this._miny)}if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var ne=arguments[0],Se=arguments[1];return!this.isNull()&&!(ne>this._maxx||ne<this._minx||Se>this._maxy||Se<this._miny)}}}},{key:"getMinY",value:function(){return this._miny}},{key:"getDiameter",value:function(){if(this.isNull())return 0;var g=this.getWidth(),v=this.getHeight();return Math.sqrt(g*g+v*v)}},{key:"getMinX",value:function(){return this._minx}},{key:"expandToInclude",value:function(){if(arguments.length===1){if(arguments[0]instanceof Ke){var g=arguments[0];this.expandToInclude(g.x,g.y)}else if(arguments[0]instanceof k){var v=arguments[0];if(v.isNull())return null;this.isNull()?(this._minx=v.getMinX(),this._maxx=v.getMaxX(),this._miny=v.getMinY(),this._maxy=v.getMaxY()):(v._minx<this._minx&&(this._minx=v._minx),v._maxx>this._maxx&&(this._maxx=v._maxx),v._miny<this._miny&&(this._miny=v._miny),v._maxy>this._maxy&&(this._maxy=v._maxy))}}else if(arguments.length===2){var I=arguments[0],H=arguments[1];this.isNull()?(this._minx=I,this._maxx=I,this._miny=H,this._maxy=H):(I<this._minx&&(this._minx=I),I>this._maxx&&(this._maxx=I),H<this._miny&&(this._miny=H),H>this._maxy&&(this._maxy=H))}}},{key:"minExtent",value:function(){if(this.isNull())return 0;var g=this.getWidth(),v=this.getHeight();return g<v?g:v}},{key:"getWidth",value:function(){return this.isNull()?0:this._maxx-this._minx}},{key:"compareTo",value:function(g){var v=g;return this.isNull()?v.isNull()?0:-1:v.isNull()?1:this._minx<v._minx?-1:this._minx>v._minx?1:this._miny<v._miny?-1:this._miny>v._miny?1:this._maxx<v._maxx?-1:this._maxx>v._maxx?1:this._maxy<v._maxy?-1:this._maxy>v._maxy?1:0}},{key:"translate",value:function(g,v){if(this.isNull())return null;this.init(this.getMinX()+g,this.getMaxX()+g,this.getMinY()+v,this.getMaxY()+v)}},{key:"copy",value:function(){return new k(this)}},{key:"toString",value:function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"}},{key:"setToNull",value:function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1}},{key:"disjoint",value:function(g){return!(!this.isNull()&&!g.isNull())||g._minx>this._maxx||g._maxx<this._minx||g._miny>this._maxy||g._maxy<this._miny}},{key:"getHeight",value:function(){return this.isNull()?0:this._maxy-this._miny}},{key:"maxExtent",value:function(){if(this.isNull())return 0;var g=this.getWidth(),v=this.getHeight();return g>v?g:v}},{key:"expandBy",value:function(){if(arguments.length===1){var g=arguments[0];this.expandBy(g,g)}else if(arguments.length===2){var v=arguments[0],I=arguments[1];if(this.isNull())return null;this._minx-=v,this._maxx+=v,this._miny-=I,this._maxy+=I,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}}},{key:"contains",value:function(){if(arguments.length===1){if(arguments[0]instanceof k){var g=arguments[0];return this.covers(g)}if(arguments[0]instanceof Ke){var v=arguments[0];return this.covers(v)}}else if(arguments.length===2){var I=arguments[0],H=arguments[1];return this.covers(I,H)}}},{key:"centre",value:function(){return this.isNull()?null:new Ke((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)}},{key:"init",value:function(){if(arguments.length===0)this.setToNull();else if(arguments.length===1){if(arguments[0]instanceof Ke){var g=arguments[0];this.init(g.x,g.x,g.y,g.y)}else if(arguments[0]instanceof k){var v=arguments[0];this._minx=v._minx,this._maxx=v._maxx,this._miny=v._miny,this._maxy=v._maxy}}else if(arguments.length===2){var I=arguments[0],H=arguments[1];this.init(I.x,H.x,I.y,H.y)}else if(arguments.length===4){var ne=arguments[0],Se=arguments[1],Le=arguments[2],et=arguments[3];ne<Se?(this._minx=ne,this._maxx=Se):(this._minx=Se,this._maxx=ne),Le<et?(this._miny=Le,this._maxy=et):(this._miny=et,this._maxy=Le)}}},{key:"getMaxY",value:function(){return this._maxy}},{key:"distance",value:function(g){if(this.intersects(g))return 0;var v=0;this._maxx<g._minx?v=g._minx-this._maxx:this._minx>g._maxx&&(v=this._minx-g._maxx);var I=0;return this._maxy<g._miny?I=g._miny-this._maxy:this._miny>g._maxy&&(I=this._miny-g._maxy),v===0?I:I===0?v:Math.sqrt(v*v+I*I)}},{key:"hashCode",value:function(){var g=17;return g=37*(g=37*(g=37*(g=37*g+Ke.hashCode(this._minx))+Ke.hashCode(this._maxx))+Ke.hashCode(this._miny))+Ke.hashCode(this._maxy)}},{key:"interfaces_",get:function(){return[he,ce]}}],[{key:"constructor_",value:function(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,arguments.length===0)this.init();else if(arguments.length===1){if(arguments[0]instanceof Ke){var g=arguments[0];this.init(g.x,g.x,g.y,g.y)}else if(arguments[0]instanceof k){var v=arguments[0];this.init(v)}}else if(arguments.length===2){var I=arguments[0],H=arguments[1];this.init(I.x,H.x,I.y,H.y)}else if(arguments.length===4){var ne=arguments[0],Se=arguments[1],Le=arguments[2],et=arguments[3];this.init(ne,Se,Le,et)}}},{key:"intersects",value:function(){if(arguments.length===3){var g=arguments[0],v=arguments[1],I=arguments[2];return I.x>=(g.x<v.x?g.x:v.x)&&I.x<=(g.x>v.x?g.x:v.x)&&I.y>=(g.y<v.y?g.y:v.y)&&I.y<=(g.y>v.y?g.y:v.y)}if(arguments.length===4){var H=arguments[0],ne=arguments[1],Se=arguments[2],Le=arguments[3],et=Math.min(Se.x,Le.x),Et=Math.max(Se.x,Le.x),tn=Math.min(H.x,ne.x),vn=Math.max(H.x,ne.x);return!(tn>Et)&&!(vn<et)&&(et=Math.min(Se.y,Le.y),Et=Math.max(Se.y,Le.y),tn=Math.min(H.y,ne.y),vn=Math.max(H.y,ne.y),!(tn>Et)&&!(vn<et))}}}])}(),Ht=function(){function k(){d(this,k),k.constructor_.apply(this,arguments)}return r(k,[{key:"isGeometryCollection",value:function(){return this.getTypeCode()===k.TYPECODE_GEOMETRYCOLLECTION}},{key:"getFactory",value:function(){return this._factory}},{key:"getGeometryN",value:function(g){return this}},{key:"getArea",value:function(){return 0}},{key:"isRectangle",value:function(){return!1}},{key:"equalsExact",value:function(g){return this===g||this.equalsExact(g,0)}},{key:"geometryChanged",value:function(){this.apply(k.geometryChangedFilter)}},{key:"geometryChangedAction",value:function(){this._envelope=null}},{key:"equalsNorm",value:function(g){return g!==null&&this.norm().equalsExact(g.norm())}},{key:"getLength",value:function(){return 0}},{key:"getNumGeometries",value:function(){return 1}},{key:"compareTo",value:function(){var g;if(arguments.length===1){var v=arguments[0];return g=v,this.getTypeCode()!==g.getTypeCode()?this.getTypeCode()-g.getTypeCode():this.isEmpty()&&g.isEmpty()?0:this.isEmpty()?-1:g.isEmpty()?1:this.compareToSameClass(v)}if(arguments.length===2){var I=arguments[0],H=arguments[1];return g=I,this.getTypeCode()!==g.getTypeCode()?this.getTypeCode()-g.getTypeCode():this.isEmpty()&&g.isEmpty()?0:this.isEmpty()?-1:g.isEmpty()?1:this.compareToSameClass(I,H)}}},{key:"getUserData",value:function(){return this._userData}},{key:"getSRID",value:function(){return this._SRID}},{key:"getEnvelope",value:function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())}},{key:"checkNotGeometryCollection",value:function(g){if(g.getTypeCode()===k.TYPECODE_GEOMETRYCOLLECTION)throw new J("This method does not support GeometryCollection arguments")}},{key:"equal",value:function(g,v,I){return I===0?g.equals(v):g.distance(v)<=I}},{key:"norm",value:function(){var g=this.copy();return g.normalize(),g}},{key:"reverse",value:function(){var g=this.reverseInternal();return this.envelope!=null&&(g.envelope=this.envelope.copy()),g.setSRID(this.getSRID()),g}},{key:"copy",value:function(){var g=this.copyInternal();return g.envelope=this._envelope==null?null:this._envelope.copy(),g._SRID=this._SRID,g._userData=this._userData,g}},{key:"getPrecisionModel",value:function(){return this._factory.getPrecisionModel()}},{key:"getEnvelopeInternal",value:function(){return this._envelope===null&&(this._envelope=this.computeEnvelopeInternal()),new xn(this._envelope)}},{key:"setSRID",value:function(g){this._SRID=g}},{key:"setUserData",value:function(g){this._userData=g}},{key:"compare",value:function(g,v){for(var I=g.iterator(),H=v.iterator();I.hasNext()&&H.hasNext();){var ne=I.next(),Se=H.next(),Le=ne.compareTo(Se);if(Le!==0)return Le}return I.hasNext()?1:H.hasNext()?-1:0}},{key:"hashCode",value:function(){return this.getEnvelopeInternal().hashCode()}},{key:"isEquivalentClass",value:function(g){return this.getClass()===g.getClass()}},{key:"isGeometryCollectionOrDerived",value:function(){return this.getTypeCode()===k.TYPECODE_GEOMETRYCOLLECTION||this.getTypeCode()===k.TYPECODE_MULTIPOINT||this.getTypeCode()===k.TYPECODE_MULTILINESTRING||this.getTypeCode()===k.TYPECODE_MULTIPOLYGON}},{key:"interfaces_",get:function(){return[fe,he,ce]}},{key:"getClass",value:function(){return k}}],[{key:"hasNonEmptyElements",value:function(g){for(var v=0;v<g.length;v++)if(!g[v].isEmpty())return!0;return!1}},{key:"hasNullElements",value:function(g){for(var v=0;v<g.length;v++)if(g[v]===null)return!0;return!1}}])}();Ht.constructor_=function(k){k&&(this._envelope=null,this._userData=null,this._factory=k,this._SRID=k.getSRID())},Ht.TYPECODE_POINT=0,Ht.TYPECODE_MULTIPOINT=1,Ht.TYPECODE_LINESTRING=2,Ht.TYPECODE_LINEARRING=3,Ht.TYPECODE_MULTILINESTRING=4,Ht.TYPECODE_POLYGON=5,Ht.TYPECODE_MULTIPOLYGON=6,Ht.TYPECODE_GEOMETRYCOLLECTION=7,Ht.TYPENAME_POINT="Point",Ht.TYPENAME_MULTIPOINT="MultiPoint",Ht.TYPENAME_LINESTRING="LineString",Ht.TYPENAME_LINEARRING="LinearRing",Ht.TYPENAME_MULTILINESTRING="MultiLineString",Ht.TYPENAME_POLYGON="Polygon",Ht.TYPENAME_MULTIPOLYGON="MultiPolygon",Ht.TYPENAME_GEOMETRYCOLLECTION="GeometryCollection",Ht.geometryChangedFilter={get interfaces_(){return[re]},filter:function(k){k.geometryChangedAction()}};var le=function(){function k(){d(this,k)}return r(k,null,[{key:"toLocationSymbol",value:function(g){switch(g){case k.EXTERIOR:return"e";case k.BOUNDARY:return"b";case k.INTERIOR:return"i";case k.NONE:return"-"}throw new J("Unknown location value: "+g)}}])}();le.INTERIOR=0,le.BOUNDARY=1,le.EXTERIOR=2,le.NONE=-1;var nt=function(){return r(function k(){d(this,k)},[{key:"add",value:function(){}},{key:"addAll",value:function(){}},{key:"isEmpty",value:function(){}},{key:"iterator",value:function(){}},{key:"size",value:function(){}},{key:"toArray",value:function(){}},{key:"remove",value:function(){}}])}(),Gt=function(k){function g(v){var I;return d(this,g),(I=l(this,g,[v])).name=Object.keys({NoSuchElementException:g})[0],I}return P(g,k),r(g)}(Y),an=function(k){function g(v){var I;return d(this,g),(I=l(this,g,[v])).name=Object.keys({UnsupportedOperationException:g})[0],I}return P(g,k),r(g)}(Y),Qt=function(k){function g(){return d(this,g),l(this,g,arguments)}return P(g,k),r(g,[{key:"contains",value:function(){}}])}(nt),Zt=function(k){function g(v){var I;return d(this,g),(I=l(this,g)).map=new Map,v instanceof nt&&I.addAll(v),I}return P(g,k),r(g,[{key:"contains",value:function(v){var I=v.hashCode?v.hashCode():v;return!!this.map.has(I)}},{key:"add",value:function(v){var I=v.hashCode?v.hashCode():v;return!this.map.has(I)&&!!this.map.set(I,v)}},{key:"addAll",value:function(v){var I,H=E(v);try{for(H.s();!(I=H.n()).done;){var ne=I.value;this.add(ne)}}catch(Se){H.e(Se)}finally{H.f()}return!0}},{key:"remove",value:function(){throw new an}},{key:"size",value:function(){return this.map.size}},{key:"isEmpty",value:function(){return this.map.size===0}},{key:"toArray",value:function(){return Array.from(this.map.values())}},{key:"iterator",value:function(){return new rn(this.map)}},{key:Symbol.iterator,value:function(){return this.map}}])}(Qt),rn=function(){return r(function k(g){d(this,k),this.iterator=g.values();var v=this.iterator.next(),I=v.done,H=v.value;this.done=I,this.value=H},[{key:"next",value:function(){if(this.done)throw new Gt;var k=this.value,g=this.iterator.next(),v=g.done,I=g.value;return this.done=v,this.value=I,k}},{key:"hasNext",value:function(){return!this.done}},{key:"remove",value:function(){throw new an}}])}(),bt=function(){function k(){d(this,k)}return r(k,null,[{key:"opposite",value:function(g){return g===k.LEFT?k.RIGHT:g===k.RIGHT?k.LEFT:g}}])}();bt.ON=0,bt.LEFT=1,bt.RIGHT=2;var fn=function(k){function g(v){var I;return d(this,g),(I=l(this,g,[v])).name=Object.keys({EmptyStackException:g})[0],I}return P(g,k),r(g)}(Y),pn=function(k){function g(v){var I;return d(this,g),(I=l(this,g,[v])).name=Object.keys({IndexOutOfBoundsException:g})[0],I}return P(g,k),r(g)}(Y),Vn=function(k){function g(){return d(this,g),l(this,g,arguments)}return P(g,k),r(g,[{key:"get",value:function(){}},{key:"set",value:function(){}},{key:"isEmpty",value:function(){}}])}(nt),Nn=function(k){function g(){var v;return d(this,g),(v=l(this,g)).array=[],v}return P(g,k),r(g,[{key:"add",value:function(v){return this.array.push(v),!0}},{key:"get",value:function(v){if(v<0||v>=this.size())throw new pn;return this.array[v]}},{key:"push",value:function(v){return this.array.push(v),v}},{key:"pop",value:function(){if(this.array.length===0)throw new fn;return this.array.pop()}},{key:"peek",value:function(){if(this.array.length===0)throw new fn;return this.array[this.array.length-1]}},{key:"empty",value:function(){return this.array.length===0}},{key:"isEmpty",value:function(){return this.empty()}},{key:"search",value:function(v){return this.array.indexOf(v)}},{key:"size",value:function(){return this.array.length}},{key:"toArray",value:function(){return this.array.slice()}}])}(Vn);function Ot(k,g){return k.interfaces_&&k.interfaces_.indexOf(g)>-1}var Bn=function(){return r(function k(g){d(this,k),this.str=g},[{key:"append",value:function(k){this.str+=k}},{key:"setCharAt",value:function(k,g){this.str=this.str.substr(0,k)+g+this.str.substr(k+1)}},{key:"toString",value:function(){return this.str}}])}(),Sr=function(){function k(g){d(this,k),this.value=g}return r(k,[{key:"intValue",value:function(){return this.value}},{key:"compareTo",value:function(g){return this.value<g?-1:this.value>g?1:0}}],[{key:"compare",value:function(g,v){return g<v?-1:g>v?1:0}},{key:"isNan",value:function(g){return Number.isNaN(g)}},{key:"valueOf",value:function(g){return new k(g)}}])}(),Ur=function(){return r(function k(){d(this,k)},null,[{key:"isWhitespace",value:function(k){return k<=32&&k>=0||k===127}},{key:"toUpperCase",value:function(k){return k.toUpperCase()}}])}(),Kn=function(){function k(){d(this,k),k.constructor_.apply(this,arguments)}return r(k,[{key:"le",value:function(g){return this._hi<g._hi||this._hi===g._hi&&this._lo<=g._lo}},{key:"extractSignificantDigits",value:function(g,v){var I=this.abs(),H=k.magnitude(I._hi),ne=k.TEN.pow(H);(I=I.divide(ne)).gt(k.TEN)?(I=I.divide(k.TEN),H+=1):I.lt(k.ONE)&&(I=I.multiply(k.TEN),H-=1);for(var Se=H+1,Le=new Bn,et=k.MAX_PRINT_DIGITS-1,Et=0;Et<=et;Et++){g&&Et===Se&&Le.append(".");var tn=Math.trunc(I._hi);if(tn<0)break;var vn=!1,or=0;tn>9?(vn=!0,or="9"):or="0"+tn,Le.append(or),I=I.subtract(k.valueOf(tn)).multiply(k.TEN),vn&&I.selfAdd(k.TEN);var $r=!0,Xr=k.magnitude(I._hi);if(Xr<0&&Math.abs(Xr)>=et-Et&&($r=!1),!$r)break}return v[0]=H,Le.toString()}},{key:"sqr",value:function(){return this.multiply(this)}},{key:"doubleValue",value:function(){return this._hi+this._lo}},{key:"subtract",value:function(){if(arguments[0]instanceof k){var g=arguments[0];return this.add(g.negate())}if(typeof arguments[0]=="number"){var v=arguments[0];return this.add(-v)}}},{key:"equals",value:function(){if(arguments.length===1&&arguments[0]instanceof k){var g=arguments[0];return this._hi===g._hi&&this._lo===g._lo}}},{key:"isZero",value:function(){return this._hi===0&&this._lo===0}},{key:"selfSubtract",value:function(){if(arguments[0]instanceof k){var g=arguments[0];return this.isNaN()?this:this.selfAdd(-g._hi,-g._lo)}if(typeof arguments[0]=="number"){var v=arguments[0];return this.isNaN()?this:this.selfAdd(-v,0)}}},{key:"getSpecialNumberString",value:function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null}},{key:"min",value:function(g){return this.le(g)?this:g}},{key:"selfDivide",value:function(){if(arguments.length===1){if(arguments[0]instanceof k){var g=arguments[0];return this.selfDivide(g._hi,g._lo)}if(typeof arguments[0]=="number"){var v=arguments[0];return this.selfDivide(v,0)}}else if(arguments.length===2){var I,H,ne,Se,Le=arguments[0],et=arguments[1],Et=null,tn=null,vn=null,or=null;return ne=this._hi/Le,or=(Et=(vn=k.SPLIT*ne)-(Et=vn-ne))*(tn=(or=k.SPLIT*Le)-(tn=or-Le))-(Se=ne*Le)+Et*(H=Le-tn)+(I=ne-Et)*tn+I*H,or=ne+(vn=(this._hi-Se-or+this._lo-ne*et)/Le),this._hi=or,this._lo=ne-or+vn,this}}},{key:"dump",value:function(){return"DD<"+this._hi+", "+this._lo+">"}},{key:"divide",value:function(){if(arguments[0]instanceof k){var g,v,I,H,ne=arguments[0],Se=null,Le=null,et=null,Et=null;return g=(I=this._hi/ne._hi)-(Se=(et=k.SPLIT*I)-(Se=et-I)),Et=Se*(Le=(Et=k.SPLIT*ne._hi)-(Le=Et-ne._hi))-(H=I*ne._hi)+Se*(v=ne._hi-Le)+g*Le+g*v,new k(Et=I+(et=(this._hi-H-Et+this._lo-I*ne._lo)/ne._hi),I-Et+et)}if(typeof arguments[0]=="number"){var tn=arguments[0];return Ve.isNaN(tn)?k.createNaN():k.copy(this).selfDivide(tn,0)}}},{key:"ge",value:function(g){return this._hi>g._hi||this._hi===g._hi&&this._lo>=g._lo}},{key:"pow",value:function(g){if(g===0)return k.valueOf(1);var v=new k(this),I=k.valueOf(1),H=Math.abs(g);if(H>1)for(;H>0;)H%2==1&&I.selfMultiply(v),(H/=2)>0&&(v=v.sqr());else I=v;return g<0?I.reciprocal():I}},{key:"ceil",value:function(){if(this.isNaN())return k.NaN;var g=Math.ceil(this._hi),v=0;return g===this._hi&&(v=Math.ceil(this._lo)),new k(g,v)}},{key:"compareTo",value:function(g){var v=g;return this._hi<v._hi?-1:this._hi>v._hi?1:this._lo<v._lo?-1:this._lo>v._lo?1:0}},{key:"rint",value:function(){return this.isNaN()?this:this.add(.5).floor()}},{key:"setValue",value:function(){if(arguments[0]instanceof k){var g=arguments[0];return this.init(g),this}if(typeof arguments[0]=="number"){var v=arguments[0];return this.init(v),this}}},{key:"max",value:function(g){return this.ge(g)?this:g}},{key:"sqrt",value:function(){if(this.isZero())return k.valueOf(0);if(this.isNegative())return k.NaN;var g=1/Math.sqrt(this._hi),v=this._hi*g,I=k.valueOf(v),H=this.subtract(I.sqr())._hi*(.5*g);return I.add(H)}},{key:"selfAdd",value:function(){if(arguments.length===1){if(arguments[0]instanceof k){var g=arguments[0];return this.selfAdd(g._hi,g._lo)}if(typeof arguments[0]=="number"){var v,I,H,ne,Se,Le=arguments[0],et=null;return et=(H=this._hi+Le)-(ne=H-this._hi),I=(Se=(et=Le-ne+(this._hi-et))+this._lo)+(H-(v=H+Se)),this._hi=v+I,this._lo=I+(v-this._hi),this}}else if(arguments.length===2){var Et,tn,vn,or,$r=arguments[0],Xr=arguments[1],_i=null,fs=null,ss=null;vn=this._hi+$r,tn=this._lo+Xr,fs=vn-(ss=vn-this._hi),_i=tn-(or=tn-this._lo);var rs=(Et=vn+(ss=(fs=$r-ss+(this._hi-fs))+tn))+(ss=(_i=Xr-or+(this._lo-_i))+(ss+(vn-Et))),Co=ss+(Et-rs);return this._hi=rs,this._lo=Co,this}}},{key:"selfMultiply",value:function(){if(arguments.length===1){if(arguments[0]instanceof k){var g=arguments[0];return this.selfMultiply(g._hi,g._lo)}if(typeof arguments[0]=="number"){var v=arguments[0];return this.selfMultiply(v,0)}}else if(arguments.length===2){var I,H,ne=arguments[0],Se=arguments[1],Le=null,et=null,Et=null,tn=null;Le=(Et=k.SPLIT*this._hi)-this._hi,tn=k.SPLIT*ne,Le=Et-Le,I=this._hi-Le,et=tn-ne;var vn=(Et=this._hi*ne)+(tn=Le*(et=tn-et)-Et+Le*(H=ne-et)+I*et+I*H+(this._hi*Se+this._lo*ne)),or=tn+(Le=Et-vn);return this._hi=vn,this._lo=or,this}}},{key:"selfSqr",value:function(){return this.selfMultiply(this)}},{key:"floor",value:function(){if(this.isNaN())return k.NaN;var g=Math.floor(this._hi),v=0;return g===this._hi&&(v=Math.floor(this._lo)),new k(g,v)}},{key:"negate",value:function(){return this.isNaN()?this:new k(-this._hi,-this._lo)}},{key:"clone",value:function(){try{return null}catch(g){if(g instanceof CloneNotSupportedException)return null;throw g}}},{key:"multiply",value:function(){if(arguments[0]instanceof k){var g=arguments[0];return g.isNaN()?k.createNaN():k.copy(this).selfMultiply(g)}if(typeof arguments[0]=="number"){var v=arguments[0];return Ve.isNaN(v)?k.createNaN():k.copy(this).selfMultiply(v,0)}}},{key:"isNaN",value:function(){return Ve.isNaN(this._hi)}},{key:"intValue",value:function(){return Math.trunc(this._hi)}},{key:"toString",value:function(){var g=k.magnitude(this._hi);return g>=-3&&g<=20?this.toStandardNotation():this.toSciNotation()}},{key:"toStandardNotation",value:function(){var g=this.getSpecialNumberString();if(g!==null)return g;var v=new Array(1).fill(null),I=this.extractSignificantDigits(!0,v),H=v[0]+1,ne=I;if(I.charAt(0)===".")ne="0"+I;else if(H<0)ne="0."+k.stringOfChar("0",-H)+I;else if(I.indexOf(".")===-1){var Se=H-I.length;ne=I+k.stringOfChar("0",Se)+".0"}return this.isNegative()?"-"+ne:ne}},{key:"reciprocal",value:function(){var g,v,I,H,ne=null,Se=null,Le=null,et=null;g=(I=1/this._hi)-(ne=(Le=k.SPLIT*I)-(ne=Le-I)),Se=(et=k.SPLIT*this._hi)-this._hi;var Et=I+(Le=(1-(H=I*this._hi)-(et=ne*(Se=et-Se)-H+ne*(v=this._hi-Se)+g*Se+g*v)-I*this._lo)/this._hi);return new k(Et,I-Et+Le)}},{key:"toSciNotation",value:function(){if(this.isZero())return k.SCI_NOT_ZERO;var g=this.getSpecialNumberString();if(g!==null)return g;var v=new Array(1).fill(null),I=this.extractSignificantDigits(!1,v),H=k.SCI_NOT_EXPONENT_CHAR+v[0];if(I.charAt(0)==="0")throw new IllegalStateException("Found leading zero: "+I);var ne="";I.length>1&&(ne=I.substring(1));var Se=I.charAt(0)+"."+ne;return this.isNegative()?"-"+Se+H:Se+H}},{key:"abs",value:function(){return this.isNaN()?k.NaN:this.isNegative()?this.negate():new k(this)}},{key:"isPositive",value:function(){return this._hi>0||this._hi===0&&this._lo>0}},{key:"lt",value:function(g){return this._hi<g._hi||this._hi===g._hi&&this._lo<g._lo}},{key:"add",value:function(){if(arguments[0]instanceof k){var g=arguments[0];return k.copy(this).selfAdd(g)}if(typeof arguments[0]=="number"){var v=arguments[0];return k.copy(this).selfAdd(v)}}},{key:"init",value:function(){if(arguments.length===1){if(typeof arguments[0]=="number"){var g=arguments[0];this._hi=g,this._lo=0}else if(arguments[0]instanceof k){var v=arguments[0];this._hi=v._hi,this._lo=v._lo}}else if(arguments.length===2){var I=arguments[0],H=arguments[1];this._hi=I,this._lo=H}}},{key:"gt",value:function(g){return this._hi>g._hi||this._hi===g._hi&&this._lo>g._lo}},{key:"isNegative",value:function(){return this._hi<0||this._hi===0&&this._lo<0}},{key:"trunc",value:function(){return this.isNaN()?k.NaN:this.isPositive()?this.floor():this.ceil()}},{key:"signum",value:function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0}},{key:"interfaces_",get:function(){return[ce,he,fe]}}],[{key:"constructor_",value:function(){if(this._hi=0,this._lo=0,arguments.length===0)this.init(0);else if(arguments.length===1){if(typeof arguments[0]=="number"){var g=arguments[0];this.init(g)}else if(arguments[0]instanceof k){var v=arguments[0];this.init(v)}else if(typeof arguments[0]=="string"){var I=arguments[0];k.constructor_.call(this,k.parse(I))}}else if(arguments.length===2){var H=arguments[0],ne=arguments[1];this.init(H,ne)}}},{key:"determinant",value:function(){if(typeof arguments[3]=="number"&&typeof arguments[2]=="number"&&typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var g=arguments[0],v=arguments[1],I=arguments[2],H=arguments[3];return k.determinant(k.valueOf(g),k.valueOf(v),k.valueOf(I),k.valueOf(H))}if(arguments[3]instanceof k&&arguments[2]instanceof k&&arguments[0]instanceof k&&arguments[1]instanceof k){var ne=arguments[1],Se=arguments[2],Le=arguments[3];return arguments[0].multiply(Le).selfSubtract(ne.multiply(Se))}}},{key:"sqr",value:function(g){return k.valueOf(g).selfMultiply(g)}},{key:"valueOf",value:function(){if(typeof arguments[0]=="string"){var g=arguments[0];return k.parse(g)}if(typeof arguments[0]=="number")return new k(arguments[0])}},{key:"sqrt",value:function(g){return k.valueOf(g).sqrt()}},{key:"parse",value:function(g){for(var v=0,I=g.length;Ur.isWhitespace(g.charAt(v));)v++;var H=!1;if(v<I){var ne=g.charAt(v);ne!=="-"&&ne!=="+"||(v++,ne==="-"&&(H=!0))}for(var Se=new k,Le=0,et=0,Et=0,tn=!1;!(v>=I);){var vn=g.charAt(v);if(v++,Ur.isDigit(vn)){var or=vn-"0";Se.selfMultiply(k.TEN),Se.selfAdd(or),Le++}else{if(vn!=="."){if(vn==="e"||vn==="E"){var $r=g.substring(v);try{Et=Sr.parseInt($r)}catch(rs){throw rs instanceof NumberFormatException?new NumberFormatException("Invalid exponent "+$r+" in string "+g):rs}break}throw new NumberFormatException("Unexpected character '"+vn+"' at position "+v+" in string "+g)}et=Le,tn=!0}}var Xr=Se;tn||(et=Le);var _i=Le-et-Et;if(_i===0)Xr=Se;else if(_i>0){var fs=k.TEN.pow(_i);Xr=Se.divide(fs)}else if(_i<0){var ss=k.TEN.pow(-_i);Xr=Se.multiply(ss)}return H?Xr.negate():Xr}},{key:"createNaN",value:function(){return new k(Ve.NaN,Ve.NaN)}},{key:"copy",value:function(g){return new k(g)}},{key:"magnitude",value:function(g){var v=Math.abs(g),I=Math.log(v)/Math.log(10),H=Math.trunc(Math.floor(I));return 10*Math.pow(10,H)<=v&&(H+=1),H}},{key:"stringOfChar",value:function(g,v){for(var I=new Bn,H=0;H<v;H++)I.append(g);return I.toString()}}])}();Kn.PI=new Kn(3.141592653589793,12246467991473532e-32),Kn.TWO_PI=new Kn(6.283185307179586,24492935982947064e-32),Kn.PI_2=new Kn(1.5707963267948966,6123233995736766e-32),Kn.E=new Kn(2.718281828459045,14456468917292502e-32),Kn.NaN=new Kn(Ve.NaN,Ve.NaN),Kn.EPS=123259516440783e-46,Kn.SPLIT=134217729,Kn.MAX_PRINT_DIGITS=32,Kn.TEN=Kn.valueOf(10),Kn.ONE=Kn.valueOf(1),Kn.SCI_NOT_EXPONENT_CHAR="E",Kn.SCI_NOT_ZERO="0.0E0";var ui=function(){function k(){d(this,k)}return r(k,null,[{key:"orientationIndex",value:function(g,v,I){var H=k.orientationIndexFilter(g,v,I);if(H<=1)return H;var ne=Kn.valueOf(v.x).selfAdd(-g.x),Se=Kn.valueOf(v.y).selfAdd(-g.y),Le=Kn.valueOf(I.x).selfAdd(-v.x),et=Kn.valueOf(I.y).selfAdd(-v.y);return ne.selfMultiply(et).selfSubtract(Se.selfMultiply(Le)).signum()}},{key:"signOfDet2x2",value:function(){if(arguments[3]instanceof Kn&&arguments[2]instanceof Kn&&arguments[0]instanceof Kn&&arguments[1]instanceof Kn){var g=arguments[1],v=arguments[2],I=arguments[3];return arguments[0].multiply(I).selfSubtract(g.multiply(v)).signum()}if(typeof arguments[3]=="number"&&typeof arguments[2]=="number"&&typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var H=arguments[0],ne=arguments[1],Se=arguments[2],Le=arguments[3],et=Kn.valueOf(H),Et=Kn.valueOf(ne),tn=Kn.valueOf(Se),vn=Kn.valueOf(Le);return et.multiply(vn).selfSubtract(Et.multiply(tn)).signum()}}},{key:"intersection",value:function(g,v,I,H){var ne=new Kn(g.y).selfSubtract(v.y),Se=new Kn(v.x).selfSubtract(g.x),Le=new Kn(g.x).selfMultiply(v.y).selfSubtract(new Kn(v.x).selfMultiply(g.y)),et=new Kn(I.y).selfSubtract(H.y),Et=new Kn(H.x).selfSubtract(I.x),tn=new Kn(I.x).selfMultiply(H.y).selfSubtract(new Kn(H.x).selfMultiply(I.y)),vn=Se.multiply(tn).selfSubtract(Et.multiply(Le)),or=et.multiply(Le).selfSubtract(ne.multiply(tn)),$r=ne.multiply(Et).selfSubtract(et.multiply(Se)),Xr=vn.selfDivide($r).doubleValue(),_i=or.selfDivide($r).doubleValue();return Ve.isNaN(Xr)||Ve.isInfinite(Xr)||Ve.isNaN(_i)||Ve.isInfinite(_i)?null:new Ke(Xr,_i)}},{key:"orientationIndexFilter",value:function(g,v,I){var H=null,ne=(g.x-I.x)*(v.y-I.y),Se=(g.y-I.y)*(v.x-I.x),Le=ne-Se;if(ne>0){if(Se<=0)return k.signum(Le);H=ne+Se}else{if(!(ne<0)||Se>=0)return k.signum(Le);H=-ne-Se}var et=k.DP_SAFE_EPSILON*H;return Le>=et||-Le>=et?k.signum(Le):2}},{key:"signum",value:function(g){return g>0?1:g<0?-1:0}}])}();ui.DP_SAFE_EPSILON=1e-15;var wr=function(){return r(function k(){d(this,k)},[{key:"getM",value:function(k){if(this.hasM()){var g=this.getDimension()-this.getMeasures();return this.getOrdinate(k,g)}return Ve.NaN}},{key:"setOrdinate",value:function(k,g,v){}},{key:"getZ",value:function(k){return this.hasZ()?this.getOrdinate(k,2):Ve.NaN}},{key:"size",value:function(){}},{key:"getOrdinate",value:function(k,g){}},{key:"getCoordinate",value:function(){}},{key:"getCoordinateCopy",value:function(k){}},{key:"createCoordinate",value:function(){}},{key:"getDimension",value:function(){}},{key:"hasM",value:function(){return this.getMeasures()>0}},{key:"getX",value:function(k){}},{key:"hasZ",value:function(){return this.getDimension()-this.getMeasures()>2}},{key:"getMeasures",value:function(){return 0}},{key:"expandEnvelope",value:function(k){}},{key:"copy",value:function(){}},{key:"getY",value:function(k){}},{key:"toCoordinateArray",value:function(){}},{key:"interfaces_",get:function(){return[fe]}}])}();wr.X=0,wr.Y=1,wr.Z=2,wr.M=3;var Tr=function(){function k(){d(this,k)}return r(k,null,[{key:"index",value:function(g,v,I){return ui.orientationIndex(g,v,I)}},{key:"isCCW",value:function(){if(arguments[0]instanceof Array){var g=arguments[0],v=g.length-1;if(v<3)throw new J("Ring has fewer than 4 points, so orientation cannot be determined");for(var I=g[0],H=0,ne=1;ne<=v;ne++){var Se=g[ne];Se.y>I.y&&(I=Se,H=ne)}var Le=H;do(Le-=1)<0&&(Le=v);while(g[Le].equals2D(I)&&Le!==H);var et=H;do et=(et+1)%v;while(g[et].equals2D(I)&&et!==H);var Et=g[Le],tn=g[et];if(Et.equals2D(I)||tn.equals2D(I)||Et.equals2D(tn))return!1;var vn=k.index(Et,I,tn);return vn===0?Et.x>tn.x:vn>0}if(Ot(arguments[0],wr)){var or=arguments[0],$r=or.size()-1;if($r<3)throw new J("Ring has fewer than 4 points, so orientation cannot be determined");for(var Xr=or.getCoordinate(0),_i=0,fs=1;fs<=$r;fs++){var ss=or.getCoordinate(fs);ss.y>Xr.y&&(Xr=ss,_i=fs)}var rs=null,Co=_i;do(Co-=1)<0&&(Co=$r),rs=or.getCoordinate(Co);while(rs.equals2D(Xr)&&Co!==_i);var Pn=null,Zl=_i;do Zl=(Zl+1)%$r,Pn=or.getCoordinate(Zl);while(Pn.equals2D(Xr)&&Zl!==_i);if(rs.equals2D(Xr)||Pn.equals2D(Xr)||rs.equals2D(Pn))return!1;var Il=k.index(rs,Xr,Pn);return Il===0?rs.x>Pn.x:Il>0}}}])}();Tr.CLOCKWISE=-1,Tr.RIGHT=Tr.CLOCKWISE,Tr.COUNTERCLOCKWISE=1,Tr.LEFT=Tr.COUNTERCLOCKWISE,Tr.COLLINEAR=0,Tr.STRAIGHT=Tr.COLLINEAR;var pr=function(){return r(function k(){d(this,k),k.constructor_.apply(this,arguments)},[{key:"getCoordinate",value:function(){return this._minCoord}},{key:"getRightmostSide",value:function(k,g){var v=this.getRightmostSideOfSegment(k,g);return v<0&&(v=this.getRightmostSideOfSegment(k,g-1)),v<0&&(this._minCoord=null,this.checkForRightmostCoordinate(k)),v}},{key:"findRightmostEdgeAtVertex",value:function(){var k=this._minDe.getEdge().getCoordinates();ct.isTrue(this._minIndex>0&&this._minIndex<k.length,"rightmost point expected to be interior vertex of edge");var g=k[this._minIndex-1],v=k[this._minIndex+1],I=Tr.index(this._minCoord,v,g),H=!1;(g.y<this._minCoord.y&&v.y<this._minCoord.y&&I===Tr.COUNTERCLOCKWISE||g.y>this._minCoord.y&&v.y>this._minCoord.y&&I===Tr.CLOCKWISE)&&(H=!0),H&&(this._minIndex=this._minIndex-1)}},{key:"getRightmostSideOfSegment",value:function(k,g){var v=k.getEdge().getCoordinates();if(g<0||g+1>=v.length||v[g].y===v[g+1].y)return-1;var I=bt.LEFT;return v[g].y<v[g+1].y&&(I=bt.RIGHT),I}},{key:"getEdge",value:function(){return this._orientedDe}},{key:"checkForRightmostCoordinate",value:function(k){for(var g=k.getEdge().getCoordinates(),v=0;v<g.length-1;v++)(this._minCoord===null||g[v].x>this._minCoord.x)&&(this._minDe=k,this._minIndex=v,this._minCoord=g[v])}},{key:"findRightmostEdgeAtNode",value:function(){var k=this._minDe.getNode().getEdges();this._minDe=k.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)}},{key:"findEdge",value:function(k){for(var g=k.iterator();g.hasNext();){var v=g.next();v.isForward()&&this.checkForRightmostCoordinate(v)}ct.isTrue(this._minIndex!==0||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),this._minIndex===0?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe,this.getRightmostSide(this._minDe,this._minIndex)===bt.LEFT&&(this._orientedDe=this._minDe.getSym())}}],[{key:"constructor_",value:function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null}}])}(),Fr=function(k){function g(v,I){var H;return d(this,g),(H=l(this,g,[I?v+" [ "+I+" ]":v])).pt=I?new Ke(I):void 0,H.name=Object.keys({TopologyException:g})[0],H}return P(g,k),r(g,[{key:"getCoordinate",value:function(){return this.pt}}])}(ft),vt=function(){return r(function k(){d(this,k),this.array=[]},[{key:"addLast",value:function(k){this.array.push(k)}},{key:"removeFirst",value:function(){return this.array.shift()}},{key:"isEmpty",value:function(){return this.array.length===0}}])}(),yt=function(k){function g(v){var I;return d(this,g),(I=l(this,g)).array=[],v instanceof nt&&I.addAll(v),I}return P(g,k),r(g,[{key:"interfaces_",get:function(){return[Vn,nt]}},{key:"ensureCapacity",value:function(){}},{key:"add",value:function(v){return arguments.length===1?this.array.push(v):this.array.splice(arguments[0],0,arguments[1]),!0}},{key:"clear",value:function(){this.array=[]}},{key:"addAll",value:function(v){var I,H=E(v);try{for(H.s();!(I=H.n()).done;){var ne=I.value;this.array.push(ne)}}catch(Se){H.e(Se)}finally{H.f()}}},{key:"set",value:function(v,I){var H=this.array[v];return this.array[v]=I,H}},{key:"iterator",value:function(){return new it(this)}},{key:"get",value:function(v){if(v<0||v>=this.size())throw new pn;return this.array[v]}},{key:"isEmpty",value:function(){return this.array.length===0}},{key:"sort",value:function(v){v?this.array.sort(function(I,H){return v.compare(I,H)}):this.array.sort()}},{key:"size",value:function(){return this.array.length}},{key:"toArray",value:function(){return this.array.slice()}},{key:"remove",value:function(v){for(var I=0,H=this.array.length;I<H;I++)if(this.array[I]===v)return!!this.array.splice(I,1);return!1}},{key:Symbol.iterator,value:function(){return this.array.values()}}])}(Vn),it=function(){return r(function k(g){d(this,k),this.arrayList=g,this.position=0},[{key:"next",value:function(){if(this.position===this.arrayList.size())throw new Gt;return this.arrayList.get(this.position++)}},{key:"hasNext",value:function(){return this.position<this.arrayList.size()}},{key:"set",value:function(k){return this.arrayList.set(this.position-1,k)}},{key:"remove",value:function(){this.arrayList.remove(this.arrayList.get(this.position))}}])}(),ln=function(){return r(function k(){d(this,k),k.constructor_.apply(this,arguments)},[{key:"clearVisitedEdges",value:function(){for(var k=this._dirEdgeList.iterator();k.hasNext();)k.next().setVisited(!1)}},{key:"getRightmostCoordinate",value:function(){return this._rightMostCoord}},{key:"computeNodeDepth",value:function(k){for(var g=null,v=k.getEdges().iterator();v.hasNext();){var I=v.next();if(I.isVisited()||I.getSym().isVisited()){g=I;break}}if(g===null)throw new Fr("unable to find edge to compute depths at "+k.getCoordinate());k.getEdges().computeDepths(g);for(var H=k.getEdges().iterator();H.hasNext();){var ne=H.next();ne.setVisited(!0),this.copySymDepths(ne)}}},{key:"computeDepth",value:function(k){this.clearVisitedEdges();var g=this._finder.getEdge();g.getNode(),g.getLabel(),g.setEdgeDepths(bt.RIGHT,k),this.copySymDepths(g),this.computeDepths(g)}},{key:"create",value:function(k){this.addReachable(k),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()}},{key:"findResultEdges",value:function(){for(var k=this._dirEdgeList.iterator();k.hasNext();){var g=k.next();g.getDepth(bt.RIGHT)>=1&&g.getDepth(bt.LEFT)<=0&&!g.isInteriorAreaEdge()&&g.setInResult(!0)}}},{key:"computeDepths",value:function(k){var g=new Zt,v=new vt,I=k.getNode();for(v.addLast(I),g.add(I),k.setVisited(!0);!v.isEmpty();){var H=v.removeFirst();g.add(H),this.computeNodeDepth(H);for(var ne=H.getEdges().iterator();ne.hasNext();){var Se=ne.next().getSym();if(!Se.isVisited()){var Le=Se.getNode();g.contains(Le)||(v.addLast(Le),g.add(Le))}}}}},{key:"compareTo",value:function(k){var g=k;return this._rightMostCoord.x<g._rightMostCoord.x?-1:this._rightMostCoord.x>g._rightMostCoord.x?1:0}},{key:"getEnvelope",value:function(){if(this._env===null){for(var k=new xn,g=this._dirEdgeList.iterator();g.hasNext();)for(var v=g.next().getEdge().getCoordinates(),I=0;I<v.length-1;I++)k.expandToInclude(v[I]);this._env=k}return this._env}},{key:"addReachable",value:function(k){var g=new Nn;for(g.add(k);!g.empty();){var v=g.pop();this.add(v,g)}}},{key:"copySymDepths",value:function(k){var g=k.getSym();g.setDepth(bt.LEFT,k.getDepth(bt.RIGHT)),g.setDepth(bt.RIGHT,k.getDepth(bt.LEFT))}},{key:"add",value:function(k,g){k.setVisited(!0),this._nodes.add(k);for(var v=k.getEdges().iterator();v.hasNext();){var I=v.next();this._dirEdgeList.add(I);var H=I.getSym().getNode();H.isVisited()||g.push(H)}}},{key:"getNodes",value:function(){return this._nodes}},{key:"getDirectedEdges",value:function(){return this._dirEdgeList}},{key:"interfaces_",get:function(){return[he]}}],[{key:"constructor_",value:function(){this._finder=null,this._dirEdgeList=new yt,this._nodes=new yt,this._rightMostCoord=null,this._env=null,this._finder=new pr}}])}(),Xn=function(){return r(function k(){d(this,k)},null,[{key:"intersection",value:function(k,g,v,I){var H=k.x<g.x?k.x:g.x,ne=k.y<g.y?k.y:g.y,Se=k.x>g.x?k.x:g.x,Le=k.y>g.y?k.y:g.y,et=v.x<I.x?v.x:I.x,Et=v.y<I.y?v.y:I.y,tn=v.x>I.x?v.x:I.x,vn=v.y>I.y?v.y:I.y,or=((H>et?H:et)+(Se<tn?Se:tn))/2,$r=((ne>Et?ne:Et)+(Le<vn?Le:vn))/2,Xr=k.x-or,_i=k.y-$r,fs=g.x-or,ss=g.y-$r,rs=v.x-or,Co=v.y-$r,Pn=I.x-or,Zl=I.y-$r,Il=_i-ss,Ku=fs-Xr,Hc=Xr*ss-fs*_i,Uc=Co-Zl,cl=Pn-rs,Nd=rs*Zl-Pn*Co,Aa=Il*cl-Uc*Ku,yi=(Ku*Nd-cl*Hc)/Aa,gu=(Uc*Hc-Il*Nd)/Aa;return Ve.isNaN(yi)||Ve.isInfinite(yi)||Ve.isNaN(gu)||Ve.isInfinite(gu)?null:new Ke(yi+or,gu+$r)}}])}(),vr=function(){return r(function k(){d(this,k)},null,[{key:"arraycopy",value:function(k,g,v,I,H){for(var ne=0,Se=g;Se<g+H;Se++)v[I+ne]=k[Se],ne++}},{key:"getProperty",value:function(k){return{"line.separator":`
`}[k]}}])}(),Ii=function(){function k(){d(this,k)}return r(k,null,[{key:"log10",value:function(g){var v=Math.log(g);return Ve.isInfinite(v)||Ve.isNaN(v)?v:v/k.LOG_10}},{key:"min",value:function(g,v,I,H){var ne=g;return v<ne&&(ne=v),I<ne&&(ne=I),H<ne&&(ne=H),ne}},{key:"clamp",value:function(){if(typeof arguments[2]=="number"&&typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var g=arguments[0],v=arguments[1],I=arguments[2];return g<v?v:g>I?I:g}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var H=arguments[0],ne=arguments[1],Se=arguments[2];return H<ne?ne:H>Se?Se:H}}},{key:"wrap",value:function(g,v){return g<0?v- -g%v:g%v}},{key:"max",value:function(){if(arguments.length===3){var g=arguments[1],v=arguments[2],I=arguments[0];return g>I&&(I=g),v>I&&(I=v),I}if(arguments.length===4){var H=arguments[1],ne=arguments[2],Se=arguments[3],Le=arguments[0];return H>Le&&(Le=H),ne>Le&&(Le=ne),Se>Le&&(Le=Se),Le}}},{key:"average",value:function(g,v){return(g+v)/2}}])}();Ii.LOG_10=Math.log(10);var ds=function(){function k(){d(this,k)}return r(k,null,[{key:"segmentToSegment",value:function(g,v,I,H){if(g.equals(v))return k.pointToSegment(g,I,H);if(I.equals(H))return k.pointToSegment(H,g,v);var ne=!1;if(xn.intersects(g,v,I,H)){var Se=(v.x-g.x)*(H.y-I.y)-(v.y-g.y)*(H.x-I.x);if(Se===0)ne=!0;else{var Le=(g.y-I.y)*(H.x-I.x)-(g.x-I.x)*(H.y-I.y),et=((g.y-I.y)*(v.x-g.x)-(g.x-I.x)*(v.y-g.y))/Se,Et=Le/Se;(Et<0||Et>1||et<0||et>1)&&(ne=!0)}}else ne=!0;return ne?Ii.min(k.pointToSegment(g,I,H),k.pointToSegment(v,I,H),k.pointToSegment(I,g,v),k.pointToSegment(H,g,v)):0}},{key:"pointToSegment",value:function(g,v,I){if(v.x===I.x&&v.y===I.y)return g.distance(v);var H=(I.x-v.x)*(I.x-v.x)+(I.y-v.y)*(I.y-v.y),ne=((g.x-v.x)*(I.x-v.x)+(g.y-v.y)*(I.y-v.y))/H;if(ne<=0)return g.distance(v);if(ne>=1)return g.distance(I);var Se=((v.y-g.y)*(I.x-v.x)-(v.x-g.x)*(I.y-v.y))/H;return Math.abs(Se)*Math.sqrt(H)}},{key:"pointToLinePerpendicular",value:function(g,v,I){var H=(I.x-v.x)*(I.x-v.x)+(I.y-v.y)*(I.y-v.y),ne=((v.y-g.y)*(I.x-v.x)-(v.x-g.x)*(I.y-v.y))/H;return Math.abs(ne)*Math.sqrt(H)}},{key:"pointToSegmentString",value:function(g,v){if(v.length===0)throw new J("Line array must contain at least one vertex");for(var I=g.distance(v[0]),H=0;H<v.length-1;H++){var ne=k.pointToSegment(g,v[H],v[H+1]);ne<I&&(I=ne)}return I}}])}(),Qs=function(){return r(function k(){d(this,k)},[{key:"create",value:function(){if(arguments.length===1)arguments[0]instanceof Array||Ot(arguments[0],wr);else if(arguments.length!==2){if(arguments.length===3){var k=arguments[0],g=arguments[1];return this.create(k,g)}}}}])}(),Xs=function(){return r(function k(){d(this,k)},[{key:"filter",value:function(k){}}])}(),ks=function(){return r(function k(){d(this,k)},null,[{key:"ofLine",value:function(k){var g=k.size();if(g<=1)return 0;var v=0,I=new Ke;k.getCoordinate(0,I);for(var H=I.x,ne=I.y,Se=1;Se<g;Se++){k.getCoordinate(Se,I);var Le=I.x,et=I.y,Et=Le-H,tn=et-ne;v+=Math.sqrt(Et*Et+tn*tn),H=Le,ne=et}return v}}])}(),Rn=r(function k(){d(this,k)}),Ri=function(){function k(){d(this,k)}return r(k,null,[{key:"copyCoord",value:function(g,v,I,H){for(var ne=Math.min(g.getDimension(),I.getDimension()),Se=0;Se<ne;Se++)I.setOrdinate(H,Se,g.getOrdinate(v,Se))}},{key:"isRing",value:function(g){var v=g.size();return v===0||!(v<=3)&&g.getOrdinate(0,wr.X)===g.getOrdinate(v-1,wr.X)&&g.getOrdinate(0,wr.Y)===g.getOrdinate(v-1,wr.Y)}},{key:"scroll",value:function(){if(arguments.length===2){if(Ot(arguments[0],wr)&&Number.isInteger(arguments[1])){var g=arguments[0],v=arguments[1];k.scroll(g,v,k.isRing(g))}else if(Ot(arguments[0],wr)&&arguments[1]instanceof Ke){var I=arguments[0],H=arguments[1],ne=k.indexOf(H,I);if(ne<=0)return null;k.scroll(I,ne)}}else if(arguments.length===3){var Se=arguments[0],Le=arguments[1],et=arguments[2];if(Le<=0)return null;for(var Et=Se.copy(),tn=et?Se.size()-1:Se.size(),vn=0;vn<tn;vn++)for(var or=0;or<Se.getDimension();or++)Se.setOrdinate(vn,or,Et.getOrdinate((Le+vn)%tn,or));if(et)for(var $r=0;$r<Se.getDimension();$r++)Se.setOrdinate(tn,$r,Se.getOrdinate(0,$r))}}},{key:"isEqual",value:function(g,v){var I=g.size();if(I!==v.size())return!1;for(var H=Math.min(g.getDimension(),v.getDimension()),ne=0;ne<I;ne++)for(var Se=0;Se<H;Se++){var Le=g.getOrdinate(ne,Se),et=v.getOrdinate(ne,Se);if(g.getOrdinate(ne,Se)!==v.getOrdinate(ne,Se)&&(!Ve.isNaN(Le)||!Ve.isNaN(et)))return!1}return!0}},{key:"minCoordinateIndex",value:function(){if(arguments.length===1){var g=arguments[0];return k.minCoordinateIndex(g,0,g.size()-1)}if(arguments.length===3){for(var v=arguments[0],I=arguments[2],H=-1,ne=null,Se=arguments[1];Se<=I;Se++){var Le=v.getCoordinate(Se);(ne===null||ne.compareTo(Le)>0)&&(ne=Le,H=Se)}return H}}},{key:"extend",value:function(g,v,I){var H=g.create(I,v.getDimension()),ne=v.size();if(k.copy(v,0,H,0,ne),ne>0)for(var Se=ne;Se<I;Se++)k.copy(v,ne-1,H,Se,1);return H}},{key:"reverse",value:function(g){for(var v=g.size()-1,I=Math.trunc(v/2),H=0;H<=I;H++)k.swap(g,H,v-H)}},{key:"swap",value:function(g,v,I){if(v===I)return null;for(var H=0;H<g.getDimension();H++){var ne=g.getOrdinate(v,H);g.setOrdinate(v,H,g.getOrdinate(I,H)),g.setOrdinate(I,H,ne)}}},{key:"copy",value:function(g,v,I,H,ne){for(var Se=0;Se<ne;Se++)k.copyCoord(g,v+Se,I,H+Se)}},{key:"ensureValidRing",value:function(g,v){var I=v.size();return I===0?v:I<=3?k.createClosedRing(g,v,4):v.getOrdinate(0,wr.X)===v.getOrdinate(I-1,wr.X)&&v.getOrdinate(0,wr.Y)===v.getOrdinate(I-1,wr.Y)?v:k.createClosedRing(g,v,I+1)}},{key:"indexOf",value:function(g,v){for(var I=0;I<v.size();I++)if(g.x===v.getOrdinate(I,wr.X)&&g.y===v.getOrdinate(I,wr.Y))return I;return-1}},{key:"createClosedRing",value:function(g,v,I){var H=g.create(I,v.getDimension()),ne=v.size();k.copy(v,0,H,0,ne);for(var Se=ne;Se<I;Se++)k.copy(v,0,H,Se,1);return H}},{key:"minCoordinate",value:function(g){for(var v=null,I=0;I<g.size();I++){var H=g.getCoordinate(I);(v===null||v.compareTo(H)>0)&&(v=H)}return v}}])}(),_r=function(){function k(){d(this,k)}return r(k,null,[{key:"toDimensionSymbol",value:function(g){switch(g){case k.FALSE:return k.SYM_FALSE;case k.TRUE:return k.SYM_TRUE;case k.DONTCARE:return k.SYM_DONTCARE;case k.P:return k.SYM_P;case k.L:return k.SYM_L;case k.A:return k.SYM_A}throw new J("Unknown dimension value: "+g)}},{key:"toDimensionValue",value:function(g){switch(Ur.toUpperCase(g)){case k.SYM_FALSE:return k.FALSE;case k.SYM_TRUE:return k.TRUE;case k.SYM_DONTCARE:return k.DONTCARE;case k.SYM_P:return k.P;case k.SYM_L:return k.L;case k.SYM_A:return k.A}throw new J("Unknown dimension symbol: "+g)}}])}();_r.P=0,_r.L=1,_r.A=2,_r.FALSE=-1,_r.TRUE=-2,_r.DONTCARE=-3,_r.SYM_FALSE="F",_r.SYM_TRUE="T",_r.SYM_DONTCARE="*",_r.SYM_P="0",_r.SYM_L="1",_r.SYM_A="2";var pa=function(){return r(function k(){d(this,k)},[{key:"filter",value:function(k){}}])}(),gi=function(){return r(function k(){d(this,k)},[{key:"filter",value:function(k,g){}},{key:"isDone",value:function(){}},{key:"isGeometryChanged",value:function(){}}])}(),Ut=function(k){function g(){var v;return d(this,g),v=l(this,g),g.constructor_.apply(v,arguments),v}return P(g,k),r(g,[{key:"computeEnvelopeInternal",value:function(){return this.isEmpty()?new xn:this._points.expandEnvelope(new xn)}},{key:"isRing",value:function(){return this.isClosed()&&this.isSimple()}},{key:"getCoordinates",value:function(){return this._points.toCoordinateArray()}},{key:"copyInternal",value:function(){return new g(this._points.copy(),this._factory)}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof Ht){var v=arguments[0],I=arguments[1];if(!this.isEquivalentClass(v))return!1;var H=v;if(this._points.size()!==H._points.size())return!1;for(var ne=0;ne<this._points.size();ne++)if(!this.equal(this._points.getCoordinate(ne),H._points.getCoordinate(ne),I))return!1;return!0}return F(g,"equalsExact",this,1).apply(this,arguments)}},{key:"normalize",value:function(){for(var v=0;v<Math.trunc(this._points.size()/2);v++){var I=this._points.size()-1-v;if(!this._points.getCoordinate(v).equals(this._points.getCoordinate(I))){if(this._points.getCoordinate(v).compareTo(this._points.getCoordinate(I))>0){var H=this._points.copy();Ri.reverse(H),this._points=H}return null}}}},{key:"getCoordinate",value:function(){return this.isEmpty()?null:this._points.getCoordinate(0)}},{key:"getBoundaryDimension",value:function(){return this.isClosed()?_r.FALSE:0}},{key:"isClosed",value:function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))}},{key:"reverseInternal",value:function(){var v=this._points.copy();return Ri.reverse(v),this.getFactory().createLineString(v)}},{key:"getEndPoint",value:function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)}},{key:"getTypeCode",value:function(){return Ht.TYPECODE_LINESTRING}},{key:"getDimension",value:function(){return 1}},{key:"getLength",value:function(){return ks.ofLine(this._points)}},{key:"getNumPoints",value:function(){return this._points.size()}},{key:"compareToSameClass",value:function(){if(arguments.length===1){for(var v=arguments[0],I=0,H=0;I<this._points.size()&&H<v._points.size();){var ne=this._points.getCoordinate(I).compareTo(v._points.getCoordinate(H));if(ne!==0)return ne;I++,H++}return I<this._points.size()?1:H<v._points.size()?-1:0}if(arguments.length===2){var Se=arguments[0];return arguments[1].compare(this._points,Se._points)}}},{key:"apply",value:function(){if(Ot(arguments[0],Xs))for(var v=arguments[0],I=0;I<this._points.size();I++)v.filter(this._points.getCoordinate(I));else if(Ot(arguments[0],gi)){var H=arguments[0];if(this._points.size()===0)return null;for(var ne=0;ne<this._points.size()&&(H.filter(this._points,ne),!H.isDone());ne++);H.isGeometryChanged()&&this.geometryChanged()}else Ot(arguments[0],pa)?arguments[0].filter(this):Ot(arguments[0],re)&&arguments[0].filter(this)}},{key:"getBoundary",value:function(){throw new an}},{key:"isEquivalentClass",value:function(v){return v instanceof g}},{key:"getCoordinateN",value:function(v){return this._points.getCoordinate(v)}},{key:"getGeometryType",value:function(){return Ht.TYPENAME_LINESTRING}},{key:"getCoordinateSequence",value:function(){return this._points}},{key:"isEmpty",value:function(){return this._points.size()===0}},{key:"init",value:function(v){if(v===null&&(v=this.getFactory().getCoordinateSequenceFactory().create([])),v.size()===1)throw new J("Invalid number of points in LineString (found "+v.size()+" - must be 0 or >= 2)");this._points=v}},{key:"isCoordinate",value:function(v){for(var I=0;I<this._points.size();I++)if(this._points.getCoordinate(I).equals(v))return!0;return!1}},{key:"getStartPoint",value:function(){return this.isEmpty()?null:this.getPointN(0)}},{key:"getPointN",value:function(v){return this.getFactory().createPoint(this._points.getCoordinate(v))}},{key:"interfaces_",get:function(){return[Rn]}}],[{key:"constructor_",value:function(){if(this._points=null,arguments.length!==0){if(arguments.length===2){var v=arguments[0],I=arguments[1];Ht.constructor_.call(this,I),this.init(v)}}}}])}(Ht),ke=r(function k(){d(this,k)}),Oe=function(k){function g(){var v;return d(this,g),v=l(this,g),g.constructor_.apply(v,arguments),v}return P(g,k),r(g,[{key:"computeEnvelopeInternal",value:function(){if(this.isEmpty())return new xn;var v=new xn;return v.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),v}},{key:"getCoordinates",value:function(){return this.isEmpty()?[]:[this.getCoordinate()]}},{key:"copyInternal",value:function(){return new g(this._coordinates.copy(),this._factory)}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof Ht){var v=arguments[0],I=arguments[1];return!!this.isEquivalentClass(v)&&(!(!this.isEmpty()||!v.isEmpty())||this.isEmpty()===v.isEmpty()&&this.equal(v.getCoordinate(),this.getCoordinate(),I))}return F(g,"equalsExact",this,1).apply(this,arguments)}},{key:"normalize",value:function(){}},{key:"getCoordinate",value:function(){return this._coordinates.size()!==0?this._coordinates.getCoordinate(0):null}},{key:"getBoundaryDimension",value:function(){return _r.FALSE}},{key:"reverseInternal",value:function(){return this.getFactory().createPoint(this._coordinates.copy())}},{key:"getTypeCode",value:function(){return Ht.TYPECODE_POINT}},{key:"getDimension",value:function(){return 0}},{key:"getNumPoints",value:function(){return this.isEmpty()?0:1}},{key:"getX",value:function(){if(this.getCoordinate()===null)throw new IllegalStateException("getX called on empty Point");return this.getCoordinate().x}},{key:"compareToSameClass",value:function(){if(arguments.length===1){var v=arguments[0];return this.getCoordinate().compareTo(v.getCoordinate())}if(arguments.length===2){var I=arguments[0];return arguments[1].compare(this._coordinates,I._coordinates)}}},{key:"apply",value:function(){if(Ot(arguments[0],Xs)){var v=arguments[0];if(this.isEmpty())return null;v.filter(this.getCoordinate())}else if(Ot(arguments[0],gi)){var I=arguments[0];if(this.isEmpty())return null;I.filter(this._coordinates,0),I.isGeometryChanged()&&this.geometryChanged()}else Ot(arguments[0],pa)?arguments[0].filter(this):Ot(arguments[0],re)&&arguments[0].filter(this)}},{key:"getBoundary",value:function(){return this.getFactory().createGeometryCollection()}},{key:"getGeometryType",value:function(){return Ht.TYPENAME_POINT}},{key:"getCoordinateSequence",value:function(){return this._coordinates}},{key:"getY",value:function(){if(this.getCoordinate()===null)throw new IllegalStateException("getY called on empty Point");return this.getCoordinate().y}},{key:"isEmpty",value:function(){return this._coordinates.size()===0}},{key:"init",value:function(v){v===null&&(v=this.getFactory().getCoordinateSequenceFactory().create([])),ct.isTrue(v.size()<=1),this._coordinates=v}},{key:"isSimple",value:function(){return!0}},{key:"interfaces_",get:function(){return[ke]}}],[{key:"constructor_",value:function(){this._coordinates=null;var v=arguments[0],I=arguments[1];Ht.constructor_.call(this,I),this.init(v)}}])}(Ht),Ye=function(){function k(){d(this,k)}return r(k,null,[{key:"ofRing",value:function(){if(arguments[0]instanceof Array){var g=arguments[0];return Math.abs(k.ofRingSigned(g))}if(Ot(arguments[0],wr)){var v=arguments[0];return Math.abs(k.ofRingSigned(v))}}},{key:"ofRingSigned",value:function(){if(arguments[0]instanceof Array){var g=arguments[0];if(g.length<3)return 0;for(var v=0,I=g[0].x,H=1;H<g.length-1;H++){var ne=g[H].x-I,Se=g[H+1].y;v+=ne*(g[H-1].y-Se)}return v/2}if(Ot(arguments[0],wr)){var Le=arguments[0],et=Le.size();if(et<3)return 0;var Et=new Ke,tn=new Ke,vn=new Ke;Le.getCoordinate(0,tn),Le.getCoordinate(1,vn);var or=tn.x;vn.x-=or;for(var $r=0,Xr=1;Xr<et-1;Xr++)Et.y=tn.y,tn.x=vn.x,tn.y=vn.y,Le.getCoordinate(Xr+1,vn),vn.x-=or,$r+=tn.x*(Et.y-vn.y);return $r/2}}}])}(),dt=function(){return r(function k(){d(this,k)},null,[{key:"sort",value:function(){var k=arguments,g=arguments[0];if(arguments.length===1)g.sort(function(or,$r){return or.compareTo($r)});else if(arguments.length===2)g.sort(function(or,$r){return k[1].compare(or,$r)});else if(arguments.length===3){var v=g.slice(arguments[1],arguments[2]);v.sort();var I=g.slice(0,arguments[1]).concat(v,g.slice(arguments[2],g.length));g.splice(0,g.length);var H,ne=E(I);try{for(ne.s();!(H=ne.n()).done;){var Se=H.value;g.push(Se)}}catch(or){ne.e(or)}finally{ne.f()}}else if(arguments.length===4){var Le=g.slice(arguments[1],arguments[2]);Le.sort(function(or,$r){return k[3].compare(or,$r)});var et=g.slice(0,arguments[1]).concat(Le,g.slice(arguments[2],g.length));g.splice(0,g.length);var Et,tn=E(et);try{for(tn.s();!(Et=tn.n()).done;){var vn=Et.value;g.push(vn)}}catch(or){tn.e(or)}finally{tn.f()}}}},{key:"asList",value:function(k){var g,v=new yt,I=E(k);try{for(I.s();!(g=I.n()).done;){var H=g.value;v.add(H)}}catch(ne){I.e(ne)}finally{I.f()}return v}},{key:"copyOf",value:function(k,g){return k.slice(0,g)}}])}(),tt=r(function k(){d(this,k)}),Tt=function(k){function g(){var v;return d(this,g),v=l(this,g),g.constructor_.apply(v,arguments),v}return P(g,k),r(g,[{key:"computeEnvelopeInternal",value:function(){return this._shell.getEnvelopeInternal()}},{key:"getCoordinates",value:function(){if(this.isEmpty())return[];for(var v=new Array(this.getNumPoints()).fill(null),I=-1,H=this._shell.getCoordinates(),ne=0;ne<H.length;ne++)v[++I]=H[ne];for(var Se=0;Se<this._holes.length;Se++)for(var Le=this._holes[Se].getCoordinates(),et=0;et<Le.length;et++)v[++I]=Le[et];return v}},{key:"getArea",value:function(){var v=0;v+=Ye.ofRing(this._shell.getCoordinateSequence());for(var I=0;I<this._holes.length;I++)v-=Ye.ofRing(this._holes[I].getCoordinateSequence());return v}},{key:"copyInternal",value:function(){for(var v=this._shell.copy(),I=new Array(this._holes.length).fill(null),H=0;H<this._holes.length;H++)I[H]=this._holes[H].copy();return new g(v,I,this._factory)}},{key:"isRectangle",value:function(){if(this.getNumInteriorRing()!==0||this._shell===null||this._shell.getNumPoints()!==5)return!1;for(var v=this._shell.getCoordinateSequence(),I=this.getEnvelopeInternal(),H=0;H<5;H++){var ne=v.getX(H);if(ne!==I.getMinX()&&ne!==I.getMaxX())return!1;var Se=v.getY(H);if(Se!==I.getMinY()&&Se!==I.getMaxY())return!1}for(var Le=v.getX(0),et=v.getY(0),Et=1;Et<=4;Et++){var tn=v.getX(Et),vn=v.getY(Et);if(tn!==Le==(vn!==et))return!1;Le=tn,et=vn}return!0}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof Ht){var v=arguments[0],I=arguments[1];if(!this.isEquivalentClass(v))return!1;var H=v,ne=this._shell,Se=H._shell;if(!ne.equalsExact(Se,I)||this._holes.length!==H._holes.length)return!1;for(var Le=0;Le<this._holes.length;Le++)if(!this._holes[Le].equalsExact(H._holes[Le],I))return!1;return!0}return F(g,"equalsExact",this,1).apply(this,arguments)}},{key:"normalize",value:function(){if(arguments.length===0){this._shell=this.normalized(this._shell,!0);for(var v=0;v<this._holes.length;v++)this._holes[v]=this.normalized(this._holes[v],!1);dt.sort(this._holes)}else if(arguments.length===2){var I=arguments[0],H=arguments[1];if(I.isEmpty())return null;var ne=I.getCoordinateSequence(),Se=Ri.minCoordinateIndex(ne,0,ne.size()-2);Ri.scroll(ne,Se,!0),Tr.isCCW(ne)===H&&Ri.reverse(ne)}}},{key:"getCoordinate",value:function(){return this._shell.getCoordinate()}},{key:"getNumInteriorRing",value:function(){return this._holes.length}},{key:"getBoundaryDimension",value:function(){return 1}},{key:"reverseInternal",value:function(){for(var v=this.getExteriorRing().reverse(),I=new Array(this.getNumInteriorRing()).fill(null),H=0;H<I.length;H++)I[H]=this.getInteriorRingN(H).reverse();return this.getFactory().createPolygon(v,I)}},{key:"getTypeCode",value:function(){return Ht.TYPECODE_POLYGON}},{key:"getDimension",value:function(){return 2}},{key:"getLength",value:function(){var v=0;v+=this._shell.getLength();for(var I=0;I<this._holes.length;I++)v+=this._holes[I].getLength();return v}},{key:"getNumPoints",value:function(){for(var v=this._shell.getNumPoints(),I=0;I<this._holes.length;I++)v+=this._holes[I].getNumPoints();return v}},{key:"convexHull",value:function(){return this.getExteriorRing().convexHull()}},{key:"normalized",value:function(v,I){var H=v.copy();return this.normalize(H,I),H}},{key:"compareToSameClass",value:function(){if(arguments.length===1){var v=arguments[0],I=this._shell,H=v._shell;return I.compareToSameClass(H)}if(arguments.length===2){var ne=arguments[1],Se=arguments[0],Le=this._shell,et=Se._shell,Et=Le.compareToSameClass(et,ne);if(Et!==0)return Et;for(var tn=this.getNumInteriorRing(),vn=Se.getNumInteriorRing(),or=0;or<tn&&or<vn;){var $r=this.getInteriorRingN(or),Xr=Se.getInteriorRingN(or),_i=$r.compareToSameClass(Xr,ne);if(_i!==0)return _i;or++}return or<tn?1:or<vn?-1:0}}},{key:"apply",value:function(){if(Ot(arguments[0],Xs)){var v=arguments[0];this._shell.apply(v);for(var I=0;I<this._holes.length;I++)this._holes[I].apply(v)}else if(Ot(arguments[0],gi)){var H=arguments[0];if(this._shell.apply(H),!H.isDone())for(var ne=0;ne<this._holes.length&&(this._holes[ne].apply(H),!H.isDone());ne++);H.isGeometryChanged()&&this.geometryChanged()}else if(Ot(arguments[0],pa))arguments[0].filter(this);else if(Ot(arguments[0],re)){var Se=arguments[0];Se.filter(this),this._shell.apply(Se);for(var Le=0;Le<this._holes.length;Le++)this._holes[Le].apply(Se)}}},{key:"getBoundary",value:function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var v=new Array(this._holes.length+1).fill(null);v[0]=this._shell;for(var I=0;I<this._holes.length;I++)v[I+1]=this._holes[I];return v.length<=1?this.getFactory().createLinearRing(v[0].getCoordinateSequence()):this.getFactory().createMultiLineString(v)}},{key:"getGeometryType",value:function(){return Ht.TYPENAME_POLYGON}},{key:"getExteriorRing",value:function(){return this._shell}},{key:"isEmpty",value:function(){return this._shell.isEmpty()}},{key:"getInteriorRingN",value:function(v){return this._holes[v]}},{key:"interfaces_",get:function(){return[tt]}}],[{key:"constructor_",value:function(){this._shell=null,this._holes=null;var v=arguments[0],I=arguments[1],H=arguments[2];if(Ht.constructor_.call(this,H),v===null&&(v=this.getFactory().createLinearRing()),I===null&&(I=[]),Ht.hasNullElements(I))throw new J("holes must not contain null elements");if(v.isEmpty()&&Ht.hasNonEmptyElements(I))throw new J("shell is empty but holes are not");this._shell=v,this._holes=I}}])}(Ht),$t=function(k){function g(){return d(this,g),l(this,g,arguments)}return P(g,k),r(g)}(Qt),je=function(k){function g(v){var I;return d(this,g),(I=l(this,g)).array=[],v instanceof nt&&I.addAll(v),I}return P(g,k),r(g,[{key:"contains",value:function(v){var I,H=E(this.array);try{for(H.s();!(I=H.n()).done;)if(I.value.compareTo(v)===0)return!0}catch(ne){H.e(ne)}finally{H.f()}return!1}},{key:"add",value:function(v){if(this.contains(v))return!1;for(var I=0,H=this.array.length;I<H;I++)if(this.array[I].compareTo(v)===1)return!!this.array.splice(I,0,v);return this.array.push(v),!0}},{key:"addAll",value:function(v){var I,H=E(v);try{for(H.s();!(I=H.n()).done;){var ne=I.value;this.add(ne)}}catch(Se){H.e(Se)}finally{H.f()}return!0}},{key:"remove",value:function(){throw new an}},{key:"size",value:function(){return this.array.length}},{key:"isEmpty",value:function(){return this.array.length===0}},{key:"toArray",value:function(){return this.array.slice()}},{key:"iterator",value:function(){return new _t(this.array)}}])}($t),_t=function(){return r(function k(g){d(this,k),this.array=g,this.position=0},[{key:"next",value:function(){if(this.position===this.array.length)throw new Gt;return this.array[this.position++]}},{key:"hasNext",value:function(){return this.position<this.array.length}},{key:"remove",value:function(){throw new an}}])}(),Nt=function(k){function g(){var v;return d(this,g),v=l(this,g),g.constructor_.apply(v,arguments),v}return P(g,k),r(g,[{key:"computeEnvelopeInternal",value:function(){for(var v=new xn,I=0;I<this._geometries.length;I++)v.expandToInclude(this._geometries[I].getEnvelopeInternal());return v}},{key:"getGeometryN",value:function(v){return this._geometries[v]}},{key:"getCoordinates",value:function(){for(var v=new Array(this.getNumPoints()).fill(null),I=-1,H=0;H<this._geometries.length;H++)for(var ne=this._geometries[H].getCoordinates(),Se=0;Se<ne.length;Se++)v[++I]=ne[Se];return v}},{key:"getArea",value:function(){for(var v=0,I=0;I<this._geometries.length;I++)v+=this._geometries[I].getArea();return v}},{key:"copyInternal",value:function(){for(var v=new Array(this._geometries.length).fill(null),I=0;I<v.length;I++)v[I]=this._geometries[I].copy();return new g(v,this._factory)}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof Ht){var v=arguments[0],I=arguments[1];if(!this.isEquivalentClass(v))return!1;var H=v;if(this._geometries.length!==H._geometries.length)return!1;for(var ne=0;ne<this._geometries.length;ne++)if(!this._geometries[ne].equalsExact(H._geometries[ne],I))return!1;return!0}return F(g,"equalsExact",this,1).apply(this,arguments)}},{key:"normalize",value:function(){for(var v=0;v<this._geometries.length;v++)this._geometries[v].normalize();dt.sort(this._geometries)}},{key:"getCoordinate",value:function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()}},{key:"getBoundaryDimension",value:function(){for(var v=_r.FALSE,I=0;I<this._geometries.length;I++)v=Math.max(v,this._geometries[I].getBoundaryDimension());return v}},{key:"reverseInternal",value:function(){for(var v=this._geometries.length,I=new yt(v),H=0;H<v;H++)I.add(this._geometries[H].reverse());return this.getFactory().buildGeometry(I)}},{key:"getTypeCode",value:function(){return Ht.TYPECODE_GEOMETRYCOLLECTION}},{key:"getDimension",value:function(){for(var v=_r.FALSE,I=0;I<this._geometries.length;I++)v=Math.max(v,this._geometries[I].getDimension());return v}},{key:"getLength",value:function(){for(var v=0,I=0;I<this._geometries.length;I++)v+=this._geometries[I].getLength();return v}},{key:"getNumPoints",value:function(){for(var v=0,I=0;I<this._geometries.length;I++)v+=this._geometries[I].getNumPoints();return v}},{key:"getNumGeometries",value:function(){return this._geometries.length}},{key:"compareToSameClass",value:function(){if(arguments.length===1){var v=arguments[0],I=new je(dt.asList(this._geometries)),H=new je(dt.asList(v._geometries));return this.compare(I,H)}if(arguments.length===2){for(var ne=arguments[1],Se=arguments[0],Le=this.getNumGeometries(),et=Se.getNumGeometries(),Et=0;Et<Le&&Et<et;){var tn=this.getGeometryN(Et),vn=Se.getGeometryN(Et),or=tn.compareToSameClass(vn,ne);if(or!==0)return or;Et++}return Et<Le?1:Et<et?-1:0}}},{key:"apply",value:function(){if(Ot(arguments[0],Xs))for(var v=arguments[0],I=0;I<this._geometries.length;I++)this._geometries[I].apply(v);else if(Ot(arguments[0],gi)){var H=arguments[0];if(this._geometries.length===0)return null;for(var ne=0;ne<this._geometries.length&&(this._geometries[ne].apply(H),!H.isDone());ne++);H.isGeometryChanged()&&this.geometryChanged()}else if(Ot(arguments[0],pa)){var Se=arguments[0];Se.filter(this);for(var Le=0;Le<this._geometries.length;Le++)this._geometries[Le].apply(Se)}else if(Ot(arguments[0],re)){var et=arguments[0];et.filter(this);for(var Et=0;Et<this._geometries.length;Et++)this._geometries[Et].apply(et)}}},{key:"getBoundary",value:function(){return Ht.checkNotGeometryCollection(this),ct.shouldNeverReachHere(),null}},{key:"getGeometryType",value:function(){return Ht.TYPENAME_GEOMETRYCOLLECTION}},{key:"isEmpty",value:function(){for(var v=0;v<this._geometries.length;v++)if(!this._geometries[v].isEmpty())return!1;return!0}}],[{key:"constructor_",value:function(){if(this._geometries=null,arguments.length!==0){if(arguments.length===2){var v=arguments[0],I=arguments[1];if(Ht.constructor_.call(this,I),v===null&&(v=[]),Ht.hasNullElements(v))throw new J("geometries must not contain null elements");this._geometries=v}}}}])}(Ht),Ft=function(k){function g(){var v;return d(this,g),v=l(this,g),g.constructor_.apply(v,arguments),v}return P(g,k),r(g,[{key:"copyInternal",value:function(){for(var v=new Array(this._geometries.length).fill(null),I=0;I<v.length;I++)v[I]=this._geometries[I].copy();return new g(v,this._factory)}},{key:"isValid",value:function(){return!0}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof Ht){var v=arguments[0],I=arguments[1];return!!this.isEquivalentClass(v)&&F(g,"equalsExact",this,1).call(this,v,I)}return F(g,"equalsExact",this,1).apply(this,arguments)}},{key:"getCoordinate",value:function(){if(arguments.length===1&&Number.isInteger(arguments[0])){var v=arguments[0];return this._geometries[v].getCoordinate()}return F(g,"getCoordinate",this,1).apply(this,arguments)}},{key:"getBoundaryDimension",value:function(){return _r.FALSE}},{key:"getTypeCode",value:function(){return Ht.TYPECODE_MULTIPOINT}},{key:"getDimension",value:function(){return 0}},{key:"getBoundary",value:function(){return this.getFactory().createGeometryCollection()}},{key:"getGeometryType",value:function(){return Ht.TYPENAME_MULTIPOINT}},{key:"interfaces_",get:function(){return[ke]}}],[{key:"constructor_",value:function(){var v=arguments[0],I=arguments[1];Nt.constructor_.call(this,v,I)}}])}(Nt),Sn=function(k){function g(){var v;return d(this,g),v=l(this,g),g.constructor_.apply(v,arguments),v}return P(g,k),r(g,[{key:"copyInternal",value:function(){return new g(this._points.copy(),this._factory)}},{key:"getBoundaryDimension",value:function(){return _r.FALSE}},{key:"isClosed",value:function(){return!!this.isEmpty()||F(g,"isClosed",this,1).call(this)}},{key:"reverseInternal",value:function(){var v=this._points.copy();return Ri.reverse(v),this.getFactory().createLinearRing(v)}},{key:"getTypeCode",value:function(){return Ht.TYPECODE_LINEARRING}},{key:"validateConstruction",value:function(){if(!this.isEmpty()&&!F(g,"isClosed",this,1).call(this))throw new J("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<g.MINIMUM_VALID_SIZE)throw new J("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")}},{key:"getGeometryType",value:function(){return Ht.TYPENAME_LINEARRING}}],[{key:"constructor_",value:function(){var v=arguments[0],I=arguments[1];Ut.constructor_.call(this,v,I),this.validateConstruction()}}])}(Ut);Sn.MINIMUM_VALID_SIZE=4;var qn=function(k){function g(){var v;return d(this,g),v=l(this,g),g.constructor_.apply(v,arguments),v}return P(g,k),r(g,[{key:"setOrdinate",value:function(v,I){switch(v){case g.X:this.x=I;break;case g.Y:this.y=I;break;default:throw new J("Invalid ordinate index: "+v)}}},{key:"getZ",value:function(){return Ke.NULL_ORDINATE}},{key:"getOrdinate",value:function(v){switch(v){case g.X:return this.x;case g.Y:return this.y}throw new J("Invalid ordinate index: "+v)}},{key:"setZ",value:function(v){throw new J("CoordinateXY dimension 2 does not support z-ordinate")}},{key:"copy",value:function(){return new g(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+")"}},{key:"setCoordinate",value:function(v){this.x=v.x,this.y=v.y,this.z=v.getZ()}}],[{key:"constructor_",value:function(){if(arguments.length===0)Ke.constructor_.call(this);else if(arguments.length===1){if(arguments[0]instanceof g){var v=arguments[0];Ke.constructor_.call(this,v.x,v.y)}else if(arguments[0]instanceof Ke){var I=arguments[0];Ke.constructor_.call(this,I.x,I.y)}}else if(arguments.length===2){var H=arguments[0],ne=arguments[1];Ke.constructor_.call(this,H,ne,Ke.NULL_ORDINATE)}}}])}(Ke);qn.X=0,qn.Y=1,qn.Z=-1,qn.M=-1;var Wn=function(k){function g(){var v;return d(this,g),v=l(this,g),g.constructor_.apply(v,arguments),v}return P(g,k),r(g,[{key:"getM",value:function(){return this._m}},{key:"setOrdinate",value:function(v,I){switch(v){case g.X:this.x=I;break;case g.Y:this.y=I;break;case g.M:this._m=I;break;default:throw new J("Invalid ordinate index: "+v)}}},{key:"setM",value:function(v){this._m=v}},{key:"getZ",value:function(){return Ke.NULL_ORDINATE}},{key:"getOrdinate",value:function(v){switch(v){case g.X:return this.x;case g.Y:return this.y;case g.M:return this._m}throw new J("Invalid ordinate index: "+v)}},{key:"setZ",value:function(v){throw new J("CoordinateXY dimension 2 does not support z-ordinate")}},{key:"copy",value:function(){return new g(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+" m="+this.getM()+")"}},{key:"setCoordinate",value:function(v){this.x=v.x,this.y=v.y,this.z=v.getZ(),this._m=v.getM()}}],[{key:"constructor_",value:function(){if(this._m=null,arguments.length===0)Ke.constructor_.call(this),this._m=0;else if(arguments.length===1){if(arguments[0]instanceof g){var v=arguments[0];Ke.constructor_.call(this,v.x,v.y),this._m=v._m}else if(arguments[0]instanceof Ke){var I=arguments[0];Ke.constructor_.call(this,I.x,I.y),this._m=this.getM()}}else if(arguments.length===3){var H=arguments[0],ne=arguments[1],Se=arguments[2];Ke.constructor_.call(this,H,ne,Ke.NULL_ORDINATE),this._m=Se}}}])}(Ke);Wn.X=0,Wn.Y=1,Wn.Z=-1,Wn.M=2;var Ir=function(k){function g(){var v;return d(this,g),v=l(this,g),g.constructor_.apply(v,arguments),v}return P(g,k),r(g,[{key:"getM",value:function(){return this._m}},{key:"setOrdinate",value:function(v,I){switch(v){case Ke.X:this.x=I;break;case Ke.Y:this.y=I;break;case Ke.Z:this.z=I;break;case Ke.M:this._m=I;break;default:throw new J("Invalid ordinate index: "+v)}}},{key:"setM",value:function(v){this._m=v}},{key:"getOrdinate",value:function(v){switch(v){case Ke.X:return this.x;case Ke.Y:return this.y;case Ke.Z:return this.getZ();case Ke.M:return this.getM()}throw new J("Invalid ordinate index: "+v)}},{key:"copy",value:function(){return new g(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+", "+this.getZ()+" m="+this.getM()+")"}},{key:"setCoordinate",value:function(v){this.x=v.x,this.y=v.y,this.z=v.getZ(),this._m=v.getM()}}],[{key:"constructor_",value:function(){if(this._m=null,arguments.length===0)Ke.constructor_.call(this),this._m=0;else if(arguments.length===1){if(arguments[0]instanceof g){var v=arguments[0];Ke.constructor_.call(this,v),this._m=v._m}else if(arguments[0]instanceof Ke){var I=arguments[0];Ke.constructor_.call(this,I),this._m=this.getM()}}else if(arguments.length===4){var H=arguments[0],ne=arguments[1],Se=arguments[2],Le=arguments[3];Ke.constructor_.call(this,H,ne,Se),this._m=Le}}}])}(Ke),Mr=function(){function k(){d(this,k)}return r(k,null,[{key:"measures",value:function(g){return g instanceof qn?0:g instanceof Wn||g instanceof Ir?1:0}},{key:"dimension",value:function(g){return g instanceof qn?2:g instanceof Wn?3:g instanceof Ir?4:3}},{key:"create",value:function(){if(arguments.length===1){var g=arguments[0];return k.create(g,0)}if(arguments.length===2){var v=arguments[0],I=arguments[1];return v===2?new qn:v===3&&I===0?new Ke:v===3&&I===1?new Wn:v===4&&I===1?new Ir:new Ke}}}])}(),Lr=function(k){function g(){var v;return d(this,g),v=l(this,g),g.constructor_.apply(v,arguments),v}return P(g,k),r(g,[{key:"getCoordinate",value:function(v){return this.get(v)}},{key:"addAll",value:function(){if(arguments.length===2&&typeof arguments[1]=="boolean"&&Ot(arguments[0],nt)){for(var v=arguments[1],I=!1,H=arguments[0].iterator();H.hasNext();)this.add(H.next(),v),I=!0;return I}return F(g,"addAll",this,1).apply(this,arguments)}},{key:"clone",value:function(){for(var v=F(g,"clone",this,1).call(this),I=0;I<this.size();I++)v.add(I,this.get(I).clone());return v}},{key:"toCoordinateArray",value:function(){if(arguments.length===0)return this.toArray(g.coordArrayType);if(arguments.length===1){if(arguments[0])return this.toArray(g.coordArrayType);for(var v=this.size(),I=new Array(v).fill(null),H=0;H<v;H++)I[H]=this.get(v-H-1);return I}}},{key:"add",value:function(){if(arguments.length===1){var v=arguments[0];return F(g,"add",this,1).call(this,v)}if(arguments.length===2){if(arguments[0]instanceof Array&&typeof arguments[1]=="boolean"){var I=arguments[0],H=arguments[1];return this.add(I,H,!0),!0}if(arguments[0]instanceof Ke&&typeof arguments[1]=="boolean"){var ne=arguments[0];if(!arguments[1]&&this.size()>=1&&this.get(this.size()-1).equals2D(ne))return null;F(g,"add",this,1).call(this,ne)}else if(arguments[0]instanceof Object&&typeof arguments[1]=="boolean"){var Se=arguments[0],Le=arguments[1];return this.add(Se,Le),!0}}else if(arguments.length===3){if(typeof arguments[2]=="boolean"&&arguments[0]instanceof Array&&typeof arguments[1]=="boolean"){var et=arguments[0],Et=arguments[1];if(arguments[2])for(var tn=0;tn<et.length;tn++)this.add(et[tn],Et);else for(var vn=et.length-1;vn>=0;vn--)this.add(et[vn],Et);return!0}if(typeof arguments[2]=="boolean"&&Number.isInteger(arguments[0])&&arguments[1]instanceof Ke){var or=arguments[0],$r=arguments[1];if(!arguments[2]){var Xr=this.size();if(Xr>0&&(or>0&&this.get(or-1).equals2D($r)||or<Xr&&this.get(or).equals2D($r)))return null}F(g,"add",this,1).call(this,or,$r)}}else if(arguments.length===4){var _i=arguments[0],fs=arguments[1],ss=arguments[2],rs=arguments[3],Co=1;ss>rs&&(Co=-1);for(var Pn=ss;Pn!==rs;Pn+=Co)this.add(_i[Pn],fs);return!0}}},{key:"closeRing",value:function(){if(this.size()>0){var v=this.get(0).copy();this.add(v,!1)}}}],[{key:"constructor_",value:function(){if(arguments.length!==0){if(arguments.length===1){var v=arguments[0];this.ensureCapacity(v.length),this.add(v,!0)}else if(arguments.length===2){var I=arguments[0],H=arguments[1];this.ensureCapacity(I.length),this.add(I,H)}}}}])}(yt);Lr.coordArrayType=new Array(0).fill(null);var jt=function(){function k(){d(this,k)}return r(k,null,[{key:"isRing",value:function(g){return!(g.length<4)&&!!g[0].equals2D(g[g.length-1])}},{key:"ptNotInList",value:function(g,v){for(var I=0;I<g.length;I++){var H=g[I];if(k.indexOf(H,v)<0)return H}return null}},{key:"scroll",value:function(g,v){var I=k.indexOf(v,g);if(I<0)return null;var H=new Array(g.length).fill(null);vr.arraycopy(g,I,H,0,g.length-I),vr.arraycopy(g,0,H,g.length-I,I),vr.arraycopy(H,0,g,0,g.length)}},{key:"equals",value:function(){if(arguments.length===2){var g=arguments[0],v=arguments[1];if(g===v)return!0;if(g===null||v===null||g.length!==v.length)return!1;for(var I=0;I<g.length;I++)if(!g[I].equals(v[I]))return!1;return!0}if(arguments.length===3){var H=arguments[0],ne=arguments[1],Se=arguments[2];if(H===ne)return!0;if(H===null||ne===null||H.length!==ne.length)return!1;for(var Le=0;Le<H.length;Le++)if(Se.compare(H[Le],ne[Le])!==0)return!1;return!0}}},{key:"intersection",value:function(g,v){for(var I=new Lr,H=0;H<g.length;H++)v.intersects(g[H])&&I.add(g[H],!0);return I.toCoordinateArray()}},{key:"measures",value:function(g){if(g===null||g.length===0)return 0;var v,I=0,H=E(g);try{for(H.s();!(v=H.n()).done;){var ne=v.value;I=Math.max(I,Mr.measures(ne))}}catch(Se){H.e(Se)}finally{H.f()}return I}},{key:"hasRepeatedPoints",value:function(g){for(var v=1;v<g.length;v++)if(g[v-1].equals(g[v]))return!0;return!1}},{key:"removeRepeatedPoints",value:function(g){return k.hasRepeatedPoints(g)?new Lr(g,!1).toCoordinateArray():g}},{key:"reverse",value:function(g){for(var v=g.length-1,I=Math.trunc(v/2),H=0;H<=I;H++){var ne=g[H];g[H]=g[v-H],g[v-H]=ne}}},{key:"removeNull",value:function(g){for(var v=0,I=0;I<g.length;I++)g[I]!==null&&v++;var H=new Array(v).fill(null);if(v===0)return H;for(var ne=0,Se=0;Se<g.length;Se++)g[Se]!==null&&(H[ne++]=g[Se]);return H}},{key:"copyDeep",value:function(){if(arguments.length===1){for(var g=arguments[0],v=new Array(g.length).fill(null),I=0;I<g.length;I++)v[I]=g[I].copy();return v}if(arguments.length===5)for(var H=arguments[0],ne=arguments[1],Se=arguments[2],Le=arguments[3],et=arguments[4],Et=0;Et<et;Et++)Se[Le+Et]=H[ne+Et].copy()}},{key:"isEqualReversed",value:function(g,v){for(var I=0;I<g.length;I++){var H=g[I],ne=v[g.length-I-1];if(H.compareTo(ne)!==0)return!1}return!0}},{key:"envelope",value:function(g){for(var v=new xn,I=0;I<g.length;I++)v.expandToInclude(g[I]);return v}},{key:"toCoordinateArray",value:function(g){return g.toArray(k.coordArrayType)}},{key:"dimension",value:function(g){if(g===null||g.length===0)return 3;var v,I=0,H=E(g);try{for(H.s();!(v=H.n()).done;){var ne=v.value;I=Math.max(I,Mr.dimension(ne))}}catch(Se){H.e(Se)}finally{H.f()}return I}},{key:"atLeastNCoordinatesOrNothing",value:function(g,v){return v.length>=g?v:[]}},{key:"indexOf",value:function(g,v){for(var I=0;I<v.length;I++)if(g.equals(v[I]))return I;return-1}},{key:"increasingDirection",value:function(g){for(var v=0;v<Math.trunc(g.length/2);v++){var I=g.length-1-v,H=g[v].compareTo(g[I]);if(H!==0)return H}return 1}},{key:"compare",value:function(g,v){for(var I=0;I<g.length&&I<v.length;){var H=g[I].compareTo(v[I]);if(H!==0)return H;I++}return I<v.length?-1:I<g.length?1:0}},{key:"minCoordinate",value:function(g){for(var v=null,I=0;I<g.length;I++)(v===null||v.compareTo(g[I])>0)&&(v=g[I]);return v}},{key:"extract",value:function(g,v,I){v=Ii.clamp(v,0,g.length);var H=(I=Ii.clamp(I,-1,g.length))-v+1;I<0&&(H=0),v>=g.length&&(H=0),I<v&&(H=0);var ne=new Array(H).fill(null);if(H===0)return ne;for(var Se=0,Le=v;Le<=I;Le++)ne[Se++]=g[Le];return ne}}])}(),kn=function(){return r(function k(){d(this,k)},[{key:"compare",value:function(k,g){var v=k,I=g;return jt.compare(v,I)}},{key:"interfaces_",get:function(){return[We]}}])}(),br=function(){return r(function k(){d(this,k)},[{key:"compare",value:function(k,g){var v=k,I=g;if(v.length<I.length)return-1;if(v.length>I.length)return 1;if(v.length===0)return 0;var H=jt.compare(v,I);return jt.isEqualReversed(v,I)?0:H}},{key:"OLDcompare",value:function(k,g){var v=k,I=g;if(v.length<I.length)return-1;if(v.length>I.length)return 1;if(v.length===0)return 0;for(var H=jt.increasingDirection(v),ne=jt.increasingDirection(I),Se=H>0?0:v.length-1,Le=ne>0?0:v.length-1,et=0;et<v.length;et++){var Et=v[Se].compareTo(I[Le]);if(Et!==0)return Et;Se+=H,Le+=ne}return 0}},{key:"interfaces_",get:function(){return[We]}}])}();jt.ForwardComparator=kn,jt.BidirectionalComparator=br,jt.coordArrayType=new Array(0).fill(null);var Rr=function(){return r(function k(g){d(this,k),this.str=g},[{key:"append",value:function(k){this.str+=k}},{key:"setCharAt",value:function(k,g){this.str=this.str.substr(0,k)+g+this.str.substr(k+1)}},{key:"toString",value:function(){return this.str}}])}(),vi=function(){function k(){d(this,k),k.constructor_.apply(this,arguments)}return r(k,[{key:"getM",value:function(g){return this.hasM()?this._coordinates[g].getM():Ve.NaN}},{key:"setOrdinate",value:function(g,v,I){switch(v){case wr.X:this._coordinates[g].x=I;break;case wr.Y:this._coordinates[g].y=I;break;default:this._coordinates[g].setOrdinate(v,I)}}},{key:"getZ",value:function(g){return this.hasZ()?this._coordinates[g].getZ():Ve.NaN}},{key:"size",value:function(){return this._coordinates.length}},{key:"getOrdinate",value:function(g,v){switch(v){case wr.X:return this._coordinates[g].x;case wr.Y:return this._coordinates[g].y;default:return this._coordinates[g].getOrdinate(v)}}},{key:"getCoordinate",value:function(){if(arguments.length===1){var g=arguments[0];return this._coordinates[g]}if(arguments.length===2){var v=arguments[0];arguments[1].setCoordinate(this._coordinates[v])}}},{key:"getCoordinateCopy",value:function(g){var v=this.createCoordinate();return v.setCoordinate(this._coordinates[g]),v}},{key:"createCoordinate",value:function(){return Mr.create(this.getDimension(),this.getMeasures())}},{key:"getDimension",value:function(){return this._dimension}},{key:"getX",value:function(g){return this._coordinates[g].x}},{key:"getMeasures",value:function(){return this._measures}},{key:"expandEnvelope",value:function(g){for(var v=0;v<this._coordinates.length;v++)g.expandToInclude(this._coordinates[v]);return g}},{key:"copy",value:function(){for(var g=new Array(this.size()).fill(null),v=0;v<this._coordinates.length;v++){var I=this.createCoordinate();I.setCoordinate(this._coordinates[v]),g[v]=I}return new k(g,this._dimension,this._measures)}},{key:"toString",value:function(){if(this._coordinates.length>0){var g=new Rr(17*this._coordinates.length);g.append("("),g.append(this._coordinates[0]);for(var v=1;v<this._coordinates.length;v++)g.append(", "),g.append(this._coordinates[v]);return g.append(")"),g.toString()}return"()"}},{key:"getY",value:function(g){return this._coordinates[g].y}},{key:"toCoordinateArray",value:function(){return this._coordinates}},{key:"interfaces_",get:function(){return[wr,ce]}}],[{key:"constructor_",value:function(){if(this._dimension=3,this._measures=0,this._coordinates=null,arguments.length===1){if(arguments[0]instanceof Array){var g=arguments[0];k.constructor_.call(this,g,jt.dimension(g),jt.measures(g))}else if(Number.isInteger(arguments[0])){var v=arguments[0];this._coordinates=new Array(v).fill(null);for(var I=0;I<v;I++)this._coordinates[I]=new Ke}else if(Ot(arguments[0],wr)){var H=arguments[0];if(H===null)return this._coordinates=new Array(0).fill(null),null;this._dimension=H.getDimension(),this._measures=H.getMeasures(),this._coordinates=new Array(H.size()).fill(null);for(var ne=0;ne<this._coordinates.length;ne++)this._coordinates[ne]=H.getCoordinateCopy(ne)}}else if(arguments.length===2){if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var Se=arguments[0],Le=arguments[1];k.constructor_.call(this,Se,Le,jt.measures(Se))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var et=arguments[0],Et=arguments[1];this._coordinates=new Array(et).fill(null),this._dimension=Et;for(var tn=0;tn<et;tn++)this._coordinates[tn]=Mr.create(Et)}}else if(arguments.length===3){if(Number.isInteger(arguments[2])&&arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var vn=arguments[0],or=arguments[1],$r=arguments[2];this._dimension=or,this._measures=$r,this._coordinates=vn===null?new Array(0).fill(null):vn}else if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var Xr=arguments[0],_i=arguments[1],fs=arguments[2];this._coordinates=new Array(Xr).fill(null),this._dimension=_i,this._measures=fs;for(var ss=0;ss<Xr;ss++)this._coordinates[ss]=this.createCoordinate()}}}}])}(),ci=function(){function k(){d(this,k)}return r(k,[{key:"readResolve",value:function(){return k.instance()}},{key:"create",value:function(){if(arguments.length===1){if(arguments[0]instanceof Array)return new vi(arguments[0]);if(Ot(arguments[0],wr))return new vi(arguments[0])}else{if(arguments.length===2){var g=arguments[1];return g>3&&(g=3),g<2&&(g=2),new vi(arguments[0],g)}if(arguments.length===3){var v=arguments[2],I=arguments[1]-v;return v>1&&(v=1),I>3&&(I=3),I<2&&(I=2),new vi(arguments[0],I+v,v)}}}},{key:"interfaces_",get:function(){return[Qs,ce]}}],[{key:"instance",value:function(){return k.instanceObject}}])}();ci.instanceObject=new ci;var xi=function(k){function g(){var v;return d(this,g),v=l(this,g),g.constructor_.apply(v,arguments),v}return P(g,k),r(g,[{key:"copyInternal",value:function(){for(var v=new Array(this._geometries.length).fill(null),I=0;I<v.length;I++)v[I]=this._geometries[I].copy();return new g(v,this._factory)}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof Ht){var v=arguments[0],I=arguments[1];return!!this.isEquivalentClass(v)&&F(g,"equalsExact",this,1).call(this,v,I)}return F(g,"equalsExact",this,1).apply(this,arguments)}},{key:"getBoundaryDimension",value:function(){return 1}},{key:"getTypeCode",value:function(){return Ht.TYPECODE_MULTIPOLYGON}},{key:"getDimension",value:function(){return 2}},{key:"getBoundary",value:function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var v=new yt,I=0;I<this._geometries.length;I++)for(var H=this._geometries[I].getBoundary(),ne=0;ne<H.getNumGeometries();ne++)v.add(H.getGeometryN(ne));var Se=new Array(v.size()).fill(null);return this.getFactory().createMultiLineString(v.toArray(Se))}},{key:"getGeometryType",value:function(){return Ht.TYPENAME_MULTIPOLYGON}},{key:"interfaces_",get:function(){return[tt]}}],[{key:"constructor_",value:function(){var v=arguments[0],I=arguments[1];Nt.constructor_.call(this,v,I)}}])}(Nt),ns=function(){return r(function k(){d(this,k)},[{key:"get",value:function(){}},{key:"put",value:function(){}},{key:"size",value:function(){}},{key:"values",value:function(){}},{key:"entrySet",value:function(){}}])}(),os=function(k){function g(){var v;return d(this,g),(v=l(this,g)).map=new Map,v}return P(g,k),r(g,[{key:"get",value:function(v){return this.map.get(v)||null}},{key:"put",value:function(v,I){return this.map.set(v,I),I}},{key:"values",value:function(){for(var v=new yt,I=this.map.values(),H=I.next();!H.done;)v.add(H.value),H=I.next();return v}},{key:"entrySet",value:function(){var v=new Zt;return this.map.entries().forEach(function(I){return v.add(I)}),v}},{key:"size",value:function(){return this.map.size()}}])}(ns),$i=function(){function k(){d(this,k),k.constructor_.apply(this,arguments)}return r(k,[{key:"equals",value:function(g){if(!(g instanceof k))return!1;var v=g;return this._modelType===v._modelType&&this._scale===v._scale}},{key:"compareTo",value:function(g){var v=g,I=this.getMaximumSignificantDigits(),H=v.getMaximumSignificantDigits();return Sr.compare(I,H)}},{key:"getScale",value:function(){return this._scale}},{key:"isFloating",value:function(){return this._modelType===k.FLOATING||this._modelType===k.FLOATING_SINGLE}},{key:"getType",value:function(){return this._modelType}},{key:"toString",value:function(){var g="UNKNOWN";return this._modelType===k.FLOATING?g="Floating":this._modelType===k.FLOATING_SINGLE?g="Floating-Single":this._modelType===k.FIXED&&(g="Fixed (Scale="+this.getScale()+")"),g}},{key:"makePrecise",value:function(){if(typeof arguments[0]=="number"){var g=arguments[0];return Ve.isNaN(g)||this._modelType===k.FLOATING_SINGLE?g:this._modelType===k.FIXED?Math.round(g*this._scale)/this._scale:g}if(arguments[0]instanceof Ke){var v=arguments[0];if(this._modelType===k.FLOATING)return null;v.x=this.makePrecise(v.x),v.y=this.makePrecise(v.y)}}},{key:"getMaximumSignificantDigits",value:function(){var g=16;return this._modelType===k.FLOATING?g=16:this._modelType===k.FLOATING_SINGLE?g=6:this._modelType===k.FIXED&&(g=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),g}},{key:"setScale",value:function(g){this._scale=Math.abs(g)}},{key:"interfaces_",get:function(){return[ce,he]}}],[{key:"constructor_",value:function(){if(this._modelType=null,this._scale=null,arguments.length===0)this._modelType=k.FLOATING;else if(arguments.length===1){if(arguments[0]instanceof Js){var g=arguments[0];this._modelType=g,g===k.FIXED&&this.setScale(1)}else if(typeof arguments[0]=="number"){var v=arguments[0];this._modelType=k.FIXED,this.setScale(v)}else if(arguments[0]instanceof k){var I=arguments[0];this._modelType=I._modelType,this._scale=I._scale}}}},{key:"mostPrecise",value:function(g,v){return g.compareTo(v)>=0?g:v}}])}(),Js=function(){function k(){d(this,k),k.constructor_.apply(this,arguments)}return r(k,[{key:"readResolve",value:function(){return k.nameToTypeMap.get(this._name)}},{key:"toString",value:function(){return this._name}},{key:"interfaces_",get:function(){return[ce]}}],[{key:"constructor_",value:function(){this._name=null;var g=arguments[0];this._name=g,k.nameToTypeMap.put(g,this)}}])}();Js.nameToTypeMap=new os,$i.Type=Js,$i.FIXED=new Js("FIXED"),$i.FLOATING=new Js("FLOATING"),$i.FLOATING_SINGLE=new Js("FLOATING SINGLE"),$i.maximumPreciseValue=9007199254740992;var Io=function(k){function g(){var v;return d(this,g),v=l(this,g),g.constructor_.apply(v,arguments),v}return P(g,k),r(g,[{key:"copyInternal",value:function(){for(var v=new Array(this._geometries.length).fill(null),I=0;I<v.length;I++)v[I]=this._geometries[I].copy();return new g(v,this._factory)}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof Ht){var v=arguments[0],I=arguments[1];return!!this.isEquivalentClass(v)&&F(g,"equalsExact",this,1).call(this,v,I)}return F(g,"equalsExact",this,1).apply(this,arguments)}},{key:"getBoundaryDimension",value:function(){return this.isClosed()?_r.FALSE:0}},{key:"isClosed",value:function(){if(this.isEmpty())return!1;for(var v=0;v<this._geometries.length;v++)if(!this._geometries[v].isClosed())return!1;return!0}},{key:"getTypeCode",value:function(){return Ht.TYPECODE_MULTILINESTRING}},{key:"getDimension",value:function(){return 1}},{key:"getBoundary",value:function(){throw new an}},{key:"getGeometryType",value:function(){return Ht.TYPENAME_MULTILINESTRING}},{key:"interfaces_",get:function(){return[Rn]}}],[{key:"constructor_",value:function(){var v=arguments[0],I=arguments[1];Nt.constructor_.call(this,v,I)}}])}(Nt),io=function(){function k(){d(this,k),k.constructor_.apply(this,arguments)}return r(k,[{key:"createEmpty",value:function(g){switch(g){case-1:return this.createGeometryCollection();case 0:return this.createPoint();case 1:return this.createLineString();case 2:return this.createPolygon();default:throw new J("Invalid dimension: "+g)}}},{key:"toGeometry",value:function(g){return g.isNull()?this.createPoint():g.getMinX()===g.getMaxX()&&g.getMinY()===g.getMaxY()?this.createPoint(new Ke(g.getMinX(),g.getMinY())):g.getMinX()===g.getMaxX()||g.getMinY()===g.getMaxY()?this.createLineString([new Ke(g.getMinX(),g.getMinY()),new Ke(g.getMaxX(),g.getMaxY())]):this.createPolygon(this.createLinearRing([new Ke(g.getMinX(),g.getMinY()),new Ke(g.getMinX(),g.getMaxY()),new Ke(g.getMaxX(),g.getMaxY()),new Ke(g.getMaxX(),g.getMinY()),new Ke(g.getMinX(),g.getMinY())]),null)}},{key:"createLineString",value:function(){if(arguments.length===0)return this.createLineString(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof Array){var g=arguments[0];return this.createLineString(g!==null?this.getCoordinateSequenceFactory().create(g):null)}if(Ot(arguments[0],wr))return new Ut(arguments[0],this)}}},{key:"createMultiLineString",value:function(){return arguments.length===0?new Io(null,this):arguments.length===1?new Io(arguments[0],this):void 0}},{key:"buildGeometry",value:function(g){for(var v=null,I=!1,H=!1,ne=g.iterator();ne.hasNext();){var Se=ne.next(),Le=Se.getTypeCode();v===null&&(v=Le),Le!==v&&(I=!0),Se instanceof Nt&&(H=!0)}if(v===null)return this.createGeometryCollection();if(I||H)return this.createGeometryCollection(k.toGeometryArray(g));var et=g.iterator().next();if(g.size()>1){if(et instanceof Tt)return this.createMultiPolygon(k.toPolygonArray(g));if(et instanceof Ut)return this.createMultiLineString(k.toLineStringArray(g));if(et instanceof Oe)return this.createMultiPoint(k.toPointArray(g));ct.shouldNeverReachHere("Unhandled geometry type: "+et.getGeometryType())}return et}},{key:"createMultiPointFromCoords",value:function(g){return this.createMultiPoint(g!==null?this.getCoordinateSequenceFactory().create(g):null)}},{key:"createPoint",value:function(){if(arguments.length===0)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof Ke){var g=arguments[0];return this.createPoint(g!==null?this.getCoordinateSequenceFactory().create([g]):null)}if(Ot(arguments[0],wr))return new Oe(arguments[0],this)}}},{key:"getCoordinateSequenceFactory",value:function(){return this._coordinateSequenceFactory}},{key:"createPolygon",value:function(){if(arguments.length===0)return this.createPolygon(null,null);if(arguments.length===1){if(Ot(arguments[0],wr)){var g=arguments[0];return this.createPolygon(this.createLinearRing(g))}if(arguments[0]instanceof Array){var v=arguments[0];return this.createPolygon(this.createLinearRing(v))}if(arguments[0]instanceof Sn){var I=arguments[0];return this.createPolygon(I,null)}}else if(arguments.length===2)return new Tt(arguments[0],arguments[1],this)}},{key:"getSRID",value:function(){return this._SRID}},{key:"createGeometryCollection",value:function(){return arguments.length===0?new Nt(null,this):arguments.length===1?new Nt(arguments[0],this):void 0}},{key:"getPrecisionModel",value:function(){return this._precisionModel}},{key:"createLinearRing",value:function(){if(arguments.length===0)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof Array){var g=arguments[0];return this.createLinearRing(g!==null?this.getCoordinateSequenceFactory().create(g):null)}if(Ot(arguments[0],wr))return new Sn(arguments[0],this)}}},{key:"createMultiPolygon",value:function(){return arguments.length===0?new xi(null,this):arguments.length===1?new xi(arguments[0],this):void 0}},{key:"createMultiPoint",value:function(){if(arguments.length===0)return new Ft(null,this);if(arguments.length===1){if(arguments[0]instanceof Array)return new Ft(arguments[0],this);if(Ot(arguments[0],wr)){var g=arguments[0];if(g===null)return this.createMultiPoint(new Array(0).fill(null));for(var v=new Array(g.size()).fill(null),I=0;I<g.size();I++){var H=this.getCoordinateSequenceFactory().create(1,g.getDimension(),g.getMeasures());Ri.copy(g,I,H,0,1),v[I]=this.createPoint(H)}return this.createMultiPoint(v)}}}},{key:"interfaces_",get:function(){return[ce]}}],[{key:"constructor_",value:function(){if(this._precisionModel=null,this._coordinateSequenceFactory=null,this._SRID=null,arguments.length===0)k.constructor_.call(this,new $i,0);else if(arguments.length===1){if(Ot(arguments[0],Qs)){var g=arguments[0];k.constructor_.call(this,new $i,0,g)}else if(arguments[0]instanceof $i){var v=arguments[0];k.constructor_.call(this,v,0,k.getDefaultCoordinateSequenceFactory())}}else if(arguments.length===2){var I=arguments[0],H=arguments[1];k.constructor_.call(this,I,H,k.getDefaultCoordinateSequenceFactory())}else if(arguments.length===3){var ne=arguments[0],Se=arguments[1],Le=arguments[2];this._precisionModel=ne,this._coordinateSequenceFactory=Le,this._SRID=Se}}},{key:"toMultiPolygonArray",value:function(g){var v=new Array(g.size()).fill(null);return g.toArray(v)}},{key:"toGeometryArray",value:function(g){if(g===null)return null;var v=new Array(g.size()).fill(null);return g.toArray(v)}},{key:"getDefaultCoordinateSequenceFactory",value:function(){return ci.instance()}},{key:"toMultiLineStringArray",value:function(g){var v=new Array(g.size()).fill(null);return g.toArray(v)}},{key:"toLineStringArray",value:function(g){var v=new Array(g.size()).fill(null);return g.toArray(v)}},{key:"toMultiPointArray",value:function(g){var v=new Array(g.size()).fill(null);return g.toArray(v)}},{key:"toLinearRingArray",value:function(g){var v=new Array(g.size()).fill(null);return g.toArray(v)}},{key:"toPointArray",value:function(g){var v=new Array(g.size()).fill(null);return g.toArray(v)}},{key:"toPolygonArray",value:function(g){var v=new Array(g.size()).fill(null);return g.toArray(v)}},{key:"createPointFromInternalCoord",value:function(g,v){return v.getPrecisionModel().makePrecise(g),v.getFactory().createPoint(g)}}])}(),zu="XY",ko="XYZ",hu="XYM",Th="XYZM",Ec={POINT:"Point",LINE_STRING:"LineString",LINEAR_RING:"LinearRing",POLYGON:"Polygon",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon",GEOMETRY_COLLECTION:"GeometryCollection",CIRCLE:"Circle"},Tc="EMPTY",Nu=1,Va=2,ma=3,Ic=4,$l=5,sl=6;for(var Ia in Ec)Ec[Ia].toUpperCase();var $a=function(){return r(function k(g){d(this,k),this.wkt=g,this.index_=-1},[{key:"isAlpha_",value:function(k){return k>="a"&&k<="z"||k>="A"&&k<="Z"}},{key:"isNumeric_",value:function(k,g){return k>="0"&&k<="9"||k=="."&&!(g!==void 0&&g)}},{key:"isWhiteSpace_",value:function(k){return k==" "||k=="	"||k=="\r"||k==`
`}},{key:"nextChar_",value:function(){return this.wkt.charAt(++this.index_)}},{key:"nextToken",value:function(){var k,g=this.nextChar_(),v=this.index_,I=g;if(g=="(")k=Va;else if(g==",")k=$l;else if(g==")")k=ma;else if(this.isNumeric_(g)||g=="-")k=Ic,I=this.readNumber_();else if(this.isAlpha_(g))k=Nu,I=this.readText_();else{if(this.isWhiteSpace_(g))return this.nextToken();if(g!=="")throw new Error("Unexpected character: "+g);k=sl}return{position:v,value:I,type:k}}},{key:"readNumber_",value:function(){var k,g=this.index_,v=!1,I=!1;do k=="."?v=!0:k!="e"&&k!="E"||(I=!0),k=this.nextChar_();while(this.isNumeric_(k,v)||!I&&(k=="e"||k=="E")||I&&(k=="-"||k=="+"));return parseFloat(this.wkt.substring(g,this.index_--))}},{key:"readText_",value:function(){var k,g=this.index_;do k=this.nextChar_();while(this.isAlpha_(k));return this.wkt.substring(g,this.index_--).toUpperCase()}}])}(),Hl=function(){return r(function k(g,v){d(this,k),this.lexer_=g,this.token_,this.layout_=zu,this.factory=v},[{key:"consume_",value:function(){this.token_=this.lexer_.nextToken()}},{key:"isTokenType",value:function(k){return this.token_.type==k}},{key:"match",value:function(k){var g=this.isTokenType(k);return g&&this.consume_(),g}},{key:"parse",value:function(){return this.consume_(),this.parseGeometry_()}},{key:"parseGeometryLayout_",value:function(){var k=zu,g=this.token_;if(this.isTokenType(Nu)){var v=g.value;v==="Z"?k=ko:v==="M"?k=hu:v==="ZM"&&(k=Th),k!==zu&&this.consume_()}return k}},{key:"parseGeometryCollectionText_",value:function(){if(this.match(Va)){var k=[];do k.push(this.parseGeometry_());while(this.match($l));if(this.match(ma))return k}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parsePointText_",value:function(){if(this.match(Va)){var k=this.parsePoint_();if(this.match(ma))return k}else if(this.isEmptyGeometry_())return null;throw new Error(this.formatErrorMessage_())}},{key:"parseLineStringText_",value:function(){if(this.match(Va)){var k=this.parsePointList_();if(this.match(ma))return k}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parsePolygonText_",value:function(){if(this.match(Va)){var k=this.parseLineStringTextList_();if(this.match(ma))return k}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parseMultiPointText_",value:function(){var k;if(this.match(Va)){if(k=this.token_.type==Va?this.parsePointTextList_():this.parsePointList_(),this.match(ma))return k}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parseMultiLineStringText_",value:function(){if(this.match(Va)){var k=this.parseLineStringTextList_();if(this.match(ma))return k}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parseMultiPolygonText_",value:function(){if(this.match(Va)){var k=this.parsePolygonTextList_();if(this.match(ma))return k}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parsePoint_",value:function(){for(var k=[],g=this.layout_.length,v=0;v<g;++v){var I=this.token_;if(!this.match(Ic))break;k.push(I.value)}if(k.length==g)return k;throw new Error(this.formatErrorMessage_())}},{key:"parsePointList_",value:function(){for(var k=[this.parsePoint_()];this.match($l);)k.push(this.parsePoint_());return k}},{key:"parsePointTextList_",value:function(){for(var k=[this.parsePointText_()];this.match($l);)k.push(this.parsePointText_());return k}},{key:"parseLineStringTextList_",value:function(){for(var k=[this.parseLineStringText_()];this.match($l);)k.push(this.parseLineStringText_());return k}},{key:"parsePolygonTextList_",value:function(){for(var k=[this.parsePolygonText_()];this.match($l);)k.push(this.parsePolygonText_());return k}},{key:"isEmptyGeometry_",value:function(){var k=this.isTokenType(Nu)&&this.token_.value==Tc;return k&&this.consume_(),k}},{key:"formatErrorMessage_",value:function(){return"Unexpected `"+this.token_.value+"` at position "+this.token_.position+" in `"+this.lexer_.wkt+"`"}},{key:"parseGeometry_",value:function(){var k=this.factory,g=function(_i){return m(Ke,N(_i))},v=function(_i){var fs=_i.map(function(ss){return k.createLinearRing(ss.map(g))});return fs.length>1?k.createPolygon(fs[0],fs.slice(1)):k.createPolygon(fs[0])},I=this.token_;if(this.match(Nu)){var H=I.value;if(this.layout_=this.parseGeometryLayout_(),H=="GEOMETRYCOLLECTION"){var ne=this.parseGeometryCollectionText_();return k.createGeometryCollection(ne)}switch(H){case"POINT":var Se=this.parsePointText_();return Se?k.createPoint(m(Ke,N(Se))):k.createPoint();case"LINESTRING":var Le=this.parseLineStringText_().map(g);return k.createLineString(Le);case"LINEARRING":var et=this.parseLineStringText_().map(g);return k.createLinearRing(et);case"POLYGON":var Et=this.parsePolygonText_();return Et&&Et.length!==0?v(Et):k.createPolygon();case"MULTIPOINT":var tn=this.parseMultiPointText_();if(!tn||tn.length===0)return k.createMultiPoint();var vn=tn.map(g).map(function(_i){return k.createPoint(_i)});return k.createMultiPoint(vn);case"MULTILINESTRING":var or=this.parseMultiLineStringText_().map(function(_i){return k.createLineString(_i.map(g))});return k.createMultiLineString(or);case"MULTIPOLYGON":var $r=this.parseMultiPolygonText_();if(!$r||$r.length===0)return k.createMultiPolygon();var Xr=$r.map(v);return k.createMultiPolygon(Xr);default:throw new Error("Invalid geometry type: "+H)}}throw new Error(this.formatErrorMessage_())}}])}();function Ha(k){if(k.isEmpty())return"";var g=k.getCoordinate(),v=[g.x,g.y];return g.z===void 0||Number.isNaN(g.z)||v.push(g.z),g.m===void 0||Number.isNaN(g.m)||v.push(g.m),v.join(" ")}function ka(k){for(var g=k.getCoordinates().map(function(ne){var Se=[ne.x,ne.y];return ne.z===void 0||Number.isNaN(ne.z)||Se.push(ne.z),ne.m===void 0||Number.isNaN(ne.m)||Se.push(ne.m),Se}),v=[],I=0,H=g.length;I<H;++I)v.push(g[I].join(" "));return v.join(", ")}function kc(k){var g=[];g.push("("+ka(k.getExteriorRing())+")");for(var v=0,I=k.getNumInteriorRing();v<I;++v)g.push("("+ka(k.getInteriorRingN(v))+")");return g.join(", ")}var El={Point:Ha,LineString:ka,LinearRing:ka,Polygon:kc,MultiPoint:function(k){for(var g=[],v=0,I=k.getNumGeometries();v<I;++v)g.push("("+Ha(k.getGeometryN(v))+")");return g.join(", ")},MultiLineString:function(k){for(var g=[],v=0,I=k.getNumGeometries();v<I;++v)g.push("("+ka(k.getGeometryN(v))+")");return g.join(", ")},MultiPolygon:function(k){for(var g=[],v=0,I=k.getNumGeometries();v<I;++v)g.push("("+kc(k.getGeometryN(v))+")");return g.join(", ")},GeometryCollection:function(k){for(var g=[],v=0,I=k.getNumGeometries();v<I;++v)g.push(Mc(k.getGeometryN(v)));return g.join(", ")}};function Mc(k){var g=k.getGeometryType(),v=El[g];g=g.toUpperCase();var I=function(H){var ne="";if(H.isEmpty())return ne;var Se=H.getCoordinate();return Se.z===void 0||Number.isNaN(Se.z)||(ne+="Z"),Se.m===void 0||Number.isNaN(Se.m)||(ne+="M"),ne}(k);return I.length>0&&(g+=" "+I),k.isEmpty()?g+" "+Tc:g+" ("+v(k)+")"}var Fu=function(){return r(function k(g){d(this,k),this.geometryFactory=g||new io,this.precisionModel=this.geometryFactory.getPrecisionModel()},[{key:"read",value:function(k){var g=new $a(k);return new Hl(g,this.geometryFactory).parse()}},{key:"write",value:function(k){return Mc(k)}}])}(),fu=function(){return r(function k(g){d(this,k),this.parser=new Fu(g)},[{key:"write",value:function(k){return this.parser.write(k)}}],[{key:"toLineString",value:function(k,g){if(arguments.length!==2)throw new Error("Not implemented");return"LINESTRING ( "+k.x+" "+k.y+", "+g.x+" "+g.y+" )"}}])}(),eo=function(){function k(){d(this,k),k.constructor_.apply(this,arguments)}return r(k,[{key:"getIndexAlongSegment",value:function(g,v){return this.computeIntLineIndex(),this._intLineIndex[g][v]}},{key:"getTopologySummary",value:function(){var g=new Rr;return this.isEndPoint()&&g.append(" endpoint"),this._isProper&&g.append(" proper"),this.isCollinear()&&g.append(" collinear"),g.toString()}},{key:"computeIntersection",value:function(g,v,I,H){this._inputLines[0][0]=g,this._inputLines[0][1]=v,this._inputLines[1][0]=I,this._inputLines[1][1]=H,this._result=this.computeIntersect(g,v,I,H)}},{key:"getIntersectionNum",value:function(){return this._result}},{key:"computeIntLineIndex",value:function(){if(arguments.length===0)this._intLineIndex===null&&(this._intLineIndex=Array(2).fill().map(function(){return Array(2)}),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(arguments.length===1){var g=arguments[0];this.getEdgeDistance(g,0)>this.getEdgeDistance(g,1)?(this._intLineIndex[g][0]=0,this._intLineIndex[g][1]=1):(this._intLineIndex[g][0]=1,this._intLineIndex[g][1]=0)}}},{key:"isProper",value:function(){return this.hasIntersection()&&this._isProper}},{key:"setPrecisionModel",value:function(g){this._precisionModel=g}},{key:"isInteriorIntersection",value:function(){if(arguments.length===0)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(arguments.length===1){for(var g=arguments[0],v=0;v<this._result;v++)if(!this._intPt[v].equals2D(this._inputLines[g][0])&&!this._intPt[v].equals2D(this._inputLines[g][1]))return!0;return!1}}},{key:"getIntersection",value:function(g){return this._intPt[g]}},{key:"isEndPoint",value:function(){return this.hasIntersection()&&!this._isProper}},{key:"hasIntersection",value:function(){return this._result!==k.NO_INTERSECTION}},{key:"getEdgeDistance",value:function(g,v){return k.computeEdgeDistance(this._intPt[v],this._inputLines[g][0],this._inputLines[g][1])}},{key:"isCollinear",value:function(){return this._result===k.COLLINEAR_INTERSECTION}},{key:"toString",value:function(){return fu.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+fu.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()}},{key:"getEndpoint",value:function(g,v){return this._inputLines[g][v]}},{key:"isIntersection",value:function(g){for(var v=0;v<this._result;v++)if(this._intPt[v].equals2D(g))return!0;return!1}},{key:"getIntersectionAlongSegment",value:function(g,v){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[g][v]]}}],[{key:"constructor_",value:function(){this._result=null,this._inputLines=Array(2).fill().map(function(){return Array(2)}),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new Ke,this._intPt[1]=new Ke,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0}},{key:"computeEdgeDistance",value:function(g,v,I){var H=Math.abs(I.x-v.x),ne=Math.abs(I.y-v.y),Se=-1;if(g.equals(v))Se=0;else if(g.equals(I))Se=H>ne?H:ne;else{var Le=Math.abs(g.x-v.x),et=Math.abs(g.y-v.y);(Se=H>ne?Le:et)!==0||g.equals(v)||(Se=Math.max(Le,et))}return ct.isTrue(!(Se===0&&!g.equals(v)),"Bad distance calculation"),Se}},{key:"nonRobustComputeEdgeDistance",value:function(g,v,I){var H=g.x-v.x,ne=g.y-v.y,Se=Math.sqrt(H*H+ne*ne);return ct.isTrue(!(Se===0&&!g.equals(v)),"Invalid distance calculation"),Se}}])}();eo.DONT_INTERSECT=0,eo.DO_INTERSECT=1,eo.COLLINEAR=2,eo.NO_INTERSECTION=0,eo.POINT_INTERSECTION=1,eo.COLLINEAR_INTERSECTION=2;var Ul=function(k){function g(){return d(this,g),l(this,g)}return P(g,k),r(g,[{key:"isInSegmentEnvelopes",value:function(v){var I=new xn(this._inputLines[0][0],this._inputLines[0][1]),H=new xn(this._inputLines[1][0],this._inputLines[1][1]);return I.contains(v)&&H.contains(v)}},{key:"computeIntersection",value:function(){if(arguments.length!==3)return F(g,"computeIntersection",this,1).apply(this,arguments);var v=arguments[0],I=arguments[1],H=arguments[2];if(this._isProper=!1,xn.intersects(I,H,v)&&Tr.index(I,H,v)===0&&Tr.index(H,I,v)===0)return this._isProper=!0,(v.equals(I)||v.equals(H))&&(this._isProper=!1),this._result=eo.POINT_INTERSECTION,null;this._result=eo.NO_INTERSECTION}},{key:"intersection",value:function(v,I,H,ne){var Se=this.intersectionSafe(v,I,H,ne);return this.isInSegmentEnvelopes(Se)||(Se=new Ke(g.nearestEndpoint(v,I,H,ne))),this._precisionModel!==null&&this._precisionModel.makePrecise(Se),Se}},{key:"checkDD",value:function(v,I,H,ne,Se){var Le=ui.intersection(v,I,H,ne),et=this.isInSegmentEnvelopes(Le);vr.out.println("DD in env = "+et+"  --------------------- "+Le),Se.distance(Le)>1e-4&&vr.out.println("Distance = "+Se.distance(Le))}},{key:"intersectionSafe",value:function(v,I,H,ne){var Se=Xn.intersection(v,I,H,ne);return Se===null&&(Se=g.nearestEndpoint(v,I,H,ne)),Se}},{key:"computeCollinearIntersection",value:function(v,I,H,ne){var Se=xn.intersects(v,I,H),Le=xn.intersects(v,I,ne),et=xn.intersects(H,ne,v),Et=xn.intersects(H,ne,I);return Se&&Le?(this._intPt[0]=H,this._intPt[1]=ne,eo.COLLINEAR_INTERSECTION):et&&Et?(this._intPt[0]=v,this._intPt[1]=I,eo.COLLINEAR_INTERSECTION):Se&&et?(this._intPt[0]=H,this._intPt[1]=v,!H.equals(v)||Le||Et?eo.COLLINEAR_INTERSECTION:eo.POINT_INTERSECTION):Se&&Et?(this._intPt[0]=H,this._intPt[1]=I,!H.equals(I)||Le||et?eo.COLLINEAR_INTERSECTION:eo.POINT_INTERSECTION):Le&&et?(this._intPt[0]=ne,this._intPt[1]=v,!ne.equals(v)||Se||Et?eo.COLLINEAR_INTERSECTION:eo.POINT_INTERSECTION):Le&&Et?(this._intPt[0]=ne,this._intPt[1]=I,!ne.equals(I)||Se||et?eo.COLLINEAR_INTERSECTION:eo.POINT_INTERSECTION):eo.NO_INTERSECTION}},{key:"computeIntersect",value:function(v,I,H,ne){if(this._isProper=!1,!xn.intersects(v,I,H,ne))return eo.NO_INTERSECTION;var Se=Tr.index(v,I,H),Le=Tr.index(v,I,ne);if(Se>0&&Le>0||Se<0&&Le<0)return eo.NO_INTERSECTION;var et=Tr.index(H,ne,v),Et=Tr.index(H,ne,I);return et>0&&Et>0||et<0&&Et<0?eo.NO_INTERSECTION:Se===0&&Le===0&&et===0&&Et===0?this.computeCollinearIntersection(v,I,H,ne):(Se===0||Le===0||et===0||Et===0?(this._isProper=!1,v.equals2D(H)||v.equals2D(ne)?this._intPt[0]=v:I.equals2D(H)||I.equals2D(ne)?this._intPt[0]=I:Se===0?this._intPt[0]=new Ke(H):Le===0?this._intPt[0]=new Ke(ne):et===0?this._intPt[0]=new Ke(v):Et===0&&(this._intPt[0]=new Ke(I))):(this._isProper=!0,this._intPt[0]=this.intersection(v,I,H,ne)),eo.POINT_INTERSECTION)}}],[{key:"nearestEndpoint",value:function(v,I,H,ne){var Se=v,Le=ds.pointToSegment(v,H,ne),et=ds.pointToSegment(I,H,ne);return et<Le&&(Le=et,Se=I),(et=ds.pointToSegment(H,v,I))<Le&&(Le=et,Se=H),(et=ds.pointToSegment(ne,v,I))<Le&&(Le=et,Se=ne),Se}}])}(eo),ta=function(){function k(){d(this,k),k.constructor_.apply(this,arguments)}return r(k,[{key:"countSegment",value:function(g,v){if(g.x<this._p.x&&v.x<this._p.x)return null;if(this._p.x===v.x&&this._p.y===v.y)return this._isPointOnSegment=!0,null;if(g.y===this._p.y&&v.y===this._p.y){var I=g.x,H=v.x;return I>H&&(I=v.x,H=g.x),this._p.x>=I&&this._p.x<=H&&(this._isPointOnSegment=!0),null}if(g.y>this._p.y&&v.y<=this._p.y||v.y>this._p.y&&g.y<=this._p.y){var ne=Tr.index(g,v,this._p);if(ne===Tr.COLLINEAR)return this._isPointOnSegment=!0,null;v.y<g.y&&(ne=-ne),ne===Tr.LEFT&&this._crossingCount++}}},{key:"isPointInPolygon",value:function(){return this.getLocation()!==le.EXTERIOR}},{key:"getLocation",value:function(){return this._isPointOnSegment?le.BOUNDARY:this._crossingCount%2==1?le.INTERIOR:le.EXTERIOR}},{key:"isOnSegment",value:function(){return this._isPointOnSegment}}],[{key:"constructor_",value:function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;var g=arguments[0];this._p=g}},{key:"locatePointInRing",value:function(){if(arguments[0]instanceof Ke&&Ot(arguments[1],wr)){for(var g=arguments[1],v=new k(arguments[0]),I=new Ke,H=new Ke,ne=1;ne<g.size();ne++)if(g.getCoordinate(ne,I),g.getCoordinate(ne-1,H),v.countSegment(I,H),v.isOnSegment())return v.getLocation();return v.getLocation()}if(arguments[0]instanceof Ke&&arguments[1]instanceof Array){for(var Se=arguments[1],Le=new k(arguments[0]),et=1;et<Se.length;et++){var Et=Se[et],tn=Se[et-1];if(Le.countSegment(Et,tn),Le.isOnSegment())return Le.getLocation()}return Le.getLocation()}}}])}(),jl=function(){function k(){d(this,k)}return r(k,null,[{key:"isOnLine",value:function(){if(arguments[0]instanceof Ke&&Ot(arguments[1],wr)){for(var g=arguments[0],v=arguments[1],I=new Ul,H=new Ke,ne=new Ke,Se=v.size(),Le=1;Le<Se;Le++)if(v.getCoordinate(Le-1,H),v.getCoordinate(Le,ne),I.computeIntersection(g,H,ne),I.hasIntersection())return!0;return!1}if(arguments[0]instanceof Ke&&arguments[1]instanceof Array){for(var et=arguments[0],Et=arguments[1],tn=new Ul,vn=1;vn<Et.length;vn++){var or=Et[vn-1],$r=Et[vn];if(tn.computeIntersection(et,or,$r),tn.hasIntersection())return!0}return!1}}},{key:"locateInRing",value:function(g,v){return ta.locatePointInRing(g,v)}},{key:"isInRing",value:function(g,v){return k.locateInRing(g,v)!==le.EXTERIOR}}])}(),Wo=function(){function k(){d(this,k),k.constructor_.apply(this,arguments)}return r(k,[{key:"setAllLocations",value:function(g){for(var v=0;v<this.location.length;v++)this.location[v]=g}},{key:"isNull",value:function(){for(var g=0;g<this.location.length;g++)if(this.location[g]!==le.NONE)return!1;return!0}},{key:"setAllLocationsIfNull",value:function(g){for(var v=0;v<this.location.length;v++)this.location[v]===le.NONE&&(this.location[v]=g)}},{key:"isLine",value:function(){return this.location.length===1}},{key:"merge",value:function(g){if(g.location.length>this.location.length){var v=new Array(3).fill(null);v[bt.ON]=this.location[bt.ON],v[bt.LEFT]=le.NONE,v[bt.RIGHT]=le.NONE,this.location=v}for(var I=0;I<this.location.length;I++)this.location[I]===le.NONE&&I<g.location.length&&(this.location[I]=g.location[I])}},{key:"getLocations",value:function(){return this.location}},{key:"flip",value:function(){if(this.location.length<=1)return null;var g=this.location[bt.LEFT];this.location[bt.LEFT]=this.location[bt.RIGHT],this.location[bt.RIGHT]=g}},{key:"toString",value:function(){var g=new Bn;return this.location.length>1&&g.append(le.toLocationSymbol(this.location[bt.LEFT])),g.append(le.toLocationSymbol(this.location[bt.ON])),this.location.length>1&&g.append(le.toLocationSymbol(this.location[bt.RIGHT])),g.toString()}},{key:"setLocations",value:function(g,v,I){this.location[bt.ON]=g,this.location[bt.LEFT]=v,this.location[bt.RIGHT]=I}},{key:"get",value:function(g){return g<this.location.length?this.location[g]:le.NONE}},{key:"isArea",value:function(){return this.location.length>1}},{key:"isAnyNull",value:function(){for(var g=0;g<this.location.length;g++)if(this.location[g]===le.NONE)return!0;return!1}},{key:"setLocation",value:function(){if(arguments.length===1){var g=arguments[0];this.setLocation(bt.ON,g)}else if(arguments.length===2){var v=arguments[0],I=arguments[1];this.location[v]=I}}},{key:"init",value:function(g){this.location=new Array(g).fill(null),this.setAllLocations(le.NONE)}},{key:"isEqualOnSide",value:function(g,v){return this.location[v]===g.location[v]}},{key:"allPositionsEqual",value:function(g){for(var v=0;v<this.location.length;v++)if(this.location[v]!==g)return!1;return!0}}],[{key:"constructor_",value:function(){if(this.location=null,arguments.length===1){if(arguments[0]instanceof Array){var g=arguments[0];this.init(g.length)}else if(Number.isInteger(arguments[0])){var v=arguments[0];this.init(1),this.location[bt.ON]=v}else if(arguments[0]instanceof k){var I=arguments[0];if(this.init(I.location.length),I!==null)for(var H=0;H<this.location.length;H++)this.location[H]=I.location[H]}}else if(arguments.length===3){var ne=arguments[0],Se=arguments[1],Le=arguments[2];this.init(3),this.location[bt.ON]=ne,this.location[bt.LEFT]=Se,this.location[bt.RIGHT]=Le}}}])}(),Bo=function(){function k(){d(this,k),k.constructor_.apply(this,arguments)}return r(k,[{key:"getGeometryCount",value:function(){var g=0;return this.elt[0].isNull()||g++,this.elt[1].isNull()||g++,g}},{key:"setAllLocations",value:function(g,v){this.elt[g].setAllLocations(v)}},{key:"isNull",value:function(g){return this.elt[g].isNull()}},{key:"setAllLocationsIfNull",value:function(){if(arguments.length===1){var g=arguments[0];this.setAllLocationsIfNull(0,g),this.setAllLocationsIfNull(1,g)}else if(arguments.length===2){var v=arguments[0],I=arguments[1];this.elt[v].setAllLocationsIfNull(I)}}},{key:"isLine",value:function(g){return this.elt[g].isLine()}},{key:"merge",value:function(g){for(var v=0;v<2;v++)this.elt[v]===null&&g.elt[v]!==null?this.elt[v]=new Wo(g.elt[v]):this.elt[v].merge(g.elt[v])}},{key:"flip",value:function(){this.elt[0].flip(),this.elt[1].flip()}},{key:"getLocation",value:function(){if(arguments.length===1){var g=arguments[0];return this.elt[g].get(bt.ON)}if(arguments.length===2){var v=arguments[0],I=arguments[1];return this.elt[v].get(I)}}},{key:"toString",value:function(){var g=new Bn;return this.elt[0]!==null&&(g.append("A:"),g.append(this.elt[0].toString())),this.elt[1]!==null&&(g.append(" B:"),g.append(this.elt[1].toString())),g.toString()}},{key:"isArea",value:function(){if(arguments.length===0)return this.elt[0].isArea()||this.elt[1].isArea();if(arguments.length===1){var g=arguments[0];return this.elt[g].isArea()}}},{key:"isAnyNull",value:function(g){return this.elt[g].isAnyNull()}},{key:"setLocation",value:function(){if(arguments.length===2){var g=arguments[0],v=arguments[1];this.elt[g].setLocation(bt.ON,v)}else if(arguments.length===3){var I=arguments[0],H=arguments[1],ne=arguments[2];this.elt[I].setLocation(H,ne)}}},{key:"isEqualOnSide",value:function(g,v){return this.elt[0].isEqualOnSide(g.elt[0],v)&&this.elt[1].isEqualOnSide(g.elt[1],v)}},{key:"allPositionsEqual",value:function(g,v){return this.elt[g].allPositionsEqual(v)}},{key:"toLine",value:function(g){this.elt[g].isArea()&&(this.elt[g]=new Wo(this.elt[g].location[0]))}}],[{key:"constructor_",value:function(){if(this.elt=new Array(2).fill(null),arguments.length===1){if(Number.isInteger(arguments[0])){var g=arguments[0];this.elt[0]=new Wo(g),this.elt[1]=new Wo(g)}else if(arguments[0]instanceof k){var v=arguments[0];this.elt[0]=new Wo(v.elt[0]),this.elt[1]=new Wo(v.elt[1])}}else if(arguments.length===2){var I=arguments[0],H=arguments[1];this.elt[0]=new Wo(le.NONE),this.elt[1]=new Wo(le.NONE),this.elt[I].setLocation(H)}else if(arguments.length===3){var ne=arguments[0],Se=arguments[1],Le=arguments[2];this.elt[0]=new Wo(ne,Se,Le),this.elt[1]=new Wo(ne,Se,Le)}else if(arguments.length===4){var et=arguments[0],Et=arguments[1],tn=arguments[2],vn=arguments[3];this.elt[0]=new Wo(le.NONE,le.NONE,le.NONE),this.elt[1]=new Wo(le.NONE,le.NONE,le.NONE),this.elt[et].setLocations(Et,tn,vn)}}},{key:"toLineLabel",value:function(g){for(var v=new k(le.NONE),I=0;I<2;I++)v.setLocation(I,g.getLocation(I));return v}}])}(),Md=function(){return r(function k(){d(this,k),k.constructor_.apply(this,arguments)},[{key:"computeRing",value:function(){if(this._ring!==null)return null;for(var k=new Array(this._pts.size()).fill(null),g=0;g<this._pts.size();g++)k[g]=this._pts.get(g);this._ring=this._geometryFactory.createLinearRing(k),this._isHole=Tr.isCCW(this._ring.getCoordinates())}},{key:"isIsolated",value:function(){return this._label.getGeometryCount()===1}},{key:"computePoints",value:function(k){this._startDe=k;var g=k,v=!0;do{if(g===null)throw new Fr("Found null DirectedEdge");if(g.getEdgeRing()===this)throw new Fr("Directed Edge visited twice during ring-building at "+g.getCoordinate());this._edges.add(g);var I=g.getLabel();ct.isTrue(I.isArea()),this.mergeLabel(I),this.addPoints(g.getEdge(),g.isForward(),v),v=!1,this.setEdgeRing(g,this),g=this.getNext(g)}while(g!==this._startDe)}},{key:"getLinearRing",value:function(){return this._ring}},{key:"getCoordinate",value:function(k){return this._pts.get(k)}},{key:"computeMaxNodeDegree",value:function(){this._maxNodeDegree=0;var k=this._startDe;do{var g=k.getNode().getEdges().getOutgoingDegree(this);g>this._maxNodeDegree&&(this._maxNodeDegree=g),k=this.getNext(k)}while(k!==this._startDe);this._maxNodeDegree*=2}},{key:"addPoints",value:function(k,g,v){var I=k.getCoordinates();if(g){var H=1;v&&(H=0);for(var ne=H;ne<I.length;ne++)this._pts.add(I[ne])}else{var Se=I.length-2;v&&(Se=I.length-1);for(var Le=Se;Le>=0;Le--)this._pts.add(I[Le])}}},{key:"isHole",value:function(){return this._isHole}},{key:"setInResult",value:function(){var k=this._startDe;do k.getEdge().setInResult(!0),k=k.getNext();while(k!==this._startDe)}},{key:"containsPoint",value:function(k){var g=this.getLinearRing();if(!g.getEnvelopeInternal().contains(k)||!jl.isInRing(k,g.getCoordinates()))return!1;for(var v=this._holes.iterator();v.hasNext();)if(v.next().containsPoint(k))return!1;return!0}},{key:"addHole",value:function(k){this._holes.add(k)}},{key:"isShell",value:function(){return this._shell===null}},{key:"getLabel",value:function(){return this._label}},{key:"getEdges",value:function(){return this._edges}},{key:"getMaxNodeDegree",value:function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree}},{key:"getShell",value:function(){return this._shell}},{key:"mergeLabel",value:function(){if(arguments.length===1){var k=arguments[0];this.mergeLabel(k,0),this.mergeLabel(k,1)}else if(arguments.length===2){var g=arguments[1],v=arguments[0].getLocation(g,bt.RIGHT);if(v===le.NONE)return null;if(this._label.getLocation(g)===le.NONE)return this._label.setLocation(g,v),null}}},{key:"setShell",value:function(k){this._shell=k,k!==null&&k.addHole(this)}},{key:"toPolygon",value:function(k){for(var g=new Array(this._holes.size()).fill(null),v=0;v<this._holes.size();v++)g[v]=this._holes.get(v).getLinearRing();return k.createPolygon(this.getLinearRing(),g)}}],[{key:"constructor_",value:function(){if(this._startDe=null,this._maxNodeDegree=-1,this._edges=new yt,this._pts=new yt,this._label=new Bo(le.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new yt,this._geometryFactory=null,arguments.length!==0){if(arguments.length===2){var k=arguments[0],g=arguments[1];this._geometryFactory=g,this.computePoints(k),this.computeRing()}}}}])}(),Qp=function(k){function g(){var v;return d(this,g),v=l(this,g),g.constructor_.apply(v,arguments),v}return P(g,k),r(g,[{key:"setEdgeRing",value:function(v,I){v.setMinEdgeRing(I)}},{key:"getNext",value:function(v){return v.getNextMin()}}],[{key:"constructor_",value:function(){var v=arguments[0],I=arguments[1];Md.constructor_.call(this,v,I)}}])}(Md),Ad=function(k){function g(){var v;return d(this,g),v=l(this,g),g.constructor_.apply(v,arguments),v}return P(g,k),r(g,[{key:"buildMinimalRings",value:function(){var v=new yt,I=this._startDe;do{if(I.getMinEdgeRing()===null){var H=new Qp(I,this._geometryFactory);v.add(H)}I=I.getNext()}while(I!==this._startDe);return v}},{key:"setEdgeRing",value:function(v,I){v.setEdgeRing(I)}},{key:"linkDirectedEdgesForMinimalEdgeRings",value:function(){var v=this._startDe;do v.getNode().getEdges().linkMinimalDirectedEdges(this),v=v.getNext();while(v!==this._startDe)}},{key:"getNext",value:function(v){return v.getNext()}}],[{key:"constructor_",value:function(){var v=arguments[0],I=arguments[1];Md.constructor_.call(this,v,I)}}])}(Md),ki=function(){return r(function k(){d(this,k),k.constructor_.apply(this,arguments)},[{key:"setVisited",value:function(k){this._isVisited=k}},{key:"setInResult",value:function(k){this._isInResult=k}},{key:"isCovered",value:function(){return this._isCovered}},{key:"isCoveredSet",value:function(){return this._isCoveredSet}},{key:"setLabel",value:function(k){this._label=k}},{key:"getLabel",value:function(){return this._label}},{key:"setCovered",value:function(k){this._isCovered=k,this._isCoveredSet=!0}},{key:"updateIM",value:function(k){ct.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(k)}},{key:"isInResult",value:function(){return this._isInResult}},{key:"isVisited",value:function(){return this._isVisited}}],[{key:"constructor_",value:function(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,arguments.length!==0){if(arguments.length===1){var k=arguments[0];this._label=k}}}}])}(),Bu=function(k){function g(){var v;return d(this,g),v=l(this,g),g.constructor_.apply(v,arguments),v}return P(g,k),r(g,[{key:"isIncidentEdgeInResult",value:function(){for(var v=this.getEdges().getEdges().iterator();v.hasNext();)if(v.next().getEdge().isInResult())return!0;return!1}},{key:"isIsolated",value:function(){return this._label.getGeometryCount()===1}},{key:"getCoordinate",value:function(){return this._coord}},{key:"print",value:function(v){v.println("node "+this._coord+" lbl: "+this._label)}},{key:"computeIM",value:function(v){}},{key:"computeMergedLocation",value:function(v,I){var H=le.NONE;if(H=this._label.getLocation(I),!v.isNull(I)){var ne=v.getLocation(I);H!==le.BOUNDARY&&(H=ne)}return H}},{key:"setLabel",value:function(){if(arguments.length!==2||!Number.isInteger(arguments[1])||!Number.isInteger(arguments[0]))return F(g,"setLabel",this,1).apply(this,arguments);var v=arguments[0],I=arguments[1];this._label===null?this._label=new Bo(v,I):this._label.setLocation(v,I)}},{key:"getEdges",value:function(){return this._edges}},{key:"mergeLabel",value:function(){if(arguments[0]instanceof g){var v=arguments[0];this.mergeLabel(v._label)}else if(arguments[0]instanceof Bo)for(var I=arguments[0],H=0;H<2;H++){var ne=this.computeMergedLocation(I,H);this._label.getLocation(H)===le.NONE&&this._label.setLocation(H,ne)}}},{key:"add",value:function(v){this._edges.insert(v),v.setNode(this)}},{key:"setLabelBoundary",value:function(v){if(this._label===null)return null;var I=le.NONE;this._label!==null&&(I=this._label.getLocation(v));var H=null;switch(I){case le.BOUNDARY:H=le.INTERIOR;break;case le.INTERIOR:default:H=le.BOUNDARY}this._label.setLocation(v,H)}}],[{key:"constructor_",value:function(){this._coord=null,this._edges=null;var v=arguments[0],I=arguments[1];this._coord=v,this._edges=I,this._label=new Bo(0,le.NONE)}}])}(ki),Ac=function(k){function g(){return d(this,g),l(this,g,arguments)}return P(g,k),r(g)}(ns);function Rc(k){return k==null?0:k.color}function zs(k){return k==null?null:k.parent}function ga(k,g){k!==null&&(k.color=g)}function Gl(k){return k==null?null:k.left}function ql(k){return k==null?null:k.right}var Vu=function(k){function g(){var v;return d(this,g),(v=l(this,g)).root_=null,v.size_=0,v}return P(g,k),r(g,[{key:"get",value:function(v){for(var I=this.root_;I!==null;){var H=v.compareTo(I.key);if(H<0)I=I.left;else{if(!(H>0))return I.value;I=I.right}}return null}},{key:"put",value:function(v,I){if(this.root_===null)return this.root_={key:v,value:I,left:null,right:null,parent:null,color:0,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var H,ne,Se=this.root_;do if(H=Se,(ne=v.compareTo(Se.key))<0)Se=Se.left;else{if(!(ne>0)){var Le=Se.value;return Se.value=I,Le}Se=Se.right}while(Se!==null);var et={key:v,left:null,right:null,value:I,parent:H,color:0,getValue:function(){return this.value},getKey:function(){return this.key}};return ne<0?H.left=et:H.right=et,this.fixAfterInsertion(et),this.size_++,null}},{key:"fixAfterInsertion",value:function(v){var I;for(v.color=1;v!=null&&v!==this.root_&&v.parent.color===1;)zs(v)===Gl(zs(zs(v)))?Rc(I=ql(zs(zs(v))))===1?(ga(zs(v),0),ga(I,0),ga(zs(zs(v)),1),v=zs(zs(v))):(v===ql(zs(v))&&(v=zs(v),this.rotateLeft(v)),ga(zs(v),0),ga(zs(zs(v)),1),this.rotateRight(zs(zs(v)))):Rc(I=Gl(zs(zs(v))))===1?(ga(zs(v),0),ga(I,0),ga(zs(zs(v)),1),v=zs(zs(v))):(v===Gl(zs(v))&&(v=zs(v),this.rotateRight(v)),ga(zs(v),0),ga(zs(zs(v)),1),this.rotateLeft(zs(zs(v))));this.root_.color=0}},{key:"values",value:function(){var v=new yt,I=this.getFirstEntry();if(I!==null)for(v.add(I.value);(I=g.successor(I))!==null;)v.add(I.value);return v}},{key:"entrySet",value:function(){var v=new Zt,I=this.getFirstEntry();if(I!==null)for(v.add(I);(I=g.successor(I))!==null;)v.add(I);return v}},{key:"rotateLeft",value:function(v){if(v!=null){var I=v.right;v.right=I.left,I.left!=null&&(I.left.parent=v),I.parent=v.parent,v.parent==null?this.root_=I:v.parent.left===v?v.parent.left=I:v.parent.right=I,I.left=v,v.parent=I}}},{key:"rotateRight",value:function(v){if(v!=null){var I=v.left;v.left=I.right,I.right!=null&&(I.right.parent=v),I.parent=v.parent,v.parent==null?this.root_=I:v.parent.right===v?v.parent.right=I:v.parent.left=I,I.right=v,v.parent=I}}},{key:"getFirstEntry",value:function(){var v=this.root_;if(v!=null)for(;v.left!=null;)v=v.left;return v}},{key:"size",value:function(){return this.size_}},{key:"containsKey",value:function(v){for(var I=this.root_;I!==null;){var H=v.compareTo(I.key);if(H<0)I=I.left;else{if(!(H>0))return!0;I=I.right}}return!1}}],[{key:"successor",value:function(v){var I;if(v===null)return null;if(v.right!==null){for(I=v.right;I.left!==null;)I=I.left;return I}I=v.parent;for(var H=v;I!==null&&H===I.right;)H=I,I=I.parent;return I}}])}(Ac),Ih=function(){return r(function k(){d(this,k),k.constructor_.apply(this,arguments)},[{key:"find",value:function(k){return this.nodeMap.get(k)}},{key:"addNode",value:function(){if(arguments[0]instanceof Ke){var k=arguments[0],g=this.nodeMap.get(k);return g===null&&(g=this.nodeFact.createNode(k),this.nodeMap.put(k,g)),g}if(arguments[0]instanceof Bu){var v=arguments[0],I=this.nodeMap.get(v.getCoordinate());return I===null?(this.nodeMap.put(v.getCoordinate(),v),v):(I.mergeLabel(v),I)}}},{key:"print",value:function(k){for(var g=this.iterator();g.hasNext();)g.next().print(k)}},{key:"iterator",value:function(){return this.nodeMap.values().iterator()}},{key:"values",value:function(){return this.nodeMap.values()}},{key:"getBoundaryNodes",value:function(k){for(var g=new yt,v=this.iterator();v.hasNext();){var I=v.next();I.getLabel().getLocation(k)===le.BOUNDARY&&g.add(I)}return g}},{key:"add",value:function(k){var g=k.getCoordinate();this.addNode(g).add(k)}}],[{key:"constructor_",value:function(){this.nodeMap=new Vu,this.nodeFact=null;var k=arguments[0];this.nodeFact=k}}])}(),yo=function(){function k(){d(this,k)}return r(k,null,[{key:"isNorthern",value:function(g){return g===k.NE||g===k.NW}},{key:"isOpposite",value:function(g,v){return g!==v&&(g-v+4)%4===2}},{key:"commonHalfPlane",value:function(g,v){if(g===v)return g;if((g-v+4)%4===2)return-1;var I=g<v?g:v;return I===0&&(g>v?g:v)===3?3:I}},{key:"isInHalfPlane",value:function(g,v){return v===k.SE?g===k.SE||g===k.SW:g===v||g===v+1}},{key:"quadrant",value:function(){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var g=arguments[0],v=arguments[1];if(g===0&&v===0)throw new J("Cannot compute the quadrant for point ( "+g+", "+v+" )");return g>=0?v>=0?k.NE:k.SE:v>=0?k.NW:k.SW}if(arguments[0]instanceof Ke&&arguments[1]instanceof Ke){var I=arguments[0],H=arguments[1];if(H.x===I.x&&H.y===I.y)throw new J("Cannot compute the quadrant for two identical points "+I);return H.x>=I.x?H.y>=I.y?k.NE:k.SE:H.y>=I.y?k.NW:k.SW}}}])}();yo.NE=0,yo.NW=1,yo.SW=2,yo.SE=3;var Of=function(){function k(){d(this,k),k.constructor_.apply(this,arguments)}return r(k,[{key:"compareDirection",value:function(g){return this._dx===g._dx&&this._dy===g._dy?0:this._quadrant>g._quadrant?1:this._quadrant<g._quadrant?-1:Tr.index(g._p0,g._p1,this._p1)}},{key:"getDy",value:function(){return this._dy}},{key:"getCoordinate",value:function(){return this._p0}},{key:"setNode",value:function(g){this._node=g}},{key:"print",value:function(g){var v=Math.atan2(this._dy,this._dx),I=this.getClass().getName(),H=I.lastIndexOf("."),ne=I.substring(H+1);g.print("  "+ne+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+v+"   "+this._label)}},{key:"compareTo",value:function(g){var v=g;return this.compareDirection(v)}},{key:"getDirectedCoordinate",value:function(){return this._p1}},{key:"getDx",value:function(){return this._dx}},{key:"getLabel",value:function(){return this._label}},{key:"getEdge",value:function(){return this._edge}},{key:"getQuadrant",value:function(){return this._quadrant}},{key:"getNode",value:function(){return this._node}},{key:"toString",value:function(){var g=Math.atan2(this._dy,this._dx),v=this.getClass().getName(),I=v.lastIndexOf(".");return"  "+v.substring(I+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+g+"   "+this._label}},{key:"computeLabel",value:function(g){}},{key:"init",value:function(g,v){this._p0=g,this._p1=v,this._dx=v.x-g.x,this._dy=v.y-g.y,this._quadrant=yo.quadrant(this._dx,this._dy),ct.isTrue(!(this._dx===0&&this._dy===0),"EdgeEnd with identical endpoints found")}},{key:"interfaces_",get:function(){return[he]}}],[{key:"constructor_",value:function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,arguments.length===1){var g=arguments[0];this._edge=g}else if(arguments.length===3){var v=arguments[0],I=arguments[1],H=arguments[2];k.constructor_.call(this,v,I,H,null)}else if(arguments.length===4){var ne=arguments[0],Se=arguments[1],Le=arguments[2],et=arguments[3];k.constructor_.call(this,ne),this.init(Se,Le),this._label=et}}}])}(),ol=function(k){function g(){var v;return d(this,g),v=l(this,g),g.constructor_.apply(v,arguments),v}return P(g,k),r(g,[{key:"getNextMin",value:function(){return this._nextMin}},{key:"getDepth",value:function(v){return this._depth[v]}},{key:"setVisited",value:function(v){this._isVisited=v}},{key:"computeDirectedLabel",value:function(){this._label=new Bo(this._edge.getLabel()),this._isForward||this._label.flip()}},{key:"getNext",value:function(){return this._next}},{key:"setDepth",value:function(v,I){if(this._depth[v]!==-999&&this._depth[v]!==I)throw new Fr("assigned depths do not match",this.getCoordinate());this._depth[v]=I}},{key:"isInteriorAreaEdge",value:function(){for(var v=!0,I=0;I<2;I++)this._label.isArea(I)&&this._label.getLocation(I,bt.LEFT)===le.INTERIOR&&this._label.getLocation(I,bt.RIGHT)===le.INTERIOR||(v=!1);return v}},{key:"setNextMin",value:function(v){this._nextMin=v}},{key:"print",value:function(v){F(g,"print",this,1).call(this,v),v.print(" "+this._depth[bt.LEFT]+"/"+this._depth[bt.RIGHT]),v.print(" ("+this.getDepthDelta()+")"),this._isInResult&&v.print(" inResult")}},{key:"setMinEdgeRing",value:function(v){this._minEdgeRing=v}},{key:"isLineEdge",value:function(){var v=this._label.isLine(0)||this._label.isLine(1),I=!this._label.isArea(0)||this._label.allPositionsEqual(0,le.EXTERIOR),H=!this._label.isArea(1)||this._label.allPositionsEqual(1,le.EXTERIOR);return v&&I&&H}},{key:"setEdgeRing",value:function(v){this._edgeRing=v}},{key:"getMinEdgeRing",value:function(){return this._minEdgeRing}},{key:"getDepthDelta",value:function(){var v=this._edge.getDepthDelta();return this._isForward||(v=-v),v}},{key:"setInResult",value:function(v){this._isInResult=v}},{key:"getSym",value:function(){return this._sym}},{key:"isForward",value:function(){return this._isForward}},{key:"getEdge",value:function(){return this._edge}},{key:"printEdge",value:function(v){this.print(v),v.print(" "),this._isForward?this._edge.print(v):this._edge.printReverse(v)}},{key:"setSym",value:function(v){this._sym=v}},{key:"setVisitedEdge",value:function(v){this.setVisited(v),this._sym.setVisited(v)}},{key:"setEdgeDepths",value:function(v,I){var H=this.getEdge().getDepthDelta();this._isForward||(H=-H);var ne=1;v===bt.LEFT&&(ne=-1);var Se=bt.opposite(v),Le=I+H*ne;this.setDepth(v,I),this.setDepth(Se,Le)}},{key:"getEdgeRing",value:function(){return this._edgeRing}},{key:"isInResult",value:function(){return this._isInResult}},{key:"setNext",value:function(v){this._next=v}},{key:"isVisited",value:function(){return this._isVisited}}],[{key:"constructor_",value:function(){this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999];var v=arguments[0],I=arguments[1];if(Of.constructor_.call(this,v),this._isForward=I,I)this.init(v.getCoordinate(0),v.getCoordinate(1));else{var H=v.getNumPoints()-1;this.init(v.getCoordinate(H),v.getCoordinate(H-1))}this.computeDirectedLabel()}},{key:"depthFactor",value:function(v,I){return v===le.EXTERIOR&&I===le.INTERIOR?1:v===le.INTERIOR&&I===le.EXTERIOR?-1:0}}])}(Of),Rd=function(){return r(function k(){d(this,k)},[{key:"createNode",value:function(k){return new Bu(k,null)}}])}(),Pd=function(){return r(function k(){d(this,k),k.constructor_.apply(this,arguments)},[{key:"printEdges",value:function(k){k.println("Edges:");for(var g=0;g<this._edges.size();g++){k.println("edge "+g+":");var v=this._edges.get(g);v.print(k),v.eiList.print(k)}}},{key:"find",value:function(k){return this._nodes.find(k)}},{key:"addNode",value:function(){if(arguments[0]instanceof Bu){var k=arguments[0];return this._nodes.addNode(k)}if(arguments[0]instanceof Ke){var g=arguments[0];return this._nodes.addNode(g)}}},{key:"getNodeIterator",value:function(){return this._nodes.iterator()}},{key:"linkResultDirectedEdges",value:function(){for(var k=this._nodes.iterator();k.hasNext();)k.next().getEdges().linkResultDirectedEdges()}},{key:"debugPrintln",value:function(k){vr.out.println(k)}},{key:"isBoundaryNode",value:function(k,g){var v=this._nodes.find(g);if(v===null)return!1;var I=v.getLabel();return I!==null&&I.getLocation(k)===le.BOUNDARY}},{key:"linkAllDirectedEdges",value:function(){for(var k=this._nodes.iterator();k.hasNext();)k.next().getEdges().linkAllDirectedEdges()}},{key:"matchInSameDirection",value:function(k,g,v,I){return!!k.equals(v)&&Tr.index(k,g,I)===Tr.COLLINEAR&&yo.quadrant(k,g)===yo.quadrant(v,I)}},{key:"getEdgeEnds",value:function(){return this._edgeEndList}},{key:"debugPrint",value:function(k){vr.out.print(k)}},{key:"getEdgeIterator",value:function(){return this._edges.iterator()}},{key:"findEdgeInSameDirection",value:function(k,g){for(var v=0;v<this._edges.size();v++){var I=this._edges.get(v),H=I.getCoordinates();if(this.matchInSameDirection(k,g,H[0],H[1])||this.matchInSameDirection(k,g,H[H.length-1],H[H.length-2]))return I}return null}},{key:"insertEdge",value:function(k){this._edges.add(k)}},{key:"findEdgeEnd",value:function(k){for(var g=this.getEdgeEnds().iterator();g.hasNext();){var v=g.next();if(v.getEdge()===k)return v}return null}},{key:"addEdges",value:function(k){for(var g=k.iterator();g.hasNext();){var v=g.next();this._edges.add(v);var I=new ol(v,!0),H=new ol(v,!1);I.setSym(H),H.setSym(I),this.add(I),this.add(H)}}},{key:"add",value:function(k){this._nodes.add(k),this._edgeEndList.add(k)}},{key:"getNodes",value:function(){return this._nodes.values()}},{key:"findEdge",value:function(k,g){for(var v=0;v<this._edges.size();v++){var I=this._edges.get(v),H=I.getCoordinates();if(k.equals(H[0])&&g.equals(H[1]))return I}return null}}],[{key:"constructor_",value:function(){if(this._edges=new yt,this._nodes=null,this._edgeEndList=new yt,arguments.length===0)this._nodes=new Ih(new Rd);else if(arguments.length===1){var k=arguments[0];this._nodes=new Ih(k)}}},{key:"linkResultDirectedEdges",value:function(k){for(var g=k.iterator();g.hasNext();)g.next().getEdges().linkResultDirectedEdges()}}])}(),al=function(){function k(){d(this,k),k.constructor_.apply(this,arguments)}return r(k,[{key:"sortShellsAndHoles",value:function(g,v,I){for(var H=g.iterator();H.hasNext();){var ne=H.next();ne.isHole()?I.add(ne):v.add(ne)}}},{key:"computePolygons",value:function(g){for(var v=new yt,I=g.iterator();I.hasNext();){var H=I.next().toPolygon(this._geometryFactory);v.add(H)}return v}},{key:"placeFreeHoles",value:function(g,v){for(var I=v.iterator();I.hasNext();){var H=I.next();if(H.getShell()===null){var ne=k.findEdgeRingContaining(H,g);if(ne===null)throw new Fr("unable to assign hole to a shell",H.getCoordinate(0));H.setShell(ne)}}}},{key:"buildMinimalEdgeRings",value:function(g,v,I){for(var H=new yt,ne=g.iterator();ne.hasNext();){var Se=ne.next();if(Se.getMaxNodeDegree()>2){Se.linkDirectedEdgesForMinimalEdgeRings();var Le=Se.buildMinimalRings(),et=this.findShell(Le);et!==null?(this.placePolygonHoles(et,Le),v.add(et)):I.addAll(Le)}else H.add(Se)}return H}},{key:"buildMaximalEdgeRings",value:function(g){for(var v=new yt,I=g.iterator();I.hasNext();){var H=I.next();if(H.isInResult()&&H.getLabel().isArea()&&H.getEdgeRing()===null){var ne=new Ad(H,this._geometryFactory);v.add(ne),ne.setInResult()}}return v}},{key:"placePolygonHoles",value:function(g,v){for(var I=v.iterator();I.hasNext();){var H=I.next();H.isHole()&&H.setShell(g)}}},{key:"getPolygons",value:function(){return this.computePolygons(this._shellList)}},{key:"findShell",value:function(g){for(var v=0,I=null,H=g.iterator();H.hasNext();){var ne=H.next();ne.isHole()||(I=ne,v++)}return ct.isTrue(v<=1,"found two shells in MinimalEdgeRing list"),I}},{key:"add",value:function(){if(arguments.length===1){var g=arguments[0];this.add(g.getEdgeEnds(),g.getNodes())}else if(arguments.length===2){var v=arguments[0],I=arguments[1];Pd.linkResultDirectedEdges(I);var H=this.buildMaximalEdgeRings(v),ne=new yt,Se=this.buildMinimalEdgeRings(H,this._shellList,ne);this.sortShellsAndHoles(Se,this._shellList,ne),this.placeFreeHoles(this._shellList,ne)}}}],[{key:"constructor_",value:function(){this._geometryFactory=null,this._shellList=new yt;var g=arguments[0];this._geometryFactory=g}},{key:"findEdgeRingContaining",value:function(g,v){for(var I=g.getLinearRing(),H=I.getEnvelopeInternal(),ne=I.getCoordinateN(0),Se=null,Le=null,et=v.iterator();et.hasNext();){var Et=et.next(),tn=Et.getLinearRing(),vn=tn.getEnvelopeInternal();if(!vn.equals(H)&&vn.contains(H)){ne=jt.ptNotInList(I.getCoordinates(),tn.getCoordinates());var or=!1;jl.isInRing(ne,tn.getCoordinates())&&(or=!0),or&&(Se===null||Le.contains(vn))&&(Le=(Se=Et).getLinearRing().getEnvelopeInternal())}}return Se}}])}(),Pc=function(){return r(function k(){d(this,k)},[{key:"getBounds",value:function(){}}])}(),na=function(){return r(function k(){d(this,k),k.constructor_.apply(this,arguments)},[{key:"getItem",value:function(){return this._item}},{key:"getBounds",value:function(){return this._bounds}},{key:"interfaces_",get:function(){return[Pc,ce]}}],[{key:"constructor_",value:function(){this._bounds=null,this._item=null;var k=arguments[0],g=arguments[1];this._bounds=k,this._item=g}}])}(),$u=function(){return r(function k(){d(this,k),k.constructor_.apply(this,arguments)},[{key:"poll",value:function(){if(this.isEmpty())return null;var k=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),k}},{key:"size",value:function(){return this._size}},{key:"reorder",value:function(k){for(var g=null,v=this._items.get(k);2*k<=this._size&&((g=2*k)!==this._size&&this._items.get(g+1).compareTo(this._items.get(g))<0&&g++,this._items.get(g).compareTo(v)<0);k=g)this._items.set(k,this._items.get(g));this._items.set(k,v)}},{key:"clear",value:function(){this._size=0,this._items.clear()}},{key:"peek",value:function(){return this.isEmpty()?null:this._items.get(1)}},{key:"isEmpty",value:function(){return this._size===0}},{key:"add",value:function(k){this._items.add(null),this._size+=1;var g=this._size;for(this._items.set(0,k);k.compareTo(this._items.get(Math.trunc(g/2)))<0;g/=2)this._items.set(g,this._items.get(Math.trunc(g/2)));this._items.set(g,k)}}],[{key:"constructor_",value:function(){this._size=null,this._items=null,this._size=0,this._items=new yt,this._items.add(null)}}])}(),Df=function(){return r(function k(){d(this,k)},[{key:"insert",value:function(k,g){}},{key:"remove",value:function(k,g){}},{key:"query",value:function(){}}])}(),ra=function(){return r(function k(){d(this,k),k.constructor_.apply(this,arguments)},[{key:"getLevel",value:function(){return this._level}},{key:"size",value:function(){return this._childBoundables.size()}},{key:"getChildBoundables",value:function(){return this._childBoundables}},{key:"addChildBoundable",value:function(k){ct.isTrue(this._bounds===null),this._childBoundables.add(k)}},{key:"isEmpty",value:function(){return this._childBoundables.isEmpty()}},{key:"getBounds",value:function(){return this._bounds===null&&(this._bounds=this.computeBounds()),this._bounds}},{key:"interfaces_",get:function(){return[Pc,ce]}}],[{key:"constructor_",value:function(){if(this._childBoundables=new yt,this._bounds=null,this._level=null,arguments.length!==0){if(arguments.length===1){var k=arguments[0];this._level=k}}}}])}(),Ua={reverseOrder:function(){return{compare:function(k,g){return g.compareTo(k)}}},min:function(k){return Ua.sort(k),k.get(0)},sort:function(k,g){var v=k.toArray();g?dt.sort(v,g):dt.sort(v);for(var I=k.iterator(),H=0,ne=v.length;H<ne;H++)I.next(),I.set(v[H])},singletonList:function(k){var g=new yt;return g.add(k),g}},_a=function(){function k(){d(this,k)}return r(k,null,[{key:"maxDistance",value:function(g,v,I,H,ne,Se,Le,et){var Et=k.distance(g,v,ne,Se);return Et=Math.max(Et,k.distance(g,v,Le,et)),Et=Math.max(Et,k.distance(I,H,ne,Se)),Et=Math.max(Et,k.distance(I,H,Le,et))}},{key:"distance",value:function(g,v,I,H){var ne=I-g,Se=H-v;return Math.sqrt(ne*ne+Se*Se)}},{key:"maximumDistance",value:function(g,v){var I=Math.min(g.getMinX(),v.getMinX()),H=Math.min(g.getMinY(),v.getMinY()),ne=Math.max(g.getMaxX(),v.getMaxX()),Se=Math.max(g.getMaxY(),v.getMaxY());return k.distance(I,H,ne,Se)}},{key:"minMaxDistance",value:function(g,v){var I=g.getMinX(),H=g.getMinY(),ne=g.getMaxX(),Se=g.getMaxY(),Le=v.getMinX(),et=v.getMinY(),Et=v.getMaxX(),tn=v.getMaxY(),vn=k.maxDistance(I,H,I,Se,Le,et,Le,tn);return vn=Math.min(vn,k.maxDistance(I,H,I,Se,Le,et,Et,et)),vn=Math.min(vn,k.maxDistance(I,H,I,Se,Et,tn,Le,tn)),vn=Math.min(vn,k.maxDistance(I,H,I,Se,Et,tn,Et,et)),vn=Math.min(vn,k.maxDistance(I,H,ne,H,Le,et,Le,tn)),vn=Math.min(vn,k.maxDistance(I,H,ne,H,Le,et,Et,et)),vn=Math.min(vn,k.maxDistance(I,H,ne,H,Et,tn,Le,tn)),vn=Math.min(vn,k.maxDistance(I,H,ne,H,Et,tn,Et,et)),vn=Math.min(vn,k.maxDistance(ne,Se,I,Se,Le,et,Le,tn)),vn=Math.min(vn,k.maxDistance(ne,Se,I,Se,Le,et,Et,et)),vn=Math.min(vn,k.maxDistance(ne,Se,I,Se,Et,tn,Le,tn)),vn=Math.min(vn,k.maxDistance(ne,Se,I,Se,Et,tn,Et,et)),vn=Math.min(vn,k.maxDistance(ne,Se,ne,H,Le,et,Le,tn)),vn=Math.min(vn,k.maxDistance(ne,Se,ne,H,Le,et,Et,et)),vn=Math.min(vn,k.maxDistance(ne,Se,ne,H,Et,tn,Le,tn)),vn=Math.min(vn,k.maxDistance(ne,Se,ne,H,Et,tn,Et,et))}}])}(),pu=function(){function k(){d(this,k),k.constructor_.apply(this,arguments)}return r(k,[{key:"maximumDistance",value:function(){return _a.maximumDistance(this._boundable1.getBounds(),this._boundable2.getBounds())}},{key:"expandToQueue",value:function(g,v){var I=k.isComposite(this._boundable1),H=k.isComposite(this._boundable2);if(I&&H)return k.area(this._boundable1)>k.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,!1,g,v),null):(this.expand(this._boundable2,this._boundable1,!0,g,v),null);if(I)return this.expand(this._boundable1,this._boundable2,!1,g,v),null;if(H)return this.expand(this._boundable2,this._boundable1,!0,g,v),null;throw new J("neither boundable is composite")}},{key:"isLeaves",value:function(){return!(k.isComposite(this._boundable1)||k.isComposite(this._boundable2))}},{key:"compareTo",value:function(g){var v=g;return this._distance<v._distance?-1:this._distance>v._distance?1:0}},{key:"expand",value:function(g,v,I,H,ne){for(var Se=g.getChildBoundables().iterator();Se.hasNext();){var Le=Se.next(),et=null;(et=I?new k(v,Le,this._itemDistance):new k(Le,v,this._itemDistance)).getDistance()<ne&&H.add(et)}}},{key:"getBoundable",value:function(g){return g===0?this._boundable1:this._boundable2}},{key:"getDistance",value:function(){return this._distance}},{key:"distance",value:function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())}},{key:"interfaces_",get:function(){return[he]}}],[{key:"constructor_",value:function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var g=arguments[0],v=arguments[1],I=arguments[2];this._boundable1=g,this._boundable2=v,this._itemDistance=I,this._distance=this.distance()}},{key:"area",value:function(g){return g.getBounds().getArea()}},{key:"isComposite",value:function(g){return g instanceof ra}}])}(),Hu=function(){return r(function k(){d(this,k)},[{key:"visitItem",value:function(k){}}])}(),ja=function(){function k(){d(this,k),k.constructor_.apply(this,arguments)}return r(k,[{key:"queryInternal",value:function(){if(Ot(arguments[2],Hu)&&arguments[0]instanceof Object&&arguments[1]instanceof ra)for(var g=arguments[0],v=arguments[2],I=arguments[1].getChildBoundables(),H=0;H<I.size();H++){var ne=I.get(H);this.getIntersectsOp().intersects(ne.getBounds(),g)&&(ne instanceof ra?this.queryInternal(g,ne,v):ne instanceof na?v.visitItem(ne.getItem()):ct.shouldNeverReachHere())}else if(Ot(arguments[2],Vn)&&arguments[0]instanceof Object&&arguments[1]instanceof ra)for(var Se=arguments[0],Le=arguments[2],et=arguments[1].getChildBoundables(),Et=0;Et<et.size();Et++){var tn=et.get(Et);this.getIntersectsOp().intersects(tn.getBounds(),Se)&&(tn instanceof ra?this.queryInternal(Se,tn,Le):tn instanceof na?Le.add(tn.getItem()):ct.shouldNeverReachHere())}}},{key:"getNodeCapacity",value:function(){return this._nodeCapacity}},{key:"lastNode",value:function(g){return g.get(g.size()-1)}},{key:"size",value:function(){if(arguments.length===0)return this.isEmpty()?0:(this.build(),this.size(this._root));if(arguments.length===1){for(var g=0,v=arguments[0].getChildBoundables().iterator();v.hasNext();){var I=v.next();I instanceof ra?g+=this.size(I):I instanceof na&&(g+=1)}return g}}},{key:"removeItem",value:function(g,v){for(var I=null,H=g.getChildBoundables().iterator();H.hasNext();){var ne=H.next();ne instanceof na&&ne.getItem()===v&&(I=ne)}return I!==null&&(g.getChildBoundables().remove(I),!0)}},{key:"itemsTree",value:function(){if(arguments.length===0){this.build();var g=this.itemsTree(this._root);return g===null?new yt:g}if(arguments.length===1){for(var v=arguments[0],I=new yt,H=v.getChildBoundables().iterator();H.hasNext();){var ne=H.next();if(ne instanceof ra){var Se=this.itemsTree(ne);Se!==null&&I.add(Se)}else ne instanceof na?I.add(ne.getItem()):ct.shouldNeverReachHere()}return I.size()<=0?null:I}}},{key:"insert",value:function(g,v){ct.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new na(g,v))}},{key:"boundablesAtLevel",value:function(){if(arguments.length===1){var g=arguments[0],v=new yt;return this.boundablesAtLevel(g,this._root,v),v}if(arguments.length===3){var I=arguments[0],H=arguments[1],ne=arguments[2];if(ct.isTrue(I>-2),H.getLevel()===I)return ne.add(H),null;for(var Se=H.getChildBoundables().iterator();Se.hasNext();){var Le=Se.next();Le instanceof ra?this.boundablesAtLevel(I,Le,ne):(ct.isTrue(Le instanceof na),I===-1&&ne.add(Le))}return null}}},{key:"query",value:function(){if(arguments.length===1){var g=arguments[0];this.build();var v=new yt;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),g)&&this.queryInternal(g,this._root,v),v}if(arguments.length===2){var I=arguments[0],H=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),I)&&this.queryInternal(I,this._root,H)}}},{key:"build",value:function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0}},{key:"getRoot",value:function(){return this.build(),this._root}},{key:"remove",value:function(){if(arguments.length===2){var g=arguments[0],v=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),g)&&this.remove(g,this._root,v)}if(arguments.length===3){var I=arguments[0],H=arguments[1],ne=arguments[2],Se=this.removeItem(H,ne);if(Se)return!0;for(var Le=null,et=H.getChildBoundables().iterator();et.hasNext();){var Et=et.next();if(this.getIntersectsOp().intersects(Et.getBounds(),I)&&Et instanceof ra&&(Se=this.remove(I,Et,ne))){Le=Et;break}}return Le!==null&&Le.getChildBoundables().isEmpty()&&H.getChildBoundables().remove(Le),Se}}},{key:"createHigherLevels",value:function(g,v){ct.isTrue(!g.isEmpty());var I=this.createParentBoundables(g,v+1);return I.size()===1?I.get(0):this.createHigherLevels(I,v+1)}},{key:"depth",value:function(){if(arguments.length===0)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(arguments.length===1){for(var g=0,v=arguments[0].getChildBoundables().iterator();v.hasNext();){var I=v.next();if(I instanceof ra){var H=this.depth(I);H>g&&(g=H)}}return g+1}}},{key:"createParentBoundables",value:function(g,v){ct.isTrue(!g.isEmpty());var I=new yt;I.add(this.createNode(v));var H=new yt(g);Ua.sort(H,this.getComparator());for(var ne=H.iterator();ne.hasNext();){var Se=ne.next();this.lastNode(I).getChildBoundables().size()===this.getNodeCapacity()&&I.add(this.createNode(v)),this.lastNode(I).addChildBoundable(Se)}return I}},{key:"isEmpty",value:function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()}},{key:"interfaces_",get:function(){return[ce]}}],[{key:"constructor_",value:function(){if(this._root=null,this._built=!1,this._itemBoundables=new yt,this._nodeCapacity=null,arguments.length===0)k.constructor_.call(this,k.DEFAULT_NODE_CAPACITY);else if(arguments.length===1){var g=arguments[0];ct.isTrue(g>1,"Node capacity must be greater than 1"),this._nodeCapacity=g}}},{key:"compareDoubles",value:function(g,v){return g>v?1:g<v?-1:0}}])}();ja.IntersectsOp=function(){},ja.DEFAULT_NODE_CAPACITY=10;var Bi=function(){return r(function k(){d(this,k)},[{key:"distance",value:function(k,g){}}])}(),So=function(k){function g(){var v;return d(this,g),v=l(this,g),g.constructor_.apply(v,arguments),v}return P(g,k),r(g,[{key:"createParentBoundablesFromVerticalSlices",value:function(v,I){ct.isTrue(v.length>0);for(var H=new yt,ne=0;ne<v.length;ne++)H.addAll(this.createParentBoundablesFromVerticalSlice(v[ne],I));return H}},{key:"nearestNeighbourK",value:function(){if(arguments.length===2){var v=arguments[0],I=arguments[1];return this.nearestNeighbourK(v,Ve.POSITIVE_INFINITY,I)}if(arguments.length===3){var H=arguments[0],ne=arguments[2],Se=arguments[1],Le=new $u;Le.add(H);for(var et=new $u;!Le.isEmpty()&&Se>=0;){var Et=Le.poll(),tn=Et.getDistance();if(tn>=Se)break;Et.isLeaves()?et.size()<ne?et.add(Et):(et.peek().getDistance()>tn&&(et.poll(),et.add(Et)),Se=et.peek().getDistance()):Et.expandToQueue(Le,Se)}return g.getItems(et)}}},{key:"createNode",value:function(v){return new em(v)}},{key:"size",value:function(){return arguments.length===0?F(g,"size",this,1).call(this):F(g,"size",this,1).apply(this,arguments)}},{key:"insert",value:function(){if(!(arguments.length===2&&arguments[1]instanceof Object&&arguments[0]instanceof xn))return F(g,"insert",this,1).apply(this,arguments);var v=arguments[0],I=arguments[1];if(v.isNull())return null;F(g,"insert",this,1).call(this,v,I)}},{key:"getIntersectsOp",value:function(){return g.intersectsOp}},{key:"verticalSlices",value:function(v,I){for(var H=Math.trunc(Math.ceil(v.size()/I)),ne=new Array(I).fill(null),Se=v.iterator(),Le=0;Le<I;Le++){ne[Le]=new yt;for(var et=0;Se.hasNext()&&et<H;){var Et=Se.next();ne[Le].add(Et),et++}}return ne}},{key:"query",value:function(){if(arguments.length===1){var v=arguments[0];return F(g,"query",this,1).call(this,v)}if(arguments.length===2){var I=arguments[0],H=arguments[1];F(g,"query",this,1).call(this,I,H)}}},{key:"getComparator",value:function(){return g.yComparator}},{key:"createParentBoundablesFromVerticalSlice",value:function(v,I){return F(g,"createParentBoundables",this,1).call(this,v,I)}},{key:"remove",value:function(){if(arguments.length===2&&arguments[1]instanceof Object&&arguments[0]instanceof xn){var v=arguments[0],I=arguments[1];return F(g,"remove",this,1).call(this,v,I)}return F(g,"remove",this,1).apply(this,arguments)}},{key:"depth",value:function(){return arguments.length===0?F(g,"depth",this,1).call(this):F(g,"depth",this,1).apply(this,arguments)}},{key:"createParentBoundables",value:function(v,I){ct.isTrue(!v.isEmpty());var H=Math.trunc(Math.ceil(v.size()/this.getNodeCapacity())),ne=new yt(v);Ua.sort(ne,g.xComparator);var Se=this.verticalSlices(ne,Math.trunc(Math.ceil(Math.sqrt(H))));return this.createParentBoundablesFromVerticalSlices(Se,I)}},{key:"nearestNeighbour",value:function(){if(arguments.length===1){if(Ot(arguments[0],Bi)){var v=arguments[0];if(this.isEmpty())return null;var I=new pu(this.getRoot(),this.getRoot(),v);return this.nearestNeighbour(I)}if(arguments[0]instanceof pu){var H=arguments[0],ne=Ve.POSITIVE_INFINITY,Se=null,Le=new $u;for(Le.add(H);!Le.isEmpty()&&ne>0;){var et=Le.poll(),Et=et.getDistance();if(Et>=ne)break;et.isLeaves()?(ne=Et,Se=et):et.expandToQueue(Le,ne)}return Se===null?null:[Se.getBoundable(0).getItem(),Se.getBoundable(1).getItem()]}}else{if(arguments.length===2){var tn=arguments[0],vn=arguments[1];if(this.isEmpty()||tn.isEmpty())return null;var or=new pu(this.getRoot(),tn.getRoot(),vn);return this.nearestNeighbour(or)}if(arguments.length===3){var $r=arguments[2],Xr=new na(arguments[0],arguments[1]),_i=new pu(this.getRoot(),Xr,$r);return this.nearestNeighbour(_i)[0]}if(arguments.length===4){var fs=arguments[2],ss=arguments[3],rs=new na(arguments[0],arguments[1]),Co=new pu(this.getRoot(),rs,fs);return this.nearestNeighbourK(Co,ss)}}}},{key:"isWithinDistance",value:function(){if(arguments.length===2){var v=arguments[0],I=arguments[1],H=Ve.POSITIVE_INFINITY,ne=new $u;for(ne.add(v);!ne.isEmpty();){var Se=ne.poll(),Le=Se.getDistance();if(Le>I)return!1;if(Se.maximumDistance()<=I)return!0;if(Se.isLeaves()){if((H=Le)<=I)return!0}else Se.expandToQueue(ne,H)}return!1}if(arguments.length===3){var et=arguments[0],Et=arguments[1],tn=arguments[2],vn=new pu(this.getRoot(),et.getRoot(),Et);return this.isWithinDistance(vn,tn)}}},{key:"interfaces_",get:function(){return[Df,ce]}}],[{key:"constructor_",value:function(){if(arguments.length===0)g.constructor_.call(this,g.DEFAULT_NODE_CAPACITY);else if(arguments.length===1){var v=arguments[0];ja.constructor_.call(this,v)}}},{key:"centreX",value:function(v){return g.avg(v.getMinX(),v.getMaxX())}},{key:"avg",value:function(v,I){return(v+I)/2}},{key:"getItems",value:function(v){for(var I=new Array(v.size()).fill(null),H=0;!v.isEmpty();){var ne=v.poll();I[H]=ne.getBoundable(0).getItem(),H++}return I}},{key:"centreY",value:function(v){return g.avg(v.getMinY(),v.getMaxY())}}])}(ja),em=function(k){function g(){var v;return d(this,g),v=l(this,g),g.constructor_.apply(v,arguments),v}return P(g,k),r(g,[{key:"computeBounds",value:function(){for(var v=null,I=this.getChildBoundables().iterator();I.hasNext();){var H=I.next();v===null?v=new xn(H.getBounds()):v.expandToInclude(H.getBounds())}return v}}],[{key:"constructor_",value:function(){var v=arguments[0];ra.constructor_.call(this,v)}}])}(ra);So.STRtreeNode=em,So.xComparator=new(function(){return r(function k(){d(this,k)},[{key:"interfaces_",get:function(){return[We]}},{key:"compare",value:function(k,g){return ja.compareDoubles(So.centreX(k.getBounds()),So.centreX(g.getBounds()))}}])}()),So.yComparator=new(function(){return r(function k(){d(this,k)},[{key:"interfaces_",get:function(){return[We]}},{key:"compare",value:function(k,g){return ja.compareDoubles(So.centreY(k.getBounds()),So.centreY(g.getBounds()))}}])}()),So.intersectsOp=new(function(){return r(function k(){d(this,k)},[{key:"interfaces_",get:function(){return[IntersectsOp]}},{key:"intersects",value:function(k,g){return k.intersects(g)}}])}()),So.DEFAULT_NODE_CAPACITY=10;var zf=function(){function k(){d(this,k)}return r(k,null,[{key:"relativeSign",value:function(g,v){return g<v?-1:g>v?1:0}},{key:"compare",value:function(g,v,I){if(v.equals2D(I))return 0;var H=k.relativeSign(v.x,I.x),ne=k.relativeSign(v.y,I.y);switch(g){case 0:return k.compareValue(H,ne);case 1:return k.compareValue(ne,H);case 2:return k.compareValue(ne,-H);case 3:return k.compareValue(-H,ne);case 4:return k.compareValue(-H,-ne);case 5:return k.compareValue(-ne,-H);case 6:return k.compareValue(-ne,H);case 7:return k.compareValue(H,-ne)}return ct.shouldNeverReachHere("invalid octant value"),0}},{key:"compareValue",value:function(g,v){return g<0?-1:g>0?1:v<0?-1:v>0?1:0}}])}(),Dr=function(){return r(function k(){d(this,k),k.constructor_.apply(this,arguments)},[{key:"getCoordinate",value:function(){return this.coord}},{key:"print",value:function(k){k.print(this.coord),k.print(" seg # = "+this.segmentIndex)}},{key:"compareTo",value:function(k){var g=k;return this.segmentIndex<g.segmentIndex?-1:this.segmentIndex>g.segmentIndex?1:this.coord.equals2D(g.coord)?0:this._isInterior?g._isInterior?zf.compare(this._segmentOctant,this.coord,g.coord):1:-1}},{key:"isEndPoint",value:function(k){return this.segmentIndex===0&&!this._isInterior||this.segmentIndex===k}},{key:"toString",value:function(){return this.segmentIndex+":"+this.coord.toString()}},{key:"isInterior",value:function(){return this._isInterior}},{key:"interfaces_",get:function(){return[he]}}],[{key:"constructor_",value:function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var k=arguments[0],g=arguments[1],v=arguments[2],I=arguments[3];this._segString=k,this.coord=new Ke(g),this.segmentIndex=v,this._segmentOctant=I,this._isInterior=!g.equals2D(k.getCoordinate(v))}}])}(),kh=function(){return r(function k(){d(this,k)},[{key:"hasNext",value:function(){}},{key:"next",value:function(){}},{key:"remove",value:function(){}}])}(),Ld=function(){return r(function k(){d(this,k),k.constructor_.apply(this,arguments)},[{key:"getSplitCoordinates",value:function(){var k=new Lr;this.addEndpoints();for(var g=this.iterator(),v=g.next();g.hasNext();){var I=g.next();this.addEdgeCoordinates(v,I,k),v=I}return k.toCoordinateArray()}},{key:"addCollapsedNodes",value:function(){var k=new yt;this.findCollapsesFromInsertedNodes(k),this.findCollapsesFromExistingVertices(k);for(var g=k.iterator();g.hasNext();){var v=g.next().intValue();this.add(this._edge.getCoordinate(v),v)}}},{key:"createSplitEdgePts",value:function(k,g){var v=g.segmentIndex-k.segmentIndex+2;if(v===2)return[new Ke(k.coord),new Ke(g.coord)];var I=this._edge.getCoordinate(g.segmentIndex),H=g.isInterior()||!g.coord.equals2D(I);H||v--;var ne=new Array(v).fill(null),Se=0;ne[Se++]=new Ke(k.coord);for(var Le=k.segmentIndex+1;Le<=g.segmentIndex;Le++)ne[Se++]=this._edge.getCoordinate(Le);return H&&(ne[Se]=new Ke(g.coord)),ne}},{key:"print",value:function(k){k.println("Intersections:");for(var g=this.iterator();g.hasNext();)g.next().print(k)}},{key:"findCollapsesFromExistingVertices",value:function(k){for(var g=0;g<this._edge.size()-2;g++){var v=this._edge.getCoordinate(g);this._edge.getCoordinate(g+1);var I=this._edge.getCoordinate(g+2);v.equals2D(I)&&k.add(Sr.valueOf(g+1))}}},{key:"addEdgeCoordinates",value:function(k,g,v){var I=this.createSplitEdgePts(k,g);v.add(I,!1)}},{key:"iterator",value:function(){return this._nodeMap.values().iterator()}},{key:"addSplitEdges",value:function(k){this.addEndpoints(),this.addCollapsedNodes();for(var g=this.iterator(),v=g.next();g.hasNext();){var I=g.next(),H=this.createSplitEdge(v,I);k.add(H),v=I}}},{key:"findCollapseIndex",value:function(k,g,v){if(!k.coord.equals2D(g.coord))return!1;var I=g.segmentIndex-k.segmentIndex;return g.isInterior()||I--,I===1&&(v[0]=k.segmentIndex+1,!0)}},{key:"findCollapsesFromInsertedNodes",value:function(k){for(var g=new Array(1).fill(null),v=this.iterator(),I=v.next();v.hasNext();){var H=v.next();this.findCollapseIndex(I,H,g)&&k.add(Sr.valueOf(g[0])),I=H}}},{key:"getEdge",value:function(){return this._edge}},{key:"addEndpoints",value:function(){var k=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(k),k)}},{key:"createSplitEdge",value:function(k,g){var v=this.createSplitEdgePts(k,g);return new Ga(v,this._edge.getData())}},{key:"add",value:function(k,g){var v=new Dr(this._edge,k,g,this._edge.getSegmentOctant(g)),I=this._nodeMap.get(v);return I!==null?(ct.isTrue(I.coord.equals2D(k),"Found equal nodes with different coordinates"),I):(this._nodeMap.put(v,v),v)}},{key:"checkSplitEdgesCorrectness",value:function(k){var g=this._edge.getCoordinates(),v=k.get(0).getCoordinate(0);if(!v.equals2D(g[0]))throw new ft("bad split edge start point at "+v);var I=k.get(k.size()-1).getCoordinates(),H=I[I.length-1];if(!H.equals2D(g[g.length-1]))throw new ft("bad split edge end point at "+H)}}],[{key:"constructor_",value:function(){this._nodeMap=new Vu,this._edge=null;var k=arguments[0];this._edge=k}}])}(),Uu=function(){function k(){d(this,k)}return r(k,null,[{key:"octant",value:function(){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var g=arguments[0],v=arguments[1];if(g===0&&v===0)throw new J("Cannot compute the octant for point ( "+g+", "+v+" )");var I=Math.abs(g),H=Math.abs(v);return g>=0?v>=0?I>=H?0:1:I>=H?7:6:v>=0?I>=H?3:2:I>=H?4:5}if(arguments[0]instanceof Ke&&arguments[1]instanceof Ke){var ne=arguments[0],Se=arguments[1],Le=Se.x-ne.x,et=Se.y-ne.y;if(Le===0&&et===0)throw new J("Cannot compute the octant for two identical points "+ne);return k.octant(Le,et)}}}])}(),Ma=function(){return r(function k(){d(this,k)},[{key:"getCoordinates",value:function(){}},{key:"size",value:function(){}},{key:"getCoordinate",value:function(k){}},{key:"isClosed",value:function(){}},{key:"setData",value:function(k){}},{key:"getData",value:function(){}}])}(),Nf=function(){return r(function k(){d(this,k)},[{key:"addIntersection",value:function(k,g){}},{key:"interfaces_",get:function(){return[Ma]}}])}(),Ga=function(){function k(){d(this,k),k.constructor_.apply(this,arguments)}return r(k,[{key:"getCoordinates",value:function(){return this._pts}},{key:"size",value:function(){return this._pts.length}},{key:"getCoordinate",value:function(g){return this._pts[g]}},{key:"isClosed",value:function(){return this._pts[0].equals(this._pts[this._pts.length-1])}},{key:"getSegmentOctant",value:function(g){return g===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(g),this.getCoordinate(g+1))}},{key:"setData",value:function(g){this._data=g}},{key:"safeOctant",value:function(g,v){return g.equals2D(v)?0:Uu.octant(g,v)}},{key:"getData",value:function(){return this._data}},{key:"addIntersection",value:function(){if(arguments.length===2){var g=arguments[0],v=arguments[1];this.addIntersectionNode(g,v)}else if(arguments.length===4){var I=arguments[1],H=arguments[3],ne=new Ke(arguments[0].getIntersection(H));this.addIntersection(ne,I)}}},{key:"toString",value:function(){return fu.toLineString(new vi(this._pts))}},{key:"getNodeList",value:function(){return this._nodeList}},{key:"addIntersectionNode",value:function(g,v){var I=v,H=I+1;if(H<this._pts.length){var ne=this._pts[H];g.equals2D(ne)&&(I=H)}return this._nodeList.add(g,I)}},{key:"addIntersections",value:function(g,v,I){for(var H=0;H<g.getIntersectionNum();H++)this.addIntersection(g,v,I,H)}},{key:"interfaces_",get:function(){return[Nf]}}],[{key:"constructor_",value:function(){this._nodeList=new Ld(this),this._pts=null,this._data=null;var g=arguments[0],v=arguments[1];this._pts=g,this._data=v}},{key:"getNodedSubstrings",value:function(){if(arguments.length===1){var g=arguments[0],v=new yt;return k.getNodedSubstrings(g,v),v}if(arguments.length===2)for(var I=arguments[1],H=arguments[0].iterator();H.hasNext();)H.next().getNodeList().addSplitEdges(I)}}])}(),nr=function(){function k(){d(this,k),k.constructor_.apply(this,arguments)}return r(k,[{key:"minX",value:function(){return Math.min(this.p0.x,this.p1.x)}},{key:"orientationIndex",value:function(){if(arguments[0]instanceof k){var g=arguments[0],v=Tr.index(this.p0,this.p1,g.p0),I=Tr.index(this.p0,this.p1,g.p1);return v>=0&&I>=0||v<=0&&I<=0?Math.max(v,I):0}if(arguments[0]instanceof Ke){var H=arguments[0];return Tr.index(this.p0,this.p1,H)}}},{key:"toGeometry",value:function(g){return g.createLineString([this.p0,this.p1])}},{key:"isVertical",value:function(){return this.p0.x===this.p1.x}},{key:"equals",value:function(g){if(!(g instanceof k))return!1;var v=g;return this.p0.equals(v.p0)&&this.p1.equals(v.p1)}},{key:"intersection",value:function(g){var v=new Ul;return v.computeIntersection(this.p0,this.p1,g.p0,g.p1),v.hasIntersection()?v.getIntersection(0):null}},{key:"project",value:function(){if(arguments[0]instanceof Ke){var g=arguments[0];if(g.equals(this.p0)||g.equals(this.p1))return new Ke(g);var v=this.projectionFactor(g),I=new Ke;return I.x=this.p0.x+v*(this.p1.x-this.p0.x),I.y=this.p0.y+v*(this.p1.y-this.p0.y),I}if(arguments[0]instanceof k){var H=arguments[0],ne=this.projectionFactor(H.p0),Se=this.projectionFactor(H.p1);if(ne>=1&&Se>=1||ne<=0&&Se<=0)return null;var Le=this.project(H.p0);ne<0&&(Le=this.p0),ne>1&&(Le=this.p1);var et=this.project(H.p1);return Se<0&&(et=this.p0),Se>1&&(et=this.p1),new k(Le,et)}}},{key:"normalize",value:function(){this.p1.compareTo(this.p0)<0&&this.reverse()}},{key:"angle",value:function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)}},{key:"getCoordinate",value:function(g){return g===0?this.p0:this.p1}},{key:"distancePerpendicular",value:function(g){return ds.pointToLinePerpendicular(g,this.p0,this.p1)}},{key:"minY",value:function(){return Math.min(this.p0.y,this.p1.y)}},{key:"midPoint",value:function(){return k.midPoint(this.p0,this.p1)}},{key:"projectionFactor",value:function(g){if(g.equals(this.p0))return 0;if(g.equals(this.p1))return 1;var v=this.p1.x-this.p0.x,I=this.p1.y-this.p0.y,H=v*v+I*I;return H<=0?Ve.NaN:((g.x-this.p0.x)*v+(g.y-this.p0.y)*I)/H}},{key:"closestPoints",value:function(g){var v=this.intersection(g);if(v!==null)return[v,v];var I=new Array(2).fill(null),H=Ve.MAX_VALUE,ne=null,Se=this.closestPoint(g.p0);H=Se.distance(g.p0),I[0]=Se,I[1]=g.p0;var Le=this.closestPoint(g.p1);(ne=Le.distance(g.p1))<H&&(H=ne,I[0]=Le,I[1]=g.p1);var et=g.closestPoint(this.p0);(ne=et.distance(this.p0))<H&&(H=ne,I[0]=this.p0,I[1]=et);var Et=g.closestPoint(this.p1);return(ne=Et.distance(this.p1))<H&&(H=ne,I[0]=this.p1,I[1]=Et),I}},{key:"closestPoint",value:function(g){var v=this.projectionFactor(g);return v>0&&v<1?this.project(g):this.p0.distance(g)<this.p1.distance(g)?this.p0:this.p1}},{key:"maxX",value:function(){return Math.max(this.p0.x,this.p1.x)}},{key:"getLength",value:function(){return this.p0.distance(this.p1)}},{key:"compareTo",value:function(g){var v=g,I=this.p0.compareTo(v.p0);return I!==0?I:this.p1.compareTo(v.p1)}},{key:"reverse",value:function(){var g=this.p0;this.p0=this.p1,this.p1=g}},{key:"equalsTopo",value:function(g){return this.p0.equals(g.p0)&&this.p1.equals(g.p1)||this.p0.equals(g.p1)&&this.p1.equals(g.p0)}},{key:"lineIntersection",value:function(g){return Xn.intersection(this.p0,this.p1,g.p0,g.p1)}},{key:"maxY",value:function(){return Math.max(this.p0.y,this.p1.y)}},{key:"pointAlongOffset",value:function(g,v){var I=this.p0.x+g*(this.p1.x-this.p0.x),H=this.p0.y+g*(this.p1.y-this.p0.y),ne=this.p1.x-this.p0.x,Se=this.p1.y-this.p0.y,Le=Math.sqrt(ne*ne+Se*Se),et=0,Et=0;if(v!==0){if(Le<=0)throw new IllegalStateException("Cannot compute offset from zero-length line segment");et=v*ne/Le,Et=v*Se/Le}return new Ke(I-Et,H+et)}},{key:"setCoordinates",value:function(){if(arguments.length===1){var g=arguments[0];this.setCoordinates(g.p0,g.p1)}else if(arguments.length===2){var v=arguments[0],I=arguments[1];this.p0.x=v.x,this.p0.y=v.y,this.p1.x=I.x,this.p1.y=I.y}}},{key:"segmentFraction",value:function(g){var v=this.projectionFactor(g);return v<0?v=0:(v>1||Ve.isNaN(v))&&(v=1),v}},{key:"toString",value:function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"}},{key:"isHorizontal",value:function(){return this.p0.y===this.p1.y}},{key:"reflect",value:function(g){var v=this.p1.getY()-this.p0.getY(),I=this.p0.getX()-this.p1.getX(),H=this.p0.getY()*(this.p1.getX()-this.p0.getX())-this.p0.getX()*(this.p1.getY()-this.p0.getY()),ne=v*v+I*I,Se=v*v-I*I,Le=g.getX(),et=g.getY();return new Ke((-Se*Le-2*v*I*et-2*v*H)/ne,(Se*et-2*v*I*Le-2*I*H)/ne)}},{key:"distance",value:function(){if(arguments[0]instanceof k){var g=arguments[0];return ds.segmentToSegment(this.p0,this.p1,g.p0,g.p1)}if(arguments[0]instanceof Ke){var v=arguments[0];return ds.pointToSegment(v,this.p0,this.p1)}}},{key:"pointAlong",value:function(g){var v=new Ke;return v.x=this.p0.x+g*(this.p1.x-this.p0.x),v.y=this.p0.y+g*(this.p1.y-this.p0.y),v}},{key:"hashCode",value:function(){var g=Ve.doubleToLongBits(this.p0.x);g^=31*Ve.doubleToLongBits(this.p0.y);var v=Math.trunc(g)^Math.trunc(g>>32),I=Ve.doubleToLongBits(this.p1.x);return I^=31*Ve.doubleToLongBits(this.p1.y),v^(Math.trunc(I)^Math.trunc(I>>32))}},{key:"interfaces_",get:function(){return[he,ce]}}],[{key:"constructor_",value:function(){if(this.p0=null,this.p1=null,arguments.length===0)k.constructor_.call(this,new Ke,new Ke);else if(arguments.length===1){var g=arguments[0];k.constructor_.call(this,g.p0,g.p1)}else if(arguments.length===2){var v=arguments[0],I=arguments[1];this.p0=v,this.p1=I}else if(arguments.length===4){var H=arguments[0],ne=arguments[1],Se=arguments[2],Le=arguments[3];k.constructor_.call(this,new Ke(H,ne),new Ke(Se,Le))}}},{key:"midPoint",value:function(g,v){return new Ke((g.x+v.x)/2,(g.y+v.y)/2)}}])}(),Ui=function(){return r(function k(){d(this,k),k.constructor_.apply(this,arguments)},[{key:"overlap",value:function(){if(arguments.length!==2){if(arguments.length===4){var k=arguments[1],g=arguments[2],v=arguments[3];arguments[0].getLineSegment(k,this._overlapSeg1),g.getLineSegment(v,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}}}}],[{key:"constructor_",value:function(){this._overlapSeg1=new nr,this._overlapSeg2=new nr}}])}(),Di=function(){return r(function k(){d(this,k),k.constructor_.apply(this,arguments)},[{key:"getLineSegment",value:function(k,g){g.p0=this._pts[k],g.p1=this._pts[k+1]}},{key:"computeSelect",value:function(k,g,v,I){var H=this._pts[g],ne=this._pts[v];if(v-g==1)return I.select(this,g),null;if(!k.intersects(H,ne))return null;var Se=Math.trunc((g+v)/2);g<Se&&this.computeSelect(k,g,Se,I),Se<v&&this.computeSelect(k,Se,v,I)}},{key:"getCoordinates",value:function(){for(var k=new Array(this._end-this._start+1).fill(null),g=0,v=this._start;v<=this._end;v++)k[g++]=this._pts[v];return k}},{key:"computeOverlaps",value:function(){if(arguments.length===2){var k=arguments[0],g=arguments[1];this.computeOverlaps(this._start,this._end,k,k._start,k._end,g)}else if(arguments.length===6){var v=arguments[0],I=arguments[1],H=arguments[2],ne=arguments[3],Se=arguments[4],Le=arguments[5];if(I-v==1&&Se-ne==1)return Le.overlap(this,v,H,ne),null;if(!this.overlaps(v,I,H,ne,Se))return null;var et=Math.trunc((v+I)/2),Et=Math.trunc((ne+Se)/2);v<et&&(ne<Et&&this.computeOverlaps(v,et,H,ne,Et,Le),Et<Se&&this.computeOverlaps(v,et,H,Et,Se,Le)),et<I&&(ne<Et&&this.computeOverlaps(et,I,H,ne,Et,Le),Et<Se&&this.computeOverlaps(et,I,H,Et,Se,Le))}}},{key:"setId",value:function(k){this._id=k}},{key:"select",value:function(k,g){this.computeSelect(k,this._start,this._end,g)}},{key:"getEnvelope",value:function(){if(this._env===null){var k=this._pts[this._start],g=this._pts[this._end];this._env=new xn(k,g)}return this._env}},{key:"overlaps",value:function(k,g,v,I,H){return xn.intersects(this._pts[k],this._pts[g],v._pts[I],v._pts[H])}},{key:"getEndIndex",value:function(){return this._end}},{key:"getStartIndex",value:function(){return this._start}},{key:"getContext",value:function(){return this._context}},{key:"getId",value:function(){return this._id}}],[{key:"constructor_",value:function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var k=arguments[0],g=arguments[1],v=arguments[2],I=arguments[3];this._pts=k,this._start=g,this._end=v,this._context=I}}])}(),va=function(){function k(){d(this,k)}return r(k,null,[{key:"findChainEnd",value:function(g,v){for(var I=v;I<g.length-1&&g[I].equals2D(g[I+1]);)I++;if(I>=g.length-1)return g.length-1;for(var H=yo.quadrant(g[I],g[I+1]),ne=v+1;ne<g.length&&!(!g[ne-1].equals2D(g[ne])&&yo.quadrant(g[ne-1],g[ne])!==H);)ne++;return ne-1}},{key:"getChains",value:function(){if(arguments.length===1){var g=arguments[0];return k.getChains(g,null)}if(arguments.length===2){var v=arguments[0],I=arguments[1],H=new yt,ne=0;do{var Se=k.findChainEnd(v,ne),Le=new Di(v,ne,Se,I);H.add(Le),ne=Se}while(ne<v.length-1);return H}}}])}(),ll=function(){return r(function k(){d(this,k)},[{key:"computeNodes",value:function(k){}},{key:"getNodedSubstrings",value:function(){}}])}(),Ni=function(){return r(function k(){d(this,k),k.constructor_.apply(this,arguments)},[{key:"setSegmentIntersector",value:function(k){this._segInt=k}},{key:"interfaces_",get:function(){return[ll]}}],[{key:"constructor_",value:function(){if(this._segInt=null,arguments.length!==0){if(arguments.length===1){var k=arguments[0];this.setSegmentIntersector(k)}}}}])}(),Lc=function(k){function g(){var v;return d(this,g),v=l(this,g),g.constructor_.apply(v,arguments),v}return P(g,k),r(g,[{key:"getMonotoneChains",value:function(){return this._monoChains}},{key:"getNodedSubstrings",value:function(){return Ga.getNodedSubstrings(this._nodedSegStrings)}},{key:"getIndex",value:function(){return this._index}},{key:"add",value:function(v){for(var I=va.getChains(v.getCoordinates(),v).iterator();I.hasNext();){var H=I.next();H.setId(this._idCounter++),this._index.insert(H.getEnvelope(),H),this._monoChains.add(H)}}},{key:"computeNodes",value:function(v){this._nodedSegStrings=v;for(var I=v.iterator();I.hasNext();)this.add(I.next());this.intersectChains()}},{key:"intersectChains",value:function(){for(var v=new Oc(this._segInt),I=this._monoChains.iterator();I.hasNext();)for(var H=I.next(),ne=this._index.query(H.getEnvelope()).iterator();ne.hasNext();){var Se=ne.next();if(Se.getId()>H.getId()&&(H.computeOverlaps(Se,v),this._nOverlaps++),this._segInt.isDone())return null}}}],[{key:"constructor_",value:function(){if(this._monoChains=new yt,this._index=new So,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0,arguments.length!==0){if(arguments.length===1){var v=arguments[0];Ni.constructor_.call(this,v)}}}}])}(Ni),Oc=function(k){function g(){var v;return d(this,g),v=l(this,g),g.constructor_.apply(v,arguments),v}return P(g,k),r(g,[{key:"overlap",value:function(){if(arguments.length!==4)return F(g,"overlap",this,1).apply(this,arguments);var v=arguments[1],I=arguments[2],H=arguments[3],ne=arguments[0].getContext(),Se=I.getContext();this._si.processIntersections(ne,v,Se,H)}}],[{key:"constructor_",value:function(){this._si=null;var v=arguments[0];this._si=v}}])}(Ui);Lc.SegmentOverlapAction=Oc;var ia=function(){function k(){d(this,k),k.constructor_.apply(this,arguments)}return r(k,[{key:"isDeletable",value:function(g,v,I,H){var ne=this._inputLine[g],Se=this._inputLine[v],Le=this._inputLine[I];return!!this.isConcave(ne,Se,Le)&&!!this.isShallow(ne,Se,Le,H)&&this.isShallowSampled(ne,Se,g,I,H)}},{key:"deleteShallowConcavities",value:function(){for(var g=1,v=this.findNextNonDeletedIndex(g),I=this.findNextNonDeletedIndex(v),H=!1;I<this._inputLine.length;){var ne=!1;this.isDeletable(g,v,I,this._distanceTol)&&(this._isDeleted[v]=k.DELETE,ne=!0,H=!0),g=ne?I:v,v=this.findNextNonDeletedIndex(g),I=this.findNextNonDeletedIndex(v)}return H}},{key:"isShallowConcavity",value:function(g,v,I,H){return Tr.index(g,v,I)===this._angleOrientation&&ds.pointToSegment(v,g,I)<H}},{key:"isShallowSampled",value:function(g,v,I,H,ne){var Se=Math.trunc((H-I)/k.NUM_PTS_TO_CHECK);Se<=0&&(Se=1);for(var Le=I;Le<H;Le+=Se)if(!this.isShallow(g,v,this._inputLine[Le],ne))return!1;return!0}},{key:"isConcave",value:function(g,v,I){var H=Tr.index(g,v,I)===this._angleOrientation;return H}},{key:"simplify",value:function(g){this._distanceTol=Math.abs(g),g<0&&(this._angleOrientation=Tr.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var v=!1;do v=this.deleteShallowConcavities();while(v);return this.collapseLine()}},{key:"findNextNonDeletedIndex",value:function(g){for(var v=g+1;v<this._inputLine.length&&this._isDeleted[v]===k.DELETE;)v++;return v}},{key:"isShallow",value:function(g,v,I,H){return ds.pointToSegment(v,g,I)<H}},{key:"collapseLine",value:function(){for(var g=new Lr,v=0;v<this._inputLine.length;v++)this._isDeleted[v]!==k.DELETE&&g.add(this._inputLine[v]);return g.toCoordinateArray()}}],[{key:"constructor_",value:function(){this._inputLine=null,this._distanceTol=null,this._isDeleted=null,this._angleOrientation=Tr.COUNTERCLOCKWISE;var g=arguments[0];this._inputLine=g}},{key:"simplify",value:function(g,v){return new k(g).simplify(v)}}])}();ia.INIT=0,ia.DELETE=1,ia.KEEP=1,ia.NUM_PTS_TO_CHECK=10;var Vo=function(){function k(){d(this,k),k.constructor_.apply(this,arguments)}return r(k,[{key:"getCoordinates",value:function(){return this._ptList.toArray(k.COORDINATE_ARRAY_TYPE)}},{key:"setPrecisionModel",value:function(g){this._precisionModel=g}},{key:"addPt",value:function(g){var v=new Ke(g);if(this._precisionModel.makePrecise(v),this.isRedundant(v))return null;this._ptList.add(v)}},{key:"reverse",value:function(){}},{key:"addPts",value:function(g,v){if(v)for(var I=0;I<g.length;I++)this.addPt(g[I]);else for(var H=g.length-1;H>=0;H--)this.addPt(g[H])}},{key:"isRedundant",value:function(g){if(this._ptList.size()<1)return!1;var v=this._ptList.get(this._ptList.size()-1);return g.distance(v)<this._minimimVertexDistance}},{key:"toString",value:function(){return new io().createLineString(this.getCoordinates()).toString()}},{key:"closeRing",value:function(){if(this._ptList.size()<1)return null;var g=new Ke(this._ptList.get(0)),v=this._ptList.get(this._ptList.size()-1);if(g.equals(v))return null;this._ptList.add(g)}},{key:"setMinimumVertexDistance",value:function(g){this._minimimVertexDistance=g}}],[{key:"constructor_",value:function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new yt}}])}();Vo.COORDINATE_ARRAY_TYPE=new Array(0).fill(null);var hs=function(){function k(){d(this,k)}return r(k,null,[{key:"toDegrees",value:function(g){return 180*g/Math.PI}},{key:"normalize",value:function(g){for(;g>Math.PI;)g-=k.PI_TIMES_2;for(;g<=-Math.PI;)g+=k.PI_TIMES_2;return g}},{key:"angle",value:function(){if(arguments.length===1){var g=arguments[0];return Math.atan2(g.y,g.x)}if(arguments.length===2){var v=arguments[0],I=arguments[1],H=I.x-v.x,ne=I.y-v.y;return Math.atan2(ne,H)}}},{key:"isAcute",value:function(g,v,I){var H=g.x-v.x,ne=g.y-v.y;return H*(I.x-v.x)+ne*(I.y-v.y)>0}},{key:"isObtuse",value:function(g,v,I){var H=g.x-v.x,ne=g.y-v.y;return H*(I.x-v.x)+ne*(I.y-v.y)<0}},{key:"interiorAngle",value:function(g,v,I){var H=k.angle(v,g),ne=k.angle(v,I);return Math.abs(ne-H)}},{key:"normalizePositive",value:function(g){if(g<0){for(;g<0;)g+=k.PI_TIMES_2;g>=k.PI_TIMES_2&&(g=0)}else{for(;g>=k.PI_TIMES_2;)g-=k.PI_TIMES_2;g<0&&(g=0)}return g}},{key:"angleBetween",value:function(g,v,I){var H=k.angle(v,g),ne=k.angle(v,I);return k.diff(H,ne)}},{key:"diff",value:function(g,v){var I=null;return(I=g<v?v-g:g-v)>Math.PI&&(I=2*Math.PI-I),I}},{key:"toRadians",value:function(g){return g*Math.PI/180}},{key:"getTurn",value:function(g,v){var I=Math.sin(v-g);return I>0?k.COUNTERCLOCKWISE:I<0?k.CLOCKWISE:k.NONE}},{key:"angleBetweenOriented",value:function(g,v,I){var H=k.angle(v,g),ne=k.angle(v,I)-H;return ne<=-Math.PI?ne+k.PI_TIMES_2:ne>Math.PI?ne-k.PI_TIMES_2:ne}}])}();hs.PI_TIMES_2=2*Math.PI,hs.PI_OVER_2=Math.PI/2,hs.PI_OVER_4=Math.PI/4,hs.COUNTERCLOCKWISE=Tr.COUNTERCLOCKWISE,hs.CLOCKWISE=Tr.CLOCKWISE,hs.NONE=Tr.COLLINEAR;var Od=function(){function k(){d(this,k),k.constructor_.apply(this,arguments)}return r(k,[{key:"addNextSegment",value:function(g,v){if(this._s0=this._s1,this._s1=this._s2,this._s2=g,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var I=Tr.index(this._s0,this._s1,this._s2),H=I===Tr.CLOCKWISE&&this._side===bt.LEFT||I===Tr.COUNTERCLOCKWISE&&this._side===bt.RIGHT;I===0?this.addCollinear(v):H?this.addOutsideTurn(I,v):this.addInsideTurn(I,v)}},{key:"addLineEndCap",value:function(g,v){var I=new nr(g,v),H=new nr;this.computeOffsetSegment(I,bt.LEFT,this._distance,H);var ne=new nr;this.computeOffsetSegment(I,bt.RIGHT,this._distance,ne);var Se=v.x-g.x,Le=v.y-g.y,et=Math.atan2(Le,Se);switch(this._bufParams.getEndCapStyle()){case W.CAP_ROUND:this._segList.addPt(H.p1),this.addDirectedFillet(v,et+Math.PI/2,et-Math.PI/2,Tr.CLOCKWISE,this._distance),this._segList.addPt(ne.p1);break;case W.CAP_FLAT:this._segList.addPt(H.p1),this._segList.addPt(ne.p1);break;case W.CAP_SQUARE:var Et=new Ke;Et.x=Math.abs(this._distance)*Math.cos(et),Et.y=Math.abs(this._distance)*Math.sin(et);var tn=new Ke(H.p1.x+Et.x,H.p1.y+Et.y),vn=new Ke(ne.p1.x+Et.x,ne.p1.y+Et.y);this._segList.addPt(tn),this._segList.addPt(vn)}}},{key:"getCoordinates",value:function(){return this._segList.getCoordinates()}},{key:"addMitreJoin",value:function(g,v,I,H){var ne=Xn.intersection(v.p0,v.p1,I.p0,I.p1);if(ne!==null&&(H<=0?1:ne.distance(g)/Math.abs(H))<=this._bufParams.getMitreLimit())return this._segList.addPt(ne),null;this.addLimitedMitreJoin(v,I,H,this._bufParams.getMitreLimit())}},{key:"addOutsideTurn",value:function(g,v){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*k.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===W.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===W.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(v&&this._segList.addPt(this._offset0.p1),this.addCornerFillet(this._s1,this._offset0.p1,this._offset1.p0,g,this._distance),this._segList.addPt(this._offset1.p0))}},{key:"createSquare",value:function(g){this._segList.addPt(new Ke(g.x+this._distance,g.y+this._distance)),this._segList.addPt(new Ke(g.x+this._distance,g.y-this._distance)),this._segList.addPt(new Ke(g.x-this._distance,g.y-this._distance)),this._segList.addPt(new Ke(g.x-this._distance,g.y+this._distance)),this._segList.closeRing()}},{key:"addSegments",value:function(g,v){this._segList.addPts(g,v)}},{key:"addFirstSegment",value:function(){this._segList.addPt(this._offset1.p0)}},{key:"addCornerFillet",value:function(g,v,I,H,ne){var Se=v.x-g.x,Le=v.y-g.y,et=Math.atan2(Le,Se),Et=I.x-g.x,tn=I.y-g.y,vn=Math.atan2(tn,Et);H===Tr.CLOCKWISE?et<=vn&&(et+=2*Math.PI):et>=vn&&(et-=2*Math.PI),this._segList.addPt(v),this.addDirectedFillet(g,et,vn,H,ne),this._segList.addPt(I)}},{key:"addLastSegment",value:function(){this._segList.addPt(this._offset1.p1)}},{key:"initSideSegments",value:function(g,v,I){this._s1=g,this._s2=v,this._side=I,this._seg1.setCoordinates(g,v),this.computeOffsetSegment(this._seg1,I,this._distance,this._offset1)}},{key:"addLimitedMitreJoin",value:function(g,v,I,H){var ne=this._seg0.p1,Se=hs.angle(ne,this._seg0.p0),Le=hs.angleBetweenOriented(this._seg0.p0,ne,this._seg1.p1)/2,et=hs.normalize(Se+Le),Et=hs.normalize(et+Math.PI),tn=H*I,vn=I-tn*Math.abs(Math.sin(Le)),or=ne.x+tn*Math.cos(Et),$r=ne.y+tn*Math.sin(Et),Xr=new Ke(or,$r),_i=new nr(ne,Xr),fs=_i.pointAlongOffset(1,vn),ss=_i.pointAlongOffset(1,-vn);this._side===bt.LEFT?(this._segList.addPt(fs),this._segList.addPt(ss)):(this._segList.addPt(ss),this._segList.addPt(fs))}},{key:"addDirectedFillet",value:function(g,v,I,H,ne){var Se=H===Tr.CLOCKWISE?-1:1,Le=Math.abs(v-I),et=Math.trunc(Le/this._filletAngleQuantum+.5);if(et<1)return null;for(var Et=Le/et,tn=new Ke,vn=0;vn<et;vn++){var or=v+Se*vn*Et;tn.x=g.x+ne*Math.cos(or),tn.y=g.y+ne*Math.sin(or),this._segList.addPt(tn)}}},{key:"computeOffsetSegment",value:function(g,v,I,H){var ne=v===bt.LEFT?1:-1,Se=g.p1.x-g.p0.x,Le=g.p1.y-g.p0.y,et=Math.sqrt(Se*Se+Le*Le),Et=ne*I*Se/et,tn=ne*I*Le/et;H.p0.x=g.p0.x-tn,H.p0.y=g.p0.y+Et,H.p1.x=g.p1.x-tn,H.p1.y=g.p1.y+Et}},{key:"addInsideTurn",value:function(g,v){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*k.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var I=new Ke((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(I);var H=new Ke((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(H)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}}},{key:"createCircle",value:function(g){var v=new Ke(g.x+this._distance,g.y);this._segList.addPt(v),this.addDirectedFillet(g,0,2*Math.PI,-1,this._distance),this._segList.closeRing()}},{key:"addBevelJoin",value:function(g,v){this._segList.addPt(g.p1),this._segList.addPt(v.p0)}},{key:"init",value:function(g){this._distance=g,this._maxCurveSegmentError=g*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new Vo,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(g*k.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)}},{key:"addCollinear",value:function(g){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2),this._li.getIntersectionNum()>=2&&(this._bufParams.getJoinStyle()===W.JOIN_BEVEL||this._bufParams.getJoinStyle()===W.JOIN_MITRE?(g&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addCornerFillet(this._s1,this._offset0.p1,this._offset1.p0,Tr.CLOCKWISE,this._distance))}},{key:"closeRing",value:function(){this._segList.closeRing()}},{key:"hasNarrowConcaveAngle",value:function(){return this._hasNarrowConcaveAngle}}],[{key:"constructor_",value:function(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new nr,this._seg1=new nr,this._offset0=new nr,this._offset1=new nr,this._side=0,this._hasNarrowConcaveAngle=!1;var g=arguments[0],v=arguments[1],I=arguments[2];this._precisionModel=g,this._bufParams=v,this._li=new Ul,this._filletAngleQuantum=Math.PI/2/v.getQuadrantSegments(),v.getQuadrantSegments()>=8&&v.getJoinStyle()===W.JOIN_ROUND&&(this._closingSegLengthFactor=k.MAX_CLOSING_SEG_LEN_FACTOR),this.init(I)}}])}();Od.OFFSET_SEGMENT_SEPARATION_FACTOR=.001,Od.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR=.001,Od.CURVE_VERTEX_SNAP_DISTANCE_FACTOR=1e-6,Od.MAX_CLOSING_SEG_LEN_FACTOR=80;var Dc=function(){function k(){d(this,k),k.constructor_.apply(this,arguments)}return r(k,[{key:"getOffsetCurve",value:function(g,v){if(this._distance=v,v===0)return null;var I=v<0,H=Math.abs(v),ne=this.getSegGen(H);g.length<=1?this.computePointCurve(g[0],ne):this.computeOffsetCurve(g,I,ne);var Se=ne.getCoordinates();return I&&jt.reverse(Se),Se}},{key:"computeSingleSidedBufferCurve",value:function(g,v,I){var H=this.simplifyTolerance(this._distance);if(v){I.addSegments(g,!0);var ne=ia.simplify(g,-H),Se=ne.length-1;I.initSideSegments(ne[Se],ne[Se-1],bt.LEFT),I.addFirstSegment();for(var Le=Se-2;Le>=0;Le--)I.addNextSegment(ne[Le],!0)}else{I.addSegments(g,!1);var et=ia.simplify(g,H),Et=et.length-1;I.initSideSegments(et[0],et[1],bt.LEFT),I.addFirstSegment();for(var tn=2;tn<=Et;tn++)I.addNextSegment(et[tn],!0)}I.addLastSegment(),I.closeRing()}},{key:"computeRingBufferCurve",value:function(g,v,I){var H=this.simplifyTolerance(this._distance);v===bt.RIGHT&&(H=-H);var ne=ia.simplify(g,H),Se=ne.length-1;I.initSideSegments(ne[Se-1],ne[0],v);for(var Le=1;Le<=Se;Le++){var et=Le!==1;I.addNextSegment(ne[Le],et)}I.closeRing()}},{key:"computeLineBufferCurve",value:function(g,v){var I=this.simplifyTolerance(this._distance),H=ia.simplify(g,I),ne=H.length-1;v.initSideSegments(H[0],H[1],bt.LEFT);for(var Se=2;Se<=ne;Se++)v.addNextSegment(H[Se],!0);v.addLastSegment(),v.addLineEndCap(H[ne-1],H[ne]);var Le=ia.simplify(g,-I),et=Le.length-1;v.initSideSegments(Le[et],Le[et-1],bt.LEFT);for(var Et=et-2;Et>=0;Et--)v.addNextSegment(Le[Et],!0);v.addLastSegment(),v.addLineEndCap(Le[1],Le[0]),v.closeRing()}},{key:"computePointCurve",value:function(g,v){switch(this._bufParams.getEndCapStyle()){case W.CAP_ROUND:v.createCircle(g);break;case W.CAP_SQUARE:v.createSquare(g)}}},{key:"getLineCurve",value:function(g,v){if(this._distance=v,this.isLineOffsetEmpty(v))return null;var I=Math.abs(v),H=this.getSegGen(I);if(g.length<=1)this.computePointCurve(g[0],H);else if(this._bufParams.isSingleSided()){var ne=v<0;this.computeSingleSidedBufferCurve(g,ne,H)}else this.computeLineBufferCurve(g,H);return H.getCoordinates()}},{key:"getBufferParameters",value:function(){return this._bufParams}},{key:"simplifyTolerance",value:function(g){return g*this._bufParams.getSimplifyFactor()}},{key:"getRingCurve",value:function(g,v,I){if(this._distance=I,g.length<=2)return this.getLineCurve(g,I);if(I===0)return k.copyCoordinates(g);var H=this.getSegGen(I);return this.computeRingBufferCurve(g,v,H),H.getCoordinates()}},{key:"computeOffsetCurve",value:function(g,v,I){var H=this.simplifyTolerance(this._distance);if(v){var ne=ia.simplify(g,-H),Se=ne.length-1;I.initSideSegments(ne[Se],ne[Se-1],bt.LEFT),I.addFirstSegment();for(var Le=Se-2;Le>=0;Le--)I.addNextSegment(ne[Le],!0)}else{var et=ia.simplify(g,H),Et=et.length-1;I.initSideSegments(et[0],et[1],bt.LEFT),I.addFirstSegment();for(var tn=2;tn<=Et;tn++)I.addNextSegment(et[tn],!0)}I.addLastSegment()}},{key:"isLineOffsetEmpty",value:function(g){return g===0||g<0&&!this._bufParams.isSingleSided()}},{key:"getSegGen",value:function(g){return new Od(this._precisionModel,this._bufParams,g)}}],[{key:"constructor_",value:function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var g=arguments[0],v=arguments[1];this._precisionModel=g,this._bufParams=v}},{key:"copyCoordinates",value:function(g){for(var v=new Array(g.length).fill(null),I=0;I<v.length;I++)v[I]=new Ke(g[I]);return v}}])}(),Wl=function(){return r(function k(){d(this,k),k.constructor_.apply(this,arguments)},[{key:"findStabbedSegments",value:function(){if(arguments.length===1){for(var k=arguments[0],g=new yt,v=this._subgraphs.iterator();v.hasNext();){var I=v.next(),H=I.getEnvelope();k.y<H.getMinY()||k.y>H.getMaxY()||this.findStabbedSegments(k,I.getDirectedEdges(),g)}return g}if(arguments.length===3){if(Ot(arguments[2],Vn)&&arguments[0]instanceof Ke&&arguments[1]instanceof ol){for(var ne=arguments[0],Se=arguments[1],Le=arguments[2],et=Se.getEdge().getCoordinates(),Et=0;Et<et.length-1;Et++)if(this._seg.p0=et[Et],this._seg.p1=et[Et+1],this._seg.p0.y>this._seg.p1.y&&this._seg.reverse(),!(Math.max(this._seg.p0.x,this._seg.p1.x)<ne.x||this._seg.isHorizontal()||ne.y<this._seg.p0.y||ne.y>this._seg.p1.y||Tr.index(this._seg.p0,this._seg.p1,ne)===Tr.RIGHT)){var tn=Se.getDepth(bt.LEFT);this._seg.p0.equals(et[Et])||(tn=Se.getDepth(bt.RIGHT));var vn=new zc(this._seg,tn);Le.add(vn)}}else if(Ot(arguments[2],Vn)&&arguments[0]instanceof Ke&&Ot(arguments[1],Vn))for(var or=arguments[0],$r=arguments[2],Xr=arguments[1].iterator();Xr.hasNext();){var _i=Xr.next();_i.isForward()&&this.findStabbedSegments(or,_i,$r)}}}},{key:"getDepth",value:function(k){var g=this.findStabbedSegments(k);return g.size()===0?0:Ua.min(g)._leftDepth}}],[{key:"constructor_",value:function(){this._subgraphs=null,this._seg=new nr;var k=arguments[0];this._subgraphs=k}}])}(),zc=function(){return r(function k(){d(this,k),k.constructor_.apply(this,arguments)},[{key:"compareTo",value:function(k){var g=k;if(this._upwardSeg.minX()>=g._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=g._upwardSeg.minX())return-1;var v=this._upwardSeg.orientationIndex(g._upwardSeg);return v!==0||(v=-1*g._upwardSeg.orientationIndex(this._upwardSeg))!==0?v:this._upwardSeg.compareTo(g._upwardSeg)}},{key:"compareX",value:function(k,g){var v=k.p0.compareTo(g.p0);return v!==0?v:k.p1.compareTo(g.p1)}},{key:"toString",value:function(){return this._upwardSeg.toString()}},{key:"interfaces_",get:function(){return[he]}}],[{key:"constructor_",value:function(){this._upwardSeg=null,this._leftDepth=null;var k=arguments[0],g=arguments[1];this._upwardSeg=new nr(k),this._leftDepth=g}}])}();Wl.DepthSegment=zc;var Dd=function(k){function g(){var v;return d(this,g),v=l(this,g),g.constructor_.apply(v,arguments),v}return P(g,k),r(g,null,[{key:"constructor_",value:function(){Y.constructor_.call(this,"Projective point not representable on the Cartesian plane.")}}])}(Y),ju=function(){function k(){d(this,k),k.constructor_.apply(this,arguments)}return r(k,[{key:"getY",value:function(){var g=this.y/this.w;if(Ve.isNaN(g)||Ve.isInfinite(g))throw new Dd;return g}},{key:"getX",value:function(){var g=this.x/this.w;if(Ve.isNaN(g)||Ve.isInfinite(g))throw new Dd;return g}},{key:"getCoordinate",value:function(){var g=new Ke;return g.x=this.getX(),g.y=this.getY(),g}}],[{key:"constructor_",value:function(){if(this.x=null,this.y=null,this.w=null,arguments.length===0)this.x=0,this.y=0,this.w=1;else if(arguments.length===1){var g=arguments[0];this.x=g.x,this.y=g.y,this.w=1}else if(arguments.length===2){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var v=arguments[0],I=arguments[1];this.x=v,this.y=I,this.w=1}else if(arguments[0]instanceof k&&arguments[1]instanceof k){var H=arguments[0],ne=arguments[1];this.x=H.y*ne.w-ne.y*H.w,this.y=ne.x*H.w-H.x*ne.w,this.w=H.x*ne.y-ne.x*H.y}else if(arguments[0]instanceof Ke&&arguments[1]instanceof Ke){var Se=arguments[0],Le=arguments[1];this.x=Se.y-Le.y,this.y=Le.x-Se.x,this.w=Se.x*Le.y-Le.x*Se.y}}else if(arguments.length===3){var et=arguments[0],Et=arguments[1],tn=arguments[2];this.x=et,this.y=Et,this.w=tn}else if(arguments.length===4){var vn=arguments[0],or=arguments[1],$r=arguments[2],Xr=arguments[3],_i=vn.y-or.y,fs=or.x-vn.x,ss=vn.x*or.y-or.x*vn.y,rs=$r.y-Xr.y,Co=Xr.x-$r.x,Pn=$r.x*Xr.y-Xr.x*$r.y;this.x=fs*Pn-Co*ss,this.y=rs*ss-_i*Pn,this.w=_i*Co-rs*fs}}}])}(),Mh=function(){function k(){d(this,k),k.constructor_.apply(this,arguments)}return r(k,[{key:"area",value:function(){return k.area(this.p0,this.p1,this.p2)}},{key:"signedArea",value:function(){return k.signedArea(this.p0,this.p1,this.p2)}},{key:"interpolateZ",value:function(g){if(g===null)throw new J("Supplied point is null.");return k.interpolateZ(g,this.p0,this.p1,this.p2)}},{key:"longestSideLength",value:function(){return k.longestSideLength(this.p0,this.p1,this.p2)}},{key:"isAcute",value:function(){return k.isAcute(this.p0,this.p1,this.p2)}},{key:"circumcentre",value:function(){return k.circumcentre(this.p0,this.p1,this.p2)}},{key:"area3D",value:function(){return k.area3D(this.p0,this.p1,this.p2)}},{key:"centroid",value:function(){return k.centroid(this.p0,this.p1,this.p2)}},{key:"inCentre",value:function(){return k.inCentre(this.p0,this.p1,this.p2)}}],[{key:"constructor_",value:function(){this.p0=null,this.p1=null,this.p2=null;var g=arguments[0],v=arguments[1],I=arguments[2];this.p0=g,this.p1=v,this.p2=I}},{key:"area",value:function(g,v,I){return Math.abs(((I.x-g.x)*(v.y-g.y)-(v.x-g.x)*(I.y-g.y))/2)}},{key:"signedArea",value:function(g,v,I){return((I.x-g.x)*(v.y-g.y)-(v.x-g.x)*(I.y-g.y))/2}},{key:"det",value:function(g,v,I,H){return g*H-v*I}},{key:"interpolateZ",value:function(g,v,I,H){var ne=v.x,Se=v.y,Le=I.x-ne,et=H.x-ne,Et=I.y-Se,tn=H.y-Se,vn=Le*tn-et*Et,or=g.x-ne,$r=g.y-Se,Xr=(tn*or-et*$r)/vn,_i=(-Et*or+Le*$r)/vn;return v.getZ()+Xr*(I.getZ()-v.getZ())+_i*(H.getZ()-v.getZ())}},{key:"longestSideLength",value:function(g,v,I){var H=g.distance(v),ne=v.distance(I),Se=I.distance(g),Le=H;return ne>Le&&(Le=ne),Se>Le&&(Le=Se),Le}},{key:"circumcentreDD",value:function(g,v,I){var H=Kn.valueOf(g.x).subtract(I.x),ne=Kn.valueOf(g.y).subtract(I.y),Se=Kn.valueOf(v.x).subtract(I.x),Le=Kn.valueOf(v.y).subtract(I.y),et=Kn.determinant(H,ne,Se,Le).multiply(2),Et=H.sqr().add(ne.sqr()),tn=Se.sqr().add(Le.sqr()),vn=Kn.determinant(ne,Et,Le,tn),or=Kn.determinant(H,Et,Se,tn),$r=Kn.valueOf(I.x).subtract(vn.divide(et)).doubleValue(),Xr=Kn.valueOf(I.y).add(or.divide(et)).doubleValue();return new Ke($r,Xr)}},{key:"isAcute",value:function(g,v,I){return!!hs.isAcute(g,v,I)&&!!hs.isAcute(v,I,g)&&!!hs.isAcute(I,g,v)}},{key:"circumcentre",value:function(g,v,I){var H=I.x,ne=I.y,Se=g.x-H,Le=g.y-ne,et=v.x-H,Et=v.y-ne,tn=2*k.det(Se,Le,et,Et),vn=k.det(Le,Se*Se+Le*Le,Et,et*et+Et*Et),or=k.det(Se,Se*Se+Le*Le,et,et*et+Et*Et);return new Ke(H-vn/tn,ne+or/tn)}},{key:"perpendicularBisector",value:function(g,v){var I=v.x-g.x,H=v.y-g.y,ne=new ju(g.x+I/2,g.y+H/2,1),Se=new ju(g.x-H+I/2,g.y+I+H/2,1);return new ju(ne,Se)}},{key:"angleBisector",value:function(g,v,I){var H=v.distance(g),ne=H/(H+v.distance(I)),Se=I.x-g.x,Le=I.y-g.y;return new Ke(g.x+ne*Se,g.y+ne*Le)}},{key:"area3D",value:function(g,v,I){var H=v.x-g.x,ne=v.y-g.y,Se=v.getZ()-g.getZ(),Le=I.x-g.x,et=I.y-g.y,Et=I.getZ()-g.getZ(),tn=ne*Et-Se*et,vn=Se*Le-H*Et,or=H*et-ne*Le,$r=tn*tn+vn*vn+or*or,Xr=Math.sqrt($r)/2;return Xr}},{key:"centroid",value:function(g,v,I){var H=(g.x+v.x+I.x)/3,ne=(g.y+v.y+I.y)/3;return new Ke(H,ne)}},{key:"inCentre",value:function(g,v,I){var H=v.distance(I),ne=g.distance(I),Se=g.distance(v),Le=H+ne+Se,et=(H*g.x+ne*v.x+Se*I.x)/Le,Et=(H*g.y+ne*v.y+Se*I.y)/Le;return new Ke(et,Et)}}])}(),Ko=function(){return r(function k(){d(this,k),k.constructor_.apply(this,arguments)},[{key:"addRingSide",value:function(k,g,v,I,H){if(g===0&&k.length<Sn.MINIMUM_VALID_SIZE)return null;var ne=I,Se=H;k.length>=Sn.MINIMUM_VALID_SIZE&&Tr.isCCW(k)&&(ne=H,Se=I,v=bt.opposite(v));var Le=this._curveBuilder.getRingCurve(k,v,g);this.addCurve(Le,ne,Se)}},{key:"addRingBothSides",value:function(k,g){this.addRingSide(k,g,bt.LEFT,le.EXTERIOR,le.INTERIOR),this.addRingSide(k,g,bt.RIGHT,le.INTERIOR,le.EXTERIOR)}},{key:"addPoint",value:function(k){if(this._distance<=0)return null;var g=k.getCoordinates(),v=this._curveBuilder.getLineCurve(g,this._distance);this.addCurve(v,le.EXTERIOR,le.INTERIOR)}},{key:"addPolygon",value:function(k){var g=this._distance,v=bt.LEFT;this._distance<0&&(g=-this._distance,v=bt.RIGHT);var I=k.getExteriorRing(),H=jt.removeRepeatedPoints(I.getCoordinates());if(this._distance<0&&this.isErodedCompletely(I,this._distance)||this._distance<=0&&H.length<3)return null;this.addRingSide(H,g,v,le.EXTERIOR,le.INTERIOR);for(var ne=0;ne<k.getNumInteriorRing();ne++){var Se=k.getInteriorRingN(ne),Le=jt.removeRepeatedPoints(Se.getCoordinates());this._distance>0&&this.isErodedCompletely(Se,-this._distance)||this.addRingSide(Le,g,bt.opposite(v),le.INTERIOR,le.EXTERIOR)}}},{key:"isTriangleErodedCompletely",value:function(k,g){var v=new Mh(k[0],k[1],k[2]),I=v.inCentre();return ds.pointToSegment(I,v.p0,v.p1)<Math.abs(g)}},{key:"addLineString",value:function(k){if(this._curveBuilder.isLineOffsetEmpty(this._distance))return null;var g=jt.removeRepeatedPoints(k.getCoordinates());if(jt.isRing(g)&&!this._curveBuilder.getBufferParameters().isSingleSided())this.addRingBothSides(g,this._distance);else{var v=this._curveBuilder.getLineCurve(g,this._distance);this.addCurve(v,le.EXTERIOR,le.INTERIOR)}}},{key:"addCurve",value:function(k,g,v){if(k===null||k.length<2)return null;var I=new Ga(k,new Bo(0,le.BOUNDARY,g,v));this._curveList.add(I)}},{key:"getCurves",value:function(){return this.add(this._inputGeom),this._curveList}},{key:"add",value:function(k){if(k.isEmpty())return null;if(k instanceof Tt)this.addPolygon(k);else if(k instanceof Ut)this.addLineString(k);else if(k instanceof Oe)this.addPoint(k);else if(k instanceof Ft)this.addCollection(k);else if(k instanceof Io)this.addCollection(k);else if(k instanceof xi)this.addCollection(k);else{if(!(k instanceof Nt))throw new an(k.getGeometryType());this.addCollection(k)}}},{key:"isErodedCompletely",value:function(k,g){var v=k.getCoordinates();if(v.length<4)return g<0;if(v.length===4)return this.isTriangleErodedCompletely(v,g);var I=k.getEnvelopeInternal(),H=Math.min(I.getHeight(),I.getWidth());return g<0&&2*Math.abs(g)>H}},{key:"addCollection",value:function(k){for(var g=0;g<k.getNumGeometries();g++){var v=k.getGeometryN(g);this.add(v)}}}],[{key:"constructor_",value:function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new yt;var k=arguments[0],g=arguments[1],v=arguments[2];this._inputGeom=k,this._distance=g,this._curveBuilder=v}}])}(),Kl=function(){return r(function k(){d(this,k)},[{key:"locate",value:function(k){}}])}(),sa=function(){function k(){d(this,k),k.constructor_.apply(this,arguments)}return r(k,[{key:"next",value:function(){if(this._atStart)return this._atStart=!1,k.isAtomic(this._parent)&&this._index++,this._parent;if(this._subcollectionIterator!==null){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new Gt;var g=this._parent.getGeometryN(this._index++);return g instanceof Nt?(this._subcollectionIterator=new k(g),this._subcollectionIterator.next()):g}},{key:"remove",value:function(){throw new an(this.getClass().getName())}},{key:"hasNext",value:function(){if(this._atStart)return!0;if(this._subcollectionIterator!==null){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)}},{key:"interfaces_",get:function(){return[kh]}}],[{key:"constructor_",value:function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var g=arguments[0];this._parent=g,this._atStart=!0,this._index=0,this._max=g.getNumGeometries()}},{key:"isAtomic",value:function(g){return!(g instanceof Nt)}}])}(),Gu=function(){function k(){d(this,k),k.constructor_.apply(this,arguments)}return r(k,[{key:"locate",value:function(g){return k.locate(g,this._geom)}},{key:"interfaces_",get:function(){return[Kl]}}],[{key:"constructor_",value:function(){this._geom=null;var g=arguments[0];this._geom=g}},{key:"locatePointInPolygon",value:function(g,v){if(v.isEmpty())return le.EXTERIOR;var I=v.getExteriorRing(),H=k.locatePointInRing(g,I);if(H!==le.INTERIOR)return H;for(var ne=0;ne<v.getNumInteriorRing();ne++){var Se=v.getInteriorRingN(ne),Le=k.locatePointInRing(g,Se);if(Le===le.BOUNDARY)return le.BOUNDARY;if(Le===le.INTERIOR)return le.EXTERIOR}return le.INTERIOR}},{key:"locatePointInRing",value:function(g,v){return v.getEnvelopeInternal().intersects(g)?jl.locateInRing(g,v.getCoordinates()):le.EXTERIOR}},{key:"containsPointInPolygon",value:function(g,v){return le.EXTERIOR!==k.locatePointInPolygon(g,v)}},{key:"locateInGeometry",value:function(g,v){if(v instanceof Tt)return k.locatePointInPolygon(g,v);if(v instanceof Nt)for(var I=new sa(v);I.hasNext();){var H=I.next();if(H!==v){var ne=k.locateInGeometry(g,H);if(ne!==le.EXTERIOR)return ne}}return le.EXTERIOR}},{key:"isContained",value:function(g,v){return le.EXTERIOR!==k.locate(g,v)}},{key:"locate",value:function(g,v){return v.isEmpty()?le.EXTERIOR:v.getEnvelopeInternal().intersects(g)?k.locateInGeometry(g,v):le.EXTERIOR}}])}(),ai=function(){return r(function k(){d(this,k),k.constructor_.apply(this,arguments)},[{key:"getNextCW",value:function(k){this.getEdges();var g=this._edgeList.indexOf(k),v=g-1;return g===0&&(v=this._edgeList.size()-1),this._edgeList.get(v)}},{key:"propagateSideLabels",value:function(k){for(var g=le.NONE,v=this.iterator();v.hasNext();){var I=v.next().getLabel();I.isArea(k)&&I.getLocation(k,bt.LEFT)!==le.NONE&&(g=I.getLocation(k,bt.LEFT))}if(g===le.NONE)return null;for(var H=g,ne=this.iterator();ne.hasNext();){var Se=ne.next(),Le=Se.getLabel();if(Le.getLocation(k,bt.ON)===le.NONE&&Le.setLocation(k,bt.ON,H),Le.isArea(k)){var et=Le.getLocation(k,bt.LEFT),Et=Le.getLocation(k,bt.RIGHT);if(Et!==le.NONE){if(Et!==H)throw new Fr("side location conflict",Se.getCoordinate());et===le.NONE&&ct.shouldNeverReachHere("found single null side (at "+Se.getCoordinate()+")"),H=et}else ct.isTrue(Le.getLocation(k,bt.LEFT)===le.NONE,"found single null side"),Le.setLocation(k,bt.RIGHT,H),Le.setLocation(k,bt.LEFT,H)}}}},{key:"getCoordinate",value:function(){var k=this.iterator();return k.hasNext()?k.next().getCoordinate():null}},{key:"print",value:function(k){vr.out.println("EdgeEndStar:   "+this.getCoordinate());for(var g=this.iterator();g.hasNext();)g.next().print(k)}},{key:"isAreaLabelsConsistent",value:function(k){return this.computeEdgeEndLabels(k.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)}},{key:"checkAreaLabelsConsistent",value:function(k){var g=this.getEdges();if(g.size()<=0)return!0;var v=g.size()-1,I=g.get(v).getLabel().getLocation(k,bt.LEFT);ct.isTrue(I!==le.NONE,"Found unlabelled area edge");for(var H=I,ne=this.iterator();ne.hasNext();){var Se=ne.next().getLabel();ct.isTrue(Se.isArea(k),"Found non-area edge");var Le=Se.getLocation(k,bt.LEFT),et=Se.getLocation(k,bt.RIGHT);if(Le===et||et!==H)return!1;H=Le}return!0}},{key:"findIndex",value:function(k){this.iterator();for(var g=0;g<this._edgeList.size();g++)if(this._edgeList.get(g)===k)return g;return-1}},{key:"iterator",value:function(){return this.getEdges().iterator()}},{key:"getEdges",value:function(){return this._edgeList===null&&(this._edgeList=new yt(this._edgeMap.values())),this._edgeList}},{key:"getLocation",value:function(k,g,v){return this._ptInAreaLocation[k]===le.NONE&&(this._ptInAreaLocation[k]=Gu.locate(g,v[k].getGeometry())),this._ptInAreaLocation[k]}},{key:"toString",value:function(){var k=new Bn;k.append("EdgeEndStar:   "+this.getCoordinate()),k.append(`
`);for(var g=this.iterator();g.hasNext();){var v=g.next();k.append(v),k.append(`
`)}return k.toString()}},{key:"computeEdgeEndLabels",value:function(k){for(var g=this.iterator();g.hasNext();)g.next().computeLabel(k)}},{key:"computeLabelling",value:function(k){this.computeEdgeEndLabels(k[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var g=[!1,!1],v=this.iterator();v.hasNext();)for(var I=v.next().getLabel(),H=0;H<2;H++)I.isLine(H)&&I.getLocation(H)===le.BOUNDARY&&(g[H]=!0);for(var ne=this.iterator();ne.hasNext();)for(var Se=ne.next(),Le=Se.getLabel(),et=0;et<2;et++)if(Le.isAnyNull(et)){var Et=le.NONE;if(g[et])Et=le.EXTERIOR;else{var tn=Se.getCoordinate();Et=this.getLocation(et,tn,k)}Le.setAllLocationsIfNull(et,Et)}}},{key:"getDegree",value:function(){return this._edgeMap.size()}},{key:"insertEdgeEnd",value:function(k,g){this._edgeMap.put(k,g),this._edgeList=null}}],[{key:"constructor_",value:function(){this._edgeMap=new Vu,this._edgeList=null,this._ptInAreaLocation=[le.NONE,le.NONE]}}])}(),Jn=function(k){function g(){var v;return d(this,g),v=l(this,g),g.constructor_.apply(v,arguments),v}return P(g,k),r(g,[{key:"linkResultDirectedEdges",value:function(){this.getResultAreaEdges();for(var v=null,I=null,H=this._SCANNING_FOR_INCOMING,ne=0;ne<this._resultAreaEdgeList.size();ne++){var Se=this._resultAreaEdgeList.get(ne),Le=Se.getSym();if(Se.getLabel().isArea())switch(v===null&&Se.isInResult()&&(v=Se),H){case this._SCANNING_FOR_INCOMING:if(!Le.isInResult())continue;I=Le,H=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(!Se.isInResult())continue;I.setNext(Se),H=this._SCANNING_FOR_INCOMING}}if(H===this._LINKING_TO_OUTGOING){if(v===null)throw new Fr("no outgoing dirEdge found",this.getCoordinate());ct.isTrue(v.isInResult(),"unable to link last incoming dirEdge"),I.setNext(v)}}},{key:"insert",value:function(v){var I=v;this.insertEdgeEnd(I,I)}},{key:"getRightmostEdge",value:function(){var v=this.getEdges(),I=v.size();if(I<1)return null;var H=v.get(0);if(I===1)return H;var ne=v.get(I-1),Se=H.getQuadrant(),Le=ne.getQuadrant();return yo.isNorthern(Se)&&yo.isNorthern(Le)?H:yo.isNorthern(Se)||yo.isNorthern(Le)?H.getDy()!==0?H:ne.getDy()!==0?ne:(ct.shouldNeverReachHere("found two horizontal edges incident on node"),null):ne}},{key:"print",value:function(v){vr.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var I=this.iterator();I.hasNext();){var H=I.next();v.print("out "),H.print(v),v.println(),v.print("in "),H.getSym().print(v),v.println()}}},{key:"getResultAreaEdges",value:function(){if(this._resultAreaEdgeList!==null)return this._resultAreaEdgeList;this._resultAreaEdgeList=new yt;for(var v=this.iterator();v.hasNext();){var I=v.next();(I.isInResult()||I.getSym().isInResult())&&this._resultAreaEdgeList.add(I)}return this._resultAreaEdgeList}},{key:"updateLabelling",value:function(v){for(var I=this.iterator();I.hasNext();){var H=I.next().getLabel();H.setAllLocationsIfNull(0,v.getLocation(0)),H.setAllLocationsIfNull(1,v.getLocation(1))}}},{key:"linkAllDirectedEdges",value:function(){this.getEdges();for(var v=null,I=null,H=this._edgeList.size()-1;H>=0;H--){var ne=this._edgeList.get(H),Se=ne.getSym();I===null&&(I=Se),v!==null&&Se.setNext(v),v=ne}I.setNext(v)}},{key:"computeDepths",value:function(){if(arguments.length===1){var v=arguments[0],I=this.findIndex(v),H=v.getDepth(bt.LEFT),ne=v.getDepth(bt.RIGHT),Se=this.computeDepths(I+1,this._edgeList.size(),H);if(this.computeDepths(0,I,Se)!==ne)throw new Fr("depth mismatch at "+v.getCoordinate())}else if(arguments.length===3){for(var Le=arguments[1],et=arguments[2],Et=arguments[0];Et<Le;Et++){var tn=this._edgeList.get(Et);tn.setEdgeDepths(bt.RIGHT,et),et=tn.getDepth(bt.LEFT)}return et}}},{key:"mergeSymLabels",value:function(){for(var v=this.iterator();v.hasNext();){var I=v.next();I.getLabel().merge(I.getSym().getLabel())}}},{key:"linkMinimalDirectedEdges",value:function(v){for(var I=null,H=null,ne=this._SCANNING_FOR_INCOMING,Se=this._resultAreaEdgeList.size()-1;Se>=0;Se--){var Le=this._resultAreaEdgeList.get(Se),et=Le.getSym();switch(I===null&&Le.getEdgeRing()===v&&(I=Le),ne){case this._SCANNING_FOR_INCOMING:if(et.getEdgeRing()!==v)continue;H=et,ne=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(Le.getEdgeRing()!==v)continue;H.setNextMin(Le),ne=this._SCANNING_FOR_INCOMING}}ne===this._LINKING_TO_OUTGOING&&(ct.isTrue(I!==null,"found null for first outgoing dirEdge"),ct.isTrue(I.getEdgeRing()===v,"unable to link last incoming dirEdge"),H.setNextMin(I))}},{key:"getOutgoingDegree",value:function(){if(arguments.length===0){for(var v=0,I=this.iterator();I.hasNext();)I.next().isInResult()&&v++;return v}if(arguments.length===1){for(var H=arguments[0],ne=0,Se=this.iterator();Se.hasNext();)Se.next().getEdgeRing()===H&&ne++;return ne}}},{key:"getLabel",value:function(){return this._label}},{key:"findCoveredLineEdges",value:function(){for(var v=le.NONE,I=this.iterator();I.hasNext();){var H=I.next(),ne=H.getSym();if(!H.isLineEdge()){if(H.isInResult()){v=le.INTERIOR;break}if(ne.isInResult()){v=le.EXTERIOR;break}}}if(v===le.NONE)return null;for(var Se=v,Le=this.iterator();Le.hasNext();){var et=Le.next(),Et=et.getSym();et.isLineEdge()?et.getEdge().setCovered(Se===le.INTERIOR):(et.isInResult()&&(Se=le.EXTERIOR),Et.isInResult()&&(Se=le.INTERIOR))}}},{key:"computeLabelling",value:function(v){F(g,"computeLabelling",this,1).call(this,v),this._label=new Bo(le.NONE);for(var I=this.iterator();I.hasNext();)for(var H=I.next().getEdge().getLabel(),ne=0;ne<2;ne++){var Se=H.getLocation(ne);Se!==le.INTERIOR&&Se!==le.BOUNDARY||this._label.setLocation(ne,le.INTERIOR)}}}],[{key:"constructor_",value:function(){this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}}])}(ai),qa=function(k){function g(){return d(this,g),l(this,g)}return P(g,k),r(g,[{key:"createNode",value:function(v){return new Bu(v,new Jn)}}])}(Rd),Vr=function(){function k(){d(this,k),k.constructor_.apply(this,arguments)}return r(k,[{key:"compareTo",value:function(g){var v=g;return k.compareOriented(this._pts,this._orientation,v._pts,v._orientation)}},{key:"interfaces_",get:function(){return[he]}}],[{key:"constructor_",value:function(){this._pts=null,this._orientation=null;var g=arguments[0];this._pts=g,this._orientation=k.orientation(g)}},{key:"orientation",value:function(g){return jt.increasingDirection(g)===1}},{key:"compareOriented",value:function(g,v,I,H){for(var ne=v?1:-1,Se=H?1:-1,Le=v?g.length:-1,et=H?I.length:-1,Et=v?0:g.length-1,tn=H?0:I.length-1;;){var vn=g[Et].compareTo(I[tn]);if(vn!==0)return vn;var or=(Et+=ne)===Le,$r=(tn+=Se)===et;if(or&&!$r)return-1;if(!or&&$r)return 1;if(or&&$r)return 0}}}])}(),to=function(){return r(function k(){d(this,k),k.constructor_.apply(this,arguments)},[{key:"print",value:function(k){k.print("MULTILINESTRING ( ");for(var g=0;g<this._edges.size();g++){var v=this._edges.get(g);g>0&&k.print(","),k.print("(");for(var I=v.getCoordinates(),H=0;H<I.length;H++)H>0&&k.print(","),k.print(I[H].x+" "+I[H].y);k.println(")")}k.print(")  ")}},{key:"addAll",value:function(k){for(var g=k.iterator();g.hasNext();)this.add(g.next())}},{key:"findEdgeIndex",value:function(k){for(var g=0;g<this._edges.size();g++)if(this._edges.get(g).equals(k))return g;return-1}},{key:"iterator",value:function(){return this._edges.iterator()}},{key:"getEdges",value:function(){return this._edges}},{key:"get",value:function(k){return this._edges.get(k)}},{key:"findEqualEdge",value:function(k){var g=new Vr(k.getCoordinates());return this._ocaMap.get(g)}},{key:"add",value:function(k){this._edges.add(k);var g=new Vr(k.getCoordinates());this._ocaMap.put(g,k)}}],[{key:"constructor_",value:function(){this._edges=new yt,this._ocaMap=new Vu}}])}(),Nc=function(){return r(function k(){d(this,k)},[{key:"processIntersections",value:function(k,g,v,I){}},{key:"isDone",value:function(){}}])}(),Pr=function(){function k(){d(this,k),k.constructor_.apply(this,arguments)}return r(k,[{key:"isTrivialIntersection",value:function(g,v,I,H){if(g===I&&this._li.getIntersectionNum()===1){if(k.isAdjacentSegments(v,H))return!0;if(g.isClosed()){var ne=g.size()-1;if(v===0&&H===ne||H===0&&v===ne)return!0}}return!1}},{key:"getProperIntersectionPoint",value:function(){return this._properIntersectionPoint}},{key:"hasProperInteriorIntersection",value:function(){return this._hasProperInterior}},{key:"getLineIntersector",value:function(){return this._li}},{key:"hasProperIntersection",value:function(){return this._hasProper}},{key:"processIntersections",value:function(g,v,I,H){if(g===I&&v===H)return null;this.numTests++;var ne=g.getCoordinates()[v],Se=g.getCoordinates()[v+1],Le=I.getCoordinates()[H],et=I.getCoordinates()[H+1];this._li.computeIntersection(ne,Se,Le,et),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(g,v,I,H)||(this._hasIntersection=!0,g.addIntersections(this._li,v,0),I.addIntersections(this._li,H,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))}},{key:"hasIntersection",value:function(){return this._hasIntersection}},{key:"isDone",value:function(){return!1}},{key:"hasInteriorIntersection",value:function(){return this._hasInterior}},{key:"interfaces_",get:function(){return[Nc]}}],[{key:"constructor_",value:function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var g=arguments[0];this._li=g}},{key:"isAdjacentSegments",value:function(g,v){return Math.abs(g-v)===1}}])}(),Fc=function(){return r(function k(){d(this,k),k.constructor_.apply(this,arguments)},[{key:"getSegmentIndex",value:function(){return this.segmentIndex}},{key:"getCoordinate",value:function(){return this.coord}},{key:"print",value:function(k){k.print(this.coord),k.print(" seg # = "+this.segmentIndex),k.println(" dist = "+this.dist)}},{key:"compareTo",value:function(k){var g=k;return this.compare(g.segmentIndex,g.dist)}},{key:"isEndPoint",value:function(k){return this.segmentIndex===0&&this.dist===0||this.segmentIndex===k}},{key:"toString",value:function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist}},{key:"getDistance",value:function(){return this.dist}},{key:"compare",value:function(k,g){return this.segmentIndex<k?-1:this.segmentIndex>k?1:this.dist<g?-1:this.dist>g?1:0}},{key:"interfaces_",get:function(){return[he]}}],[{key:"constructor_",value:function(){this.coord=null,this.segmentIndex=null,this.dist=null;var k=arguments[0],g=arguments[1],v=arguments[2];this.coord=new Ke(k),this.segmentIndex=g,this.dist=v}}])}(),Bc=function(){return r(function k(){d(this,k),k.constructor_.apply(this,arguments)},[{key:"print",value:function(k){k.println("Intersections:");for(var g=this.iterator();g.hasNext();)g.next().print(k)}},{key:"iterator",value:function(){return this._nodeMap.values().iterator()}},{key:"addSplitEdges",value:function(k){this.addEndpoints();for(var g=this.iterator(),v=g.next();g.hasNext();){var I=g.next(),H=this.createSplitEdge(v,I);k.add(H),v=I}}},{key:"addEndpoints",value:function(){var k=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[k],k,0)}},{key:"createSplitEdge",value:function(k,g){var v=g.segmentIndex-k.segmentIndex+2,I=this.edge.pts[g.segmentIndex],H=g.dist>0||!g.coord.equals2D(I);H||v--;var ne=new Array(v).fill(null),Se=0;ne[Se++]=new Ke(k.coord);for(var Le=k.segmentIndex+1;Le<=g.segmentIndex;Le++)ne[Se++]=this.edge.pts[Le];return H&&(ne[Se]=g.coord),new bo(ne,new Bo(this.edge._label))}},{key:"add",value:function(k,g,v){var I=new Fc(k,g,v),H=this._nodeMap.get(I);return H!==null?H:(this._nodeMap.put(I,I),I)}},{key:"isIntersection",value:function(k){for(var g=this.iterator();g.hasNext();)if(g.next().coord.equals(k))return!0;return!1}}],[{key:"constructor_",value:function(){this._nodeMap=new Vu,this.edge=null;var k=arguments[0];this.edge=k}}])}(),mu=function(){function k(){d(this,k),k.constructor_.apply(this,arguments)}return r(k,[{key:"isIntersects",value:function(){return!this.isDisjoint()}},{key:"isCovers",value:function(){return(k.isTrue(this._matrix[le.INTERIOR][le.INTERIOR])||k.isTrue(this._matrix[le.INTERIOR][le.BOUNDARY])||k.isTrue(this._matrix[le.BOUNDARY][le.INTERIOR])||k.isTrue(this._matrix[le.BOUNDARY][le.BOUNDARY]))&&this._matrix[le.EXTERIOR][le.INTERIOR]===_r.FALSE&&this._matrix[le.EXTERIOR][le.BOUNDARY]===_r.FALSE}},{key:"isCoveredBy",value:function(){return(k.isTrue(this._matrix[le.INTERIOR][le.INTERIOR])||k.isTrue(this._matrix[le.INTERIOR][le.BOUNDARY])||k.isTrue(this._matrix[le.BOUNDARY][le.INTERIOR])||k.isTrue(this._matrix[le.BOUNDARY][le.BOUNDARY]))&&this._matrix[le.INTERIOR][le.EXTERIOR]===_r.FALSE&&this._matrix[le.BOUNDARY][le.EXTERIOR]===_r.FALSE}},{key:"set",value:function(){if(arguments.length===1)for(var g=arguments[0],v=0;v<g.length;v++){var I=Math.trunc(v/3),H=v%3;this._matrix[I][H]=_r.toDimensionValue(g.charAt(v))}else if(arguments.length===3){var ne=arguments[0],Se=arguments[1],Le=arguments[2];this._matrix[ne][Se]=Le}}},{key:"isContains",value:function(){return k.isTrue(this._matrix[le.INTERIOR][le.INTERIOR])&&this._matrix[le.EXTERIOR][le.INTERIOR]===_r.FALSE&&this._matrix[le.EXTERIOR][le.BOUNDARY]===_r.FALSE}},{key:"setAtLeast",value:function(){if(arguments.length===1)for(var g=arguments[0],v=0;v<g.length;v++){var I=Math.trunc(v/3),H=v%3;this.setAtLeast(I,H,_r.toDimensionValue(g.charAt(v)))}else if(arguments.length===3){var ne=arguments[0],Se=arguments[1],Le=arguments[2];this._matrix[ne][Se]<Le&&(this._matrix[ne][Se]=Le)}}},{key:"setAtLeastIfValid",value:function(g,v,I){g>=0&&v>=0&&this.setAtLeast(g,v,I)}},{key:"isWithin",value:function(){return k.isTrue(this._matrix[le.INTERIOR][le.INTERIOR])&&this._matrix[le.INTERIOR][le.EXTERIOR]===_r.FALSE&&this._matrix[le.BOUNDARY][le.EXTERIOR]===_r.FALSE}},{key:"isTouches",value:function(g,v){return g>v?this.isTouches(v,g):(g===_r.A&&v===_r.A||g===_r.L&&v===_r.L||g===_r.L&&v===_r.A||g===_r.P&&v===_r.A||g===_r.P&&v===_r.L)&&this._matrix[le.INTERIOR][le.INTERIOR]===_r.FALSE&&(k.isTrue(this._matrix[le.INTERIOR][le.BOUNDARY])||k.isTrue(this._matrix[le.BOUNDARY][le.INTERIOR])||k.isTrue(this._matrix[le.BOUNDARY][le.BOUNDARY]))}},{key:"isOverlaps",value:function(g,v){return g===_r.P&&v===_r.P||g===_r.A&&v===_r.A?k.isTrue(this._matrix[le.INTERIOR][le.INTERIOR])&&k.isTrue(this._matrix[le.INTERIOR][le.EXTERIOR])&&k.isTrue(this._matrix[le.EXTERIOR][le.INTERIOR]):g===_r.L&&v===_r.L&&this._matrix[le.INTERIOR][le.INTERIOR]===1&&k.isTrue(this._matrix[le.INTERIOR][le.EXTERIOR])&&k.isTrue(this._matrix[le.EXTERIOR][le.INTERIOR])}},{key:"isEquals",value:function(g,v){return g===v&&k.isTrue(this._matrix[le.INTERIOR][le.INTERIOR])&&this._matrix[le.INTERIOR][le.EXTERIOR]===_r.FALSE&&this._matrix[le.BOUNDARY][le.EXTERIOR]===_r.FALSE&&this._matrix[le.EXTERIOR][le.INTERIOR]===_r.FALSE&&this._matrix[le.EXTERIOR][le.BOUNDARY]===_r.FALSE}},{key:"toString",value:function(){for(var g=new Rr("123456789"),v=0;v<3;v++)for(var I=0;I<3;I++)g.setCharAt(3*v+I,_r.toDimensionSymbol(this._matrix[v][I]));return g.toString()}},{key:"setAll",value:function(g){for(var v=0;v<3;v++)for(var I=0;I<3;I++)this._matrix[v][I]=g}},{key:"get",value:function(g,v){return this._matrix[g][v]}},{key:"transpose",value:function(){var g=this._matrix[1][0];return this._matrix[1][0]=this._matrix[0][1],this._matrix[0][1]=g,g=this._matrix[2][0],this._matrix[2][0]=this._matrix[0][2],this._matrix[0][2]=g,g=this._matrix[2][1],this._matrix[2][1]=this._matrix[1][2],this._matrix[1][2]=g,this}},{key:"matches",value:function(g){if(g.length!==9)throw new J("Should be length 9: "+g);for(var v=0;v<3;v++)for(var I=0;I<3;I++)if(!k.matches(this._matrix[v][I],g.charAt(3*v+I)))return!1;return!0}},{key:"add",value:function(g){for(var v=0;v<3;v++)for(var I=0;I<3;I++)this.setAtLeast(v,I,g.get(v,I))}},{key:"isDisjoint",value:function(){return this._matrix[le.INTERIOR][le.INTERIOR]===_r.FALSE&&this._matrix[le.INTERIOR][le.BOUNDARY]===_r.FALSE&&this._matrix[le.BOUNDARY][le.INTERIOR]===_r.FALSE&&this._matrix[le.BOUNDARY][le.BOUNDARY]===_r.FALSE}},{key:"isCrosses",value:function(g,v){return g===_r.P&&v===_r.L||g===_r.P&&v===_r.A||g===_r.L&&v===_r.A?k.isTrue(this._matrix[le.INTERIOR][le.INTERIOR])&&k.isTrue(this._matrix[le.INTERIOR][le.EXTERIOR]):g===_r.L&&v===_r.P||g===_r.A&&v===_r.P||g===_r.A&&v===_r.L?k.isTrue(this._matrix[le.INTERIOR][le.INTERIOR])&&k.isTrue(this._matrix[le.EXTERIOR][le.INTERIOR]):g===_r.L&&v===_r.L&&this._matrix[le.INTERIOR][le.INTERIOR]===0}},{key:"interfaces_",get:function(){return[fe]}}],[{key:"constructor_",value:function(){if(this._matrix=null,arguments.length===0)this._matrix=Array(3).fill().map(function(){return Array(3)}),this.setAll(_r.FALSE);else if(arguments.length===1){if(typeof arguments[0]=="string"){var g=arguments[0];k.constructor_.call(this),this.set(g)}else if(arguments[0]instanceof k){var v=arguments[0];k.constructor_.call(this),this._matrix[le.INTERIOR][le.INTERIOR]=v._matrix[le.INTERIOR][le.INTERIOR],this._matrix[le.INTERIOR][le.BOUNDARY]=v._matrix[le.INTERIOR][le.BOUNDARY],this._matrix[le.INTERIOR][le.EXTERIOR]=v._matrix[le.INTERIOR][le.EXTERIOR],this._matrix[le.BOUNDARY][le.INTERIOR]=v._matrix[le.BOUNDARY][le.INTERIOR],this._matrix[le.BOUNDARY][le.BOUNDARY]=v._matrix[le.BOUNDARY][le.BOUNDARY],this._matrix[le.BOUNDARY][le.EXTERIOR]=v._matrix[le.BOUNDARY][le.EXTERIOR],this._matrix[le.EXTERIOR][le.INTERIOR]=v._matrix[le.EXTERIOR][le.INTERIOR],this._matrix[le.EXTERIOR][le.BOUNDARY]=v._matrix[le.EXTERIOR][le.BOUNDARY],this._matrix[le.EXTERIOR][le.EXTERIOR]=v._matrix[le.EXTERIOR][le.EXTERIOR]}}}},{key:"matches",value:function(){if(Number.isInteger(arguments[0])&&typeof arguments[1]=="string"){var g=arguments[0],v=arguments[1];return v===_r.SYM_DONTCARE||v===_r.SYM_TRUE&&(g>=0||g===_r.TRUE)||v===_r.SYM_FALSE&&g===_r.FALSE||v===_r.SYM_P&&g===_r.P||v===_r.SYM_L&&g===_r.L||v===_r.SYM_A&&g===_r.A}if(typeof arguments[0]=="string"&&typeof arguments[1]=="string"){var I=arguments[1];return new k(arguments[0]).matches(I)}}},{key:"isTrue",value:function(g){return g>=0||g===_r.TRUE}}])}(),tm=function(){function k(){d(this,k),k.constructor_.apply(this,arguments)}return r(k,[{key:"size",value:function(){return this._size}},{key:"addAll",value:function(g){return g===null||g.length===0?null:(this.ensureCapacity(this._size+g.length),vr.arraycopy(g,0,this._data,this._size,g.length),void(this._size+=g.length))}},{key:"ensureCapacity",value:function(g){if(g<=this._data.length)return null;var v=Math.max(g,2*this._data.length);this._data=dt.copyOf(this._data,v)}},{key:"toArray",value:function(){var g=new Array(this._size).fill(null);return vr.arraycopy(this._data,0,g,0,this._size),g}},{key:"add",value:function(g){this.ensureCapacity(this._size+1),this._data[this._size]=g,++this._size}}],[{key:"constructor_",value:function(){if(this._data=null,this._size=0,arguments.length===0)k.constructor_.call(this,10);else if(arguments.length===1){var g=arguments[0];this._data=new Array(g).fill(null)}}}])}(),Wa=function(){function k(){d(this,k)}return r(k,[{key:"getChainStartIndices",value:function(g){var v=0,I=new tm(Math.trunc(g.length/2));I.add(v);do{var H=this.findChainEnd(g,v);I.add(H),v=H}while(v<g.length-1);return I.toArray()}},{key:"findChainEnd",value:function(g,v){for(var I=yo.quadrant(g[v],g[v+1]),H=v+1;H<g.length&&yo.quadrant(g[H-1],g[H])===I;)H++;return H-1}},{key:"OLDgetChainStartIndices",value:function(g){var v=0,I=new yt;I.add(v);do{var H=this.findChainEnd(g,v);I.add(H),v=H}while(v<g.length-1);return k.toIntArray(I)}}],[{key:"toIntArray",value:function(g){for(var v=new Array(g.size()).fill(null),I=0;I<v.length;I++)v[I]=g.get(I).intValue();return v}}])}(),Yo=function(){return r(function k(){d(this,k),k.constructor_.apply(this,arguments)},[{key:"getCoordinates",value:function(){return this.pts}},{key:"getMaxX",value:function(k){var g=this.pts[this.startIndex[k]].x,v=this.pts[this.startIndex[k+1]].x;return g>v?g:v}},{key:"getMinX",value:function(k){var g=this.pts[this.startIndex[k]].x,v=this.pts[this.startIndex[k+1]].x;return g<v?g:v}},{key:"computeIntersectsForChain",value:function(){if(arguments.length===4){var k=arguments[0],g=arguments[1],v=arguments[2],I=arguments[3];this.computeIntersectsForChain(this.startIndex[k],this.startIndex[k+1],g,g.startIndex[v],g.startIndex[v+1],I)}else if(arguments.length===6){var H=arguments[0],ne=arguments[1],Se=arguments[2],Le=arguments[3],et=arguments[4],Et=arguments[5];if(ne-H==1&&et-Le==1)return Et.addIntersections(this.e,H,Se.e,Le),null;if(!this.overlaps(H,ne,Se,Le,et))return null;var tn=Math.trunc((H+ne)/2),vn=Math.trunc((Le+et)/2);H<tn&&(Le<vn&&this.computeIntersectsForChain(H,tn,Se,Le,vn,Et),vn<et&&this.computeIntersectsForChain(H,tn,Se,vn,et,Et)),tn<ne&&(Le<vn&&this.computeIntersectsForChain(tn,ne,Se,Le,vn,Et),vn<et&&this.computeIntersectsForChain(tn,ne,Se,vn,et,Et))}}},{key:"overlaps",value:function(k,g,v,I,H){return xn.intersects(this.pts[k],this.pts[g],v.pts[I],v.pts[H])}},{key:"getStartIndexes",value:function(){return this.startIndex}},{key:"computeIntersects",value:function(k,g){for(var v=0;v<this.startIndex.length-1;v++)for(var I=0;I<k.startIndex.length-1;I++)this.computeIntersectsForChain(v,k,I,g)}}],[{key:"constructor_",value:function(){this.e=null,this.pts=null,this.startIndex=null;var k=arguments[0];this.e=k,this.pts=k.getCoordinates();var g=new Wa;this.startIndex=g.getChainStartIndices(this.pts)}}])}(),Vc=function(){function k(){d(this,k),k.constructor_.apply(this,arguments)}return r(k,[{key:"getDepth",value:function(g,v){return this._depth[g][v]}},{key:"setDepth",value:function(g,v,I){this._depth[g][v]=I}},{key:"isNull",value:function(){if(arguments.length===0){for(var g=0;g<2;g++)for(var v=0;v<3;v++)if(this._depth[g][v]!==k.NULL_VALUE)return!1;return!0}if(arguments.length===1){var I=arguments[0];return this._depth[I][1]===k.NULL_VALUE}if(arguments.length===2){var H=arguments[0],ne=arguments[1];return this._depth[H][ne]===k.NULL_VALUE}}},{key:"normalize",value:function(){for(var g=0;g<2;g++)if(!this.isNull(g)){var v=this._depth[g][1];this._depth[g][2]<v&&(v=this._depth[g][2]),v<0&&(v=0);for(var I=1;I<3;I++){var H=0;this._depth[g][I]>v&&(H=1),this._depth[g][I]=H}}}},{key:"getDelta",value:function(g){return this._depth[g][bt.RIGHT]-this._depth[g][bt.LEFT]}},{key:"getLocation",value:function(g,v){return this._depth[g][v]<=0?le.EXTERIOR:le.INTERIOR}},{key:"toString",value:function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]}},{key:"add",value:function(){if(arguments.length===1)for(var g=arguments[0],v=0;v<2;v++)for(var I=1;I<3;I++){var H=g.getLocation(v,I);H!==le.EXTERIOR&&H!==le.INTERIOR||(this.isNull(v,I)?this._depth[v][I]=k.depthAtLocation(H):this._depth[v][I]+=k.depthAtLocation(H))}else if(arguments.length===3){var ne=arguments[0],Se=arguments[1];arguments[2]===le.INTERIOR&&this._depth[ne][Se]++}}}],[{key:"constructor_",value:function(){this._depth=Array(2).fill().map(function(){return Array(3)});for(var g=0;g<2;g++)for(var v=0;v<3;v++)this._depth[g][v]=k.NULL_VALUE}},{key:"depthAtLocation",value:function(g){return g===le.EXTERIOR?0:g===le.INTERIOR?1:k.NULL_VALUE}}])}();Vc.NULL_VALUE=-1;var bo=function(k){function g(){var v;return d(this,g),v=l(this,g),g.constructor_.apply(v,arguments),v}return P(g,k),r(g,[{key:"getDepth",value:function(){return this._depth}},{key:"getCollapsedEdge",value:function(){var v=new Array(2).fill(null);return v[0]=this.pts[0],v[1]=this.pts[1],new g(v,Bo.toLineLabel(this._label))}},{key:"isIsolated",value:function(){return this._isIsolated}},{key:"getCoordinates",value:function(){return this.pts}},{key:"setIsolated",value:function(v){this._isIsolated=v}},{key:"setName",value:function(v){this._name=v}},{key:"equals",value:function(v){if(!(v instanceof g))return!1;var I=v;if(this.pts.length!==I.pts.length)return!1;for(var H=!0,ne=!0,Se=this.pts.length,Le=0;Le<this.pts.length;Le++)if(this.pts[Le].equals2D(I.pts[Le])||(H=!1),this.pts[Le].equals2D(I.pts[--Se])||(ne=!1),!H&&!ne)return!1;return!0}},{key:"getCoordinate",value:function(){if(arguments.length===0)return this.pts.length>0?this.pts[0]:null;if(arguments.length===1){var v=arguments[0];return this.pts[v]}}},{key:"print",value:function(v){v.print("edge "+this._name+": "),v.print("LINESTRING (");for(var I=0;I<this.pts.length;I++)I>0&&v.print(","),v.print(this.pts[I].x+" "+this.pts[I].y);v.print(")  "+this._label+" "+this._depthDelta)}},{key:"computeIM",value:function(v){g.updateIM(this._label,v)}},{key:"isCollapsed",value:function(){return!!this._label.isArea()&&this.pts.length===3&&!!this.pts[0].equals(this.pts[2])}},{key:"isClosed",value:function(){return this.pts[0].equals(this.pts[this.pts.length-1])}},{key:"getMaximumSegmentIndex",value:function(){return this.pts.length-1}},{key:"getDepthDelta",value:function(){return this._depthDelta}},{key:"getNumPoints",value:function(){return this.pts.length}},{key:"printReverse",value:function(v){v.print("edge "+this._name+": ");for(var I=this.pts.length-1;I>=0;I--)v.print(this.pts[I]+" ");v.println("")}},{key:"getMonotoneChainEdge",value:function(){return this._mce===null&&(this._mce=new Yo(this)),this._mce}},{key:"getEnvelope",value:function(){if(this._env===null){this._env=new xn;for(var v=0;v<this.pts.length;v++)this._env.expandToInclude(this.pts[v])}return this._env}},{key:"addIntersection",value:function(v,I,H,ne){var Se=new Ke(v.getIntersection(ne)),Le=I,et=v.getEdgeDistance(H,ne),Et=Le+1;if(Et<this.pts.length){var tn=this.pts[Et];Se.equals2D(tn)&&(Le=Et,et=0)}this.eiList.add(Se,Le,et)}},{key:"toString",value:function(){var v=new Rr;v.append("edge "+this._name+": "),v.append("LINESTRING (");for(var I=0;I<this.pts.length;I++)I>0&&v.append(","),v.append(this.pts[I].x+" "+this.pts[I].y);return v.append(")  "+this._label+" "+this._depthDelta),v.toString()}},{key:"isPointwiseEqual",value:function(v){if(this.pts.length!==v.pts.length)return!1;for(var I=0;I<this.pts.length;I++)if(!this.pts[I].equals2D(v.pts[I]))return!1;return!0}},{key:"setDepthDelta",value:function(v){this._depthDelta=v}},{key:"getEdgeIntersectionList",value:function(){return this.eiList}},{key:"addIntersections",value:function(v,I,H){for(var ne=0;ne<v.getIntersectionNum();ne++)this.addIntersection(v,I,H,ne)}}],[{key:"constructor_",value:function(){if(this.pts=null,this._env=null,this.eiList=new Bc(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new Vc,this._depthDelta=0,arguments.length===1){var v=arguments[0];g.constructor_.call(this,v,null)}else if(arguments.length===2){var I=arguments[0],H=arguments[1];this.pts=I,this._label=H}}},{key:"updateIM",value:function(){if(!(arguments.length===2&&arguments[1]instanceof mu&&arguments[0]instanceof Bo))return F(g,"updateIM",this).apply(this,arguments);var v=arguments[0],I=arguments[1];I.setAtLeastIfValid(v.getLocation(0,bt.ON),v.getLocation(1,bt.ON),1),v.isArea()&&(I.setAtLeastIfValid(v.getLocation(0,bt.LEFT),v.getLocation(1,bt.LEFT),2),I.setAtLeastIfValid(v.getLocation(0,bt.RIGHT),v.getLocation(1,bt.RIGHT),2))}}])}(ki),Ah=function(){function k(){d(this,k),k.constructor_.apply(this,arguments)}return r(k,[{key:"setWorkingPrecisionModel",value:function(g){this._workingPrecisionModel=g}},{key:"insertUniqueEdge",value:function(g){var v=this._edgeList.findEqualEdge(g);if(v!==null){var I=v.getLabel(),H=g.getLabel();v.isPointwiseEqual(g)||(H=new Bo(g.getLabel())).flip(),I.merge(H);var ne=k.depthDelta(H),Se=v.getDepthDelta()+ne;v.setDepthDelta(Se)}else this._edgeList.add(g),g.setDepthDelta(k.depthDelta(g.getLabel()))}},{key:"buildSubgraphs",value:function(g,v){for(var I=new yt,H=g.iterator();H.hasNext();){var ne=H.next(),Se=ne.getRightmostCoordinate(),Le=new Wl(I).getDepth(Se);ne.computeDepth(Le),ne.findResultEdges(),I.add(ne),v.add(ne.getDirectedEdges(),ne.getNodes())}}},{key:"createSubgraphs",value:function(g){for(var v=new yt,I=g.getNodes().iterator();I.hasNext();){var H=I.next();if(!H.isVisited()){var ne=new ln;ne.create(H),v.add(ne)}}return Ua.sort(v,Ua.reverseOrder()),v}},{key:"createEmptyResultGeometry",value:function(){return this._geomFact.createPolygon()}},{key:"getNoder",value:function(g){if(this._workingNoder!==null)return this._workingNoder;var v=new Lc,I=new Ul;return I.setPrecisionModel(g),v.setSegmentIntersector(new Pr(I)),v}},{key:"buffer",value:function(g,v){var I=this._workingPrecisionModel;I===null&&(I=g.getPrecisionModel()),this._geomFact=g.getFactory();var H=new Dc(I,this._bufParams),ne=new Ko(g,v,H).getCurves();if(ne.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(ne,I),this._graph=new Pd(new qa),this._graph.addEdges(this._edgeList.getEdges());var Se=this.createSubgraphs(this._graph),Le=new al(this._geomFact);this.buildSubgraphs(Se,Le);var et=Le.getPolygons();return et.size()<=0?this.createEmptyResultGeometry():this._geomFact.buildGeometry(et)}},{key:"computeNodedEdges",value:function(g,v){var I=this.getNoder(v);I.computeNodes(g);for(var H=I.getNodedSubstrings().iterator();H.hasNext();){var ne=H.next(),Se=ne.getCoordinates();if(Se.length!==2||!Se[0].equals2D(Se[1])){var Le=ne.getData(),et=new bo(ne.getCoordinates(),new Bo(Le));this.insertUniqueEdge(et)}}}},{key:"setNoder",value:function(g){this._workingNoder=g}}],[{key:"constructor_",value:function(){this._bufParams=null,this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new to;var g=arguments[0];this._bufParams=g}},{key:"depthDelta",value:function(g){var v=g.getLocation(0,bt.LEFT),I=g.getLocation(0,bt.RIGHT);return v===le.INTERIOR&&I===le.EXTERIOR?1:v===le.EXTERIOR&&I===le.INTERIOR?-1:0}},{key:"convertSegStrings",value:function(g){for(var v=new io,I=new yt;g.hasNext();){var H=g.next(),ne=v.createLineString(H.getCoordinates());I.add(ne)}return v.buildGeometry(I)}}])}(),Tl=function(){function k(){d(this,k),k.constructor_.apply(this,arguments)}return r(k,[{key:"rescale",value:function(){if(Ot(arguments[0],nt))for(var g=arguments[0].iterator();g.hasNext();){var v=g.next();this.rescale(v.getCoordinates())}else if(arguments[0]instanceof Array){for(var I=arguments[0],H=0;H<I.length;H++)I[H].x=I[H].x/this._scaleFactor+this._offsetX,I[H].y=I[H].y/this._scaleFactor+this._offsetY;I.length===2&&I[0].equals2D(I[1])&&vr.out.println(I)}}},{key:"scale",value:function(){if(Ot(arguments[0],nt)){for(var g=arguments[0],v=new yt(g.size()),I=g.iterator();I.hasNext();){var H=I.next();v.add(new Ga(this.scale(H.getCoordinates()),H.getData()))}return v}if(arguments[0]instanceof Array){for(var ne=arguments[0],Se=new Array(ne.length).fill(null),Le=0;Le<ne.length;Le++)Se[Le]=new Ke(Math.round((ne[Le].x-this._offsetX)*this._scaleFactor),Math.round((ne[Le].y-this._offsetY)*this._scaleFactor),ne[Le].getZ());return jt.removeRepeatedPoints(Se)}}},{key:"isIntegerPrecision",value:function(){return this._scaleFactor===1}},{key:"getNodedSubstrings",value:function(){var g=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(g),g}},{key:"computeNodes",value:function(g){var v=g;this._isScaled&&(v=this.scale(g)),this._noder.computeNodes(v)}},{key:"interfaces_",get:function(){return[ll]}}],[{key:"constructor_",value:function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,arguments.length===2){var g=arguments[0],v=arguments[1];k.constructor_.call(this,g,v,0,0)}else if(arguments.length===4){var I=arguments[0],H=arguments[1];this._noder=I,this._scaleFactor=H,this._isScaled=!this.isIntegerPrecision()}}}])}(),Oo=function(){function k(){d(this,k),k.constructor_.apply(this,arguments)}return r(k,[{key:"checkEndPtVertexIntersections",value:function(){if(arguments.length===0)for(var g=this._segStrings.iterator();g.hasNext();){var v=g.next().getCoordinates();this.checkEndPtVertexIntersections(v[0],this._segStrings),this.checkEndPtVertexIntersections(v[v.length-1],this._segStrings)}else if(arguments.length===2){for(var I=arguments[0],H=arguments[1].iterator();H.hasNext();)for(var ne=H.next().getCoordinates(),Se=1;Se<ne.length-1;Se++)if(ne[Se].equals(I))throw new ft("found endpt/interior pt intersection at index "+Se+" :pt "+I)}}},{key:"checkInteriorIntersections",value:function(){if(arguments.length===0)for(var g=this._segStrings.iterator();g.hasNext();)for(var v=g.next(),I=this._segStrings.iterator();I.hasNext();){var H=I.next();this.checkInteriorIntersections(v,H)}else if(arguments.length===2)for(var ne=arguments[0],Se=arguments[1],Le=ne.getCoordinates(),et=Se.getCoordinates(),Et=0;Et<Le.length-1;Et++)for(var tn=0;tn<et.length-1;tn++)this.checkInteriorIntersections(ne,Et,Se,tn);else if(arguments.length===4){var vn=arguments[0],or=arguments[1],$r=arguments[2],Xr=arguments[3];if(vn===$r&&or===Xr)return null;var _i=vn.getCoordinates()[or],fs=vn.getCoordinates()[or+1],ss=$r.getCoordinates()[Xr],rs=$r.getCoordinates()[Xr+1];if(this._li.computeIntersection(_i,fs,ss,rs),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,_i,fs)||this.hasInteriorIntersection(this._li,ss,rs)))throw new ft("found non-noded intersection at "+_i+"-"+fs+" and "+ss+"-"+rs)}}},{key:"checkValid",value:function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()}},{key:"checkCollapses",value:function(){if(arguments.length===0)for(var g=this._segStrings.iterator();g.hasNext();){var v=g.next();this.checkCollapses(v)}else if(arguments.length===1)for(var I=arguments[0].getCoordinates(),H=0;H<I.length-2;H++)this.checkCollapse(I[H],I[H+1],I[H+2])}},{key:"hasInteriorIntersection",value:function(g,v,I){for(var H=0;H<g.getIntersectionNum();H++){var ne=g.getIntersection(H);if(!ne.equals(v)&&!ne.equals(I))return!0}return!1}},{key:"checkCollapse",value:function(g,v,I){if(g.equals(I))throw new ft("found non-noded collapse at "+k.fact.createLineString([g,v,I]))}}],[{key:"constructor_",value:function(){this._li=new Ul,this._segStrings=null;var g=arguments[0];this._segStrings=g}}])}();Oo.fact=new io;var qu=function(){function k(){d(this,k),k.constructor_.apply(this,arguments)}return r(k,[{key:"intersectsScaled",value:function(g,v){var I=Math.min(g.x,v.x),H=Math.max(g.x,v.x),ne=Math.min(g.y,v.y),Se=Math.max(g.y,v.y),Le=this._maxx<I||this._minx>H||this._maxy<ne||this._miny>Se;if(Le)return!1;var et=this.intersectsToleranceSquare(g,v);return ct.isTrue(!(Le&&et),"Found bad envelope test"),et}},{key:"initCorners",value:function(g){var v=.5;this._minx=g.x-v,this._maxx=g.x+v,this._miny=g.y-v,this._maxy=g.y+v,this._corner[0]=new Ke(this._maxx,this._maxy),this._corner[1]=new Ke(this._minx,this._maxy),this._corner[2]=new Ke(this._minx,this._miny),this._corner[3]=new Ke(this._maxx,this._miny)}},{key:"intersects",value:function(g,v){return this._scaleFactor===1?this.intersectsScaled(g,v):(this.copyScaled(g,this._p0Scaled),this.copyScaled(v,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))}},{key:"scale",value:function(g){return Math.round(g*this._scaleFactor)}},{key:"getCoordinate",value:function(){return this._originalPt}},{key:"copyScaled",value:function(g,v){v.x=this.scale(g.x),v.y=this.scale(g.y)}},{key:"getSafeEnvelope",value:function(){if(this._safeEnv===null){var g=k.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new xn(this._originalPt.x-g,this._originalPt.x+g,this._originalPt.y-g,this._originalPt.y+g)}return this._safeEnv}},{key:"intersectsPixelClosure",value:function(g,v){return this._li.computeIntersection(g,v,this._corner[0],this._corner[1]),!!this._li.hasIntersection()||(this._li.computeIntersection(g,v,this._corner[1],this._corner[2]),!!this._li.hasIntersection()||(this._li.computeIntersection(g,v,this._corner[2],this._corner[3]),!!this._li.hasIntersection()||(this._li.computeIntersection(g,v,this._corner[3],this._corner[0]),!!this._li.hasIntersection())))}},{key:"intersectsToleranceSquare",value:function(g,v){var I=!1,H=!1;return this._li.computeIntersection(g,v,this._corner[0],this._corner[1]),!!this._li.isProper()||(this._li.computeIntersection(g,v,this._corner[1],this._corner[2]),!!this._li.isProper()||(this._li.hasIntersection()&&(I=!0),this._li.computeIntersection(g,v,this._corner[2],this._corner[3]),!!this._li.isProper()||(this._li.hasIntersection()&&(H=!0),this._li.computeIntersection(g,v,this._corner[3],this._corner[0]),!!this._li.isProper()||!(!I||!H)||!!g.equals(this._pt)||!!v.equals(this._pt))))}},{key:"addSnappedNode",value:function(g,v){var I=g.getCoordinate(v),H=g.getCoordinate(v+1);return!!this.intersects(I,H)&&(g.addIntersection(this.getCoordinate(),v),!0)}}],[{key:"constructor_",value:function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var g=arguments[0],v=arguments[1],I=arguments[2];if(this._originalPt=g,this._pt=g,this._scaleFactor=v,this._li=I,v<=0)throw new J("Scale factor must be non-zero");v!==1&&(this._pt=new Ke(this.scale(g.x),this.scale(g.y)),this._p0Scaled=new Ke,this._p1Scaled=new Ke),this.initCorners(this._pt)}}])}();qu.SAFE_ENV_EXPANSION_FACTOR=.75;var v0=function(){return r(function k(){d(this,k),k.constructor_.apply(this,arguments)},[{key:"select",value:function(){if(arguments.length!==1){if(arguments.length===2){var k=arguments[1];arguments[0].getLineSegment(k,this.selectedSegment),this.select(this.selectedSegment)}}}}],[{key:"constructor_",value:function(){this.selectedSegment=new nr}}])}(),nm=function(){return r(function k(){d(this,k),k.constructor_.apply(this,arguments)},[{key:"snap",value:function(){if(arguments.length===1){var k=arguments[0];return this.snap(k,null,-1)}if(arguments.length===3){var g=arguments[0],v=arguments[1],I=arguments[2],H=g.getSafeEnvelope(),ne=new Yl(g,v,I);return this._index.query(H,new(function(){return r(function Se(){d(this,Se)},[{key:"interfaces_",get:function(){return[Hu]}},{key:"visitItem",value:function(Se){Se.select(H,ne)}}])}())),ne.isNodeAdded()}}}],[{key:"constructor_",value:function(){this._index=null;var k=arguments[0];this._index=k}}])}(),Yl=function(k){function g(){var v;return d(this,g),v=l(this,g),g.constructor_.apply(v,arguments),v}return P(g,k),r(g,[{key:"isNodeAdded",value:function(){return this._isNodeAdded}},{key:"select",value:function(){if(!(arguments.length===2&&Number.isInteger(arguments[1])&&arguments[0]instanceof Di))return F(g,"select",this,1).apply(this,arguments);var v=arguments[1],I=arguments[0].getContext();if(this._parentEdge===I&&(v===this._hotPixelVertexIndex||v+1===this._hotPixelVertexIndex))return null;this._isNodeAdded|=this._hotPixel.addSnappedNode(I,v)}}],[{key:"constructor_",value:function(){this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var v=arguments[0],I=arguments[1],H=arguments[2];this._hotPixel=v,this._parentEdge=I,this._hotPixelVertexIndex=H}}])}(v0);nm.HotPixelSnapAction=Yl;var $c=function(){return r(function k(){d(this,k),k.constructor_.apply(this,arguments)},[{key:"processIntersections",value:function(k,g,v,I){if(k===v&&g===I)return null;var H=k.getCoordinates()[g],ne=k.getCoordinates()[g+1],Se=v.getCoordinates()[I],Le=v.getCoordinates()[I+1];if(this._li.computeIntersection(H,ne,Se,Le),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var et=0;et<this._li.getIntersectionNum();et++)this._interiorIntersections.add(this._li.getIntersection(et));k.addIntersections(this._li,g,0),v.addIntersections(this._li,I,1)}}},{key:"isDone",value:function(){return!1}},{key:"getInteriorIntersections",value:function(){return this._interiorIntersections}},{key:"interfaces_",get:function(){return[Nc]}}],[{key:"constructor_",value:function(){this._li=null,this._interiorIntersections=null;var k=arguments[0];this._li=k,this._interiorIntersections=new yt}}])}(),Wu=function(){return r(function k(){d(this,k),k.constructor_.apply(this,arguments)},[{key:"checkCorrectness",value:function(k){var g=Ga.getNodedSubstrings(k),v=new Oo(g);try{v.checkValid()}catch(I){if(!(I instanceof Y))throw I;I.printStackTrace()}}},{key:"getNodedSubstrings",value:function(){return Ga.getNodedSubstrings(this._nodedSegStrings)}},{key:"snapRound",value:function(k,g){var v=this.findInteriorIntersections(k,g);this.computeIntersectionSnaps(v),this.computeVertexSnaps(k)}},{key:"findInteriorIntersections",value:function(k,g){var v=new $c(g);return this._noder.setSegmentIntersector(v),this._noder.computeNodes(k),v.getInteriorIntersections()}},{key:"computeVertexSnaps",value:function(){if(Ot(arguments[0],nt))for(var k=arguments[0].iterator();k.hasNext();){var g=k.next();this.computeVertexSnaps(g)}else if(arguments[0]instanceof Ga)for(var v=arguments[0],I=v.getCoordinates(),H=0;H<I.length;H++){var ne=new qu(I[H],this._scaleFactor,this._li);this._pointSnapper.snap(ne,v,H)&&v.addIntersection(I[H],H)}}},{key:"computeNodes",value:function(k){this._nodedSegStrings=k,this._noder=new Lc,this._pointSnapper=new nm(this._noder.getIndex()),this.snapRound(k,this._li)}},{key:"computeIntersectionSnaps",value:function(k){for(var g=k.iterator();g.hasNext();){var v=g.next(),I=new qu(v,this._scaleFactor,this._li);this._pointSnapper.snap(I)}}},{key:"interfaces_",get:function(){return[ll]}}],[{key:"constructor_",value:function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var k=arguments[0];this._pm=k,this._li=new Ul,this._li.setPrecisionModel(k),this._scaleFactor=k.getScale()}}])}(),ul=function(){function k(){d(this,k),k.constructor_.apply(this,arguments)}return r(k,[{key:"bufferFixedPrecision",value:function(g){var v=new Tl(new Wu(new $i(1)),g.getScale()),I=new Ah(this._bufParams);I.setWorkingPrecisionModel(g),I.setNoder(v),this._resultGeometry=I.buffer(this._argGeom,this._distance)}},{key:"bufferReducedPrecision",value:function(){if(arguments.length===0){for(var g=k.MAX_PRECISION_DIGITS;g>=0;g--){try{this.bufferReducedPrecision(g)}catch(ne){if(!(ne instanceof Fr))throw ne;this._saveException=ne}if(this._resultGeometry!==null)return null}throw this._saveException}if(arguments.length===1){var v=arguments[0],I=k.precisionScaleFactor(this._argGeom,this._distance,v),H=new $i(I);this.bufferFixedPrecision(H)}}},{key:"computeGeometry",value:function(){if(this.bufferOriginalPrecision(),this._resultGeometry!==null)return null;var g=this._argGeom.getFactory().getPrecisionModel();g.getType()===$i.FIXED?this.bufferFixedPrecision(g):this.bufferReducedPrecision()}},{key:"setQuadrantSegments",value:function(g){this._bufParams.setQuadrantSegments(g)}},{key:"bufferOriginalPrecision",value:function(){try{var g=new Ah(this._bufParams);this._resultGeometry=g.buffer(this._argGeom,this._distance)}catch(v){if(!(v instanceof ft))throw v;this._saveException=v}}},{key:"getResultGeometry",value:function(g){return this._distance=g,this.computeGeometry(),this._resultGeometry}},{key:"setEndCapStyle",value:function(g){this._bufParams.setEndCapStyle(g)}}],[{key:"constructor_",value:function(){if(this._argGeom=null,this._distance=null,this._bufParams=new W,this._resultGeometry=null,this._saveException=null,arguments.length===1){var g=arguments[0];this._argGeom=g}else if(arguments.length===2){var v=arguments[0],I=arguments[1];this._argGeom=v,this._bufParams=I}}},{key:"bufferOp",value:function(){if(arguments.length===2){var g=arguments[1];return new k(arguments[0]).getResultGeometry(g)}if(arguments.length===3){if(Number.isInteger(arguments[2])&&arguments[0]instanceof Ht&&typeof arguments[1]=="number"){var v=arguments[1],I=arguments[2],H=new k(arguments[0]);return H.setQuadrantSegments(I),H.getResultGeometry(v)}if(arguments[2]instanceof W&&arguments[0]instanceof Ht&&typeof arguments[1]=="number"){var ne=arguments[1];return new k(arguments[0],arguments[2]).getResultGeometry(ne)}}else if(arguments.length===4){var Se=arguments[1],Le=arguments[2],et=arguments[3],Et=new k(arguments[0]);return Et.setQuadrantSegments(Le),Et.setEndCapStyle(et),Et.getResultGeometry(Se)}}},{key:"precisionScaleFactor",value:function(g,v,I){var H=g.getEnvelopeInternal(),ne=Ii.max(Math.abs(H.getMaxX()),Math.abs(H.getMaxY()),Math.abs(H.getMinX()),Math.abs(H.getMinY()))+2*(v>0?v:0),Se=I-Math.trunc(Math.log(ne)/Math.log(10)+1);return Math.pow(10,Se)}}])}();ul.CAP_ROUND=W.CAP_ROUND,ul.CAP_BUTT=W.CAP_FLAT,ul.CAP_FLAT=W.CAP_FLAT,ul.CAP_SQUARE=W.CAP_SQUARE,ul.MAX_PRECISION_DIGITS=12;var rm=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],zd=function(){return r(function k(g){d(this,k),this.geometryFactory=g||new io},[{key:"read",value:function(k){var g,v=(g=typeof k=="string"?JSON.parse(k):k).type;if(!ya[v])throw new Error("Unknown GeoJSON type: "+g.type);return rm.indexOf(v)!==-1?ya[v].call(this,g.coordinates):v==="GeometryCollection"?ya[v].call(this,g.geometries):ya[v].call(this,g)}},{key:"write",value:function(k){var g=k.getGeometryType();if(!Do[g])throw new Error("Geometry is not supported");return Do[g].call(this,k)}}])}(),ya={Feature:function(k){var g={};for(var v in k)g[v]=k[v];if(k.geometry){var I=k.geometry.type;if(!ya[I])throw new Error("Unknown GeoJSON type: "+k.type);g.geometry=this.read(k.geometry)}return k.bbox&&(g.bbox=ya.bbox.call(this,k.bbox)),g},FeatureCollection:function(k){var g={};if(k.features){g.features=[];for(var v=0;v<k.features.length;++v)g.features.push(this.read(k.features[v]))}return k.bbox&&(g.bbox=this.parse.bbox.call(this,k.bbox)),g},coordinates:function(k){for(var g=[],v=0;v<k.length;++v){var I=k[v];g.push(m(Ke,N(I)))}return g},bbox:function(k){return this.geometryFactory.createLinearRing([new Ke(k[0],k[1]),new Ke(k[2],k[1]),new Ke(k[2],k[3]),new Ke(k[0],k[3]),new Ke(k[0],k[1])])},Point:function(k){var g=m(Ke,N(k));return this.geometryFactory.createPoint(g)},MultiPoint:function(k){for(var g=[],v=0;v<k.length;++v)g.push(ya.Point.call(this,k[v]));return this.geometryFactory.createMultiPoint(g)},LineString:function(k){var g=ya.coordinates.call(this,k);return this.geometryFactory.createLineString(g)},MultiLineString:function(k){for(var g=[],v=0;v<k.length;++v)g.push(ya.LineString.call(this,k[v]));return this.geometryFactory.createMultiLineString(g)},Polygon:function(k){for(var g=ya.coordinates.call(this,k[0]),v=this.geometryFactory.createLinearRing(g),I=[],H=1;H<k.length;++H){var ne=k[H],Se=ya.coordinates.call(this,ne),Le=this.geometryFactory.createLinearRing(Se);I.push(Le)}return this.geometryFactory.createPolygon(v,I)},MultiPolygon:function(k){for(var g=[],v=0;v<k.length;++v){var I=k[v];g.push(ya.Polygon.call(this,I))}return this.geometryFactory.createMultiPolygon(g)},GeometryCollection:function(k){for(var g=[],v=0;v<k.length;++v){var I=k[v];g.push(this.read(I))}return this.geometryFactory.createGeometryCollection(g)}},Do={coordinate:function(k){var g=[k.x,k.y];return k.z&&g.push(k.z),k.m&&g.push(k.m),g},Point:function(k){return{type:"Point",coordinates:Do.coordinate.call(this,k.getCoordinate())}},MultiPoint:function(k){for(var g=[],v=0;v<k._geometries.length;++v){var I=k._geometries[v],H=Do.Point.call(this,I);g.push(H.coordinates)}return{type:"MultiPoint",coordinates:g}},LineString:function(k){for(var g=[],v=k.getCoordinates(),I=0;I<v.length;++I){var H=v[I];g.push(Do.coordinate.call(this,H))}return{type:"LineString",coordinates:g}},MultiLineString:function(k){for(var g=[],v=0;v<k._geometries.length;++v){var I=k._geometries[v],H=Do.LineString.call(this,I);g.push(H.coordinates)}return{type:"MultiLineString",coordinates:g}},Polygon:function(k){var g=[],v=Do.LineString.call(this,k._shell);g.push(v.coordinates);for(var I=0;I<k._holes.length;++I){var H=k._holes[I],ne=Do.LineString.call(this,H);g.push(ne.coordinates)}return{type:"Polygon",coordinates:g}},MultiPolygon:function(k){for(var g=[],v=0;v<k._geometries.length;++v){var I=k._geometries[v],H=Do.Polygon.call(this,I);g.push(H.coordinates)}return{type:"MultiPolygon",coordinates:g}},GeometryCollection:function(k){for(var g=[],v=0;v<k._geometries.length;++v){var I=k._geometries[v],H=I.getGeometryType();g.push(Do[H].call(this,I))}return{type:"GeometryCollection",geometries:g}}};return{BufferOp:ul,GeoJSONReader:function(){return r(function k(g){d(this,k),this.parser=new zd(g||new io)},[{key:"read",value:function(k){return this.parser.read(k)}}])}(),GeoJSONWriter:function(){return r(function k(){d(this,k),this.parser=new zd(this.geometryFactory)},[{key:"write",value:function(k){return this.parser.write(k)}}])}()}})}(z2)),z2.exports}var uH=lH();const cH=bc(uH);function Af(){return new bb}function bb(){this.reset()}bb.prototype={constructor:bb,reset:function(){this.s=this.t=0},add:function(e){qk(u2,e,this.t),qk(this,u2.s,this.s),this.s?this.t+=u2.t:this.s=u2.t},valueOf:function(){return this.s}};var u2=new bb;function qk(e,n,s){var l=e.s=n+s,d=l-n,m=l-d;e.t=n-m+(s-d)}var vo=1e-6,Ys=Math.PI,pd=Ys/2,Wk=Ys/4,yd=Ys*2,lf=180/Ys,Su=Ys/180,Ca=Math.abs,dH=Math.atan,zg=Math.atan2,Ro=Math.cos,Po=Math.sin,i0=Math.sqrt;function FP(e){return e>1?0:e<-1?Ys:Math.acos(e)}function $p(e){return e>1?pd:e<-1?-pd:Math.asin(e)}function X_(){}function xb(e,n){e&&Yk.hasOwnProperty(e.type)&&Yk[e.type](e,n)}var Kk={Feature:function(e,n){xb(e.geometry,n)},FeatureCollection:function(e,n){for(var s=e.features,l=-1,d=s.length;++l<d;)xb(s[l].geometry,n)}},Yk={Sphere:function(e,n){n.sphere()},Point:function(e,n){e=e.coordinates,n.point(e[0],e[1],e[2])},MultiPoint:function(e,n){for(var s=e.coordinates,l=-1,d=s.length;++l<d;)e=s[l],n.point(e[0],e[1],e[2])},LineString:function(e,n){B4(e.coordinates,n,0)},MultiLineString:function(e,n){for(var s=e.coordinates,l=-1,d=s.length;++l<d;)B4(s[l],n,0)},Polygon:function(e,n){Zk(e.coordinates,n)},MultiPolygon:function(e,n){for(var s=e.coordinates,l=-1,d=s.length;++l<d;)Zk(s[l],n)},GeometryCollection:function(e,n){for(var s=e.geometries,l=-1,d=s.length;++l<d;)xb(s[l],n)}};function B4(e,n,s){var l=-1,d=e.length-s,m;for(n.lineStart();++l<d;)m=e[l],n.point(m[0],m[1],m[2]);n.lineEnd()}function Zk(e,n){var s=-1,l=e.length;for(n.polygonStart();++s<l;)B4(e[s],n,1);n.polygonEnd()}function hH(e,n){e&&Kk.hasOwnProperty(e.type)?Kk[e.type](e,n):xb(e,n)}Af();Af();function V4(e){return[zg(e[1],e[0]),$p(e[2])]}function Ng(e){var n=e[0],s=e[1],l=Ro(s);return[l*Ro(n),l*Po(n),Po(s)]}function c2(e,n){return e[0]*n[0]+e[1]*n[1]+e[2]*n[2]}function wb(e,n){return[e[1]*n[2]-e[2]*n[1],e[2]*n[0]-e[0]*n[2],e[0]*n[1]-e[1]*n[0]]}function W3(e,n){e[0]+=n[0],e[1]+=n[1],e[2]+=n[2]}function d2(e,n){return[e[0]*n,e[1]*n,e[2]*n]}function $4(e){var n=i0(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=n,e[1]/=n,e[2]/=n}Af();function BP(e,n){function s(l,d){return l=e(l,d),n(l[0],l[1])}return e.invert&&n.invert&&(s.invert=function(l,d){return l=n.invert(l,d),l&&e.invert(l[0],l[1])}),s}function H4(e,n){return[e>Ys?e-yd:e<-Ys?e+yd:e,n]}H4.invert=H4;function fH(e,n,s){return(e%=yd)?n||s?BP(Jk(e),Qk(n,s)):Jk(e):n||s?Qk(n,s):H4}function Xk(e){return function(n,s){return n+=e,[n>Ys?n-yd:n<-Ys?n+yd:n,s]}}function Jk(e){var n=Xk(e);return n.invert=Xk(-e),n}function Qk(e,n){var s=Ro(e),l=Po(e),d=Ro(n),m=Po(n);function b(r,E){var M=Ro(E),A=Ro(r)*M,P=Po(r)*M,D=Po(E),z=D*s+A*l;return[zg(P*d-z*m,A*s-D*l),$p(z*d+P*m)]}return b.invert=function(r,E){var M=Ro(E),A=Ro(r)*M,P=Po(r)*M,D=Po(E),z=D*d-P*m;return[zg(P*d+D*m,A*s+z*l),$p(z*s-A*l)]},b}function pH(e,n,s,l,d,m){if(s){var b=Ro(n),r=Po(n),E=l*s;d==null?(d=n+l*yd,m=n-E/2):(d=e5(b,d),m=e5(b,m),(l>0?d<m:d>m)&&(d+=l*yd));for(var M,A=d;l>0?A>m:A<m;A-=E)M=V4([b,-r*Ro(A),-r*Po(A)]),e.point(M[0],M[1])}}function e5(e,n){n=Ng(n),n[0]-=e,$4(n);var s=FP(-n[1]);return((-n[2]<0?-s:s)+yd-vo)%yd}function VP(){var e=[],n;return{point:function(s,l){n.push([s,l])},lineStart:function(){e.push(n=[])},lineEnd:X_,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var s=e;return e=[],n=null,s}}}function mH(e,n,s,l,d,m){var b=e[0],r=e[1],E=n[0],M=n[1],A=0,P=1,D=E-b,z=M-r,F;if(F=s-b,!(!D&&F>0)){if(F/=D,D<0){if(F<A)return;F<P&&(P=F)}else if(D>0){if(F>P)return;F>A&&(A=F)}if(F=d-b,!(!D&&F<0)){if(F/=D,D<0){if(F>P)return;F>A&&(A=F)}else if(D>0){if(F<A)return;F<P&&(P=F)}if(F=l-r,!(!z&&F>0)){if(F/=z,z<0){if(F<A)return;F<P&&(P=F)}else if(z>0){if(F>P)return;F>A&&(A=F)}if(F=m-r,!(!z&&F<0)){if(F/=z,z<0){if(F>P)return;F>A&&(A=F)}else if(z>0){if(F<A)return;F<P&&(P=F)}return A>0&&(e[0]=b+A*D,e[1]=r+A*z),P<1&&(n[0]=b+P*D,n[1]=r+P*z),!0}}}}}function N2(e,n){return Ca(e[0]-n[0])<vo&&Ca(e[1]-n[1])<vo}function h2(e,n,s,l){this.x=e,this.z=n,this.o=s,this.e=l,this.v=!1,this.n=this.p=null}function $P(e,n,s,l,d){var m=[],b=[],r,E;if(e.forEach(function(F){if(!((N=F.length-1)<=0)){var N,q=F[0],G=F[N],ie;if(N2(q,G)){for(d.lineStart(),r=0;r<N;++r)d.point((q=F[r])[0],q[1]);d.lineEnd();return}m.push(ie=new h2(q,F,null,!0)),b.push(ie.o=new h2(q,null,ie,!1)),m.push(ie=new h2(G,F,null,!1)),b.push(ie.o=new h2(G,null,ie,!0))}}),!!m.length){for(b.sort(n),t5(m),t5(b),r=0,E=b.length;r<E;++r)b[r].e=s=!s;for(var M=m[0],A,P;;){for(var D=M,z=!0;D.v;)if((D=D.n)===M)return;A=D.z,d.lineStart();do{if(D.v=D.o.v=!0,D.e){if(z)for(r=0,E=A.length;r<E;++r)d.point((P=A[r])[0],P[1]);else l(D.x,D.n.x,1,d);D=D.n}else{if(z)for(A=D.p.z,r=A.length-1;r>=0;--r)d.point((P=A[r])[0],P[1]);else l(D.x,D.p.x,-1,d);D=D.p}D=D.o,A=D.z,z=!z}while(!D.v);d.lineEnd()}}}function t5(e){if(n=e.length){for(var n,s=0,l=e[0],d;++s<n;)l.n=d=e[s],d.p=l,l=d;l.n=d=e[0],d.p=l}}function HP(e,n){return e<n?-1:e>n?1:e>=n?0:NaN}function gH(e){return e.length===1&&(e=_H(e)),{left:function(n,s,l,d){for(l==null&&(l=0),d==null&&(d=n.length);l<d;){var m=l+d>>>1;e(n[m],s)<0?l=m+1:d=m}return l},right:function(n,s,l,d){for(l==null&&(l=0),d==null&&(d=n.length);l<d;){var m=l+d>>>1;e(n[m],s)>0?d=m:l=m+1}return l}}}function _H(e){return function(n,s){return HP(e(n),s)}}gH(HP);function UP(e){for(var n=e.length,s,l=-1,d=0,m,b;++l<n;)d+=e[l].length;for(m=new Array(d);--n>=0;)for(b=e[n],s=b.length;--s>=0;)m[--d]=b[s];return m}var J_=1e9,f2=-J_;function vH(e,n,s,l){function d(M,A){return e<=M&&M<=s&&n<=A&&A<=l}function m(M,A,P,D){var z=0,F=0;if(M==null||(z=b(M,P))!==(F=b(A,P))||E(M,A)<0^P>0)do D.point(z===0||z===3?e:s,z>1?l:n);while((z=(z+P+4)%4)!==F);else D.point(A[0],A[1])}function b(M,A){return Ca(M[0]-e)<vo?A>0?0:3:Ca(M[0]-s)<vo?A>0?2:1:Ca(M[1]-n)<vo?A>0?1:0:A>0?3:2}function r(M,A){return E(M.x,A.x)}function E(M,A){var P=b(M,1),D=b(A,1);return P!==D?P-D:P===0?A[1]-M[1]:P===1?M[0]-A[0]:P===2?M[1]-A[1]:A[0]-M[0]}return function(M){var A=M,P=VP(),D,z,F,N,q,G,ie,W,Y,J,re,he={point:fe,lineStart:ye,lineEnd:Ue,polygonStart:me,polygonEnd:we};function fe(Pe,ve){d(Pe,ve)&&A.point(Pe,ve)}function ce(){for(var Pe=0,ve=0,$e=z.length;ve<$e;++ve)for(var Te=z[ve],Ae=1,Ve=Te.length,We=Te[0],ft,at,ct=We[0],Mt=We[1];Ae<Ve;++Ae)ft=ct,at=Mt,We=Te[Ae],ct=We[0],Mt=We[1],at<=l?Mt>l&&(ct-ft)*(l-at)>(Mt-at)*(e-ft)&&++Pe:Mt<=l&&(ct-ft)*(l-at)<(Mt-at)*(e-ft)&&--Pe;return Pe}function me(){A=P,D=[],z=[],re=!0}function we(){var Pe=ce(),ve=re&&Pe,$e=(D=UP(D)).length;(ve||$e)&&(M.polygonStart(),ve&&(M.lineStart(),m(null,null,1,M),M.lineEnd()),$e&&$P(D,r,Pe,m,M),M.polygonEnd()),A=M,D=z=F=null}function ye(){he.point=Ne,z&&z.push(F=[]),J=!0,Y=!1,ie=W=NaN}function Ue(){D&&(Ne(N,q),G&&Y&&P.rejoin(),D.push(P.result())),he.point=fe,Y&&A.lineEnd()}function Ne(Pe,ve){var $e=d(Pe,ve);if(z&&F.push([Pe,ve]),J)N=Pe,q=ve,G=$e,J=!1,$e&&(A.lineStart(),A.point(Pe,ve));else if($e&&Y)A.point(Pe,ve);else{var Te=[ie=Math.max(f2,Math.min(J_,ie)),W=Math.max(f2,Math.min(J_,W))],Ae=[Pe=Math.max(f2,Math.min(J_,Pe)),ve=Math.max(f2,Math.min(J_,ve))];mH(Te,Ae,e,n,s,l)?(Y||(A.lineStart(),A.point(Te[0],Te[1])),A.point(Ae[0],Ae[1]),$e||A.lineEnd(),re=!1):$e&&(A.lineStart(),A.point(Pe,ve),re=!1)}ie=Pe,W=ve,Y=$e}return he}}var K3=Af();function yH(e,n){var s=n[0],l=n[1],d=[Po(s),-Ro(s),0],m=0,b=0;K3.reset();for(var r=0,E=e.length;r<E;++r)if(A=(M=e[r]).length)for(var M,A,P=M[A-1],D=P[0],z=P[1]/2+Wk,F=Po(z),N=Ro(z),q=0;q<A;++q,D=ie,F=Y,N=J,P=G){var G=M[q],ie=G[0],W=G[1]/2+Wk,Y=Po(W),J=Ro(W),re=ie-D,he=re>=0?1:-1,fe=he*re,ce=fe>Ys,me=F*Y;if(K3.add(zg(me*he*Po(fe),N*J+me*Ro(fe))),m+=ce?re+he*yd:re,ce^D>=s^ie>=s){var we=wb(Ng(P),Ng(G));$4(we);var ye=wb(d,we);$4(ye);var Ue=(ce^re>=0?-1:1)*$p(ye[2]);(l>Ue||l===Ue&&(we[0]||we[1]))&&(b+=ce^re>=0?1:-1)}}return(m<-vo||m<vo&&K3<-vo)^b&1}Af();function n5(e){return e}Af();Af();var Fg=1/0,Sb=Fg,Iv=-Fg,Cb=Iv,r5={point:bH,lineStart:X_,lineEnd:X_,polygonStart:X_,polygonEnd:X_,result:function(){var e=[[Fg,Sb],[Iv,Cb]];return Iv=Cb=-(Sb=Fg=1/0),e}};function bH(e,n){e<Fg&&(Fg=e),e>Iv&&(Iv=e),n<Sb&&(Sb=n),n>Cb&&(Cb=n)}Af();function jP(e,n,s,l){return function(d,m){var b=n(m),r=d.invert(l[0],l[1]),E=VP(),M=n(E),A=!1,P,D,z,F={point:N,lineStart:G,lineEnd:ie,polygonStart:function(){F.point=W,F.lineStart=Y,F.lineEnd=J,D=[],P=[]},polygonEnd:function(){F.point=N,F.lineStart=G,F.lineEnd=ie,D=UP(D);var re=yH(P,r);D.length?(A||(m.polygonStart(),A=!0),$P(D,wH,re,s,m)):re&&(A||(m.polygonStart(),A=!0),m.lineStart(),s(null,null,1,m),m.lineEnd()),A&&(m.polygonEnd(),A=!1),D=P=null},sphere:function(){m.polygonStart(),m.lineStart(),s(null,null,1,m),m.lineEnd(),m.polygonEnd()}};function N(re,he){var fe=d(re,he);e(re=fe[0],he=fe[1])&&m.point(re,he)}function q(re,he){var fe=d(re,he);b.point(fe[0],fe[1])}function G(){F.point=q,b.lineStart()}function ie(){F.point=N,b.lineEnd()}function W(re,he){z.push([re,he]);var fe=d(re,he);M.point(fe[0],fe[1])}function Y(){M.lineStart(),z=[]}function J(){W(z[0][0],z[0][1]),M.lineEnd();var re=M.clean(),he=E.result(),fe,ce=he.length,me,we,ye;if(z.pop(),P.push(z),z=null,!!ce){if(re&1){if(we=he[0],(me=we.length-1)>0){for(A||(m.polygonStart(),A=!0),m.lineStart(),fe=0;fe<me;++fe)m.point((ye=we[fe])[0],ye[1]);m.lineEnd()}return}ce>1&&re&2&&he.push(he.pop().concat(he.shift())),D.push(he.filter(xH))}}return F}}function xH(e){return e.length>1}function wH(e,n){return((e=e.x)[0]<0?e[1]-pd-vo:pd-e[1])-((n=n.x)[0]<0?n[1]-pd-vo:pd-n[1])}const i5=jP(function(){return!0},SH,EH,[-Ys,-pd]);function SH(e){var n=NaN,s=NaN,l=NaN,d;return{lineStart:function(){e.lineStart(),d=1},point:function(m,b){var r=m>0?Ys:-Ys,E=Ca(m-n);Ca(E-Ys)<vo?(e.point(n,s=(s+b)/2>0?pd:-pd),e.point(l,s),e.lineEnd(),e.lineStart(),e.point(r,s),e.point(m,s),d=0):l!==r&&E>=Ys&&(Ca(n-l)<vo&&(n-=l*vo),Ca(m-r)<vo&&(m-=r*vo),s=CH(n,s,m,b),e.point(l,s),e.lineEnd(),e.lineStart(),e.point(r,s),d=0),e.point(n=m,s=b),l=r},lineEnd:function(){e.lineEnd(),n=s=NaN},clean:function(){return 2-d}}}function CH(e,n,s,l){var d,m,b=Po(e-s);return Ca(b)>vo?dH((Po(n)*(m=Ro(l))*Po(s)-Po(l)*(d=Ro(n))*Po(e))/(d*m*b)):(n+l)/2}function EH(e,n,s,l){var d;if(e==null)d=s*pd,l.point(-Ys,d),l.point(0,d),l.point(Ys,d),l.point(Ys,0),l.point(Ys,-d),l.point(0,-d),l.point(-Ys,-d),l.point(-Ys,0),l.point(-Ys,d);else if(Ca(e[0]-n[0])>vo){var m=e[0]<n[0]?Ys:-Ys;d=s*m/2,l.point(-m,d),l.point(0,d),l.point(m,d)}else l.point(n[0],n[1])}function TH(e,n){var s=Ro(e),l=s>0,d=Ca(s)>vo;function m(A,P,D,z){pH(z,e,n,D,A,P)}function b(A,P){return Ro(A)*Ro(P)>s}function r(A){var P,D,z,F,N;return{lineStart:function(){F=z=!1,N=1},point:function(q,G){var ie=[q,G],W,Y=b(q,G),J=l?Y?0:M(q,G):Y?M(q+(q<0?Ys:-Ys),G):0;if(!P&&(F=z=Y)&&A.lineStart(),Y!==z&&(W=E(P,ie),(!W||N2(P,W)||N2(ie,W))&&(ie[0]+=vo,ie[1]+=vo,Y=b(ie[0],ie[1]))),Y!==z)N=0,Y?(A.lineStart(),W=E(ie,P),A.point(W[0],W[1])):(W=E(P,ie),A.point(W[0],W[1]),A.lineEnd()),P=W;else if(d&&P&&l^Y){var re;!(J&D)&&(re=E(ie,P,!0))&&(N=0,l?(A.lineStart(),A.point(re[0][0],re[0][1]),A.point(re[1][0],re[1][1]),A.lineEnd()):(A.point(re[1][0],re[1][1]),A.lineEnd(),A.lineStart(),A.point(re[0][0],re[0][1])))}Y&&(!P||!N2(P,ie))&&A.point(ie[0],ie[1]),P=ie,z=Y,D=J},lineEnd:function(){z&&A.lineEnd(),P=null},clean:function(){return N|(F&&z)<<1}}}function E(A,P,D){var z=Ng(A),F=Ng(P),N=[1,0,0],q=wb(z,F),G=c2(q,q),ie=q[0],W=G-ie*ie;if(!W)return!D&&A;var Y=s*G/W,J=-s*ie/W,re=wb(N,q),he=d2(N,Y),fe=d2(q,J);W3(he,fe);var ce=re,me=c2(he,ce),we=c2(ce,ce),ye=me*me-we*(c2(he,he)-1);if(!(ye<0)){var Ue=i0(ye),Ne=d2(ce,(-me-Ue)/we);if(W3(Ne,he),Ne=V4(Ne),!D)return Ne;var Pe=A[0],ve=P[0],$e=A[1],Te=P[1],Ae;ve<Pe&&(Ae=Pe,Pe=ve,ve=Ae);var Ve=ve-Pe,We=Ca(Ve-Ys)<vo,ft=We||Ve<vo;if(!We&&Te<$e&&(Ae=$e,$e=Te,Te=Ae),ft?We?$e+Te>0^Ne[1]<(Ca(Ne[0]-Pe)<vo?$e:Te):$e<=Ne[1]&&Ne[1]<=Te:Ve>Ys^(Pe<=Ne[0]&&Ne[0]<=ve)){var at=d2(ce,(-me+Ue)/we);return W3(at,he),[Ne,V4(at)]}}}function M(A,P){var D=l?e:Ys-e,z=0;return A<-D?z|=1:A>D&&(z|=2),P<-D?z|=4:P>D&&(z|=8),z}return jP(b,r,m,l?[0,-e]:[-Ys,e-Ys])}function GP(e){return function(n){var s=new U4;for(var l in e)s[l]=e[l];return s.stream=n,s}}function U4(){}U4.prototype={constructor:U4,point:function(e,n){this.stream.point(e,n)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function qP(e,n,s){var l=n[1][0]-n[0][0],d=n[1][1]-n[0][1],m=e.clipExtent&&e.clipExtent();e.scale(150).translate([0,0]),m!=null&&e.clipExtent(null),hH(s,e.stream(r5));var b=r5.result(),r=Math.min(l/(b[1][0]-b[0][0]),d/(b[1][1]-b[0][1])),E=+n[0][0]+(l-r*(b[1][0]+b[0][0]))/2,M=+n[0][1]+(d-r*(b[1][1]+b[0][1]))/2;return m!=null&&e.clipExtent(m),e.scale(r*150).translate([E,M])}function IH(e,n,s){return qP(e,[[0,0],n],s)}var s5=16,kH=Ro(30*Su);function o5(e,n){return+n?AH(e,n):MH(e)}function MH(e){return GP({point:function(n,s){n=e(n,s),this.stream.point(n[0],n[1])}})}function AH(e,n){function s(l,d,m,b,r,E,M,A,P,D,z,F,N,q){var G=M-l,ie=A-d,W=G*G+ie*ie;if(W>4*n&&N--){var Y=b+D,J=r+z,re=E+F,he=i0(Y*Y+J*J+re*re),fe=$p(re/=he),ce=Ca(Ca(re)-1)<vo||Ca(m-P)<vo?(m+P)/2:zg(J,Y),me=e(ce,fe),we=me[0],ye=me[1],Ue=we-l,Ne=ye-d,Pe=ie*Ue-G*Ne;(Pe*Pe/W>n||Ca((G*Ue+ie*Ne)/W-.5)>.3||b*D+r*z+E*F<kH)&&(s(l,d,m,b,r,E,we,ye,ce,Y/=he,J/=he,re,N,q),q.point(we,ye),s(we,ye,ce,Y,J,re,M,A,P,D,z,F,N,q))}}return function(l){var d,m,b,r,E,M,A,P,D,z,F,N,q={point:G,lineStart:ie,lineEnd:Y,polygonStart:function(){l.polygonStart(),q.lineStart=J},polygonEnd:function(){l.polygonEnd(),q.lineStart=ie}};function G(fe,ce){fe=e(fe,ce),l.point(fe[0],fe[1])}function ie(){P=NaN,q.point=W,l.lineStart()}function W(fe,ce){var me=Ng([fe,ce]),we=e(fe,ce);s(P,D,A,z,F,N,P=we[0],D=we[1],A=fe,z=me[0],F=me[1],N=me[2],s5,l),l.point(P,D)}function Y(){q.point=G,l.lineEnd()}function J(){ie(),q.point=re,q.lineEnd=he}function re(fe,ce){W(d=fe,ce),m=P,b=D,r=z,E=F,M=N,q.point=W}function he(){s(P,D,A,z,F,N,m,b,d,r,E,M,s5,l),q.lineEnd=Y,Y()}return q}}var RH=GP({point:function(e,n){this.stream.point(e*Su,n*Su)}});function PH(e){return LH(function(){return e})()}function LH(e){var n,s=150,l=480,d=250,m,b,r=0,E=0,M=0,A=0,P=0,D,z,F=null,N=i5,q=null,G,ie,W,Y=n5,J=.5,re=o5(we,J),he,fe;function ce(Ne){return Ne=z(Ne[0]*Su,Ne[1]*Su),[Ne[0]*s+m,b-Ne[1]*s]}function me(Ne){return Ne=z.invert((Ne[0]-m)/s,(b-Ne[1])/s),Ne&&[Ne[0]*lf,Ne[1]*lf]}function we(Ne,Pe){return Ne=n(Ne,Pe),[Ne[0]*s+m,b-Ne[1]*s]}ce.stream=function(Ne){return he&&fe===Ne?he:he=RH(N(D,re(Y(fe=Ne))))},ce.clipAngle=function(Ne){return arguments.length?(N=+Ne?TH(F=Ne*Su,6*Su):(F=null,i5),Ue()):F*lf},ce.clipExtent=function(Ne){return arguments.length?(Y=Ne==null?(q=G=ie=W=null,n5):vH(q=+Ne[0][0],G=+Ne[0][1],ie=+Ne[1][0],W=+Ne[1][1]),Ue()):q==null?null:[[q,G],[ie,W]]},ce.scale=function(Ne){return arguments.length?(s=+Ne,ye()):s},ce.translate=function(Ne){return arguments.length?(l=+Ne[0],d=+Ne[1],ye()):[l,d]},ce.center=function(Ne){return arguments.length?(r=Ne[0]%360*Su,E=Ne[1]%360*Su,ye()):[r*lf,E*lf]},ce.rotate=function(Ne){return arguments.length?(M=Ne[0]%360*Su,A=Ne[1]%360*Su,P=Ne.length>2?Ne[2]%360*Su:0,ye()):[M*lf,A*lf,P*lf]},ce.precision=function(Ne){return arguments.length?(re=o5(we,J=Ne*Ne),Ue()):i0(J)},ce.fitExtent=function(Ne,Pe){return qP(ce,Ne,Pe)},ce.fitSize=function(Ne,Pe){return IH(ce,Ne,Pe)};function ye(){z=BP(D=fH(M,A,P),n);var Ne=n(r,E);return m=l-Ne[0]*s,b=d+Ne[1]*s,Ue()}function Ue(){return he=fe=null,ce}return function(){return n=e.apply(this,arguments),ce.invert=n.invert&&me,ye()}}function WP(e){return function(n,s){var l=Ro(n),d=Ro(s),m=e(l*d);return[m*d*Po(n),m*Po(s)]}}function KP(e){return function(n,s){var l=i0(n*n+s*s),d=e(l),m=Po(d),b=Ro(d);return[zg(n*m,l*b),$p(l&&s*m/l)]}}var OH=WP(function(e){return i0(2/(1+e))});OH.invert=KP(function(e){return 2*$p(e/2)});var YP=WP(function(e){return(e=FP(e))&&e/Po(e)});YP.invert=KP(function(e){return e});function DH(){return PH(YP).scale(79.4188).clipAngle(180-.001)}function a5(e,n){return[e,n]}a5.invert=a5;var{BufferOp:zH,GeoJSONReader:NH,GeoJSONWriter:FH}=cH;function BH(e,n,s){s=s||{};var l=s.units||"kilometers",d=s.steps||8;if(!e)throw new Error("geojson is required");if(typeof s!="object")throw new Error("options must be an object");if(typeof d!="number")throw new Error("steps must be an number");if(n===void 0)throw new Error("radius is required");if(d<=0)throw new Error("steps must be greater than 0");var m=[];switch(e.type){case"GeometryCollection":return NP(e,function(b){var r=F2(b,n,l,d);r&&m.push(r)}),Dl(m);case"FeatureCollection":return jk(e,function(b){var r=F2(b,n,l,d);r&&jk(r,function(E){E&&m.push(E)})}),Dl(m)}return F2(e,n,l,d)}function F2(e,n,s,l){var d=e.properties||{},m=e.type==="Feature"?e.geometry:e;if(m.type==="GeometryCollection"){var b=[];return NP(e,function(N){var q=F2(N,n,s,l);q&&b.push(q)}),Dl(b)}var r=VH(m),E={type:m.type,coordinates:XP(m.coordinates,r)},M=new NH,A=M.read(E),P=iH(sH(n,s),"meters"),D=zH.bufferOp(A,P,l),z=new FH;if(D=z.write(D),!ZP(D.coordinates)){var F={type:D.type,coordinates:JP(D.coordinates,r)};return DP(F,d)}}function ZP(e){return Array.isArray(e[0])?ZP(e[0]):isNaN(e[0])}function XP(e,n){return typeof e[0]!="object"?n(e):e.map(function(s){return XP(s,n)})}function JP(e,n){return typeof e[0]!="object"?n.invert(e):e.map(function(s){return JP(s,n)})}function VH(e){var n=oH(e).geometry.coordinates,s=[-n[0],-n[1]];return DH().rotate(s).scale(Ol)}const $H={components:{MyMap:rH},data(){return{searchQuery:"",searchResults:[],map:null,popup:null,routeSummary:null,selectedShelterId:null,showIntro:!0}},methods:{addLegendItem(e,n,s="line"){const l=document.querySelector(".legend");if(!l||[...l.querySelectorAll("div")].some(b=>b.textContent===e))return;const d=document.createElement("div"),m=document.createElement("span");s==="line"?(m.style.width="20px",m.style.height="2px",m.style.background=n):s==="circle"&&(m.style.width="10px",m.style.height="10px",m.style.borderRadius="50%",m.style.background=n),m.style.display="inline-block",m.style.marginRight="6px",d.appendChild(m),d.appendChild(document.createTextNode(e)),l.appendChild(d)},resetSearch(){this.searchQuery="",this.searchResults=[],this.selectedShelterId=null,this.routeSummary=null;const e={type:"FeatureCollection",features:[]};["search-point","search-buffer","shelters-h","routes-points","routes"].forEach(s=>{map.getSource(s)&&map.getSource(s).setData(e)}),map.flyTo({center:[139.777208,35.68353],zoom:14.1})},mapLoaded(e){const n=this;this.map=e,window.map=e;const s=document.createElement("div");s.className="legend",s.innerHTML="<h4>Legend</h4>",e.getContainer().appendChild(s),console.log("Legend element:",s),e.addSource("districts",{type:"geojson",data:"/heatwave_route/data/districts.geojson"}),e.addLayer({id:"districts-line",type:"line",source:"districts",paint:{"line-color":"#FFA500","line-opacity":.5,"line-width":5}}),this.addLegendItem("District Boundary","#FFA500","line"),e.loadImage("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAnElEQVQ4T63TsQ0CMQyF4f/NgMQQ0CBR0FIx190cFIiWhhFoKdgEiRUeSoF0gO8cjkub+Evs2OLPpc9422dgBRwlNZn/BtjeApdOUJsh0QuuwKYWiYAFcAKWHaSR1EbpfAHlkO0ICdMJgV+QXmAAmUu6v9IZA8wkPVKgtg7TF7H25t4UbN+A9ahGmqqVD8AO2GdzUF45+I3ZJJb9JxbwRhEhB66xAAAAAElFTkSuQmCC",function(d,m){if(d)throw d;e.addImage("route-arrow",m),e.addSource("routes",{type:"geojson",data:Dl([])}),e.addSource("routes-points",{type:"geojson",data:Dl([])}),e.addLayer({id:"route-line",type:"line",source:"routes",layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":["match",["get","mode"],"drive","#056113","#80d18c"],"line-width":8}}),n.addLegendItem("Driving Route","#056113","line"),n.addLegendItem("Walking Route","#80d18c","line"),e.addLayer({id:"route-line-arror",source:"routes",type:"symbol",layout:{"symbol-placement":"line","symbol-spacing":50,"icon-image":"route-arrow","icon-size":.6,"icon-allow-overlap":!0}});const b=["match",["get","type"],"start","#67c23a","#ff0000"];e.addLayer({id:"routes-points",type:"circle",source:"routes-points",paint:{"circle-radius":8,"circle-color":b,"circle-opacity":.8,"circle-stroke-color":b,"circle-stroke-width":2,"circle-stroke-opacity":1}}),n.addLegendItem("Start Point","#67c23a","circle"),n.addLegendItem("End Point","#ff0000","circle"),e.on("mousemove","route-line",r=>{e.getCanvas().style.cursor="pointer"}),e.on("mouseout","route-line",r=>{e.getCanvas().style.cursor=""}),e.on("click","route-line",r=>{const M=r.features[0].properties;M.mode==="walk"&&n.showProperties(r.lngLat,M)})}),e.addSource("search-point",{type:"geojson",data:Dl([])}),e.addLayer({id:"search-point",type:"circle",source:"search-point",paint:{"circle-radius":7,"circle-color":"#67c23a","circle-opacity":1,"circle-stroke-color":"#67c","circle-stroke-width":2}}),this.addLegendItem("Search Point","#67c23a","circle"),e.addLayer({id:"search-point-label",type:"symbol",source:"search-point",layout:{"text-field":["get","name"],"text-offset":[0,1.5],"text-anchor":"top","text-size":14},paint:{"text-color":"#e6194b"}}),e.addSource("search-buffer",{type:"geojson",data:Dl([])}),e.addLayer({id:"search-buffer-fill",type:"fill",source:"search-buffer",paint:{"fill-color":"#0080ff","fill-opacity":.1}}),e.addLayer({id:"search-buffer-outline",type:"line",source:"search-buffer",paint:{"line-color":"#0077b6","line-width":2}}),e.addSource("shelters",{type:"geojson",data:"/heatwave_route/data/shelters.geojson"}),e.addSource("shelters-h",{type:"geojson",data:Dl([])}),e.addLayer({id:"shelters",type:"circle",source:"shelters",paint:{"circle-radius":10,"circle-color":"#00AA00","circle-opacity":.8,"circle-stroke-color":"#003366","circle-stroke-width":5,"circle-stroke-opacity":1}}),this.addLegendItem("Shelters","#00f","circle"),e.addLayer({id:"shelters-h",type:"circle",source:"shelters-h",paint:{"circle-radius":5,"circle-color":"#ff0","circle-opacity":.8,"circle-stroke-color":"#ff0","circle-stroke-width":3,"circle-stroke-opacity":.4}}),this.addLegendItem("Nearest 5 Shelters","#ff0","circle"),e.addLayer({id:"shelters-label",type:"symbol",source:"shelters",layout:{"text-field":"{Name}","text-font":["Open Sans Semibold","Arial Unicode MS Bold"],"text-size":14,"text-offset":[0,1.5]},paint:{"text-color":"#000","text-halo-color":"#fff","text-halo-width":1}})},showProperties(e,n){const l=Object.keys(n).map(d=>`<div class="field-item"><b class="field-label">${d.split("_").map(b=>b.charAt(0).toUpperCase()+b.slice(1).toLowerCase()).join(" ")}</b>${n[d]}</div>`).join("");this.popup=new mapboxgl.Popup({offset:[0,-5],anchor:"bottom",className:"my-popup",closeButton:!0,maxWidth:"700px"}).setLngLat(e).setHTML(l).addTo(map)},async searchShelters(){if(this.searchQuery.trim())try{const e=`https://flask-server-p724.onrender.com/query-shelters?address=${this.searchQuery}`,n=await fetch(e),s=await n.json();if(n.status===200&&s.data?.shelters){this.searchResults=s.data.shelters;const l=this.searchResults.map(r=>N4([r.longitude,r.latitude],r));map.getSource("shelters-h").setData(Dl(l));const d=F4(Dl(l));map.fitBounds(d,{padding:50});const m=N4([s.data.search_lon,s.data.search_lat],{name:this.searchQuery});map.getSource("search-point").setData(Dl([m]));const b=BH(m,.1,{units:"kilometers"});map.getSource("search-buffer").setData(b)}}catch(e){console.error("Error searching shelters:",e)}},async selectShelter(e){this.selectedShelterId=e.id,this.popup&&this.popup.remove();try{const n=`https://flask-server-p724.onrender.com/query-routes?address=${this.searchQuery}&shelter_id=${e.id}`,s=await fetch(n).then(l=>l.json());if(s.status_code===200){const{drive_distance:l,drive_path_segments:d,drive_time:m,end_point:b,start_point:r,walk_path_segments:E,total_heat_risk:M,walk_distance:A,estimated_time_min:P,heat_exposure:D,heat_hazard:z,heat_risk_reference:F,heat_scenario:N,heat_vulnerability:q,max_vulnerability_level:G,water_needed_liters:ie}=s.data;let W=[];d.forEach(re=>{W.push({type:"Feature",geometry:re.geometry,properties:{mode:"drive",drive_distance:l,drive_time:m}})}),E.forEach(re=>{W.push({type:"Feature",geometry:re.geometry,properties:{mode:"walk",total_heat_risk:M,walk_distance:A,estimated_time_min:P,heat_exposure:D,heat_hazard:z,heat_risk_reference:F,heat_scenario:N,heat_vulnerability:q,max_vulnerability_level:G,water_needed_liters:ie}})}),map.getSource("routes").setData(Dl(W)),this.routeSummary={mode:"walk",distance:A,time:P,heatExposure:D,heatHazard:z,heatScenario:N,vulnerability:q,maxVulnerability:G,water:ie};const Y=[{type:"Feature",geometry:r,properties:{type:"start",name:this.searchQuery}},{type:"Feature",geometry:b,properties:{type:"end",name:e.name}}];map.getSource("routes-points").setData(Dl(Y));const J=F4(Dl(Y));map.fitBounds(J,{padding:400})}}catch(n){console.error("Error selecting shelter:",n)}}}},HH={class:"page-wrapper"},UH={key:0,class:"intro-panel"},jH={class:"main-container"},GH={class:"search-container"},qH={class:"search-form"},WH={key:0,class:"results-container"},KH={class:"results-list"},YH=["onClick"],ZH={class:"shelter-name"},XH={class:"shelter-details"},JH={key:0,class:"route-summary-box"};function QH(e,n,s,l,d,m){const b=fi("my-map");return Z(),ue("div",HH,[n[18]||(n[18]=ae("header",{class:"app-header"},[ae("h1",null,"Interactive Heat-Responsive Shelter Routing Tool for Nihonbashi"),ae("p",null,"Plan your route to the nearest shelter while minimizing heat risk.")],-1)),ae("button",{class:"intro-toggle",onClick:n[0]||(n[0]=r=>d.showIntro=!d.showIntro)},gn(d.showIntro?"Close":"Intro / Guide"),1),d.showIntro?(Z(),ue("div",UH,n[5]||(n[5]=[ae("h2",null,"About This App",-1),ae("p",null,"This tool helps you find the 5 nearest shelters based on your location while minimizing heat exposure.",-1),ae("h3",null,"How to Use:",-1),ae("ul",null,[ae("li",null,"Enter your location or station name."),ae("li",null,"Click Search to find nearby shelters."),ae("li",null,"Select one to view safe walking/driving routes."),ae("li",null,"Click Reset to start over.")],-1)]))):At("",!0),ae("div",jH,[ae("div",GH,[n[7]||(n[7]=ae("p",null,[ae("strong",null,"Select your location"),ei(" to find the 5 closest shelters.")],-1)),ae("div",qH,[Wr(ae("input",{"onUpdate:modelValue":n[1]||(n[1]=r=>d.searchQuery=r),onKeyup:n[2]||(n[2]=Ps((...r)=>m.searchShelters&&m.searchShelters(...r),["enter"])),placeholder:"Search for shelters...",class:"search-input"},null,544),[[Jv,d.searchQuery]]),ae("button",{onClick:n[3]||(n[3]=(...r)=>m.searchShelters&&m.searchShelters(...r)),class:"search-button"},"Search"),ae("button",{onClick:n[4]||(n[4]=(...r)=>m.resetSearch&&m.resetSearch(...r)),class:"reset-button"},"Reset")]),d.searchResults.length>0?(Z(),ue("div",WH,[n[6]||(n[6]=ae("h3",null,"Nearest Shelters",-1)),ae("ul",KH,[(Z(!0),ue(cr,null,Ei(d.searchResults,r=>(Z(),ue("li",{key:r.id,class:ge(["shelter-item",{selected:r.id===d.selectedShelterId}]),onClick:E=>m.selectShelter(r)},[ae("div",ZH,gn(r.id)+". "+gn(r.name),1),ae("div",XH,[ae("span",null,"Distance: "+gn(r.distance.toFixed(0))+"m",1),ae("span",null,"Capacity: "+gn(r.capacity),1)])],10,YH))),128))])])):At("",!0)]),d.routeSummary?(Z(),ue("div",JH,[n[17]||(n[17]=ae("h3",null,"Route Summary",-1)),ae("p",null,[n[8]||(n[8]=ae("strong",null,"Mode:",-1)),ei(" "+gn(d.routeSummary.mode),1)]),ae("p",null,[n[9]||(n[9]=ae("strong",null,"Distance:",-1)),ei(" "+gn(d.routeSummary.distance)+" m",1)]),ae("p",null,[n[10]||(n[10]=ae("strong",null,"Estimated Time:",-1)),ei(" "+gn(d.routeSummary.time)+" min",1)]),ae("p",null,[n[11]||(n[11]=ae("strong",null,"Heat Exposure:",-1)),ei(" "+gn(d.routeSummary.heatExposure),1)]),ae("p",null,[n[12]||(n[12]=ae("strong",null,"Heat Hazard:",-1)),ei(" "+gn(d.routeSummary.heatHazard),1)]),ae("p",null,[n[13]||(n[13]=ae("strong",null,"Heat Scenario:",-1)),ei(" "+gn(d.routeSummary.heatScenario),1)]),ae("p",null,[n[14]||(n[14]=ae("strong",null,"Vulnerability:",-1)),ei(" "+gn(d.routeSummary.vulnerability),1)]),ae("p",null,[n[15]||(n[15]=ae("strong",null,"Max Vulnerability Level:",-1)),ei(" "+gn(d.routeSummary.maxVulnerability),1)]),ae("p",null,[n[16]||(n[16]=ae("strong",null,"Water Needed:",-1)),ei(" "+gn(d.routeSummary.water)+" L",1)])])):At("",!0),st(b,{center:[139.777208,35.68353],zoom:14.1,onMapLoaded:m.mapLoaded,ref:"mapComponent"},null,8,["onMapLoaded"])])])}const eU=LP($H,[["render",QH],["__scopeId","data-v-a1f46bc1"]]),tU="2.9.9",l5=Symbol("INSTALLED_KEY"),QP=Symbol(),dv="el",nU="is-",Cp=(e,n,s,l,d)=>{let m=`${e}-${n}`;return s&&(m+=`-${s}`),l&&(m+=`__${l}`),d&&(m+=`--${d}`),m},eL=Symbol("namespaceContextKey"),xS=e=>{const n=e||(oi()?Gn(eL,Re(dv)):Re(dv));return se(()=>w(n)||dv)},dn=(e,n)=>{const s=xS(n);return{namespace:s,b:(N="")=>Cp(s.value,e,N,"",""),e:N=>N?Cp(s.value,e,"",N,""):"",m:N=>N?Cp(s.value,e,"","",N):"",be:(N,q)=>N&&q?Cp(s.value,e,N,q,""):"",em:(N,q)=>N&&q?Cp(s.value,e,"",N,q):"",bm:(N,q)=>N&&q?Cp(s.value,e,N,"",q):"",bem:(N,q,G)=>N&&q&&G?Cp(s.value,e,N,q,G):"",is:(N,...q)=>{const G=q.length>=1?q[0]:!0;return N&&G?`${nU}${N}`:""},cssVar:N=>{const q={};for(const G in N)N[G]&&(q[`--${s.value}-${G}`]=N[G]);return q},cssVarName:N=>`--${s.value}-${N}`,cssVarBlock:N=>{const q={};for(const G in N)N[G]&&(q[`--${s.value}-${e}-${G}`]=N[G]);return q},cssVarBlockName:N=>`--${s.value}-${e}-${N}`}};var tL=typeof global=="object"&&global&&global.Object===Object&&global,rU=typeof self=="object"&&self&&self.Object===Object&&self,xc=tL||rU||Function("return this")(),Ru=xc.Symbol,nL=Object.prototype,iU=nL.hasOwnProperty,sU=nL.toString,G_=Ru?Ru.toStringTag:void 0;function oU(e){var n=iU.call(e,G_),s=e[G_];try{e[G_]=void 0;var l=!0}catch{}var d=sU.call(e);return l&&(n?e[G_]=s:delete e[G_]),d}var aU=Object.prototype,lU=aU.toString;function uU(e){return lU.call(e)}var cU="[object Null]",dU="[object Undefined]",u5=Ru?Ru.toStringTag:void 0;function Yp(e){return e==null?e===void 0?dU:cU:u5&&u5 in Object(e)?oU(e):uU(e)}function bd(e){return e!=null&&typeof e=="object"}var hU="[object Symbol]";function cx(e){return typeof e=="symbol"||bd(e)&&Yp(e)==hU}function wS(e,n){for(var s=-1,l=e==null?0:e.length,d=Array(l);++s<l;)d[s]=n(e[s],s,e);return d}var Sl=Array.isArray,c5=Ru?Ru.prototype:void 0,d5=c5?c5.toString:void 0;function rL(e){if(typeof e=="string")return e;if(Sl(e))return wS(e,rL)+"";if(cx(e))return d5?d5.call(e):"";var n=e+"";return n=="0"&&1/e==-1/0?"-0":n}var fU=/\s/;function pU(e){for(var n=e.length;n--&&fU.test(e.charAt(n)););return n}var mU=/^\s+/;function gU(e){return e&&e.slice(0,pU(e)+1).replace(mU,"")}function Cl(e){var n=typeof e;return e!=null&&(n=="object"||n=="function")}var h5=NaN,_U=/^[-+]0x[0-9a-f]+$/i,vU=/^0b[01]+$/i,yU=/^0o[0-7]+$/i,bU=parseInt;function f5(e){if(typeof e=="number")return e;if(cx(e))return h5;if(Cl(e)){var n=typeof e.valueOf=="function"?e.valueOf():e;e=Cl(n)?n+"":n}if(typeof e!="string")return e===0?e:+e;e=gU(e);var s=vU.test(e);return s||yU.test(e)?bU(e.slice(2),s?2:8):_U.test(e)?h5:+e}function SS(e){return e}var xU="[object AsyncFunction]",wU="[object Function]",SU="[object GeneratorFunction]",CU="[object Proxy]";function CS(e){if(!Cl(e))return!1;var n=Yp(e);return n==wU||n==SU||n==xU||n==CU}var Y3=xc["__core-js_shared__"],p5=function(){var e=/[^.]+$/.exec(Y3&&Y3.keys&&Y3.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function EU(e){return!!p5&&p5 in e}var TU=Function.prototype,IU=TU.toString;function Zp(e){if(e!=null){try{return IU.call(e)}catch{}try{return e+""}catch{}}return""}var kU=/[\\^$.*+?()[\]{}|]/g,MU=/^\[object .+?Constructor\]$/,AU=Function.prototype,RU=Object.prototype,PU=AU.toString,LU=RU.hasOwnProperty,OU=RegExp("^"+PU.call(LU).replace(kU,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function DU(e){if(!Cl(e)||EU(e))return!1;var n=CS(e)?OU:MU;return n.test(Zp(e))}function zU(e,n){return e?.[n]}function Xp(e,n){var s=zU(e,n);return DU(s)?s:void 0}var j4=Xp(xc,"WeakMap"),m5=Object.create,NU=function(){function e(){}return function(n){if(!Cl(n))return{};if(m5)return m5(n);e.prototype=n;var s=new e;return e.prototype=void 0,s}}();function FU(e,n,s){switch(s.length){case 0:return e.call(n);case 1:return e.call(n,s[0]);case 2:return e.call(n,s[0],s[1]);case 3:return e.call(n,s[0],s[1],s[2])}return e.apply(n,s)}function BU(){}function iL(e,n){var s=-1,l=e.length;for(n||(n=Array(l));++s<l;)n[s]=e[s];return n}var VU=800,$U=16,HU=Date.now;function UU(e){var n=0,s=0;return function(){var l=HU(),d=$U-(l-s);if(s=l,d>0){if(++n>=VU)return arguments[0]}else n=0;return e.apply(void 0,arguments)}}function jU(e){return function(){return e}}var Eb=function(){try{var e=Xp(Object,"defineProperty");return e({},"",{}),e}catch{}}(),GU=Eb?function(e,n){return Eb(e,"toString",{configurable:!0,enumerable:!1,value:jU(n),writable:!0})}:SS,sL=UU(GU);function qU(e,n){for(var s=-1,l=e==null?0:e.length;++s<l&&n(e[s],s,e)!==!1;);return e}function oL(e,n,s,l){for(var d=e.length,m=s+(l?1:-1);l?m--:++m<d;)if(n(e[m],m,e))return m;return-1}function WU(e){return e!==e}function KU(e,n,s){for(var l=s-1,d=e.length;++l<d;)if(e[l]===n)return l;return-1}function YU(e,n,s){return n===n?KU(e,n,s):oL(e,WU,s)}function ZU(e,n){var s=e==null?0:e.length;return!!s&&YU(e,n,0)>-1}var XU=9007199254740991,JU=/^(?:0|[1-9]\d*)$/;function dx(e,n){var s=typeof e;return n=n??XU,!!n&&(s=="number"||s!="symbol"&&JU.test(e))&&e>-1&&e%1==0&&e<n}function ES(e,n,s){n=="__proto__"&&Eb?Eb(e,n,{configurable:!0,enumerable:!0,value:s,writable:!0}):e[n]=s}function Qv(e,n){return e===n||e!==e&&n!==n}var QU=Object.prototype,ej=QU.hasOwnProperty;function TS(e,n,s){var l=e[n];(!(ej.call(e,n)&&Qv(l,s))||s===void 0&&!(n in e))&&ES(e,n,s)}function s0(e,n,s,l){var d=!s;s||(s={});for(var m=-1,b=n.length;++m<b;){var r=n[m],E=void 0;E===void 0&&(E=e[r]),d?ES(s,r,E):TS(s,r,E)}return s}var g5=Math.max;function aL(e,n,s){return n=g5(n===void 0?e.length-1:n,0),function(){for(var l=arguments,d=-1,m=g5(l.length-n,0),b=Array(m);++d<m;)b[d]=l[n+d];d=-1;for(var r=Array(n+1);++d<n;)r[d]=l[d];return r[n]=s(b),FU(e,this,r)}}function lL(e,n){return sL(aL(e,n,SS),e+"")}var tj=9007199254740991;function IS(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=tj}function o0(e){return e!=null&&IS(e.length)&&!CS(e)}function nj(e,n,s){if(!Cl(s))return!1;var l=typeof n;return(l=="number"?o0(s)&&dx(n,s.length):l=="string"&&n in s)?Qv(s[n],e):!1}function rj(e){return lL(function(n,s){var l=-1,d=s.length,m=d>1?s[d-1]:void 0,b=d>2?s[2]:void 0;for(m=e.length>3&&typeof m=="function"?(d--,m):void 0,b&&nj(s[0],s[1],b)&&(m=d<3?void 0:m,d=1),n=Object(n);++l<d;){var r=s[l];r&&e(n,r,l,m)}return n})}var ij=Object.prototype;function kS(e){var n=e&&e.constructor,s=typeof n=="function"&&n.prototype||ij;return e===s}function sj(e,n){for(var s=-1,l=Array(e);++s<e;)l[s]=n(s);return l}var oj="[object Arguments]";function _5(e){return bd(e)&&Yp(e)==oj}var uL=Object.prototype,aj=uL.hasOwnProperty,lj=uL.propertyIsEnumerable,kv=_5(function(){return arguments}())?_5:function(e){return bd(e)&&aj.call(e,"callee")&&!lj.call(e,"callee")};function uj(){return!1}var cL=typeof au=="object"&&au&&!au.nodeType&&au,v5=cL&&typeof lu=="object"&&lu&&!lu.nodeType&&lu,cj=v5&&v5.exports===cL,y5=cj?xc.Buffer:void 0,dj=y5?y5.isBuffer:void 0,Mv=dj||uj,hj="[object Arguments]",fj="[object Array]",pj="[object Boolean]",mj="[object Date]",gj="[object Error]",_j="[object Function]",vj="[object Map]",yj="[object Number]",bj="[object Object]",xj="[object RegExp]",wj="[object Set]",Sj="[object String]",Cj="[object WeakMap]",Ej="[object ArrayBuffer]",Tj="[object DataView]",Ij="[object Float32Array]",kj="[object Float64Array]",Mj="[object Int8Array]",Aj="[object Int16Array]",Rj="[object Int32Array]",Pj="[object Uint8Array]",Lj="[object Uint8ClampedArray]",Oj="[object Uint16Array]",Dj="[object Uint32Array]",wo={};wo[Ij]=wo[kj]=wo[Mj]=wo[Aj]=wo[Rj]=wo[Pj]=wo[Lj]=wo[Oj]=wo[Dj]=!0;wo[hj]=wo[fj]=wo[Ej]=wo[pj]=wo[Tj]=wo[mj]=wo[gj]=wo[_j]=wo[vj]=wo[yj]=wo[bj]=wo[xj]=wo[wj]=wo[Sj]=wo[Cj]=!1;function zj(e){return bd(e)&&IS(e.length)&&!!wo[Yp(e)]}function MS(e){return function(n){return e(n)}}var dL=typeof au=="object"&&au&&!au.nodeType&&au,hv=dL&&typeof lu=="object"&&lu&&!lu.nodeType&&lu,Nj=hv&&hv.exports===dL,Z3=Nj&&tL.process,Bg=function(){try{var e=hv&&hv.require&&hv.require("util").types;return e||Z3&&Z3.binding&&Z3.binding("util")}catch{}}(),b5=Bg&&Bg.isTypedArray,AS=b5?MS(b5):zj,Fj=Object.prototype,Bj=Fj.hasOwnProperty;function hL(e,n){var s=Sl(e),l=!s&&kv(e),d=!s&&!l&&Mv(e),m=!s&&!l&&!d&&AS(e),b=s||l||d||m,r=b?sj(e.length,String):[],E=r.length;for(var M in e)(n||Bj.call(e,M))&&!(b&&(M=="length"||d&&(M=="offset"||M=="parent")||m&&(M=="buffer"||M=="byteLength"||M=="byteOffset")||dx(M,E)))&&r.push(M);return r}function fL(e,n){return function(s){return e(n(s))}}var Vj=fL(Object.keys,Object),$j=Object.prototype,Hj=$j.hasOwnProperty;function Uj(e){if(!kS(e))return Vj(e);var n=[];for(var s in Object(e))Hj.call(e,s)&&s!="constructor"&&n.push(s);return n}function ey(e){return o0(e)?hL(e):Uj(e)}function jj(e){var n=[];if(e!=null)for(var s in Object(e))n.push(s);return n}var Gj=Object.prototype,qj=Gj.hasOwnProperty;function Wj(e){if(!Cl(e))return jj(e);var n=kS(e),s=[];for(var l in e)l=="constructor"&&(n||!qj.call(e,l))||s.push(l);return s}function ty(e){return o0(e)?hL(e,!0):Wj(e)}var Kj=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Yj=/^\w*$/;function RS(e,n){if(Sl(e))return!1;var s=typeof e;return s=="number"||s=="symbol"||s=="boolean"||e==null||cx(e)?!0:Yj.test(e)||!Kj.test(e)||n!=null&&e in Object(n)}var Av=Xp(Object,"create");function Zj(){this.__data__=Av?Av(null):{},this.size=0}function Xj(e){var n=this.has(e)&&delete this.__data__[e];return this.size-=n?1:0,n}var Jj="__lodash_hash_undefined__",Qj=Object.prototype,eG=Qj.hasOwnProperty;function tG(e){var n=this.__data__;if(Av){var s=n[e];return s===Jj?void 0:s}return eG.call(n,e)?n[e]:void 0}var nG=Object.prototype,rG=nG.hasOwnProperty;function iG(e){var n=this.__data__;return Av?n[e]!==void 0:rG.call(n,e)}var sG="__lodash_hash_undefined__";function oG(e,n){var s=this.__data__;return this.size+=this.has(e)?0:1,s[e]=Av&&n===void 0?sG:n,this}function Hp(e){var n=-1,s=e==null?0:e.length;for(this.clear();++n<s;){var l=e[n];this.set(l[0],l[1])}}Hp.prototype.clear=Zj;Hp.prototype.delete=Xj;Hp.prototype.get=tG;Hp.prototype.has=iG;Hp.prototype.set=oG;function aG(){this.__data__=[],this.size=0}function hx(e,n){for(var s=e.length;s--;)if(Qv(e[s][0],n))return s;return-1}var lG=Array.prototype,uG=lG.splice;function cG(e){var n=this.__data__,s=hx(n,e);if(s<0)return!1;var l=n.length-1;return s==l?n.pop():uG.call(n,s,1),--this.size,!0}function dG(e){var n=this.__data__,s=hx(n,e);return s<0?void 0:n[s][1]}function hG(e){return hx(this.__data__,e)>-1}function fG(e,n){var s=this.__data__,l=hx(s,e);return l<0?(++this.size,s.push([e,n])):s[l][1]=n,this}function Sh(e){var n=-1,s=e==null?0:e.length;for(this.clear();++n<s;){var l=e[n];this.set(l[0],l[1])}}Sh.prototype.clear=aG;Sh.prototype.delete=cG;Sh.prototype.get=dG;Sh.prototype.has=hG;Sh.prototype.set=fG;var Rv=Xp(xc,"Map");function pG(){this.size=0,this.__data__={hash:new Hp,map:new(Rv||Sh),string:new Hp}}function mG(e){var n=typeof e;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?e!=="__proto__":e===null}function fx(e,n){var s=e.__data__;return mG(n)?s[typeof n=="string"?"string":"hash"]:s.map}function gG(e){var n=fx(this,e).delete(e);return this.size-=n?1:0,n}function _G(e){return fx(this,e).get(e)}function vG(e){return fx(this,e).has(e)}function yG(e,n){var s=fx(this,e),l=s.size;return s.set(e,n),this.size+=s.size==l?0:1,this}function Ch(e){var n=-1,s=e==null?0:e.length;for(this.clear();++n<s;){var l=e[n];this.set(l[0],l[1])}}Ch.prototype.clear=pG;Ch.prototype.delete=gG;Ch.prototype.get=_G;Ch.prototype.has=vG;Ch.prototype.set=yG;var bG="Expected a function";function px(e,n){if(typeof e!="function"||n!=null&&typeof n!="function")throw new TypeError(bG);var s=function(){var l=arguments,d=n?n.apply(this,l):l[0],m=s.cache;if(m.has(d))return m.get(d);var b=e.apply(this,l);return s.cache=m.set(d,b)||m,b};return s.cache=new(px.Cache||Ch),s}px.Cache=Ch;var xG=500;function wG(e){var n=px(e,function(l){return s.size===xG&&s.clear(),l}),s=n.cache;return n}var SG=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,CG=/\\(\\)?/g,EG=wG(function(e){var n=[];return e.charCodeAt(0)===46&&n.push(""),e.replace(SG,function(s,l,d,m){n.push(d?m.replace(CG,"$1"):l||s)}),n});function TG(e){return e==null?"":rL(e)}function a0(e,n){return Sl(e)?e:RS(e,n)?[e]:EG(TG(e))}function l0(e){if(typeof e=="string"||cx(e))return e;var n=e+"";return n=="0"&&1/e==-1/0?"-0":n}function mx(e,n){n=a0(n,e);for(var s=0,l=n.length;e!=null&&s<l;)e=e[l0(n[s++])];return s&&s==l?e:void 0}function To(e,n,s){var l=e==null?void 0:mx(e,n);return l===void 0?s:l}function PS(e,n){for(var s=-1,l=n.length,d=e.length;++s<l;)e[d+s]=n[s];return e}var x5=Ru?Ru.isConcatSpreadable:void 0;function IG(e){return Sl(e)||kv(e)||!!(x5&&e&&e[x5])}function ny(e,n,s,l,d){var m=-1,b=e.length;for(s||(s=IG),d||(d=[]);++m<b;){var r=e[m];n>0&&s(r)?n>1?ny(r,n-1,s,l,d):PS(d,r):l||(d[d.length]=r)}return d}function pL(e){var n=e==null?0:e.length;return n?ny(e,1):[]}function mL(e){return sL(aL(e,void 0,pL),e+"")}var LS=fL(Object.getPrototypeOf,Object),kG="[object Object]",MG=Function.prototype,AG=Object.prototype,gL=MG.toString,RG=AG.hasOwnProperty,PG=gL.call(Object);function _L(e){if(!bd(e)||Yp(e)!=kG)return!1;var n=LS(e);if(n===null)return!0;var s=RG.call(n,"constructor")&&n.constructor;return typeof s=="function"&&s instanceof s&&gL.call(s)==PG}function LG(e,n,s){var l=-1,d=e.length;n<0&&(n=-n>d?0:d+n),s=s>d?d:s,s<0&&(s+=d),d=n>s?0:s-n>>>0,n>>>=0;for(var m=Array(d);++l<d;)m[l]=e[l+n];return m}function el(){if(!arguments.length)return[];var e=arguments[0];return Sl(e)?e:[e]}function OG(){this.__data__=new Sh,this.size=0}function DG(e){var n=this.__data__,s=n.delete(e);return this.size=n.size,s}function zG(e){return this.__data__.get(e)}function NG(e){return this.__data__.has(e)}var FG=200;function BG(e,n){var s=this.__data__;if(s instanceof Sh){var l=s.__data__;if(!Rv||l.length<FG-1)return l.push([e,n]),this.size=++s.size,this;s=this.__data__=new Ch(l)}return s.set(e,n),this.size=s.size,this}function fc(e){var n=this.__data__=new Sh(e);this.size=n.size}fc.prototype.clear=OG;fc.prototype.delete=DG;fc.prototype.get=zG;fc.prototype.has=NG;fc.prototype.set=BG;function VG(e,n){return e&&s0(n,ey(n),e)}function $G(e,n){return e&&s0(n,ty(n),e)}var vL=typeof au=="object"&&au&&!au.nodeType&&au,w5=vL&&typeof lu=="object"&&lu&&!lu.nodeType&&lu,HG=w5&&w5.exports===vL,S5=HG?xc.Buffer:void 0,C5=S5?S5.allocUnsafe:void 0;function yL(e,n){if(n)return e.slice();var s=e.length,l=C5?C5(s):new e.constructor(s);return e.copy(l),l}function UG(e,n){for(var s=-1,l=e==null?0:e.length,d=0,m=[];++s<l;){var b=e[s];n(b,s,e)&&(m[d++]=b)}return m}function bL(){return[]}var jG=Object.prototype,GG=jG.propertyIsEnumerable,E5=Object.getOwnPropertySymbols,OS=E5?function(e){return e==null?[]:(e=Object(e),UG(E5(e),function(n){return GG.call(e,n)}))}:bL;function qG(e,n){return s0(e,OS(e),n)}var WG=Object.getOwnPropertySymbols,xL=WG?function(e){for(var n=[];e;)PS(n,OS(e)),e=LS(e);return n}:bL;function KG(e,n){return s0(e,xL(e),n)}function wL(e,n,s){var l=n(e);return Sl(e)?l:PS(l,s(e))}function G4(e){return wL(e,ey,OS)}function SL(e){return wL(e,ty,xL)}var q4=Xp(xc,"DataView"),W4=Xp(xc,"Promise"),Eg=Xp(xc,"Set"),T5="[object Map]",YG="[object Object]",I5="[object Promise]",k5="[object Set]",M5="[object WeakMap]",A5="[object DataView]",ZG=Zp(q4),XG=Zp(Rv),JG=Zp(W4),QG=Zp(Eg),eq=Zp(j4),uc=Yp;(q4&&uc(new q4(new ArrayBuffer(1)))!=A5||Rv&&uc(new Rv)!=T5||W4&&uc(W4.resolve())!=I5||Eg&&uc(new Eg)!=k5||j4&&uc(new j4)!=M5)&&(uc=function(e){var n=Yp(e),s=n==YG?e.constructor:void 0,l=s?Zp(s):"";if(l)switch(l){case ZG:return A5;case XG:return T5;case JG:return I5;case QG:return k5;case eq:return M5}return n});var tq=Object.prototype,nq=tq.hasOwnProperty;function rq(e){var n=e.length,s=new e.constructor(n);return n&&typeof e[0]=="string"&&nq.call(e,"index")&&(s.index=e.index,s.input=e.input),s}var Tb=xc.Uint8Array;function DS(e){var n=new e.constructor(e.byteLength);return new Tb(n).set(new Tb(e)),n}function iq(e,n){var s=n?DS(e.buffer):e.buffer;return new e.constructor(s,e.byteOffset,e.byteLength)}var sq=/\w*$/;function oq(e){var n=new e.constructor(e.source,sq.exec(e));return n.lastIndex=e.lastIndex,n}var R5=Ru?Ru.prototype:void 0,P5=R5?R5.valueOf:void 0;function aq(e){return P5?Object(P5.call(e)):{}}function CL(e,n){var s=n?DS(e.buffer):e.buffer;return new e.constructor(s,e.byteOffset,e.length)}var lq="[object Boolean]",uq="[object Date]",cq="[object Map]",dq="[object Number]",hq="[object RegExp]",fq="[object Set]",pq="[object String]",mq="[object Symbol]",gq="[object ArrayBuffer]",_q="[object DataView]",vq="[object Float32Array]",yq="[object Float64Array]",bq="[object Int8Array]",xq="[object Int16Array]",wq="[object Int32Array]",Sq="[object Uint8Array]",Cq="[object Uint8ClampedArray]",Eq="[object Uint16Array]",Tq="[object Uint32Array]";function Iq(e,n,s){var l=e.constructor;switch(n){case gq:return DS(e);case lq:case uq:return new l(+e);case _q:return iq(e,s);case vq:case yq:case bq:case xq:case wq:case Sq:case Cq:case Eq:case Tq:return CL(e,s);case cq:return new l;case dq:case pq:return new l(e);case hq:return oq(e);case fq:return new l;case mq:return aq(e)}}function EL(e){return typeof e.constructor=="function"&&!kS(e)?NU(LS(e)):{}}var kq="[object Map]";function Mq(e){return bd(e)&&uc(e)==kq}var L5=Bg&&Bg.isMap,Aq=L5?MS(L5):Mq,Rq="[object Set]";function Pq(e){return bd(e)&&uc(e)==Rq}var O5=Bg&&Bg.isSet,Lq=O5?MS(O5):Pq,Oq=1,Dq=2,zq=4,TL="[object Arguments]",Nq="[object Array]",Fq="[object Boolean]",Bq="[object Date]",Vq="[object Error]",IL="[object Function]",$q="[object GeneratorFunction]",Hq="[object Map]",Uq="[object Number]",kL="[object Object]",jq="[object RegExp]",Gq="[object Set]",qq="[object String]",Wq="[object Symbol]",Kq="[object WeakMap]",Yq="[object ArrayBuffer]",Zq="[object DataView]",Xq="[object Float32Array]",Jq="[object Float64Array]",Qq="[object Int8Array]",eW="[object Int16Array]",tW="[object Int32Array]",nW="[object Uint8Array]",rW="[object Uint8ClampedArray]",iW="[object Uint16Array]",sW="[object Uint32Array]",mo={};mo[TL]=mo[Nq]=mo[Yq]=mo[Zq]=mo[Fq]=mo[Bq]=mo[Xq]=mo[Jq]=mo[Qq]=mo[eW]=mo[tW]=mo[Hq]=mo[Uq]=mo[kL]=mo[jq]=mo[Gq]=mo[qq]=mo[Wq]=mo[nW]=mo[rW]=mo[iW]=mo[sW]=!0;mo[Vq]=mo[IL]=mo[Kq]=!1;function Tg(e,n,s,l,d,m){var b,r=n&Oq,E=n&Dq,M=n&zq;if(s&&(b=d?s(e,l,d,m):s(e)),b!==void 0)return b;if(!Cl(e))return e;var A=Sl(e);if(A){if(b=rq(e),!r)return iL(e,b)}else{var P=uc(e),D=P==IL||P==$q;if(Mv(e))return yL(e,r);if(P==kL||P==TL||D&&!d){if(b=E||D?{}:EL(e),!r)return E?KG(e,$G(b,e)):qG(e,VG(b,e))}else{if(!mo[P])return d?e:{};b=Iq(e,P,r)}}m||(m=new fc);var z=m.get(e);if(z)return z;m.set(e,b),Lq(e)?e.forEach(function(q){b.add(Tg(q,n,s,q,e,m))}):Aq(e)&&e.forEach(function(q,G){b.set(G,Tg(q,n,s,G,e,m))});var F=M?E?SL:G4:E?ty:ey,N=A?void 0:F(e);return qU(N||e,function(q,G){N&&(G=q,q=e[G]),TS(b,G,Tg(q,n,s,G,e,m))}),b}var oW=4;function D5(e){return Tg(e,oW)}var aW=1,lW=4;function Ib(e){return Tg(e,aW|lW)}var uW="__lodash_hash_undefined__";function cW(e){return this.__data__.set(e,uW),this}function dW(e){return this.__data__.has(e)}function Pv(e){var n=-1,s=e==null?0:e.length;for(this.__data__=new Ch;++n<s;)this.add(e[n])}Pv.prototype.add=Pv.prototype.push=cW;Pv.prototype.has=dW;function hW(e,n){for(var s=-1,l=e==null?0:e.length;++s<l;)if(n(e[s],s,e))return!0;return!1}function ML(e,n){return e.has(n)}var fW=1,pW=2;function AL(e,n,s,l,d,m){var b=s&fW,r=e.length,E=n.length;if(r!=E&&!(b&&E>r))return!1;var M=m.get(e),A=m.get(n);if(M&&A)return M==n&&A==e;var P=-1,D=!0,z=s&pW?new Pv:void 0;for(m.set(e,n),m.set(n,e);++P<r;){var F=e[P],N=n[P];if(l)var q=b?l(N,F,P,n,e,m):l(F,N,P,e,n,m);if(q!==void 0){if(q)continue;D=!1;break}if(z){if(!hW(n,function(G,ie){if(!ML(z,ie)&&(F===G||d(F,G,s,l,m)))return z.push(ie)})){D=!1;break}}else if(!(F===N||d(F,N,s,l,m))){D=!1;break}}return m.delete(e),m.delete(n),D}function mW(e){var n=-1,s=Array(e.size);return e.forEach(function(l,d){s[++n]=[d,l]}),s}function zS(e){var n=-1,s=Array(e.size);return e.forEach(function(l){s[++n]=l}),s}var gW=1,_W=2,vW="[object Boolean]",yW="[object Date]",bW="[object Error]",xW="[object Map]",wW="[object Number]",SW="[object RegExp]",CW="[object Set]",EW="[object String]",TW="[object Symbol]",IW="[object ArrayBuffer]",kW="[object DataView]",z5=Ru?Ru.prototype:void 0,X3=z5?z5.valueOf:void 0;function MW(e,n,s,l,d,m,b){switch(s){case kW:if(e.byteLength!=n.byteLength||e.byteOffset!=n.byteOffset)return!1;e=e.buffer,n=n.buffer;case IW:return!(e.byteLength!=n.byteLength||!m(new Tb(e),new Tb(n)));case vW:case yW:case wW:return Qv(+e,+n);case bW:return e.name==n.name&&e.message==n.message;case SW:case EW:return e==n+"";case xW:var r=mW;case CW:var E=l&gW;if(r||(r=zS),e.size!=n.size&&!E)return!1;var M=b.get(e);if(M)return M==n;l|=_W,b.set(e,n);var A=AL(r(e),r(n),l,d,m,b);return b.delete(e),A;case TW:if(X3)return X3.call(e)==X3.call(n)}return!1}var AW=1,RW=Object.prototype,PW=RW.hasOwnProperty;function LW(e,n,s,l,d,m){var b=s&AW,r=G4(e),E=r.length,M=G4(n),A=M.length;if(E!=A&&!b)return!1;for(var P=E;P--;){var D=r[P];if(!(b?D in n:PW.call(n,D)))return!1}var z=m.get(e),F=m.get(n);if(z&&F)return z==n&&F==e;var N=!0;m.set(e,n),m.set(n,e);for(var q=b;++P<E;){D=r[P];var G=e[D],ie=n[D];if(l)var W=b?l(ie,G,D,n,e,m):l(G,ie,D,e,n,m);if(!(W===void 0?G===ie||d(G,ie,s,l,m):W)){N=!1;break}q||(q=D=="constructor")}if(N&&!q){var Y=e.constructor,J=n.constructor;Y!=J&&"constructor"in e&&"constructor"in n&&!(typeof Y=="function"&&Y instanceof Y&&typeof J=="function"&&J instanceof J)&&(N=!1)}return m.delete(e),m.delete(n),N}var OW=1,N5="[object Arguments]",F5="[object Array]",p2="[object Object]",DW=Object.prototype,B5=DW.hasOwnProperty;function zW(e,n,s,l,d,m){var b=Sl(e),r=Sl(n),E=b?F5:uc(e),M=r?F5:uc(n);E=E==N5?p2:E,M=M==N5?p2:M;var A=E==p2,P=M==p2,D=E==M;if(D&&Mv(e)){if(!Mv(n))return!1;b=!0,A=!1}if(D&&!A)return m||(m=new fc),b||AS(e)?AL(e,n,s,l,d,m):MW(e,n,E,s,l,d,m);if(!(s&OW)){var z=A&&B5.call(e,"__wrapped__"),F=P&&B5.call(n,"__wrapped__");if(z||F){var N=z?e.value():e,q=F?n.value():n;return m||(m=new fc),d(N,q,s,l,m)}}return D?(m||(m=new fc),LW(e,n,s,l,d,m)):!1}function gx(e,n,s,l,d){return e===n?!0:e==null||n==null||!bd(e)&&!bd(n)?e!==e&&n!==n:zW(e,n,s,l,gx,d)}var NW=1,FW=2;function BW(e,n,s,l){var d=s.length,m=d;if(e==null)return!m;for(e=Object(e);d--;){var b=s[d];if(b[2]?b[1]!==e[b[0]]:!(b[0]in e))return!1}for(;++d<m;){b=s[d];var r=b[0],E=e[r],M=b[1];if(b[2]){if(E===void 0&&!(r in e))return!1}else{var A=new fc,P;if(!(P===void 0?gx(M,E,NW|FW,l,A):P))return!1}}return!0}function RL(e){return e===e&&!Cl(e)}function VW(e){for(var n=ey(e),s=n.length;s--;){var l=n[s],d=e[l];n[s]=[l,d,RL(d)]}return n}function PL(e,n){return function(s){return s==null?!1:s[e]===n&&(n!==void 0||e in Object(s))}}function $W(e){var n=VW(e);return n.length==1&&n[0][2]?PL(n[0][0],n[0][1]):function(s){return s===e||BW(s,e,n)}}function HW(e,n){return e!=null&&n in Object(e)}function UW(e,n,s){n=a0(n,e);for(var l=-1,d=n.length,m=!1;++l<d;){var b=l0(n[l]);if(!(m=e!=null&&s(e,b)))break;e=e[b]}return m||++l!=d?m:(d=e==null?0:e.length,!!d&&IS(d)&&dx(b,d)&&(Sl(e)||kv(e)))}function LL(e,n){return e!=null&&UW(e,n,HW)}var jW=1,GW=2;function qW(e,n){return RS(e)&&RL(n)?PL(l0(e),n):function(s){var l=To(s,e);return l===void 0&&l===n?LL(s,e):gx(n,l,jW|GW)}}function WW(e){return function(n){return n?.[e]}}function KW(e){return function(n){return mx(n,e)}}function YW(e){return RS(e)?WW(l0(e)):KW(e)}function OL(e){return typeof e=="function"?e:e==null?SS:typeof e=="object"?Sl(e)?qW(e[0],e[1]):$W(e):YW(e)}function ZW(e){return function(n,s,l){for(var d=-1,m=Object(n),b=l(n),r=b.length;r--;){var E=b[++d];if(s(m[E],E,m)===!1)break}return n}}var DL=ZW();function XW(e,n){return e&&DL(e,n,ey)}function JW(e,n){return function(s,l){if(s==null)return s;if(!o0(s))return e(s,l);for(var d=s.length,m=-1,b=Object(s);++m<d&&l(b[m],m,b)!==!1;);return s}}var QW=JW(XW),J3=function(){return xc.Date.now()},eK="Expected a function",tK=Math.max,nK=Math.min;function Vl(e,n,s){var l,d,m,b,r,E,M=0,A=!1,P=!1,D=!0;if(typeof e!="function")throw new TypeError(eK);n=f5(n)||0,Cl(s)&&(A=!!s.leading,P="maxWait"in s,m=P?tK(f5(s.maxWait)||0,n):m,D="trailing"in s?!!s.trailing:D);function z(re){var he=l,fe=d;return l=d=void 0,M=re,b=e.apply(fe,he),b}function F(re){return M=re,r=setTimeout(G,n),A?z(re):b}function N(re){var he=re-E,fe=re-M,ce=n-he;return P?nK(ce,m-fe):ce}function q(re){var he=re-E,fe=re-M;return E===void 0||he>=n||he<0||P&&fe>=m}function G(){var re=J3();if(q(re))return ie(re);r=setTimeout(G,N(re))}function ie(re){return r=void 0,D&&l?z(re):(l=d=void 0,b)}function W(){r!==void 0&&clearTimeout(r),M=0,l=E=d=r=void 0}function Y(){return r===void 0?b:ie(J3())}function J(){var re=J3(),he=q(re);if(l=arguments,d=this,E=re,he){if(r===void 0)return F(E);if(P)return clearTimeout(r),r=setTimeout(G,n),z(E)}return r===void 0&&(r=setTimeout(G,n)),b}return J.cancel=W,J.flush=Y,J}function K4(e,n,s){(s!==void 0&&!Qv(e[n],s)||s===void 0&&!(n in e))&&ES(e,n,s)}function zL(e){return bd(e)&&o0(e)}function Y4(e,n){if(!(n==="constructor"&&typeof e[n]=="function")&&n!="__proto__")return e[n]}function rK(e){return s0(e,ty(e))}function iK(e,n,s,l,d,m,b){var r=Y4(e,s),E=Y4(n,s),M=b.get(E);if(M){K4(e,s,M);return}var A=m?m(r,E,s+"",e,n,b):void 0,P=A===void 0;if(P){var D=Sl(E),z=!D&&Mv(E),F=!D&&!z&&AS(E);A=E,D||z||F?Sl(r)?A=r:zL(r)?A=iL(r):z?(P=!1,A=yL(E,!0)):F?(P=!1,A=CL(E,!0)):A=[]:_L(E)||kv(E)?(A=r,kv(r)?A=rK(r):(!Cl(r)||CS(r))&&(A=EL(E))):P=!1}P&&(b.set(E,A),d(A,E,l,m,b),b.delete(E)),K4(e,s,A)}function NL(e,n,s,l,d){e!==n&&DL(n,function(m,b){if(d||(d=new fc),Cl(m))iK(e,n,b,s,NL,l,d);else{var r=l?l(Y4(e,b),m,b+"",e,n,d):void 0;r===void 0&&(r=m),K4(e,b,r)}},ty)}function sK(e){var n=e==null?0:e.length;return n?e[n-1]:void 0}function FL(e,n,s){var l=e==null?0:e.length;if(!l)return-1;var d=l-1;return oL(e,OL(n),d,!0)}function oK(e,n){var s=-1,l=o0(e)?Array(e.length):[];return QW(e,function(d,m,b){l[++s]=n(d,m,b)}),l}function aK(e,n){var s=Sl(e)?wS:oK;return s(e,OL(n))}function lK(e,n){return ny(aK(e,n),1)}var uK=1/0;function cK(e){var n=e==null?0:e.length;return n?ny(e,uK):[]}function Lv(e){for(var n=-1,s=e==null?0:e.length,l={};++n<s;){var d=e[n];l[d[0]]=d[1]}return l}function dK(e,n){return n.length<2?e:mx(e,LG(n,0,-1))}function la(e,n){return gx(e,n)}function ea(e){return e==null}function ry(e){return e===null}function BL(e){return e===void 0}var VL=rj(function(e,n,s){NL(e,n,s)});function hK(e,n){return n=a0(n,e),e=dK(e,n),e==null||delete e[l0(sK(n))]}function fK(e){return _L(e)?void 0:e}var pK=1,mK=2,gK=4,_K=mL(function(e,n){var s={};if(e==null)return s;var l=!1;n=wS(n,function(m){return m=a0(m,e),l||(l=m.length>1),m}),s0(e,SL(e),s),l&&(s=Tg(s,pK|mK|gK,fK));for(var d=n.length;d--;)hK(s,n[d]);return s});function $L(e,n,s,l){if(!Cl(e))return e;n=a0(n,e);for(var d=-1,m=n.length,b=m-1,r=e;r!=null&&++d<m;){var E=l0(n[d]),M=s;if(E==="__proto__"||E==="constructor"||E==="prototype")return e;if(d!=b){var A=r[E];M=void 0,M===void 0&&(M=Cl(A)?A:dx(n[d+1])?[]:{})}TS(r,E,M),r=r[E]}return e}function vK(e,n,s){for(var l=-1,d=n.length,m={};++l<d;){var b=n[l],r=mx(e,b);s(r,b)&&$L(m,a0(b,e),r)}return m}function yK(e,n){return vK(e,n,function(s,l){return LL(e,l)})}var cc=mL(function(e,n){return e==null?{}:yK(e,n)});function bK(e,n,s){return e==null?e:$L(e,n,s)}var xK="Expected a function";function zp(e,n,s){var l=!0,d=!0;if(typeof e!="function")throw new TypeError(xK);return Cl(s)&&(l="leading"in s?!!s.leading:l,d="trailing"in s?!!s.trailing:d),Vl(e,n,{leading:l,maxWait:n,trailing:d})}var wK=1/0,SK=Eg&&1/zS(new Eg([,-0]))[1]==wK?function(e){return new Eg(e)}:BU,CK=200;function EK(e,n,s){var l=-1,d=ZU,m=e.length,b=!0,r=[],E=r;if(m>=CK){var M=SK(e);if(M)return zS(M);b=!1,d=ML,E=new Pv}else E=r;e:for(;++l<m;){var A=e[l],P=A;if(A=A!==0?A:0,b&&P===P){for(var D=E.length;D--;)if(E[D]===P)continue e;r.push(A)}else d(E,P,s)||(E!==r&&E.push(P),r.push(A))}return r}var Q3=lL(function(e){return EK(ny(e,1,zL,!0))});const Li=e=>e===void 0,Ts=e=>typeof e=="boolean",gr=e=>typeof e=="number",ru=e=>!e&&e!==0||mn(e)&&e.length===0||Yr(e)&&!Object.keys(e).length,xl=e=>typeof Element>"u"?!1:e instanceof Element,Mu=e=>ea(e),TK=e=>ir(e)?!Number.isNaN(Number(e)):!1,_x=e=>e===window;var IK=Object.defineProperty,kK=Object.defineProperties,MK=Object.getOwnPropertyDescriptors,V5=Object.getOwnPropertySymbols,AK=Object.prototype.hasOwnProperty,RK=Object.prototype.propertyIsEnumerable,$5=(e,n,s)=>n in e?IK(e,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[n]=s,PK=(e,n)=>{for(var s in n||(n={}))AK.call(n,s)&&$5(e,s,n[s]);if(V5)for(var s of V5(n))RK.call(n,s)&&$5(e,s,n[s]);return e},LK=(e,n)=>kK(e,MK(n));function kb(e,n){var s;const l=Zs();return Da(()=>{l.value=e()},LK(PK({},n),{flush:(s=void 0)!=null?s:"sync"})),n0(l)}var H5;const Pi=typeof window<"u",OK=e=>typeof e<"u",Z4=e=>typeof e=="function",DK=e=>typeof e=="string",Vg=()=>{},Mb=Pi&&((H5=window?.navigator)==null?void 0:H5.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function Ef(e){return typeof e=="function"?e():w(e)}function HL(e,n){function s(...l){return new Promise((d,m)=>{Promise.resolve(e(()=>n.apply(this,l),{fn:n,thisArg:this,args:l})).then(d).catch(m)})}return s}function zK(e,n={}){let s,l,d=Vg;const m=r=>{clearTimeout(r),d(),d=Vg};return r=>{const E=Ef(e),M=Ef(n.maxWait);return s&&m(s),E<=0||M!==void 0&&M<=0?(l&&(m(l),l=null),Promise.resolve(r())):new Promise((A,P)=>{d=n.rejectOnCancel?P:A,M&&!l&&(l=setTimeout(()=>{s&&m(s),l=null,A(r())},M)),s=setTimeout(()=>{l&&m(l),l=null,A(r())},E)})}}function NK(e,n=!0,s=!0,l=!1){let d=0,m,b=!0,r=Vg,E;const M=()=>{m&&(clearTimeout(m),m=void 0,r(),r=Vg)};return P=>{const D=Ef(e),z=Date.now()-d,F=()=>E=P();return M(),D<=0?(d=Date.now(),F()):(z>D&&(s||!b)?(d=Date.now(),F()):n&&(E=new Promise((N,q)=>{r=l?q:N,m=setTimeout(()=>{d=Date.now(),b=!0,N(F()),M()},Math.max(0,D-z))})),!s&&!m&&(m=setTimeout(()=>b=!0,D)),b=!1,E)}}function FK(e){return e}function BK(e,n){let s,l,d;const m=Re(!0),b=()=>{m.value=!0,d()};on(e,b,{flush:"sync"});const r=Z4(n)?n:n.get,E=Z4(n)?void 0:n.set,M=dV((A,P)=>(l=A,d=P,{get(){return m.value&&(s=r(),m.value=!1),l(),s},set(D){E?.(D)}}));return Object.isExtensible(M)&&(M.trigger=b),M}function iy(e){return dR()?(hR(e),!0):!1}function VK(e,n=200,s={}){return HL(zK(n,s),e)}function $K(e,n=200,s={}){const l=Re(e.value),d=VK(()=>{l.value=e.value},n,s);return on(e,()=>d()),l}function UL(e,n=200,s=!1,l=!0,d=!1){return HL(NK(n,s,l,d),e)}function NS(e,n=!0){oi()?Zr(e):n?e():dr(e)}function Up(e,n,s={}){const{immediate:l=!0}=s,d=Re(!1);let m=null;function b(){m&&(clearTimeout(m),m=null)}function r(){d.value=!1,b()}function E(...M){b(),d.value=!0,m=setTimeout(()=>{d.value=!1,m=null,e(...M)},Ef(n))}return l&&(d.value=!0,Pi&&E()),iy(r),{isPending:n0(d),start:E,stop:r}}function bl(e){var n;const s=Ef(e);return(n=s?.$el)!=null?n:s}const Rf=Pi?window:void 0,HK=Pi?window.document:void 0;function Is(...e){let n,s,l,d;if(DK(e[0])||Array.isArray(e[0])?([s,l,d]=e,n=Rf):[n,s,l,d]=e,!n)return Vg;Array.isArray(s)||(s=[s]),Array.isArray(l)||(l=[l]);const m=[],b=()=>{m.forEach(A=>A()),m.length=0},r=(A,P,D,z)=>(A.addEventListener(P,D,z),()=>A.removeEventListener(P,D,z)),E=on(()=>[bl(n),Ef(d)],([A,P])=>{b(),A&&m.push(...s.flatMap(D=>l.map(z=>r(A,D,z,P))))},{immediate:!0,flush:"post"}),M=()=>{E(),b()};return iy(M),M}let U5=!1;function FS(e,n,s={}){const{window:l=Rf,ignore:d=[],capture:m=!0,detectIframe:b=!1}=s;if(!l)return;Mb&&!U5&&(U5=!0,Array.from(l.document.body.children).forEach(D=>D.addEventListener("click",Vg)));let r=!0;const E=D=>d.some(z=>{if(typeof z=="string")return Array.from(l.document.querySelectorAll(z)).some(F=>F===D.target||D.composedPath().includes(F));{const F=bl(z);return F&&(D.target===F||D.composedPath().includes(F))}}),A=[Is(l,"click",D=>{const z=bl(e);if(!(!z||z===D.target||D.composedPath().includes(z))){if(D.detail===0&&(r=!E(D)),!r){r=!0;return}n(D)}},{passive:!0,capture:m}),Is(l,"pointerdown",D=>{const z=bl(e);z&&(r=!D.composedPath().includes(z)&&!E(D))},{passive:!0}),b&&Is(l,"blur",D=>{var z;const F=bl(e);((z=l.document.activeElement)==null?void 0:z.tagName)==="IFRAME"&&!F?.contains(l.document.activeElement)&&n(D)})].filter(Boolean);return()=>A.forEach(D=>D())}function UK(e={}){var n;const{window:s=Rf}=e,l=(n=e.document)!=null?n:s?.document,d=BK(()=>null,()=>l?.activeElement);return s&&(Is(s,"blur",m=>{m.relatedTarget===null&&d.trigger()},!0),Is(s,"focus",d.trigger,!0)),d}function jL(e,n=!1){const s=Re(),l=()=>s.value=!!e();return l(),NS(l,n),s}function jK(e){return JSON.parse(JSON.stringify(e))}const j5=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},G5="__vueuse_ssr_handlers__";j5[G5]=j5[G5]||{};function GK(e,n,{window:s=Rf,initialValue:l=""}={}){const d=Re(l),m=se(()=>{var b;return bl(n)||((b=s?.document)==null?void 0:b.documentElement)});return on([m,()=>Ef(e)],([b,r])=>{var E;if(b&&s){const M=(E=s.getComputedStyle(b).getPropertyValue(r))==null?void 0:E.trim();d.value=M||l}},{immediate:!0}),on(d,b=>{var r;(r=m.value)!=null&&r.style&&m.value.style.setProperty(Ef(e),b)}),d}function qK({document:e=HK}={}){if(!e)return Re("visible");const n=Re(e.visibilityState);return Is(e,"visibilitychange",()=>{n.value=e.visibilityState}),n}var q5=Object.getOwnPropertySymbols,WK=Object.prototype.hasOwnProperty,KK=Object.prototype.propertyIsEnumerable,YK=(e,n)=>{var s={};for(var l in e)WK.call(e,l)&&n.indexOf(l)<0&&(s[l]=e[l]);if(e!=null&&q5)for(var l of q5(e))n.indexOf(l)<0&&KK.call(e,l)&&(s[l]=e[l]);return s};function so(e,n,s={}){const l=s,{window:d=Rf}=l,m=YK(l,["window"]);let b;const r=jL(()=>d&&"ResizeObserver"in d),E=()=>{b&&(b.disconnect(),b=void 0)},M=on(()=>bl(e),P=>{E(),r.value&&d&&P&&(b=new ResizeObserver(n),b.observe(P,m))},{immediate:!0,flush:"post"}),A=()=>{E(),M()};return iy(A),{isSupported:r,stop:A}}function W5(e,n={}){const{reset:s=!0,windowResize:l=!0,windowScroll:d=!0,immediate:m=!0}=n,b=Re(0),r=Re(0),E=Re(0),M=Re(0),A=Re(0),P=Re(0),D=Re(0),z=Re(0);function F(){const N=bl(e);if(!N){s&&(b.value=0,r.value=0,E.value=0,M.value=0,A.value=0,P.value=0,D.value=0,z.value=0);return}const q=N.getBoundingClientRect();b.value=q.height,r.value=q.bottom,E.value=q.left,M.value=q.right,A.value=q.top,P.value=q.width,D.value=q.x,z.value=q.y}return so(e,F),on(()=>bl(e),N=>!N&&F()),d&&Is("scroll",F,{capture:!0,passive:!0}),l&&Is("resize",F,{passive:!0}),NS(()=>{m&&F()}),{height:b,bottom:r,left:E,right:M,top:A,width:P,x:D,y:z,update:F}}var K5=Object.getOwnPropertySymbols,ZK=Object.prototype.hasOwnProperty,XK=Object.prototype.propertyIsEnumerable,JK=(e,n)=>{var s={};for(var l in e)ZK.call(e,l)&&n.indexOf(l)<0&&(s[l]=e[l]);if(e!=null&&K5)for(var l of K5(e))n.indexOf(l)<0&&XK.call(e,l)&&(s[l]=e[l]);return s};function GL(e,n,s={}){const l=s,{window:d=Rf}=l,m=JK(l,["window"]);let b;const r=jL(()=>d&&"MutationObserver"in d),E=()=>{b&&(b.disconnect(),b=void 0)},M=on(()=>bl(e),P=>{E(),r.value&&d&&P&&(b=new MutationObserver(n),b.observe(P,m))},{immediate:!0}),A=()=>{E(),M()};return iy(A),{isSupported:r,stop:A}}var Y5;(function(e){e.UP="UP",e.RIGHT="RIGHT",e.DOWN="DOWN",e.LEFT="LEFT",e.NONE="NONE"})(Y5||(Y5={}));var QK=Object.defineProperty,Z5=Object.getOwnPropertySymbols,eY=Object.prototype.hasOwnProperty,tY=Object.prototype.propertyIsEnumerable,X5=(e,n,s)=>n in e?QK(e,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[n]=s,nY=(e,n)=>{for(var s in n||(n={}))eY.call(n,s)&&X5(e,s,n[s]);if(Z5)for(var s of Z5(n))tY.call(n,s)&&X5(e,s,n[s]);return e};const rY={easeInSine:[.12,0,.39,0],easeOutSine:[.61,1,.88,1],easeInOutSine:[.37,0,.63,1],easeInQuad:[.11,0,.5,0],easeOutQuad:[.5,1,.89,1],easeInOutQuad:[.45,0,.55,1],easeInCubic:[.32,0,.67,0],easeOutCubic:[.33,1,.68,1],easeInOutCubic:[.65,0,.35,1],easeInQuart:[.5,0,.75,0],easeOutQuart:[.25,1,.5,1],easeInOutQuart:[.76,0,.24,1],easeInQuint:[.64,0,.78,0],easeOutQuint:[.22,1,.36,1],easeInOutQuint:[.83,0,.17,1],easeInExpo:[.7,0,.84,0],easeOutExpo:[.16,1,.3,1],easeInOutExpo:[.87,0,.13,1],easeInCirc:[.55,0,1,.45],easeOutCirc:[0,.55,.45,1],easeInOutCirc:[.85,0,.15,1],easeInBack:[.36,0,.66,-.56],easeOutBack:[.34,1.56,.64,1],easeInOutBack:[.68,-.6,.32,1.6]};nY({linear:FK},rY);function qL(e,n,s,l={}){var d,m,b;const{clone:r=!1,passive:E=!1,eventName:M,deep:A=!1,defaultValue:P}=l,D=oi(),z=s||D?.emit||((d=D?.$emit)==null?void 0:d.bind(D))||((b=(m=D?.proxy)==null?void 0:m.$emit)==null?void 0:b.bind(D?.proxy));let F=M;n||(n="modelValue"),F=M||F||`update:${n.toString()}`;const N=G=>r?Z4(r)?r(G):jK(G):G,q=()=>OK(e[n])?N(e[n]):P;if(E){const G=q(),ie=Re(G);return on(()=>e[n],W=>ie.value=N(W)),on(ie,W=>{(W!==e[n]||A)&&z(F,W)},{deep:A}),ie}else return se({get(){return q()},set(G){z(F,G)}})}function iY({window:e=Rf}={}){if(!e)return Re(!1);const n=Re(e.document.hasFocus());return Is(e,"blur",()=>{n.value=!1}),Is(e,"focus",()=>{n.value=!0}),n}function sY(e={}){const{window:n=Rf,initialWidth:s=1/0,initialHeight:l=1/0,listenOrientation:d=!0,includeScrollbar:m=!0}=e,b=Re(s),r=Re(l),E=()=>{n&&(m?(b.value=n.innerWidth,r.value=n.innerHeight):(b.value=n.document.documentElement.clientWidth,r.value=n.document.documentElement.clientHeight))};return E(),NS(E),Is("resize",E,{passive:!0}),d&&Is("orientationchange",E,{passive:!0}),{width:b,height:r}}class oY extends Error{constructor(n){super(n),this.name="ElementPlusError"}}function No(e,n){throw new oY(`[${e}] ${n}`)}const J5={current:0},Q5=Re(0),WL=2e3,eM=Symbol("elZIndexContextKey"),KL=Symbol("zIndexContextKey"),u0=e=>{const n=oi()?Gn(eM,J5):J5,s=e||(oi()?Gn(KL,void 0):void 0),l=se(()=>{const b=w(s);return gr(b)?b:WL}),d=se(()=>l.value+Q5.value),m=()=>(n.current++,Q5.value=n.current,d.value);return!Pi&&Gn(eM),{initialZIndex:l,currentZIndex:d,nextZIndex:m}};var aY={name:"en",el:{breadcrumb:{label:"Breadcrumb"},colorpicker:{confirm:"OK",clear:"Clear",defaultLabel:"color picker",description:"current color is {color}. press enter to select a new color.",alphaLabel:"pick alpha value"},datepicker:{now:"Now",today:"Today",cancel:"Cancel",clear:"Clear",confirm:"OK",dateTablePrompt:"Use the arrow keys and enter to select the day of the month",monthTablePrompt:"Use the arrow keys and enter to select the month",yearTablePrompt:"Use the arrow keys and enter to select the year",selectedDate:"Selected date",selectDate:"Select date",selectTime:"Select time",startDate:"Start Date",startTime:"Start Time",endDate:"End Date",endTime:"End Time",prevYear:"Previous Year",nextYear:"Next Year",prevMonth:"Previous Month",nextMonth:"Next Month",year:"",month1:"January",month2:"February",month3:"March",month4:"April",month5:"May",month6:"June",month7:"July",month8:"August",month9:"September",month10:"October",month11:"November",month12:"December",week:"week",weeks:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},weeksFull:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"},months:{jan:"Jan",feb:"Feb",mar:"Mar",apr:"Apr",may:"May",jun:"Jun",jul:"Jul",aug:"Aug",sep:"Sep",oct:"Oct",nov:"Nov",dec:"Dec"}},inputNumber:{decrease:"decrease number",increase:"increase number"},select:{loading:"Loading",noMatch:"No matching data",noData:"No data",placeholder:"Select"},mention:{loading:"Loading"},dropdown:{toggleDropdown:"Toggle Dropdown"},cascader:{noMatch:"No matching data",loading:"Loading",placeholder:"Select",noData:"No data"},pagination:{goto:"Go to",pagesize:"/page",total:"Total {total}",pageClassifier:"",page:"Page",prev:"Go to previous page",next:"Go to next page",currentPage:"page {pager}",prevPages:"Previous {pager} pages",nextPages:"Next {pager} pages",deprecationWarning:"Deprecated usages detected, please refer to the el-pagination documentation for more details"},dialog:{close:"Close this dialog"},drawer:{close:"Close this dialog"},messagebox:{title:"Message",confirm:"OK",cancel:"Cancel",error:"Illegal input",close:"Close this dialog"},upload:{deleteTip:"press delete to remove",delete:"Delete",preview:"Preview",continue:"Continue"},slider:{defaultLabel:"slider between {min} and {max}",defaultRangeStartLabel:"pick start value",defaultRangeEndLabel:"pick end value"},table:{emptyText:"No Data",confirmFilter:"Confirm",resetFilter:"Reset",clearFilter:"All",sumText:"Sum"},tour:{next:"Next",previous:"Previous",finish:"Finish"},tree:{emptyText:"No Data"},transfer:{noMatch:"No matching data",noData:"No data",titles:["List 1","List 2"],filterPlaceholder:"Enter keyword",noCheckedFormat:"{total} items",hasCheckedFormat:"{checked}/{total} checked"},image:{error:"FAILED"},pageHeader:{title:"Back"},popconfirm:{confirmButtonText:"Yes",cancelButtonText:"No"},carousel:{leftArrow:"Carousel arrow left",rightArrow:"Carousel arrow right",indicator:"Carousel switch to index {index}"}}};const lY=e=>(n,s)=>uY(n,s,w(e)),uY=(e,n,s)=>To(s,e,e).replace(/\{(\w+)\}/g,(l,d)=>{var m;return`${(m=n?.[d])!=null?m:`{${d}}`}`}),cY=e=>{const n=se(()=>w(e).name),s=Hs(e)?e:Re(e);return{lang:n,locale:s,t:lY(e)}},YL=Symbol("localeContextKey"),Oi=e=>{const n=e||Gn(YL,Re());return cY(se(()=>n.value||aY))},ZL="__epPropKey",wt=e=>e,dY=e=>Yr(e)&&!!e[ZL],wc=(e,n)=>{if(!Yr(e)||dY(e))return e;const{values:s,required:l,default:d,type:m,validator:b}=e,E={type:m,required:!!l,validator:s||b?M=>{let A=!1,P=[];if(s&&(P=Array.from(s),Wi(e,"default")&&P.push(d),A||(A=P.includes(M))),b&&(A||(A=b(M))),!A&&P.length>0){const D=[...new Set(P)].map(z=>JSON.stringify(z)).join(", ");_$(`Invalid prop: validation failed${n?` for prop "${n}"`:""}. Expected one of [${D}], got value ${JSON.stringify(M)}.`)}return A}:void 0,[ZL]:!0};return Wi(e,"default")&&(E.default=d),E},bn=e=>Lv(Object.entries(e).map(([n,s])=>[n,wc(s,n)])),Cd=["","default","small","large"],Fo=wc({type:String,values:Cd,required:!1}),XL=Symbol("size"),JL=()=>{const e=Gn(XL,{});return se(()=>w(e.size)||"")},QL=Symbol("emptyValuesContextKey"),hY=["",void 0,null],fY=void 0,c0=bn({emptyValues:Array,valueOnClear:{type:[String,Number,Boolean,Function],default:void 0,validator:e=>hr(e)?!e():!e}}),vx=(e,n)=>{const s=oi()?Gn(QL,Re({})):Re({}),l=se(()=>e.emptyValues||s.value.emptyValues||hY),d=se(()=>hr(e.valueOnClear)?e.valueOnClear():e.valueOnClear!==void 0?e.valueOnClear:hr(s.value.valueOnClear)?s.value.valueOnClear():s.value.valueOnClear!==void 0?s.value.valueOnClear:n!==void 0?n:fY),m=b=>l.value.includes(b);return l.value.includes(d.value),{emptyValues:l,valueOnClear:d,isEmptyValue:m}},$g=e=>Object.keys(e),eO=e=>Object.entries(e),fv=(e,n,s)=>({get value(){return To(e,n,s)},set value(l){bK(e,n,l)}}),Ab=Re();function yx(e,n=void 0){const s=oi()?Gn(QP,Ab):Ab;return e?se(()=>{var l,d;return(d=(l=s.value)==null?void 0:l[e])!=null?d:n}):s}function bx(e,n){const s=yx(),l=dn(e,se(()=>{var r;return((r=s.value)==null?void 0:r.namespace)||dv})),d=Oi(se(()=>{var r;return(r=s.value)==null?void 0:r.locale})),m=u0(se(()=>{var r;return((r=s.value)==null?void 0:r.zIndex)||WL})),b=se(()=>{var r;return w(n)||((r=s.value)==null?void 0:r.size)||""});return BS(se(()=>w(s)||{})),{ns:l,locale:d,zIndex:m,size:b}}const BS=(e,n,s=!1)=>{var l;const d=!!oi(),m=d?yx():void 0,b=(l=n?.provide)!=null?l:d?Ti:void 0;if(!b)return;const r=se(()=>{const E=w(e);return m?.value?pY(m.value,E):E});return b(QP,r),b(YL,se(()=>r.value.locale)),b(eL,se(()=>r.value.namespace)),b(KL,se(()=>r.value.zIndex)),b(XL,{size:se(()=>r.value.size||"")}),b(QL,se(()=>({emptyValues:r.value.emptyValues,valueOnClear:r.value.valueOnClear}))),(s||!Ab.value)&&(Ab.value=r.value),r},pY=(e,n)=>{const s=[...new Set([...$g(e),...$g(n)])],l={};for(const d of s)l[d]=n[d]!==void 0?n[d]:e[d];return l},mY=(e=[])=>({version:tU,install:(s,l)=>{s[l5]||(s[l5]=!0,e.forEach(d=>s.use(d)),l&&BS(l,s,!0))}}),Nr="update:modelValue",mi="change",Go="input",gY=bn({zIndex:{type:wt([Number,String]),default:100},target:{type:String,default:""},offset:{type:Number,default:0},position:{type:String,values:["top","bottom"],default:"top"}}),_Y={scroll:({scrollTop:e,fixed:n})=>gr(e)&&Ts(n),[mi]:e=>Ts(e)};var En=(e,n)=>{const s=e.__vccOpts||e;for(const[l,d]of n)s[l]=d;return s};function vY(e,n,s,l){const d=s-n;return e/=l/2,e<1?d/2*e*e*e+n:d/2*((e-=2)*e*e+2)+n}const Tf=e=>Pi?window.requestAnimationFrame(e):setTimeout(e,16),jp=e=>Pi?window.cancelAnimationFrame(e):clearTimeout(e),tO=(e="")=>e.split(" ").filter(n=>!!n.trim()),Nl=(e,n)=>{if(!e||!n)return!1;if(n.includes(" "))throw new Error("className should not contain space.");return e.classList.contains(n)},Tu=(e,n)=>{!e||!n.trim()||e.classList.add(...tO(n))},rl=(e,n)=>{!e||!n.trim()||e.classList.remove(...tO(n))},sh=(e,n)=>{var s;if(!Pi||!e||!n)return"";let l=wl(n);l==="float"&&(l="cssFloat");try{const d=e.style[l];if(d)return d;const m=(s=document.defaultView)==null?void 0:s.getComputedStyle(e,"");return m?m[l]:""}catch{return e.style[l]}},nO=(e,n,s)=>{if(!(!e||!n))if(Yr(n))eO(n).forEach(([l,d])=>nO(e,l,d));else{const l=wl(n);e.style[l]=s}};function ho(e,n="px"){if(!e)return"";if(gr(e)||TK(e))return`${e}${n}`;if(ir(e))return e}const yY=(e,n)=>{if(!Pi)return!1;const s={undefined:"overflow",true:"overflow-y",false:"overflow-x"}[String(n)],l=sh(e,s);return["scroll","auto","overlay"].some(d=>l.includes(d))},VS=(e,n)=>{if(!Pi)return;let s=e;for(;s;){if([window,document,document.documentElement].includes(s))return window;if(yY(s,n))return s;s=s.parentNode}return s};let m2;const rO=e=>{var n;if(!Pi)return 0;if(m2!==void 0)return m2;const s=document.createElement("div");s.className=`${e}-scrollbar__wrap`,s.style.visibility="hidden",s.style.width="100px",s.style.position="absolute",s.style.top="-9999px",document.body.appendChild(s);const l=s.offsetWidth;s.style.overflow="scroll";const d=document.createElement("div");d.style.width="100%",s.appendChild(d);const m=d.offsetWidth;return(n=s.parentNode)==null||n.removeChild(s),m2=l-m,m2};function $S(e,n){if(!Pi)return;if(!n){e.scrollTop=0;return}const s=[];let l=n.offsetParent;for(;l!==null&&e!==l&&e.contains(l);)s.push(l),l=l.offsetParent;const d=n.offsetTop+s.reduce((E,M)=>E+M.offsetTop,0),m=d+n.offsetHeight,b=e.scrollTop,r=b+e.clientHeight;d<b?e.scrollTop=d:m>r&&(e.scrollTop=m-e.clientHeight)}function bY(e,n,s,l,d){const m=Date.now();let b;const r=()=>{const M=Date.now()-m,A=vY(M>l?l:M,n,s,l);_x(e)?e.scrollTo(window.pageXOffset,A):e.scrollTop=A,M<l?b=Tf(r):hr(d)&&d()};return r(),()=>{b&&jp(b)}}const tM=(e,n)=>_x(n)?e.ownerDocument.documentElement:n,nM=e=>_x(e)?window.scrollY:e.scrollTop,iO="ElAffix",xY=xe({name:iO}),wY=xe({...xY,props:gY,emits:_Y,setup(e,{expose:n,emit:s}){const l=e,d=dn("affix"),m=Zs(),b=Zs(),r=Zs(),{height:E}=sY(),{height:M,width:A,top:P,bottom:D,update:z}=W5(b,{windowScroll:!1}),F=W5(m),N=Re(!1),q=Re(0),G=Re(0),ie=se(()=>({height:N.value?`${M.value}px`:"",width:N.value?`${A.value}px`:""})),W=se(()=>{if(!N.value)return{};const re=l.offset?ho(l.offset):0;return{height:`${M.value}px`,width:`${A.value}px`,top:l.position==="top"?re:"",bottom:l.position==="bottom"?re:"",transform:G.value?`translateY(${G.value}px)`:"",zIndex:l.zIndex}}),Y=()=>{if(!r.value)return;q.value=r.value instanceof Window?document.documentElement.scrollTop:r.value.scrollTop||0;const{position:re,target:he,offset:fe}=l,ce=fe+M.value;if(re==="top")if(he){const me=F.bottom.value-ce;N.value=fe>P.value&&F.bottom.value>0,G.value=me<0?me:0}else N.value=fe>P.value;else if(he){const me=E.value-F.top.value-ce;N.value=E.value-fe<D.value&&E.value>F.top.value,G.value=me<0?-me:0}else N.value=E.value-fe<D.value},J=async()=>{z(),await dr(),s("scroll",{scrollTop:q.value,fixed:N.value})};return on(N,re=>s(mi,re)),Zr(()=>{var re;l.target?(m.value=(re=document.querySelector(l.target))!=null?re:void 0,m.value||No(iO,`Target does not exist: ${l.target}`)):m.value=document.documentElement,r.value=VS(b.value,!0),z()}),Is(r,"scroll",J),Da(Y),n({update:Y,updateRoot:z}),(re,he)=>(Z(),ue("div",{ref_key:"root",ref:b,class:ge(w(d).b()),style:fr(w(ie))},[ae("div",{class:ge({[w(d).m("fixed")]:N.value}),style:fr(w(W))},[It(re.$slots,"default")],6)],6))}});var SY=En(wY,[["__file","affix.vue"]]);const Gr=(e,n)=>{if(e.install=s=>{for(const l of[e,...Object.values(n??{})])s.component(l.name,l)},n)for(const[s,l]of Object.entries(n))e[s]=l;return e},sO=(e,n)=>(e.install=s=>{e._context=s._context,s.config.globalProperties[n]=e},e),CY=(e,n)=>(e.install=s=>{s.directive(n,e)},e),ao=e=>(e.install=ys,e),EY=Gr(SY),TY=bn({size:{type:wt([Number,String])},color:{type:String}}),IY=xe({name:"ElIcon",inheritAttrs:!1}),kY=xe({...IY,props:TY,setup(e){const n=e,s=dn("icon"),l=se(()=>{const{size:d,color:m}=n;return!d&&!m?{}:{fontSize:Li(d)?void 0:ho(d),"--color":m}});return(d,m)=>(Z(),ue("i",pi({class:w(s).b(),style:w(l)},d.$attrs),[It(d.$slots,"default")],16))}});var MY=En(kY,[["__file","icon.vue"]]);const rr=Gr(MY);/*! Element Plus Icons Vue v2.3.1 */var AY=xe({name:"AddLocation",__name:"add-location",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M288 896h448q32 0 32 32t-32 32H288q-32 0-32-32t32-32"}),ae("path",{fill:"currentColor",d:"M800 416a288 288 0 1 0-576 0c0 118.144 94.528 272.128 288 456.576C705.472 688.128 800 534.144 800 416M512 960C277.312 746.688 160 565.312 160 416a352 352 0 0 1 704 0c0 149.312-117.312 330.688-352 544"}),ae("path",{fill:"currentColor",d:"M544 384h96a32 32 0 1 1 0 64h-96v96a32 32 0 0 1-64 0v-96h-96a32 32 0 0 1 0-64h96v-96a32 32 0 0 1 64 0z"})]))}}),RY=AY,PY=xe({name:"Aim",__name:"aim",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M512 896a384 384 0 1 0 0-768 384 384 0 0 0 0 768m0 64a448 448 0 1 1 0-896 448 448 0 0 1 0 896"}),ae("path",{fill:"currentColor",d:"M512 96a32 32 0 0 1 32 32v192a32 32 0 0 1-64 0V128a32 32 0 0 1 32-32m0 576a32 32 0 0 1 32 32v192a32 32 0 1 1-64 0V704a32 32 0 0 1 32-32M96 512a32 32 0 0 1 32-32h192a32 32 0 0 1 0 64H128a32 32 0 0 1-32-32m576 0a32 32 0 0 1 32-32h192a32 32 0 1 1 0 64H704a32 32 0 0 1-32-32"})]))}}),LY=PY,OY=xe({name:"AlarmClock",__name:"alarm-clock",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M512 832a320 320 0 1 0 0-640 320 320 0 0 0 0 640m0 64a384 384 0 1 1 0-768 384 384 0 0 1 0 768"}),ae("path",{fill:"currentColor",d:"m292.288 824.576 55.424 32-48 83.136a32 32 0 1 1-55.424-32zm439.424 0-55.424 32 48 83.136a32 32 0 1 0 55.424-32zM512 512h160a32 32 0 1 1 0 64H480a32 32 0 0 1-32-32V320a32 32 0 0 1 64 0zM90.496 312.256A160 160 0 0 1 312.32 90.496l-46.848 46.848a96 96 0 0 0-128 128L90.56 312.256zm835.264 0A160 160 0 0 0 704 90.496l46.848 46.848a96 96 0 0 1 128 128z"})]))}}),DY=OY,zY=xe({name:"Apple",__name:"apple",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M599.872 203.776a189.44 189.44 0 0 1 64.384-4.672l2.624.128c31.168 1.024 51.2 4.096 79.488 16.32 37.632 16.128 74.496 45.056 111.488 89.344 96.384 115.264 82.752 372.8-34.752 521.728-7.68 9.728-32 41.6-30.72 39.936a426.624 426.624 0 0 1-30.08 35.776c-31.232 32.576-65.28 49.216-110.08 50.048-31.36.64-53.568-5.312-84.288-18.752l-6.528-2.88c-20.992-9.216-30.592-11.904-47.296-11.904-18.112 0-28.608 2.88-51.136 12.672l-6.464 2.816c-28.416 12.224-48.32 18.048-76.16 19.2-74.112 2.752-116.928-38.08-180.672-132.16-96.64-142.08-132.608-349.312-55.04-486.4 46.272-81.92 129.92-133.632 220.672-135.04 32.832-.576 60.288 6.848 99.648 22.72 27.136 10.88 34.752 13.76 37.376 14.272 16.256-20.16 27.776-36.992 34.56-50.24 13.568-26.304 27.2-59.968 40.704-100.8a32 32 0 1 1 60.8 20.224c-12.608 37.888-25.408 70.4-38.528 97.664zm-51.52 78.08c-14.528 17.792-31.808 37.376-51.904 58.816a32 32 0 1 1-46.72-43.776l12.288-13.248c-28.032-11.2-61.248-26.688-95.68-26.112-70.4 1.088-135.296 41.6-171.648 105.792C121.6 492.608 176 684.16 247.296 788.992c34.816 51.328 76.352 108.992 130.944 106.944 52.48-2.112 72.32-34.688 135.872-34.688 63.552 0 81.28 34.688 136.96 33.536 56.448-1.088 75.776-39.04 126.848-103.872 107.904-136.768 107.904-362.752 35.776-449.088-72.192-86.272-124.672-84.096-151.68-85.12-41.472-4.288-81.6 12.544-113.664 25.152z"})]))}}),NY=zY,FY=xe({name:"ArrowDownBold",__name:"arrow-down-bold",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M104.704 338.752a64 64 0 0 1 90.496 0l316.8 316.8 316.8-316.8a64 64 0 0 1 90.496 90.496L557.248 791.296a64 64 0 0 1-90.496 0L104.704 429.248a64 64 0 0 1 0-90.496z"})]))}}),BY=FY,VY=xe({name:"ArrowDown",__name:"arrow-down",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M831.872 340.864 512 652.672 192.128 340.864a30.592 30.592 0 0 0-42.752 0 29.12 29.12 0 0 0 0 41.6L489.664 714.24a32 32 0 0 0 44.672 0l340.288-331.712a29.12 29.12 0 0 0 0-41.728 30.592 30.592 0 0 0-42.752 0z"})]))}}),Ed=VY,$Y=xe({name:"ArrowLeftBold",__name:"arrow-left-bold",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M685.248 104.704a64 64 0 0 1 0 90.496L368.448 512l316.8 316.8a64 64 0 0 1-90.496 90.496L232.704 557.248a64 64 0 0 1 0-90.496l362.048-362.048a64 64 0 0 1 90.496 0z"})]))}}),HY=$Y,UY=xe({name:"ArrowLeft",__name:"arrow-left",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M609.408 149.376 277.76 489.6a32 32 0 0 0 0 44.672l331.648 340.352a29.12 29.12 0 0 0 41.728 0 30.592 30.592 0 0 0 0-42.752L339.264 511.936l311.872-319.872a30.592 30.592 0 0 0 0-42.688 29.12 29.12 0 0 0-41.728 0z"})]))}}),ph=UY,jY=xe({name:"ArrowRightBold",__name:"arrow-right-bold",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M338.752 104.704a64 64 0 0 0 0 90.496l316.8 316.8-316.8 316.8a64 64 0 0 0 90.496 90.496l362.048-362.048a64 64 0 0 0 0-90.496L429.248 104.704a64 64 0 0 0-90.496 0z"})]))}}),GY=jY,qY=xe({name:"ArrowRight",__name:"arrow-right",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M340.864 149.312a30.592 30.592 0 0 0 0 42.752L652.736 512 340.864 831.872a30.592 30.592 0 0 0 0 42.752 29.12 29.12 0 0 0 41.728 0L714.24 534.336a32 32 0 0 0 0-44.672L382.592 149.376a29.12 29.12 0 0 0-41.728 0z"})]))}}),il=qY,WY=xe({name:"ArrowUpBold",__name:"arrow-up-bold",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M104.704 685.248a64 64 0 0 0 90.496 0l316.8-316.8 316.8 316.8a64 64 0 0 0 90.496-90.496L557.248 232.704a64 64 0 0 0-90.496 0L104.704 594.752a64 64 0 0 0 0 90.496z"})]))}}),KY=WY,YY=xe({name:"ArrowUp",__name:"arrow-up",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"m488.832 344.32-339.84 356.672a32 32 0 0 0 0 44.16l.384.384a29.44 29.44 0 0 0 42.688 0l320-335.872 319.872 335.872a29.44 29.44 0 0 0 42.688 0l.384-.384a32 32 0 0 0 0-44.16L535.168 344.32a32 32 0 0 0-46.336 0"})]))}}),xx=YY,ZY=xe({name:"Avatar",__name:"avatar",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M628.736 528.896A416 416 0 0 1 928 928H96a415.872 415.872 0 0 1 299.264-399.104L512 704zM720 304a208 208 0 1 1-416 0 208 208 0 0 1 416 0"})]))}}),XY=ZY,JY=xe({name:"Back",__name:"back",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M224 480h640a32 32 0 1 1 0 64H224a32 32 0 0 1 0-64"}),ae("path",{fill:"currentColor",d:"m237.248 512 265.408 265.344a32 32 0 0 1-45.312 45.312l-288-288a32 32 0 0 1 0-45.312l288-288a32 32 0 1 1 45.312 45.312z"})]))}}),oO=JY,QY=xe({name:"Baseball",__name:"baseball",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M195.2 828.8a448 448 0 1 1 633.6-633.6 448 448 0 0 1-633.6 633.6zm45.248-45.248a384 384 0 1 0 543.104-543.104 384 384 0 0 0-543.104 543.104"}),ae("path",{fill:"currentColor",d:"M497.472 96.896c22.784 4.672 44.416 9.472 64.896 14.528a256.128 256.128 0 0 0 350.208 350.208c5.056 20.48 9.856 42.112 14.528 64.896A320.128 320.128 0 0 1 497.472 96.896zM108.48 491.904a320.128 320.128 0 0 1 423.616 423.68c-23.04-3.648-44.992-7.424-65.728-11.52a256.128 256.128 0 0 0-346.496-346.432 1736.64 1736.64 0 0 1-11.392-65.728z"})]))}}),eZ=QY,tZ=xe({name:"Basketball",__name:"basketball",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M778.752 788.224a382.464 382.464 0 0 0 116.032-245.632 256.512 256.512 0 0 0-241.728-13.952 762.88 762.88 0 0 1 125.696 259.584zm-55.04 44.224a699.648 699.648 0 0 0-125.056-269.632 256.128 256.128 0 0 0-56.064 331.968 382.72 382.72 0 0 0 181.12-62.336m-254.08 61.248A320.128 320.128 0 0 1 557.76 513.6a715.84 715.84 0 0 0-48.192-48.128 320.128 320.128 0 0 1-379.264 88.384 382.4 382.4 0 0 0 110.144 229.696 382.4 382.4 0 0 0 229.184 110.08zM129.28 481.088a256.128 256.128 0 0 0 331.072-56.448 699.648 699.648 0 0 0-268.8-124.352 382.656 382.656 0 0 0-62.272 180.8m106.56-235.84a762.88 762.88 0 0 1 258.688 125.056 256.512 256.512 0 0 0-13.44-241.088A382.464 382.464 0 0 0 235.84 245.248zm318.08-114.944c40.576 89.536 37.76 193.92-8.448 281.344a779.84 779.84 0 0 1 66.176 66.112 320.832 320.832 0 0 1 282.112-8.128 382.4 382.4 0 0 0-110.144-229.12 382.4 382.4 0 0 0-229.632-110.208zM828.8 828.8a448 448 0 1 1-633.6-633.6 448 448 0 0 1 633.6 633.6"})]))}}),nZ=tZ,rZ=xe({name:"BellFilled",__name:"bell-filled",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M640 832a128 128 0 0 1-256 0zm192-64H134.4a38.4 38.4 0 0 1 0-76.8H192V448c0-154.88 110.08-284.16 256.32-313.6a64 64 0 1 1 127.36 0A320.128 320.128 0 0 1 832 448v243.2h57.6a38.4 38.4 0 0 1 0 76.8z"})]))}}),iZ=rZ,sZ=xe({name:"Bell",__name:"bell",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M512 64a64 64 0 0 1 64 64v64H448v-64a64 64 0 0 1 64-64"}),ae("path",{fill:"currentColor",d:"M256 768h512V448a256 256 0 1 0-512 0zm256-640a320 320 0 0 1 320 320v384H192V448a320 320 0 0 1 320-320"}),ae("path",{fill:"currentColor",d:"M96 768h832q32 0 32 32t-32 32H96q-32 0-32-32t32-32m352 128h128a64 64 0 0 1-128 0"})]))}}),oZ=sZ,aZ=xe({name:"Bicycle",__name:"bicycle",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M256 832a128 128 0 1 0 0-256 128 128 0 0 0 0 256m0 64a192 192 0 1 1 0-384 192 192 0 0 1 0 384"}),ae("path",{fill:"currentColor",d:"M288 672h320q32 0 32 32t-32 32H288q-32 0-32-32t32-32"}),ae("path",{fill:"currentColor",d:"M768 832a128 128 0 1 0 0-256 128 128 0 0 0 0 256m0 64a192 192 0 1 1 0-384 192 192 0 0 1 0 384"}),ae("path",{fill:"currentColor",d:"M480 192a32 32 0 0 1 0-64h160a32 32 0 0 1 31.04 24.256l96 384a32 32 0 0 1-62.08 15.488L615.04 192zM96 384a32 32 0 0 1 0-64h128a32 32 0 0 1 30.336 21.888l64 192a32 32 0 1 1-60.672 20.224L200.96 384z"}),ae("path",{fill:"currentColor",d:"m373.376 599.808-42.752-47.616 320-288 42.752 47.616z"})]))}}),lZ=aZ,uZ=xe({name:"BottomLeft",__name:"bottom-left",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M256 768h416a32 32 0 1 1 0 64H224a32 32 0 0 1-32-32V352a32 32 0 0 1 64 0z"}),ae("path",{fill:"currentColor",d:"M246.656 822.656a32 32 0 0 1-45.312-45.312l544-544a32 32 0 0 1 45.312 45.312l-544 544z"})]))}}),cZ=uZ,dZ=xe({name:"BottomRight",__name:"bottom-right",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M352 768a32 32 0 1 0 0 64h448a32 32 0 0 0 32-32V352a32 32 0 0 0-64 0v416z"}),ae("path",{fill:"currentColor",d:"M777.344 822.656a32 32 0 0 0 45.312-45.312l-544-544a32 32 0 0 0-45.312 45.312z"})]))}}),hZ=dZ,fZ=xe({name:"Bottom",__name:"bottom",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M544 805.888V168a32 32 0 1 0-64 0v637.888L246.656 557.952a30.72 30.72 0 0 0-45.312 0 35.52 35.52 0 0 0 0 48.064l288 306.048a30.72 30.72 0 0 0 45.312 0l288-306.048a35.52 35.52 0 0 0 0-48 30.72 30.72 0 0 0-45.312 0L544 805.824z"})]))}}),pZ=fZ,mZ=xe({name:"Bowl",__name:"bowl",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M714.432 704a351.744 351.744 0 0 0 148.16-256H161.408a351.744 351.744 0 0 0 148.16 256zM288 766.592A415.68 415.68 0 0 1 96 416a32 32 0 0 1 32-32h768a32 32 0 0 1 32 32 415.68 415.68 0 0 1-192 350.592V832a64 64 0 0 1-64 64H352a64 64 0 0 1-64-64zM493.248 320h-90.496l254.4-254.4a32 32 0 1 1 45.248 45.248zm187.328 0h-128l269.696-155.712a32 32 0 0 1 32 55.424zM352 768v64h320v-64z"})]))}}),gZ=mZ,_Z=xe({name:"Box",__name:"box",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M317.056 128 128 344.064V896h768V344.064L706.944 128zm-14.528-64h418.944a32 32 0 0 1 24.064 10.88l206.528 236.096A32 32 0 0 1 960 332.032V928a32 32 0 0 1-32 32H96a32 32 0 0 1-32-32V332.032a32 32 0 0 1 7.936-21.12L278.4 75.008A32 32 0 0 1 302.528 64z"}),ae("path",{fill:"currentColor",d:"M64 320h896v64H64z"}),ae("path",{fill:"currentColor",d:"M448 327.872V640h128V327.872L526.08 128h-28.16zM448 64h128l64 256v352a32 32 0 0 1-32 32H416a32 32 0 0 1-32-32V320z"})]))}}),vZ=_Z,yZ=xe({name:"Briefcase",__name:"briefcase",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M320 320V128h384v192h192v192H128V320zM128 576h768v320H128zm256-256h256.064V192H384z"})]))}}),bZ=yZ,xZ=xe({name:"BrushFilled",__name:"brush-filled",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M608 704v160a96 96 0 0 1-192 0V704h-96a128 128 0 0 1-128-128h640a128 128 0 0 1-128 128zM192 512V128.064h640V512z"})]))}}),wZ=xZ,SZ=xe({name:"Brush",__name:"brush",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M896 448H128v192a64 64 0 0 0 64 64h192v192h256V704h192a64 64 0 0 0 64-64zm-770.752-64c0-47.552 5.248-90.24 15.552-128 14.72-54.016 42.496-107.392 83.2-160h417.28l-15.36 70.336L736 96h211.2c-24.832 42.88-41.92 96.256-51.2 160a663.872 663.872 0 0 0-6.144 128H960v256a128 128 0 0 1-128 128H704v160a32 32 0 0 1-32 32H352a32 32 0 0 1-32-32V768H192A128 128 0 0 1 64 640V384h61.248zm64 0h636.544c-2.048-45.824.256-91.584 6.848-137.216 4.48-30.848 10.688-59.776 18.688-86.784h-96.64l-221.12 141.248L561.92 160H256.512c-25.856 37.888-43.776 75.456-53.952 112.832-8.768 32.064-13.248 69.12-13.312 111.168z"})]))}}),CZ=SZ,EZ=xe({name:"Burger",__name:"burger",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M160 512a32 32 0 0 0-32 32v64a32 32 0 0 0 30.08 32H864a32 32 0 0 0 32-32v-64a32 32 0 0 0-32-32zm736-58.56A96 96 0 0 1 960 544v64a96 96 0 0 1-51.968 85.312L855.36 833.6a96 96 0 0 1-89.856 62.272H258.496A96 96 0 0 1 168.64 833.6l-52.608-140.224A96 96 0 0 1 64 608v-64a96 96 0 0 1 64-90.56V448a384 384 0 1 1 768 5.44M832 448a320 320 0 0 0-640 0zM512 704H188.352l40.192 107.136a32 32 0 0 0 29.952 20.736h507.008a32 32 0 0 0 29.952-20.736L835.648 704z"})]))}}),TZ=EZ,IZ=xe({name:"Calendar",__name:"calendar",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M128 384v512h768V192H768v32a32 32 0 1 1-64 0v-32H320v32a32 32 0 0 1-64 0v-32H128v128h768v64zm192-256h384V96a32 32 0 1 1 64 0v32h160a32 32 0 0 1 32 32v768a32 32 0 0 1-32 32H96a32 32 0 0 1-32-32V160a32 32 0 0 1 32-32h160V96a32 32 0 0 1 64 0zm-32 384h64a32 32 0 0 1 0 64h-64a32 32 0 0 1 0-64m0 192h64a32 32 0 1 1 0 64h-64a32 32 0 1 1 0-64m192-192h64a32 32 0 0 1 0 64h-64a32 32 0 0 1 0-64m0 192h64a32 32 0 1 1 0 64h-64a32 32 0 1 1 0-64m192-192h64a32 32 0 1 1 0 64h-64a32 32 0 1 1 0-64m0 192h64a32 32 0 1 1 0 64h-64a32 32 0 1 1 0-64"})]))}}),aO=IZ,kZ=xe({name:"CameraFilled",__name:"camera-filled",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M160 224a64 64 0 0 0-64 64v512a64 64 0 0 0 64 64h704a64 64 0 0 0 64-64V288a64 64 0 0 0-64-64H748.416l-46.464-92.672A64 64 0 0 0 644.736 96H379.328a64 64 0 0 0-57.216 35.392L275.776 224zm352 435.2a115.2 115.2 0 1 0 0-230.4 115.2 115.2 0 0 0 0 230.4m0 140.8a256 256 0 1 1 0-512 256 256 0 0 1 0 512"})]))}}),MZ=kZ,AZ=xe({name:"Camera",__name:"camera",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M896 256H128v576h768zm-199.424-64-32.064-64h-304.96l-32 64zM96 192h160l46.336-92.608A64 64 0 0 1 359.552 64h304.96a64 64 0 0 1 57.216 35.328L768.192 192H928a32 32 0 0 1 32 32v640a32 32 0 0 1-32 32H96a32 32 0 0 1-32-32V224a32 32 0 0 1 32-32m416 512a160 160 0 1 0 0-320 160 160 0 0 0 0 320m0 64a224 224 0 1 1 0-448 224 224 0 0 1 0 448"})]))}}),RZ=AZ,PZ=xe({name:"CaretBottom",__name:"caret-bottom",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"m192 384 320 384 320-384z"})]))}}),LZ=PZ,OZ=xe({name:"CaretLeft",__name:"caret-left",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M672 192 288 511.936 672 832z"})]))}}),DZ=OZ,zZ=xe({name:"CaretRight",__name:"caret-right",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M384 192v640l384-320.064z"})]))}}),HS=zZ,NZ=xe({name:"CaretTop",__name:"caret-top",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M512 320 192 704h639.936z"})]))}}),lO=NZ,FZ=xe({name:"Cellphone",__name:"cellphone",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M256 128a64 64 0 0 0-64 64v640a64 64 0 0 0 64 64h512a64 64 0 0 0 64-64V192a64 64 0 0 0-64-64zm0-64h512a128 128 0 0 1 128 128v640a128 128 0 0 1-128 128H256a128 128 0 0 1-128-128V192A128 128 0 0 1 256 64m128 128h256a32 32 0 1 1 0 64H384a32 32 0 0 1 0-64m128 640a64 64 0 1 1 0-128 64 64 0 0 1 0 128"})]))}}),BZ=FZ,VZ=xe({name:"ChatDotRound",__name:"chat-dot-round",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"m174.72 855.68 135.296-45.12 23.68 11.84C388.096 849.536 448.576 864 512 864c211.84 0 384-166.784 384-352S723.84 160 512 160 128 326.784 128 512c0 69.12 24.96 139.264 70.848 199.232l22.08 28.8-46.272 115.584zm-45.248 82.56A32 32 0 0 1 89.6 896l58.368-145.92C94.72 680.32 64 596.864 64 512 64 299.904 256 96 512 96s448 203.904 448 416-192 416-448 416a461.056 461.056 0 0 1-206.912-48.384l-175.616 58.56z"}),ae("path",{fill:"currentColor",d:"M512 563.2a51.2 51.2 0 1 1 0-102.4 51.2 51.2 0 0 1 0 102.4m192 0a51.2 51.2 0 1 1 0-102.4 51.2 51.2 0 0 1 0 102.4m-384 0a51.2 51.2 0 1 1 0-102.4 51.2 51.2 0 0 1 0 102.4"})]))}}),$Z=VZ,HZ=xe({name:"ChatDotSquare",__name:"chat-dot-square",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M273.536 736H800a64 64 0 0 0 64-64V256a64 64 0 0 0-64-64H224a64 64 0 0 0-64 64v570.88zM296 800 147.968 918.4A32 32 0 0 1 96 893.44V256a128 128 0 0 1 128-128h576a128 128 0 0 1 128 128v416a128 128 0 0 1-128 128z"}),ae("path",{fill:"currentColor",d:"M512 499.2a51.2 51.2 0 1 1 0-102.4 51.2 51.2 0 0 1 0 102.4zm192 0a51.2 51.2 0 1 1 0-102.4 51.2 51.2 0 0 1 0 102.4zm-384 0a51.2 51.2 0 1 1 0-102.4 51.2 51.2 0 0 1 0 102.4z"})]))}}),UZ=HZ,jZ=xe({name:"ChatLineRound",__name:"chat-line-round",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"m174.72 855.68 135.296-45.12 23.68 11.84C388.096 849.536 448.576 864 512 864c211.84 0 384-166.784 384-352S723.84 160 512 160 128 326.784 128 512c0 69.12 24.96 139.264 70.848 199.232l22.08 28.8-46.272 115.584zm-45.248 82.56A32 32 0 0 1 89.6 896l58.368-145.92C94.72 680.32 64 596.864 64 512 64 299.904 256 96 512 96s448 203.904 448 416-192 416-448 416a461.056 461.056 0 0 1-206.912-48.384l-175.616 58.56z"}),ae("path",{fill:"currentColor",d:"M352 576h320q32 0 32 32t-32 32H352q-32 0-32-32t32-32m32-192h256q32 0 32 32t-32 32H384q-32 0-32-32t32-32"})]))}}),GZ=jZ,qZ=xe({name:"ChatLineSquare",__name:"chat-line-square",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M160 826.88 273.536 736H800a64 64 0 0 0 64-64V256a64 64 0 0 0-64-64H224a64 64 0 0 0-64 64zM296 800 147.968 918.4A32 32 0 0 1 96 893.44V256a128 128 0 0 1 128-128h576a128 128 0 0 1 128 128v416a128 128 0 0 1-128 128z"}),ae("path",{fill:"currentColor",d:"M352 512h320q32 0 32 32t-32 32H352q-32 0-32-32t32-32m0-192h320q32 0 32 32t-32 32H352q-32 0-32-32t32-32"})]))}}),WZ=qZ,KZ=xe({name:"ChatRound",__name:"chat-round",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"m174.72 855.68 130.048-43.392 23.424 11.392C382.4 849.984 444.352 864 512 864c223.744 0 384-159.872 384-352 0-192.832-159.104-352-384-352S128 319.168 128 512a341.12 341.12 0 0 0 69.248 204.288l21.632 28.8-44.16 110.528zm-45.248 82.56A32 32 0 0 1 89.6 896l56.512-141.248A405.12 405.12 0 0 1 64 512C64 299.904 235.648 96 512 96s448 203.904 448 416-173.44 416-448 416c-79.68 0-150.848-17.152-211.712-46.72l-170.88 56.96z"})]))}}),YZ=KZ,ZZ=xe({name:"ChatSquare",__name:"chat-square",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M273.536 736H800a64 64 0 0 0 64-64V256a64 64 0 0 0-64-64H224a64 64 0 0 0-64 64v570.88zM296 800 147.968 918.4A32 32 0 0 1 96 893.44V256a128 128 0 0 1 128-128h576a128 128 0 0 1 128 128v416a128 128 0 0 1-128 128z"})]))}}),XZ=ZZ,JZ=xe({name:"Check",__name:"check",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M406.656 706.944 195.84 496.256a32 32 0 1 0-45.248 45.248l256 256 512-512a32 32 0 0 0-45.248-45.248L406.592 706.944z"})]))}}),d0=JZ,QZ=xe({name:"Checked",__name:"checked",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M704 192h160v736H160V192h160.064v64H704zM311.616 537.28l-45.312 45.248L447.36 763.52l316.8-316.8-45.312-45.184L447.36 673.024zM384 192V96h256v96z"})]))}}),eX=QZ,tX=xe({name:"Cherry",__name:"cherry",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M261.056 449.6c13.824-69.696 34.88-128.96 63.36-177.728 23.744-40.832 61.12-88.64 112.256-143.872H320a32 32 0 0 1 0-64h384a32 32 0 1 1 0 64H554.752c14.912 39.168 41.344 86.592 79.552 141.76 47.36 68.48 84.8 106.752 106.304 114.304a224 224 0 1 1-84.992 14.784c-22.656-22.912-47.04-53.76-73.92-92.608-38.848-56.128-67.008-105.792-84.352-149.312-55.296 58.24-94.528 107.52-117.76 147.2-23.168 39.744-41.088 88.768-53.568 147.072a224.064 224.064 0 1 1-64.96-1.6zM288 832a160 160 0 1 0 0-320 160 160 0 0 0 0 320m448-64a160 160 0 1 0 0-320 160 160 0 0 0 0 320"})]))}}),nX=tX,rX=xe({name:"Chicken",__name:"chicken",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M349.952 716.992 478.72 588.16a106.688 106.688 0 0 1-26.176-19.072 106.688 106.688 0 0 1-19.072-26.176L304.704 671.744c.768 3.072 1.472 6.144 2.048 9.216l2.048 31.936 31.872 1.984c3.136.64 6.208 1.28 9.28 2.112zm57.344 33.152a128 128 0 1 1-216.32 114.432l-1.92-32-32-1.92a128 128 0 1 1 114.432-216.32L416.64 469.248c-2.432-101.44 58.112-239.104 149.056-330.048 107.328-107.328 231.296-85.504 316.8 0 85.44 85.44 107.328 209.408 0 316.8-91.008 90.88-228.672 151.424-330.112 149.056L407.296 750.08zm90.496-226.304c49.536 49.536 233.344-7.04 339.392-113.088 78.208-78.208 63.232-163.072 0-226.304-63.168-63.232-148.032-78.208-226.24 0C504.896 290.496 448.32 474.368 497.792 523.84M244.864 708.928a64 64 0 1 0-59.84 59.84l56.32-3.52zm8.064 127.68a64 64 0 1 0 59.84-59.84l-56.32 3.52-3.52 56.32z"})]))}}),iX=rX,sX=xe({name:"ChromeFilled",__name:"chrome-filled",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg","xml:space":"preserve",style:{"enable-background":"new 0 0 1024 1024"},viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M938.67 512.01c0-44.59-6.82-87.6-19.54-128H682.67a212.372 212.372 0 0 1 42.67 128c.06 38.71-10.45 76.7-30.42 109.87l-182.91 316.8c235.65-.01 426.66-191.02 426.66-426.67z"}),ae("path",{fill:"currentColor",d:"M576.79 401.63a127.92 127.92 0 0 0-63.56-17.6c-22.36-.22-44.39 5.43-63.89 16.38s-35.79 26.82-47.25 46.02a128.005 128.005 0 0 0-2.16 127.44l1.24 2.13a127.906 127.906 0 0 0 46.36 46.61 127.907 127.907 0 0 0 63.38 17.44c22.29.2 44.24-5.43 63.68-16.33a127.94 127.94 0 0 0 47.16-45.79v-.01l1.11-1.92a127.984 127.984 0 0 0 .29-127.46 127.957 127.957 0 0 0-46.36-46.91"}),ae("path",{fill:"currentColor",d:"M394.45 333.96A213.336 213.336 0 0 1 512 298.67h369.58A426.503 426.503 0 0 0 512 85.34a425.598 425.598 0 0 0-171.74 35.98 425.644 425.644 0 0 0-142.62 102.22l118.14 204.63a213.397 213.397 0 0 1 78.67-94.21m117.56 604.72H512zm-97.25-236.73a213.284 213.284 0 0 1-89.54-86.81L142.48 298.6c-36.35 62.81-57.13 135.68-57.13 213.42 0 203.81 142.93 374.22 333.95 416.55h.04l118.19-204.71a213.315 213.315 0 0 1-122.77-21.91z"})]))}}),oX=sX,aX=xe({name:"CircleCheckFilled",__name:"circle-check-filled",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896m-55.808 536.384-99.52-99.584a38.4 38.4 0 1 0-54.336 54.336l126.72 126.72a38.272 38.272 0 0 0 54.336 0l262.4-262.464a38.4 38.4 0 1 0-54.272-54.336z"})]))}}),uO=aX,lX=xe({name:"CircleCheck",__name:"circle-check",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M512 896a384 384 0 1 0 0-768 384 384 0 0 0 0 768m0 64a448 448 0 1 1 0-896 448 448 0 0 1 0 896"}),ae("path",{fill:"currentColor",d:"M745.344 361.344a32 32 0 0 1 45.312 45.312l-288 288a32 32 0 0 1-45.312 0l-160-160a32 32 0 1 1 45.312-45.312L480 626.752l265.344-265.408z"})]))}}),wx=lX,uX=xe({name:"CircleCloseFilled",__name:"circle-close-filled",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896m0 393.664L407.936 353.6a38.4 38.4 0 1 0-54.336 54.336L457.664 512 353.6 616.064a38.4 38.4 0 1 0 54.336 54.336L512 566.336 616.064 670.4a38.4 38.4 0 1 0 54.336-54.336L566.336 512 670.4 407.936a38.4 38.4 0 1 0-54.336-54.336z"})]))}}),Sx=uX,cX=xe({name:"CircleClose",__name:"circle-close",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"m466.752 512-90.496-90.496a32 32 0 0 1 45.248-45.248L512 466.752l90.496-90.496a32 32 0 1 1 45.248 45.248L557.248 512l90.496 90.496a32 32 0 1 1-45.248 45.248L512 557.248l-90.496 90.496a32 32 0 0 1-45.248-45.248z"}),ae("path",{fill:"currentColor",d:"M512 896a384 384 0 1 0 0-768 384 384 0 0 0 0 768m0 64a448 448 0 1 1 0-896 448 448 0 0 1 0 896"})]))}}),Td=cX,dX=xe({name:"CirclePlusFilled",__name:"circle-plus-filled",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896m-38.4 409.6H326.4a38.4 38.4 0 1 0 0 76.8h147.2v147.2a38.4 38.4 0 0 0 76.8 0V550.4h147.2a38.4 38.4 0 0 0 0-76.8H550.4V326.4a38.4 38.4 0 1 0-76.8 0v147.2z"})]))}}),hX=dX,fX=xe({name:"CirclePlus",__name:"circle-plus",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M352 480h320a32 32 0 1 1 0 64H352a32 32 0 0 1 0-64"}),ae("path",{fill:"currentColor",d:"M480 672V352a32 32 0 1 1 64 0v320a32 32 0 0 1-64 0"}),ae("path",{fill:"currentColor",d:"M512 896a384 384 0 1 0 0-768 384 384 0 0 0 0 768m0 64a448 448 0 1 1 0-896 448 448 0 0 1 0 896"})]))}}),pX=fX,mX=xe({name:"Clock",__name:"clock",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M512 896a384 384 0 1 0 0-768 384 384 0 0 0 0 768m0 64a448 448 0 1 1 0-896 448 448 0 0 1 0 896"}),ae("path",{fill:"currentColor",d:"M480 256a32 32 0 0 1 32 32v256a32 32 0 0 1-64 0V288a32 32 0 0 1 32-32"}),ae("path",{fill:"currentColor",d:"M480 512h256q32 0 32 32t-32 32H480q-32 0-32-32t32-32"})]))}}),US=mX,gX=xe({name:"CloseBold",__name:"close-bold",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M195.2 195.2a64 64 0 0 1 90.496 0L512 421.504 738.304 195.2a64 64 0 0 1 90.496 90.496L602.496 512 828.8 738.304a64 64 0 0 1-90.496 90.496L512 602.496 285.696 828.8a64 64 0 0 1-90.496-90.496L421.504 512 195.2 285.696a64 64 0 0 1 0-90.496z"})]))}}),_X=gX,vX=xe({name:"Close",__name:"close",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M764.288 214.592 512 466.88 259.712 214.592a31.936 31.936 0 0 0-45.12 45.12L466.752 512 214.528 764.224a31.936 31.936 0 1 0 45.12 45.184L512 557.184l252.288 252.288a31.936 31.936 0 0 0 45.12-45.12L557.12 512.064l252.288-252.352a31.936 31.936 0 1 0-45.12-45.184z"})]))}}),du=vX,yX=xe({name:"Cloudy",__name:"cloudy",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M598.4 831.872H328.192a256 256 0 0 1-34.496-510.528A352 352 0 1 1 598.4 831.872m-271.36-64h272.256a288 288 0 1 0-248.512-417.664L335.04 381.44l-34.816 3.584a192 192 0 0 0 26.88 382.848z"})]))}}),bX=yX,xX=xe({name:"CoffeeCup",__name:"coffee-cup",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M768 192a192 192 0 1 1-8 383.808A256.128 256.128 0 0 1 512 768H320A256 256 0 0 1 64 512V160a32 32 0 0 1 32-32h640a32 32 0 0 1 32 32zm0 64v256a128 128 0 1 0 0-256M96 832h640a32 32 0 1 1 0 64H96a32 32 0 1 1 0-64m32-640v320a192 192 0 0 0 192 192h192a192 192 0 0 0 192-192V192z"})]))}}),wX=xX,SX=xe({name:"Coffee",__name:"coffee",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M822.592 192h14.272a32 32 0 0 1 31.616 26.752l21.312 128A32 32 0 0 1 858.24 384h-49.344l-39.04 546.304A32 32 0 0 1 737.92 960H285.824a32 32 0 0 1-32-29.696L214.912 384H165.76a32 32 0 0 1-31.552-37.248l21.312-128A32 32 0 0 1 187.136 192h14.016l-6.72-93.696A32 32 0 0 1 226.368 64h571.008a32 32 0 0 1 31.936 34.304zm-64.128 0 4.544-64H260.736l4.544 64h493.184m-548.16 128H820.48l-10.688-64H214.208l-10.688 64h6.784m68.736 64 36.544 512H708.16l36.544-512z"})]))}}),CX=SX,EX=xe({name:"Coin",__name:"coin",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"m161.92 580.736 29.888 58.88C171.328 659.776 160 681.728 160 704c0 82.304 155.328 160 352 160s352-77.696 352-160c0-22.272-11.392-44.16-31.808-64.32l30.464-58.432C903.936 615.808 928 657.664 928 704c0 129.728-188.544 224-416 224S96 833.728 96 704c0-46.592 24.32-88.576 65.92-123.264z"}),ae("path",{fill:"currentColor",d:"m161.92 388.736 29.888 58.88C171.328 467.84 160 489.792 160 512c0 82.304 155.328 160 352 160s352-77.696 352-160c0-22.272-11.392-44.16-31.808-64.32l30.464-58.432C903.936 423.808 928 465.664 928 512c0 129.728-188.544 224-416 224S96 641.728 96 512c0-46.592 24.32-88.576 65.92-123.264z"}),ae("path",{fill:"currentColor",d:"M512 544c-227.456 0-416-94.272-416-224S284.544 96 512 96s416 94.272 416 224-188.544 224-416 224m0-64c196.672 0 352-77.696 352-160S708.672 160 512 160s-352 77.696-352 160 155.328 160 352 160"})]))}}),TX=EX,IX=xe({name:"ColdDrink",__name:"cold-drink",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M768 64a192 192 0 1 1-69.952 370.88L480 725.376V896h96a32 32 0 1 1 0 64H320a32 32 0 1 1 0-64h96V725.376L76.8 273.536a64 64 0 0 1-12.8-38.4v-10.688a32 32 0 0 1 32-32h71.808l-65.536-83.84a32 32 0 0 1 50.432-39.424l96.256 123.264h337.728A192.064 192.064 0 0 1 768 64M656.896 192.448H800a32 32 0 0 1 32 32v10.624a64 64 0 0 1-12.8 38.4l-80.448 107.2a128 128 0 1 0-81.92-188.16v-.064zm-357.888 64 129.472 165.76a32 32 0 0 1-50.432 39.36l-160.256-205.12H144l304 404.928 304-404.928z"})]))}}),kX=IX,MX=xe({name:"CollectionTag",__name:"collection-tag",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M256 128v698.88l196.032-156.864a96 96 0 0 1 119.936 0L768 826.816V128zm-32-64h576a32 32 0 0 1 32 32v797.44a32 32 0 0 1-51.968 24.96L531.968 720a32 32 0 0 0-39.936 0L243.968 918.4A32 32 0 0 1 192 893.44V96a32 32 0 0 1 32-32"})]))}}),AX=MX,RX=xe({name:"Collection",__name:"collection",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M192 736h640V128H256a64 64 0 0 0-64 64zm64-672h608a32 32 0 0 1 32 32v672a32 32 0 0 1-32 32H160l-32 57.536V192A128 128 0 0 1 256 64"}),ae("path",{fill:"currentColor",d:"M240 800a48 48 0 1 0 0 96h592v-96zm0-64h656v160a64 64 0 0 1-64 64H240a112 112 0 0 1 0-224m144-608v250.88l96-76.8 96 76.8V128zm-64-64h320v381.44a32 32 0 0 1-51.968 24.96L480 384l-108.032 86.4A32 32 0 0 1 320 445.44z"})]))}}),PX=RX,LX=xe({name:"Comment",__name:"comment",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M736 504a56 56 0 1 1 0-112 56 56 0 0 1 0 112m-224 0a56 56 0 1 1 0-112 56 56 0 0 1 0 112m-224 0a56 56 0 1 1 0-112 56 56 0 0 1 0 112M128 128v640h192v160l224-160h352V128z"})]))}}),OX=LX,DX=xe({name:"Compass",__name:"compass",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M512 896a384 384 0 1 0 0-768 384 384 0 0 0 0 768m0 64a448 448 0 1 1 0-896 448 448 0 0 1 0 896"}),ae("path",{fill:"currentColor",d:"M725.888 315.008C676.48 428.672 624 513.28 568.576 568.64c-55.424 55.424-139.968 107.904-253.568 157.312a12.8 12.8 0 0 1-16.896-16.832c49.536-113.728 102.016-198.272 157.312-253.632 55.36-55.296 139.904-107.776 253.632-157.312a12.8 12.8 0 0 1 16.832 16.832"})]))}}),zX=DX,NX=xe({name:"Connection",__name:"connection",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M640 384v64H448a128 128 0 0 0-128 128v128a128 128 0 0 0 128 128h320a128 128 0 0 0 128-128V576a128 128 0 0 0-64-110.848V394.88c74.56 26.368 128 97.472 128 181.056v128a192 192 0 0 1-192 192H448a192 192 0 0 1-192-192V576a192 192 0 0 1 192-192z"}),ae("path",{fill:"currentColor",d:"M384 640v-64h192a128 128 0 0 0 128-128V320a128 128 0 0 0-128-128H256a128 128 0 0 0-128 128v128a128 128 0 0 0 64 110.848v70.272A192.064 192.064 0 0 1 64 448V320a192 192 0 0 1 192-192h320a192 192 0 0 1 192 192v128a192 192 0 0 1-192 192z"})]))}}),FX=NX,BX=xe({name:"Coordinate",__name:"coordinate",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M480 512h64v320h-64z"}),ae("path",{fill:"currentColor",d:"M192 896h640a64 64 0 0 0-64-64H256a64 64 0 0 0-64 64m64-128h512a128 128 0 0 1 128 128v64H128v-64a128 128 0 0 1 128-128m256-256a192 192 0 1 0 0-384 192 192 0 0 0 0 384m0 64a256 256 0 1 1 0-512 256 256 0 0 1 0 512"})]))}}),VX=BX,$X=xe({name:"CopyDocument",__name:"copy-document",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M768 832a128 128 0 0 1-128 128H192A128 128 0 0 1 64 832V384a128 128 0 0 1 128-128v64a64 64 0 0 0-64 64v448a64 64 0 0 0 64 64h448a64 64 0 0 0 64-64z"}),ae("path",{fill:"currentColor",d:"M384 128a64 64 0 0 0-64 64v448a64 64 0 0 0 64 64h448a64 64 0 0 0 64-64V192a64 64 0 0 0-64-64zm0-64h448a128 128 0 0 1 128 128v448a128 128 0 0 1-128 128H384a128 128 0 0 1-128-128V192A128 128 0 0 1 384 64"})]))}}),HX=$X,UX=xe({name:"Cpu",__name:"cpu",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M320 256a64 64 0 0 0-64 64v384a64 64 0 0 0 64 64h384a64 64 0 0 0 64-64V320a64 64 0 0 0-64-64zm0-64h384a128 128 0 0 1 128 128v384a128 128 0 0 1-128 128H320a128 128 0 0 1-128-128V320a128 128 0 0 1 128-128"}),ae("path",{fill:"currentColor",d:"M512 64a32 32 0 0 1 32 32v128h-64V96a32 32 0 0 1 32-32m160 0a32 32 0 0 1 32 32v128h-64V96a32 32 0 0 1 32-32m-320 0a32 32 0 0 1 32 32v128h-64V96a32 32 0 0 1 32-32m160 896a32 32 0 0 1-32-32V800h64v128a32 32 0 0 1-32 32m160 0a32 32 0 0 1-32-32V800h64v128a32 32 0 0 1-32 32m-320 0a32 32 0 0 1-32-32V800h64v128a32 32 0 0 1-32 32M64 512a32 32 0 0 1 32-32h128v64H96a32 32 0 0 1-32-32m0-160a32 32 0 0 1 32-32h128v64H96a32 32 0 0 1-32-32m0 320a32 32 0 0 1 32-32h128v64H96a32 32 0 0 1-32-32m896-160a32 32 0 0 1-32 32H800v-64h128a32 32 0 0 1 32 32m0-160a32 32 0 0 1-32 32H800v-64h128a32 32 0 0 1 32 32m0 320a32 32 0 0 1-32 32H800v-64h128a32 32 0 0 1 32 32"})]))}}),jX=UX,GX=xe({name:"CreditCard",__name:"credit-card",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M896 324.096c0-42.368-2.496-55.296-9.536-68.48a52.352 52.352 0 0 0-22.144-22.08c-13.12-7.04-26.048-9.536-68.416-9.536H228.096c-42.368 0-55.296 2.496-68.48 9.536a52.352 52.352 0 0 0-22.08 22.144c-7.04 13.12-9.536 26.048-9.536 68.416v375.808c0 42.368 2.496 55.296 9.536 68.48a52.352 52.352 0 0 0 22.144 22.08c13.12 7.04 26.048 9.536 68.416 9.536h567.808c42.368 0 55.296-2.496 68.48-9.536a52.352 52.352 0 0 0 22.08-22.144c7.04-13.12 9.536-26.048 9.536-68.416zm64 0v375.808c0 57.088-5.952 77.76-17.088 98.56-11.136 20.928-27.52 37.312-48.384 48.448-20.864 11.136-41.6 17.088-98.56 17.088H228.032c-57.088 0-77.76-5.952-98.56-17.088a116.288 116.288 0 0 1-48.448-48.384c-11.136-20.864-17.088-41.6-17.088-98.56V324.032c0-57.088 5.952-77.76 17.088-98.56 11.136-20.928 27.52-37.312 48.384-48.448 20.864-11.136 41.6-17.088 98.56-17.088H795.84c57.088 0 77.76 5.952 98.56 17.088 20.928 11.136 37.312 27.52 48.448 48.384 11.136 20.864 17.088 41.6 17.088 98.56z"}),ae("path",{fill:"currentColor",d:"M64 320h896v64H64zm0 128h896v64H64zm128 192h256v64H192z"})]))}}),qX=GX,WX=xe({name:"Crop",__name:"crop",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M256 768h672a32 32 0 1 1 0 64H224a32 32 0 0 1-32-32V96a32 32 0 0 1 64 0z"}),ae("path",{fill:"currentColor",d:"M832 224v704a32 32 0 1 1-64 0V256H96a32 32 0 0 1 0-64h704a32 32 0 0 1 32 32"})]))}}),KX=WX,YX=xe({name:"DArrowLeft",__name:"d-arrow-left",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M529.408 149.376a29.12 29.12 0 0 1 41.728 0 30.592 30.592 0 0 1 0 42.688L259.264 511.936l311.872 319.936a30.592 30.592 0 0 1-.512 43.264 29.12 29.12 0 0 1-41.216-.512L197.76 534.272a32 32 0 0 1 0-44.672l331.648-340.224zm256 0a29.12 29.12 0 0 1 41.728 0 30.592 30.592 0 0 1 0 42.688L515.264 511.936l311.872 319.936a30.592 30.592 0 0 1-.512 43.264 29.12 29.12 0 0 1-41.216-.512L453.76 534.272a32 32 0 0 1 0-44.672l331.648-340.224z"})]))}}),mh=YX,ZX=xe({name:"DArrowRight",__name:"d-arrow-right",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M452.864 149.312a29.12 29.12 0 0 1 41.728.064L826.24 489.664a32 32 0 0 1 0 44.672L494.592 874.624a29.12 29.12 0 0 1-41.728 0 30.592 30.592 0 0 1 0-42.752L764.736 512 452.864 192a30.592 30.592 0 0 1 0-42.688m-256 0a29.12 29.12 0 0 1 41.728.064L570.24 489.664a32 32 0 0 1 0 44.672L238.592 874.624a29.12 29.12 0 0 1-41.728 0 30.592 30.592 0 0 1 0-42.752L508.736 512 196.864 192a30.592 30.592 0 0 1 0-42.688z"})]))}}),gh=ZX,XX=xe({name:"DCaret",__name:"d-caret",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"m512 128 288 320H224zM224 576h576L512 896z"})]))}}),JX=XX,QX=xe({name:"DataAnalysis",__name:"data-analysis",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"m665.216 768 110.848 192h-73.856L591.36 768H433.024L322.176 960H248.32l110.848-192H160a32 32 0 0 1-32-32V192H64a32 32 0 0 1 0-64h896a32 32 0 1 1 0 64h-64v544a32 32 0 0 1-32 32zM832 192H192v512h640zM352 448a32 32 0 0 1 32 32v64a32 32 0 0 1-64 0v-64a32 32 0 0 1 32-32m160-64a32 32 0 0 1 32 32v128a32 32 0 0 1-64 0V416a32 32 0 0 1 32-32m160-64a32 32 0 0 1 32 32v192a32 32 0 1 1-64 0V352a32 32 0 0 1 32-32"})]))}}),eJ=QX,tJ=xe({name:"DataBoard",__name:"data-board",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M32 128h960v64H32z"}),ae("path",{fill:"currentColor",d:"M192 192v512h640V192zm-64-64h768v608a32 32 0 0 1-32 32H160a32 32 0 0 1-32-32z"}),ae("path",{fill:"currentColor",d:"M322.176 960H248.32l144.64-250.56 55.424 32zm453.888 0h-73.856L576 741.44l55.424-32z"})]))}}),nJ=tJ,rJ=xe({name:"DataLine",__name:"data-line",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M359.168 768H160a32 32 0 0 1-32-32V192H64a32 32 0 0 1 0-64h896a32 32 0 1 1 0 64h-64v544a32 32 0 0 1-32 32H665.216l110.848 192h-73.856L591.36 768H433.024L322.176 960H248.32zM832 192H192v512h640zM342.656 534.656a32 32 0 1 1-45.312-45.312L444.992 341.76l125.44 94.08L679.04 300.032a32 32 0 1 1 49.92 39.936L581.632 524.224 451.008 426.24 342.656 534.592z"})]))}}),iJ=rJ,sJ=xe({name:"DeleteFilled",__name:"delete-filled",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M352 192V95.936a32 32 0 0 1 32-32h256a32 32 0 0 1 32 32V192h256a32 32 0 1 1 0 64H96a32 32 0 0 1 0-64zm64 0h192v-64H416zM192 960a32 32 0 0 1-32-32V256h704v672a32 32 0 0 1-32 32zm224-192a32 32 0 0 0 32-32V416a32 32 0 0 0-64 0v320a32 32 0 0 0 32 32m192 0a32 32 0 0 0 32-32V416a32 32 0 0 0-64 0v320a32 32 0 0 0 32 32"})]))}}),oJ=sJ,aJ=xe({name:"DeleteLocation",__name:"delete-location",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M288 896h448q32 0 32 32t-32 32H288q-32 0-32-32t32-32"}),ae("path",{fill:"currentColor",d:"M800 416a288 288 0 1 0-576 0c0 118.144 94.528 272.128 288 456.576C705.472 688.128 800 534.144 800 416M512 960C277.312 746.688 160 565.312 160 416a352 352 0 0 1 704 0c0 149.312-117.312 330.688-352 544"}),ae("path",{fill:"currentColor",d:"M384 384h256q32 0 32 32t-32 32H384q-32 0-32-32t32-32"})]))}}),lJ=aJ,uJ=xe({name:"Delete",__name:"delete",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M160 256H96a32 32 0 0 1 0-64h256V95.936a32 32 0 0 1 32-32h256a32 32 0 0 1 32 32V192h256a32 32 0 1 1 0 64h-64v672a32 32 0 0 1-32 32H192a32 32 0 0 1-32-32zm448-64v-64H416v64zM224 896h576V256H224zm192-128a32 32 0 0 1-32-32V416a32 32 0 0 1 64 0v320a32 32 0 0 1-32 32m192 0a32 32 0 0 1-32-32V416a32 32 0 0 1 64 0v320a32 32 0 0 1-32 32"})]))}}),cO=uJ,cJ=xe({name:"Dessert",__name:"dessert",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M128 416v-48a144 144 0 0 1 168.64-141.888 224.128 224.128 0 0 1 430.72 0A144 144 0 0 1 896 368v48a384 384 0 0 1-352 382.72V896h-64v-97.28A384 384 0 0 1 128 416m287.104-32.064h193.792a143.808 143.808 0 0 1 58.88-132.736 160.064 160.064 0 0 0-311.552 0 143.808 143.808 0 0 1 58.88 132.8zm-72.896 0a72 72 0 1 0-140.48 0h140.48m339.584 0h140.416a72 72 0 1 0-140.48 0zM512 736a320 320 0 0 0 318.4-288.064H193.6A320 320 0 0 0 512 736M384 896.064h256a32 32 0 1 1 0 64H384a32 32 0 1 1 0-64"})]))}}),dJ=cJ,hJ=xe({name:"Discount",__name:"discount",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M224 704h576V318.336L552.512 115.84a64 64 0 0 0-81.024 0L224 318.336zm0 64v128h576V768zM593.024 66.304l259.2 212.096A32 32 0 0 1 864 303.168V928a32 32 0 0 1-32 32H192a32 32 0 0 1-32-32V303.168a32 32 0 0 1 11.712-24.768l259.2-212.096a128 128 0 0 1 162.112 0"}),ae("path",{fill:"currentColor",d:"M512 448a64 64 0 1 0 0-128 64 64 0 0 0 0 128m0 64a128 128 0 1 1 0-256 128 128 0 0 1 0 256"})]))}}),fJ=hJ,pJ=xe({name:"DishDot",__name:"dish-dot",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"m384.064 274.56.064-50.688A128 128 0 0 1 512.128 96c70.528 0 127.68 57.152 127.68 127.68v50.752A448.192 448.192 0 0 1 955.392 768H68.544A448.192 448.192 0 0 1 384 274.56zM96 832h832a32 32 0 1 1 0 64H96a32 32 0 1 1 0-64m32-128h768a384 384 0 1 0-768 0m447.808-448v-32.32a63.68 63.68 0 0 0-63.68-63.68 64 64 0 0 0-64 63.936V256z"})]))}}),mJ=pJ,gJ=xe({name:"Dish",__name:"dish",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M480 257.152V192h-96a32 32 0 0 1 0-64h256a32 32 0 1 1 0 64h-96v65.152A448 448 0 0 1 955.52 768H68.48A448 448 0 0 1 480 257.152M128 704h768a384 384 0 1 0-768 0M96 832h832a32 32 0 1 1 0 64H96a32 32 0 1 1 0-64"})]))}}),_J=gJ,vJ=xe({name:"DocumentAdd",__name:"document-add",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M832 384H576V128H192v768h640zm-26.496-64L640 154.496V320zM160 64h480l256 256v608a32 32 0 0 1-32 32H160a32 32 0 0 1-32-32V96a32 32 0 0 1 32-32m320 512V448h64v128h128v64H544v128h-64V640H352v-64z"})]))}}),yJ=vJ,bJ=xe({name:"DocumentChecked",__name:"document-checked",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M805.504 320 640 154.496V320zM832 384H576V128H192v768h640zM160 64h480l256 256v608a32 32 0 0 1-32 32H160a32 32 0 0 1-32-32V96a32 32 0 0 1 32-32m318.4 582.144 180.992-180.992L704.64 510.4 478.4 736.64 320 578.304l45.248-45.312z"})]))}}),xJ=bJ,wJ=xe({name:"DocumentCopy",__name:"document-copy",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M128 320v576h576V320zm-32-64h640a32 32 0 0 1 32 32v640a32 32 0 0 1-32 32H96a32 32 0 0 1-32-32V288a32 32 0 0 1 32-32M960 96v704a32 32 0 0 1-32 32h-96v-64h64V128H384v64h-64V96a32 32 0 0 1 32-32h576a32 32 0 0 1 32 32M256 672h320v64H256zm0-192h320v64H256z"})]))}}),SJ=wJ,CJ=xe({name:"DocumentDelete",__name:"document-delete",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M805.504 320 640 154.496V320zM832 384H576V128H192v768h640zM160 64h480l256 256v608a32 32 0 0 1-32 32H160a32 32 0 0 1-32-32V96a32 32 0 0 1 32-32m308.992 546.304-90.496-90.624 45.248-45.248 90.56 90.496 90.496-90.432 45.248 45.248-90.496 90.56 90.496 90.496-45.248 45.248-90.496-90.496-90.56 90.496-45.248-45.248 90.496-90.496z"})]))}}),EJ=CJ,TJ=xe({name:"DocumentRemove",__name:"document-remove",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M805.504 320 640 154.496V320zM832 384H576V128H192v768h640zM160 64h480l256 256v608a32 32 0 0 1-32 32H160a32 32 0 0 1-32-32V96a32 32 0 0 1 32-32m192 512h320v64H352z"})]))}}),IJ=TJ,kJ=xe({name:"Document",__name:"document",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M832 384H576V128H192v768h640zm-26.496-64L640 154.496V320zM160 64h480l256 256v608a32 32 0 0 1-32 32H160a32 32 0 0 1-32-32V96a32 32 0 0 1 32-32m160 448h384v64H320zm0-192h160v64H320zm0 384h384v64H320z"})]))}}),dO=kJ,MJ=xe({name:"Download",__name:"download",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M160 832h704a32 32 0 1 1 0 64H160a32 32 0 1 1 0-64m384-253.696 236.288-236.352 45.248 45.248L508.8 704 192 387.2l45.248-45.248L480 584.704V128h64z"})]))}}),AJ=MJ,RJ=xe({name:"Drizzling",__name:"drizzling",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"m739.328 291.328-35.2-6.592-12.8-33.408a192.064 192.064 0 0 0-365.952 23.232l-9.92 40.896-41.472 7.04a176.32 176.32 0 0 0-146.24 173.568c0 97.28 78.72 175.936 175.808 175.936h400a192 192 0 0 0 35.776-380.672zM959.552 480a256 256 0 0 1-256 256h-400A239.808 239.808 0 0 1 63.744 496.192a240.32 240.32 0 0 1 199.488-236.8 256.128 256.128 0 0 1 487.872-30.976A256.064 256.064 0 0 1 959.552 480M288 800h64v64h-64zm192 0h64v64h-64zm-96 96h64v64h-64zm192 0h64v64h-64zm96-96h64v64h-64z"})]))}}),PJ=RJ,LJ=xe({name:"EditPen",__name:"edit-pen",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"m199.04 672.64 193.984 112 224-387.968-193.92-112-224 388.032zm-23.872 60.16 32.896 148.288 144.896-45.696zM455.04 229.248l193.92 112 56.704-98.112-193.984-112-56.64 98.112zM104.32 708.8l384-665.024 304.768 175.936L409.152 884.8h.064l-248.448 78.336zm384 254.272v-64h448v64h-448z"})]))}}),OJ=LJ,DJ=xe({name:"Edit",__name:"edit",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M832 512a32 32 0 1 1 64 0v352a32 32 0 0 1-32 32H160a32 32 0 0 1-32-32V160a32 32 0 0 1 32-32h352a32 32 0 0 1 0 64H192v640h640z"}),ae("path",{fill:"currentColor",d:"m469.952 554.24 52.8-7.552L847.104 222.4a32 32 0 1 0-45.248-45.248L477.44 501.44l-7.552 52.8zm422.4-422.4a96 96 0 0 1 0 135.808l-331.84 331.84a32 32 0 0 1-18.112 9.088L436.8 623.68a32 32 0 0 1-36.224-36.224l15.104-105.6a32 32 0 0 1 9.024-18.112l331.904-331.84a96 96 0 0 1 135.744 0z"})]))}}),zJ=DJ,NJ=xe({name:"ElemeFilled",__name:"eleme-filled",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M176 64h672c61.824 0 112 50.176 112 112v672a112 112 0 0 1-112 112H176A112 112 0 0 1 64 848V176c0-61.824 50.176-112 112-112m150.528 173.568c-152.896 99.968-196.544 304.064-97.408 456.96a330.688 330.688 0 0 0 456.96 96.64c9.216-5.888 17.6-11.776 25.152-18.56a18.24 18.24 0 0 0 4.224-24.32L700.352 724.8a47.552 47.552 0 0 0-65.536-14.272A234.56 234.56 0 0 1 310.592 641.6C240 533.248 271.104 387.968 379.456 316.48a234.304 234.304 0 0 1 276.352 15.168c1.664.832 2.56 2.56 3.392 4.224 5.888 8.384 3.328 19.328-5.12 25.216L456.832 489.6a47.552 47.552 0 0 0-14.336 65.472l16 24.384c5.888 8.384 16.768 10.88 25.216 5.056l308.224-199.936a19.584 19.584 0 0 0 6.72-23.488v-.896c-4.992-9.216-10.048-17.6-15.104-26.88-99.968-151.168-304.064-194.88-456.96-95.744zM786.88 504.704l-62.208 40.32c-8.32 5.888-10.88 16.768-4.992 25.216L760 632.32c5.888 8.448 16.768 11.008 25.152 5.12l31.104-20.16a55.36 55.36 0 0 0 16-76.48l-20.224-31.04a19.52 19.52 0 0 0-25.152-5.12z"})]))}}),FJ=NJ,BJ=xe({name:"Eleme",__name:"eleme",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M300.032 188.8c174.72-113.28 408-63.36 522.24 109.44 5.76 10.56 11.52 20.16 17.28 30.72v.96a22.4 22.4 0 0 1-7.68 26.88l-352.32 228.48c-9.6 6.72-22.08 3.84-28.8-5.76l-18.24-27.84a54.336 54.336 0 0 1 16.32-74.88l225.6-146.88c9.6-6.72 12.48-19.2 5.76-28.8-.96-1.92-1.92-3.84-3.84-4.8a267.84 267.84 0 0 0-315.84-17.28c-123.84 81.6-159.36 247.68-78.72 371.52a268.096 268.096 0 0 0 370.56 78.72 54.336 54.336 0 0 1 74.88 16.32l17.28 26.88c5.76 9.6 3.84 21.12-4.8 27.84-8.64 7.68-18.24 14.4-28.8 21.12a377.92 377.92 0 0 1-522.24-110.4c-113.28-174.72-63.36-408 111.36-522.24zm526.08 305.28a22.336 22.336 0 0 1 28.8 5.76l23.04 35.52a63.232 63.232 0 0 1-18.24 87.36l-35.52 23.04c-9.6 6.72-22.08 3.84-28.8-5.76l-46.08-71.04c-6.72-9.6-3.84-22.08 5.76-28.8l71.04-46.08z"})]))}}),VJ=BJ,$J=xe({name:"ElementPlus",__name:"element-plus",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M839.7 734.7c0 33.3-17.9 41-17.9 41S519.7 949.8 499.2 960c-10.2 5.1-20.5 5.1-30.7 0 0 0-314.9-184.3-325.1-192-5.1-5.1-10.2-12.8-12.8-20.5V368.6c0-17.9 20.5-28.2 20.5-28.2L466 158.6c12.8-5.1 25.6-5.1 38.4 0 0 0 279 161.3 309.8 179.2 17.9 7.7 28.2 25.6 25.6 46.1-.1-5-.1 317.5-.1 350.8M714.2 371.2c-64-35.8-217.6-125.4-217.6-125.4-7.7-5.1-20.5-5.1-30.7 0L217.6 389.1s-17.9 10.2-17.9 23v297c0 5.1 5.1 12.8 7.7 17.9 7.7 5.1 256 148.5 256 148.5 7.7 5.1 17.9 5.1 25.6 0 15.4-7.7 250.9-145.9 250.9-145.9s12.8-5.1 12.8-30.7v-74.2l-276.5 169v-64c0-17.9 7.7-30.7 20.5-46.1L745 535c5.1-7.7 10.2-20.5 10.2-30.7v-66.6l-279 169v-69.1c0-15.4 5.1-30.7 17.9-38.4l220.1-128zM919 135.7c0-5.1-5.1-7.7-7.7-7.7h-58.9V66.6c0-5.1-5.1-5.1-10.2-5.1l-30.7 5.1c-5.1 0-5.1 2.6-5.1 5.1V128h-56.3c-5.1 0-5.1 5.1-7.7 5.1v38.4h69.1v64c0 5.1 5.1 5.1 10.2 5.1l30.7-5.1c5.1 0 5.1-2.6 5.1-5.1v-56.3h64l-2.5-38.4z"})]))}}),HJ=$J,UJ=xe({name:"Expand",__name:"expand",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M128 192h768v128H128zm0 256h512v128H128zm0 256h768v128H128zm576-352 192 160-192 128z"})]))}}),jJ=UJ,GJ=xe({name:"Failed",__name:"failed",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"m557.248 608 135.744-135.744-45.248-45.248-135.68 135.744-135.808-135.68-45.248 45.184L466.752 608l-135.68 135.68 45.184 45.312L512 653.248l135.744 135.744 45.248-45.248L557.312 608zM704 192h160v736H160V192h160v64h384zm-320 0V96h256v96z"})]))}}),qJ=GJ,WJ=xe({name:"Female",__name:"female",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M512 640a256 256 0 1 0 0-512 256 256 0 0 0 0 512m0 64a320 320 0 1 1 0-640 320 320 0 0 1 0 640"}),ae("path",{fill:"currentColor",d:"M512 640q32 0 32 32v256q0 32-32 32t-32-32V672q0-32 32-32"}),ae("path",{fill:"currentColor",d:"M352 800h320q32 0 32 32t-32 32H352q-32 0-32-32t32-32"})]))}}),KJ=WJ,YJ=xe({name:"Files",__name:"files",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M128 384v448h768V384zm-32-64h832a32 32 0 0 1 32 32v512a32 32 0 0 1-32 32H96a32 32 0 0 1-32-32V352a32 32 0 0 1 32-32m64-128h704v64H160zm96-128h512v64H256z"})]))}}),ZJ=YJ,XJ=xe({name:"Film",__name:"film",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M160 160v704h704V160zm-32-64h768a32 32 0 0 1 32 32v768a32 32 0 0 1-32 32H128a32 32 0 0 1-32-32V128a32 32 0 0 1 32-32"}),ae("path",{fill:"currentColor",d:"M320 288V128h64v352h256V128h64v160h160v64H704v128h160v64H704v128h160v64H704v160h-64V544H384v352h-64V736H128v-64h192V544H128v-64h192V352H128v-64z"})]))}}),JJ=XJ,QJ=xe({name:"Filter",__name:"filter",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M384 523.392V928a32 32 0 0 0 46.336 28.608l192-96A32 32 0 0 0 640 832V523.392l280.768-343.104a32 32 0 1 0-49.536-40.576l-288 352A32 32 0 0 0 576 512v300.224l-128 64V512a32 32 0 0 0-7.232-20.288L195.52 192H704a32 32 0 1 0 0-64H128a32 32 0 0 0-24.768 52.288z"})]))}}),eQ=QJ,tQ=xe({name:"Finished",__name:"finished",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M280.768 753.728 691.456 167.04a32 32 0 1 1 52.416 36.672L314.24 817.472a32 32 0 0 1-45.44 7.296l-230.4-172.8a32 32 0 0 1 38.4-51.2l203.968 152.96zM736 448a32 32 0 1 1 0-64h192a32 32 0 1 1 0 64zM608 640a32 32 0 0 1 0-64h319.936a32 32 0 1 1 0 64zM480 832a32 32 0 1 1 0-64h447.936a32 32 0 1 1 0 64z"})]))}}),nQ=tQ,rQ=xe({name:"FirstAidKit",__name:"first-aid-kit",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M192 256a64 64 0 0 0-64 64v448a64 64 0 0 0 64 64h640a64 64 0 0 0 64-64V320a64 64 0 0 0-64-64zm0-64h640a128 128 0 0 1 128 128v448a128 128 0 0 1-128 128H192A128 128 0 0 1 64 768V320a128 128 0 0 1 128-128"}),ae("path",{fill:"currentColor",d:"M544 512h96a32 32 0 0 1 0 64h-96v96a32 32 0 0 1-64 0v-96h-96a32 32 0 0 1 0-64h96v-96a32 32 0 0 1 64 0zM352 128v64h320v-64zm-32-64h384a32 32 0 0 1 32 32v128a32 32 0 0 1-32 32H320a32 32 0 0 1-32-32V96a32 32 0 0 1 32-32"})]))}}),iQ=rQ,sQ=xe({name:"Flag",__name:"flag",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M288 128h608L736 384l160 256H288v320h-96V64h96z"})]))}}),oQ=sQ,aQ=xe({name:"Fold",__name:"fold",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M896 192H128v128h768zm0 256H384v128h512zm0 256H128v128h768zM320 384 128 512l192 128z"})]))}}),lQ=aQ,uQ=xe({name:"FolderAdd",__name:"folder-add",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M128 192v640h768V320H485.76L357.504 192zm-32-64h287.872l128.384 128H928a32 32 0 0 1 32 32v576a32 32 0 0 1-32 32H96a32 32 0 0 1-32-32V160a32 32 0 0 1 32-32m384 416V416h64v128h128v64H544v128h-64V608H352v-64z"})]))}}),cQ=uQ,dQ=xe({name:"FolderChecked",__name:"folder-checked",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M128 192v640h768V320H485.76L357.504 192zm-32-64h287.872l128.384 128H928a32 32 0 0 1 32 32v576a32 32 0 0 1-32 32H96a32 32 0 0 1-32-32V160a32 32 0 0 1 32-32m414.08 502.144 180.992-180.992L736.32 494.4 510.08 720.64l-158.4-158.336 45.248-45.312z"})]))}}),hQ=dQ,fQ=xe({name:"FolderDelete",__name:"folder-delete",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M128 192v640h768V320H485.76L357.504 192zm-32-64h287.872l128.384 128H928a32 32 0 0 1 32 32v576a32 32 0 0 1-32 32H96a32 32 0 0 1-32-32V160a32 32 0 0 1 32-32m370.752 448-90.496-90.496 45.248-45.248L512 530.752l90.496-90.496 45.248 45.248L557.248 576l90.496 90.496-45.248 45.248L512 621.248l-90.496 90.496-45.248-45.248z"})]))}}),pQ=fQ,mQ=xe({name:"FolderOpened",__name:"folder-opened",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M878.08 448H241.92l-96 384h636.16l96-384zM832 384v-64H485.76L357.504 192H128v448l57.92-231.744A32 32 0 0 1 216.96 384zm-24.96 512H96a32 32 0 0 1-32-32V160a32 32 0 0 1 32-32h287.872l128.384 128H864a32 32 0 0 1 32 32v96h23.04a32 32 0 0 1 31.04 39.744l-112 448A32 32 0 0 1 807.04 896"})]))}}),gQ=mQ,_Q=xe({name:"FolderRemove",__name:"folder-remove",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M128 192v640h768V320H485.76L357.504 192zm-32-64h287.872l128.384 128H928a32 32 0 0 1 32 32v576a32 32 0 0 1-32 32H96a32 32 0 0 1-32-32V160a32 32 0 0 1 32-32m256 416h320v64H352z"})]))}}),vQ=_Q,yQ=xe({name:"Folder",__name:"folder",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M128 192v640h768V320H485.76L357.504 192zm-32-64h287.872l128.384 128H928a32 32 0 0 1 32 32v576a32 32 0 0 1-32 32H96a32 32 0 0 1-32-32V160a32 32 0 0 1 32-32"})]))}}),bQ=yQ,xQ=xe({name:"Food",__name:"food",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M128 352.576V352a288 288 0 0 1 491.072-204.224 192 192 0 0 1 274.24 204.48 64 64 0 0 1 57.216 74.24C921.6 600.512 850.048 710.656 736 756.992V800a96 96 0 0 1-96 96H384a96 96 0 0 1-96-96v-43.008c-114.048-46.336-185.6-156.48-214.528-330.496A64 64 0 0 1 128 352.64zm64-.576h64a160 160 0 0 1 320 0h64a224 224 0 0 0-448 0m128 0h192a96 96 0 0 0-192 0m439.424 0h68.544A128.256 128.256 0 0 0 704 192c-15.36 0-29.952 2.688-43.52 7.616 11.328 18.176 20.672 37.76 27.84 58.304A64.128 64.128 0 0 1 759.424 352M672 768H352v32a32 32 0 0 0 32 32h256a32 32 0 0 0 32-32zm-342.528-64h365.056c101.504-32.64 165.76-124.928 192.896-288H136.576c27.136 163.072 91.392 255.36 192.896 288"})]))}}),wQ=xQ,SQ=xe({name:"Football",__name:"football",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M512 960a448 448 0 1 1 0-896 448 448 0 0 1 0 896m0-64a384 384 0 1 0 0-768 384 384 0 0 0 0 768"}),ae("path",{fill:"currentColor",d:"M186.816 268.288c16-16.384 31.616-31.744 46.976-46.08 17.472 30.656 39.808 58.112 65.984 81.28l-32.512 56.448a385.984 385.984 0 0 1-80.448-91.648zm653.696-5.312a385.92 385.92 0 0 1-83.776 96.96l-32.512-56.384a322.923 322.923 0 0 0 68.48-85.76c15.552 14.08 31.488 29.12 47.808 45.184zM465.984 445.248l11.136-63.104a323.584 323.584 0 0 0 69.76 0l11.136 63.104a387.968 387.968 0 0 1-92.032 0m-62.72-12.8A381.824 381.824 0 0 1 320 396.544l32-55.424a319.885 319.885 0 0 0 62.464 27.712l-11.2 63.488zm300.8-35.84a381.824 381.824 0 0 1-83.328 35.84l-11.2-63.552A319.885 319.885 0 0 0 672 341.184l32 55.424zm-520.768 364.8a385.92 385.92 0 0 1 83.968-97.28l32.512 56.32c-26.88 23.936-49.856 52.352-67.52 84.032-16-13.44-32.32-27.712-48.96-43.072zm657.536.128a1442.759 1442.759 0 0 1-49.024 43.072 321.408 321.408 0 0 0-67.584-84.16l32.512-56.32c33.216 27.456 61.696 60.352 84.096 97.408zM465.92 578.752a387.968 387.968 0 0 1 92.032 0l-11.136 63.104a323.584 323.584 0 0 0-69.76 0zm-62.72 12.8 11.2 63.552a319.885 319.885 0 0 0-62.464 27.712L320 627.392a381.824 381.824 0 0 1 83.264-35.84zm300.8 35.84-32 55.424a318.272 318.272 0 0 0-62.528-27.712l11.2-63.488c29.44 8.64 57.28 20.736 83.264 35.776z"})]))}}),CQ=SQ,EQ=xe({name:"ForkSpoon",__name:"fork-spoon",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M256 410.304V96a32 32 0 0 1 64 0v314.304a96 96 0 0 0 64-90.56V96a32 32 0 0 1 64 0v223.744a160 160 0 0 1-128 156.8V928a32 32 0 1 1-64 0V476.544a160 160 0 0 1-128-156.8V96a32 32 0 0 1 64 0v223.744a96 96 0 0 0 64 90.56zM672 572.48C581.184 552.128 512 446.848 512 320c0-141.44 85.952-256 192-256s192 114.56 192 256c0 126.848-69.184 232.128-160 252.48V928a32 32 0 1 1-64 0zM704 512c66.048 0 128-82.56 128-192s-61.952-192-128-192-128 82.56-128 192 61.952 192 128 192"})]))}}),TQ=EQ,IQ=xe({name:"Fries",__name:"fries",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M608 224v-64a32 32 0 0 0-64 0v336h26.88A64 64 0 0 0 608 484.096zm101.12 160A64 64 0 0 0 672 395.904V384h64V224a32 32 0 1 0-64 0v160zm74.88 0a92.928 92.928 0 0 1 91.328 110.08l-60.672 323.584A96 96 0 0 1 720.32 896H303.68a96 96 0 0 1-94.336-78.336L148.672 494.08A92.928 92.928 0 0 1 240 384h-16V224a96 96 0 0 1 188.608-25.28A95.744 95.744 0 0 1 480 197.44V160a96 96 0 0 1 188.608-25.28A96 96 0 0 1 800 224v160zM670.784 512a128 128 0 0 1-99.904 48H453.12a128 128 0 0 1-99.84-48H352v-1.536a128.128 128.128 0 0 1-9.984-14.976L314.88 448H240a28.928 28.928 0 0 0-28.48 34.304L241.088 640h541.824l29.568-157.696A28.928 28.928 0 0 0 784 448h-74.88l-27.136 47.488A132.405 132.405 0 0 1 672 510.464V512zM480 288a32 32 0 0 0-64 0v196.096A64 64 0 0 0 453.12 496H480zm-128 96V224a32 32 0 0 0-64 0v160zh-37.12A64 64 0 0 1 352 395.904zm-98.88 320 19.072 101.888A32 32 0 0 0 303.68 832h416.64a32 32 0 0 0 31.488-26.112L770.88 704z"})]))}}),kQ=IQ,MQ=xe({name:"FullScreen",__name:"full-screen",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"m160 96.064 192 .192a32 32 0 0 1 0 64l-192-.192V352a32 32 0 0 1-64 0V96h64zm0 831.872V928H96V672a32 32 0 1 1 64 0v191.936l192-.192a32 32 0 1 1 0 64zM864 96.064V96h64v256a32 32 0 1 1-64 0V160.064l-192 .192a32 32 0 1 1 0-64l192-.192zm0 831.872-192-.192a32 32 0 0 1 0-64l192 .192V672a32 32 0 1 1 64 0v256h-64z"})]))}}),hO=MQ,AQ=xe({name:"GobletFull",__name:"goblet-full",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M256 320h512c0-78.592-12.608-142.4-36.928-192h-434.24C269.504 192.384 256 256.256 256 320m503.936 64H264.064a256.128 256.128 0 0 0 495.872 0zM544 638.4V896h96a32 32 0 1 1 0 64H384a32 32 0 1 1 0-64h96V638.4A320 320 0 0 1 192 320c0-85.632 21.312-170.944 64-256h512c42.688 64.32 64 149.632 64 256a320 320 0 0 1-288 318.4"})]))}}),RQ=AQ,PQ=xe({name:"GobletSquareFull",__name:"goblet-square-full",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M256 270.912c10.048 6.72 22.464 14.912 28.992 18.624a220.16 220.16 0 0 0 114.752 30.72c30.592 0 49.408-9.472 91.072-41.152l.64-.448c52.928-40.32 82.368-55.04 132.288-54.656 55.552.448 99.584 20.8 142.72 57.408l1.536 1.28V128H256v142.912zm.96 76.288C266.368 482.176 346.88 575.872 512 576c157.44.064 237.952-85.056 253.248-209.984a952.32 952.32 0 0 1-40.192-35.712c-32.704-27.776-63.36-41.92-101.888-42.24-31.552-.256-50.624 9.28-93.12 41.6l-.576.448c-52.096 39.616-81.024 54.208-129.792 54.208-54.784 0-100.48-13.376-142.784-37.056zM480 638.848C250.624 623.424 192 442.496 192 319.68V96a32 32 0 0 1 32-32h576a32 32 0 0 1 32 32v224c0 122.816-58.624 303.68-288 318.912V896h96a32 32 0 1 1 0 64H384a32 32 0 1 1 0-64h96z"})]))}}),LQ=PQ,OQ=xe({name:"GobletSquare",__name:"goblet-square",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M544 638.912V896h96a32 32 0 1 1 0 64H384a32 32 0 1 1 0-64h96V638.848C250.624 623.424 192 442.496 192 319.68V96a32 32 0 0 1 32-32h576a32 32 0 0 1 32 32v224c0 122.816-58.624 303.68-288 318.912M256 319.68c0 149.568 80 256.192 256 256.256C688.128 576 768 469.568 768 320V128H256z"})]))}}),DQ=OQ,zQ=xe({name:"Goblet",__name:"goblet",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M544 638.4V896h96a32 32 0 1 1 0 64H384a32 32 0 1 1 0-64h96V638.4A320 320 0 0 1 192 320c0-85.632 21.312-170.944 64-256h512c42.688 64.32 64 149.632 64 256a320 320 0 0 1-288 318.4M256 320a256 256 0 1 0 512 0c0-78.592-12.608-142.4-36.928-192h-434.24C269.504 192.384 256 256.256 256 320"})]))}}),NQ=zQ,FQ=xe({name:"GoldMedal",__name:"gold-medal",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg","xml:space":"preserve",style:{"enable-background":"new 0 0 1024 1024"},viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"m772.13 452.84 53.86-351.81c1.32-10.01-1.17-18.68-7.49-26.02S804.35 64 795.01 64H228.99v-.01h-.06c-9.33 0-17.15 3.67-23.49 11.01s-8.83 16.01-7.49 26.02l53.87 351.89C213.54 505.73 193.59 568.09 192 640c2 90.67 33.17 166.17 93.5 226.5S421.33 957.99 512 960c90.67-2 166.17-33.17 226.5-93.5 60.33-60.34 91.49-135.83 93.5-226.5-1.59-71.94-21.56-134.32-59.87-187.16zM640.01 128h117.02l-39.01 254.02c-20.75-10.64-40.74-19.73-59.94-27.28-5.92-3-11.95-5.8-18.08-8.41V128h.01zM576 128v198.76c-13.18-2.58-26.74-4.43-40.67-5.55-8.07-.8-15.85-1.2-23.33-1.2-10.54 0-21.09.66-31.64 1.96a359.844 359.844 0 0 0-32.36 4.79V128zm-192 0h.04v218.3c-6.22 2.66-12.34 5.5-18.36 8.56-19.13 7.54-39.02 16.6-59.66 27.16L267.01 128zm308.99 692.99c-48 48-108.33 73-180.99 75.01-72.66-2.01-132.99-27.01-180.99-75.01S258.01 712.66 256 640c2.01-72.66 27.01-132.99 75.01-180.99 19.67-19.67 41.41-35.47 65.22-47.41 38.33-15.04 71.15-23.92 98.44-26.65 5.07-.41 10.2-.7 15.39-.88.63-.01 1.28-.03 1.91-.03.66 0 1.35.03 2.02.04 5.11.17 10.15.46 15.13.86 27.4 2.71 60.37 11.65 98.91 26.79 23.71 11.93 45.36 27.69 64.96 47.29 48 48 73 108.33 75.01 180.99-2.01 72.65-27.01 132.98-75.01 180.98z"}),ae("path",{fill:"currentColor",d:"M544 480H416v64h64v192h-64v64h192v-64h-64z"})]))}}),BQ=FQ,VQ=xe({name:"GoodsFilled",__name:"goods-filled",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M192 352h640l64 544H128zm128 224h64V448h-64zm320 0h64V448h-64zM384 288h-64a192 192 0 1 1 384 0h-64a128 128 0 1 0-256 0"})]))}}),$Q=VQ,HQ=xe({name:"Goods",__name:"goods",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M320 288v-22.336C320 154.688 405.504 64 512 64s192 90.688 192 201.664v22.4h131.072a32 32 0 0 1 31.808 28.8l57.6 576a32 32 0 0 1-31.808 35.2H131.328a32 32 0 0 1-31.808-35.2l57.6-576a32 32 0 0 1 31.808-28.8H320zm64 0h256v-22.336C640 189.248 582.272 128 512 128c-70.272 0-128 61.248-128 137.664v22.4zm-64 64H217.92l-51.2 512h690.56l-51.264-512H704v96a32 32 0 1 1-64 0v-96H384v96a32 32 0 0 1-64 0z"})]))}}),UQ=HQ,jQ=xe({name:"Grape",__name:"grape",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M544 195.2a160 160 0 0 1 96 60.8 160 160 0 1 1 146.24 254.976 160 160 0 0 1-128 224 160 160 0 1 1-292.48 0 160 160 0 0 1-128-224A160 160 0 1 1 384 256a160 160 0 0 1 96-60.8V128h-64a32 32 0 0 1 0-64h192a32 32 0 0 1 0 64h-64zM512 448a96 96 0 1 0 0-192 96 96 0 0 0 0 192m-256 0a96 96 0 1 0 0-192 96 96 0 0 0 0 192m128 224a96 96 0 1 0 0-192 96 96 0 0 0 0 192m128 224a96 96 0 1 0 0-192 96 96 0 0 0 0 192m128-224a96 96 0 1 0 0-192 96 96 0 0 0 0 192m128-224a96 96 0 1 0 0-192 96 96 0 0 0 0 192"})]))}}),GQ=jQ,qQ=xe({name:"Grid",__name:"grid",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M640 384v256H384V384zm64 0h192v256H704zm-64 512H384V704h256zm64 0V704h192v192zm-64-768v192H384V128zm64 0h192v192H704zM320 384v256H128V384zm0 512H128V704h192zm0-768v192H128V128z"})]))}}),WQ=qQ,KQ=xe({name:"Guide",__name:"guide",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M640 608h-64V416h64zm0 160v160a32 32 0 0 1-32 32H416a32 32 0 0 1-32-32V768h64v128h128V768zM384 608V416h64v192zm256-352h-64V128H448v128h-64V96a32 32 0 0 1 32-32h192a32 32 0 0 1 32 32z"}),ae("path",{fill:"currentColor",d:"m220.8 256-71.232 80 71.168 80H768V256H220.8zm-14.4-64H800a32 32 0 0 1 32 32v224a32 32 0 0 1-32 32H206.4a32 32 0 0 1-23.936-10.752l-99.584-112a32 32 0 0 1 0-42.496l99.584-112A32 32 0 0 1 206.4 192m678.784 496-71.104 80H266.816V608h547.2l71.168 80zm-56.768-144H234.88a32 32 0 0 0-32 32v224a32 32 0 0 0 32 32h593.6a32 32 0 0 0 23.936-10.752l99.584-112a32 32 0 0 0 0-42.496l-99.584-112A32 32 0 0 0 828.48 544z"})]))}}),YQ=KQ,ZQ=xe({name:"Handbag",__name:"handbag",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg","xml:space":"preserve",style:{"enable-background":"new 0 0 1024 1024"},viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M887.01 264.99c-6-5.99-13.67-8.99-23.01-8.99H704c-1.34-54.68-20.01-100.01-56-136s-81.32-54.66-136-56c-54.68 1.34-100.01 20.01-136 56s-54.66 81.32-56 136H160c-9.35 0-17.02 3-23.01 8.99-5.99 6-8.99 13.67-8.99 23.01v640c0 9.35 2.99 17.02 8.99 23.01S150.66 960 160 960h704c9.35 0 17.02-2.99 23.01-8.99S896 937.34 896 928V288c0-9.35-2.99-17.02-8.99-23.01M421.5 165.5c24.32-24.34 54.49-36.84 90.5-37.5 35.99.68 66.16 13.18 90.5 37.5s36.84 54.49 37.5 90.5H384c.68-35.99 13.18-66.16 37.5-90.5M832 896H192V320h128v128h64V320h256v128h64V320h128z"})]))}}),XQ=ZQ,JQ=xe({name:"Headset",__name:"headset",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M896 529.152V512a384 384 0 1 0-768 0v17.152A128 128 0 0 1 320 640v128a128 128 0 1 1-256 0V512a448 448 0 1 1 896 0v256a128 128 0 1 1-256 0V640a128 128 0 0 1 192-110.848M896 640a64 64 0 0 0-128 0v128a64 64 0 0 0 128 0zm-768 0v128a64 64 0 0 0 128 0V640a64 64 0 1 0-128 0"})]))}}),QQ=JQ,eee=xe({name:"HelpFilled",__name:"help-filled",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M926.784 480H701.312A192.512 192.512 0 0 0 544 322.688V97.216A416.064 416.064 0 0 1 926.784 480m0 64A416.064 416.064 0 0 1 544 926.784V701.312A192.512 192.512 0 0 0 701.312 544zM97.28 544h225.472A192.512 192.512 0 0 0 480 701.312v225.472A416.064 416.064 0 0 1 97.216 544zm0-64A416.064 416.064 0 0 1 480 97.216v225.472A192.512 192.512 0 0 0 322.688 480H97.216z"})]))}}),tee=eee,nee=xe({name:"Help",__name:"help",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"m759.936 805.248-90.944-91.008A254.912 254.912 0 0 1 512 768a254.912 254.912 0 0 1-156.992-53.76l-90.944 91.008A382.464 382.464 0 0 0 512 896c94.528 0 181.12-34.176 247.936-90.752m45.312-45.312A382.464 382.464 0 0 0 896 512c0-94.528-34.176-181.12-90.752-247.936l-91.008 90.944C747.904 398.4 768 452.864 768 512c0 59.136-20.096 113.6-53.76 156.992l91.008 90.944zm-45.312-541.184A382.464 382.464 0 0 0 512 128c-94.528 0-181.12 34.176-247.936 90.752l90.944 91.008A254.912 254.912 0 0 1 512 256c59.136 0 113.6 20.096 156.992 53.76l90.944-91.008zm-541.184 45.312A382.464 382.464 0 0 0 128 512c0 94.528 34.176 181.12 90.752 247.936l91.008-90.944A254.912 254.912 0 0 1 256 512c0-59.136 20.096-113.6 53.76-156.992zm417.28 394.496a194.56 194.56 0 0 0 22.528-22.528C686.912 602.56 704 559.232 704 512a191.232 191.232 0 0 0-67.968-146.56A191.296 191.296 0 0 0 512 320a191.232 191.232 0 0 0-146.56 67.968C337.088 421.44 320 464.768 320 512a191.232 191.232 0 0 0 67.968 146.56C421.44 686.912 464.768 704 512 704c47.296 0 90.56-17.088 124.032-45.44zM512 960a448 448 0 1 1 0-896 448 448 0 0 1 0 896"})]))}}),ree=nee,iee=xe({name:"Hide",__name:"hide",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M876.8 156.8c0-9.6-3.2-16-9.6-22.4-6.4-6.4-12.8-9.6-22.4-9.6-9.6 0-16 3.2-22.4 9.6L736 220.8c-64-32-137.6-51.2-224-60.8-160 16-288 73.6-377.6 176C44.8 438.4 0 496 0 512s48 73.6 134.4 176c22.4 25.6 44.8 48 73.6 67.2l-86.4 89.6c-6.4 6.4-9.6 12.8-9.6 22.4 0 9.6 3.2 16 9.6 22.4 6.4 6.4 12.8 9.6 22.4 9.6 9.6 0 16-3.2 22.4-9.6l704-710.4c3.2-6.4 6.4-12.8 6.4-22.4Zm-646.4 528c-76.8-70.4-128-128-153.6-172.8 28.8-48 80-105.6 153.6-172.8C304 272 400 230.4 512 224c64 3.2 124.8 19.2 176 44.8l-54.4 54.4C598.4 300.8 560 288 512 288c-64 0-115.2 22.4-160 64s-64 96-64 160c0 48 12.8 89.6 35.2 124.8L256 707.2c-9.6-6.4-19.2-16-25.6-22.4Zm140.8-96c-12.8-22.4-19.2-48-19.2-76.8 0-44.8 16-83.2 48-112 32-28.8 67.2-48 112-48 28.8 0 54.4 6.4 73.6 19.2zM889.599 336c-12.8-16-28.8-28.8-41.6-41.6l-48 48c73.6 67.2 124.8 124.8 150.4 169.6-28.8 48-80 105.6-153.6 172.8-73.6 67.2-172.8 108.8-284.8 115.2-51.2-3.2-99.2-12.8-140.8-28.8l-48 48c57.6 22.4 118.4 38.4 188.8 44.8 160-16 288-73.6 377.6-176C979.199 585.6 1024 528 1024 512s-48.001-73.6-134.401-176Z"}),ae("path",{fill:"currentColor",d:"M511.998 672c-12.8 0-25.6-3.2-38.4-6.4l-51.2 51.2c28.8 12.8 57.6 19.2 89.6 19.2 64 0 115.2-22.4 160-64 41.6-41.6 64-96 64-160 0-32-6.4-64-19.2-89.6l-51.2 51.2c3.2 12.8 6.4 25.6 6.4 38.4 0 44.8-16 83.2-48 112-32 28.8-67.2 48-112 48Z"})]))}}),fO=iee,see=xe({name:"Histogram",__name:"histogram",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M416 896V128h192v768zm-288 0V448h192v448zm576 0V320h192v576z"})]))}}),oee=see,aee=xe({name:"HomeFilled",__name:"home-filled",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M512 128 128 447.936V896h255.936V640H640v256h255.936V447.936z"})]))}}),lee=aee,uee=xe({name:"HotWater",__name:"hot-water",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M273.067 477.867h477.866V409.6H273.067zm0 68.266v51.2A187.733 187.733 0 0 0 460.8 785.067h102.4a187.733 187.733 0 0 0 187.733-187.734v-51.2H273.067zm-34.134-204.8h546.134a34.133 34.133 0 0 1 34.133 34.134v221.866a256 256 0 0 1-256 256H460.8a256 256 0 0 1-256-256V375.467a34.133 34.133 0 0 1 34.133-34.134zM512 34.133a34.133 34.133 0 0 1 34.133 34.134v170.666a34.133 34.133 0 0 1-68.266 0V68.267A34.133 34.133 0 0 1 512 34.133zM375.467 102.4a34.133 34.133 0 0 1 34.133 34.133v102.4a34.133 34.133 0 0 1-68.267 0v-102.4a34.133 34.133 0 0 1 34.134-34.133m273.066 0a34.133 34.133 0 0 1 34.134 34.133v102.4a34.133 34.133 0 1 1-68.267 0v-102.4a34.133 34.133 0 0 1 34.133-34.133M170.667 921.668h682.666a34.133 34.133 0 1 1 0 68.267H170.667a34.133 34.133 0 1 1 0-68.267z"})]))}}),cee=uee,dee=xe({name:"House",__name:"house",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M192 413.952V896h640V413.952L512 147.328zM139.52 374.4l352-293.312a32 32 0 0 1 40.96 0l352 293.312A32 32 0 0 1 896 398.976V928a32 32 0 0 1-32 32H160a32 32 0 0 1-32-32V398.976a32 32 0 0 1 11.52-24.576"})]))}}),hee=dee,fee=xe({name:"IceCreamRound",__name:"ice-cream-round",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"m308.352 489.344 226.304 226.304a32 32 0 0 0 45.248 0L783.552 512A192 192 0 1 0 512 240.448L308.352 444.16a32 32 0 0 0 0 45.248zm135.744 226.304L308.352 851.392a96 96 0 0 1-135.744-135.744l135.744-135.744-45.248-45.248a96 96 0 0 1 0-135.808L466.752 195.2A256 256 0 0 1 828.8 557.248L625.152 760.96a96 96 0 0 1-135.808 0l-45.248-45.248zM398.848 670.4 353.6 625.152 217.856 760.896a32 32 0 0 0 45.248 45.248zm248.96-384.64a32 32 0 0 1 0 45.248L466.624 512a32 32 0 1 1-45.184-45.248l180.992-181.056a32 32 0 0 1 45.248 0zm90.496 90.496a32 32 0 0 1 0 45.248L557.248 602.496A32 32 0 1 1 512 557.248l180.992-180.992a32 32 0 0 1 45.312 0z"})]))}}),pee=fee,mee=xe({name:"IceCreamSquare",__name:"ice-cream-square",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M416 640h256a32 32 0 0 0 32-32V160a32 32 0 0 0-32-32H352a32 32 0 0 0-32 32v448a32 32 0 0 0 32 32zm192 64v160a96 96 0 0 1-192 0V704h-64a96 96 0 0 1-96-96V160a96 96 0 0 1 96-96h320a96 96 0 0 1 96 96v448a96 96 0 0 1-96 96zm-64 0h-64v160a32 32 0 1 0 64 0z"})]))}}),gee=mee,_ee=xe({name:"IceCream",__name:"ice-cream",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M128.64 448a208 208 0 0 1 193.536-191.552 224 224 0 0 1 445.248 15.488A208.128 208.128 0 0 1 894.784 448H896L548.8 983.68a32 32 0 0 1-53.248.704L128 448zm64.256 0h286.208a144 144 0 0 0-286.208 0zm351.36 0h286.272a144 144 0 0 0-286.272 0zm-294.848 64 271.808 396.608L778.24 512H249.408zM511.68 352.64a207.872 207.872 0 0 1 189.184-96.192 160 160 0 0 0-314.752 5.632c52.608 12.992 97.28 46.08 125.568 90.56"})]))}}),vee=_ee,yee=xe({name:"IceDrink",__name:"ice-drink",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M512 448v128h239.68l16.064-128zm-64 0H256.256l16.064 128H448zm64-255.36V384h247.744A256.128 256.128 0 0 0 512 192.64m-64 8.064A256.448 256.448 0 0 0 264.256 384H448zm64-72.064A320.128 320.128 0 0 1 825.472 384H896a32 32 0 1 1 0 64h-64v1.92l-56.96 454.016A64 64 0 0 1 711.552 960H312.448a64 64 0 0 1-63.488-56.064L192 449.92V448h-64a32 32 0 0 1 0-64h70.528A320.384 320.384 0 0 1 448 135.04V96a96 96 0 0 1 96-96h128a32 32 0 1 1 0 64H544a32 32 0 0 0-32 32zM743.68 640H280.32l32.128 256h399.104z"})]))}}),bee=yee,xee=xe({name:"IceTea",__name:"ice-tea",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M197.696 259.648a320.128 320.128 0 0 1 628.608 0A96 96 0 0 1 896 352v64a96 96 0 0 1-71.616 92.864l-49.408 395.072A64 64 0 0 1 711.488 960H312.512a64 64 0 0 1-63.488-56.064l-49.408-395.072A96 96 0 0 1 128 416v-64a96 96 0 0 1 69.696-92.352M264.064 256h495.872a256.128 256.128 0 0 0-495.872 0m495.424 256H264.512l48 384h398.976zM224 448h576a32 32 0 0 0 32-32v-64a32 32 0 0 0-32-32H224a32 32 0 0 0-32 32v64a32 32 0 0 0 32 32m160 192h64v64h-64zm192 64h64v64h-64zm-128 64h64v64h-64zm64-192h64v64h-64z"})]))}}),wee=xee,See=xe({name:"InfoFilled",__name:"info-filled",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896.064A448 448 0 0 1 512 64m67.2 275.072c33.28 0 60.288-23.104 60.288-57.344s-27.072-57.344-60.288-57.344c-33.28 0-60.16 23.104-60.16 57.344s26.88 57.344 60.16 57.344M590.912 699.2c0-6.848 2.368-24.64 1.024-34.752l-52.608 60.544c-10.88 11.456-24.512 19.392-30.912 17.28a12.992 12.992 0 0 1-8.256-14.72l87.68-276.992c7.168-35.136-12.544-67.2-54.336-71.296-44.096 0-108.992 44.736-148.48 101.504 0 6.784-1.28 23.68.064 33.792l52.544-60.608c10.88-11.328 23.552-19.328 29.952-17.152a12.8 12.8 0 0 1 7.808 16.128L388.48 728.576c-10.048 32.256 8.96 63.872 55.04 71.04 67.84 0 107.904-43.648 147.456-100.416z"})]))}}),Cx=See,Cee=xe({name:"Iphone",__name:"iphone",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M224 768v96.064a64 64 0 0 0 64 64h448a64 64 0 0 0 64-64V768zm0-64h576V160a64 64 0 0 0-64-64H288a64 64 0 0 0-64 64zm32 288a96 96 0 0 1-96-96V128a96 96 0 0 1 96-96h512a96 96 0 0 1 96 96v768a96 96 0 0 1-96 96zm304-144a48 48 0 1 1-96 0 48 48 0 0 1 96 0"})]))}}),Eee=Cee,Tee=xe({name:"Key",__name:"key",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M448 456.064V96a32 32 0 0 1 32-32.064L672 64a32 32 0 0 1 0 64H512v128h160a32 32 0 0 1 0 64H512v128a256 256 0 1 1-64 8.064M512 896a192 192 0 1 0 0-384 192 192 0 0 0 0 384"})]))}}),Iee=Tee,kee=xe({name:"KnifeFork",__name:"knife-fork",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M256 410.56V96a32 32 0 0 1 64 0v314.56A96 96 0 0 0 384 320V96a32 32 0 0 1 64 0v224a160 160 0 0 1-128 156.8V928a32 32 0 1 1-64 0V476.8A160 160 0 0 1 128 320V96a32 32 0 0 1 64 0v224a96 96 0 0 0 64 90.56m384-250.24V544h126.72c-3.328-78.72-12.928-147.968-28.608-207.744-14.336-54.528-46.848-113.344-98.112-175.872zM640 608v320a32 32 0 1 1-64 0V64h64c85.312 89.472 138.688 174.848 160 256 21.312 81.152 32 177.152 32 288z"})]))}}),Mee=kee,Aee=xe({name:"Lightning",__name:"lightning",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M288 671.36v64.128A239.808 239.808 0 0 1 63.744 496.192a240.32 240.32 0 0 1 199.488-236.8 256.128 256.128 0 0 1 487.872-30.976A256.064 256.064 0 0 1 736 734.016v-64.768a192 192 0 0 0 3.328-377.92l-35.2-6.592-12.8-33.408a192.064 192.064 0 0 0-365.952 23.232l-9.92 40.896-41.472 7.04a176.32 176.32 0 0 0-146.24 173.568c0 91.968 70.464 167.36 160.256 175.232z"}),ae("path",{fill:"currentColor",d:"M416 736a32 32 0 0 1-27.776-47.872l128-224a32 32 0 1 1 55.552 31.744L471.168 672H608a32 32 0 0 1 27.776 47.872l-128 224a32 32 0 1 1-55.68-31.744L552.96 736z"})]))}}),Ree=Aee,Pee=xe({name:"Link",__name:"link",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M715.648 625.152 670.4 579.904l90.496-90.56c75.008-74.944 85.12-186.368 22.656-248.896-62.528-62.464-173.952-52.352-248.96 22.656L444.16 353.6l-45.248-45.248 90.496-90.496c100.032-99.968 251.968-110.08 339.456-22.656 87.488 87.488 77.312 239.424-22.656 339.456l-90.496 90.496zm-90.496 90.496-90.496 90.496C434.624 906.112 282.688 916.224 195.2 828.8c-87.488-87.488-77.312-239.424 22.656-339.456l90.496-90.496 45.248 45.248-90.496 90.56c-75.008 74.944-85.12 186.368-22.656 248.896 62.528 62.464 173.952 52.352 248.96-22.656l90.496-90.496zm0-362.048 45.248 45.248L398.848 670.4 353.6 625.152z"})]))}}),Lee=Pee,Oee=xe({name:"List",__name:"list",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M704 192h160v736H160V192h160v64h384zM288 512h448v-64H288zm0 256h448v-64H288zm96-576V96h256v96z"})]))}}),Dee=Oee,zee=xe({name:"Loading",__name:"loading",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M512 64a32 32 0 0 1 32 32v192a32 32 0 0 1-64 0V96a32 32 0 0 1 32-32m0 640a32 32 0 0 1 32 32v192a32 32 0 1 1-64 0V736a32 32 0 0 1 32-32m448-192a32 32 0 0 1-32 32H736a32 32 0 1 1 0-64h192a32 32 0 0 1 32 32m-640 0a32 32 0 0 1-32 32H96a32 32 0 0 1 0-64h192a32 32 0 0 1 32 32M195.2 195.2a32 32 0 0 1 45.248 0L376.32 331.008a32 32 0 0 1-45.248 45.248L195.2 240.448a32 32 0 0 1 0-45.248zm452.544 452.544a32 32 0 0 1 45.248 0L828.8 783.552a32 32 0 0 1-45.248 45.248L647.744 692.992a32 32 0 0 1 0-45.248zM828.8 195.264a32 32 0 0 1 0 45.184L692.992 376.32a32 32 0 0 1-45.248-45.248l135.808-135.808a32 32 0 0 1 45.248 0m-452.544 452.48a32 32 0 0 1 0 45.248L240.448 828.8a32 32 0 0 1-45.248-45.248l135.808-135.808a32 32 0 0 1 45.248 0z"})]))}}),gc=zee,Nee=xe({name:"LocationFilled",__name:"location-filled",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M512 928c23.936 0 117.504-68.352 192.064-153.152C803.456 661.888 864 535.808 864 416c0-189.632-155.84-320-352-320S160 226.368 160 416c0 120.32 60.544 246.4 159.936 359.232C394.432 859.84 488 928 512 928m0-435.2a64 64 0 1 0 0-128 64 64 0 0 0 0 128m0 140.8a204.8 204.8 0 1 1 0-409.6 204.8 204.8 0 0 1 0 409.6"})]))}}),Fee=Nee,Bee=xe({name:"LocationInformation",__name:"location-information",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M288 896h448q32 0 32 32t-32 32H288q-32 0-32-32t32-32"}),ae("path",{fill:"currentColor",d:"M800 416a288 288 0 1 0-576 0c0 118.144 94.528 272.128 288 456.576C705.472 688.128 800 534.144 800 416M512 960C277.312 746.688 160 565.312 160 416a352 352 0 0 1 704 0c0 149.312-117.312 330.688-352 544"}),ae("path",{fill:"currentColor",d:"M512 512a96 96 0 1 0 0-192 96 96 0 0 0 0 192m0 64a160 160 0 1 1 0-320 160 160 0 0 1 0 320"})]))}}),Vee=Bee,$ee=xe({name:"Location",__name:"location",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M800 416a288 288 0 1 0-576 0c0 118.144 94.528 272.128 288 456.576C705.472 688.128 800 534.144 800 416M512 960C277.312 746.688 160 565.312 160 416a352 352 0 0 1 704 0c0 149.312-117.312 330.688-352 544"}),ae("path",{fill:"currentColor",d:"M512 512a96 96 0 1 0 0-192 96 96 0 0 0 0 192m0 64a160 160 0 1 1 0-320 160 160 0 0 1 0 320"})]))}}),Hee=$ee,Uee=xe({name:"Lock",__name:"lock",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M224 448a32 32 0 0 0-32 32v384a32 32 0 0 0 32 32h576a32 32 0 0 0 32-32V480a32 32 0 0 0-32-32zm0-64h576a96 96 0 0 1 96 96v384a96 96 0 0 1-96 96H224a96 96 0 0 1-96-96V480a96 96 0 0 1 96-96"}),ae("path",{fill:"currentColor",d:"M512 544a32 32 0 0 1 32 32v192a32 32 0 1 1-64 0V576a32 32 0 0 1 32-32m192-160v-64a192 192 0 1 0-384 0v64zM512 64a256 256 0 0 1 256 256v128H256V320A256 256 0 0 1 512 64"})]))}}),jee=Uee,Gee=xe({name:"Lollipop",__name:"lollipop",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M513.28 448a64 64 0 1 1 76.544 49.728A96 96 0 0 0 768 448h64a160 160 0 0 1-320 0zm-126.976-29.696a256 256 0 1 0 43.52-180.48A256 256 0 0 1 832 448h-64a192 192 0 0 0-381.696-29.696m105.664 249.472L285.696 874.048a96 96 0 0 1-135.68-135.744l206.208-206.272a320 320 0 1 1 135.744 135.744zm-54.464-36.032a321.92 321.92 0 0 1-45.248-45.248L195.2 783.552a32 32 0 1 0 45.248 45.248l197.056-197.12z"})]))}}),qee=Gee,Wee=xe({name:"MagicStick",__name:"magic-stick",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M512 64h64v192h-64zm0 576h64v192h-64zM160 480v-64h192v64zm576 0v-64h192v64zM249.856 199.04l45.248-45.184L430.848 289.6 385.6 334.848 249.856 199.104zM657.152 606.4l45.248-45.248 135.744 135.744-45.248 45.248zM114.048 923.2 68.8 877.952l316.8-316.8 45.248 45.248zM702.4 334.848 657.152 289.6l135.744-135.744 45.248 45.248z"})]))}}),Kee=Wee,Yee=xe({name:"Magnet",__name:"magnet",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M832 320V192H704v320a192 192 0 1 1-384 0V192H192v128h128v64H192v128a320 320 0 0 0 640 0V384H704v-64zM640 512V128h256v384a384 384 0 1 1-768 0V128h256v384a128 128 0 1 0 256 0"})]))}}),Zee=Yee,Xee=xe({name:"Male",__name:"male",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M399.5 849.5a225 225 0 1 0 0-450 225 225 0 0 0 0 450m0 56.25a281.25 281.25 0 1 1 0-562.5 281.25 281.25 0 0 1 0 562.5m253.125-787.5h225q28.125 0 28.125 28.125T877.625 174.5h-225q-28.125 0-28.125-28.125t28.125-28.125"}),ae("path",{fill:"currentColor",d:"M877.625 118.25q28.125 0 28.125 28.125v225q0 28.125-28.125 28.125T849.5 371.375v-225q0-28.125 28.125-28.125"}),ae("path",{fill:"currentColor",d:"M604.813 458.9 565.1 419.131l292.613-292.668 39.825 39.824z"})]))}}),Jee=Xee,Qee=xe({name:"Management",__name:"management",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M576 128v288l96-96 96 96V128h128v768H320V128zm-448 0h128v768H128z"})]))}}),ete=Qee,tte=xe({name:"MapLocation",__name:"map-location",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M800 416a288 288 0 1 0-576 0c0 118.144 94.528 272.128 288 456.576C705.472 688.128 800 534.144 800 416M512 960C277.312 746.688 160 565.312 160 416a352 352 0 0 1 704 0c0 149.312-117.312 330.688-352 544"}),ae("path",{fill:"currentColor",d:"M512 448a64 64 0 1 0 0-128 64 64 0 0 0 0 128m0 64a128 128 0 1 1 0-256 128 128 0 0 1 0 256m345.6 192L960 960H672v-64H352v64H64l102.4-256zm-68.928 0H235.328l-76.8 192h706.944z"})]))}}),nte=tte,rte=xe({name:"Medal",__name:"medal",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M512 896a256 256 0 1 0 0-512 256 256 0 0 0 0 512m0 64a320 320 0 1 1 0-640 320 320 0 0 1 0 640"}),ae("path",{fill:"currentColor",d:"M576 128H448v200a286.72 286.72 0 0 1 64-8c19.52 0 40.832 2.688 64 8zm64 0v219.648c24.448 9.088 50.56 20.416 78.4 33.92L757.44 128zm-256 0H266.624l39.04 253.568c27.84-13.504 53.888-24.832 78.336-33.92V128zM229.312 64h565.376a32 32 0 0 1 31.616 36.864L768 480c-113.792-64-199.104-96-256-96-56.896 0-142.208 32-256 96l-58.304-379.136A32 32 0 0 1 229.312 64"})]))}}),ite=rte,ste=xe({name:"Memo",__name:"memo",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg","xml:space":"preserve",style:{"enable-background":"new 0 0 1024 1024"},viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M480 320h192c21.33 0 32-10.67 32-32s-10.67-32-32-32H480c-21.33 0-32 10.67-32 32s10.67 32 32 32"}),ae("path",{fill:"currentColor",d:"M887.01 72.99C881.01 67 873.34 64 864 64H160c-9.35 0-17.02 3-23.01 8.99C131 78.99 128 86.66 128 96v832c0 9.35 2.99 17.02 8.99 23.01S150.66 960 160 960h704c9.35 0 17.02-2.99 23.01-8.99S896 937.34 896 928V96c0-9.35-3-17.02-8.99-23.01M192 896V128h96v768zm640 0H352V128h480z"}),ae("path",{fill:"currentColor",d:"M480 512h192c21.33 0 32-10.67 32-32s-10.67-32-32-32H480c-21.33 0-32 10.67-32 32s10.67 32 32 32m0 192h192c21.33 0 32-10.67 32-32s-10.67-32-32-32H480c-21.33 0-32 10.67-32 32s10.67 32 32 32"})]))}}),ote=ste,ate=xe({name:"Menu",__name:"menu",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M160 448a32 32 0 0 1-32-32V160.064a32 32 0 0 1 32-32h256a32 32 0 0 1 32 32V416a32 32 0 0 1-32 32zm448 0a32 32 0 0 1-32-32V160.064a32 32 0 0 1 32-32h255.936a32 32 0 0 1 32 32V416a32 32 0 0 1-32 32zM160 896a32 32 0 0 1-32-32V608a32 32 0 0 1 32-32h256a32 32 0 0 1 32 32v256a32 32 0 0 1-32 32zm448 0a32 32 0 0 1-32-32V608a32 32 0 0 1 32-32h255.936a32 32 0 0 1 32 32v256a32 32 0 0 1-32 32z"})]))}}),lte=ate,ute=xe({name:"MessageBox",__name:"message-box",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M288 384h448v64H288zm96-128h256v64H384zM131.456 512H384v128h256V512h252.544L721.856 192H302.144zM896 576H704v128H320V576H128v256h768zM275.776 128h472.448a32 32 0 0 1 28.608 17.664l179.84 359.552A32 32 0 0 1 960 519.552V864a32 32 0 0 1-32 32H96a32 32 0 0 1-32-32V519.552a32 32 0 0 1 3.392-14.336l179.776-359.552A32 32 0 0 1 275.776 128z"})]))}}),cte=ute,dte=xe({name:"Message",__name:"message",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M128 224v512a64 64 0 0 0 64 64h640a64 64 0 0 0 64-64V224zm0-64h768a64 64 0 0 1 64 64v512a128 128 0 0 1-128 128H192A128 128 0 0 1 64 736V224a64 64 0 0 1 64-64"}),ae("path",{fill:"currentColor",d:"M904 224 656.512 506.88a192 192 0 0 1-289.024 0L120 224zm-698.944 0 210.56 240.704a128 128 0 0 0 192.704 0L818.944 224H205.056"})]))}}),hte=dte,fte=xe({name:"Mic",__name:"mic",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M480 704h160a64 64 0 0 0 64-64v-32h-96a32 32 0 0 1 0-64h96v-96h-96a32 32 0 0 1 0-64h96v-96h-96a32 32 0 0 1 0-64h96v-32a64 64 0 0 0-64-64H384a64 64 0 0 0-64 64v32h96a32 32 0 0 1 0 64h-96v96h96a32 32 0 0 1 0 64h-96v96h96a32 32 0 0 1 0 64h-96v32a64 64 0 0 0 64 64zm64 64v128h192a32 32 0 1 1 0 64H288a32 32 0 1 1 0-64h192V768h-96a128 128 0 0 1-128-128V192A128 128 0 0 1 384 64h256a128 128 0 0 1 128 128v448a128 128 0 0 1-128 128z"})]))}}),pte=fte,mte=xe({name:"Microphone",__name:"microphone",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M512 128a128 128 0 0 0-128 128v256a128 128 0 1 0 256 0V256a128 128 0 0 0-128-128m0-64a192 192 0 0 1 192 192v256a192 192 0 1 1-384 0V256A192 192 0 0 1 512 64m-32 832v-64a288 288 0 0 1-288-288v-32a32 32 0 0 1 64 0v32a224 224 0 0 0 224 224h64a224 224 0 0 0 224-224v-32a32 32 0 1 1 64 0v32a288 288 0 0 1-288 288v64h64a32 32 0 1 1 0 64H416a32 32 0 1 1 0-64z"})]))}}),gte=mte,_te=xe({name:"MilkTea",__name:"milk-tea",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M416 128V96a96 96 0 0 1 96-96h128a32 32 0 1 1 0 64H512a32 32 0 0 0-32 32v32h320a96 96 0 0 1 11.712 191.296l-39.68 581.056A64 64 0 0 1 708.224 960H315.776a64 64 0 0 1-63.872-59.648l-39.616-581.056A96 96 0 0 1 224 128zM276.48 320l39.296 576h392.448l4.8-70.784a224.064 224.064 0 0 1 30.016-439.808L747.52 320zM224 256h576a32 32 0 1 0 0-64H224a32 32 0 0 0 0 64m493.44 503.872 21.12-309.12a160 160 0 0 0-21.12 309.12"})]))}}),vte=_te,yte=xe({name:"Minus",__name:"minus",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M128 544h768a32 32 0 1 0 0-64H128a32 32 0 0 0 0 64"})]))}}),pO=yte,bte=xe({name:"Money",__name:"money",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M256 640v192h640V384H768v-64h150.976c14.272 0 19.456 1.472 24.64 4.288a29.056 29.056 0 0 1 12.16 12.096c2.752 5.184 4.224 10.368 4.224 24.64v493.952c0 14.272-1.472 19.456-4.288 24.64a29.056 29.056 0 0 1-12.096 12.16c-5.184 2.752-10.368 4.224-24.64 4.224H233.024c-14.272 0-19.456-1.472-24.64-4.288a29.056 29.056 0 0 1-12.16-12.096c-2.688-5.184-4.224-10.368-4.224-24.576V640z"}),ae("path",{fill:"currentColor",d:"M768 192H128v448h640zm64-22.976v493.952c0 14.272-1.472 19.456-4.288 24.64a29.056 29.056 0 0 1-12.096 12.16c-5.184 2.752-10.368 4.224-24.64 4.224H105.024c-14.272 0-19.456-1.472-24.64-4.288a29.056 29.056 0 0 1-12.16-12.096C65.536 682.432 64 677.248 64 663.04V169.024c0-14.272 1.472-19.456 4.288-24.64a29.056 29.056 0 0 1 12.096-12.16C85.568 129.536 90.752 128 104.96 128h685.952c14.272 0 19.456 1.472 24.64 4.288a29.056 29.056 0 0 1 12.16 12.096c2.752 5.184 4.224 10.368 4.224 24.64z"}),ae("path",{fill:"currentColor",d:"M448 576a160 160 0 1 1 0-320 160 160 0 0 1 0 320m0-64a96 96 0 1 0 0-192 96 96 0 0 0 0 192"})]))}}),xte=bte,wte=xe({name:"Monitor",__name:"monitor",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M544 768v128h192a32 32 0 1 1 0 64H288a32 32 0 1 1 0-64h192V768H192A128 128 0 0 1 64 640V256a128 128 0 0 1 128-128h640a128 128 0 0 1 128 128v384a128 128 0 0 1-128 128zM192 192a64 64 0 0 0-64 64v384a64 64 0 0 0 64 64h640a64 64 0 0 0 64-64V256a64 64 0 0 0-64-64z"})]))}}),Ste=wte,Cte=xe({name:"MoonNight",__name:"moon-night",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M384 512a448 448 0 0 1 215.872-383.296A384 384 0 0 0 213.76 640h188.8A448.256 448.256 0 0 1 384 512M171.136 704a448 448 0 0 1 636.992-575.296A384 384 0 0 0 499.328 704h-328.32z"}),ae("path",{fill:"currentColor",d:"M32 640h960q32 0 32 32t-32 32H32q-32 0-32-32t32-32m128 128h384a32 32 0 1 1 0 64H160a32 32 0 1 1 0-64m160 127.68 224 .256a32 32 0 0 1 32 32V928a32 32 0 0 1-32 32l-224-.384a32 32 0 0 1-32-32v-.064a32 32 0 0 1 32-32z"})]))}}),Ete=Cte,Tte=xe({name:"Moon",__name:"moon",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M240.448 240.448a384 384 0 1 0 559.424 525.696 448 448 0 0 1-542.016-542.08 390.592 390.592 0 0 0-17.408 16.384zm181.056 362.048a384 384 0 0 0 525.632 16.384A448 448 0 1 1 405.056 76.8a384 384 0 0 0 16.448 525.696"})]))}}),Ite=Tte,kte=xe({name:"MoreFilled",__name:"more-filled",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M176 416a112 112 0 1 1 0 224 112 112 0 0 1 0-224m336 0a112 112 0 1 1 0 224 112 112 0 0 1 0-224m336 0a112 112 0 1 1 0 224 112 112 0 0 1 0-224"})]))}}),X4=kte,Mte=xe({name:"More",__name:"more",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M176 416a112 112 0 1 0 0 224 112 112 0 0 0 0-224m0 64a48 48 0 1 1 0 96 48 48 0 0 1 0-96m336-64a112 112 0 1 1 0 224 112 112 0 0 1 0-224m0 64a48 48 0 1 0 0 96 48 48 0 0 0 0-96m336-64a112 112 0 1 1 0 224 112 112 0 0 1 0-224m0 64a48 48 0 1 0 0 96 48 48 0 0 0 0-96"})]))}}),mO=Mte,Ate=xe({name:"MostlyCloudy",__name:"mostly-cloudy",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M737.216 357.952 704 349.824l-11.776-32a192.064 192.064 0 0 0-367.424 23.04l-8.96 39.04-39.04 8.96A192.064 192.064 0 0 0 320 768h368a207.808 207.808 0 0 0 207.808-208 208.32 208.32 0 0 0-158.592-202.048m15.168-62.208A272.32 272.32 0 0 1 959.744 560a271.808 271.808 0 0 1-271.552 272H320a256 256 0 0 1-57.536-505.536 256.128 256.128 0 0 1 489.92-30.72"})]))}}),Rte=Ate,Pte=xe({name:"Mouse",__name:"mouse",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M438.144 256c-68.352 0-92.736 4.672-117.76 18.112-20.096 10.752-35.52 26.176-46.272 46.272C260.672 345.408 256 369.792 256 438.144v275.712c0 68.352 4.672 92.736 18.112 117.76 10.752 20.096 26.176 35.52 46.272 46.272C345.408 891.328 369.792 896 438.144 896h147.712c68.352 0 92.736-4.672 117.76-18.112 20.096-10.752 35.52-26.176 46.272-46.272C763.328 806.592 768 782.208 768 713.856V438.144c0-68.352-4.672-92.736-18.112-117.76a110.464 110.464 0 0 0-46.272-46.272C678.592 260.672 654.208 256 585.856 256zm0-64h147.712c85.568 0 116.608 8.96 147.904 25.6 31.36 16.768 55.872 41.344 72.576 72.64C823.104 321.536 832 352.576 832 438.08v275.84c0 85.504-8.96 116.544-25.6 147.84a174.464 174.464 0 0 1-72.64 72.576C702.464 951.104 671.424 960 585.92 960H438.08c-85.504 0-116.544-8.96-147.84-25.6a174.464 174.464 0 0 1-72.64-72.704c-16.768-31.296-25.664-62.336-25.664-147.84v-275.84c0-85.504 8.96-116.544 25.6-147.84a174.464 174.464 0 0 1 72.768-72.576c31.232-16.704 62.272-25.6 147.776-25.6z"}),ae("path",{fill:"currentColor",d:"M512 320q32 0 32 32v128q0 32-32 32t-32-32V352q0-32 32-32m32-96a32 32 0 0 1-64 0v-64a32 32 0 0 0-32-32h-96a32 32 0 0 1 0-64h96a96 96 0 0 1 96 96z"})]))}}),Lte=Pte,Ote=xe({name:"Mug",__name:"mug",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M736 800V160H160v640a64 64 0 0 0 64 64h448a64 64 0 0 0 64-64m64-544h63.552a96 96 0 0 1 96 96v224a96 96 0 0 1-96 96H800v128a128 128 0 0 1-128 128H224A128 128 0 0 1 96 800V128a32 32 0 0 1 32-32h640a32 32 0 0 1 32 32zm0 64v288h63.552a32 32 0 0 0 32-32V352a32 32 0 0 0-32-32z"})]))}}),Dte=Ote,zte=xe({name:"MuteNotification",__name:"mute-notification",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"m241.216 832 63.616-64H768V448c0-42.368-10.24-82.304-28.48-117.504l46.912-47.232C815.36 331.392 832 387.84 832 448v320h96a32 32 0 1 1 0 64zm-90.24 0H96a32 32 0 1 1 0-64h96V448a320.128 320.128 0 0 1 256-313.6V128a64 64 0 1 1 128 0v6.4a319.552 319.552 0 0 1 171.648 97.088l-45.184 45.44A256 256 0 0 0 256 448v278.336L151.04 832zM448 896h128a64 64 0 0 1-128 0"}),ae("path",{fill:"currentColor",d:"M150.72 859.072a32 32 0 0 1-45.44-45.056l704-708.544a32 32 0 0 1 45.44 45.056l-704 708.544z"})]))}}),Nte=zte,Fte=xe({name:"Mute",__name:"mute",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"m412.16 592.128-45.44 45.44A191.232 191.232 0 0 1 320 512V256a192 192 0 1 1 384 0v44.352l-64 64V256a128 128 0 1 0-256 0v256c0 30.336 10.56 58.24 28.16 80.128m51.968 38.592A128 128 0 0 0 640 512v-57.152l64-64V512a192 192 0 0 1-287.68 166.528zM314.88 779.968l46.144-46.08A222.976 222.976 0 0 0 480 768h64a224 224 0 0 0 224-224v-32a32 32 0 1 1 64 0v32a288 288 0 0 1-288 288v64h64a32 32 0 1 1 0 64H416a32 32 0 1 1 0-64h64v-64c-61.44 0-118.4-19.2-165.12-52.032M266.752 737.6A286.976 286.976 0 0 1 192 544v-32a32 32 0 0 1 64 0v32c0 56.832 21.184 108.8 56.064 148.288z"}),ae("path",{fill:"currentColor",d:"M150.72 859.072a32 32 0 0 1-45.44-45.056l704-708.544a32 32 0 0 1 45.44 45.056l-704 708.544z"})]))}}),Bte=Fte,Vte=xe({name:"NoSmoking",__name:"no-smoking",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M440.256 576H256v128h56.256l-64 64H224a32 32 0 0 1-32-32V544a32 32 0 0 1 32-32h280.256zm143.488 128H704V583.744L775.744 512H928a32 32 0 0 1 32 32v192a32 32 0 0 1-32 32H519.744zM768 576v128h128V576zm-29.696-207.552 45.248 45.248-497.856 497.856-45.248-45.248zM256 64h64v320h-64zM128 192h64v192h-64zM64 512h64v256H64z"})]))}}),$te=Vte,Hte=xe({name:"Notebook",__name:"notebook",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M192 128v768h640V128zm-32-64h704a32 32 0 0 1 32 32v832a32 32 0 0 1-32 32H160a32 32 0 0 1-32-32V96a32 32 0 0 1 32-32"}),ae("path",{fill:"currentColor",d:"M672 128h64v768h-64zM96 192h128q32 0 32 32t-32 32H96q-32 0-32-32t32-32m0 192h128q32 0 32 32t-32 32H96q-32 0-32-32t32-32m0 192h128q32 0 32 32t-32 32H96q-32 0-32-32t32-32m0 192h128q32 0 32 32t-32 32H96q-32 0-32-32t32-32"})]))}}),Ute=Hte,jte=xe({name:"Notification",__name:"notification",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M512 128v64H256a64 64 0 0 0-64 64v512a64 64 0 0 0 64 64h512a64 64 0 0 0 64-64V512h64v256a128 128 0 0 1-128 128H256a128 128 0 0 1-128-128V256a128 128 0 0 1 128-128z"}),ae("path",{fill:"currentColor",d:"M768 384a128 128 0 1 0 0-256 128 128 0 0 0 0 256m0 64a192 192 0 1 1 0-384 192 192 0 0 1 0 384"})]))}}),Gte=jte,qte=xe({name:"Odometer",__name:"odometer",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M512 896a384 384 0 1 0 0-768 384 384 0 0 0 0 768m0 64a448 448 0 1 1 0-896 448 448 0 0 1 0 896"}),ae("path",{fill:"currentColor",d:"M192 512a320 320 0 1 1 640 0 32 32 0 1 1-64 0 256 256 0 1 0-512 0 32 32 0 0 1-64 0"}),ae("path",{fill:"currentColor",d:"M570.432 627.84A96 96 0 1 1 509.568 608l60.992-187.776A32 32 0 1 1 631.424 440l-60.992 187.776zM502.08 734.464a32 32 0 1 0 19.84-60.928 32 32 0 0 0-19.84 60.928"})]))}}),Wte=qte,Kte=xe({name:"OfficeBuilding",__name:"office-building",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M192 128v704h384V128zm-32-64h448a32 32 0 0 1 32 32v768a32 32 0 0 1-32 32H160a32 32 0 0 1-32-32V96a32 32 0 0 1 32-32"}),ae("path",{fill:"currentColor",d:"M256 256h256v64H256zm0 192h256v64H256zm0 192h256v64H256zm384-128h128v64H640zm0 128h128v64H640zM64 832h896v64H64z"}),ae("path",{fill:"currentColor",d:"M640 384v448h192V384zm-32-64h256a32 32 0 0 1 32 32v512a32 32 0 0 1-32 32H608a32 32 0 0 1-32-32V352a32 32 0 0 1 32-32"})]))}}),Yte=Kte,Zte=xe({name:"Open",__name:"open",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M329.956 257.138a254.862 254.862 0 0 0 0 509.724h364.088a254.862 254.862 0 0 0 0-509.724zm0-72.818h364.088a327.68 327.68 0 1 1 0 655.36H329.956a327.68 327.68 0 1 1 0-655.36z"}),ae("path",{fill:"currentColor",d:"M694.044 621.227a109.227 109.227 0 1 0 0-218.454 109.227 109.227 0 0 0 0 218.454m0 72.817a182.044 182.044 0 1 1 0-364.088 182.044 182.044 0 0 1 0 364.088"})]))}}),Xte=Zte,Jte=xe({name:"Operation",__name:"operation",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M389.44 768a96.064 96.064 0 0 1 181.12 0H896v64H570.56a96.064 96.064 0 0 1-181.12 0H128v-64zm192-288a96.064 96.064 0 0 1 181.12 0H896v64H762.56a96.064 96.064 0 0 1-181.12 0H128v-64zm-320-288a96.064 96.064 0 0 1 181.12 0H896v64H442.56a96.064 96.064 0 0 1-181.12 0H128v-64z"})]))}}),Qte=Jte,ene=xe({name:"Opportunity",__name:"opportunity",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M384 960v-64h192.064v64zm448-544a350.656 350.656 0 0 1-128.32 271.424C665.344 719.04 640 763.776 640 813.504V832H320v-14.336c0-48-19.392-95.36-57.216-124.992a351.552 351.552 0 0 1-128.448-344.256c25.344-136.448 133.888-248.128 269.76-276.48A352.384 352.384 0 0 1 832 416m-544 32c0-132.288 75.904-224 192-224v-64c-154.432 0-256 122.752-256 288z"})]))}}),tne=ene,nne=xe({name:"Orange",__name:"orange",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M544 894.72a382.336 382.336 0 0 0 215.936-89.472L577.024 622.272c-10.24 6.016-21.248 10.688-33.024 13.696v258.688zm261.248-134.784A382.336 382.336 0 0 0 894.656 544H635.968c-3.008 11.776-7.68 22.848-13.696 33.024l182.976 182.912zM894.656 480a382.336 382.336 0 0 0-89.408-215.936L622.272 446.976c6.016 10.24 10.688 21.248 13.696 33.024h258.688zm-134.72-261.248A382.336 382.336 0 0 0 544 129.344v258.688c11.776 3.008 22.848 7.68 33.024 13.696zM480 129.344a382.336 382.336 0 0 0-215.936 89.408l182.912 182.976c10.24-6.016 21.248-10.688 33.024-13.696zm-261.248 134.72A382.336 382.336 0 0 0 129.344 480h258.688c3.008-11.776 7.68-22.848 13.696-33.024zM129.344 544a382.336 382.336 0 0 0 89.408 215.936l182.976-182.912A127.232 127.232 0 0 1 388.032 544zm134.72 261.248A382.336 382.336 0 0 0 480 894.656V635.968a127.232 127.232 0 0 1-33.024-13.696zM512 960a448 448 0 1 1 0-896 448 448 0 0 1 0 896m0-384a64 64 0 1 0 0-128 64 64 0 0 0 0 128"})]))}}),rne=nne,ine=xe({name:"Paperclip",__name:"paperclip",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M602.496 240.448A192 192 0 1 1 874.048 512l-316.8 316.8A256 256 0 0 1 195.2 466.752L602.496 59.456l45.248 45.248L240.448 512A192 192 0 0 0 512 783.552l316.8-316.8a128 128 0 1 0-181.056-181.056L353.6 579.904a32 32 0 1 0 45.248 45.248l294.144-294.144 45.312 45.248L444.096 670.4a96 96 0 1 1-135.744-135.744l294.144-294.208z"})]))}}),sne=ine,one=xe({name:"PartlyCloudy",__name:"partly-cloudy",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M598.4 895.872H328.192a256 256 0 0 1-34.496-510.528A352 352 0 1 1 598.4 895.872m-271.36-64h272.256a288 288 0 1 0-248.512-417.664L335.04 445.44l-34.816 3.584a192 192 0 0 0 26.88 382.848z"}),ae("path",{fill:"currentColor",d:"M139.84 501.888a256 256 0 1 1 417.856-277.12c-17.728 2.176-38.208 8.448-61.504 18.816A192 192 0 1 0 189.12 460.48a6003.84 6003.84 0 0 0-49.28 41.408z"})]))}}),ane=one,lne=xe({name:"Pear",__name:"pear",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M542.336 258.816a443.255 443.255 0 0 0-9.024 25.088 32 32 0 1 1-60.8-20.032l1.088-3.328a162.688 162.688 0 0 0-122.048 131.392l-17.088 102.72-20.736 15.36C256.192 552.704 224 610.88 224 672c0 120.576 126.4 224 288 224s288-103.424 288-224c0-61.12-32.192-119.296-89.728-161.92l-20.736-15.424-17.088-102.72a162.688 162.688 0 0 0-130.112-133.12zm-40.128-66.56c7.936-15.552 16.576-30.08 25.92-43.776 23.296-33.92 49.408-59.776 78.528-77.12a32 32 0 1 1 32.704 55.04c-20.544 12.224-40.064 31.552-58.432 58.304a316.608 316.608 0 0 0-9.792 15.104 226.688 226.688 0 0 1 164.48 181.568l12.8 77.248C819.456 511.36 864 587.392 864 672c0 159.04-157.568 288-352 288S160 831.04 160 672c0-84.608 44.608-160.64 115.584-213.376l12.8-77.248a226.624 226.624 0 0 1 213.76-189.184z"})]))}}),une=lne,cne=xe({name:"PhoneFilled",__name:"phone-filled",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M199.232 125.568 90.624 379.008a32 32 0 0 0 6.784 35.2l512.384 512.384a32 32 0 0 0 35.2 6.784l253.44-108.608a32 32 0 0 0 10.048-52.032L769.6 633.92a32 32 0 0 0-36.928-5.952l-130.176 65.088-271.488-271.552 65.024-130.176a32 32 0 0 0-5.952-36.928L251.2 115.52a32 32 0 0 0-51.968 10.048z"})]))}}),dne=cne,hne=xe({name:"Phone",__name:"phone",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M79.36 432.256 591.744 944.64a32 32 0 0 0 35.2 6.784l253.44-108.544a32 32 0 0 0 9.984-52.032l-153.856-153.92a32 32 0 0 0-36.928-6.016l-69.888 34.944L358.08 394.24l35.008-69.888a32 32 0 0 0-5.952-36.928L233.152 133.568a32 32 0 0 0-52.032 10.048L72.512 397.056a32 32 0 0 0 6.784 35.2zm60.48-29.952 81.536-190.08L325.568 316.48l-24.64 49.216-20.608 41.216 32.576 32.64 271.552 271.552 32.64 32.64 41.216-20.672 49.28-24.576 104.192 104.128-190.08 81.472L139.84 402.304zM512 320v-64a256 256 0 0 1 256 256h-64a192 192 0 0 0-192-192m0-192V64a448 448 0 0 1 448 448h-64a384 384 0 0 0-384-384"})]))}}),fne=hne,pne=xe({name:"PictureFilled",__name:"picture-filled",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M96 896a32 32 0 0 1-32-32V160a32 32 0 0 1 32-32h832a32 32 0 0 1 32 32v704a32 32 0 0 1-32 32zm315.52-228.48-68.928-68.928a32 32 0 0 0-45.248 0L128 768.064h778.688l-242.112-290.56a32 32 0 0 0-49.216 0L458.752 665.408a32 32 0 0 1-47.232 2.112M256 384a96 96 0 1 0 192.064-.064A96 96 0 0 0 256 384"})]))}}),gO=pne,mne=xe({name:"PictureRounded",__name:"picture-rounded",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M512 128a384 384 0 1 0 0 768 384 384 0 0 0 0-768m0-64a448 448 0 1 1 0 896 448 448 0 0 1 0-896"}),ae("path",{fill:"currentColor",d:"M640 288q64 0 64 64t-64 64q-64 0-64-64t64-64M214.656 790.656l-45.312-45.312 185.664-185.6a96 96 0 0 1 123.712-10.24l138.24 98.688a32 32 0 0 0 39.872-2.176L906.688 422.4l42.624 47.744L699.52 693.696a96 96 0 0 1-119.808 6.592l-138.24-98.752a32 32 0 0 0-41.152 3.456l-185.664 185.6z"})]))}}),gne=mne,_ne=xe({name:"Picture",__name:"picture",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M160 160v704h704V160zm-32-64h768a32 32 0 0 1 32 32v768a32 32 0 0 1-32 32H128a32 32 0 0 1-32-32V128a32 32 0 0 1 32-32"}),ae("path",{fill:"currentColor",d:"M384 288q64 0 64 64t-64 64q-64 0-64-64t64-64M185.408 876.992l-50.816-38.912L350.72 556.032a96 96 0 0 1 134.592-17.856l1.856 1.472 122.88 99.136a32 32 0 0 0 44.992-4.864l216-269.888 49.92 39.936-215.808 269.824-.256.32a96 96 0 0 1-135.04 14.464l-122.88-99.072-.64-.512a32 32 0 0 0-44.8 5.952z"})]))}}),vne=_ne,yne=xe({name:"PieChart",__name:"pie-chart",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M448 68.48v64.832A384.128 384.128 0 0 0 512 896a384.128 384.128 0 0 0 378.688-320h64.768A448.128 448.128 0 0 1 64 512 448.128 448.128 0 0 1 448 68.48z"}),ae("path",{fill:"currentColor",d:"M576 97.28V448h350.72A384.064 384.064 0 0 0 576 97.28zM512 64V33.152A448 448 0 0 1 990.848 512H512z"})]))}}),bne=yne,xne=xe({name:"Place",__name:"place",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M512 512a192 192 0 1 0 0-384 192 192 0 0 0 0 384m0 64a256 256 0 1 1 0-512 256 256 0 0 1 0 512"}),ae("path",{fill:"currentColor",d:"M512 512a32 32 0 0 1 32 32v256a32 32 0 1 1-64 0V544a32 32 0 0 1 32-32"}),ae("path",{fill:"currentColor",d:"M384 649.088v64.96C269.76 732.352 192 771.904 192 800c0 37.696 139.904 96 320 96s320-58.304 320-96c0-28.16-77.76-67.648-192-85.952v-64.96C789.12 671.04 896 730.368 896 800c0 88.32-171.904 160-384 160s-384-71.68-384-160c0-69.696 106.88-128.96 256-150.912"})]))}}),wne=xne,Sne=xe({name:"Platform",__name:"platform",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M448 832v-64h128v64h192v64H256v-64zM128 704V128h768v576z"})]))}}),Cne=Sne,Ene=xe({name:"Plus",__name:"plus",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M480 480V128a32 32 0 0 1 64 0v352h352a32 32 0 1 1 0 64H544v352a32 32 0 1 1-64 0V544H128a32 32 0 0 1 0-64z"})]))}}),jS=Ene,Tne=xe({name:"Pointer",__name:"pointer",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M511.552 128c-35.584 0-64.384 28.8-64.384 64.448v516.48L274.048 570.88a94.272 94.272 0 0 0-112.896-3.456 44.416 44.416 0 0 0-8.96 62.208L332.8 870.4A64 64 0 0 0 384 896h512V575.232a64 64 0 0 0-45.632-61.312l-205.952-61.76A96 96 0 0 1 576 360.192V192.448C576 156.8 547.2 128 511.552 128M359.04 556.8l24.128 19.2V192.448a128.448 128.448 0 1 1 256.832 0v167.744a32 32 0 0 0 22.784 30.656l206.016 61.76A128 128 0 0 1 960 575.232V896a64 64 0 0 1-64 64H384a128 128 0 0 1-102.4-51.2L101.056 668.032A108.416 108.416 0 0 1 128 512.512a158.272 158.272 0 0 1 185.984 8.32z"})]))}}),Ine=Tne,kne=xe({name:"Position",__name:"position",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"m249.6 417.088 319.744 43.072 39.168 310.272L845.12 178.88 249.6 417.088zm-129.024 47.168a32 32 0 0 1-7.68-61.44l777.792-311.04a32 32 0 0 1 41.6 41.6l-310.336 775.68a32 32 0 0 1-61.44-7.808L512 516.992l-391.424-52.736z"})]))}}),Mne=kne,Ane=xe({name:"Postcard",__name:"postcard",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M160 224a32 32 0 0 0-32 32v512a32 32 0 0 0 32 32h704a32 32 0 0 0 32-32V256a32 32 0 0 0-32-32zm0-64h704a96 96 0 0 1 96 96v512a96 96 0 0 1-96 96H160a96 96 0 0 1-96-96V256a96 96 0 0 1 96-96"}),ae("path",{fill:"currentColor",d:"M704 320a64 64 0 1 1 0 128 64 64 0 0 1 0-128M288 448h256q32 0 32 32t-32 32H288q-32 0-32-32t32-32m0 128h256q32 0 32 32t-32 32H288q-32 0-32-32t32-32"})]))}}),Rne=Ane,Pne=xe({name:"Pouring",__name:"pouring",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"m739.328 291.328-35.2-6.592-12.8-33.408a192.064 192.064 0 0 0-365.952 23.232l-9.92 40.896-41.472 7.04a176.32 176.32 0 0 0-146.24 173.568c0 97.28 78.72 175.936 175.808 175.936h400a192 192 0 0 0 35.776-380.672zM959.552 480a256 256 0 0 1-256 256h-400A239.808 239.808 0 0 1 63.744 496.192a240.32 240.32 0 0 1 199.488-236.8 256.128 256.128 0 0 1 487.872-30.976A256.064 256.064 0 0 1 959.552 480M224 800a32 32 0 0 1 32 32v96a32 32 0 1 1-64 0v-96a32 32 0 0 1 32-32m192 0a32 32 0 0 1 32 32v96a32 32 0 1 1-64 0v-96a32 32 0 0 1 32-32m192 0a32 32 0 0 1 32 32v96a32 32 0 1 1-64 0v-96a32 32 0 0 1 32-32m192 0a32 32 0 0 1 32 32v96a32 32 0 1 1-64 0v-96a32 32 0 0 1 32-32"})]))}}),Lne=Pne,One=xe({name:"Present",__name:"present",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M480 896V640H192v-64h288V320H192v576zm64 0h288V320H544v256h288v64H544zM128 256h768v672a32 32 0 0 1-32 32H160a32 32 0 0 1-32-32z"}),ae("path",{fill:"currentColor",d:"M96 256h832q32 0 32 32t-32 32H96q-32 0-32-32t32-32"}),ae("path",{fill:"currentColor",d:"M416 256a64 64 0 1 0 0-128 64 64 0 0 0 0 128m0 64a128 128 0 1 1 0-256 128 128 0 0 1 0 256"}),ae("path",{fill:"currentColor",d:"M608 256a64 64 0 1 0 0-128 64 64 0 0 0 0 128m0 64a128 128 0 1 1 0-256 128 128 0 0 1 0 256"})]))}}),Dne=One,zne=xe({name:"PriceTag",__name:"price-tag",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M224 318.336V896h576V318.336L552.512 115.84a64 64 0 0 0-81.024 0zM593.024 66.304l259.2 212.096A32 32 0 0 1 864 303.168V928a32 32 0 0 1-32 32H192a32 32 0 0 1-32-32V303.168a32 32 0 0 1 11.712-24.768l259.2-212.096a128 128 0 0 1 162.112 0z"}),ae("path",{fill:"currentColor",d:"M512 448a64 64 0 1 0 0-128 64 64 0 0 0 0 128m0 64a128 128 0 1 1 0-256 128 128 0 0 1 0 256"})]))}}),Nne=zne,Fne=xe({name:"Printer",__name:"printer",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M256 768H105.024c-14.272 0-19.456-1.472-24.64-4.288a29.056 29.056 0 0 1-12.16-12.096C65.536 746.432 64 741.248 64 727.04V379.072c0-42.816 4.48-58.304 12.8-73.984 8.384-15.616 20.672-27.904 36.288-36.288 15.68-8.32 31.168-12.8 73.984-12.8H256V64h512v192h68.928c42.816 0 58.304 4.48 73.984 12.8 15.616 8.384 27.904 20.672 36.288 36.288 8.32 15.68 12.8 31.168 12.8 73.984v347.904c0 14.272-1.472 19.456-4.288 24.64a29.056 29.056 0 0 1-12.096 12.16c-5.184 2.752-10.368 4.224-24.64 4.224H768v192H256zm64-192v320h384V576zm-64 128V512h512v192h128V379.072c0-29.376-1.408-36.48-5.248-43.776a23.296 23.296 0 0 0-10.048-10.048c-7.232-3.84-14.4-5.248-43.776-5.248H187.072c-29.376 0-36.48 1.408-43.776 5.248a23.296 23.296 0 0 0-10.048 10.048c-3.84 7.232-5.248 14.4-5.248 43.776V704zm64-448h384V128H320zm-64 128h64v64h-64zm128 0h64v64h-64z"})]))}}),Bne=Fne,Vne=xe({name:"Promotion",__name:"promotion",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"m64 448 832-320-128 704-446.08-243.328L832 192 242.816 545.472zm256 512V657.024L512 768z"})]))}}),$ne=Vne,Hne=xe({name:"QuartzWatch",__name:"quartz-watch",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg","xml:space":"preserve",style:{"enable-background":"new 0 0 1024 1024"},viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M422.02 602.01v-.03c-6.68-5.99-14.35-8.83-23.01-8.51-8.67.32-16.17 3.66-22.5 10.02-6.33 6.36-9.5 13.7-9.5 22.02s3 15.82 8.99 22.5c8.68 8.68 19.02 11.35 31.01 8s19.49-10.85 22.5-22.5c3.01-11.65.51-22.15-7.49-31.49zM384 512c0-9.35-3-17.02-8.99-23.01-6-5.99-13.66-8.99-23.01-8.99-9.35 0-17.02 3-23.01 8.99-5.99 6-8.99 13.66-8.99 23.01s3 17.02 8.99 23.01c6 5.99 13.66 8.99 23.01 8.99 9.35 0 17.02-3 23.01-8.99 5.99-6 8.99-13.67 8.99-23.01m6.53-82.49c11.65 3.01 22.15.51 31.49-7.49h.04c5.99-6.68 8.83-14.34 8.51-23.01-.32-8.67-3.66-16.16-10.02-22.5-6.36-6.33-13.7-9.5-22.02-9.5s-15.82 3-22.5 8.99c-8.68 8.69-11.35 19.02-8 31.01 3.35 11.99 10.85 19.49 22.5 22.5zm242.94 0c11.67-3.03 19.01-10.37 22.02-22.02 3.01-11.65.51-22.15-7.49-31.49h.01c-6.68-5.99-14.18-8.99-22.5-8.99s-15.66 3.16-22.02 9.5c-6.36 6.34-9.7 13.84-10.02 22.5-.32 8.66 2.52 16.33 8.51 23.01 9.32 8.02 19.82 10.52 31.49 7.49M512 640c-9.35 0-17.02 3-23.01 8.99-5.99 6-8.99 13.66-8.99 23.01s3 17.02 8.99 23.01c6 5.99 13.67 8.99 23.01 8.99 9.35 0 17.02-3 23.01-8.99 5.99-6 8.99-13.66 8.99-23.01s-3-17.02-8.99-23.01c-6-5.99-13.66-8.99-23.01-8.99m183.01-151.01c-6-5.99-13.66-8.99-23.01-8.99s-17.02 3-23.01 8.99c-5.99 6-8.99 13.66-8.99 23.01s3 17.02 8.99 23.01c6 5.99 13.66 8.99 23.01 8.99s17.02-3 23.01-8.99c5.99-6 8.99-13.67 8.99-23.01 0-9.35-3-17.02-8.99-23.01"}),ae("path",{fill:"currentColor",d:"M832 512c-2-90.67-33.17-166.17-93.5-226.5-20.43-20.42-42.6-37.49-66.5-51.23V64H352v170.26c-23.9 13.74-46.07 30.81-66.5 51.24-60.33 60.33-91.49 135.83-93.5 226.5 2 90.67 33.17 166.17 93.5 226.5 20.43 20.43 42.6 37.5 66.5 51.24V960h320V789.74c23.9-13.74 46.07-30.81 66.5-51.24 60.33-60.34 91.49-135.83 93.5-226.5M416 128h192v78.69c-29.85-9.03-61.85-13.93-96-14.69-34.15.75-66.15 5.65-96 14.68zm192 768H416v-78.68c29.85 9.03 61.85 13.93 96 14.68 34.15-.75 66.15-5.65 96-14.68zm-96-128c-72.66-2.01-132.99-27.01-180.99-75.01S258.01 584.66 256 512c2.01-72.66 27.01-132.99 75.01-180.99S439.34 258.01 512 256c72.66 2.01 132.99 27.01 180.99 75.01S765.99 439.34 768 512c-2.01 72.66-27.01 132.99-75.01 180.99S584.66 765.99 512 768"}),ae("path",{fill:"currentColor",d:"M512 320c-9.35 0-17.02 3-23.01 8.99-5.99 6-8.99 13.66-8.99 23.01 0 9.35 3 17.02 8.99 23.01 6 5.99 13.67 8.99 23.01 8.99 9.35 0 17.02-3 23.01-8.99 5.99-6 8.99-13.66 8.99-23.01 0-9.35-3-17.02-8.99-23.01-6-5.99-13.66-8.99-23.01-8.99m112.99 273.5c-8.66-.32-16.33 2.52-23.01 8.51-7.98 9.32-10.48 19.82-7.49 31.49s10.49 19.17 22.5 22.5 22.35.66 31.01-8v.04c5.99-6.68 8.99-14.18 8.99-22.5s-3.16-15.66-9.5-22.02-13.84-9.7-22.5-10.02"})]))}}),Une=Hne,jne=xe({name:"QuestionFilled",__name:"question-filled",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896m23.744 191.488c-52.096 0-92.928 14.784-123.2 44.352-30.976 29.568-45.76 70.4-45.76 122.496h80.256c0-29.568 5.632-52.8 17.6-68.992 13.376-19.712 35.2-28.864 66.176-28.864 23.936 0 42.944 6.336 56.32 19.712 12.672 13.376 19.712 31.68 19.712 54.912 0 17.6-6.336 34.496-19.008 49.984l-8.448 9.856c-45.76 40.832-73.216 70.4-82.368 89.408-9.856 19.008-14.08 42.24-14.08 68.992v9.856h80.96v-9.856c0-16.896 3.52-31.68 10.56-45.76 6.336-12.672 15.488-24.64 28.16-35.2 33.792-29.568 54.208-48.576 60.544-55.616 16.896-22.528 26.048-51.392 26.048-86.592 0-42.944-14.08-76.736-42.24-101.376-28.16-25.344-65.472-37.312-111.232-37.312zm-12.672 406.208a54.272 54.272 0 0 0-38.72 14.784 49.408 49.408 0 0 0-15.488 38.016c0 15.488 4.928 28.16 15.488 38.016A54.848 54.848 0 0 0 523.072 768c15.488 0 28.16-4.928 38.72-14.784a51.52 51.52 0 0 0 16.192-38.72 51.968 51.968 0 0 0-15.488-38.016 55.936 55.936 0 0 0-39.424-14.784z"})]))}}),_O=jne,Gne=xe({name:"Rank",__name:"rank",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"m186.496 544 41.408 41.344a32 32 0 1 1-45.248 45.312l-96-96a32 32 0 0 1 0-45.312l96-96a32 32 0 1 1 45.248 45.312L186.496 480h290.816V186.432l-41.472 41.472a32 32 0 1 1-45.248-45.184l96-96.128a32 32 0 0 1 45.312 0l96 96.064a32 32 0 0 1-45.248 45.184l-41.344-41.28V480H832l-41.344-41.344a32 32 0 0 1 45.248-45.312l96 96a32 32 0 0 1 0 45.312l-96 96a32 32 0 0 1-45.248-45.312L832 544H541.312v293.44l41.344-41.28a32 32 0 1 1 45.248 45.248l-96 96a32 32 0 0 1-45.312 0l-96-96a32 32 0 1 1 45.312-45.248l41.408 41.408V544H186.496z"})]))}}),qne=Gne,Wne=xe({name:"ReadingLamp",__name:"reading-lamp",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M352 896h320q32 0 32 32t-32 32H352q-32 0-32-32t32-32m-44.672-768-99.52 448h608.384l-99.52-448zm-25.6-64h460.608a32 32 0 0 1 31.232 25.088l113.792 512A32 32 0 0 1 856.128 640H167.872a32 32 0 0 1-31.232-38.912l113.792-512A32 32 0 0 1 281.664 64z"}),ae("path",{fill:"currentColor",d:"M672 576q32 0 32 32v128q0 32-32 32t-32-32V608q0-32 32-32m-192-.064h64V960h-64z"})]))}}),Kne=Wne,Yne=xe({name:"Reading",__name:"reading",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"m512 863.36 384-54.848v-638.72L525.568 222.72a96 96 0 0 1-27.136 0L128 169.792v638.72zM137.024 106.432l370.432 52.928a32 32 0 0 0 9.088 0l370.432-52.928A64 64 0 0 1 960 169.792v638.72a64 64 0 0 1-54.976 63.36l-388.48 55.488a32 32 0 0 1-9.088 0l-388.48-55.488A64 64 0 0 1 64 808.512v-638.72a64 64 0 0 1 73.024-63.36z"}),ae("path",{fill:"currentColor",d:"M480 192h64v704h-64z"})]))}}),Zne=Yne,Xne=xe({name:"RefreshLeft",__name:"refresh-left",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M289.088 296.704h92.992a32 32 0 0 1 0 64H232.96a32 32 0 0 1-32-32V179.712a32 32 0 0 1 64 0v50.56a384 384 0 0 1 643.84 282.88 384 384 0 0 1-383.936 384 384 384 0 0 1-384-384h64a320 320 0 1 0 640 0 320 320 0 0 0-555.712-216.448z"})]))}}),vO=Xne,Jne=xe({name:"RefreshRight",__name:"refresh-right",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M784.512 230.272v-50.56a32 32 0 1 1 64 0v149.056a32 32 0 0 1-32 32H667.52a32 32 0 1 1 0-64h92.992A320 320 0 1 0 524.8 833.152a320 320 0 0 0 320-320h64a384 384 0 0 1-384 384 384 384 0 0 1-384-384 384 384 0 0 1 643.712-282.88z"})]))}}),yO=Jne,Qne=xe({name:"Refresh",__name:"refresh",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M771.776 794.88A384 384 0 0 1 128 512h64a320 320 0 0 0 555.712 216.448H654.72a32 32 0 1 1 0-64h149.056a32 32 0 0 1 32 32v148.928a32 32 0 1 1-64 0v-50.56zM276.288 295.616h92.992a32 32 0 0 1 0 64H220.16a32 32 0 0 1-32-32V178.56a32 32 0 0 1 64 0v50.56A384 384 0 0 1 896.128 512h-64a320 320 0 0 0-555.776-216.384z"})]))}}),ere=Qne,tre=xe({name:"Refrigerator",__name:"refrigerator",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M256 448h512V160a32 32 0 0 0-32-32H288a32 32 0 0 0-32 32zm0 64v352a32 32 0 0 0 32 32h448a32 32 0 0 0 32-32V512zm32-448h448a96 96 0 0 1 96 96v704a96 96 0 0 1-96 96H288a96 96 0 0 1-96-96V160a96 96 0 0 1 96-96m32 224h64v96h-64zm0 288h64v96h-64z"})]))}}),nre=tre,rre=xe({name:"RemoveFilled",__name:"remove-filled",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896M288 512a38.4 38.4 0 0 0 38.4 38.4h371.2a38.4 38.4 0 0 0 0-76.8H326.4A38.4 38.4 0 0 0 288 512"})]))}}),ire=rre,sre=xe({name:"Remove",__name:"remove",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M352 480h320a32 32 0 1 1 0 64H352a32 32 0 0 1 0-64"}),ae("path",{fill:"currentColor",d:"M512 896a384 384 0 1 0 0-768 384 384 0 0 0 0 768m0 64a448 448 0 1 1 0-896 448 448 0 0 1 0 896"})]))}}),ore=sre,are=xe({name:"Right",__name:"right",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M754.752 480H160a32 32 0 1 0 0 64h594.752L521.344 777.344a32 32 0 0 0 45.312 45.312l288-288a32 32 0 0 0 0-45.312l-288-288a32 32 0 1 0-45.312 45.312z"})]))}}),lre=are,ure=xe({name:"ScaleToOriginal",__name:"scale-to-original",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M813.176 180.706a60.235 60.235 0 0 1 60.236 60.235v481.883a60.235 60.235 0 0 1-60.236 60.235H210.824a60.235 60.235 0 0 1-60.236-60.235V240.94a60.235 60.235 0 0 1 60.236-60.235h602.352zm0-60.235H210.824A120.47 120.47 0 0 0 90.353 240.94v481.883a120.47 120.47 0 0 0 120.47 120.47h602.353a120.47 120.47 0 0 0 120.471-120.47V240.94a120.47 120.47 0 0 0-120.47-120.47zm-120.47 180.705a30.118 30.118 0 0 0-30.118 30.118v301.177a30.118 30.118 0 0 0 60.236 0V331.294a30.118 30.118 0 0 0-30.118-30.118zm-361.412 0a30.118 30.118 0 0 0-30.118 30.118v301.177a30.118 30.118 0 1 0 60.236 0V331.294a30.118 30.118 0 0 0-30.118-30.118M512 361.412a30.118 30.118 0 0 0-30.118 30.117v30.118a30.118 30.118 0 0 0 60.236 0V391.53A30.118 30.118 0 0 0 512 361.412M512 512a30.118 30.118 0 0 0-30.118 30.118v30.117a30.118 30.118 0 0 0 60.236 0v-30.117A30.118 30.118 0 0 0 512 512"})]))}}),bO=ure,cre=xe({name:"School",__name:"school",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M224 128v704h576V128zm-32-64h640a32 32 0 0 1 32 32v768a32 32 0 0 1-32 32H192a32 32 0 0 1-32-32V96a32 32 0 0 1 32-32"}),ae("path",{fill:"currentColor",d:"M64 832h896v64H64zm256-640h128v96H320z"}),ae("path",{fill:"currentColor",d:"M384 832h256v-64a128 128 0 1 0-256 0zm128-256a192 192 0 0 1 192 192v128H320V768a192 192 0 0 1 192-192M320 384h128v96H320zm256-192h128v96H576zm0 192h128v96H576z"})]))}}),dre=cre,hre=xe({name:"Scissor",__name:"scissor",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"m512.064 578.368-106.88 152.768a160 160 0 1 1-23.36-78.208L472.96 522.56 196.864 128.256a32 32 0 1 1 52.48-36.736l393.024 561.344a160 160 0 1 1-23.36 78.208l-106.88-152.704zm54.4-189.248 208.384-297.6a32 32 0 0 1 52.48 36.736l-221.76 316.672-39.04-55.808zm-376.32 425.856a96 96 0 1 0 110.144-157.248 96 96 0 0 0-110.08 157.248zm643.84 0a96 96 0 1 0-110.08-157.248 96 96 0 0 0 110.08 157.248"})]))}}),fre=hre,pre=xe({name:"Search",__name:"search",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"m795.904 750.72 124.992 124.928a32 32 0 0 1-45.248 45.248L750.656 795.904a416 416 0 1 1 45.248-45.248zM480 832a352 352 0 1 0 0-704 352 352 0 0 0 0 704"})]))}}),xO=pre,mre=xe({name:"Select",__name:"select",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M77.248 415.04a64 64 0 0 1 90.496 0l226.304 226.304L846.528 188.8a64 64 0 1 1 90.56 90.496l-543.04 543.04-316.8-316.8a64 64 0 0 1 0-90.496z"})]))}}),gre=mre,_re=xe({name:"Sell",__name:"sell",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M704 288h131.072a32 32 0 0 1 31.808 28.8L886.4 512h-64.384l-16-160H704v96a32 32 0 1 1-64 0v-96H384v96a32 32 0 0 1-64 0v-96H217.92l-51.2 512H512v64H131.328a32 32 0 0 1-31.808-35.2l57.6-576a32 32 0 0 1 31.808-28.8H320v-22.336C320 154.688 405.504 64 512 64s192 90.688 192 201.664v22.4zm-64 0v-22.336C640 189.248 582.272 128 512 128c-70.272 0-128 61.248-128 137.664v22.4h256zm201.408 483.84L768 698.496V928a32 32 0 1 1-64 0V698.496l-73.344 73.344a32 32 0 1 1-45.248-45.248l128-128a32 32 0 0 1 45.248 0l128 128a32 32 0 1 1-45.248 45.248z"})]))}}),vre=_re,yre=xe({name:"SemiSelect",__name:"semi-select",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M128 448h768q64 0 64 64t-64 64H128q-64 0-64-64t64-64"})]))}}),bre=yre,xre=xe({name:"Service",__name:"service",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M864 409.6a192 192 0 0 1-37.888 349.44A256.064 256.064 0 0 1 576 960h-96a32 32 0 1 1 0-64h96a192.064 192.064 0 0 0 181.12-128H736a32 32 0 0 1-32-32V416a32 32 0 0 1 32-32h32c10.368 0 20.544.832 30.528 2.432a288 288 0 0 0-573.056 0A193.235 193.235 0 0 1 256 384h32a32 32 0 0 1 32 32v320a32 32 0 0 1-32 32h-32a192 192 0 0 1-96-358.4 352 352 0 0 1 704 0M256 448a128 128 0 1 0 0 256zm640 128a128 128 0 0 0-128-128v256a128 128 0 0 0 128-128"})]))}}),wre=xre,Sre=xe({name:"SetUp",__name:"set-up",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M224 160a64 64 0 0 0-64 64v576a64 64 0 0 0 64 64h576a64 64 0 0 0 64-64V224a64 64 0 0 0-64-64zm0-64h576a128 128 0 0 1 128 128v576a128 128 0 0 1-128 128H224A128 128 0 0 1 96 800V224A128 128 0 0 1 224 96"}),ae("path",{fill:"currentColor",d:"M384 416a64 64 0 1 0 0-128 64 64 0 0 0 0 128m0 64a128 128 0 1 1 0-256 128 128 0 0 1 0 256"}),ae("path",{fill:"currentColor",d:"M480 320h256q32 0 32 32t-32 32H480q-32 0-32-32t32-32m160 416a64 64 0 1 0 0-128 64 64 0 0 0 0 128m0 64a128 128 0 1 1 0-256 128 128 0 0 1 0 256"}),ae("path",{fill:"currentColor",d:"M288 640h256q32 0 32 32t-32 32H288q-32 0-32-32t32-32"})]))}}),Cre=Sre,Ere=xe({name:"Setting",__name:"setting",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M600.704 64a32 32 0 0 1 30.464 22.208l35.2 109.376c14.784 7.232 28.928 15.36 42.432 24.512l112.384-24.192a32 32 0 0 1 34.432 15.36L944.32 364.8a32 32 0 0 1-4.032 37.504l-77.12 85.12a357.12 357.12 0 0 1 0 49.024l77.12 85.248a32 32 0 0 1 4.032 37.504l-88.704 153.6a32 32 0 0 1-34.432 15.296L708.8 803.904c-13.44 9.088-27.648 17.28-42.368 24.512l-35.264 109.376A32 32 0 0 1 600.704 960H423.296a32 32 0 0 1-30.464-22.208L357.696 828.48a351.616 351.616 0 0 1-42.56-24.64l-112.32 24.256a32 32 0 0 1-34.432-15.36L79.68 659.2a32 32 0 0 1 4.032-37.504l77.12-85.248a357.12 357.12 0 0 1 0-48.896l-77.12-85.248A32 32 0 0 1 79.68 364.8l88.704-153.6a32 32 0 0 1 34.432-15.296l112.32 24.256c13.568-9.152 27.776-17.408 42.56-24.64l35.2-109.312A32 32 0 0 1 423.232 64H600.64zm-23.424 64H446.72l-36.352 113.088-24.512 11.968a294.113 294.113 0 0 0-34.816 20.096l-22.656 15.36-116.224-25.088-65.28 113.152 79.68 88.192-1.92 27.136a293.12 293.12 0 0 0 0 40.192l1.92 27.136-79.808 88.192 65.344 113.152 116.224-25.024 22.656 15.296a294.113 294.113 0 0 0 34.816 20.096l24.512 11.968L446.72 896h130.688l36.48-113.152 24.448-11.904a288.282 288.282 0 0 0 34.752-20.096l22.592-15.296 116.288 25.024 65.28-113.152-79.744-88.192 1.92-27.136a293.12 293.12 0 0 0 0-40.256l-1.92-27.136 79.808-88.128-65.344-113.152-116.288 24.96-22.592-15.232a287.616 287.616 0 0 0-34.752-20.096l-24.448-11.904L577.344 128zM512 320a192 192 0 1 1 0 384 192 192 0 0 1 0-384m0 64a128 128 0 1 0 0 256 128 128 0 0 0 0-256"})]))}}),Tre=Ere,Ire=xe({name:"Share",__name:"share",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"m679.872 348.8-301.76 188.608a127.808 127.808 0 0 1 5.12 52.16l279.936 104.96a128 128 0 1 1-22.464 59.904l-279.872-104.96a128 128 0 1 1-16.64-166.272l301.696-188.608a128 128 0 1 1 33.92 54.272z"})]))}}),kre=Ire,Mre=xe({name:"Ship",__name:"ship",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M512 386.88V448h405.568a32 32 0 0 1 30.72 40.768l-76.48 267.968A192 192 0 0 1 687.168 896H336.832a192 192 0 0 1-184.64-139.264L75.648 488.768A32 32 0 0 1 106.368 448H448V117.888a32 32 0 0 1 47.36-28.096l13.888 7.616L512 96v2.88l231.68 126.4a32 32 0 0 1-2.048 57.216zm0-70.272 144.768-65.792L512 171.84zM512 512H148.864l18.24 64H856.96l18.24-64zM185.408 640l28.352 99.2A128 128 0 0 0 336.832 832h350.336a128 128 0 0 0 123.072-92.8l28.352-99.2H185.408"})]))}}),Are=Mre,Rre=xe({name:"Shop",__name:"shop",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M704 704h64v192H256V704h64v64h384zm188.544-152.192C894.528 559.616 896 567.616 896 576a96 96 0 1 1-192 0 96 96 0 1 1-192 0 96 96 0 1 1-192 0 96 96 0 1 1-192 0c0-8.384 1.408-16.384 3.392-24.192L192 128h640z"})]))}}),Pre=Rre,Lre=xe({name:"ShoppingBag",__name:"shopping-bag",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M704 320v96a32 32 0 0 1-32 32h-32V320H384v128h-32a32 32 0 0 1-32-32v-96H192v576h640V320zm-384-64a192 192 0 1 1 384 0h160a32 32 0 0 1 32 32v640a32 32 0 0 1-32 32H160a32 32 0 0 1-32-32V288a32 32 0 0 1 32-32zm64 0h256a128 128 0 1 0-256 0"}),ae("path",{fill:"currentColor",d:"M192 704h640v64H192z"})]))}}),Ore=Lre,Dre=xe({name:"ShoppingCartFull",__name:"shopping-cart-full",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M432 928a48 48 0 1 1 0-96 48 48 0 0 1 0 96m320 0a48 48 0 1 1 0-96 48 48 0 0 1 0 96M96 128a32 32 0 0 1 0-64h160a32 32 0 0 1 31.36 25.728L320.64 256H928a32 32 0 0 1 31.296 38.72l-96 448A32 32 0 0 1 832 768H384a32 32 0 0 1-31.36-25.728L229.76 128zm314.24 576h395.904l82.304-384H333.44l76.8 384z"}),ae("path",{fill:"currentColor",d:"M699.648 256 608 145.984 516.352 256h183.296zm-140.8-151.04a64 64 0 0 1 98.304 0L836.352 320H379.648l179.2-215.04"})]))}}),zre=Dre,Nre=xe({name:"ShoppingCart",__name:"shopping-cart",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M432 928a48 48 0 1 1 0-96 48 48 0 0 1 0 96m320 0a48 48 0 1 1 0-96 48 48 0 0 1 0 96M96 128a32 32 0 0 1 0-64h160a32 32 0 0 1 31.36 25.728L320.64 256H928a32 32 0 0 1 31.296 38.72l-96 448A32 32 0 0 1 832 768H384a32 32 0 0 1-31.36-25.728L229.76 128zm314.24 576h395.904l82.304-384H333.44l76.8 384z"})]))}}),Fre=Nre,Bre=xe({name:"ShoppingTrolley",__name:"shopping-trolley",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg","xml:space":"preserve",style:{"enable-background":"new 0 0 1024 1024"},viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M368 833c-13.3 0-24.5 4.5-33.5 13.5S321 866.7 321 880s4.5 24.5 13.5 33.5 20.2 13.8 33.5 14.5c13.3-.7 24.5-5.5 33.5-14.5S415 893.3 415 880s-4.5-24.5-13.5-33.5S381.3 833 368 833m439-193c7.4 0 13.8-2.2 19.5-6.5S836 623.3 838 616l112-448c2-10-.2-19.2-6.5-27.5S929 128 919 128H96c-9.3 0-17 3-23 9s-9 13.7-9 23 3 17 9 23 13.7 9 23 9h96v576h672c9.3 0 17-3 23-9s9-13.7 9-23-3-17-9-23-13.7-9-23-9H256v-64zM256 192h622l-96 384H256zm432 641c-13.3 0-24.5 4.5-33.5 13.5S641 866.7 641 880s4.5 24.5 13.5 33.5 20.2 13.8 33.5 14.5c13.3-.7 24.5-5.5 33.5-14.5S735 893.3 735 880s-4.5-24.5-13.5-33.5S701.3 833 688 833"})]))}}),Vre=Bre,$re=xe({name:"Smoking",__name:"smoking",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M256 576v128h640V576zm-32-64h704a32 32 0 0 1 32 32v192a32 32 0 0 1-32 32H224a32 32 0 0 1-32-32V544a32 32 0 0 1 32-32"}),ae("path",{fill:"currentColor",d:"M704 576h64v128h-64zM256 64h64v320h-64zM128 192h64v192h-64zM64 512h64v256H64z"})]))}}),Hre=$re,Ure=xe({name:"Soccer",__name:"soccer",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M418.496 871.04 152.256 604.8c-16.512 94.016-2.368 178.624 42.944 224 44.928 44.928 129.344 58.752 223.296 42.24m72.32-18.176a573.056 573.056 0 0 0 224.832-137.216 573.12 573.12 0 0 0 137.216-224.832L533.888 171.84a578.56 578.56 0 0 0-227.52 138.496A567.68 567.68 0 0 0 170.432 532.48l320.384 320.384zM871.04 418.496c16.512-93.952 2.688-178.368-42.24-223.296-44.544-44.544-128.704-58.048-222.592-41.536zM149.952 874.048c-112.96-112.96-88.832-408.96 111.168-608.96C461.056 65.152 760.96 36.928 874.048 149.952c113.024 113.024 86.784 411.008-113.152 610.944-199.936 199.936-497.92 226.112-610.944 113.152m452.544-497.792 22.656-22.656a32 32 0 0 1 45.248 45.248l-22.656 22.656 45.248 45.248A32 32 0 1 1 647.744 512l-45.248-45.248L557.248 512l45.248 45.248a32 32 0 1 1-45.248 45.248L512 557.248l-45.248 45.248L512 647.744a32 32 0 1 1-45.248 45.248l-45.248-45.248-22.656 22.656a32 32 0 1 1-45.248-45.248l22.656-22.656-45.248-45.248A32 32 0 1 1 376.256 512l45.248 45.248L466.752 512l-45.248-45.248a32 32 0 1 1 45.248-45.248L512 466.752l45.248-45.248L512 376.256a32 32 0 0 1 45.248-45.248l45.248 45.248z"})]))}}),jre=Ure,Gre=xe({name:"SoldOut",__name:"sold-out",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M704 288h131.072a32 32 0 0 1 31.808 28.8L886.4 512h-64.384l-16-160H704v96a32 32 0 1 1-64 0v-96H384v96a32 32 0 0 1-64 0v-96H217.92l-51.2 512H512v64H131.328a32 32 0 0 1-31.808-35.2l57.6-576a32 32 0 0 1 31.808-28.8H320v-22.336C320 154.688 405.504 64 512 64s192 90.688 192 201.664v22.4zm-64 0v-22.336C640 189.248 582.272 128 512 128c-70.272 0-128 61.248-128 137.664v22.4h256zm201.408 476.16a32 32 0 1 1 45.248 45.184l-128 128a32 32 0 0 1-45.248 0l-128-128a32 32 0 1 1 45.248-45.248L704 837.504V608a32 32 0 1 1 64 0v229.504l73.408-73.408z"})]))}}),qre=Gre,Wre=xe({name:"SortDown",__name:"sort-down",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M576 96v709.568L333.312 562.816A32 32 0 1 0 288 608l297.408 297.344A32 32 0 0 0 640 882.688V96a32 32 0 0 0-64 0"})]))}}),wO=Wre,Kre=xe({name:"SortUp",__name:"sort-up",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M384 141.248V928a32 32 0 1 0 64 0V218.56l242.688 242.688A32 32 0 1 0 736 416L438.592 118.656A32 32 0 0 0 384 141.248"})]))}}),SO=Kre,Yre=xe({name:"Sort",__name:"sort",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M384 96a32 32 0 0 1 64 0v786.752a32 32 0 0 1-54.592 22.656L95.936 608a32 32 0 0 1 0-45.312h.128a32 32 0 0 1 45.184 0L384 805.632zm192 45.248a32 32 0 0 1 54.592-22.592L928.064 416a32 32 0 0 1 0 45.312h-.128a32 32 0 0 1-45.184 0L640 218.496V928a32 32 0 1 1-64 0V141.248z"})]))}}),Zre=Yre,Xre=xe({name:"Stamp",__name:"stamp",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M624 475.968V640h144a128 128 0 0 1 128 128H128a128 128 0 0 1 128-128h144V475.968a192 192 0 1 1 224 0M128 896v-64h768v64z"})]))}}),Jre=Xre,Qre=xe({name:"StarFilled",__name:"star-filled",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M283.84 867.84 512 747.776l228.16 119.936a6.4 6.4 0 0 0 9.28-6.72l-43.52-254.08 184.512-179.904a6.4 6.4 0 0 0-3.52-10.88l-255.104-37.12L517.76 147.904a6.4 6.4 0 0 0-11.52 0L392.192 379.072l-255.104 37.12a6.4 6.4 0 0 0-3.52 10.88L318.08 606.976l-43.584 254.08a6.4 6.4 0 0 0 9.28 6.72z"})]))}}),Q_=Qre,eie=xe({name:"Star",__name:"star",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"m512 747.84 228.16 119.936a6.4 6.4 0 0 0 9.28-6.72l-43.52-254.08 184.512-179.904a6.4 6.4 0 0 0-3.52-10.88l-255.104-37.12L517.76 147.904a6.4 6.4 0 0 0-11.52 0L392.192 379.072l-255.104 37.12a6.4 6.4 0 0 0-3.52 10.88L318.08 606.976l-43.584 254.08a6.4 6.4 0 0 0 9.28 6.72zM313.6 924.48a70.4 70.4 0 0 1-102.144-74.24l37.888-220.928L88.96 472.96A70.4 70.4 0 0 1 128 352.896l221.76-32.256 99.2-200.96a70.4 70.4 0 0 1 126.208 0l99.2 200.96 221.824 32.256a70.4 70.4 0 0 1 39.04 120.064L774.72 629.376l37.888 220.928a70.4 70.4 0 0 1-102.144 74.24L512 820.096l-198.4 104.32z"})]))}}),CO=eie,tie=xe({name:"Stopwatch",__name:"stopwatch",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M512 896a384 384 0 1 0 0-768 384 384 0 0 0 0 768m0 64a448 448 0 1 1 0-896 448 448 0 0 1 0 896"}),ae("path",{fill:"currentColor",d:"M672 234.88c-39.168 174.464-80 298.624-122.688 372.48-64 110.848-202.624 30.848-138.624-80C453.376 453.44 540.48 355.968 672 234.816z"})]))}}),nie=tie,rie=xe({name:"SuccessFilled",__name:"success-filled",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896m-55.808 536.384-99.52-99.584a38.4 38.4 0 1 0-54.336 54.336l126.72 126.72a38.272 38.272 0 0 0 54.336 0l262.4-262.464a38.4 38.4 0 1 0-54.272-54.336z"})]))}}),GS=rie,iie=xe({name:"Sugar",__name:"sugar",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"m801.728 349.184 4.48 4.48a128 128 0 0 1 0 180.992L534.656 806.144a128 128 0 0 1-181.056 0l-4.48-4.48-19.392 109.696a64 64 0 0 1-108.288 34.176L78.464 802.56a64 64 0 0 1 34.176-108.288l109.76-19.328-4.544-4.544a128 128 0 0 1 0-181.056l271.488-271.488a128 128 0 0 1 181.056 0l4.48 4.48 19.392-109.504a64 64 0 0 1 108.352-34.048l142.592 143.04a64 64 0 0 1-34.24 108.16l-109.248 19.2zm-548.8 198.72h447.168v2.24l60.8-60.8a63.808 63.808 0 0 0 18.752-44.416h-426.88l-89.664 89.728a64.064 64.064 0 0 0-10.24 13.248zm0 64c2.752 4.736 6.144 9.152 10.176 13.248l135.744 135.744a64 64 0 0 0 90.496 0L638.4 611.904zm490.048-230.976L625.152 263.104a64 64 0 0 0-90.496 0L416.768 380.928zM123.712 757.312l142.976 142.976 24.32-137.6a25.6 25.6 0 0 0-29.696-29.632l-137.6 24.256zm633.6-633.344-24.32 137.472a25.6 25.6 0 0 0 29.632 29.632l137.28-24.064-142.656-143.04z"})]))}}),sie=iie,oie=xe({name:"SuitcaseLine",__name:"suitcase-line",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg","xml:space":"preserve",style:{"enable-background":"new 0 0 1024 1024"},viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M922.5 229.5c-24.32-24.34-54.49-36.84-90.5-37.5H704v-64c-.68-17.98-7.02-32.98-19.01-44.99S658.01 64.66 640 64H384c-17.98.68-32.98 7.02-44.99 19.01S320.66 110 320 128v64H192c-35.99.68-66.16 13.18-90.5 37.5C77.16 253.82 64.66 283.99 64 320v448c.68 35.99 13.18 66.16 37.5 90.5s54.49 36.84 90.5 37.5h640c35.99-.68 66.16-13.18 90.5-37.5s36.84-54.49 37.5-90.5V320c-.68-35.99-13.18-66.16-37.5-90.5M384 128h256v64H384zM256 832h-64c-17.98-.68-32.98-7.02-44.99-19.01S128.66 786.01 128 768V448h128zm448 0H320V448h384zm192-64c-.68 17.98-7.02 32.98-19.01 44.99S850.01 831.34 832 832h-64V448h128zm0-384H128v-64c.69-17.98 7.02-32.98 19.01-44.99S173.99 256.66 192 256h640c17.98.69 32.98 7.02 44.99 19.01S895.34 301.99 896 320z"})]))}}),aie=oie,lie=xe({name:"Suitcase",__name:"suitcase",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M128 384h768v-64a64 64 0 0 0-64-64H192a64 64 0 0 0-64 64zm0 64v320a64 64 0 0 0 64 64h640a64 64 0 0 0 64-64V448zm64-256h640a128 128 0 0 1 128 128v448a128 128 0 0 1-128 128H192A128 128 0 0 1 64 768V320a128 128 0 0 1 128-128"}),ae("path",{fill:"currentColor",d:"M384 128v64h256v-64zm0-64h256a64 64 0 0 1 64 64v64a64 64 0 0 1-64 64H384a64 64 0 0 1-64-64v-64a64 64 0 0 1 64-64"})]))}}),uie=lie,cie=xe({name:"Sunny",__name:"sunny",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M512 704a192 192 0 1 0 0-384 192 192 0 0 0 0 384m0 64a256 256 0 1 1 0-512 256 256 0 0 1 0 512m0-704a32 32 0 0 1 32 32v64a32 32 0 0 1-64 0V96a32 32 0 0 1 32-32m0 768a32 32 0 0 1 32 32v64a32 32 0 1 1-64 0v-64a32 32 0 0 1 32-32M195.2 195.2a32 32 0 0 1 45.248 0l45.248 45.248a32 32 0 1 1-45.248 45.248L195.2 240.448a32 32 0 0 1 0-45.248zm543.104 543.104a32 32 0 0 1 45.248 0l45.248 45.248a32 32 0 0 1-45.248 45.248l-45.248-45.248a32 32 0 0 1 0-45.248M64 512a32 32 0 0 1 32-32h64a32 32 0 0 1 0 64H96a32 32 0 0 1-32-32m768 0a32 32 0 0 1 32-32h64a32 32 0 1 1 0 64h-64a32 32 0 0 1-32-32M195.2 828.8a32 32 0 0 1 0-45.248l45.248-45.248a32 32 0 0 1 45.248 45.248L240.448 828.8a32 32 0 0 1-45.248 0zm543.104-543.104a32 32 0 0 1 0-45.248l45.248-45.248a32 32 0 0 1 45.248 45.248l-45.248 45.248a32 32 0 0 1-45.248 0"})]))}}),die=cie,hie=xe({name:"Sunrise",__name:"sunrise",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M32 768h960a32 32 0 1 1 0 64H32a32 32 0 1 1 0-64m129.408-96a352 352 0 0 1 701.184 0h-64.32a288 288 0 0 0-572.544 0h-64.32zM512 128a32 32 0 0 1 32 32v96a32 32 0 0 1-64 0v-96a32 32 0 0 1 32-32m407.296 168.704a32 32 0 0 1 0 45.248l-67.84 67.84a32 32 0 1 1-45.248-45.248l67.84-67.84a32 32 0 0 1 45.248 0zm-814.592 0a32 32 0 0 1 45.248 0l67.84 67.84a32 32 0 1 1-45.248 45.248l-67.84-67.84a32 32 0 0 1 0-45.248"})]))}}),fie=hie,pie=xe({name:"Sunset",__name:"sunset",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M82.56 640a448 448 0 1 1 858.88 0h-67.2a384 384 0 1 0-724.288 0zM32 704h960q32 0 32 32t-32 32H32q-32 0-32-32t32-32m256 128h448q32 0 32 32t-32 32H288q-32 0-32-32t32-32"})]))}}),mie=pie,gie=xe({name:"SwitchButton",__name:"switch-button",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M352 159.872V230.4a352 352 0 1 0 320 0v-70.528A416.128 416.128 0 0 1 512 960a416 416 0 0 1-160-800.128z"}),ae("path",{fill:"currentColor",d:"M512 64q32 0 32 32v320q0 32-32 32t-32-32V96q0-32 32-32"})]))}}),_ie=gie,vie=xe({name:"SwitchFilled",__name:"switch-filled",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg","xml:space":"preserve",style:{"enable-background":"new 0 0 1024 1024"},viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M247.47 358.4v.04c.07 19.17 7.72 37.53 21.27 51.09s31.92 21.2 51.09 21.27c39.86 0 72.41-32.6 72.41-72.4s-32.6-72.36-72.41-72.36-72.36 32.55-72.36 72.36z"}),ae("path",{fill:"currentColor",d:"M492.38 128H324.7c-52.16 0-102.19 20.73-139.08 57.61a196.655 196.655 0 0 0-57.61 139.08V698.7c-.01 25.84 5.08 51.42 14.96 75.29s24.36 45.56 42.63 63.83 39.95 32.76 63.82 42.65a196.67 196.67 0 0 0 75.28 14.98h167.68c3.03 0 5.46-2.43 5.46-5.42V133.42c.6-2.99-1.83-5.42-5.46-5.42zm-56.11 705.88H324.7c-17.76.13-35.36-3.33-51.75-10.18s-31.22-16.94-43.61-29.67c-25.3-25.35-39.81-59.1-39.81-95.32V324.69c-.13-17.75 3.33-35.35 10.17-51.74a131.695 131.695 0 0 1 29.64-43.62c25.39-25.3 59.14-39.81 95.36-39.81h111.57zm402.12-647.67a196.655 196.655 0 0 0-139.08-57.61H580.48c-3.03 0-4.82 2.43-4.82 4.82v757.16c-.6 2.99 1.79 5.42 5.42 5.42h118.23a196.69 196.69 0 0 0 139.08-57.61A196.655 196.655 0 0 0 896 699.31V325.29a196.69 196.69 0 0 0-57.61-139.08zm-111.3 441.92c-42.83 0-77.82-34.99-77.82-77.82s34.98-77.82 77.82-77.82c42.83 0 77.82 34.99 77.82 77.82s-34.99 77.82-77.82 77.82z"})]))}}),yie=vie,bie=xe({name:"Switch",__name:"switch",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M118.656 438.656a32 32 0 0 1 0-45.248L416 96l4.48-3.776A32 32 0 0 1 461.248 96l3.712 4.48a32.064 32.064 0 0 1-3.712 40.832L218.56 384H928a32 32 0 1 1 0 64H141.248a32 32 0 0 1-22.592-9.344zM64 608a32 32 0 0 1 32-32h786.752a32 32 0 0 1 22.656 54.592L608 928l-4.48 3.776a32.064 32.064 0 0 1-40.832-49.024L805.632 640H96a32 32 0 0 1-32-32"})]))}}),xie=bie,wie=xe({name:"TakeawayBox",__name:"takeaway-box",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M832 384H192v448h640zM96 320h832V128H96zm800 64v480a32 32 0 0 1-32 32H160a32 32 0 0 1-32-32V384H64a32 32 0 0 1-32-32V96a32 32 0 0 1 32-32h896a32 32 0 0 1 32 32v256a32 32 0 0 1-32 32zM416 512h192a32 32 0 0 1 0 64H416a32 32 0 0 1 0-64"})]))}}),Sie=wie,Cie=xe({name:"Ticket",__name:"ticket",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M640 832H64V640a128 128 0 1 0 0-256V192h576v160h64V192h256v192a128 128 0 1 0 0 256v192H704V672h-64zm0-416v192h64V416z"})]))}}),Eie=Cie,Tie=xe({name:"Tickets",__name:"tickets",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M192 128v768h640V128zm-32-64h704a32 32 0 0 1 32 32v832a32 32 0 0 1-32 32H160a32 32 0 0 1-32-32V96a32 32 0 0 1 32-32m160 448h384v64H320zm0-192h192v64H320zm0 384h384v64H320z"})]))}}),Iie=Tie,kie=xe({name:"Timer",__name:"timer",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M512 896a320 320 0 1 0 0-640 320 320 0 0 0 0 640m0 64a384 384 0 1 1 0-768 384 384 0 0 1 0 768"}),ae("path",{fill:"currentColor",d:"M512 320a32 32 0 0 1 32 32l-.512 224a32 32 0 1 1-64 0L480 352a32 32 0 0 1 32-32"}),ae("path",{fill:"currentColor",d:"M448 576a64 64 0 1 0 128 0 64 64 0 1 0-128 0m96-448v128h-64V128h-96a32 32 0 0 1 0-64h256a32 32 0 1 1 0 64z"})]))}}),Mie=kie,Aie=xe({name:"ToiletPaper",__name:"toilet-paper",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M595.2 128H320a192 192 0 0 0-192 192v576h384V352c0-90.496 32.448-171.2 83.2-224M736 64c123.712 0 224 128.96 224 288S859.712 640 736 640H576v320H64V320A256 256 0 0 1 320 64zM576 352v224h160c84.352 0 160-97.28 160-224s-75.648-224-160-224-160 97.28-160 224"}),ae("path",{fill:"currentColor",d:"M736 448c-35.328 0-64-43.008-64-96s28.672-96 64-96 64 43.008 64 96-28.672 96-64 96"})]))}}),Rie=Aie,Pie=xe({name:"Tools",__name:"tools",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M764.416 254.72a351.68 351.68 0 0 1 86.336 149.184H960v192.064H850.752a351.68 351.68 0 0 1-86.336 149.312l54.72 94.72-166.272 96-54.592-94.72a352.64 352.64 0 0 1-172.48 0L371.136 936l-166.272-96 54.72-94.72a351.68 351.68 0 0 1-86.336-149.312H64v-192h109.248a351.68 351.68 0 0 1 86.336-149.312L204.8 160l166.208-96h.192l54.656 94.592a352.64 352.64 0 0 1 172.48 0L652.8 64h.128L819.2 160l-54.72 94.72zM704 499.968a192 192 0 1 0-384 0 192 192 0 0 0 384 0"})]))}}),Lie=Pie,Oie=xe({name:"TopLeft",__name:"top-left",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M256 256h416a32 32 0 1 0 0-64H224a32 32 0 0 0-32 32v448a32 32 0 0 0 64 0z"}),ae("path",{fill:"currentColor",d:"M246.656 201.344a32 32 0 0 0-45.312 45.312l544 544a32 32 0 0 0 45.312-45.312l-544-544z"})]))}}),Die=Oie,zie=xe({name:"TopRight",__name:"top-right",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M768 256H353.6a32 32 0 1 1 0-64H800a32 32 0 0 1 32 32v448a32 32 0 0 1-64 0z"}),ae("path",{fill:"currentColor",d:"M777.344 201.344a32 32 0 0 1 45.312 45.312l-544 544a32 32 0 0 1-45.312-45.312l544-544z"})]))}}),Nie=zie,Fie=xe({name:"Top",__name:"top",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M572.235 205.282v600.365a30.118 30.118 0 1 1-60.235 0V205.282L292.382 438.633a28.913 28.913 0 0 1-42.646 0 33.43 33.43 0 0 1 0-45.236l271.058-288.045a28.913 28.913 0 0 1 42.647 0L834.5 393.397a33.43 33.43 0 0 1 0 45.176 28.913 28.913 0 0 1-42.647 0l-219.618-233.23z"})]))}}),Bie=Fie,Vie=xe({name:"TrendCharts",__name:"trend-charts",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M128 896V128h768v768zm291.712-327.296 128 102.4 180.16-201.792-47.744-42.624-139.84 156.608-128-102.4-180.16 201.792 47.744 42.624 139.84-156.608zM816 352a48 48 0 1 0-96 0 48 48 0 0 0 96 0"})]))}}),$ie=Vie,Hie=xe({name:"TrophyBase",__name:"trophy-base",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg","xml:space":"preserve",style:{"enable-background":"new 0 0 1024 1024"},viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M918.4 201.6c-6.4-6.4-12.8-9.6-22.4-9.6H768V96c0-9.6-3.2-16-9.6-22.4C752 67.2 745.6 64 736 64H288c-9.6 0-16 3.2-22.4 9.6C259.2 80 256 86.4 256 96v96H128c-9.6 0-16 3.2-22.4 9.6-6.4 6.4-9.6 16-9.6 22.4 3.2 108.8 25.6 185.6 64 224 34.4 34.4 77.56 55.65 127.65 61.99 10.91 20.44 24.78 39.25 41.95 56.41 40.86 40.86 91 65.47 150.4 71.9V768h-96c-9.6 0-16 3.2-22.4 9.6-6.4 6.4-9.6 12.8-9.6 22.4s3.2 16 9.6 22.4c6.4 6.4 12.8 9.6 22.4 9.6h256c9.6 0 16-3.2 22.4-9.6 6.4-6.4 9.6-12.8 9.6-22.4s-3.2-16-9.6-22.4c-6.4-6.4-12.8-9.6-22.4-9.6h-96V637.26c59.4-7.71 109.54-30.01 150.4-70.86 17.2-17.2 31.51-36.06 42.81-56.55 48.93-6.51 90.02-27.7 126.79-61.85 38.4-38.4 60.8-112 64-224 0-6.4-3.2-16-9.6-22.4zM256 438.4c-19.2-6.4-35.2-19.2-51.2-35.2-22.4-22.4-35.2-70.4-41.6-147.2H256zm390.4 80C608 553.6 566.4 576 512 576s-99.2-19.2-134.4-57.6C342.4 480 320 438.4 320 384V128h384v256c0 54.4-19.2 99.2-57.6 134.4m172.8-115.2c-16 16-32 25.6-51.2 35.2V256h92.8c-6.4 76.8-19.2 124.8-41.6 147.2zM768 896H256c-9.6 0-16 3.2-22.4 9.6-6.4 6.4-9.6 12.8-9.6 22.4s3.2 16 9.6 22.4c6.4 6.4 12.8 9.6 22.4 9.6h512c9.6 0 16-3.2 22.4-9.6 6.4-6.4 9.6-12.8 9.6-22.4s-3.2-16-9.6-22.4c-6.4-6.4-12.8-9.6-22.4-9.6"})]))}}),Uie=Hie,jie=xe({name:"Trophy",__name:"trophy",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M480 896V702.08A256.256 256.256 0 0 1 264.064 512h-32.64a96 96 0 0 1-91.968-68.416L93.632 290.88a76.8 76.8 0 0 1 73.6-98.88H256V96a32 32 0 0 1 32-32h448a32 32 0 0 1 32 32v96h88.768a76.8 76.8 0 0 1 73.6 98.88L884.48 443.52A96 96 0 0 1 792.576 512h-32.64A256.256 256.256 0 0 1 544 702.08V896h128a32 32 0 1 1 0 64H352a32 32 0 1 1 0-64zm224-448V128H320v320a192 192 0 1 0 384 0m64 0h24.576a32 32 0 0 0 30.656-22.784l45.824-152.768A12.8 12.8 0 0 0 856.768 256H768zm-512 0V256h-88.768a12.8 12.8 0 0 0-12.288 16.448l45.824 152.768A32 32 0 0 0 231.424 448z"})]))}}),Gie=jie,qie=xe({name:"TurnOff",__name:"turn-off",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M329.956 257.138a254.862 254.862 0 0 0 0 509.724h364.088a254.862 254.862 0 0 0 0-509.724zm0-72.818h364.088a327.68 327.68 0 1 1 0 655.36H329.956a327.68 327.68 0 1 1 0-655.36z"}),ae("path",{fill:"currentColor",d:"M329.956 621.227a109.227 109.227 0 1 0 0-218.454 109.227 109.227 0 0 0 0 218.454m0 72.817a182.044 182.044 0 1 1 0-364.088 182.044 182.044 0 0 1 0 364.088"})]))}}),Wie=qie,Kie=xe({name:"Umbrella",__name:"umbrella",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M320 768a32 32 0 1 1 64 0 64 64 0 0 0 128 0V512H64a448 448 0 1 1 896 0H576v256a128 128 0 1 1-256 0m570.688-320a384.128 384.128 0 0 0-757.376 0z"})]))}}),Yie=Kie,Zie=xe({name:"Unlock",__name:"unlock",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M224 448a32 32 0 0 0-32 32v384a32 32 0 0 0 32 32h576a32 32 0 0 0 32-32V480a32 32 0 0 0-32-32zm0-64h576a96 96 0 0 1 96 96v384a96 96 0 0 1-96 96H224a96 96 0 0 1-96-96V480a96 96 0 0 1 96-96"}),ae("path",{fill:"currentColor",d:"M512 544a32 32 0 0 1 32 32v192a32 32 0 1 1-64 0V576a32 32 0 0 1 32-32m178.304-295.296A192.064 192.064 0 0 0 320 320v64h352l96 38.4V448H256V320a256 256 0 0 1 493.76-95.104z"})]))}}),Xie=Zie,Jie=xe({name:"UploadFilled",__name:"upload-filled",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M544 864V672h128L512 480 352 672h128v192H320v-1.6c-5.376.32-10.496 1.6-16 1.6A240 240 0 0 1 64 624c0-123.136 93.12-223.488 212.608-237.248A239.808 239.808 0 0 1 512 192a239.872 239.872 0 0 1 235.456 194.752c119.488 13.76 212.48 114.112 212.48 237.248a240 240 0 0 1-240 240c-5.376 0-10.56-1.28-16-1.6v1.6z"})]))}}),Qie=Jie,ese=xe({name:"Upload",__name:"upload",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M160 832h704a32 32 0 1 1 0 64H160a32 32 0 1 1 0-64m384-578.304V704h-64V247.296L237.248 490.048 192 444.8 508.8 128l316.8 316.8-45.312 45.248z"})]))}}),tse=ese,nse=xe({name:"UserFilled",__name:"user-filled",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M288 320a224 224 0 1 0 448 0 224 224 0 1 0-448 0m544 608H160a32 32 0 0 1-32-32v-96a160 160 0 0 1 160-160h448a160 160 0 0 1 160 160v96a32 32 0 0 1-32 32z"})]))}}),rse=nse,ise=xe({name:"User",__name:"user",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M512 512a192 192 0 1 0 0-384 192 192 0 0 0 0 384m0 64a256 256 0 1 1 0-512 256 256 0 0 1 0 512m320 320v-96a96 96 0 0 0-96-96H288a96 96 0 0 0-96 96v96a32 32 0 1 1-64 0v-96a160 160 0 0 1 160-160h448a160 160 0 0 1 160 160v96a32 32 0 1 1-64 0"})]))}}),sse=ise,ose=xe({name:"Van",__name:"van",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M128.896 736H96a32 32 0 0 1-32-32V224a32 32 0 0 1 32-32h576a32 32 0 0 1 32 32v96h164.544a32 32 0 0 1 31.616 27.136l54.144 352A32 32 0 0 1 922.688 736h-91.52a144 144 0 1 1-286.272 0H415.104a144 144 0 1 1-286.272 0zm23.36-64a143.872 143.872 0 0 1 239.488 0H568.32c17.088-25.6 42.24-45.376 71.744-55.808V256H128v416zm655.488 0h77.632l-19.648-128H704v64.896A144 144 0 0 1 807.744 672m48.128-192-14.72-96H704v96h151.872M688 832a80 80 0 1 0 0-160 80 80 0 0 0 0 160m-416 0a80 80 0 1 0 0-160 80 80 0 0 0 0 160"})]))}}),ase=ose,lse=xe({name:"VideoCameraFilled",__name:"video-camera-filled",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"m768 576 192-64v320l-192-64v96a32 32 0 0 1-32 32H96a32 32 0 0 1-32-32V480a32 32 0 0 1 32-32h640a32 32 0 0 1 32 32zM192 768v64h384v-64zm192-480a160 160 0 0 1 320 0 160 160 0 0 1-320 0m64 0a96 96 0 1 0 192.064-.064A96 96 0 0 0 448 288m-320 32a128 128 0 1 1 256.064.064A128 128 0 0 1 128 320m64 0a64 64 0 1 0 128 0 64 64 0 0 0-128 0"})]))}}),use=lse,cse=xe({name:"VideoCamera",__name:"video-camera",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M704 768V256H128v512zm64-416 192-96v512l-192-96v128a32 32 0 0 1-32 32H96a32 32 0 0 1-32-32V224a32 32 0 0 1 32-32h640a32 32 0 0 1 32 32zm0 71.552v176.896l128 64V359.552zM192 320h192v64H192z"})]))}}),dse=cse,hse=xe({name:"VideoPause",__name:"video-pause",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896m0 832a384 384 0 0 0 0-768 384 384 0 0 0 0 768m-96-544q32 0 32 32v256q0 32-32 32t-32-32V384q0-32 32-32m192 0q32 0 32 32v256q0 32-32 32t-32-32V384q0-32 32-32"})]))}}),fse=hse,pse=xe({name:"VideoPlay",__name:"video-play",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896m0 832a384 384 0 0 0 0-768 384 384 0 0 0 0 768m-48-247.616L668.608 512 464 375.616zm10.624-342.656 249.472 166.336a48 48 0 0 1 0 79.872L474.624 718.272A48 48 0 0 1 400 678.336V345.6a48 48 0 0 1 74.624-39.936z"})]))}}),mse=pse,gse=xe({name:"View",__name:"view",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M512 160c320 0 512 352 512 352S832 864 512 864 0 512 0 512s192-352 512-352m0 64c-225.28 0-384.128 208.064-436.8 288 52.608 79.872 211.456 288 436.8 288 225.28 0 384.128-208.064 436.8-288-52.608-79.872-211.456-288-436.8-288zm0 64a224 224 0 1 1 0 448 224 224 0 0 1 0-448m0 64a160.192 160.192 0 0 0-160 160c0 88.192 71.744 160 160 160s160-71.808 160-160-71.744-160-160-160"})]))}}),EO=gse,_se=xe({name:"WalletFilled",__name:"wallet-filled",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M688 512a112 112 0 1 0 0 224h208v160H128V352h768v160zm32 160h-32a48 48 0 0 1 0-96h32a48 48 0 0 1 0 96m-80-544 128 160H384z"})]))}}),vse=_se,yse=xe({name:"Wallet",__name:"wallet",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M640 288h-64V128H128v704h384v32a32 32 0 0 0 32 32H96a32 32 0 0 1-32-32V96a32 32 0 0 1 32-32h512a32 32 0 0 1 32 32z"}),ae("path",{fill:"currentColor",d:"M128 320v512h768V320zm-32-64h832a32 32 0 0 1 32 32v576a32 32 0 0 1-32 32H96a32 32 0 0 1-32-32V288a32 32 0 0 1 32-32"}),ae("path",{fill:"currentColor",d:"M704 640a64 64 0 1 1 0-128 64 64 0 0 1 0 128"})]))}}),bse=yse,xse=xe({name:"WarnTriangleFilled",__name:"warn-triangle-filled",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg","xml:space":"preserve",style:{"enable-background":"new 0 0 1024 1024"},viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M928.99 755.83 574.6 203.25c-12.89-20.16-36.76-32.58-62.6-32.58s-49.71 12.43-62.6 32.58L95.01 755.83c-12.91 20.12-12.9 44.91.01 65.03 12.92 20.12 36.78 32.51 62.59 32.49h708.78c25.82.01 49.68-12.37 62.59-32.49 12.91-20.12 12.92-44.91.01-65.03M554.67 768h-85.33v-85.33h85.33zm0-426.67v298.66h-85.33V341.32z"})]))}}),wse=xse,Sse=xe({name:"WarningFilled",__name:"warning-filled",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896m0 192a58.432 58.432 0 0 0-58.24 63.744l23.36 256.384a35.072 35.072 0 0 0 69.76 0l23.296-256.384A58.432 58.432 0 0 0 512 256m0 512a51.2 51.2 0 1 0 0-102.4 51.2 51.2 0 0 0 0 102.4"})]))}}),sy=Sse,Cse=xe({name:"Warning",__name:"warning",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896m0 832a384 384 0 0 0 0-768 384 384 0 0 0 0 768m48-176a48 48 0 1 1-96 0 48 48 0 0 1 96 0m-48-464a32 32 0 0 1 32 32v288a32 32 0 0 1-64 0V288a32 32 0 0 1 32-32"})]))}}),Ese=Cse,Tse=xe({name:"Watch",__name:"watch",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M512 768a256 256 0 1 0 0-512 256 256 0 0 0 0 512m0 64a320 320 0 1 1 0-640 320 320 0 0 1 0 640"}),ae("path",{fill:"currentColor",d:"M480 352a32 32 0 0 1 32 32v160a32 32 0 0 1-64 0V384a32 32 0 0 1 32-32"}),ae("path",{fill:"currentColor",d:"M480 512h128q32 0 32 32t-32 32H480q-32 0-32-32t32-32m128-256V128H416v128h-64V64h320v192zM416 768v128h192V768h64v192H352V768z"})]))}}),Ise=Tse,kse=xe({name:"Watermelon",__name:"watermelon",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"m683.072 600.32-43.648 162.816-61.824-16.512 53.248-198.528L576 493.248l-158.4 158.4-45.248-45.248 158.4-158.4-55.616-55.616-198.528 53.248-16.512-61.824 162.816-43.648L282.752 200A384 384 0 0 0 824 741.248zm231.552 141.056a448 448 0 1 1-632-632l632 632"})]))}}),Mse=kse,Ase=xe({name:"WindPower",__name:"wind-power",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M160 64q32 0 32 32v832q0 32-32 32t-32-32V96q0-32 32-32m416 354.624 128-11.584V168.96l-128-11.52v261.12zm-64 5.824V151.552L320 134.08V160h-64V64l616.704 56.064A96 96 0 0 1 960 215.68v144.64a96 96 0 0 1-87.296 95.616L256 512V224h64v217.92zm256-23.232 98.88-8.96A32 32 0 0 0 896 360.32V215.68a32 32 0 0 0-29.12-31.872l-98.88-8.96z"})]))}}),Rse=Ase,Pse=xe({name:"ZoomIn",__name:"zoom-in",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"m795.904 750.72 124.992 124.928a32 32 0 0 1-45.248 45.248L750.656 795.904a416 416 0 1 1 45.248-45.248zM480 832a352 352 0 1 0 0-704 352 352 0 0 0 0 704m-32-384v-96a32 32 0 0 1 64 0v96h96a32 32 0 0 1 0 64h-96v96a32 32 0 0 1-64 0v-96h-96a32 32 0 0 1 0-64z"})]))}}),qS=Pse,Lse=xe({name:"ZoomOut",__name:"zoom-out",setup(e){return(n,s)=>(Z(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"m795.904 750.72 124.992 124.928a32 32 0 0 1-45.248 45.248L750.656 795.904a416 416 0 1 1 45.248-45.248zM480 832a352 352 0 1 0 0-704 352 352 0 0 0 0 704M352 448h256a32 32 0 0 1 0 64H352a32 32 0 0 1 0-64"})]))}}),TO=Lse;const Ose=Object.freeze(Object.defineProperty({__proto__:null,AddLocation:RY,Aim:LY,AlarmClock:DY,Apple:NY,ArrowDown:Ed,ArrowDownBold:BY,ArrowLeft:ph,ArrowLeftBold:HY,ArrowRight:il,ArrowRightBold:GY,ArrowUp:xx,ArrowUpBold:KY,Avatar:XY,Back:oO,Baseball:eZ,Basketball:nZ,Bell:oZ,BellFilled:iZ,Bicycle:lZ,Bottom:pZ,BottomLeft:cZ,BottomRight:hZ,Bowl:gZ,Box:vZ,Briefcase:bZ,Brush:CZ,BrushFilled:wZ,Burger:TZ,Calendar:aO,Camera:RZ,CameraFilled:MZ,CaretBottom:LZ,CaretLeft:DZ,CaretRight:HS,CaretTop:lO,Cellphone:BZ,ChatDotRound:$Z,ChatDotSquare:UZ,ChatLineRound:GZ,ChatLineSquare:WZ,ChatRound:YZ,ChatSquare:XZ,Check:d0,Checked:eX,Cherry:nX,Chicken:iX,ChromeFilled:oX,CircleCheck:wx,CircleCheckFilled:uO,CircleClose:Td,CircleCloseFilled:Sx,CirclePlus:pX,CirclePlusFilled:hX,Clock:US,Close:du,CloseBold:_X,Cloudy:bX,Coffee:CX,CoffeeCup:wX,Coin:TX,ColdDrink:kX,Collection:PX,CollectionTag:AX,Comment:OX,Compass:zX,Connection:FX,Coordinate:VX,CopyDocument:HX,Cpu:jX,CreditCard:qX,Crop:KX,DArrowLeft:mh,DArrowRight:gh,DCaret:JX,DataAnalysis:eJ,DataBoard:nJ,DataLine:iJ,Delete:cO,DeleteFilled:oJ,DeleteLocation:lJ,Dessert:dJ,Discount:fJ,Dish:_J,DishDot:mJ,Document:dO,DocumentAdd:yJ,DocumentChecked:xJ,DocumentCopy:SJ,DocumentDelete:EJ,DocumentRemove:IJ,Download:AJ,Drizzling:PJ,Edit:zJ,EditPen:OJ,Eleme:VJ,ElemeFilled:FJ,ElementPlus:HJ,Expand:jJ,Failed:qJ,Female:KJ,Files:ZJ,Film:JJ,Filter:eQ,Finished:nQ,FirstAidKit:iQ,Flag:oQ,Fold:lQ,Folder:bQ,FolderAdd:cQ,FolderChecked:hQ,FolderDelete:pQ,FolderOpened:gQ,FolderRemove:vQ,Food:wQ,Football:CQ,ForkSpoon:TQ,Fries:kQ,FullScreen:hO,Goblet:NQ,GobletFull:RQ,GobletSquare:DQ,GobletSquareFull:LQ,GoldMedal:BQ,Goods:UQ,GoodsFilled:$Q,Grape:GQ,Grid:WQ,Guide:YQ,Handbag:XQ,Headset:QQ,Help:ree,HelpFilled:tee,Hide:fO,Histogram:oee,HomeFilled:lee,HotWater:cee,House:hee,IceCream:vee,IceCreamRound:pee,IceCreamSquare:gee,IceDrink:bee,IceTea:wee,InfoFilled:Cx,Iphone:Eee,Key:Iee,KnifeFork:Mee,Lightning:Ree,Link:Lee,List:Dee,Loading:gc,Location:Hee,LocationFilled:Fee,LocationInformation:Vee,Lock:jee,Lollipop:qee,MagicStick:Kee,Magnet:Zee,Male:Jee,Management:ete,MapLocation:nte,Medal:ite,Memo:ote,Menu:lte,Message:hte,MessageBox:cte,Mic:pte,Microphone:gte,MilkTea:vte,Minus:pO,Money:xte,Monitor:Ste,Moon:Ite,MoonNight:Ete,More:mO,MoreFilled:X4,MostlyCloudy:Rte,Mouse:Lte,Mug:Dte,Mute:Bte,MuteNotification:Nte,NoSmoking:$te,Notebook:Ute,Notification:Gte,Odometer:Wte,OfficeBuilding:Yte,Open:Xte,Operation:Qte,Opportunity:tne,Orange:rne,Paperclip:sne,PartlyCloudy:ane,Pear:une,Phone:fne,PhoneFilled:dne,Picture:vne,PictureFilled:gO,PictureRounded:gne,PieChart:bne,Place:wne,Platform:Cne,Plus:jS,Pointer:Ine,Position:Mne,Postcard:Rne,Pouring:Lne,Present:Dne,PriceTag:Nne,Printer:Bne,Promotion:$ne,QuartzWatch:Une,QuestionFilled:_O,Rank:qne,Reading:Zne,ReadingLamp:Kne,Refresh:ere,RefreshLeft:vO,RefreshRight:yO,Refrigerator:nre,Remove:ore,RemoveFilled:ire,Right:lre,ScaleToOriginal:bO,School:dre,Scissor:fre,Search:xO,Select:gre,Sell:vre,SemiSelect:bre,Service:wre,SetUp:Cre,Setting:Tre,Share:kre,Ship:Are,Shop:Pre,ShoppingBag:Ore,ShoppingCart:Fre,ShoppingCartFull:zre,ShoppingTrolley:Vre,Smoking:Hre,Soccer:jre,SoldOut:qre,Sort:Zre,SortDown:wO,SortUp:SO,Stamp:Jre,Star:CO,StarFilled:Q_,Stopwatch:nie,SuccessFilled:GS,Sugar:sie,Suitcase:uie,SuitcaseLine:aie,Sunny:die,Sunrise:fie,Sunset:mie,Switch:xie,SwitchButton:_ie,SwitchFilled:yie,TakeawayBox:Sie,Ticket:Eie,Tickets:Iie,Timer:Mie,ToiletPaper:Rie,Tools:Lie,Top:Bie,TopLeft:Die,TopRight:Nie,TrendCharts:$ie,Trophy:Gie,TrophyBase:Uie,TurnOff:Wie,Umbrella:Yie,Unlock:Xie,Upload:tse,UploadFilled:Qie,User:sse,UserFilled:rse,Van:ase,VideoCamera:dse,VideoCameraFilled:use,VideoPause:fse,VideoPlay:mse,View:EO,Wallet:bse,WalletFilled:vse,WarnTriangleFilled:wse,Warning:Ese,WarningFilled:sy,Watch:Ise,Watermelon:Mse,WindPower:Rse,ZoomIn:qS,ZoomOut:TO},Symbol.toStringTag,{value:"Module"})),bs=wt([String,Object,Function]),IO={Close:du},WS={Close:du,SuccessFilled:GS,InfoFilled:Cx,WarningFilled:sy,CircleCloseFilled:Sx},If={success:GS,warning:sy,error:Sx,info:Cx},Ex={validating:gc,success:wx,error:Td},Dse=["light","dark"],zse=bn({title:{type:String,default:""},description:{type:String,default:""},type:{type:String,values:$g(If),default:"info"},closable:{type:Boolean,default:!0},closeText:{type:String,default:""},showIcon:Boolean,center:Boolean,effect:{type:String,values:Dse,default:"light"}}),Nse={close:e=>e instanceof MouseEvent},Fse=xe({name:"ElAlert"}),Bse=xe({...Fse,props:zse,emits:Nse,setup(e,{emit:n}){const s=e,{Close:l}=WS,d=qo(),m=dn("alert"),b=Re(!0),r=se(()=>If[s.type]),E=se(()=>!!(s.description||d.default)),M=A=>{b.value=!1,n("close",A)};return(A,P)=>(Z(),Bt(ha,{name:w(m).b("fade"),persisted:""},{default:mt(()=>[Wr(ae("div",{class:ge([w(m).b(),w(m).m(A.type),w(m).is("center",A.center),w(m).is(A.effect)]),role:"alert"},[A.showIcon&&(A.$slots.icon||w(r))?(Z(),Bt(w(rr),{key:0,class:ge([w(m).e("icon"),{[w(m).is("big")]:w(E)}])},{default:mt(()=>[It(A.$slots,"icon",{},()=>[(Z(),Bt(si(w(r))))])]),_:3},8,["class"])):At("v-if",!0),ae("div",{class:ge(w(m).e("content"))},[A.title||A.$slots.title?(Z(),ue("span",{key:0,class:ge([w(m).e("title"),{"with-description":w(E)}])},[It(A.$slots,"title",{},()=>[ei(gn(A.title),1)])],2)):At("v-if",!0),w(E)?(Z(),ue("p",{key:1,class:ge(w(m).e("description"))},[It(A.$slots,"default",{},()=>[ei(gn(A.description),1)])],2)):At("v-if",!0),A.closable?(Z(),ue(cr,{key:2},[A.closeText?(Z(),ue("div",{key:0,class:ge([w(m).e("close-btn"),w(m).is("customed")]),onClick:M},gn(A.closeText),3)):(Z(),Bt(w(rr),{key:1,class:ge(w(m).e("close-btn")),onClick:M},{default:mt(()=>[st(w(l))]),_:1},8,["class"]))],64)):At("v-if",!0)],2)],2),[[Ki,b.value]])]),_:3},8,["name"]))}});var Vse=En(Bse,[["__file","alert.vue"]]);const $se=Gr(Vse),Tx=()=>Pi&&/firefox/i.test(window.navigator.userAgent);let Pl;const Hse={height:"0",visibility:"hidden",overflow:Tx()?"":"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},Use=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"];function jse(e){const n=window.getComputedStyle(e),s=n.getPropertyValue("box-sizing"),l=Number.parseFloat(n.getPropertyValue("padding-bottom"))+Number.parseFloat(n.getPropertyValue("padding-top")),d=Number.parseFloat(n.getPropertyValue("border-bottom-width"))+Number.parseFloat(n.getPropertyValue("border-top-width"));return{contextStyle:Use.map(b=>[b,n.getPropertyValue(b)]),paddingSize:l,borderSize:d,boxSizing:s}}function rM(e,n=1,s){var l;Pl||(Pl=document.createElement("textarea"),document.body.appendChild(Pl));const{paddingSize:d,borderSize:m,boxSizing:b,contextStyle:r}=jse(e);r.forEach(([P,D])=>Pl?.style.setProperty(P,D)),Object.entries(Hse).forEach(([P,D])=>Pl?.style.setProperty(P,D,"important")),Pl.value=e.value||e.placeholder||"";let E=Pl.scrollHeight;const M={};b==="border-box"?E=E+m:b==="content-box"&&(E=E-d),Pl.value="";const A=Pl.scrollHeight-d;if(gr(n)){let P=A*n;b==="border-box"&&(P=P+d+m),E=Math.max(P,E),M.minHeight=`${P}px`}if(gr(s)){let P=A*s;b==="border-box"&&(P=P+d+m),E=Math.min(P,E)}return M.height=`${E}px`,(l=Pl.parentNode)==null||l.removeChild(Pl),Pl=void 0,M}const oo=e=>e,Gse=bn({ariaLabel:String,ariaOrientation:{type:String,values:["horizontal","vertical","undefined"]},ariaControls:String}),Ta=e=>cc(Gse,e),KS=bn({id:{type:String,default:void 0},size:Fo,disabled:Boolean,modelValue:{type:wt([String,Number,Object]),default:""},maxlength:{type:[String,Number]},minlength:{type:[String,Number]},type:{type:String,default:"text"},resize:{type:String,values:["none","both","horizontal","vertical"]},autosize:{type:wt([Boolean,Object]),default:!1},autocomplete:{type:String,default:"off"},formatter:{type:Function},parser:{type:Function},placeholder:{type:String},form:{type:String},readonly:Boolean,clearable:Boolean,showPassword:Boolean,showWordLimit:Boolean,suffixIcon:{type:bs},prefixIcon:{type:bs},containerRole:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},validateEvent:{type:Boolean,default:!0},inputStyle:{type:wt([Object,Array,String]),default:()=>oo({})},autofocus:Boolean,rows:{type:Number,default:2},...Ta(["ariaLabel"])}),qse={[Nr]:e=>ir(e),input:e=>ir(e),change:e=>ir(e),focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent,clear:()=>!0,mouseleave:e=>e instanceof MouseEvent,mouseenter:e=>e instanceof MouseEvent,keydown:e=>e instanceof Event,compositionstart:e=>e instanceof CompositionEvent,compositionupdate:e=>e instanceof CompositionEvent,compositionend:e=>e instanceof CompositionEvent},Wse=["class","style"],Kse=/^on[A-Z]/,oy=(e={})=>{const{excludeListeners:n=!1,excludeKeys:s}=e,l=se(()=>(s?.value||[]).concat(Wse)),d=oi();return se(d?()=>{var m;return Lv(Object.entries((m=d.proxy)==null?void 0:m.$attrs).filter(([b])=>!l.value.includes(b)&&!(n&&Kse.test(b))))}:()=>({}))},Jp=Symbol("formContextKey"),xd=Symbol("formItemContextKey"),iM={prefix:Math.floor(Math.random()*1e4),current:0},Yse=Symbol("elIdInjection"),YS=()=>oi()?Gn(Yse,iM):iM,Ea=e=>{const n=YS(),s=xS();return kb(()=>w(e)||`${s.value}-id-${n.prefix}-${n.current++}`)},Fa=()=>{const e=Gn(Jp,void 0),n=Gn(xd,void 0);return{form:e,formItem:n}},Du=(e,{formItemContext:n,disableIdGeneration:s,disableIdManagement:l})=>{s||(s=Re(!1)),l||(l=Re(!1));const d=Re();let m;const b=se(()=>{var r;return!!(!(e.label||e.ariaLabel)&&n&&n.inputIds&&((r=n.inputIds)==null?void 0:r.length)<=1)});return Zr(()=>{m=on([cs(e,"id"),s],([r,E])=>{const M=r??(E?void 0:Ea().value);M!==d.value&&(n?.removeInputId&&(d.value&&n.removeInputId(d.value),!l?.value&&!E&&M&&n.addInputId(M)),d.value=M)},{immediate:!0})}),Mf(()=>{m&&m(),n?.removeInputId&&d.value&&n.removeInputId(d.value)}),{isLabeledByFormItem:b,inputId:d}},ZS=e=>{const n=oi();return se(()=>{var s,l;return(l=(s=n?.proxy)==null?void 0:s.$props)==null?void 0:l[e]})},Lo=(e,n={})=>{const s=Re(void 0),l=n.prop?s:ZS("size"),d=n.global?s:JL(),m=n.form?{size:void 0}:Gn(Jp,void 0),b=n.formItem?{size:void 0}:Gn(xd,void 0);return se(()=>l.value||w(e)||b?.size||m?.size||d.value||"")},Ba=e=>{const n=ZS("disabled"),s=Gn(Jp,void 0);return se(()=>n.value||w(e)||s?.disabled||!1)};function Pf(e,{beforeFocus:n,afterFocus:s,beforeBlur:l,afterBlur:d}={}){const m=oi(),{emit:b}=m,r=Zs(),E=ZS("disabled"),M=Re(!1),A=z=>{hr(n)&&n(z)||M.value||(M.value=!0,b("focus",z),s?.())},P=z=>{var F;hr(l)&&l(z)||z.relatedTarget&&((F=r.value)!=null&&F.contains(z.relatedTarget))||(M.value=!1,b("blur",z),d?.())},D=()=>{var z,F;(z=r.value)!=null&&z.contains(document.activeElement)&&r.value!==document.activeElement||E.value||(F=e.value)==null||F.focus()};return on([r,E],([z,F])=>{z&&(F?z.removeAttribute("tabindex"):z.setAttribute("tabindex","-1"))}),Is(r,"focus",A,!0),Is(r,"blur",P,!0),Is(r,"click",D,!0),{isFocused:M,wrapperRef:r,handleFocus:A,handleBlur:P}}const Zse=e=>/([\uAC00-\uD7AF\u3130-\u318F])+/gi.test(e);function ay({afterComposition:e,emit:n}){const s=Re(!1),l=r=>{n?.("compositionstart",r),s.value=!0},d=r=>{var E;n?.("compositionupdate",r);const M=(E=r.target)==null?void 0:E.value,A=M[M.length-1]||"";s.value=!Zse(A)},m=r=>{n?.("compositionend",r),s.value&&(s.value=!1,dr(()=>e(r)))};return{isComposing:s,handleComposition:r=>{r.type==="compositionend"?m(r):d(r)},handleCompositionStart:l,handleCompositionUpdate:d,handleCompositionEnd:m}}function Xse(e){let n;function s(){if(e.value==null)return;const{selectionStart:d,selectionEnd:m,value:b}=e.value;if(d==null||m==null)return;const r=b.slice(0,Math.max(0,d)),E=b.slice(Math.max(0,m));n={selectionStart:d,selectionEnd:m,value:b,beforeTxt:r,afterTxt:E}}function l(){if(e.value==null||n==null)return;const{value:d}=e.value,{beforeTxt:m,afterTxt:b,selectionStart:r}=n;if(m==null||b==null||r==null)return;let E=d.length;if(d.endsWith(b))E=d.length-b.length;else if(d.startsWith(m))E=m.length;else{const M=m[r-1],A=d.indexOf(M,r-1);A!==-1&&(E=A+1)}e.value.setSelectionRange(E,E)}return[s,l]}const Jse="ElInput",Qse=xe({name:Jse,inheritAttrs:!1}),eoe=xe({...Qse,props:KS,emits:qse,setup(e,{expose:n,emit:s}){const l=e,d=wh(),m=oy(),b=qo(),r=se(()=>[l.type==="textarea"?N.b():F.b(),F.m(D.value),F.is("disabled",z.value),F.is("exceed",ft.value),{[F.b("group")]:b.prepend||b.append,[F.m("prefix")]:b.prefix||l.prefixIcon,[F.m("suffix")]:b.suffix||l.suffixIcon||l.clearable||l.showPassword,[F.bm("suffix","password-clear")]:Te.value&&Ae.value,[F.b("hidden")]:l.type==="hidden"},d.class]),E=se(()=>[F.e("wrapper"),F.is("focus",fe.value)]),{form:M,formItem:A}=Fa(),{inputId:P}=Du(l,{formItemContext:A}),D=Lo(),z=Ba(),F=dn("input"),N=dn("textarea"),q=Zs(),G=Zs(),ie=Re(!1),W=Re(!1),Y=Re(),J=Zs(l.inputStyle),re=se(()=>q.value||G.value),{wrapperRef:he,isFocused:fe,handleFocus:ce,handleBlur:me}=Pf(re,{beforeFocus(){return z.value},afterBlur(){var Ot;l.validateEvent&&((Ot=A?.validate)==null||Ot.call(A,"blur").catch(Bn=>void 0))}}),we=se(()=>{var Ot;return(Ot=M?.statusIcon)!=null?Ot:!1}),ye=se(()=>A?.validateState||""),Ue=se(()=>ye.value&&Ex[ye.value]),Ne=se(()=>W.value?EO:fO),Pe=se(()=>[d.style]),ve=se(()=>[l.inputStyle,J.value,{resize:l.resize}]),$e=se(()=>ea(l.modelValue)?"":String(l.modelValue)),Te=se(()=>l.clearable&&!z.value&&!l.readonly&&!!$e.value&&(fe.value||ie.value)),Ae=se(()=>l.showPassword&&!z.value&&!!$e.value&&(!!$e.value||fe.value)),Ve=se(()=>l.showWordLimit&&!!l.maxlength&&(l.type==="text"||l.type==="textarea")&&!z.value&&!l.readonly&&!l.showPassword),We=se(()=>$e.value.length),ft=se(()=>!!Ve.value&&We.value>Number(l.maxlength)),at=se(()=>!!b.suffix||!!l.suffixIcon||Te.value||l.showPassword||Ve.value||!!ye.value&&we.value),[ct,Mt]=Xse(q);so(G,Ot=>{if(Ke(),!Ve.value||l.resize!=="both")return;const Bn=Ot[0],{width:Sr}=Bn.contentRect;Y.value={right:`calc(100% - ${Sr+15+6}px)`}});const Ct=()=>{const{type:Ot,autosize:Bn}=l;if(!(!Pi||Ot!=="textarea"||!G.value))if(Bn){const Sr=Yr(Bn)?Bn.minRows:void 0,Ur=Yr(Bn)?Bn.maxRows:void 0,Kn=rM(G.value,Sr,Ur);J.value={overflowY:"hidden",...Kn},dr(()=>{G.value.offsetHeight,J.value=Kn})}else J.value={minHeight:rM(G.value).minHeight}},Ke=(Ot=>{let Bn=!1;return()=>{var Sr;if(Bn||!l.autosize)return;((Sr=G.value)==null?void 0:Sr.offsetParent)===null||(Ot(),Bn=!0)}})(Ct),Lt=()=>{const Ot=re.value,Bn=l.formatter?l.formatter($e.value):$e.value;!Ot||Ot.value===Bn||(Ot.value=Bn)},xn=async Ot=>{ct();let{value:Bn}=Ot.target;if(l.formatter&&l.parser&&(Bn=l.parser(Bn)),!le.value){if(Bn===$e.value){Lt();return}s(Nr,Bn),s(Go,Bn),await dr(),Lt(),Mt()}},Ht=Ot=>{let{value:Bn}=Ot.target;l.formatter&&l.parser&&(Bn=l.parser(Bn)),s(mi,Bn)},{isComposing:le,handleCompositionStart:nt,handleCompositionUpdate:Gt,handleCompositionEnd:an}=ay({emit:s,afterComposition:xn}),Qt=()=>{ct(),W.value=!W.value,setTimeout(Mt)},Zt=()=>{var Ot;return(Ot=re.value)==null?void 0:Ot.focus()},rn=()=>{var Ot;return(Ot=re.value)==null?void 0:Ot.blur()},bt=Ot=>{ie.value=!1,s("mouseleave",Ot)},fn=Ot=>{ie.value=!0,s("mouseenter",Ot)},pn=Ot=>{s("keydown",Ot)},Vn=()=>{var Ot;(Ot=re.value)==null||Ot.select()},Nn=()=>{s(Nr,""),s(mi,""),s("clear"),s(Go,"")};return on(()=>l.modelValue,()=>{var Ot;dr(()=>Ct()),l.validateEvent&&((Ot=A?.validate)==null||Ot.call(A,"change").catch(Bn=>void 0))}),on($e,()=>Lt()),on(()=>l.type,async()=>{await dr(),Lt(),Ct()}),Zr(()=>{!l.formatter&&l.parser,Lt(),dr(Ct)}),n({input:q,textarea:G,ref:re,textareaStyle:ve,autosize:cs(l,"autosize"),isComposing:le,focus:Zt,blur:rn,select:Vn,clear:Nn,resizeTextarea:Ct}),(Ot,Bn)=>(Z(),ue("div",{class:ge([w(r),{[w(F).bm("group","append")]:Ot.$slots.append,[w(F).bm("group","prepend")]:Ot.$slots.prepend}]),style:fr(w(Pe)),onMouseenter:fn,onMouseleave:bt},[At(" input "),Ot.type!=="textarea"?(Z(),ue(cr,{key:0},[At(" prepend slot "),Ot.$slots.prepend?(Z(),ue("div",{key:0,class:ge(w(F).be("group","prepend"))},[It(Ot.$slots,"prepend")],2)):At("v-if",!0),ae("div",{ref_key:"wrapperRef",ref:he,class:ge(w(E))},[At(" prefix slot "),Ot.$slots.prefix||Ot.prefixIcon?(Z(),ue("span",{key:0,class:ge(w(F).e("prefix"))},[ae("span",{class:ge(w(F).e("prefix-inner"))},[It(Ot.$slots,"prefix"),Ot.prefixIcon?(Z(),Bt(w(rr),{key:0,class:ge(w(F).e("icon"))},{default:mt(()=>[(Z(),Bt(si(Ot.prefixIcon)))]),_:1},8,["class"])):At("v-if",!0)],2)],2)):At("v-if",!0),ae("input",pi({id:w(P),ref_key:"input",ref:q,class:w(F).e("inner")},w(m),{minlength:Ot.minlength,maxlength:Ot.maxlength,type:Ot.showPassword?W.value?"text":"password":Ot.type,disabled:w(z),readonly:Ot.readonly,autocomplete:Ot.autocomplete,tabindex:Ot.tabindex,"aria-label":Ot.ariaLabel,placeholder:Ot.placeholder,style:Ot.inputStyle,form:Ot.form,autofocus:Ot.autofocus,role:Ot.containerRole,onCompositionstart:w(nt),onCompositionupdate:w(Gt),onCompositionend:w(an),onInput:xn,onChange:Ht,onKeydown:pn}),null,16,["id","minlength","maxlength","type","disabled","readonly","autocomplete","tabindex","aria-label","placeholder","form","autofocus","role","onCompositionstart","onCompositionupdate","onCompositionend"]),At(" suffix slot "),w(at)?(Z(),ue("span",{key:1,class:ge(w(F).e("suffix"))},[ae("span",{class:ge(w(F).e("suffix-inner"))},[!w(Te)||!w(Ae)||!w(Ve)?(Z(),ue(cr,{key:0},[It(Ot.$slots,"suffix"),Ot.suffixIcon?(Z(),Bt(w(rr),{key:0,class:ge(w(F).e("icon"))},{default:mt(()=>[(Z(),Bt(si(Ot.suffixIcon)))]),_:1},8,["class"])):At("v-if",!0)],64)):At("v-if",!0),w(Te)?(Z(),Bt(w(rr),{key:1,class:ge([w(F).e("icon"),w(F).e("clear")]),onMousedown:Er(w(ys),["prevent"]),onClick:Nn},{default:mt(()=>[st(w(Td))]),_:1},8,["class","onMousedown"])):At("v-if",!0),w(Ae)?(Z(),Bt(w(rr),{key:2,class:ge([w(F).e("icon"),w(F).e("password")]),onClick:Qt},{default:mt(()=>[(Z(),Bt(si(w(Ne))))]),_:1},8,["class"])):At("v-if",!0),w(Ve)?(Z(),ue("span",{key:3,class:ge(w(F).e("count"))},[ae("span",{class:ge(w(F).e("count-inner"))},gn(w(We))+" / "+gn(Ot.maxlength),3)],2)):At("v-if",!0),w(ye)&&w(Ue)&&w(we)?(Z(),Bt(w(rr),{key:4,class:ge([w(F).e("icon"),w(F).e("validateIcon"),w(F).is("loading",w(ye)==="validating")])},{default:mt(()=>[(Z(),Bt(si(w(Ue))))]),_:1},8,["class"])):At("v-if",!0)],2)],2)):At("v-if",!0)],2),At(" append slot "),Ot.$slots.append?(Z(),ue("div",{key:1,class:ge(w(F).be("group","append"))},[It(Ot.$slots,"append")],2)):At("v-if",!0)],64)):(Z(),ue(cr,{key:1},[At(" textarea "),ae("textarea",pi({id:w(P),ref_key:"textarea",ref:G,class:[w(N).e("inner"),w(F).is("focus",w(fe))]},w(m),{minlength:Ot.minlength,maxlength:Ot.maxlength,tabindex:Ot.tabindex,disabled:w(z),readonly:Ot.readonly,autocomplete:Ot.autocomplete,style:w(ve),"aria-label":Ot.ariaLabel,placeholder:Ot.placeholder,form:Ot.form,autofocus:Ot.autofocus,rows:Ot.rows,role:Ot.containerRole,onCompositionstart:w(nt),onCompositionupdate:w(Gt),onCompositionend:w(an),onInput:xn,onFocus:w(ce),onBlur:w(me),onChange:Ht,onKeydown:pn}),null,16,["id","minlength","maxlength","tabindex","disabled","readonly","autocomplete","aria-label","placeholder","form","autofocus","rows","role","onCompositionstart","onCompositionupdate","onCompositionend","onFocus","onBlur"]),w(Ve)?(Z(),ue("span",{key:0,style:fr(Y.value),class:ge(w(F).e("count"))},gn(w(We))+" / "+gn(Ot.maxlength),7)):At("v-if",!0)],64))],38))}});var toe=En(eoe,[["__file","input.vue"]]);const nl=Gr(toe),sg=4,kO={vertical:{offset:"offsetHeight",scroll:"scrollTop",scrollSize:"scrollHeight",size:"height",key:"vertical",axis:"Y",client:"clientY",direction:"top"},horizontal:{offset:"offsetWidth",scroll:"scrollLeft",scrollSize:"scrollWidth",size:"width",key:"horizontal",axis:"X",client:"clientX",direction:"left"}},noe=({move:e,size:n,bar:s})=>({[s.size]:n,transform:`translate${s.axis}(${e}%)`}),XS=Symbol("scrollbarContextKey"),roe=bn({vertical:Boolean,size:String,move:Number,ratio:{type:Number,required:!0},always:Boolean}),ioe="Thumb",soe=xe({__name:"thumb",props:roe,setup(e){const n=e,s=Gn(XS),l=dn("scrollbar");s||No(ioe,"can not inject scrollbar context");const d=Re(),m=Re(),b=Re({}),r=Re(!1);let E=!1,M=!1,A=Pi?document.onselectstart:null;const P=se(()=>kO[n.vertical?"vertical":"horizontal"]),D=se(()=>noe({size:n.size,move:n.move,bar:P.value})),z=se(()=>d.value[P.value.offset]**2/s.wrapElement[P.value.scrollSize]/n.ratio/m.value[P.value.offset]),F=re=>{var he;if(re.stopPropagation(),re.ctrlKey||[1,2].includes(re.button))return;(he=window.getSelection())==null||he.removeAllRanges(),q(re);const fe=re.currentTarget;fe&&(b.value[P.value.axis]=fe[P.value.offset]-(re[P.value.client]-fe.getBoundingClientRect()[P.value.direction]))},N=re=>{if(!m.value||!d.value||!s.wrapElement)return;const he=Math.abs(re.target.getBoundingClientRect()[P.value.direction]-re[P.value.client]),fe=m.value[P.value.offset]/2,ce=(he-fe)*100*z.value/d.value[P.value.offset];s.wrapElement[P.value.scroll]=ce*s.wrapElement[P.value.scrollSize]/100},q=re=>{re.stopImmediatePropagation(),E=!0,document.addEventListener("mousemove",G),document.addEventListener("mouseup",ie),A=document.onselectstart,document.onselectstart=()=>!1},G=re=>{if(!d.value||!m.value||E===!1)return;const he=b.value[P.value.axis];if(!he)return;const fe=(d.value.getBoundingClientRect()[P.value.direction]-re[P.value.client])*-1,ce=m.value[P.value.offset]-he,me=(fe-ce)*100*z.value/d.value[P.value.offset];s.wrapElement[P.value.scroll]=me*s.wrapElement[P.value.scrollSize]/100},ie=()=>{E=!1,b.value[P.value.axis]=0,document.removeEventListener("mousemove",G),document.removeEventListener("mouseup",ie),J(),M&&(r.value=!1)},W=()=>{M=!1,r.value=!!n.size},Y=()=>{M=!0,r.value=E};Ls(()=>{J(),document.removeEventListener("mouseup",ie)});const J=()=>{document.onselectstart!==A&&(document.onselectstart=A)};return Is(cs(s,"scrollbarElement"),"mousemove",W),Is(cs(s,"scrollbarElement"),"mouseleave",Y),(re,he)=>(Z(),Bt(ha,{name:w(l).b("fade"),persisted:""},{default:mt(()=>[Wr(ae("div",{ref_key:"instance",ref:d,class:ge([w(l).e("bar"),w(l).is(w(P).key)]),onMousedown:N,onClick:Er(()=>{},["stop"])},[ae("div",{ref_key:"thumb",ref:m,class:ge(w(l).e("thumb")),style:fr(w(D)),onMousedown:F},null,38)],42,["onClick"]),[[Ki,re.always||r.value]])]),_:1},8,["name"]))}});var sM=En(soe,[["__file","thumb.vue"]]);const ooe=bn({always:{type:Boolean,default:!0},minSize:{type:Number,required:!0}}),aoe=xe({__name:"bar",props:ooe,setup(e,{expose:n}){const s=e,l=Gn(XS),d=Re(0),m=Re(0),b=Re(""),r=Re(""),E=Re(1),M=Re(1);return n({handleScroll:D=>{if(D){const z=D.offsetHeight-sg,F=D.offsetWidth-sg;m.value=D.scrollTop*100/z*E.value,d.value=D.scrollLeft*100/F*M.value}},update:()=>{const D=l?.wrapElement;if(!D)return;const z=D.offsetHeight-sg,F=D.offsetWidth-sg,N=z**2/D.scrollHeight,q=F**2/D.scrollWidth,G=Math.max(N,s.minSize),ie=Math.max(q,s.minSize);E.value=N/(z-N)/(G/(z-G)),M.value=q/(F-q)/(ie/(F-ie)),r.value=G+sg<z?`${G}px`:"",b.value=ie+sg<F?`${ie}px`:""}}),(D,z)=>(Z(),ue(cr,null,[st(sM,{move:d.value,ratio:M.value,size:b.value,always:D.always},null,8,["move","ratio","size","always"]),st(sM,{move:m.value,ratio:E.value,size:r.value,vertical:"",always:D.always},null,8,["move","ratio","size","always"])],64))}});var loe=En(aoe,[["__file","bar.vue"]]);const uoe=bn({height:{type:[String,Number],default:""},maxHeight:{type:[String,Number],default:""},native:{type:Boolean,default:!1},wrapStyle:{type:wt([String,Object,Array]),default:""},wrapClass:{type:[String,Array],default:""},viewClass:{type:[String,Array],default:""},viewStyle:{type:[String,Array,Object],default:""},noresize:Boolean,tag:{type:String,default:"div"},always:Boolean,minSize:{type:Number,default:20},tabindex:{type:[String,Number],default:void 0},id:String,role:String,...Ta(["ariaLabel","ariaOrientation"])}),MO={scroll:({scrollTop:e,scrollLeft:n})=>[e,n].every(gr)},coe="ElScrollbar",doe=xe({name:coe}),hoe=xe({...doe,props:uoe,emits:MO,setup(e,{expose:n,emit:s}){const l=e,d=dn("scrollbar");let m,b,r=0,E=0;const M=Re(),A=Re(),P=Re(),D=Re(),z=se(()=>{const J={};return l.height&&(J.height=ho(l.height)),l.maxHeight&&(J.maxHeight=ho(l.maxHeight)),[l.wrapStyle,J]}),F=se(()=>[l.wrapClass,d.e("wrap"),{[d.em("wrap","hidden-default")]:!l.native}]),N=se(()=>[d.e("view"),l.viewClass]),q=()=>{var J;A.value&&((J=D.value)==null||J.handleScroll(A.value),r=A.value.scrollTop,E=A.value.scrollLeft,s("scroll",{scrollTop:A.value.scrollTop,scrollLeft:A.value.scrollLeft}))};function G(J,re){Yr(J)?A.value.scrollTo(J):gr(J)&&gr(re)&&A.value.scrollTo(J,re)}const ie=J=>{gr(J)&&(A.value.scrollTop=J)},W=J=>{gr(J)&&(A.value.scrollLeft=J)},Y=()=>{var J;(J=D.value)==null||J.update()};return on(()=>l.noresize,J=>{J?(m?.(),b?.()):({stop:m}=so(P,Y),b=Is("resize",Y))},{immediate:!0}),on(()=>[l.maxHeight,l.height],()=>{l.native||dr(()=>{var J;Y(),A.value&&((J=D.value)==null||J.handleScroll(A.value))})}),Ti(XS,ts({scrollbarElement:M,wrapElement:A})),fS(()=>{A.value&&(A.value.scrollTop=r,A.value.scrollLeft=E)}),Zr(()=>{l.native||dr(()=>{Y()})}),yc(()=>Y()),n({wrapRef:A,update:Y,scrollTo:G,setScrollTop:ie,setScrollLeft:W,handleScroll:q}),(J,re)=>(Z(),ue("div",{ref_key:"scrollbarRef",ref:M,class:ge(w(d).b())},[ae("div",{ref_key:"wrapRef",ref:A,class:ge(w(F)),style:fr(w(z)),tabindex:J.tabindex,onScroll:q},[(Z(),Bt(si(J.tag),{id:J.id,ref_key:"resizeRef",ref:P,class:ge(w(N)),style:fr(J.viewStyle),role:J.role,"aria-label":J.ariaLabel,"aria-orientation":J.ariaOrientation},{default:mt(()=>[It(J.$slots,"default")]),_:3},8,["id","class","style","role","aria-label","aria-orientation"]))],46,["tabindex"]),J.native?At("v-if",!0):(Z(),Bt(loe,{key:0,ref_key:"barRef",ref:D,always:J.always,"min-size":J.minSize},null,8,["always","min-size"]))],2))}});var foe=En(hoe,[["__file","scrollbar.vue"]]);const Id=Gr(foe),JS=Symbol("popper"),AO=Symbol("popperContent"),RO=["dialog","grid","group","listbox","menu","navigation","tooltip","tree"],PO=bn({role:{type:String,values:RO,default:"tooltip"}}),poe=xe({name:"ElPopper",inheritAttrs:!1}),moe=xe({...poe,props:PO,setup(e,{expose:n}){const s=e,l=Re(),d=Re(),m=Re(),b=Re(),r=se(()=>s.role),E={triggerRef:l,popperInstanceRef:d,contentRef:m,referenceRef:b,role:r};return n(E),Ti(JS,E),(M,A)=>It(M.$slots,"default")}});var goe=En(moe,[["__file","popper.vue"]]);const LO=bn({arrowOffset:{type:Number,default:5}}),_oe=xe({name:"ElPopperArrow",inheritAttrs:!1}),voe=xe({..._oe,props:LO,setup(e,{expose:n}){const s=e,l=dn("popper"),{arrowOffset:d,arrowRef:m,arrowStyle:b}=Gn(AO,void 0);return on(()=>s.arrowOffset,r=>{d.value=r}),Ls(()=>{m.value=void 0}),n({arrowRef:m}),(r,E)=>(Z(),ue("span",{ref_key:"arrowRef",ref:m,class:ge(w(l).e("arrow")),style:fr(w(b)),"data-popper-arrow":""},null,6))}});var yoe=En(voe,[["__file","arrow.vue"]]);const OO=bn({virtualRef:{type:wt(Object)},virtualTriggering:Boolean,onMouseenter:{type:wt(Function)},onMouseleave:{type:wt(Function)},onClick:{type:wt(Function)},onKeydown:{type:wt(Function)},onFocus:{type:wt(Function)},onBlur:{type:wt(Function)},onContextmenu:{type:wt(Function)},id:String,open:Boolean}),DO=Symbol("elForwardRef"),boe=e=>{Ti(DO,{setForwardRef:s=>{e.value=s}})},xoe=e=>({mounted(n){e(n)},updated(n){e(n)},unmounted(){e(null)}}),woe='a[href],button:not([disabled]),button:not([hidden]),:not([tabindex="-1"]),input:not([disabled]),input:not([type="hidden"]),select:not([disabled]),textarea:not([disabled])',Soe=e=>getComputedStyle(e).position==="fixed"?!1:e.offsetParent!==null,oM=e=>Array.from(e.querySelectorAll(woe)).filter(n=>Rb(n)&&Soe(n)),Rb=e=>{if(e.tabIndex>0||e.tabIndex===0&&e.getAttribute("tabIndex")!==null)return!0;if(e.tabIndex<0||e.hasAttribute("disabled")||e.getAttribute("aria-disabled")==="true")return!1;switch(e.nodeName){case"A":return!!e.href&&e.rel!=="ignore";case"INPUT":return!(e.type==="hidden"||e.type==="file");case"BUTTON":case"SELECT":case"TEXTAREA":return!0;default:return!1}},B2=function(e,n,...s){let l;n.includes("mouse")||n.includes("click")?l="MouseEvents":n.includes("key")?l="KeyboardEvent":l="HTMLEvents";const d=document.createEvent(l);return d.initEvent(n,...s),e.dispatchEvent(d),e},zO=e=>!e.getAttribute("aria-owns"),NO=(e,n,s)=>{const{parentNode:l}=e;if(!l)return null;const d=l.querySelectorAll(s),m=Array.prototype.indexOf.call(d,e);return d[m+n]||null},V2=e=>{e&&(e.focus(),!zO(e)&&e.click())},Coe="ElOnlyChild",FO=xe({name:Coe,setup(e,{slots:n,attrs:s}){var l;const d=Gn(DO),m=xoe((l=d?.setForwardRef)!=null?l:ys);return()=>{var b;const r=(b=n.default)==null?void 0:b.call(n,s);if(!r||r.length>1)return null;const E=BO(r);return E?Wr(fh(E,s),[[m]]):null}}});function BO(e){if(!e)return null;const n=e;for(const s of n){if(Yr(s))switch(s.type){case Qo:continue;case r0:case"svg":return aM(s);case cr:return BO(s.children);default:return s}return aM(s)}return null}function aM(e){const n=dn("only-child");return st("span",{class:n.e("content")},[e])}const Eoe=xe({name:"ElPopperTrigger",inheritAttrs:!1}),Toe=xe({...Eoe,props:OO,setup(e,{expose:n}){const s=e,{role:l,triggerRef:d}=Gn(JS,void 0);boe(d);const m=se(()=>r.value?s.id:void 0),b=se(()=>{if(l&&l.value==="tooltip")return s.open&&s.id?s.id:void 0}),r=se(()=>{if(l&&l.value!=="tooltip")return l.value}),E=se(()=>r.value?`${s.open}`:void 0);let M;const A=["onMouseenter","onMouseleave","onClick","onKeydown","onFocus","onBlur","onContextmenu"];return Zr(()=>{on(()=>s.virtualRef,P=>{P&&(d.value=bl(P))},{immediate:!0}),on(d,(P,D)=>{M?.(),M=void 0,xl(P)&&(A.forEach(z=>{var F;const N=s[z];N&&(P.addEventListener(z.slice(2).toLowerCase(),N),(F=D?.removeEventListener)==null||F.call(D,z.slice(2).toLowerCase(),N))}),Rb(P)&&(M=on([m,b,r,E],z=>{["aria-controls","aria-describedby","aria-haspopup","aria-expanded"].forEach((F,N)=>{ea(z[N])?P.removeAttribute(F):P.setAttribute(F,z[N])})},{immediate:!0}))),xl(D)&&Rb(D)&&["aria-controls","aria-describedby","aria-haspopup","aria-expanded"].forEach(z=>D.removeAttribute(z))},{immediate:!0})}),Ls(()=>{if(M?.(),M=void 0,d.value&&xl(d.value)){const P=d.value;A.forEach(D=>{const z=s[D];z&&P.removeEventListener(D.slice(2).toLowerCase(),z)}),d.value=void 0}}),n({triggerRef:d}),(P,D)=>P.virtualTriggering?At("v-if",!0):(Z(),Bt(w(FO),pi({key:0},P.$attrs,{"aria-controls":w(m),"aria-describedby":w(b),"aria-expanded":w(E),"aria-haspopup":w(r)}),{default:mt(()=>[It(P.$slots,"default")]),_:3},16,["aria-controls","aria-describedby","aria-expanded","aria-haspopup"]))}});var Ioe=En(Toe,[["__file","trigger.vue"]]);const e4="focus-trap.focus-after-trapped",t4="focus-trap.focus-after-released",koe="focus-trap.focusout-prevented",lM={cancelable:!0,bubbles:!1},Moe={cancelable:!0,bubbles:!1},uM="focusAfterTrapped",cM="focusAfterReleased",QS=Symbol("elFocusTrap"),e8=Re(),Ix=Re(0),t8=Re(0);let g2=0;const VO=e=>{const n=[],s=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:l=>{const d=l.tagName==="INPUT"&&l.type==="hidden";return l.disabled||l.hidden||d?NodeFilter.FILTER_SKIP:l.tabIndex>=0||l===document.activeElement?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;s.nextNode();)n.push(s.currentNode);return n},dM=(e,n)=>{for(const s of e)if(!Aoe(s,n))return s},Aoe=(e,n)=>{if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(n&&e===n)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1},Roe=e=>{const n=VO(e),s=dM(n,e),l=dM(n.reverse(),e);return[s,l]},Poe=e=>e instanceof HTMLInputElement&&"select"in e,th=(e,n)=>{if(e&&e.focus){const s=document.activeElement;let l=!1;xl(e)&&!Rb(e)&&!e.getAttribute("tabindex")&&(e.setAttribute("tabindex","-1"),l=!0),e.focus({preventScroll:!0}),t8.value=window.performance.now(),e!==s&&Poe(e)&&n&&e.select(),xl(e)&&l&&e.removeAttribute("tabindex")}};function hM(e,n){const s=[...e],l=e.indexOf(n);return l!==-1&&s.splice(l,1),s}const Loe=()=>{let e=[];return{push:l=>{const d=e[0];d&&l!==d&&d.pause(),e=hM(e,l),e.unshift(l)},remove:l=>{var d,m;e=hM(e,l),(m=(d=e[0])==null?void 0:d.resume)==null||m.call(d)}}},Ooe=(e,n=!1)=>{const s=document.activeElement;for(const l of e)if(th(l,n),document.activeElement!==s)return},fM=Loe(),Doe=()=>Ix.value>t8.value,_2=()=>{e8.value="pointer",Ix.value=window.performance.now()},pM=()=>{e8.value="keyboard",Ix.value=window.performance.now()},zoe=()=>(Zr(()=>{g2===0&&(document.addEventListener("mousedown",_2),document.addEventListener("touchstart",_2),document.addEventListener("keydown",pM)),g2++}),Ls(()=>{g2--,g2<=0&&(document.removeEventListener("mousedown",_2),document.removeEventListener("touchstart",_2),document.removeEventListener("keydown",pM))}),{focusReason:e8,lastUserFocusTimestamp:Ix,lastAutomatedFocusTimestamp:t8}),v2=e=>new CustomEvent(koe,{...Moe,detail:e}),Un={tab:"Tab",enter:"Enter",space:"Space",left:"ArrowLeft",up:"ArrowUp",right:"ArrowRight",down:"ArrowDown",esc:"Escape",delete:"Delete",backspace:"Backspace",numpadEnter:"NumpadEnter",pageUp:"PageUp",pageDown:"PageDown",home:"Home",end:"End"};let hg=[];const mM=e=>{e.code===Un.esc&&hg.forEach(n=>n(e))},Noe=e=>{Zr(()=>{hg.length===0&&document.addEventListener("keydown",mM),Pi&&hg.push(e)}),Ls(()=>{hg=hg.filter(n=>n!==e),hg.length===0&&Pi&&document.removeEventListener("keydown",mM)})},Foe=xe({name:"ElFocusTrap",inheritAttrs:!1,props:{loop:Boolean,trapped:Boolean,focusTrapEl:Object,focusStartEl:{type:[Object,String],default:"first"}},emits:[uM,cM,"focusin","focusout","focusout-prevented","release-requested"],setup(e,{emit:n}){const s=Re();let l,d;const{focusReason:m}=zoe();Noe(F=>{e.trapped&&!b.paused&&n("release-requested",F)});const b={paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}},r=F=>{if(!e.loop&&!e.trapped||b.paused)return;const{code:N,altKey:q,ctrlKey:G,metaKey:ie,currentTarget:W,shiftKey:Y}=F,{loop:J}=e,re=N===Un.tab&&!q&&!G&&!ie,he=document.activeElement;if(re&&he){const fe=W,[ce,me]=Roe(fe);if(ce&&me){if(!Y&&he===me){const ye=v2({focusReason:m.value});n("focusout-prevented",ye),ye.defaultPrevented||(F.preventDefault(),J&&th(ce,!0))}else if(Y&&[ce,fe].includes(he)){const ye=v2({focusReason:m.value});n("focusout-prevented",ye),ye.defaultPrevented||(F.preventDefault(),J&&th(me,!0))}}else if(he===fe){const ye=v2({focusReason:m.value});n("focusout-prevented",ye),ye.defaultPrevented||F.preventDefault()}}};Ti(QS,{focusTrapRef:s,onKeydown:r}),on(()=>e.focusTrapEl,F=>{F&&(s.value=F)},{immediate:!0}),on([s],([F],[N])=>{F&&(F.addEventListener("keydown",r),F.addEventListener("focusin",A),F.addEventListener("focusout",P)),N&&(N.removeEventListener("keydown",r),N.removeEventListener("focusin",A),N.removeEventListener("focusout",P))});const E=F=>{n(uM,F)},M=F=>n(cM,F),A=F=>{const N=w(s);if(!N)return;const q=F.target,G=F.relatedTarget,ie=q&&N.contains(q);e.trapped||G&&N.contains(G)||(l=G),ie&&n("focusin",F),!b.paused&&e.trapped&&(ie?d=q:th(d,!0))},P=F=>{const N=w(s);if(!(b.paused||!N))if(e.trapped){const q=F.relatedTarget;!ea(q)&&!N.contains(q)&&setTimeout(()=>{if(!b.paused&&e.trapped){const G=v2({focusReason:m.value});n("focusout-prevented",G),G.defaultPrevented||th(d,!0)}},0)}else{const q=F.target;q&&N.contains(q)||n("focusout",F)}};async function D(){await dr();const F=w(s);if(F){fM.push(b);const N=F.contains(document.activeElement)?l:document.activeElement;if(l=N,!F.contains(N)){const G=new Event(e4,lM);F.addEventListener(e4,E),F.dispatchEvent(G),G.defaultPrevented||dr(()=>{let ie=e.focusStartEl;ir(ie)||(th(ie),document.activeElement!==ie&&(ie="first")),ie==="first"&&Ooe(VO(F),!0),(document.activeElement===N||ie==="container")&&th(F)})}}}function z(){const F=w(s);if(F){F.removeEventListener(e4,E);const N=new CustomEvent(t4,{...lM,detail:{focusReason:m.value}});F.addEventListener(t4,M),F.dispatchEvent(N),!N.defaultPrevented&&(m.value=="keyboard"||!Doe()||F.contains(document.activeElement))&&th(l??document.body),F.removeEventListener(t4,M),fM.remove(b)}}return Zr(()=>{e.trapped&&D(),on(()=>e.trapped,F=>{F?D():z()})}),Ls(()=>{e.trapped&&z(),s.value&&(s.value.removeEventListener("keydown",r),s.value.removeEventListener("focusin",A),s.value.removeEventListener("focusout",P),s.value=void 0)}),{onKeydown:r}}});function Boe(e,n,s,l,d,m){return It(e.$slots,"default",{handleKeydown:e.onKeydown})}var h0=En(Foe,[["render",Boe],["__file","focus-trap.vue"]]),Fl="top",Pu="bottom",Lu="right",Bl="left",n8="auto",ly=[Fl,Pu,Lu,Bl],Hg="start",Ov="end",Voe="clippingParents",$O="viewport",q_="popper",$oe="reference",gM=ly.reduce(function(e,n){return e.concat([n+"-"+Hg,n+"-"+Ov])},[]),Eh=[].concat(ly,[n8]).reduce(function(e,n){return e.concat([n,n+"-"+Hg,n+"-"+Ov])},[]),Hoe="beforeRead",Uoe="read",joe="afterRead",Goe="beforeMain",qoe="main",Woe="afterMain",Koe="beforeWrite",Yoe="write",Zoe="afterWrite",Xoe=[Hoe,Uoe,joe,Goe,qoe,Woe,Koe,Yoe,Zoe];function wd(e){return e?(e.nodeName||"").toLowerCase():null}function Sc(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var n=e.ownerDocument;return n&&n.defaultView||window}return e}function Ug(e){var n=Sc(e).Element;return e instanceof n||e instanceof Element}function Au(e){var n=Sc(e).HTMLElement;return e instanceof n||e instanceof HTMLElement}function r8(e){if(typeof ShadowRoot>"u")return!1;var n=Sc(e).ShadowRoot;return e instanceof n||e instanceof ShadowRoot}function Joe(e){var n=e.state;Object.keys(n.elements).forEach(function(s){var l=n.styles[s]||{},d=n.attributes[s]||{},m=n.elements[s];!Au(m)||!wd(m)||(Object.assign(m.style,l),Object.keys(d).forEach(function(b){var r=d[b];r===!1?m.removeAttribute(b):m.setAttribute(b,r===!0?"":r)}))})}function Qoe(e){var n=e.state,s={popper:{position:n.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(n.elements.popper.style,s.popper),n.styles=s,n.elements.arrow&&Object.assign(n.elements.arrow.style,s.arrow),function(){Object.keys(n.elements).forEach(function(l){var d=n.elements[l],m=n.attributes[l]||{},b=Object.keys(n.styles.hasOwnProperty(l)?n.styles[l]:s[l]),r=b.reduce(function(E,M){return E[M]="",E},{});!Au(d)||!wd(d)||(Object.assign(d.style,r),Object.keys(m).forEach(function(E){d.removeAttribute(E)}))})}}var HO={name:"applyStyles",enabled:!0,phase:"write",fn:Joe,effect:Qoe,requires:["computeStyles"]};function gd(e){return e.split("-")[0]}var Np=Math.max,Pb=Math.min,jg=Math.round;function Gg(e,n){n===void 0&&(n=!1);var s=e.getBoundingClientRect(),l=1,d=1;if(Au(e)&&n){var m=e.offsetHeight,b=e.offsetWidth;b>0&&(l=jg(s.width)/b||1),m>0&&(d=jg(s.height)/m||1)}return{width:s.width/l,height:s.height/d,top:s.top/d,right:s.right/l,bottom:s.bottom/d,left:s.left/l,x:s.left/l,y:s.top/d}}function i8(e){var n=Gg(e),s=e.offsetWidth,l=e.offsetHeight;return Math.abs(n.width-s)<=1&&(s=n.width),Math.abs(n.height-l)<=1&&(l=n.height),{x:e.offsetLeft,y:e.offsetTop,width:s,height:l}}function UO(e,n){var s=n.getRootNode&&n.getRootNode();if(e.contains(n))return!0;if(s&&r8(s)){var l=n;do{if(l&&e.isSameNode(l))return!0;l=l.parentNode||l.host}while(l)}return!1}function _h(e){return Sc(e).getComputedStyle(e)}function eae(e){return["table","td","th"].indexOf(wd(e))>=0}function Lf(e){return((Ug(e)?e.ownerDocument:e.document)||window.document).documentElement}function kx(e){return wd(e)==="html"?e:e.assignedSlot||e.parentNode||(r8(e)?e.host:null)||Lf(e)}function _M(e){return!Au(e)||_h(e).position==="fixed"?null:e.offsetParent}function tae(e){var n=navigator.userAgent.toLowerCase().indexOf("firefox")!==-1,s=navigator.userAgent.indexOf("Trident")!==-1;if(s&&Au(e)){var l=_h(e);if(l.position==="fixed")return null}var d=kx(e);for(r8(d)&&(d=d.host);Au(d)&&["html","body"].indexOf(wd(d))<0;){var m=_h(d);if(m.transform!=="none"||m.perspective!=="none"||m.contain==="paint"||["transform","perspective"].indexOf(m.willChange)!==-1||n&&m.willChange==="filter"||n&&m.filter&&m.filter!=="none")return d;d=d.parentNode}return null}function uy(e){for(var n=Sc(e),s=_M(e);s&&eae(s)&&_h(s).position==="static";)s=_M(s);return s&&(wd(s)==="html"||wd(s)==="body"&&_h(s).position==="static")?n:s||tae(e)||n}function s8(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function pv(e,n,s){return Np(e,Pb(n,s))}function nae(e,n,s){var l=pv(e,n,s);return l>s?s:l}function jO(){return{top:0,right:0,bottom:0,left:0}}function GO(e){return Object.assign({},jO(),e)}function qO(e,n){return n.reduce(function(s,l){return s[l]=e,s},{})}var rae=function(e,n){return e=typeof e=="function"?e(Object.assign({},n.rects,{placement:n.placement})):e,GO(typeof e!="number"?e:qO(e,ly))};function iae(e){var n,s=e.state,l=e.name,d=e.options,m=s.elements.arrow,b=s.modifiersData.popperOffsets,r=gd(s.placement),E=s8(r),M=[Bl,Lu].indexOf(r)>=0,A=M?"height":"width";if(!(!m||!b)){var P=rae(d.padding,s),D=i8(m),z=E==="y"?Fl:Bl,F=E==="y"?Pu:Lu,N=s.rects.reference[A]+s.rects.reference[E]-b[E]-s.rects.popper[A],q=b[E]-s.rects.reference[E],G=uy(m),ie=G?E==="y"?G.clientHeight||0:G.clientWidth||0:0,W=N/2-q/2,Y=P[z],J=ie-D[A]-P[F],re=ie/2-D[A]/2+W,he=pv(Y,re,J),fe=E;s.modifiersData[l]=(n={},n[fe]=he,n.centerOffset=he-re,n)}}function sae(e){var n=e.state,s=e.options,l=s.element,d=l===void 0?"[data-popper-arrow]":l;d!=null&&(typeof d=="string"&&(d=n.elements.popper.querySelector(d),!d)||!UO(n.elements.popper,d)||(n.elements.arrow=d))}var oae={name:"arrow",enabled:!0,phase:"main",fn:iae,effect:sae,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function qg(e){return e.split("-")[1]}var aae={top:"auto",right:"auto",bottom:"auto",left:"auto"};function lae(e){var n=e.x,s=e.y,l=window,d=l.devicePixelRatio||1;return{x:jg(n*d)/d||0,y:jg(s*d)/d||0}}function vM(e){var n,s=e.popper,l=e.popperRect,d=e.placement,m=e.variation,b=e.offsets,r=e.position,E=e.gpuAcceleration,M=e.adaptive,A=e.roundOffsets,P=e.isFixed,D=b.x,z=D===void 0?0:D,F=b.y,N=F===void 0?0:F,q=typeof A=="function"?A({x:z,y:N}):{x:z,y:N};z=q.x,N=q.y;var G=b.hasOwnProperty("x"),ie=b.hasOwnProperty("y"),W=Bl,Y=Fl,J=window;if(M){var re=uy(s),he="clientHeight",fe="clientWidth";if(re===Sc(s)&&(re=Lf(s),_h(re).position!=="static"&&r==="absolute"&&(he="scrollHeight",fe="scrollWidth")),re=re,d===Fl||(d===Bl||d===Lu)&&m===Ov){Y=Pu;var ce=P&&re===J&&J.visualViewport?J.visualViewport.height:re[he];N-=ce-l.height,N*=E?1:-1}if(d===Bl||(d===Fl||d===Pu)&&m===Ov){W=Lu;var me=P&&re===J&&J.visualViewport?J.visualViewport.width:re[fe];z-=me-l.width,z*=E?1:-1}}var we=Object.assign({position:r},M&&aae),ye=A===!0?lae({x:z,y:N}):{x:z,y:N};if(z=ye.x,N=ye.y,E){var Ue;return Object.assign({},we,(Ue={},Ue[Y]=ie?"0":"",Ue[W]=G?"0":"",Ue.transform=(J.devicePixelRatio||1)<=1?"translate("+z+"px, "+N+"px)":"translate3d("+z+"px, "+N+"px, 0)",Ue))}return Object.assign({},we,(n={},n[Y]=ie?N+"px":"",n[W]=G?z+"px":"",n.transform="",n))}function uae(e){var n=e.state,s=e.options,l=s.gpuAcceleration,d=l===void 0?!0:l,m=s.adaptive,b=m===void 0?!0:m,r=s.roundOffsets,E=r===void 0?!0:r,M={placement:gd(n.placement),variation:qg(n.placement),popper:n.elements.popper,popperRect:n.rects.popper,gpuAcceleration:d,isFixed:n.options.strategy==="fixed"};n.modifiersData.popperOffsets!=null&&(n.styles.popper=Object.assign({},n.styles.popper,vM(Object.assign({},M,{offsets:n.modifiersData.popperOffsets,position:n.options.strategy,adaptive:b,roundOffsets:E})))),n.modifiersData.arrow!=null&&(n.styles.arrow=Object.assign({},n.styles.arrow,vM(Object.assign({},M,{offsets:n.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:E})))),n.attributes.popper=Object.assign({},n.attributes.popper,{"data-popper-placement":n.placement})}var WO={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:uae,data:{}},y2={passive:!0};function cae(e){var n=e.state,s=e.instance,l=e.options,d=l.scroll,m=d===void 0?!0:d,b=l.resize,r=b===void 0?!0:b,E=Sc(n.elements.popper),M=[].concat(n.scrollParents.reference,n.scrollParents.popper);return m&&M.forEach(function(A){A.addEventListener("scroll",s.update,y2)}),r&&E.addEventListener("resize",s.update,y2),function(){m&&M.forEach(function(A){A.removeEventListener("scroll",s.update,y2)}),r&&E.removeEventListener("resize",s.update,y2)}}var KO={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:cae,data:{}},dae={left:"right",right:"left",bottom:"top",top:"bottom"};function $2(e){return e.replace(/left|right|bottom|top/g,function(n){return dae[n]})}var hae={start:"end",end:"start"};function yM(e){return e.replace(/start|end/g,function(n){return hae[n]})}function o8(e){var n=Sc(e),s=n.pageXOffset,l=n.pageYOffset;return{scrollLeft:s,scrollTop:l}}function a8(e){return Gg(Lf(e)).left+o8(e).scrollLeft}function fae(e){var n=Sc(e),s=Lf(e),l=n.visualViewport,d=s.clientWidth,m=s.clientHeight,b=0,r=0;return l&&(d=l.width,m=l.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(b=l.offsetLeft,r=l.offsetTop)),{width:d,height:m,x:b+a8(e),y:r}}function pae(e){var n,s=Lf(e),l=o8(e),d=(n=e.ownerDocument)==null?void 0:n.body,m=Np(s.scrollWidth,s.clientWidth,d?d.scrollWidth:0,d?d.clientWidth:0),b=Np(s.scrollHeight,s.clientHeight,d?d.scrollHeight:0,d?d.clientHeight:0),r=-l.scrollLeft+a8(e),E=-l.scrollTop;return _h(d||s).direction==="rtl"&&(r+=Np(s.clientWidth,d?d.clientWidth:0)-m),{width:m,height:b,x:r,y:E}}function l8(e){var n=_h(e),s=n.overflow,l=n.overflowX,d=n.overflowY;return/auto|scroll|overlay|hidden/.test(s+d+l)}function YO(e){return["html","body","#document"].indexOf(wd(e))>=0?e.ownerDocument.body:Au(e)&&l8(e)?e:YO(kx(e))}function mv(e,n){var s;n===void 0&&(n=[]);var l=YO(e),d=l===((s=e.ownerDocument)==null?void 0:s.body),m=Sc(l),b=d?[m].concat(m.visualViewport||[],l8(l)?l:[]):l,r=n.concat(b);return d?r:r.concat(mv(kx(b)))}function J4(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function mae(e){var n=Gg(e);return n.top=n.top+e.clientTop,n.left=n.left+e.clientLeft,n.bottom=n.top+e.clientHeight,n.right=n.left+e.clientWidth,n.width=e.clientWidth,n.height=e.clientHeight,n.x=n.left,n.y=n.top,n}function bM(e,n){return n===$O?J4(fae(e)):Ug(n)?mae(n):J4(pae(Lf(e)))}function gae(e){var n=mv(kx(e)),s=["absolute","fixed"].indexOf(_h(e).position)>=0,l=s&&Au(e)?uy(e):e;return Ug(l)?n.filter(function(d){return Ug(d)&&UO(d,l)&&wd(d)!=="body"}):[]}function _ae(e,n,s){var l=n==="clippingParents"?gae(e):[].concat(n),d=[].concat(l,[s]),m=d[0],b=d.reduce(function(r,E){var M=bM(e,E);return r.top=Np(M.top,r.top),r.right=Pb(M.right,r.right),r.bottom=Pb(M.bottom,r.bottom),r.left=Np(M.left,r.left),r},bM(e,m));return b.width=b.right-b.left,b.height=b.bottom-b.top,b.x=b.left,b.y=b.top,b}function ZO(e){var n=e.reference,s=e.element,l=e.placement,d=l?gd(l):null,m=l?qg(l):null,b=n.x+n.width/2-s.width/2,r=n.y+n.height/2-s.height/2,E;switch(d){case Fl:E={x:b,y:n.y-s.height};break;case Pu:E={x:b,y:n.y+n.height};break;case Lu:E={x:n.x+n.width,y:r};break;case Bl:E={x:n.x-s.width,y:r};break;default:E={x:n.x,y:n.y}}var M=d?s8(d):null;if(M!=null){var A=M==="y"?"height":"width";switch(m){case Hg:E[M]=E[M]-(n[A]/2-s[A]/2);break;case Ov:E[M]=E[M]+(n[A]/2-s[A]/2);break}}return E}function Dv(e,n){n===void 0&&(n={});var s=n,l=s.placement,d=l===void 0?e.placement:l,m=s.boundary,b=m===void 0?Voe:m,r=s.rootBoundary,E=r===void 0?$O:r,M=s.elementContext,A=M===void 0?q_:M,P=s.altBoundary,D=P===void 0?!1:P,z=s.padding,F=z===void 0?0:z,N=GO(typeof F!="number"?F:qO(F,ly)),q=A===q_?$oe:q_,G=e.rects.popper,ie=e.elements[D?q:A],W=_ae(Ug(ie)?ie:ie.contextElement||Lf(e.elements.popper),b,E),Y=Gg(e.elements.reference),J=ZO({reference:Y,element:G,placement:d}),re=J4(Object.assign({},G,J)),he=A===q_?re:Y,fe={top:W.top-he.top+N.top,bottom:he.bottom-W.bottom+N.bottom,left:W.left-he.left+N.left,right:he.right-W.right+N.right},ce=e.modifiersData.offset;if(A===q_&&ce){var me=ce[d];Object.keys(fe).forEach(function(we){var ye=[Lu,Pu].indexOf(we)>=0?1:-1,Ue=[Fl,Pu].indexOf(we)>=0?"y":"x";fe[we]+=me[Ue]*ye})}return fe}function vae(e,n){n===void 0&&(n={});var s=n,l=s.placement,d=s.boundary,m=s.rootBoundary,b=s.padding,r=s.flipVariations,E=s.allowedAutoPlacements,M=E===void 0?Eh:E,A=qg(l),P=A?r?gM:gM.filter(function(F){return qg(F)===A}):ly,D=P.filter(function(F){return M.indexOf(F)>=0});D.length===0&&(D=P);var z=D.reduce(function(F,N){return F[N]=Dv(e,{placement:N,boundary:d,rootBoundary:m,padding:b})[gd(N)],F},{});return Object.keys(z).sort(function(F,N){return z[F]-z[N]})}function yae(e){if(gd(e)===n8)return[];var n=$2(e);return[yM(e),n,yM(n)]}function bae(e){var n=e.state,s=e.options,l=e.name;if(!n.modifiersData[l]._skip){for(var d=s.mainAxis,m=d===void 0?!0:d,b=s.altAxis,r=b===void 0?!0:b,E=s.fallbackPlacements,M=s.padding,A=s.boundary,P=s.rootBoundary,D=s.altBoundary,z=s.flipVariations,F=z===void 0?!0:z,N=s.allowedAutoPlacements,q=n.options.placement,G=gd(q),ie=G===q,W=E||(ie||!F?[$2(q)]:yae(q)),Y=[q].concat(W).reduce(function(ct,Mt){return ct.concat(gd(Mt)===n8?vae(n,{placement:Mt,boundary:A,rootBoundary:P,padding:M,flipVariations:F,allowedAutoPlacements:N}):Mt)},[]),J=n.rects.reference,re=n.rects.popper,he=new Map,fe=!0,ce=Y[0],me=0;me<Y.length;me++){var we=Y[me],ye=gd(we),Ue=qg(we)===Hg,Ne=[Fl,Pu].indexOf(ye)>=0,Pe=Ne?"width":"height",ve=Dv(n,{placement:we,boundary:A,rootBoundary:P,altBoundary:D,padding:M}),$e=Ne?Ue?Lu:Bl:Ue?Pu:Fl;J[Pe]>re[Pe]&&($e=$2($e));var Te=$2($e),Ae=[];if(m&&Ae.push(ve[ye]<=0),r&&Ae.push(ve[$e]<=0,ve[Te]<=0),Ae.every(function(ct){return ct})){ce=we,fe=!1;break}he.set(we,Ae)}if(fe)for(var Ve=F?3:1,We=function(ct){var Mt=Y.find(function(Ct){var gt=he.get(Ct);if(gt)return gt.slice(0,ct).every(function(Ke){return Ke})});if(Mt)return ce=Mt,"break"},ft=Ve;ft>0;ft--){var at=We(ft);if(at==="break")break}n.placement!==ce&&(n.modifiersData[l]._skip=!0,n.placement=ce,n.reset=!0)}}var xae={name:"flip",enabled:!0,phase:"main",fn:bae,requiresIfExists:["offset"],data:{_skip:!1}};function xM(e,n,s){return s===void 0&&(s={x:0,y:0}),{top:e.top-n.height-s.y,right:e.right-n.width+s.x,bottom:e.bottom-n.height+s.y,left:e.left-n.width-s.x}}function wM(e){return[Fl,Lu,Pu,Bl].some(function(n){return e[n]>=0})}function wae(e){var n=e.state,s=e.name,l=n.rects.reference,d=n.rects.popper,m=n.modifiersData.preventOverflow,b=Dv(n,{elementContext:"reference"}),r=Dv(n,{altBoundary:!0}),E=xM(b,l),M=xM(r,d,m),A=wM(E),P=wM(M);n.modifiersData[s]={referenceClippingOffsets:E,popperEscapeOffsets:M,isReferenceHidden:A,hasPopperEscaped:P},n.attributes.popper=Object.assign({},n.attributes.popper,{"data-popper-reference-hidden":A,"data-popper-escaped":P})}var Sae={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:wae};function Cae(e,n,s){var l=gd(e),d=[Bl,Fl].indexOf(l)>=0?-1:1,m=typeof s=="function"?s(Object.assign({},n,{placement:e})):s,b=m[0],r=m[1];return b=b||0,r=(r||0)*d,[Bl,Lu].indexOf(l)>=0?{x:r,y:b}:{x:b,y:r}}function Eae(e){var n=e.state,s=e.options,l=e.name,d=s.offset,m=d===void 0?[0,0]:d,b=Eh.reduce(function(A,P){return A[P]=Cae(P,n.rects,m),A},{}),r=b[n.placement],E=r.x,M=r.y;n.modifiersData.popperOffsets!=null&&(n.modifiersData.popperOffsets.x+=E,n.modifiersData.popperOffsets.y+=M),n.modifiersData[l]=b}var Tae={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:Eae};function Iae(e){var n=e.state,s=e.name;n.modifiersData[s]=ZO({reference:n.rects.reference,element:n.rects.popper,placement:n.placement})}var XO={name:"popperOffsets",enabled:!0,phase:"read",fn:Iae,data:{}};function kae(e){return e==="x"?"y":"x"}function Mae(e){var n=e.state,s=e.options,l=e.name,d=s.mainAxis,m=d===void 0?!0:d,b=s.altAxis,r=b===void 0?!1:b,E=s.boundary,M=s.rootBoundary,A=s.altBoundary,P=s.padding,D=s.tether,z=D===void 0?!0:D,F=s.tetherOffset,N=F===void 0?0:F,q=Dv(n,{boundary:E,rootBoundary:M,padding:P,altBoundary:A}),G=gd(n.placement),ie=qg(n.placement),W=!ie,Y=s8(G),J=kae(Y),re=n.modifiersData.popperOffsets,he=n.rects.reference,fe=n.rects.popper,ce=typeof N=="function"?N(Object.assign({},n.rects,{placement:n.placement})):N,me=typeof ce=="number"?{mainAxis:ce,altAxis:ce}:Object.assign({mainAxis:0,altAxis:0},ce),we=n.modifiersData.offset?n.modifiersData.offset[n.placement]:null,ye={x:0,y:0};if(re){if(m){var Ue,Ne=Y==="y"?Fl:Bl,Pe=Y==="y"?Pu:Lu,ve=Y==="y"?"height":"width",$e=re[Y],Te=$e+q[Ne],Ae=$e-q[Pe],Ve=z?-fe[ve]/2:0,We=ie===Hg?he[ve]:fe[ve],ft=ie===Hg?-fe[ve]:-he[ve],at=n.elements.arrow,ct=z&&at?i8(at):{width:0,height:0},Mt=n.modifiersData["arrow#persistent"]?n.modifiersData["arrow#persistent"].padding:jO(),Ct=Mt[Ne],gt=Mt[Pe],Ke=pv(0,he[ve],ct[ve]),Lt=W?he[ve]/2-Ve-Ke-Ct-me.mainAxis:We-Ke-Ct-me.mainAxis,xn=W?-he[ve]/2+Ve+Ke+gt+me.mainAxis:ft+Ke+gt+me.mainAxis,Ht=n.elements.arrow&&uy(n.elements.arrow),le=Ht?Y==="y"?Ht.clientTop||0:Ht.clientLeft||0:0,nt=(Ue=we?.[Y])!=null?Ue:0,Gt=$e+Lt-nt-le,an=$e+xn-nt,Qt=pv(z?Pb(Te,Gt):Te,$e,z?Np(Ae,an):Ae);re[Y]=Qt,ye[Y]=Qt-$e}if(r){var Zt,rn=Y==="x"?Fl:Bl,bt=Y==="x"?Pu:Lu,fn=re[J],pn=J==="y"?"height":"width",Vn=fn+q[rn],Nn=fn-q[bt],Ot=[Fl,Bl].indexOf(G)!==-1,Bn=(Zt=we?.[J])!=null?Zt:0,Sr=Ot?Vn:fn-he[pn]-fe[pn]-Bn+me.altAxis,Ur=Ot?fn+he[pn]+fe[pn]-Bn-me.altAxis:Nn,Kn=z&&Ot?nae(Sr,fn,Ur):pv(z?Sr:Vn,fn,z?Ur:Nn);re[J]=Kn,ye[J]=Kn-fn}n.modifiersData[l]=ye}}var Aae={name:"preventOverflow",enabled:!0,phase:"main",fn:Mae,requiresIfExists:["offset"]};function Rae(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function Pae(e){return e===Sc(e)||!Au(e)?o8(e):Rae(e)}function Lae(e){var n=e.getBoundingClientRect(),s=jg(n.width)/e.offsetWidth||1,l=jg(n.height)/e.offsetHeight||1;return s!==1||l!==1}function Oae(e,n,s){s===void 0&&(s=!1);var l=Au(n),d=Au(n)&&Lae(n),m=Lf(n),b=Gg(e,d),r={scrollLeft:0,scrollTop:0},E={x:0,y:0};return(l||!l&&!s)&&((wd(n)!=="body"||l8(m))&&(r=Pae(n)),Au(n)?(E=Gg(n,!0),E.x+=n.clientLeft,E.y+=n.clientTop):m&&(E.x=a8(m))),{x:b.left+r.scrollLeft-E.x,y:b.top+r.scrollTop-E.y,width:b.width,height:b.height}}function Dae(e){var n=new Map,s=new Set,l=[];e.forEach(function(m){n.set(m.name,m)});function d(m){s.add(m.name);var b=[].concat(m.requires||[],m.requiresIfExists||[]);b.forEach(function(r){if(!s.has(r)){var E=n.get(r);E&&d(E)}}),l.push(m)}return e.forEach(function(m){s.has(m.name)||d(m)}),l}function zae(e){var n=Dae(e);return Xoe.reduce(function(s,l){return s.concat(n.filter(function(d){return d.phase===l}))},[])}function Nae(e){var n;return function(){return n||(n=new Promise(function(s){Promise.resolve().then(function(){n=void 0,s(e())})})),n}}function Fae(e){var n=e.reduce(function(s,l){var d=s[l.name];return s[l.name]=d?Object.assign({},d,l,{options:Object.assign({},d.options,l.options),data:Object.assign({},d.data,l.data)}):l,s},{});return Object.keys(n).map(function(s){return n[s]})}var SM={placement:"bottom",modifiers:[],strategy:"absolute"};function CM(){for(var e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];return!n.some(function(l){return!(l&&typeof l.getBoundingClientRect=="function")})}function u8(e){e===void 0&&(e={});var n=e,s=n.defaultModifiers,l=s===void 0?[]:s,d=n.defaultOptions,m=d===void 0?SM:d;return function(b,r,E){E===void 0&&(E=m);var M={placement:"bottom",orderedModifiers:[],options:Object.assign({},SM,m),modifiersData:{},elements:{reference:b,popper:r},attributes:{},styles:{}},A=[],P=!1,D={state:M,setOptions:function(N){var q=typeof N=="function"?N(M.options):N;F(),M.options=Object.assign({},m,M.options,q),M.scrollParents={reference:Ug(b)?mv(b):b.contextElement?mv(b.contextElement):[],popper:mv(r)};var G=zae(Fae([].concat(l,M.options.modifiers)));return M.orderedModifiers=G.filter(function(ie){return ie.enabled}),z(),D.update()},forceUpdate:function(){if(!P){var N=M.elements,q=N.reference,G=N.popper;if(CM(q,G)){M.rects={reference:Oae(q,uy(G),M.options.strategy==="fixed"),popper:i8(G)},M.reset=!1,M.placement=M.options.placement,M.orderedModifiers.forEach(function(fe){return M.modifiersData[fe.name]=Object.assign({},fe.data)});for(var ie=0;ie<M.orderedModifiers.length;ie++){if(M.reset===!0){M.reset=!1,ie=-1;continue}var W=M.orderedModifiers[ie],Y=W.fn,J=W.options,re=J===void 0?{}:J,he=W.name;typeof Y=="function"&&(M=Y({state:M,options:re,name:he,instance:D})||M)}}}},update:Nae(function(){return new Promise(function(N){D.forceUpdate(),N(M)})}),destroy:function(){F(),P=!0}};if(!CM(b,r))return D;D.setOptions(E).then(function(N){!P&&E.onFirstUpdate&&E.onFirstUpdate(N)});function z(){M.orderedModifiers.forEach(function(N){var q=N.name,G=N.options,ie=G===void 0?{}:G,W=N.effect;if(typeof W=="function"){var Y=W({state:M,name:q,instance:D,options:ie}),J=function(){};A.push(Y||J)}})}function F(){A.forEach(function(N){return N()}),A=[]}return D}}u8();var Bae=[KO,XO,WO,HO];u8({defaultModifiers:Bae});var Vae=[KO,XO,WO,HO,Tae,xae,Aae,oae,Sae],$ae=u8({defaultModifiers:Vae});const Hae=["fixed","absolute"],Uae=bn({boundariesPadding:{type:Number,default:0},fallbackPlacements:{type:wt(Array),default:void 0},gpuAcceleration:{type:Boolean,default:!0},offset:{type:Number,default:12},placement:{type:String,values:Eh,default:"bottom"},popperOptions:{type:wt(Object),default:()=>({})},strategy:{type:String,values:Hae,default:"absolute"}}),JO=bn({...Uae,id:String,style:{type:wt([String,Array,Object])},className:{type:wt([String,Array,Object])},effect:{type:wt(String),default:"dark"},visible:Boolean,enterable:{type:Boolean,default:!0},pure:Boolean,focusOnShow:{type:Boolean,default:!1},trapping:{type:Boolean,default:!1},popperClass:{type:wt([String,Array,Object])},popperStyle:{type:wt([String,Array,Object])},referenceEl:{type:wt(Object)},triggerTargetEl:{type:wt(Object)},stopPopperMouseEvent:{type:Boolean,default:!0},virtualTriggering:Boolean,zIndex:Number,...Ta(["ariaLabel"])}),jae={mouseenter:e=>e instanceof MouseEvent,mouseleave:e=>e instanceof MouseEvent,focus:()=>!0,blur:()=>!0,close:()=>!0},Gae=(e,n)=>{const s=Re(!1),l=Re();return{focusStartRef:l,trapped:s,onFocusAfterReleased:M=>{var A;((A=M.detail)==null?void 0:A.focusReason)!=="pointer"&&(l.value="first",n("blur"))},onFocusAfterTrapped:()=>{n("focus")},onFocusInTrap:M=>{e.visible&&!s.value&&(M.target&&(l.value=M.target),s.value=!0)},onFocusoutPrevented:M=>{e.trapping||(M.detail.focusReason==="pointer"&&M.preventDefault(),s.value=!1)},onReleaseRequested:()=>{s.value=!1,n("close")}}},qae=(e,n=[])=>{const{placement:s,strategy:l,popperOptions:d}=e,m={placement:s,strategy:l,...d,modifiers:[...Kae(e),...n]};return Yae(m,d?.modifiers),m},Wae=e=>{if(Pi)return bl(e)};function Kae(e){const{offset:n,gpuAcceleration:s,fallbackPlacements:l}=e;return[{name:"offset",options:{offset:[0,n??12]}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5,fallbackPlacements:l}},{name:"computeStyles",options:{gpuAcceleration:s}}]}function Yae(e,n){n&&(e.modifiers=[...e.modifiers,...n??[]])}const Zae=(e,n,s={})=>{const l={name:"updateState",enabled:!0,phase:"write",fn:({state:E})=>{const M=Xae(E);Object.assign(b.value,M)},requires:["computeStyles"]},d=se(()=>{const{onFirstUpdate:E,placement:M,strategy:A,modifiers:P}=w(s);return{onFirstUpdate:E,placement:M||"bottom",strategy:A||"absolute",modifiers:[...P||[],l,{name:"applyStyles",enabled:!1}]}}),m=Zs(),b=Re({styles:{popper:{position:w(d).strategy,left:"0",top:"0"},arrow:{position:"absolute"}},attributes:{}}),r=()=>{m.value&&(m.value.destroy(),m.value=void 0)};return on(d,E=>{const M=w(m);M&&M.setOptions(E)},{deep:!0}),on([e,n],([E,M])=>{r(),!(!E||!M)&&(m.value=$ae(E,M,w(d)))}),Ls(()=>{r()}),{state:se(()=>{var E;return{...((E=w(m))==null?void 0:E.state)||{}}}),styles:se(()=>w(b).styles),attributes:se(()=>w(b).attributes),update:()=>{var E;return(E=w(m))==null?void 0:E.update()},forceUpdate:()=>{var E;return(E=w(m))==null?void 0:E.forceUpdate()},instanceRef:se(()=>w(m))}};function Xae(e){const n=Object.keys(e.elements),s=Lv(n.map(d=>[d,e.styles[d]||{}])),l=Lv(n.map(d=>[d,e.attributes[d]]));return{styles:s,attributes:l}}const Jae=0,Qae=e=>{const{popperInstanceRef:n,contentRef:s,triggerRef:l,role:d}=Gn(JS,void 0),m=Re(),b=Re(),r=se(()=>({name:"eventListeners",enabled:!!e.visible})),E=se(()=>{var G;const ie=w(m),W=(G=w(b))!=null?G:Jae;return{name:"arrow",enabled:!BL(ie),options:{element:ie,padding:W}}}),M=se(()=>({onFirstUpdate:()=>{F()},...qae(e,[w(E),w(r)])})),A=se(()=>Wae(e.referenceEl)||w(l)),{attributes:P,state:D,styles:z,update:F,forceUpdate:N,instanceRef:q}=Zae(A,s,M);return on(q,G=>n.value=G,{flush:"sync"}),Zr(()=>{on(()=>{var G;return(G=w(A))==null?void 0:G.getBoundingClientRect()},()=>{F()})}),{attributes:P,arrowRef:m,contentRef:s,instanceRef:q,state:D,styles:z,role:d,forceUpdate:N,update:F}},ele=(e,{attributes:n,styles:s,role:l})=>{const{nextZIndex:d}=u0(),m=dn("popper"),b=se(()=>w(n).popper),r=Re(gr(e.zIndex)?e.zIndex:d()),E=se(()=>[m.b(),m.is("pure",e.pure),m.is(e.effect),e.popperClass]),M=se(()=>[{zIndex:w(r)},w(s).popper,e.popperStyle||{}]),A=se(()=>l.value==="dialog"?"false":void 0),P=se(()=>w(s).arrow||{});return{ariaModal:A,arrowStyle:P,contentAttrs:b,contentClass:E,contentStyle:M,contentZIndex:r,updateZIndex:()=>{r.value=gr(e.zIndex)?e.zIndex:d()}}},tle=xe({name:"ElPopperContent"}),nle=xe({...tle,props:JO,emits:jae,setup(e,{expose:n,emit:s}){const l=e,{focusStartRef:d,trapped:m,onFocusAfterReleased:b,onFocusAfterTrapped:r,onFocusInTrap:E,onFocusoutPrevented:M,onReleaseRequested:A}=Gae(l,s),{attributes:P,arrowRef:D,contentRef:z,styles:F,instanceRef:N,role:q,update:G}=Qae(l),{ariaModal:ie,arrowStyle:W,contentAttrs:Y,contentClass:J,contentStyle:re,updateZIndex:he}=ele(l,{styles:F,attributes:P,role:q}),fe=Gn(xd,void 0),ce=Re();Ti(AO,{arrowStyle:W,arrowRef:D,arrowOffset:ce}),fe&&Ti(xd,{...fe,addInputId:ys,removeInputId:ys});let me;const we=(Ue=!0)=>{G(),Ue&&he()},ye=()=>{we(!1),l.visible&&l.focusOnShow?m.value=!0:l.visible===!1&&(m.value=!1)};return Zr(()=>{on(()=>l.triggerTargetEl,(Ue,Ne)=>{me?.(),me=void 0;const Pe=w(Ue||z.value),ve=w(Ne||z.value);xl(Pe)&&(me=on([q,()=>l.ariaLabel,ie,()=>l.id],$e=>{["role","aria-label","aria-modal","id"].forEach((Te,Ae)=>{ea($e[Ae])?Pe.removeAttribute(Te):Pe.setAttribute(Te,$e[Ae])})},{immediate:!0})),ve!==Pe&&xl(ve)&&["role","aria-label","aria-modal","id"].forEach($e=>{ve.removeAttribute($e)})},{immediate:!0}),on(()=>l.visible,ye,{immediate:!0})}),Ls(()=>{me?.(),me=void 0}),n({popperContentRef:z,popperInstanceRef:N,updatePopper:we,contentStyle:re}),(Ue,Ne)=>(Z(),ue("div",pi({ref_key:"contentRef",ref:z},w(Y),{style:w(re),class:w(J),tabindex:"-1",onMouseenter:Pe=>Ue.$emit("mouseenter",Pe),onMouseleave:Pe=>Ue.$emit("mouseleave",Pe)}),[st(w(h0),{trapped:w(m),"trap-on-focus-in":!0,"focus-trap-el":w(z),"focus-start-el":w(d),onFocusAfterTrapped:w(r),onFocusAfterReleased:w(b),onFocusin:w(E),onFocusoutPrevented:w(M),onReleaseRequested:w(A)},{default:mt(()=>[It(Ue.$slots,"default")]),_:3},8,["trapped","focus-trap-el","focus-start-el","onFocusAfterTrapped","onFocusAfterReleased","onFocusin","onFocusoutPrevented","onReleaseRequested"])],16,["onMouseenter","onMouseleave"]))}});var rle=En(nle,[["__file","content.vue"]]);const QO=Gr(goe),Mx=Symbol("elTooltip");function EM(){let e;const n=(l,d)=>{s(),e=window.setTimeout(l,d)},s=()=>window.clearTimeout(e);return iy(()=>s()),{registerTimeout:n,cancelTimeout:s}}const ile=bn({showAfter:{type:Number,default:0},hideAfter:{type:Number,default:200},autoClose:{type:Number,default:0}}),sle=({showAfter:e,hideAfter:n,autoClose:s,open:l,close:d})=>{const{registerTimeout:m}=EM(),{registerTimeout:b,cancelTimeout:r}=EM();return{onOpen:A=>{m(()=>{l(A);const P=w(s);gr(P)&&P>0&&b(()=>{d(A)},P)},w(e))},onClose:A=>{r(),m(()=>{d(A)},w(n))}}},Ax=bn({to:{type:wt([String,Object]),required:!0},disabled:Boolean}),Ao=bn({...ile,...JO,appendTo:{type:Ax.to.type},content:{type:String,default:""},rawContent:Boolean,persistent:Boolean,visible:{type:wt(Boolean),default:null},transition:String,teleported:{type:Boolean,default:!0},disabled:Boolean,...Ta(["ariaLabel"])}),Ig=bn({...OO,disabled:Boolean,trigger:{type:wt([String,Array]),default:"hover"},triggerKeys:{type:wt(Array),default:()=>[Un.enter,Un.numpadEnter,Un.space]}}),ole=wc({type:wt(Boolean),default:null}),ale=wc({type:wt(Function)}),lle=e=>{const n=`update:${e}`,s=`onUpdate:${e}`,l=[n],d={[e]:ole,[s]:ale};return{useModelToggle:({indicator:b,toggleReason:r,shouldHideWhenRouteChanges:E,shouldProceed:M,onShow:A,onHide:P})=>{const D=oi(),{emit:z}=D,F=D.props,N=se(()=>hr(F[s])),q=se(()=>F[e]===null),G=he=>{b.value!==!0&&(b.value=!0,r&&(r.value=he),hr(A)&&A(he))},ie=he=>{b.value!==!1&&(b.value=!1,r&&(r.value=he),hr(P)&&P(he))},W=he=>{if(F.disabled===!0||hr(M)&&!M())return;const fe=N.value&&Pi;fe&&z(n,!0),(q.value||!fe)&&G(he)},Y=he=>{if(F.disabled===!0||!Pi)return;const fe=N.value&&Pi;fe&&z(n,!1),(q.value||!fe)&&ie(he)},J=he=>{Ts(he)&&(F.disabled&&he?N.value&&z(n,!1):b.value!==he&&(he?G():ie()))},re=()=>{b.value?Y():W()};return on(()=>F[e],J),E&&D.appContext.config.globalProperties.$route!==void 0&&on(()=>({...D.proxy.$route}),()=>{E.value&&b.value&&Y()}),Zr(()=>{J(F[e])}),{hide:Y,show:W,toggle:re,hasUpdateHandler:N}},useModelToggleProps:d,useModelToggleEmits:l}},{useModelToggleProps:ule,useModelToggleEmits:cle,useModelToggle:dle}=lle("visible"),hle=bn({...PO,...ule,...Ao,...Ig,...LO,showArrow:{type:Boolean,default:!0}}),fle=[...cle,"before-show","before-hide","show","hide","open","close"],ple=(e,n)=>mn(e)?e.includes(n):e===n,og=(e,n,s)=>l=>{ple(w(e),n)&&s(l)},_o=(e,n,{checkForDefaultPrevented:s=!0}={})=>d=>{const m=e?.(d);if(s===!1||!m)return n?.(d)},TM=e=>n=>n.pointerType==="mouse"?e(n):void 0,mle=xe({name:"ElTooltipTrigger"}),gle=xe({...mle,props:Ig,setup(e,{expose:n}){const s=e,l=dn("tooltip"),{controlled:d,id:m,open:b,onOpen:r,onClose:E,onToggle:M}=Gn(Mx,void 0),A=Re(null),P=()=>{if(w(d)||s.disabled)return!0},D=cs(s,"trigger"),z=_o(P,og(D,"hover",r)),F=_o(P,og(D,"hover",E)),N=_o(P,og(D,"click",Y=>{Y.button===0&&M(Y)})),q=_o(P,og(D,"focus",r)),G=_o(P,og(D,"focus",E)),ie=_o(P,og(D,"contextmenu",Y=>{Y.preventDefault(),M(Y)})),W=_o(P,Y=>{const{code:J}=Y;s.triggerKeys.includes(J)&&(Y.preventDefault(),M(Y))});return n({triggerRef:A}),(Y,J)=>(Z(),Bt(w(Ioe),{id:w(m),"virtual-ref":Y.virtualRef,open:w(b),"virtual-triggering":Y.virtualTriggering,class:ge(w(l).e("trigger")),onBlur:w(G),onClick:w(N),onContextmenu:w(ie),onFocus:w(q),onMouseenter:w(z),onMouseleave:w(F),onKeydown:w(W)},{default:mt(()=>[It(Y.$slots,"default")]),_:3},8,["id","virtual-ref","open","virtual-triggering","class","onBlur","onClick","onContextmenu","onFocus","onMouseenter","onMouseleave","onKeydown"]))}});var _le=En(gle,[["__file","trigger.vue"]]);const vle=xe({__name:"teleport",props:Ax,setup(e){return(n,s)=>n.disabled?It(n.$slots,"default",{key:0}):(Z(),Bt(wV,{key:1,to:n.to},[It(n.$slots,"default")],8,["to"]))}});var yle=En(vle,[["__file","teleport.vue"]]);const f0=Gr(yle),eD=()=>{const e=xS(),n=YS(),s=se(()=>`${e.value}-popper-container-${n.prefix}`),l=se(()=>`#${s.value}`);return{id:s,selector:l}},ble=e=>{const n=document.createElement("div");return n.id=e,document.body.appendChild(n),n},xle=()=>{const{id:e,selector:n}=eD();return ox(()=>{Pi&&(document.body.querySelector(n.value)||ble(e.value))}),{id:e,selector:n}},wle=xe({name:"ElTooltipContent",inheritAttrs:!1}),Sle=xe({...wle,props:Ao,setup(e,{expose:n}){const s=e,{selector:l}=eD(),d=dn("tooltip"),m=Re(),b=kb(()=>{var Te;return(Te=m.value)==null?void 0:Te.popperContentRef});let r;const{controlled:E,id:M,open:A,trigger:P,onClose:D,onOpen:z,onShow:F,onHide:N,onBeforeShow:q,onBeforeHide:G}=Gn(Mx,void 0),ie=se(()=>s.transition||`${d.namespace.value}-fade-in-linear`),W=se(()=>s.persistent);Ls(()=>{r?.()});const Y=se(()=>w(W)?!0:w(A)),J=se(()=>s.disabled?!1:w(A)),re=se(()=>s.appendTo||l.value),he=se(()=>{var Te;return(Te=s.style)!=null?Te:{}}),fe=Re(!0),ce=()=>{N(),$e()&&th(document.body),fe.value=!0},me=()=>{if(w(E))return!0},we=_o(me,()=>{s.enterable&&w(P)==="hover"&&z()}),ye=_o(me,()=>{w(P)==="hover"&&D()}),Ue=()=>{var Te,Ae;(Ae=(Te=m.value)==null?void 0:Te.updatePopper)==null||Ae.call(Te),q?.()},Ne=()=>{G?.()},Pe=()=>{F(),r=FS(b,()=>{if(w(E))return;w(P)!=="hover"&&D()})},ve=()=>{s.virtualTriggering||D()},$e=Te=>{var Ae;const Ve=(Ae=m.value)==null?void 0:Ae.popperContentRef,We=Te?.relatedTarget||document.activeElement;return Ve?.contains(We)};return on(()=>w(A),Te=>{Te?fe.value=!1:r?.()},{flush:"post"}),on(()=>s.content,()=>{var Te,Ae;(Ae=(Te=m.value)==null?void 0:Te.updatePopper)==null||Ae.call(Te)}),n({contentRef:m,isFocusInsideContent:$e}),(Te,Ae)=>(Z(),Bt(w(f0),{disabled:!Te.teleported,to:w(re)},{default:mt(()=>[st(ha,{name:w(ie),onAfterLeave:ce,onBeforeEnter:Ue,onAfterEnter:Pe,onBeforeLeave:Ne},{default:mt(()=>[w(Y)?Wr((Z(),Bt(w(rle),pi({key:0,id:w(M),ref_key:"contentRef",ref:m},Te.$attrs,{"aria-label":Te.ariaLabel,"aria-hidden":fe.value,"boundaries-padding":Te.boundariesPadding,"fallback-placements":Te.fallbackPlacements,"gpu-acceleration":Te.gpuAcceleration,offset:Te.offset,placement:Te.placement,"popper-options":Te.popperOptions,strategy:Te.strategy,effect:Te.effect,enterable:Te.enterable,pure:Te.pure,"popper-class":Te.popperClass,"popper-style":[Te.popperStyle,w(he)],"reference-el":Te.referenceEl,"trigger-target-el":Te.triggerTargetEl,visible:w(J),"z-index":Te.zIndex,onMouseenter:w(we),onMouseleave:w(ye),onBlur:ve,onClose:w(D)}),{default:mt(()=>[It(Te.$slots,"default")]),_:3},16,["id","aria-label","aria-hidden","boundaries-padding","fallback-placements","gpu-acceleration","offset","placement","popper-options","strategy","effect","enterable","pure","popper-class","popper-style","reference-el","trigger-target-el","visible","z-index","onMouseenter","onMouseleave","onClose"])),[[Ki,w(J)]]):At("v-if",!0)]),_:3},8,["name"])]),_:3},8,["disabled","to"]))}});var Cle=En(Sle,[["__file","content.vue"]]);const Ele=xe({name:"ElTooltip"}),Tle=xe({...Ele,props:hle,emits:fle,setup(e,{expose:n,emit:s}){const l=e;xle();const d=dn("tooltip"),m=Ea(),b=Re(),r=Re(),E=()=>{var W;const Y=w(b);Y&&((W=Y.popperInstanceRef)==null||W.update())},M=Re(!1),A=Re(),{show:P,hide:D,hasUpdateHandler:z}=dle({indicator:M,toggleReason:A}),{onOpen:F,onClose:N}=sle({showAfter:cs(l,"showAfter"),hideAfter:cs(l,"hideAfter"),autoClose:cs(l,"autoClose"),open:P,close:D}),q=se(()=>Ts(l.visible)&&!z.value),G=se(()=>[d.b(),l.popperClass]);Ti(Mx,{controlled:q,id:m,open:n0(M),trigger:cs(l,"trigger"),onOpen:W=>{F(W)},onClose:W=>{N(W)},onToggle:W=>{w(M)?N(W):F(W)},onShow:()=>{s("show",A.value)},onHide:()=>{s("hide",A.value)},onBeforeShow:()=>{s("before-show",A.value)},onBeforeHide:()=>{s("before-hide",A.value)},updatePopper:E}),on(()=>l.disabled,W=>{W&&M.value&&(M.value=!1)});const ie=W=>{var Y;return(Y=r.value)==null?void 0:Y.isFocusInsideContent(W)};return qR(()=>M.value&&D()),n({popperRef:b,contentRef:r,isFocusInsideContent:ie,updatePopper:E,onOpen:F,onClose:N,hide:D}),(W,Y)=>(Z(),Bt(w(QO),{ref_key:"popperRef",ref:b,role:W.role},{default:mt(()=>[st(_le,{disabled:W.disabled,trigger:W.trigger,"trigger-keys":W.triggerKeys,"virtual-ref":W.virtualRef,"virtual-triggering":W.virtualTriggering},{default:mt(()=>[W.$slots.default?It(W.$slots,"default",{key:0}):At("v-if",!0)]),_:3},8,["disabled","trigger","trigger-keys","virtual-ref","virtual-triggering"]),st(Cle,{ref_key:"contentRef",ref:r,"aria-label":W.ariaLabel,"boundaries-padding":W.boundariesPadding,content:W.content,disabled:W.disabled,effect:W.effect,enterable:W.enterable,"fallback-placements":W.fallbackPlacements,"hide-after":W.hideAfter,"gpu-acceleration":W.gpuAcceleration,offset:W.offset,persistent:W.persistent,"popper-class":w(G),"popper-style":W.popperStyle,placement:W.placement,"popper-options":W.popperOptions,pure:W.pure,"raw-content":W.rawContent,"reference-el":W.referenceEl,"trigger-target-el":W.triggerTargetEl,"show-after":W.showAfter,strategy:W.strategy,teleported:W.teleported,transition:W.transition,"virtual-triggering":W.virtualTriggering,"z-index":W.zIndex,"append-to":W.appendTo},{default:mt(()=>[It(W.$slots,"content",{},()=>[W.rawContent?(Z(),ue("span",{key:0,innerHTML:W.content},null,8,["innerHTML"])):(Z(),ue("span",{key:1},gn(W.content),1))]),W.showArrow?(Z(),Bt(w(yoe),{key:0,"arrow-offset":W.arrowOffset},null,8,["arrow-offset"])):At("v-if",!0)]),_:3},8,["aria-label","boundaries-padding","content","disabled","effect","enterable","fallback-placements","hide-after","gpu-acceleration","offset","persistent","popper-class","popper-style","placement","popper-options","pure","raw-content","reference-el","trigger-target-el","show-after","strategy","teleported","transition","virtual-triggering","z-index","append-to"])]),_:3},8,["role"]))}});var Ile=En(Tle,[["__file","tooltip.vue"]]);const Na=Gr(Ile),kle=bn({valueKey:{type:String,default:"value"},modelValue:{type:[String,Number],default:""},debounce:{type:Number,default:300},placement:{type:wt(String),values:["top","top-start","top-end","bottom","bottom-start","bottom-end"],default:"bottom-start"},fetchSuggestions:{type:wt([Function,Array]),default:ys},popperClass:{type:String,default:""},triggerOnFocus:{type:Boolean,default:!0},selectWhenUnmatched:{type:Boolean,default:!1},hideLoading:{type:Boolean,default:!1},teleported:Ao.teleported,appendTo:Ao.appendTo,highlightFirstItem:{type:Boolean,default:!1},fitInputWidth:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},name:String,...Ta(["ariaLabel"])}),Mle={[Nr]:e=>ir(e),[Go]:e=>ir(e),[mi]:e=>ir(e),focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent,clear:()=>!0,select:e=>Yr(e)},tD="ElAutocomplete",Ale=xe({name:tD,inheritAttrs:!1}),Rle=xe({...Ale,props:kle,emits:Mle,setup(e,{expose:n,emit:s}){const l=e,d=oy(),m=wh(),b=Ba(),r=dn("autocomplete"),E=Re(),M=Re(),A=Re(),P=Re();let D=!1,z=!1;const F=Re([]),N=Re(-1),q=Re(""),G=Re(!1),ie=Re(!1),W=Re(!1),Y=Ea(),J=se(()=>m.style),re=se(()=>(F.value.length>0||W.value)&&G.value),he=se(()=>!l.hideLoading&&W.value),fe=se(()=>E.value?Array.from(E.value.$el.querySelectorAll("input")):[]),ce=()=>{re.value&&(q.value=`${E.value.$el.offsetWidth}px`)},me=()=>{N.value=-1},we=async gt=>{if(ie.value)return;const Ke=Lt=>{W.value=!1,!ie.value&&(mn(Lt)?(F.value=Lt,N.value=l.highlightFirstItem?0:-1):No(tD,"autocomplete suggestions must be an array"))};if(W.value=!0,mn(l.fetchSuggestions))Ke(l.fetchSuggestions);else{const Lt=await l.fetchSuggestions(gt,Ke);mn(Lt)&&Ke(Lt)}},ye=Vl(we,l.debounce),Ue=gt=>{const Ke=!!gt;if(s(Go,gt),s(Nr,gt),ie.value=!1,G.value||(G.value=Ke),!l.triggerOnFocus&&!gt){ie.value=!0,F.value=[];return}ye(gt)},Ne=gt=>{var Ke;b.value||(((Ke=gt.target)==null?void 0:Ke.tagName)!=="INPUT"||fe.value.includes(document.activeElement))&&(G.value=!0)},Pe=gt=>{s(mi,gt)},ve=gt=>{var Ke;if(z)z=!1;else{G.value=!0,s("focus",gt);const Lt=(Ke=l.modelValue)!=null?Ke:"";l.triggerOnFocus&&!D&&ye(String(Lt))}},$e=gt=>{setTimeout(()=>{var Ke;if((Ke=A.value)!=null&&Ke.isFocusInsideContent()){z=!0;return}G.value&&We(),s("blur",gt)})},Te=()=>{G.value=!1,s(Nr,""),s("clear")},Ae=async()=>{re.value&&N.value>=0&&N.value<F.value.length?ct(F.value[N.value]):l.selectWhenUnmatched&&(s("select",{value:l.modelValue}),F.value=[],N.value=-1)},Ve=gt=>{re.value&&(gt.preventDefault(),gt.stopPropagation(),We())},We=()=>{G.value=!1},ft=()=>{var gt;(gt=E.value)==null||gt.focus()},at=()=>{var gt;(gt=E.value)==null||gt.blur()},ct=async gt=>{s(Go,gt[l.valueKey]),s(Nr,gt[l.valueKey]),s("select",gt),F.value=[],N.value=-1},Mt=gt=>{if(!re.value||W.value)return;if(gt<0){N.value=-1;return}gt>=F.value.length&&(gt=F.value.length-1);const Ke=M.value.querySelector(`.${r.be("suggestion","wrap")}`),xn=Ke.querySelectorAll(`.${r.be("suggestion","list")} li`)[gt],Ht=Ke.scrollTop,{offsetTop:le,scrollHeight:nt}=xn;le+nt>Ht+Ke.clientHeight&&(Ke.scrollTop+=nt),le<Ht&&(Ke.scrollTop-=nt),N.value=gt,E.value.ref.setAttribute("aria-activedescendant",`${Y.value}-item-${N.value}`)},Ct=FS(P,()=>{var gt;(gt=A.value)!=null&&gt.isFocusInsideContent()||re.value&&We()});return Ls(()=>{Ct?.()}),Zr(()=>{E.value.ref.setAttribute("role","textbox"),E.value.ref.setAttribute("aria-autocomplete","list"),E.value.ref.setAttribute("aria-controls","id"),E.value.ref.setAttribute("aria-activedescendant",`${Y.value}-item-${N.value}`),D=E.value.ref.hasAttribute("readonly")}),n({highlightedIndex:N,activated:G,loading:W,inputRef:E,popperRef:A,suggestions:F,handleSelect:ct,handleKeyEnter:Ae,focus:ft,blur:at,close:We,highlight:Mt,getData:we}),(gt,Ke)=>(Z(),Bt(w(Na),{ref_key:"popperRef",ref:A,visible:w(re),placement:gt.placement,"fallback-placements":["bottom-start","top-start"],"popper-class":[w(r).e("popper"),gt.popperClass],teleported:gt.teleported,"append-to":gt.appendTo,"gpu-acceleration":!1,pure:"","manual-mode":"",effect:"light",trigger:"click",transition:`${w(r).namespace.value}-zoom-in-top`,persistent:"",role:"listbox",onBeforeShow:ce,onHide:me},{content:mt(()=>[ae("div",{ref_key:"regionRef",ref:M,class:ge([w(r).b("suggestion"),w(r).is("loading",w(he))]),style:fr({[gt.fitInputWidth?"width":"minWidth"]:q.value,outline:"none"}),role:"region"},[st(w(Id),{id:w(Y),tag:"ul","wrap-class":w(r).be("suggestion","wrap"),"view-class":w(r).be("suggestion","list"),role:"listbox"},{default:mt(()=>[w(he)?(Z(),ue("li",{key:0},[It(gt.$slots,"loading",{},()=>[st(w(rr),{class:ge(w(r).is("loading"))},{default:mt(()=>[st(w(gc))]),_:1},8,["class"])])])):(Z(!0),ue(cr,{key:1},Ei(F.value,(Lt,xn)=>(Z(),ue("li",{id:`${w(Y)}-item-${xn}`,key:xn,class:ge({highlighted:N.value===xn}),role:"option","aria-selected":N.value===xn,onClick:Ht=>ct(Lt)},[It(gt.$slots,"default",{item:Lt},()=>[ei(gn(Lt[gt.valueKey]),1)])],10,["id","aria-selected","onClick"]))),128))]),_:3},8,["id","wrap-class","view-class"])],6)]),default:mt(()=>[ae("div",{ref_key:"listboxRef",ref:P,class:ge([w(r).b(),gt.$attrs.class]),style:fr(w(J)),role:"combobox","aria-haspopup":"listbox","aria-expanded":w(re),"aria-owns":w(Y)},[st(w(nl),pi({ref_key:"inputRef",ref:E},w(d),{clearable:gt.clearable,disabled:w(b),name:gt.name,"model-value":gt.modelValue,"aria-label":gt.ariaLabel,onInput:Ue,onChange:Pe,onFocus:ve,onBlur:$e,onClear:Te,onKeydown:[Ps(Er(Lt=>Mt(N.value-1),["prevent"]),["up"]),Ps(Er(Lt=>Mt(N.value+1),["prevent"]),["down"]),Ps(Ae,["enter"]),Ps(We,["tab"]),Ps(Ve,["esc"])],onMousedown:Ne}),cu({_:2},[gt.$slots.prepend?{name:"prepend",fn:mt(()=>[It(gt.$slots,"prepend")])}:void 0,gt.$slots.append?{name:"append",fn:mt(()=>[It(gt.$slots,"append")])}:void 0,gt.$slots.prefix?{name:"prefix",fn:mt(()=>[It(gt.$slots,"prefix")])}:void 0,gt.$slots.suffix?{name:"suffix",fn:mt(()=>[It(gt.$slots,"suffix")])}:void 0]),1040,["clearable","disabled","name","model-value","aria-label","onKeydown"])],14,["aria-expanded","aria-owns"])]),_:3},8,["visible","placement","popper-class","teleported","append-to","transition"]))}});var Ple=En(Rle,[["__file","autocomplete.vue"]]);const Lle=Gr(Ple),Ole=bn({size:{type:[Number,String],values:Cd,default:"",validator:e=>gr(e)},shape:{type:String,values:["circle","square"],default:"circle"},icon:{type:bs},src:{type:String,default:""},alt:String,srcSet:String,fit:{type:wt(String),default:"cover"}}),Dle={error:e=>e instanceof Event},zle=xe({name:"ElAvatar"}),Nle=xe({...zle,props:Ole,emits:Dle,setup(e,{emit:n}){const s=e,l=dn("avatar"),d=Re(!1),m=se(()=>{const{size:M,icon:A,shape:P}=s,D=[l.b()];return ir(M)&&D.push(l.m(M)),A&&D.push(l.m("icon")),P&&D.push(l.m(P)),D}),b=se(()=>{const{size:M}=s;return gr(M)?l.cssVarBlock({size:ho(M)||""}):void 0}),r=se(()=>({objectFit:s.fit}));on(()=>s.src,()=>d.value=!1);function E(M){d.value=!0,n("error",M)}return(M,A)=>(Z(),ue("span",{class:ge(w(m)),style:fr(w(b))},[(M.src||M.srcSet)&&!d.value?(Z(),ue("img",{key:0,src:M.src,alt:M.alt,srcset:M.srcSet,style:fr(w(r)),onError:E},null,44,["src","alt","srcset"])):M.icon?(Z(),Bt(w(rr),{key:1},{default:mt(()=>[(Z(),Bt(si(M.icon)))]),_:1})):It(M.$slots,"default",{key:2})],6))}});var Fle=En(Nle,[["__file","avatar.vue"]]);const Ble=Gr(Fle),Vle={visibilityHeight:{type:Number,default:200},target:{type:String,default:""},right:{type:Number,default:40},bottom:{type:Number,default:40}},$le={click:e=>e instanceof MouseEvent},Hle=(e,n,s)=>{const l=Zs(),d=Zs(),m=Re(!1),b=()=>{l.value&&(m.value=l.value.scrollTop>=e.visibilityHeight)},r=M=>{var A;(A=l.value)==null||A.scrollTo({top:0,behavior:"smooth"}),n("click",M)},E=UL(b,300,!0);return Is(d,"scroll",E),Zr(()=>{var M;d.value=document,l.value=document.documentElement,e.target&&(l.value=(M=document.querySelector(e.target))!=null?M:void 0,l.value||No(s,`target does not exist: ${e.target}`),d.value=l.value),b()}),{visible:m,handleClick:r}},nD="ElBacktop",Ule=xe({name:nD}),jle=xe({...Ule,props:Vle,emits:$le,setup(e,{emit:n}){const s=e,l=dn("backtop"),{handleClick:d,visible:m}=Hle(s,n,nD),b=se(()=>({right:`${s.right}px`,bottom:`${s.bottom}px`}));return(r,E)=>(Z(),Bt(ha,{name:`${w(l).namespace.value}-fade-in`},{default:mt(()=>[w(m)?(Z(),ue("div",{key:0,style:fr(w(b)),class:ge(w(l).b()),onClick:Er(w(d),["stop"])},[It(r.$slots,"default",{},()=>[st(w(rr),{class:ge(w(l).e("icon"))},{default:mt(()=>[st(w(lO))]),_:1},8,["class"])])],14,["onClick"])):At("v-if",!0)]),_:3},8,["name"]))}});var Gle=En(jle,[["__file","backtop.vue"]]);const qle=Gr(Gle),Wle=bn({value:{type:[String,Number],default:""},max:{type:Number,default:99},isDot:Boolean,hidden:Boolean,type:{type:String,values:["primary","success","warning","info","danger"],default:"danger"},showZero:{type:Boolean,default:!0},color:String,badgeStyle:{type:wt([String,Object,Array])},offset:{type:wt(Array),default:[0,0]},badgeClass:{type:String}}),Kle=xe({name:"ElBadge"}),Yle=xe({...Kle,props:Wle,setup(e,{expose:n}){const s=e,l=dn("badge"),d=se(()=>s.isDot?"":gr(s.value)&&gr(s.max)?s.max<s.value?`${s.max}+`:`${s.value}`:`${s.value}`),m=se(()=>{var b,r,E,M,A;return[{backgroundColor:s.color,marginRight:ho(-((r=(b=s.offset)==null?void 0:b[0])!=null?r:0)),marginTop:ho((M=(E=s.offset)==null?void 0:E[1])!=null?M:0)},(A=s.badgeStyle)!=null?A:{}]});return n({content:d}),(b,r)=>(Z(),ue("div",{class:ge(w(l).b())},[It(b.$slots,"default"),st(ha,{name:`${w(l).namespace.value}-zoom-in-center`,persisted:""},{default:mt(()=>[Wr(ae("sup",{class:ge([w(l).e("content"),w(l).em("content",b.type),w(l).is("fixed",!!b.$slots.default),w(l).is("dot",b.isDot),w(l).is("hide-zero",!b.showZero&&s.value===0),b.badgeClass]),style:fr(w(m))},[It(b.$slots,"content",{value:w(d)},()=>[ei(gn(w(d)),1)])],6),[[Ki,!b.hidden&&(w(d)||b.isDot||b.$slots.content)]])]),_:3},8,["name"])],2))}});var Zle=En(Yle,[["__file","badge.vue"]]);const rD=Gr(Zle),iD=Symbol("breadcrumbKey"),Xle=bn({separator:{type:String,default:"/"},separatorIcon:{type:bs}}),Jle=xe({name:"ElBreadcrumb"}),Qle=xe({...Jle,props:Xle,setup(e){const n=e,{t:s}=Oi(),l=dn("breadcrumb"),d=Re();return Ti(iD,n),Zr(()=>{const m=d.value.querySelectorAll(`.${l.e("item")}`);m.length&&m[m.length-1].setAttribute("aria-current","page")}),(m,b)=>(Z(),ue("div",{ref_key:"breadcrumb",ref:d,class:ge(w(l).b()),"aria-label":w(s)("el.breadcrumb.label"),role:"navigation"},[It(m.$slots,"default")],10,["aria-label"]))}});var eue=En(Qle,[["__file","breadcrumb.vue"]]);const tue=bn({to:{type:wt([String,Object]),default:""},replace:Boolean}),nue=xe({name:"ElBreadcrumbItem"}),rue=xe({...nue,props:tue,setup(e){const n=e,s=oi(),l=Gn(iD,void 0),d=dn("breadcrumb"),m=s.appContext.config.globalProperties.$router,b=Re(),r=()=>{!n.to||!m||(n.replace?m.replace(n.to):m.push(n.to))};return(E,M)=>{var A,P;return Z(),ue("span",{class:ge(w(d).e("item"))},[ae("span",{ref_key:"link",ref:b,class:ge([w(d).e("inner"),w(d).is("link",!!E.to)]),role:"link",onClick:r},[It(E.$slots,"default")],2),(A=w(l))!=null&&A.separatorIcon?(Z(),Bt(w(rr),{key:0,class:ge(w(d).e("separator"))},{default:mt(()=>[(Z(),Bt(si(w(l).separatorIcon)))]),_:1},8,["class"])):(Z(),ue("span",{key:1,class:ge(w(d).e("separator")),role:"presentation"},gn((P=w(l))==null?void 0:P.separator),3))],2)}}});var sD=En(rue,[["__file","breadcrumb-item.vue"]]);const iue=Gr(eue,{BreadcrumbItem:sD}),sue=ao(sD),oD=Symbol("buttonGroupContextKey"),ch=({from:e,replacement:n,scope:s,version:l,ref:d,type:m="API"},b)=>{on(()=>w(b),r=>{},{immediate:!0})},oue=(e,n)=>{ch({from:"type.text",replacement:"link",version:"3.0.0",scope:"props",ref:"https://element-plus.org/en-US/component/button.html#button-attributes"},se(()=>e.type==="text"));const s=Gn(oD,void 0),l=yx("button"),{form:d}=Fa(),m=Lo(se(()=>s?.size)),b=Ba(),r=Re(),E=qo(),M=se(()=>e.type||s?.type||""),A=se(()=>{var F,N,q;return(q=(N=e.autoInsertSpace)!=null?N:(F=l.value)==null?void 0:F.autoInsertSpace)!=null?q:!1}),P=se(()=>e.tag==="button"?{ariaDisabled:b.value||e.loading,disabled:b.value||e.loading,autofocus:e.autofocus,type:e.nativeType}:{}),D=se(()=>{var F;const N=(F=E.default)==null?void 0:F.call(E);if(A.value&&N?.length===1){const q=N[0];if(q?.type===r0){const G=q.children;return new RegExp("^\\p{Unified_Ideograph}{2}$","u").test(G.trim())}}return!1});return{_disabled:b,_size:m,_type:M,_ref:r,_props:P,shouldAddSpace:D,handleClick:F=>{if(b.value||e.loading){F.stopPropagation();return}e.nativeType==="reset"&&d?.resetFields(),n("click",F)}}},Q4=["default","primary","success","warning","info","danger","text",""],aue=["button","submit","reset"],e6=bn({size:Fo,disabled:Boolean,type:{type:String,values:Q4,default:""},icon:{type:bs},nativeType:{type:String,values:aue,default:"button"},loading:Boolean,loadingIcon:{type:bs,default:()=>gc},plain:Boolean,text:Boolean,link:Boolean,bg:Boolean,autofocus:Boolean,round:Boolean,circle:Boolean,color:String,dark:Boolean,autoInsertSpace:{type:Boolean,default:void 0},tag:{type:wt([String,Object]),default:"button"}}),lue={click:e=>e instanceof MouseEvent};function za(e,n){uue(e)&&(e="100%");var s=cue(e);return e=n===360?e:Math.min(n,Math.max(0,parseFloat(e))),s&&(e=parseInt(String(e*n),10)/100),Math.abs(e-n)<1e-6?1:(n===360?e=(e<0?e%n+n:e%n)/parseFloat(String(n)):e=e%n/parseFloat(String(n)),e)}function b2(e){return Math.min(1,Math.max(0,e))}function uue(e){return typeof e=="string"&&e.indexOf(".")!==-1&&parseFloat(e)===1}function cue(e){return typeof e=="string"&&e.indexOf("%")!==-1}function aD(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function x2(e){return e<=1?"".concat(Number(e)*100,"%"):e}function Ap(e){return e.length===1?"0"+e:String(e)}function due(e,n,s){return{r:za(e,255)*255,g:za(n,255)*255,b:za(s,255)*255}}function IM(e,n,s){e=za(e,255),n=za(n,255),s=za(s,255);var l=Math.max(e,n,s),d=Math.min(e,n,s),m=0,b=0,r=(l+d)/2;if(l===d)b=0,m=0;else{var E=l-d;switch(b=r>.5?E/(2-l-d):E/(l+d),l){case e:m=(n-s)/E+(n<s?6:0);break;case n:m=(s-e)/E+2;break;case s:m=(e-n)/E+4;break}m/=6}return{h:m,s:b,l:r}}function n4(e,n,s){return s<0&&(s+=1),s>1&&(s-=1),s<1/6?e+(n-e)*(6*s):s<1/2?n:s<2/3?e+(n-e)*(2/3-s)*6:e}function hue(e,n,s){var l,d,m;if(e=za(e,360),n=za(n,100),s=za(s,100),n===0)d=s,m=s,l=s;else{var b=s<.5?s*(1+n):s+n-s*n,r=2*s-b;l=n4(r,b,e+1/3),d=n4(r,b,e),m=n4(r,b,e-1/3)}return{r:l*255,g:d*255,b:m*255}}function kM(e,n,s){e=za(e,255),n=za(n,255),s=za(s,255);var l=Math.max(e,n,s),d=Math.min(e,n,s),m=0,b=l,r=l-d,E=l===0?0:r/l;if(l===d)m=0;else{switch(l){case e:m=(n-s)/r+(n<s?6:0);break;case n:m=(s-e)/r+2;break;case s:m=(e-n)/r+4;break}m/=6}return{h:m,s:E,v:b}}function fue(e,n,s){e=za(e,360)*6,n=za(n,100),s=za(s,100);var l=Math.floor(e),d=e-l,m=s*(1-n),b=s*(1-d*n),r=s*(1-(1-d)*n),E=l%6,M=[s,b,m,m,r,s][E],A=[r,s,s,b,m,m][E],P=[m,m,r,s,s,b][E];return{r:M*255,g:A*255,b:P*255}}function MM(e,n,s,l){var d=[Ap(Math.round(e).toString(16)),Ap(Math.round(n).toString(16)),Ap(Math.round(s).toString(16))];return l&&d[0].startsWith(d[0].charAt(1))&&d[1].startsWith(d[1].charAt(1))&&d[2].startsWith(d[2].charAt(1))?d[0].charAt(0)+d[1].charAt(0)+d[2].charAt(0):d.join("")}function pue(e,n,s,l,d){var m=[Ap(Math.round(e).toString(16)),Ap(Math.round(n).toString(16)),Ap(Math.round(s).toString(16)),Ap(mue(l))];return d&&m[0].startsWith(m[0].charAt(1))&&m[1].startsWith(m[1].charAt(1))&&m[2].startsWith(m[2].charAt(1))&&m[3].startsWith(m[3].charAt(1))?m[0].charAt(0)+m[1].charAt(0)+m[2].charAt(0)+m[3].charAt(0):m.join("")}function mue(e){return Math.round(parseFloat(e)*255).toString(16)}function AM(e){return nu(e)/255}function nu(e){return parseInt(e,16)}function gue(e){return{r:e>>16,g:(e&65280)>>8,b:e&255}}var t6={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function _ue(e){var n={r:0,g:0,b:0},s=1,l=null,d=null,m=null,b=!1,r=!1;return typeof e=="string"&&(e=bue(e)),typeof e=="object"&&(Qd(e.r)&&Qd(e.g)&&Qd(e.b)?(n=due(e.r,e.g,e.b),b=!0,r=String(e.r).substr(-1)==="%"?"prgb":"rgb"):Qd(e.h)&&Qd(e.s)&&Qd(e.v)?(l=x2(e.s),d=x2(e.v),n=fue(e.h,l,d),b=!0,r="hsv"):Qd(e.h)&&Qd(e.s)&&Qd(e.l)&&(l=x2(e.s),m=x2(e.l),n=hue(e.h,l,m),b=!0,r="hsl"),Object.prototype.hasOwnProperty.call(e,"a")&&(s=e.a)),s=aD(s),{ok:b,format:e.format||r,r:Math.min(255,Math.max(n.r,0)),g:Math.min(255,Math.max(n.g,0)),b:Math.min(255,Math.max(n.b,0)),a:s}}var vue="[-\\+]?\\d+%?",yue="[-\\+]?\\d*\\.\\d+%?",_f="(?:".concat(yue,")|(?:").concat(vue,")"),r4="[\\s|\\(]+(".concat(_f,")[,|\\s]+(").concat(_f,")[,|\\s]+(").concat(_f,")\\s*\\)?"),i4="[\\s|\\(]+(".concat(_f,")[,|\\s]+(").concat(_f,")[,|\\s]+(").concat(_f,")[,|\\s]+(").concat(_f,")\\s*\\)?"),ac={CSS_UNIT:new RegExp(_f),rgb:new RegExp("rgb"+r4),rgba:new RegExp("rgba"+i4),hsl:new RegExp("hsl"+r4),hsla:new RegExp("hsla"+i4),hsv:new RegExp("hsv"+r4),hsva:new RegExp("hsva"+i4),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function bue(e){if(e=e.trim().toLowerCase(),e.length===0)return!1;var n=!1;if(t6[e])e=t6[e],n=!0;else if(e==="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var s=ac.rgb.exec(e);return s?{r:s[1],g:s[2],b:s[3]}:(s=ac.rgba.exec(e),s?{r:s[1],g:s[2],b:s[3],a:s[4]}:(s=ac.hsl.exec(e),s?{h:s[1],s:s[2],l:s[3]}:(s=ac.hsla.exec(e),s?{h:s[1],s:s[2],l:s[3],a:s[4]}:(s=ac.hsv.exec(e),s?{h:s[1],s:s[2],v:s[3]}:(s=ac.hsva.exec(e),s?{h:s[1],s:s[2],v:s[3],a:s[4]}:(s=ac.hex8.exec(e),s?{r:nu(s[1]),g:nu(s[2]),b:nu(s[3]),a:AM(s[4]),format:n?"name":"hex8"}:(s=ac.hex6.exec(e),s?{r:nu(s[1]),g:nu(s[2]),b:nu(s[3]),format:n?"name":"hex"}:(s=ac.hex4.exec(e),s?{r:nu(s[1]+s[1]),g:nu(s[2]+s[2]),b:nu(s[3]+s[3]),a:AM(s[4]+s[4]),format:n?"name":"hex8"}:(s=ac.hex3.exec(e),s?{r:nu(s[1]+s[1]),g:nu(s[2]+s[2]),b:nu(s[3]+s[3]),format:n?"name":"hex"}:!1)))))))))}function Qd(e){return!!ac.CSS_UNIT.exec(String(e))}var lD=function(){function e(n,s){n===void 0&&(n=""),s===void 0&&(s={});var l;if(n instanceof e)return n;typeof n=="number"&&(n=gue(n)),this.originalInput=n;var d=_ue(n);this.originalInput=n,this.r=d.r,this.g=d.g,this.b=d.b,this.a=d.a,this.roundA=Math.round(100*this.a)/100,this.format=(l=s.format)!==null&&l!==void 0?l:d.format,this.gradientType=s.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=d.ok}return e.prototype.isDark=function(){return this.getBrightness()<128},e.prototype.isLight=function(){return!this.isDark()},e.prototype.getBrightness=function(){var n=this.toRgb();return(n.r*299+n.g*587+n.b*114)/1e3},e.prototype.getLuminance=function(){var n=this.toRgb(),s,l,d,m=n.r/255,b=n.g/255,r=n.b/255;return m<=.03928?s=m/12.92:s=Math.pow((m+.055)/1.055,2.4),b<=.03928?l=b/12.92:l=Math.pow((b+.055)/1.055,2.4),r<=.03928?d=r/12.92:d=Math.pow((r+.055)/1.055,2.4),.2126*s+.7152*l+.0722*d},e.prototype.getAlpha=function(){return this.a},e.prototype.setAlpha=function(n){return this.a=aD(n),this.roundA=Math.round(100*this.a)/100,this},e.prototype.isMonochrome=function(){var n=this.toHsl().s;return n===0},e.prototype.toHsv=function(){var n=kM(this.r,this.g,this.b);return{h:n.h*360,s:n.s,v:n.v,a:this.a}},e.prototype.toHsvString=function(){var n=kM(this.r,this.g,this.b),s=Math.round(n.h*360),l=Math.round(n.s*100),d=Math.round(n.v*100);return this.a===1?"hsv(".concat(s,", ").concat(l,"%, ").concat(d,"%)"):"hsva(".concat(s,", ").concat(l,"%, ").concat(d,"%, ").concat(this.roundA,")")},e.prototype.toHsl=function(){var n=IM(this.r,this.g,this.b);return{h:n.h*360,s:n.s,l:n.l,a:this.a}},e.prototype.toHslString=function(){var n=IM(this.r,this.g,this.b),s=Math.round(n.h*360),l=Math.round(n.s*100),d=Math.round(n.l*100);return this.a===1?"hsl(".concat(s,", ").concat(l,"%, ").concat(d,"%)"):"hsla(".concat(s,", ").concat(l,"%, ").concat(d,"%, ").concat(this.roundA,")")},e.prototype.toHex=function(n){return n===void 0&&(n=!1),MM(this.r,this.g,this.b,n)},e.prototype.toHexString=function(n){return n===void 0&&(n=!1),"#"+this.toHex(n)},e.prototype.toHex8=function(n){return n===void 0&&(n=!1),pue(this.r,this.g,this.b,this.a,n)},e.prototype.toHex8String=function(n){return n===void 0&&(n=!1),"#"+this.toHex8(n)},e.prototype.toHexShortString=function(n){return n===void 0&&(n=!1),this.a===1?this.toHexString(n):this.toHex8String(n)},e.prototype.toRgb=function(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}},e.prototype.toRgbString=function(){var n=Math.round(this.r),s=Math.round(this.g),l=Math.round(this.b);return this.a===1?"rgb(".concat(n,", ").concat(s,", ").concat(l,")"):"rgba(".concat(n,", ").concat(s,", ").concat(l,", ").concat(this.roundA,")")},e.prototype.toPercentageRgb=function(){var n=function(s){return"".concat(Math.round(za(s,255)*100),"%")};return{r:n(this.r),g:n(this.g),b:n(this.b),a:this.a}},e.prototype.toPercentageRgbString=function(){var n=function(s){return Math.round(za(s,255)*100)};return this.a===1?"rgb(".concat(n(this.r),"%, ").concat(n(this.g),"%, ").concat(n(this.b),"%)"):"rgba(".concat(n(this.r),"%, ").concat(n(this.g),"%, ").concat(n(this.b),"%, ").concat(this.roundA,")")},e.prototype.toName=function(){if(this.a===0)return"transparent";if(this.a<1)return!1;for(var n="#"+MM(this.r,this.g,this.b,!1),s=0,l=Object.entries(t6);s<l.length;s++){var d=l[s],m=d[0],b=d[1];if(n===b)return m}return!1},e.prototype.toString=function(n){var s=!!n;n=n??this.format;var l=!1,d=this.a<1&&this.a>=0,m=!s&&d&&(n.startsWith("hex")||n==="name");return m?n==="name"&&this.a===0?this.toName():this.toRgbString():(n==="rgb"&&(l=this.toRgbString()),n==="prgb"&&(l=this.toPercentageRgbString()),(n==="hex"||n==="hex6")&&(l=this.toHexString()),n==="hex3"&&(l=this.toHexString(!0)),n==="hex4"&&(l=this.toHex8String(!0)),n==="hex8"&&(l=this.toHex8String()),n==="name"&&(l=this.toName()),n==="hsl"&&(l=this.toHslString()),n==="hsv"&&(l=this.toHsvString()),l||this.toHexString())},e.prototype.toNumber=function(){return(Math.round(this.r)<<16)+(Math.round(this.g)<<8)+Math.round(this.b)},e.prototype.clone=function(){return new e(this.toString())},e.prototype.lighten=function(n){n===void 0&&(n=10);var s=this.toHsl();return s.l+=n/100,s.l=b2(s.l),new e(s)},e.prototype.brighten=function(n){n===void 0&&(n=10);var s=this.toRgb();return s.r=Math.max(0,Math.min(255,s.r-Math.round(255*-(n/100)))),s.g=Math.max(0,Math.min(255,s.g-Math.round(255*-(n/100)))),s.b=Math.max(0,Math.min(255,s.b-Math.round(255*-(n/100)))),new e(s)},e.prototype.darken=function(n){n===void 0&&(n=10);var s=this.toHsl();return s.l-=n/100,s.l=b2(s.l),new e(s)},e.prototype.tint=function(n){return n===void 0&&(n=10),this.mix("white",n)},e.prototype.shade=function(n){return n===void 0&&(n=10),this.mix("black",n)},e.prototype.desaturate=function(n){n===void 0&&(n=10);var s=this.toHsl();return s.s-=n/100,s.s=b2(s.s),new e(s)},e.prototype.saturate=function(n){n===void 0&&(n=10);var s=this.toHsl();return s.s+=n/100,s.s=b2(s.s),new e(s)},e.prototype.greyscale=function(){return this.desaturate(100)},e.prototype.spin=function(n){var s=this.toHsl(),l=(s.h+n)%360;return s.h=l<0?360+l:l,new e(s)},e.prototype.mix=function(n,s){s===void 0&&(s=50);var l=this.toRgb(),d=new e(n).toRgb(),m=s/100,b={r:(d.r-l.r)*m+l.r,g:(d.g-l.g)*m+l.g,b:(d.b-l.b)*m+l.b,a:(d.a-l.a)*m+l.a};return new e(b)},e.prototype.analogous=function(n,s){n===void 0&&(n=6),s===void 0&&(s=30);var l=this.toHsl(),d=360/s,m=[this];for(l.h=(l.h-(d*n>>1)+720)%360;--n;)l.h=(l.h+d)%360,m.push(new e(l));return m},e.prototype.complement=function(){var n=this.toHsl();return n.h=(n.h+180)%360,new e(n)},e.prototype.monochromatic=function(n){n===void 0&&(n=6);for(var s=this.toHsv(),l=s.h,d=s.s,m=s.v,b=[],r=1/n;n--;)b.push(new e({h:l,s:d,v:m})),m=(m+r)%1;return b},e.prototype.splitcomplement=function(){var n=this.toHsl(),s=n.h;return[this,new e({h:(s+72)%360,s:n.s,l:n.l}),new e({h:(s+216)%360,s:n.s,l:n.l})]},e.prototype.onBackground=function(n){var s=this.toRgb(),l=new e(n).toRgb(),d=s.a+l.a*(1-s.a);return new e({r:(s.r*s.a+l.r*l.a*(1-s.a))/d,g:(s.g*s.a+l.g*l.a*(1-s.a))/d,b:(s.b*s.a+l.b*l.a*(1-s.a))/d,a:d})},e.prototype.triad=function(){return this.polyad(3)},e.prototype.tetrad=function(){return this.polyad(4)},e.prototype.polyad=function(n){for(var s=this.toHsl(),l=s.h,d=[this],m=360/n,b=1;b<n;b++)d.push(new e({h:(l+b*m)%360,s:s.s,l:s.l}));return d},e.prototype.equals=function(n){return this.toRgbString()===new e(n).toRgbString()},e}();function uf(e,n=20){return e.mix("#141414",n).toString()}function xue(e){const n=Ba(),s=dn("button");return se(()=>{let l={},d=e.color;if(d){const m=d.match(/var\((.*?)\)/);m&&(d=window.getComputedStyle(window.document.documentElement).getPropertyValue(m[1]));const b=new lD(d),r=e.dark?b.tint(20).toString():uf(b,20);if(e.plain)l=s.cssVarBlock({"bg-color":e.dark?uf(b,90):b.tint(90).toString(),"text-color":d,"border-color":e.dark?uf(b,50):b.tint(50).toString(),"hover-text-color":`var(${s.cssVarName("color-white")})`,"hover-bg-color":d,"hover-border-color":d,"active-bg-color":r,"active-text-color":`var(${s.cssVarName("color-white")})`,"active-border-color":r}),n.value&&(l[s.cssVarBlockName("disabled-bg-color")]=e.dark?uf(b,90):b.tint(90).toString(),l[s.cssVarBlockName("disabled-text-color")]=e.dark?uf(b,50):b.tint(50).toString(),l[s.cssVarBlockName("disabled-border-color")]=e.dark?uf(b,80):b.tint(80).toString());else{const E=e.dark?uf(b,30):b.tint(30).toString(),M=b.isDark()?`var(${s.cssVarName("color-white")})`:`var(${s.cssVarName("color-black")})`;if(l=s.cssVarBlock({"bg-color":d,"text-color":M,"border-color":d,"hover-bg-color":E,"hover-text-color":M,"hover-border-color":E,"active-bg-color":r,"active-border-color":r}),n.value){const A=e.dark?uf(b,50):b.tint(50).toString();l[s.cssVarBlockName("disabled-bg-color")]=A,l[s.cssVarBlockName("disabled-text-color")]=e.dark?"rgba(255, 255, 255, 0.5)":`var(${s.cssVarName("color-white")})`,l[s.cssVarBlockName("disabled-border-color")]=A}}}return l})}const wue=xe({name:"ElButton"}),Sue=xe({...wue,props:e6,emits:lue,setup(e,{expose:n,emit:s}){const l=e,d=xue(l),m=dn("button"),{_ref:b,_size:r,_type:E,_disabled:M,_props:A,shouldAddSpace:P,handleClick:D}=oue(l,s),z=se(()=>[m.b(),m.m(E.value),m.m(r.value),m.is("disabled",M.value),m.is("loading",l.loading),m.is("plain",l.plain),m.is("round",l.round),m.is("circle",l.circle),m.is("text",l.text),m.is("link",l.link),m.is("has-bg",l.bg)]);return n({ref:b,size:r,type:E,disabled:M,shouldAddSpace:P}),(F,N)=>(Z(),Bt(si(F.tag),pi({ref_key:"_ref",ref:b},w(A),{class:w(z),style:w(d),onClick:w(D)}),{default:mt(()=>[F.loading?(Z(),ue(cr,{key:0},[F.$slots.loading?It(F.$slots,"loading",{key:0}):(Z(),Bt(w(rr),{key:1,class:ge(w(m).is("loading"))},{default:mt(()=>[(Z(),Bt(si(F.loadingIcon)))]),_:1},8,["class"]))],64)):F.icon||F.$slots.icon?(Z(),Bt(w(rr),{key:1},{default:mt(()=>[F.icon?(Z(),Bt(si(F.icon),{key:0})):It(F.$slots,"icon",{key:1})]),_:3})):At("v-if",!0),F.$slots.default?(Z(),ue("span",{key:2,class:ge({[w(m).em("text","expand")]:w(P)})},[It(F.$slots,"default")],2)):At("v-if",!0)]),_:3},16,["class","style","onClick"]))}});var Cue=En(Sue,[["__file","button.vue"]]);const Eue={size:e6.size,type:e6.type},Tue=xe({name:"ElButtonGroup"}),Iue=xe({...Tue,props:Eue,setup(e){const n=e;Ti(oD,ts({size:cs(n,"size"),type:cs(n,"type")}));const s=dn("button");return(l,d)=>(Z(),ue("div",{class:ge(w(s).b("group"))},[It(l.$slots,"default")],2))}});var uD=En(Iue,[["__file","button-group.vue"]]);const ua=Gr(Cue,{ButtonGroup:uD}),cD=ao(uD);var H2={exports:{}},kue=H2.exports,RM;function Mue(){return RM||(RM=1,function(e,n){(function(s,l){e.exports=l()})(kue,function(){var s=1e3,l=6e4,d=36e5,m="millisecond",b="second",r="minute",E="hour",M="day",A="week",P="month",D="quarter",z="year",F="date",N="Invalid Date",q=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,G=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,ie={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(Ne){var Pe=["th","st","nd","rd"],ve=Ne%100;return"["+Ne+(Pe[(ve-20)%10]||Pe[ve]||Pe[0])+"]"}},W=function(Ne,Pe,ve){var $e=String(Ne);return!$e||$e.length>=Pe?Ne:""+Array(Pe+1-$e.length).join(ve)+Ne},Y={s:W,z:function(Ne){var Pe=-Ne.utcOffset(),ve=Math.abs(Pe),$e=Math.floor(ve/60),Te=ve%60;return(Pe<=0?"+":"-")+W($e,2,"0")+":"+W(Te,2,"0")},m:function Ne(Pe,ve){if(Pe.date()<ve.date())return-Ne(ve,Pe);var $e=12*(ve.year()-Pe.year())+(ve.month()-Pe.month()),Te=Pe.clone().add($e,P),Ae=ve-Te<0,Ve=Pe.clone().add($e+(Ae?-1:1),P);return+(-($e+(ve-Te)/(Ae?Te-Ve:Ve-Te))||0)},a:function(Ne){return Ne<0?Math.ceil(Ne)||0:Math.floor(Ne)},p:function(Ne){return{M:P,y:z,w:A,d:M,D:F,h:E,m:r,s:b,ms:m,Q:D}[Ne]||String(Ne||"").toLowerCase().replace(/s$/,"")},u:function(Ne){return Ne===void 0}},J="en",re={};re[J]=ie;var he="$isDayjsObject",fe=function(Ne){return Ne instanceof ye||!(!Ne||!Ne[he])},ce=function Ne(Pe,ve,$e){var Te;if(!Pe)return J;if(typeof Pe=="string"){var Ae=Pe.toLowerCase();re[Ae]&&(Te=Ae),ve&&(re[Ae]=ve,Te=Ae);var Ve=Pe.split("-");if(!Te&&Ve.length>1)return Ne(Ve[0])}else{var We=Pe.name;re[We]=Pe,Te=We}return!$e&&Te&&(J=Te),Te||!$e&&J},me=function(Ne,Pe){if(fe(Ne))return Ne.clone();var ve=typeof Pe=="object"?Pe:{};return ve.date=Ne,ve.args=arguments,new ye(ve)},we=Y;we.l=ce,we.i=fe,we.w=function(Ne,Pe){return me(Ne,{locale:Pe.$L,utc:Pe.$u,x:Pe.$x,$offset:Pe.$offset})};var ye=function(){function Ne(ve){this.$L=ce(ve.locale,null,!0),this.parse(ve),this.$x=this.$x||ve.x||{},this[he]=!0}var Pe=Ne.prototype;return Pe.parse=function(ve){this.$d=function($e){var Te=$e.date,Ae=$e.utc;if(Te===null)return new Date(NaN);if(we.u(Te))return new Date;if(Te instanceof Date)return new Date(Te);if(typeof Te=="string"&&!/Z$/i.test(Te)){var Ve=Te.match(q);if(Ve){var We=Ve[2]-1||0,ft=(Ve[7]||"0").substring(0,3);return Ae?new Date(Date.UTC(Ve[1],We,Ve[3]||1,Ve[4]||0,Ve[5]||0,Ve[6]||0,ft)):new Date(Ve[1],We,Ve[3]||1,Ve[4]||0,Ve[5]||0,Ve[6]||0,ft)}}return new Date(Te)}(ve),this.init()},Pe.init=function(){var ve=this.$d;this.$y=ve.getFullYear(),this.$M=ve.getMonth(),this.$D=ve.getDate(),this.$W=ve.getDay(),this.$H=ve.getHours(),this.$m=ve.getMinutes(),this.$s=ve.getSeconds(),this.$ms=ve.getMilliseconds()},Pe.$utils=function(){return we},Pe.isValid=function(){return this.$d.toString()!==N},Pe.isSame=function(ve,$e){var Te=me(ve);return this.startOf($e)<=Te&&Te<=this.endOf($e)},Pe.isAfter=function(ve,$e){return me(ve)<this.startOf($e)},Pe.isBefore=function(ve,$e){return this.endOf($e)<me(ve)},Pe.$g=function(ve,$e,Te){return we.u(ve)?this[$e]:this.set(Te,ve)},Pe.unix=function(){return Math.floor(this.valueOf()/1e3)},Pe.valueOf=function(){return this.$d.getTime()},Pe.startOf=function(ve,$e){var Te=this,Ae=!!we.u($e)||$e,Ve=we.p(ve),We=function(Lt,xn){var Ht=we.w(Te.$u?Date.UTC(Te.$y,xn,Lt):new Date(Te.$y,xn,Lt),Te);return Ae?Ht:Ht.endOf(M)},ft=function(Lt,xn){return we.w(Te.toDate()[Lt].apply(Te.toDate("s"),(Ae?[0,0,0,0]:[23,59,59,999]).slice(xn)),Te)},at=this.$W,ct=this.$M,Mt=this.$D,Ct="set"+(this.$u?"UTC":"");switch(Ve){case z:return Ae?We(1,0):We(31,11);case P:return Ae?We(1,ct):We(0,ct+1);case A:var gt=this.$locale().weekStart||0,Ke=(at<gt?at+7:at)-gt;return We(Ae?Mt-Ke:Mt+(6-Ke),ct);case M:case F:return ft(Ct+"Hours",0);case E:return ft(Ct+"Minutes",1);case r:return ft(Ct+"Seconds",2);case b:return ft(Ct+"Milliseconds",3);default:return this.clone()}},Pe.endOf=function(ve){return this.startOf(ve,!1)},Pe.$set=function(ve,$e){var Te,Ae=we.p(ve),Ve="set"+(this.$u?"UTC":""),We=(Te={},Te[M]=Ve+"Date",Te[F]=Ve+"Date",Te[P]=Ve+"Month",Te[z]=Ve+"FullYear",Te[E]=Ve+"Hours",Te[r]=Ve+"Minutes",Te[b]=Ve+"Seconds",Te[m]=Ve+"Milliseconds",Te)[Ae],ft=Ae===M?this.$D+($e-this.$W):$e;if(Ae===P||Ae===z){var at=this.clone().set(F,1);at.$d[We](ft),at.init(),this.$d=at.set(F,Math.min(this.$D,at.daysInMonth())).$d}else We&&this.$d[We](ft);return this.init(),this},Pe.set=function(ve,$e){return this.clone().$set(ve,$e)},Pe.get=function(ve){return this[we.p(ve)]()},Pe.add=function(ve,$e){var Te,Ae=this;ve=Number(ve);var Ve=we.p($e),We=function(ct){var Mt=me(Ae);return we.w(Mt.date(Mt.date()+Math.round(ct*ve)),Ae)};if(Ve===P)return this.set(P,this.$M+ve);if(Ve===z)return this.set(z,this.$y+ve);if(Ve===M)return We(1);if(Ve===A)return We(7);var ft=(Te={},Te[r]=l,Te[E]=d,Te[b]=s,Te)[Ve]||1,at=this.$d.getTime()+ve*ft;return we.w(at,this)},Pe.subtract=function(ve,$e){return this.add(-1*ve,$e)},Pe.format=function(ve){var $e=this,Te=this.$locale();if(!this.isValid())return Te.invalidDate||N;var Ae=ve||"YYYY-MM-DDTHH:mm:ssZ",Ve=we.z(this),We=this.$H,ft=this.$m,at=this.$M,ct=Te.weekdays,Mt=Te.months,Ct=Te.meridiem,gt=function(xn,Ht,le,nt){return xn&&(xn[Ht]||xn($e,Ae))||le[Ht].slice(0,nt)},Ke=function(xn){return we.s(We%12||12,xn,"0")},Lt=Ct||function(xn,Ht,le){var nt=xn<12?"AM":"PM";return le?nt.toLowerCase():nt};return Ae.replace(G,function(xn,Ht){return Ht||function(le){switch(le){case"YY":return String($e.$y).slice(-2);case"YYYY":return we.s($e.$y,4,"0");case"M":return at+1;case"MM":return we.s(at+1,2,"0");case"MMM":return gt(Te.monthsShort,at,Mt,3);case"MMMM":return gt(Mt,at);case"D":return $e.$D;case"DD":return we.s($e.$D,2,"0");case"d":return String($e.$W);case"dd":return gt(Te.weekdaysMin,$e.$W,ct,2);case"ddd":return gt(Te.weekdaysShort,$e.$W,ct,3);case"dddd":return ct[$e.$W];case"H":return String(We);case"HH":return we.s(We,2,"0");case"h":return Ke(1);case"hh":return Ke(2);case"a":return Lt(We,ft,!0);case"A":return Lt(We,ft,!1);case"m":return String(ft);case"mm":return we.s(ft,2,"0");case"s":return String($e.$s);case"ss":return we.s($e.$s,2,"0");case"SSS":return we.s($e.$ms,3,"0");case"Z":return Ve}return null}(xn)||Ve.replace(":","")})},Pe.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},Pe.diff=function(ve,$e,Te){var Ae,Ve=this,We=we.p($e),ft=me(ve),at=(ft.utcOffset()-this.utcOffset())*l,ct=this-ft,Mt=function(){return we.m(Ve,ft)};switch(We){case z:Ae=Mt()/12;break;case P:Ae=Mt();break;case D:Ae=Mt()/3;break;case A:Ae=(ct-at)/6048e5;break;case M:Ae=(ct-at)/864e5;break;case E:Ae=ct/d;break;case r:Ae=ct/l;break;case b:Ae=ct/s;break;default:Ae=ct}return Te?Ae:we.a(Ae)},Pe.daysInMonth=function(){return this.endOf(P).$D},Pe.$locale=function(){return re[this.$L]},Pe.locale=function(ve,$e){if(!ve)return this.$L;var Te=this.clone(),Ae=ce(ve,$e,!0);return Ae&&(Te.$L=Ae),Te},Pe.clone=function(){return we.w(this.$d,this)},Pe.toDate=function(){return new Date(this.valueOf())},Pe.toJSON=function(){return this.isValid()?this.toISOString():null},Pe.toISOString=function(){return this.$d.toISOString()},Pe.toString=function(){return this.$d.toUTCString()},Ne}(),Ue=ye.prototype;return me.prototype=Ue,[["$ms",m],["$s",b],["$m",r],["$H",E],["$W",M],["$M",P],["$y",z],["$D",F]].forEach(function(Ne){Ue[Ne[1]]=function(Pe){return this.$g(Pe,Ne[0],Ne[1])}}),me.extend=function(Ne,Pe){return Ne.$i||(Ne(Pe,ye,me),Ne.$i=!0),me},me.locale=ce,me.isDayjs=fe,me.unix=function(Ne){return me(1e3*Ne)},me.en=re[J],me.Ls=re,me.p={},me})}(H2)),H2.exports}var Aue=Mue();const jr=bc(Aue),s4=(e,n)=>[e>0?e-1:void 0,e,e<n?e+1:void 0],xf=e=>Array.from(Array.from({length:e}).keys()),dD=e=>e.replace(/\W?m{1,2}|\W?ZZ/g,"").replace(/\W?h{1,2}|\W?s{1,3}|\W?a/gi,"").trim(),hD=e=>e.replace(/\W?D{1,2}|\W?Do|\W?d{1,4}|\W?M{1,4}|\W?Y{2,4}/g,"").trim(),PM=function(e,n){const s=wf(e),l=wf(n);return s&&l?e.getTime()===n.getTime():!s&&!l?e===n:!1},LM=function(e,n){const s=mn(e),l=mn(n);return s&&l?e.length!==n.length?!1:e.every((d,m)=>PM(d,n[m])):!s&&!l?PM(e,n):!1},OM=function(e,n,s){const l=ru(n)||n==="x"?jr(e).locale(s):jr(e,n).locale(s);return l.isValid()?l:void 0},DM=function(e,n,s){return ru(n)?e:n==="x"?+e:jr(e).locale(s).format(n)},o4=(e,n)=>{var s;const l=[],d=n?.();for(let m=0;m<e;m++)l.push((s=d?.includes(m))!=null?s:!1);return l},w2=e=>mn(e)?e.map(n=>n.toDate()):e.toDate(),Rue=(e,n)=>{const s=e.subtract(1,"month").endOf("month").date();return xf(n).map((l,d)=>s-(n-d-1))},Pue=e=>{const n=e.daysInMonth();return xf(n).map((s,l)=>l+1)},Lue=e=>xf(e.length/7).map(n=>{const s=n*7;return e.slice(s,s+7)}),Oue=bn({selectedDay:{type:wt(Object)},range:{type:wt(Array)},date:{type:wt(Object),required:!0},hideHeader:{type:Boolean}}),Due={pick:e=>Yr(e)};var U2={exports:{}},zue=U2.exports,zM;function Nue(){return zM||(zM=1,function(e,n){(function(s,l){e.exports=l()})(zue,function(){return function(s,l,d){var m=l.prototype,b=function(P){return P&&(P.indexOf?P:P.s)},r=function(P,D,z,F,N){var q=P.name?P:P.$locale(),G=b(q[D]),ie=b(q[z]),W=G||ie.map(function(J){return J.slice(0,F)});if(!N)return W;var Y=q.weekStart;return W.map(function(J,re){return W[(re+(Y||0))%7]})},E=function(){return d.Ls[d.locale()]},M=function(P,D){return P.formats[D]||function(z){return z.replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(F,N,q){return N||q.slice(1)})}(P.formats[D.toUpperCase()])},A=function(){var P=this;return{months:function(D){return D?D.format("MMMM"):r(P,"months")},monthsShort:function(D){return D?D.format("MMM"):r(P,"monthsShort","months",3)},firstDayOfWeek:function(){return P.$locale().weekStart||0},weekdays:function(D){return D?D.format("dddd"):r(P,"weekdays")},weekdaysMin:function(D){return D?D.format("dd"):r(P,"weekdaysMin","weekdays",2)},weekdaysShort:function(D){return D?D.format("ddd"):r(P,"weekdaysShort","weekdays",3)},longDateFormat:function(D){return M(P.$locale(),D)},meridiem:this.$locale().meridiem,ordinal:this.$locale().ordinal}};m.localeData=function(){return A.bind(this)()},d.localeData=function(){var P=E();return{firstDayOfWeek:function(){return P.weekStart||0},weekdays:function(){return d.weekdays()},weekdaysShort:function(){return d.weekdaysShort()},weekdaysMin:function(){return d.weekdaysMin()},months:function(){return d.months()},monthsShort:function(){return d.monthsShort()},longDateFormat:function(D){return M(P,D)},meridiem:P.meridiem,ordinal:P.ordinal}},d.months=function(){return r(E(),"months")},d.monthsShort=function(){return r(E(),"monthsShort","months",3)},d.weekdays=function(P){return r(E(),"weekdays",null,null,P)},d.weekdaysShort=function(P){return r(E(),"weekdaysShort","weekdays",3,P)},d.weekdaysMin=function(P){return r(E(),"weekdaysMin","weekdays",2,P)}}})}(U2)),U2.exports}var Fue=Nue();const fD=bc(Fue),Bue=["year","years","month","months","date","dates","week","datetime","datetimerange","daterange","monthrange","yearrange"],a4=["sun","mon","tue","wed","thu","fri","sat"],Vue=(e,n)=>{jr.extend(fD);const s=jr.localeData().firstDayOfWeek(),{t:l,lang:d}=Oi(),m=jr().locale(d.value),b=se(()=>!!e.range&&!!e.range.length),r=se(()=>{let D=[];if(b.value){const[z,F]=e.range,N=xf(F.date()-z.date()+1).map(ie=>({text:z.date()+ie,type:"current"}));let q=N.length%7;q=q===0?0:7-q;const G=xf(q).map((ie,W)=>({text:W+1,type:"next"}));D=N.concat(G)}else{const z=e.date.startOf("month").day(),F=Rue(e.date,(z-s+7)%7).map(ie=>({text:ie,type:"prev"})),N=Pue(e.date).map(ie=>({text:ie,type:"current"}));D=[...F,...N];const q=7-(D.length%7||7),G=xf(q).map((ie,W)=>({text:W+1,type:"next"}));D=D.concat(G)}return Lue(D)}),E=se(()=>{const D=s;return D===0?a4.map(z=>l(`el.datepicker.weeks.${z}`)):a4.slice(D).concat(a4.slice(0,D)).map(z=>l(`el.datepicker.weeks.${z}`))}),M=(D,z)=>{switch(z){case"prev":return e.date.startOf("month").subtract(1,"month").date(D);case"next":return e.date.startOf("month").add(1,"month").date(D);case"current":return e.date.date(D)}};return{now:m,isInRange:b,rows:r,weekDays:E,getFormattedDate:M,handlePickDay:({text:D,type:z})=>{const F=M(D,z);n("pick",F)},getSlotData:({text:D,type:z})=>{const F=M(D,z);return{isSelected:F.isSame(e.selectedDay),type:`${z}-month`,day:F.format("YYYY-MM-DD"),date:F.toDate()}}}},$ue=xe({name:"DateTable"}),Hue=xe({...$ue,props:Oue,emits:Due,setup(e,{expose:n,emit:s}){const l=e,{isInRange:d,now:m,rows:b,weekDays:r,getFormattedDate:E,handlePickDay:M,getSlotData:A}=Vue(l,s),P=dn("calendar-table"),D=dn("calendar-day"),z=({text:F,type:N})=>{const q=[N];if(N==="current"){const G=E(F,N);G.isSame(l.selectedDay,"day")&&q.push(D.is("selected")),G.isSame(m,"day")&&q.push(D.is("today"))}return q};return n({getFormattedDate:E}),(F,N)=>(Z(),ue("table",{class:ge([w(P).b(),w(P).is("range",w(d))]),cellspacing:"0",cellpadding:"0"},[F.hideHeader?At("v-if",!0):(Z(),ue("thead",{key:0},[ae("tr",null,[(Z(!0),ue(cr,null,Ei(w(r),q=>(Z(),ue("th",{key:q,scope:"col"},gn(q),1))),128))])])),ae("tbody",null,[(Z(!0),ue(cr,null,Ei(w(b),(q,G)=>(Z(),ue("tr",{key:G,class:ge({[w(P).e("row")]:!0,[w(P).em("row","hide-border")]:G===0&&F.hideHeader})},[(Z(!0),ue(cr,null,Ei(q,(ie,W)=>(Z(),ue("td",{key:W,class:ge(z(ie)),onClick:Y=>w(M)(ie)},[ae("div",{class:ge(w(D).b())},[It(F.$slots,"date-cell",{data:w(A)(ie)},()=>[ae("span",null,gn(ie.text),1)])],2)],10,["onClick"]))),128))],2))),128))])],2))}});var NM=En(Hue,[["__file","date-table.vue"]]);const Uue=(e,n)=>{const s=e.endOf("month"),l=n.startOf("month"),m=s.isSame(l,"week")?l.add(1,"week"):l;return[[e,s],[m.startOf("week"),n]]},jue=(e,n)=>{const s=e.endOf("month"),l=e.add(1,"month").startOf("month"),d=s.isSame(l,"week")?l.add(1,"week"):l,m=d.endOf("month"),b=n.startOf("month"),r=m.isSame(b,"week")?b.add(1,"week"):b;return[[e,s],[d.startOf("week"),m],[r.startOf("week"),n]]},Gue=(e,n,s)=>{const{lang:l}=Oi(),d=Re(),m=jr().locale(l.value),b=se({get(){return e.modelValue?E.value:d.value},set(q){if(!q)return;d.value=q;const G=q.toDate();n(Go,G),n(Nr,G)}}),r=se(()=>{if(!e.range||!mn(e.range)||e.range.length!==2||e.range.some(W=>!wf(W)))return[];const q=e.range.map(W=>jr(W).locale(l.value)),[G,ie]=q;return G.isAfter(ie)?[]:G.isSame(ie,"month")?z(G,ie):G.add(1,"month").month()!==ie.month()?[]:z(G,ie)}),E=se(()=>e.modelValue?jr(e.modelValue).locale(l.value):b.value||(r.value.length?r.value[0][0]:m)),M=se(()=>E.value.subtract(1,"month").date(1)),A=se(()=>E.value.add(1,"month").date(1)),P=se(()=>E.value.subtract(1,"year").date(1)),D=se(()=>E.value.add(1,"year").date(1)),z=(q,G)=>{const ie=q.startOf("week"),W=G.endOf("week"),Y=ie.get("month"),J=W.get("month");return Y===J?[[ie,W]]:(Y+1)%12===J?Uue(ie,W):Y+2===J||(Y+1)%11===J?jue(ie,W):[]},F=q=>{b.value=q};return{calculateValidatedDateRange:z,date:E,realSelectedDay:b,pickDay:F,selectDate:q=>{const ie={"prev-month":M.value,"next-month":A.value,"prev-year":P.value,"next-year":D.value,today:m}[q];ie.isSame(E.value,"day")||F(ie)},validatedRange:r}},que=e=>mn(e)&&e.length===2&&e.every(n=>wf(n)),Wue=bn({modelValue:{type:Date},range:{type:wt(Array),validator:que}}),Kue={[Nr]:e=>wf(e),[Go]:e=>wf(e)},Yue="ElCalendar",Zue=xe({name:Yue}),Xue=xe({...Zue,props:Wue,emits:Kue,setup(e,{expose:n,emit:s}){const l=e,d=dn("calendar"),{calculateValidatedDateRange:m,date:b,pickDay:r,realSelectedDay:E,selectDate:M,validatedRange:A}=Gue(l,s),{t:P}=Oi(),D=se(()=>{const z=`el.datepicker.month${b.value.format("M")}`;return`${b.value.year()} ${P("el.datepicker.year")} ${P(z)}`});return n({selectedDay:E,pickDay:r,selectDate:M,calculateValidatedDateRange:m}),(z,F)=>(Z(),ue("div",{class:ge(w(d).b())},[ae("div",{class:ge(w(d).e("header"))},[It(z.$slots,"header",{date:w(D)},()=>[ae("div",{class:ge(w(d).e("title"))},gn(w(D)),3),w(A).length===0?(Z(),ue("div",{key:0,class:ge(w(d).e("button-group"))},[st(w(cD),null,{default:mt(()=>[st(w(ua),{size:"small",onClick:N=>w(M)("prev-month")},{default:mt(()=>[ei(gn(w(P)("el.datepicker.prevMonth")),1)]),_:1},8,["onClick"]),st(w(ua),{size:"small",onClick:N=>w(M)("today")},{default:mt(()=>[ei(gn(w(P)("el.datepicker.today")),1)]),_:1},8,["onClick"]),st(w(ua),{size:"small",onClick:N=>w(M)("next-month")},{default:mt(()=>[ei(gn(w(P)("el.datepicker.nextMonth")),1)]),_:1},8,["onClick"])]),_:1})],2)):At("v-if",!0)])],2),w(A).length===0?(Z(),ue("div",{key:0,class:ge(w(d).e("body"))},[st(NM,{date:w(b),"selected-day":w(E),onPick:w(r)},cu({_:2},[z.$slots["date-cell"]?{name:"date-cell",fn:mt(N=>[It(z.$slots,"date-cell",iu(vd(N)))])}:void 0]),1032,["date","selected-day","onPick"])],2)):(Z(),ue("div",{key:1,class:ge(w(d).e("body"))},[(Z(!0),ue(cr,null,Ei(w(A),(N,q)=>(Z(),Bt(NM,{key:q,date:N[0],"selected-day":w(E),range:N,"hide-header":q!==0,onPick:w(r)},cu({_:2},[z.$slots["date-cell"]?{name:"date-cell",fn:mt(G=>[It(z.$slots,"date-cell",iu(vd(G)))])}:void 0]),1032,["date","selected-day","range","hide-header","onPick"]))),128))],2))],2))}});var Jue=En(Xue,[["__file","calendar.vue"]]);const Que=Gr(Jue),ece=bn({header:{type:String,default:""},footer:{type:String,default:""},bodyStyle:{type:wt([String,Object,Array]),default:""},headerClass:String,bodyClass:String,footerClass:String,shadow:{type:String,values:["always","hover","never"],default:"always"}}),tce=xe({name:"ElCard"}),nce=xe({...tce,props:ece,setup(e){const n=dn("card");return(s,l)=>(Z(),ue("div",{class:ge([w(n).b(),w(n).is(`${s.shadow}-shadow`)])},[s.$slots.header||s.header?(Z(),ue("div",{key:0,class:ge([w(n).e("header"),s.headerClass])},[It(s.$slots,"header",{},()=>[ei(gn(s.header),1)])],2)):At("v-if",!0),ae("div",{class:ge([w(n).e("body"),s.bodyClass]),style:fr(s.bodyStyle)},[It(s.$slots,"default")],6),s.$slots.footer||s.footer?(Z(),ue("div",{key:1,class:ge([w(n).e("footer"),s.footerClass])},[It(s.$slots,"footer",{},()=>[ei(gn(s.footer),1)])],2)):At("v-if",!0)],2))}});var rce=En(nce,[["__file","card.vue"]]);const ice=Gr(rce),sce=bn({initialIndex:{type:Number,default:0},height:{type:String,default:""},trigger:{type:String,values:["hover","click"],default:"hover"},autoplay:{type:Boolean,default:!0},interval:{type:Number,default:3e3},indicatorPosition:{type:String,values:["","none","outside"],default:""},arrow:{type:String,values:["always","hover","never"],default:"hover"},type:{type:String,values:["","card"],default:""},cardScale:{type:Number,default:.83},loop:{type:Boolean,default:!0},direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},pauseOnHover:{type:Boolean,default:!0},motionBlur:Boolean}),oce={change:(e,n)=>[e,n].every(gr)},pD=Symbol("carouselContextKey"),n6="ElCarouselItem";var Cu=(e=>(e[e.TEXT=1]="TEXT",e[e.CLASS=2]="CLASS",e[e.STYLE=4]="STYLE",e[e.PROPS=8]="PROPS",e[e.FULL_PROPS=16]="FULL_PROPS",e[e.HYDRATE_EVENTS=32]="HYDRATE_EVENTS",e[e.STABLE_FRAGMENT=64]="STABLE_FRAGMENT",e[e.KEYED_FRAGMENT=128]="KEYED_FRAGMENT",e[e.UNKEYED_FRAGMENT=256]="UNKEYED_FRAGMENT",e[e.NEED_PATCH=512]="NEED_PATCH",e[e.DYNAMIC_SLOTS=1024]="DYNAMIC_SLOTS",e[e.HOISTED=-1]="HOISTED",e[e.BAIL=-2]="BAIL",e))(Cu||{});function r6(e){return qs(e)&&e.type===cr}function ace(e){return qs(e)&&e.type===Qo}function lce(e){return qs(e)&&!r6(e)&&!ace(e)}const uce=e=>{if(!qs(e))return{};const n=e.props||{},s=(qs(e.type)?e.type.props:void 0)||{},l={};return Object.keys(s).forEach(d=>{Wi(s[d],"default")&&(l[d]=s[d].default)}),Object.keys(n).forEach(d=>{l[wl(d)]=n[d]}),l},cce=e=>{if(!mn(e)||e.length>1)throw new Error("expect to receive a single Vue element child");return e[0]},ah=e=>{const n=mn(e)?e:[e],s=[];return n.forEach(l=>{var d;mn(l)?s.push(...ah(l)):qs(l)&&((d=l.component)!=null&&d.subTree)?s.push(l,...ah(l.component.subTree)):qs(l)&&mn(l.children)?s.push(...ah(l.children)):qs(l)&&l.shapeFlag===2?s.push(...ah(l.type())):s.push(l)}),s},dce=(e,n,s)=>ah(e.subTree).filter(m=>{var b;return qs(m)&&((b=m.type)==null?void 0:b.name)===n&&!!m.component}).map(m=>m.component.uid).map(m=>s[m]).filter(m=>!!m),c8=(e,n)=>{const s={},l=Zs([]);return{children:l,addChild:b=>{s[b.uid]=b,l.value=dce(e,n,s)},removeChild:b=>{delete s[b],l.value=l.value.filter(r=>r.uid!==b)}}},FM=300,hce=(e,n,s)=>{const{children:l,addChild:d,removeChild:m}=c8(oi(),n6),b=qo(),r=Re(-1),E=Re(null),M=Re(!1),A=Re(),P=Re(0),D=Re(!0),z=Re(!0),F=Re(!1),N=se(()=>e.arrow!=="never"&&!w(ie)),q=se(()=>l.value.some(Ct=>Ct.props.label.toString().length>0)),G=se(()=>e.type==="card"),ie=se(()=>e.direction==="vertical"),W=se(()=>e.height!=="auto"?{height:e.height}:{height:`${P.value}px`,overflow:"hidden"}),Y=zp(Ct=>{me(Ct)},FM,{trailing:!0}),J=zp(Ct=>{Ae(Ct)},FM),re=Ct=>D.value?r.value<=1?Ct<=1:Ct>1:!0;function he(){E.value&&(clearInterval(E.value),E.value=null)}function fe(){e.interval<=0||!e.autoplay||E.value||(E.value=setInterval(()=>ce(),e.interval))}const ce=()=>{z.value||(F.value=!0),z.value=!1,r.value<l.value.length-1?r.value=r.value+1:e.loop?r.value=0:F.value=!1};function me(Ct){if(z.value||(F.value=!0),z.value=!1,ir(Ct)){const Lt=l.value.filter(xn=>xn.props.name===Ct);Lt.length>0&&(Ct=l.value.indexOf(Lt[0]))}if(Ct=Number(Ct),Number.isNaN(Ct)||Ct!==Math.floor(Ct))return;const gt=l.value.length,Ke=r.value;Ct<0?r.value=e.loop?gt-1:0:Ct>=gt?r.value=e.loop?0:gt-1:r.value=Ct,Ke===r.value&&we(Ke),ft()}function we(Ct){l.value.forEach((gt,Ke)=>{gt.translateItem(Ke,r.value,Ct)})}function ye(Ct,gt){var Ke,Lt,xn,Ht;const le=w(l),nt=le.length;if(nt===0||!Ct.states.inStage)return!1;const Gt=gt+1,an=gt-1,Qt=nt-1,Zt=le[Qt].states.active,rn=le[0].states.active,bt=(Lt=(Ke=le[Gt])==null?void 0:Ke.states)==null?void 0:Lt.active,fn=(Ht=(xn=le[an])==null?void 0:xn.states)==null?void 0:Ht.active;return gt===Qt&&rn||bt?"left":gt===0&&Zt||fn?"right":!1}function Ue(){M.value=!0,e.pauseOnHover&&he()}function Ne(){M.value=!1,fe()}function Pe(){F.value=!1}function ve(Ct){w(ie)||l.value.forEach((gt,Ke)=>{Ct===ye(gt,Ke)&&(gt.states.hover=!0)})}function $e(){w(ie)||l.value.forEach(Ct=>{Ct.states.hover=!1})}function Te(Ct){Ct!==r.value&&(z.value||(F.value=!0)),r.value=Ct}function Ae(Ct){e.trigger==="hover"&&Ct!==r.value&&(r.value=Ct,z.value||(F.value=!0))}function Ve(){me(r.value-1)}function We(){me(r.value+1)}function ft(){he(),e.pauseOnHover||fe()}function at(Ct){e.height==="auto"&&(P.value=Ct)}function ct(){var Ct;const gt=(Ct=b.default)==null?void 0:Ct.call(b);if(!gt)return null;const Lt=ah(gt).filter(xn=>qs(xn)&&xn.type.name===n6);return Lt?.length===2&&e.loop&&!G.value?(D.value=!0,Lt):(D.value=!1,null)}on(()=>r.value,(Ct,gt)=>{we(gt),D.value&&(Ct=Ct%2,gt=gt%2),gt>-1&&n(mi,Ct,gt)}),on(()=>e.autoplay,Ct=>{Ct?fe():he()}),on(()=>e.loop,()=>{me(r.value)}),on(()=>e.interval,()=>{ft()});const Mt=Zs();return Zr(()=>{on(()=>l.value,()=>{l.value.length>0&&me(e.initialIndex)},{immediate:!0}),Mt.value=so(A.value,()=>{we()}),fe()}),Ls(()=>{he(),A.value&&Mt.value&&Mt.value.stop()}),Ti(pD,{root:A,isCardType:G,isVertical:ie,items:l,loop:e.loop,cardScale:e.cardScale,addItem:d,removeItem:m,setActiveItem:me,setContainerHeight:at}),{root:A,activeIndex:r,arrowDisplay:N,hasLabel:q,hover:M,isCardType:G,isTransitioning:F,items:l,isVertical:ie,containerStyle:W,isItemsTwoLength:D,handleButtonEnter:ve,handleTransitionEnd:Pe,handleButtonLeave:$e,handleIndicatorClick:Te,handleMouseEnter:Ue,handleMouseLeave:Ne,setActiveItem:me,prev:Ve,next:We,PlaceholderItem:ct,isTwoLengthShow:re,throttledArrowClick:Y,throttledIndicatorHover:J}},fce="ElCarousel",pce=xe({name:fce}),mce=xe({...pce,props:sce,emits:oce,setup(e,{expose:n,emit:s}){const l=e,{root:d,activeIndex:m,arrowDisplay:b,hasLabel:r,hover:E,isCardType:M,items:A,isVertical:P,containerStyle:D,handleButtonEnter:z,handleButtonLeave:F,isTransitioning:N,handleIndicatorClick:q,handleMouseEnter:G,handleMouseLeave:ie,handleTransitionEnd:W,setActiveItem:Y,prev:J,next:re,PlaceholderItem:he,isTwoLengthShow:fe,throttledArrowClick:ce,throttledIndicatorHover:me}=hce(l,s),we=dn("carousel"),{t:ye}=Oi(),Ue=se(()=>{const ve=[we.b(),we.m(l.direction)];return w(M)&&ve.push(we.m("card")),ve}),Ne=se(()=>{const ve=[we.e("container")];return l.motionBlur&&w(N)&&A.value.length>1&&ve.push(w(P)?`${we.namespace.value}-transitioning-vertical`:`${we.namespace.value}-transitioning`),ve}),Pe=se(()=>{const ve=[we.e("indicators"),we.em("indicators",l.direction)];return w(r)&&ve.push(we.em("indicators","labels")),l.indicatorPosition==="outside"&&ve.push(we.em("indicators","outside")),w(P)&&ve.push(we.em("indicators","right")),ve});return n({activeIndex:m,setActiveItem:Y,prev:J,next:re}),(ve,$e)=>(Z(),ue("div",{ref_key:"root",ref:d,class:ge(w(Ue)),onMouseenter:Er(w(G),["stop"]),onMouseleave:Er(w(ie),["stop"])},[w(b)?(Z(),Bt(ha,{key:0,name:"carousel-arrow-left",persisted:""},{default:mt(()=>[Wr(ae("button",{type:"button",class:ge([w(we).e("arrow"),w(we).em("arrow","left")]),"aria-label":w(ye)("el.carousel.leftArrow"),onMouseenter:Te=>w(z)("left"),onMouseleave:w(F),onClick:Er(Te=>w(ce)(w(m)-1),["stop"])},[st(w(rr),null,{default:mt(()=>[st(w(ph))]),_:1})],42,["aria-label","onMouseenter","onMouseleave","onClick"]),[[Ki,(ve.arrow==="always"||w(E))&&(l.loop||w(m)>0)]])]),_:1})):At("v-if",!0),w(b)?(Z(),Bt(ha,{key:1,name:"carousel-arrow-right",persisted:""},{default:mt(()=>[Wr(ae("button",{type:"button",class:ge([w(we).e("arrow"),w(we).em("arrow","right")]),"aria-label":w(ye)("el.carousel.rightArrow"),onMouseenter:Te=>w(z)("right"),onMouseleave:w(F),onClick:Er(Te=>w(ce)(w(m)+1),["stop"])},[st(w(rr),null,{default:mt(()=>[st(w(il))]),_:1})],42,["aria-label","onMouseenter","onMouseleave","onClick"]),[[Ki,(ve.arrow==="always"||w(E))&&(l.loop||w(m)<w(A).length-1)]])]),_:1})):At("v-if",!0),ae("div",{class:ge(w(Ne)),style:fr(w(D)),onTransitionend:w(W)},[st(w(he)),It(ve.$slots,"default")],46,["onTransitionend"]),ve.indicatorPosition!=="none"?(Z(),ue("ul",{key:2,class:ge(w(Pe))},[(Z(!0),ue(cr,null,Ei(w(A),(Te,Ae)=>Wr((Z(),ue("li",{key:Ae,class:ge([w(we).e("indicator"),w(we).em("indicator",ve.direction),w(we).is("active",Ae===w(m))]),onMouseenter:Ve=>w(me)(Ae),onClick:Er(Ve=>w(q)(Ae),["stop"])},[ae("button",{class:ge(w(we).e("button")),"aria-label":w(ye)("el.carousel.indicator",{index:Ae+1})},[w(r)?(Z(),ue("span",{key:0},gn(Te.props.label),1)):At("v-if",!0)],10,["aria-label"])],42,["onMouseenter","onClick"])),[[Ki,w(fe)(Ae)]])),128))],2)):At("v-if",!0),l.motionBlur?(Z(),ue("svg",{key:3,xmlns:"http://www.w3.org/2000/svg",version:"1.1",style:{display:"none"}},[ae("defs",null,[ae("filter",{id:"elCarouselHorizontal"},[ae("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"12,0"})]),ae("filter",{id:"elCarouselVertical"},[ae("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"0,10"})])])])):At("v-if",!0)],42,["onMouseenter","onMouseleave"]))}});var gce=En(mce,[["__file","carousel.vue"]]);const _ce=bn({name:{type:String,default:""},label:{type:[String,Number],default:""}}),vce=e=>{const n=Gn(pD),s=oi(),l=Re(),d=Re(!1),m=Re(0),b=Re(1),r=Re(!1),E=Re(!1),M=Re(!1),A=Re(!1),{isCardType:P,isVertical:D,cardScale:z}=n;function F(W,Y,J){const re=J-1,he=Y-1,fe=Y+1,ce=J/2;return Y===0&&W===re?-1:Y===re&&W===0?J:W<he&&Y-W>=ce?J+1:W>fe&&W-Y>=ce?-2:W}function N(W,Y){var J,re;const he=w(D)?((J=n.root.value)==null?void 0:J.offsetHeight)||0:((re=n.root.value)==null?void 0:re.offsetWidth)||0;return M.value?he*((2-z)*(W-Y)+1)/4:W<Y?-(1+z)*he/4:(3+z)*he/4}function q(W,Y,J){const re=n.root.value;return re?((J?re.offsetHeight:re.offsetWidth)||0)*(W-Y):0}const G=(W,Y,J)=>{var re;const he=w(P),fe=(re=n.items.value.length)!=null?re:Number.NaN,ce=W===Y;!he&&!Li(J)&&(A.value=ce||W===J),!ce&&fe>2&&n.loop&&(W=F(W,Y,fe));const me=w(D);r.value=ce,he?(M.value=Math.round(Math.abs(W-Y))<=1,m.value=N(W,Y),b.value=w(r)?1:z):m.value=q(W,Y,me),E.value=!0,ce&&l.value&&n.setContainerHeight(l.value.offsetHeight)};function ie(){if(n&&w(P)){const W=n.items.value.findIndex(({uid:Y})=>Y===s.uid);n.setActiveItem(W)}}return Zr(()=>{n.addItem({props:e,states:ts({hover:d,translate:m,scale:b,active:r,ready:E,inStage:M,animating:A}),uid:s.uid,translateItem:G})}),Mf(()=>{n.removeItem(s.uid)}),{carouselItemRef:l,active:r,animating:A,hover:d,inStage:M,isVertical:D,translate:m,isCardType:P,scale:b,ready:E,handleItemClick:ie}},yce=xe({name:n6}),bce=xe({...yce,props:_ce,setup(e){const n=e,s=dn("carousel"),{carouselItemRef:l,active:d,animating:m,hover:b,inStage:r,isVertical:E,translate:M,isCardType:A,scale:P,ready:D,handleItemClick:z}=vce(n),F=se(()=>[s.e("item"),s.is("active",d.value),s.is("in-stage",r.value),s.is("hover",b.value),s.is("animating",m.value),{[s.em("item","card")]:A.value,[s.em("item","card-vertical")]:A.value&&E.value}]),N=se(()=>{const G=`${`translate${w(E)?"Y":"X"}`}(${w(M)}px)`,ie=`scale(${w(P)})`;return{transform:[G,ie].join(" ")}});return(q,G)=>Wr((Z(),ue("div",{ref_key:"carouselItemRef",ref:l,class:ge(w(F)),style:fr(w(N)),onClick:w(z)},[w(A)?Wr((Z(),ue("div",{key:0,class:ge(w(s).e("mask"))},null,2)),[[Ki,!w(d)]]):At("v-if",!0),It(q.$slots,"default")],14,["onClick"])),[[Ki,w(D)]])}});var mD=En(bce,[["__file","carousel-item.vue"]]);const xce=Gr(gce,{CarouselItem:mD}),wce=ao(mD),gD={modelValue:{type:[Number,String,Boolean],default:void 0},label:{type:[String,Boolean,Number,Object],default:void 0},value:{type:[String,Boolean,Number,Object],default:void 0},indeterminate:Boolean,disabled:Boolean,checked:Boolean,name:{type:String,default:void 0},trueValue:{type:[String,Number],default:void 0},falseValue:{type:[String,Number],default:void 0},trueLabel:{type:[String,Number],default:void 0},falseLabel:{type:[String,Number],default:void 0},id:{type:String,default:void 0},border:Boolean,size:Fo,tabindex:[String,Number],validateEvent:{type:Boolean,default:!0},...Ta(["ariaControls"])},_D={[Nr]:e=>ir(e)||gr(e)||Ts(e),change:e=>ir(e)||gr(e)||Ts(e)},p0=Symbol("checkboxGroupContextKey"),Sce=({model:e,isChecked:n})=>{const s=Gn(p0,void 0),l=se(()=>{var m,b;const r=(m=s?.max)==null?void 0:m.value,E=(b=s?.min)==null?void 0:b.value;return!Li(r)&&e.value.length>=r&&!n.value||!Li(E)&&e.value.length<=E&&n.value});return{isDisabled:Ba(se(()=>s?.disabled.value||l.value)),isLimitDisabled:l}},Cce=(e,{model:n,isLimitExceeded:s,hasOwnLabel:l,isDisabled:d,isLabeledByFormItem:m})=>{const b=Gn(p0,void 0),{formItem:r}=Fa(),{emit:E}=oi();function M(F){var N,q,G,ie;return[!0,e.trueValue,e.trueLabel].includes(F)?(q=(N=e.trueValue)!=null?N:e.trueLabel)!=null?q:!0:(ie=(G=e.falseValue)!=null?G:e.falseLabel)!=null?ie:!1}function A(F,N){E(mi,M(F),N)}function P(F){if(s.value)return;const N=F.target;E(mi,M(N.checked),F)}async function D(F){s.value||!l.value&&!d.value&&m.value&&(F.composedPath().some(G=>G.tagName==="LABEL")||(n.value=M([!1,e.falseValue,e.falseLabel].includes(n.value)),await dr(),A(n.value,F)))}const z=se(()=>b?.validateEvent||e.validateEvent);return on(()=>e.modelValue,()=>{z.value&&r?.validate("change").catch(F=>void 0)}),{handleChange:P,onClickRoot:D}},Ece=e=>{const n=Re(!1),{emit:s}=oi(),l=Gn(p0,void 0),d=se(()=>Li(l)===!1),m=Re(!1),b=se({get(){var r,E;return d.value?(r=l?.modelValue)==null?void 0:r.value:(E=e.modelValue)!=null?E:n.value},set(r){var E,M;d.value&&mn(r)?(m.value=((E=l?.max)==null?void 0:E.value)!==void 0&&r.length>l?.max.value&&r.length>b.value.length,m.value===!1&&((M=l?.changeEvent)==null||M.call(l,r))):(s(Nr,r),n.value=r)}});return{model:b,isGroup:d,isLimitExceeded:m}},Tce=(e,n,{model:s})=>{const l=Gn(p0,void 0),d=Re(!1),m=se(()=>Mu(e.value)?e.label:e.value),b=se(()=>{const A=s.value;return Ts(A)?A:mn(A)?Yr(m.value)?A.map(Os).some(P=>la(P,m.value)):A.map(Os).includes(m.value):A!=null?A===e.trueValue||A===e.trueLabel:!!A}),r=Lo(se(()=>{var A;return(A=l?.size)==null?void 0:A.value}),{prop:!0}),E=Lo(se(()=>{var A;return(A=l?.size)==null?void 0:A.value})),M=se(()=>!!n.default||!Mu(m.value));return{checkboxButtonSize:r,isChecked:b,isFocused:d,checkboxSize:E,hasOwnLabel:M,actualValue:m}},vD=(e,n)=>{const{formItem:s}=Fa(),{model:l,isGroup:d,isLimitExceeded:m}=Ece(e),{isFocused:b,isChecked:r,checkboxButtonSize:E,checkboxSize:M,hasOwnLabel:A,actualValue:P}=Tce(e,n,{model:l}),{isDisabled:D}=Sce({model:l,isChecked:r}),{inputId:z,isLabeledByFormItem:F}=Du(e,{formItemContext:s,disableIdGeneration:A,disableIdManagement:d}),{handleChange:N,onClickRoot:q}=Cce(e,{model:l,isLimitExceeded:m,hasOwnLabel:A,isDisabled:D,isLabeledByFormItem:F});return(()=>{function ie(){var W,Y;mn(l.value)&&!l.value.includes(P.value)?l.value.push(P.value):l.value=(Y=(W=e.trueValue)!=null?W:e.trueLabel)!=null?Y:!0}e.checked&&ie()})(),ch({from:"label act as value",replacement:"value",version:"3.0.0",scope:"el-checkbox",ref:"https://element-plus.org/en-US/component/checkbox.html"},se(()=>d.value&&Mu(e.value))),ch({from:"true-label",replacement:"true-value",version:"3.0.0",scope:"el-checkbox",ref:"https://element-plus.org/en-US/component/checkbox.html"},se(()=>!!e.trueLabel)),ch({from:"false-label",replacement:"false-value",version:"3.0.0",scope:"el-checkbox",ref:"https://element-plus.org/en-US/component/checkbox.html"},se(()=>!!e.falseLabel)),{inputId:z,isLabeledByFormItem:F,isChecked:r,isDisabled:D,isFocused:b,checkboxButtonSize:E,checkboxSize:M,hasOwnLabel:A,model:l,actualValue:P,handleChange:N,onClickRoot:q}},Ice=xe({name:"ElCheckbox"}),kce=xe({...Ice,props:gD,emits:_D,setup(e){const n=e,s=qo(),{inputId:l,isLabeledByFormItem:d,isChecked:m,isDisabled:b,isFocused:r,checkboxSize:E,hasOwnLabel:M,model:A,actualValue:P,handleChange:D,onClickRoot:z}=vD(n,s),F=dn("checkbox"),N=se(()=>[F.b(),F.m(E.value),F.is("disabled",b.value),F.is("bordered",n.border),F.is("checked",m.value)]),q=se(()=>[F.e("input"),F.is("disabled",b.value),F.is("checked",m.value),F.is("indeterminate",n.indeterminate),F.is("focus",r.value)]);return(G,ie)=>(Z(),Bt(si(!w(M)&&w(d)?"span":"label"),{class:ge(w(N)),"aria-controls":G.indeterminate?G.ariaControls:null,onClick:w(z)},{default:mt(()=>{var W,Y,J,re;return[ae("span",{class:ge(w(q))},[G.trueValue||G.falseValue||G.trueLabel||G.falseLabel?Wr((Z(),ue("input",{key:0,id:w(l),"onUpdate:modelValue":he=>Hs(A)?A.value=he:null,class:ge(w(F).e("original")),type:"checkbox",indeterminate:G.indeterminate,name:G.name,tabindex:G.tabindex,disabled:w(b),"true-value":(Y=(W=G.trueValue)!=null?W:G.trueLabel)!=null?Y:!0,"false-value":(re=(J=G.falseValue)!=null?J:G.falseLabel)!=null?re:!1,onChange:w(D),onFocus:he=>r.value=!0,onBlur:he=>r.value=!1,onClick:Er(()=>{},["stop"])},null,42,["id","onUpdate:modelValue","indeterminate","name","tabindex","disabled","true-value","false-value","onChange","onFocus","onBlur","onClick"])),[[yb,w(A)]]):Wr((Z(),ue("input",{key:1,id:w(l),"onUpdate:modelValue":he=>Hs(A)?A.value=he:null,class:ge(w(F).e("original")),type:"checkbox",indeterminate:G.indeterminate,disabled:w(b),value:w(P),name:G.name,tabindex:G.tabindex,onChange:w(D),onFocus:he=>r.value=!0,onBlur:he=>r.value=!1,onClick:Er(()=>{},["stop"])},null,42,["id","onUpdate:modelValue","indeterminate","disabled","value","name","tabindex","onChange","onFocus","onBlur","onClick"])),[[yb,w(A)]]),ae("span",{class:ge(w(F).e("inner"))},null,2)],2),w(M)?(Z(),ue("span",{key:0,class:ge(w(F).e("label"))},[It(G.$slots,"default"),G.$slots.default?At("v-if",!0):(Z(),ue(cr,{key:0},[ei(gn(G.label),1)],64))],2)):At("v-if",!0)]}),_:3},8,["class","aria-controls","onClick"]))}});var Mce=En(kce,[["__file","checkbox.vue"]]);const Ace=xe({name:"ElCheckboxButton"}),Rce=xe({...Ace,props:gD,emits:_D,setup(e){const n=e,s=qo(),{isFocused:l,isChecked:d,isDisabled:m,checkboxButtonSize:b,model:r,actualValue:E,handleChange:M}=vD(n,s),A=Gn(p0,void 0),P=dn("checkbox"),D=se(()=>{var F,N,q,G;const ie=(N=(F=A?.fill)==null?void 0:F.value)!=null?N:"";return{backgroundColor:ie,borderColor:ie,color:(G=(q=A?.textColor)==null?void 0:q.value)!=null?G:"",boxShadow:ie?`-1px 0 0 0 ${ie}`:void 0}}),z=se(()=>[P.b("button"),P.bm("button",b.value),P.is("disabled",m.value),P.is("checked",d.value),P.is("focus",l.value)]);return(F,N)=>{var q,G,ie,W;return Z(),ue("label",{class:ge(w(z))},[F.trueValue||F.falseValue||F.trueLabel||F.falseLabel?Wr((Z(),ue("input",{key:0,"onUpdate:modelValue":Y=>Hs(r)?r.value=Y:null,class:ge(w(P).be("button","original")),type:"checkbox",name:F.name,tabindex:F.tabindex,disabled:w(m),"true-value":(G=(q=F.trueValue)!=null?q:F.trueLabel)!=null?G:!0,"false-value":(W=(ie=F.falseValue)!=null?ie:F.falseLabel)!=null?W:!1,onChange:w(M),onFocus:Y=>l.value=!0,onBlur:Y=>l.value=!1,onClick:Er(()=>{},["stop"])},null,42,["onUpdate:modelValue","name","tabindex","disabled","true-value","false-value","onChange","onFocus","onBlur","onClick"])),[[yb,w(r)]]):Wr((Z(),ue("input",{key:1,"onUpdate:modelValue":Y=>Hs(r)?r.value=Y:null,class:ge(w(P).be("button","original")),type:"checkbox",name:F.name,tabindex:F.tabindex,disabled:w(m),value:w(E),onChange:w(M),onFocus:Y=>l.value=!0,onBlur:Y=>l.value=!1,onClick:Er(()=>{},["stop"])},null,42,["onUpdate:modelValue","name","tabindex","disabled","value","onChange","onFocus","onBlur","onClick"])),[[yb,w(r)]]),F.$slots.default||F.label?(Z(),ue("span",{key:2,class:ge(w(P).be("button","inner")),style:fr(w(d)?w(D):void 0)},[It(F.$slots,"default",{},()=>[ei(gn(F.label),1)])],6)):At("v-if",!0)],2)}}});var yD=En(Rce,[["__file","checkbox-button.vue"]]);const Pce=bn({modelValue:{type:wt(Array),default:()=>[]},disabled:Boolean,min:Number,max:Number,size:Fo,fill:String,textColor:String,tag:{type:String,default:"div"},validateEvent:{type:Boolean,default:!0},...Ta(["ariaLabel"])}),Lce={[Nr]:e=>mn(e),change:e=>mn(e)},Oce=xe({name:"ElCheckboxGroup"}),Dce=xe({...Oce,props:Pce,emits:Lce,setup(e,{emit:n}){const s=e,l=dn("checkbox"),{formItem:d}=Fa(),{inputId:m,isLabeledByFormItem:b}=Du(s,{formItemContext:d}),r=async M=>{n(Nr,M),await dr(),n(mi,M)},E=se({get(){return s.modelValue},set(M){r(M)}});return Ti(p0,{...cc(da(s),["size","min","max","disabled","validateEvent","fill","textColor"]),modelValue:E,changeEvent:r}),on(()=>s.modelValue,()=>{s.validateEvent&&d?.validate("change").catch(M=>void 0)}),(M,A)=>{var P;return Z(),Bt(si(M.tag),{id:w(m),class:ge(w(l).b("group")),role:"group","aria-label":w(b)?void 0:M.ariaLabel||"checkbox-group","aria-labelledby":w(b)?(P=w(d))==null?void 0:P.labelId:void 0},{default:mt(()=>[It(M.$slots,"default")]),_:3},8,["id","class","aria-label","aria-labelledby"])}}});var bD=En(Dce,[["__file","checkbox-group.vue"]]);const Ou=Gr(Mce,{CheckboxButton:yD,CheckboxGroup:bD}),zce=ao(yD),xD=ao(bD),wD=bn({modelValue:{type:[String,Number,Boolean],default:void 0},size:Fo,disabled:Boolean,label:{type:[String,Number,Boolean],default:void 0},value:{type:[String,Number,Boolean],default:void 0},name:{type:String,default:void 0}}),Nce=bn({...wD,border:Boolean}),SD={[Nr]:e=>ir(e)||gr(e)||Ts(e),[mi]:e=>ir(e)||gr(e)||Ts(e)},CD=Symbol("radioGroupKey"),ED=(e,n)=>{const s=Re(),l=Gn(CD,void 0),d=se(()=>!!l),m=se(()=>Mu(e.value)?e.label:e.value),b=se({get(){return d.value?l.modelValue:e.modelValue},set(P){d.value?l.changeEvent(P):n&&n(Nr,P),s.value.checked=e.modelValue===m.value}}),r=Lo(se(()=>l?.size)),E=Ba(se(()=>l?.disabled)),M=Re(!1),A=se(()=>E.value||d.value&&b.value!==m.value?-1:0);return ch({from:"label act as value",replacement:"value",version:"3.0.0",scope:"el-radio",ref:"https://element-plus.org/en-US/component/radio.html"},se(()=>d.value&&Mu(e.value))),{radioRef:s,isGroup:d,radioGroup:l,focus:M,size:r,disabled:E,tabIndex:A,modelValue:b,actualValue:m}},Fce=xe({name:"ElRadio"}),Bce=xe({...Fce,props:Nce,emits:SD,setup(e,{emit:n}){const s=e,l=dn("radio"),{radioRef:d,radioGroup:m,focus:b,size:r,disabled:E,modelValue:M,actualValue:A}=ED(s,n);function P(){dr(()=>n(mi,M.value))}return(D,z)=>{var F;return Z(),ue("label",{class:ge([w(l).b(),w(l).is("disabled",w(E)),w(l).is("focus",w(b)),w(l).is("bordered",D.border),w(l).is("checked",w(M)===w(A)),w(l).m(w(r))])},[ae("span",{class:ge([w(l).e("input"),w(l).is("disabled",w(E)),w(l).is("checked",w(M)===w(A))])},[Wr(ae("input",{ref_key:"radioRef",ref:d,"onUpdate:modelValue":N=>Hs(M)?M.value=N:null,class:ge(w(l).e("original")),value:w(A),name:D.name||((F=w(m))==null?void 0:F.name),disabled:w(E),checked:w(M)===w(A),type:"radio",onFocus:N=>b.value=!0,onBlur:N=>b.value=!1,onChange:P,onClick:Er(()=>{},["stop"])},null,42,["onUpdate:modelValue","value","name","disabled","checked","onFocus","onBlur","onClick"]),[[IP,w(M)]]),ae("span",{class:ge(w(l).e("inner"))},null,2)],2),ae("span",{class:ge(w(l).e("label")),onKeydown:Er(()=>{},["stop"])},[It(D.$slots,"default",{},()=>[ei(gn(D.label),1)])],42,["onKeydown"])],2)}}});var Vce=En(Bce,[["__file","radio.vue"]]);const $ce=bn({...wD}),Hce=xe({name:"ElRadioButton"}),Uce=xe({...Hce,props:$ce,setup(e){const n=e,s=dn("radio"),{radioRef:l,focus:d,size:m,disabled:b,modelValue:r,radioGroup:E,actualValue:M}=ED(n),A=se(()=>({backgroundColor:E?.fill||"",borderColor:E?.fill||"",boxShadow:E?.fill?`-1px 0 0 0 ${E.fill}`:"",color:E?.textColor||""}));return(P,D)=>{var z;return Z(),ue("label",{class:ge([w(s).b("button"),w(s).is("active",w(r)===w(M)),w(s).is("disabled",w(b)),w(s).is("focus",w(d)),w(s).bm("button",w(m))])},[Wr(ae("input",{ref_key:"radioRef",ref:l,"onUpdate:modelValue":F=>Hs(r)?r.value=F:null,class:ge(w(s).be("button","original-radio")),value:w(M),type:"radio",name:P.name||((z=w(E))==null?void 0:z.name),disabled:w(b),onFocus:F=>d.value=!0,onBlur:F=>d.value=!1,onClick:Er(()=>{},["stop"])},null,42,["onUpdate:modelValue","value","name","disabled","onFocus","onBlur","onClick"]),[[IP,w(r)]]),ae("span",{class:ge(w(s).be("button","inner")),style:fr(w(r)===w(M)?w(A):{}),onKeydown:Er(()=>{},["stop"])},[It(P.$slots,"default",{},()=>[ei(gn(P.label),1)])],46,["onKeydown"])],2)}}});var TD=En(Uce,[["__file","radio-button.vue"]]);const jce=bn({id:{type:String,default:void 0},size:Fo,disabled:Boolean,modelValue:{type:[String,Number,Boolean],default:void 0},fill:{type:String,default:""},textColor:{type:String,default:""},name:{type:String,default:void 0},validateEvent:{type:Boolean,default:!0},...Ta(["ariaLabel"])}),Gce=SD,qce=xe({name:"ElRadioGroup"}),Wce=xe({...qce,props:jce,emits:Gce,setup(e,{emit:n}){const s=e,l=dn("radio"),d=Ea(),m=Re(),{formItem:b}=Fa(),{inputId:r,isLabeledByFormItem:E}=Du(s,{formItemContext:b}),M=P=>{n(Nr,P),dr(()=>n(mi,P))};Zr(()=>{const P=m.value.querySelectorAll("[type=radio]"),D=P[0];!Array.from(P).some(z=>z.checked)&&D&&(D.tabIndex=0)});const A=se(()=>s.name||d.value);return Ti(CD,ts({...da(s),changeEvent:M,name:A})),on(()=>s.modelValue,()=>{s.validateEvent&&b?.validate("change").catch(P=>void 0)}),(P,D)=>(Z(),ue("div",{id:w(r),ref_key:"radioGroupRef",ref:m,class:ge(w(l).b("group")),role:"radiogroup","aria-label":w(E)?void 0:P.ariaLabel||"radio-group","aria-labelledby":w(E)?w(b).labelId:void 0},[It(P.$slots,"default")],10,["id","aria-label","aria-labelledby"]))}});var ID=En(Wce,[["__file","radio-group.vue"]]);const kD=Gr(Vce,{RadioButton:TD,RadioGroup:ID}),Kce=ao(ID),Yce=ao(TD);var Zce=xe({name:"NodeContent",setup(){return{ns:dn("cascader-node")}},render(){const{ns:e}=this,{node:n,panel:s}=this.$parent,{data:l,label:d}=n,{renderLabelFn:m}=s;return xr("span",{class:e.e("label")},m?m({node:n,data:l}):d)}});const d8=Symbol(),Xce=xe({name:"ElCascaderNode",components:{ElCheckbox:Ou,ElRadio:kD,NodeContent:Zce,ElIcon:rr,Check:d0,Loading:gc,ArrowRight:il},props:{node:{type:Object,required:!0},menuId:String},emits:["expand"],setup(e,{emit:n}){const s=Gn(d8),l=dn("cascader-node"),d=se(()=>s.isHoverMenu),m=se(()=>s.config.multiple),b=se(()=>s.config.checkStrictly),r=se(()=>{var re;return(re=s.checkedNodes[0])==null?void 0:re.uid}),E=se(()=>e.node.isDisabled),M=se(()=>e.node.isLeaf),A=se(()=>b.value&&!M.value||!E.value),P=se(()=>z(s.expandingNode)),D=se(()=>b.value&&s.checkedNodes.some(z)),z=re=>{var he;const{level:fe,uid:ce}=e.node;return((he=re?.pathNodes[fe-1])==null?void 0:he.uid)===ce},F=()=>{P.value||s.expandNode(e.node)},N=re=>{const{node:he}=e;re!==he.checked&&s.handleCheckChange(he,re)},q=()=>{s.lazyLoad(e.node,()=>{M.value||F()})},G=re=>{d.value&&(ie(),!M.value&&n("expand",re))},ie=()=>{const{node:re}=e;!A.value||re.loading||(re.loaded?F():q())},W=()=>{d.value&&!M.value||(M.value&&!E.value&&!b.value&&!m.value?J(!0):ie())},Y=re=>{b.value?(N(re),e.node.loaded&&F()):J(re)},J=re=>{e.node.loaded?(N(re),!b.value&&F()):q()};return{panel:s,isHoverMenu:d,multiple:m,checkStrictly:b,checkedNodeId:r,isDisabled:E,isLeaf:M,expandable:A,inExpandingPath:P,inCheckedPath:D,ns:l,handleHoverExpand:G,handleExpand:ie,handleClick:W,handleCheck:J,handleSelectCheck:Y}}});function Jce(e,n,s,l,d,m){const b=fi("el-checkbox"),r=fi("el-radio"),E=fi("check"),M=fi("el-icon"),A=fi("node-content"),P=fi("loading"),D=fi("arrow-right");return Z(),ue("li",{id:`${e.menuId}-${e.node.uid}`,role:"menuitem","aria-haspopup":!e.isLeaf,"aria-owns":e.isLeaf?void 0:e.menuId,"aria-expanded":e.inExpandingPath,tabindex:e.expandable?-1:void 0,class:ge([e.ns.b(),e.ns.is("selectable",e.checkStrictly),e.ns.is("active",e.node.checked),e.ns.is("disabled",!e.expandable),e.inExpandingPath&&"in-active-path",e.inCheckedPath&&"in-checked-path"]),onMouseenter:e.handleHoverExpand,onFocus:e.handleHoverExpand,onClick:e.handleClick},[At(" prefix "),e.multiple?(Z(),Bt(b,{key:0,"model-value":e.node.checked,indeterminate:e.node.indeterminate,disabled:e.isDisabled,onClick:Er(()=>{},["stop"]),"onUpdate:modelValue":e.handleSelectCheck},null,8,["model-value","indeterminate","disabled","onClick","onUpdate:modelValue"])):e.checkStrictly?(Z(),Bt(r,{key:1,"model-value":e.checkedNodeId,label:e.node.uid,disabled:e.isDisabled,"onUpdate:modelValue":e.handleSelectCheck,onClick:Er(()=>{},["stop"])},{default:mt(()=>[At(`
        Add an empty element to avoid render label,
        do not use empty fragment here for https://github.com/vuejs/vue-next/pull/2485
      `),ae("span")]),_:1},8,["model-value","label","disabled","onUpdate:modelValue","onClick"])):e.isLeaf&&e.node.checked?(Z(),Bt(M,{key:2,class:ge(e.ns.e("prefix"))},{default:mt(()=>[st(E)]),_:1},8,["class"])):At("v-if",!0),At(" content "),st(A),At(" postfix "),e.isLeaf?At("v-if",!0):(Z(),ue(cr,{key:3},[e.node.loading?(Z(),Bt(M,{key:0,class:ge([e.ns.is("loading"),e.ns.e("postfix")])},{default:mt(()=>[st(P)]),_:1},8,["class"])):(Z(),Bt(M,{key:1,class:ge(["arrow-right",e.ns.e("postfix")])},{default:mt(()=>[st(D)]),_:1},8,["class"]))],64))],42,["id","aria-haspopup","aria-owns","aria-expanded","tabindex","onMouseenter","onFocus","onClick"])}var Qce=En(Xce,[["render",Jce],["__file","node.vue"]]);const ede=xe({name:"ElCascaderMenu",components:{Loading:gc,ElIcon:rr,ElScrollbar:Id,ElCascaderNode:Qce},props:{nodes:{type:Array,required:!0},index:{type:Number,required:!0}},setup(e){const n=oi(),s=dn("cascader-menu"),{t:l}=Oi(),d=Ea();let m=null,b=null;const r=Gn(d8),E=Re(null),M=se(()=>!e.nodes.length),A=se(()=>!r.initialLoaded),P=se(()=>`${d.value}-${e.index}`),D=q=>{m=q.target},z=q=>{if(!(!r.isHoverMenu||!m||!E.value))if(m.contains(q.target)){F();const G=n.vnode.el,{left:ie}=G.getBoundingClientRect(),{offsetWidth:W,offsetHeight:Y}=G,J=q.clientX-ie,re=m.offsetTop,he=re+m.offsetHeight;E.value.innerHTML=`
          <path style="pointer-events: auto;" fill="transparent" d="M${J} ${re} L${W} 0 V${re} Z" />
          <path style="pointer-events: auto;" fill="transparent" d="M${J} ${he} L${W} ${Y} V${he} Z" />
        `}else b||(b=window.setTimeout(N,r.config.hoverThreshold))},F=()=>{b&&(clearTimeout(b),b=null)},N=()=>{E.value&&(E.value.innerHTML="",F())};return{ns:s,panel:r,hoverZone:E,isEmpty:M,isLoading:A,menuId:P,t:l,handleExpand:D,handleMouseMove:z,clearHoverZone:N}}});function tde(e,n,s,l,d,m){const b=fi("el-cascader-node"),r=fi("loading"),E=fi("el-icon"),M=fi("el-scrollbar");return Z(),Bt(M,{key:e.menuId,tag:"ul",role:"menu",class:ge(e.ns.b()),"wrap-class":e.ns.e("wrap"),"view-class":[e.ns.e("list"),e.ns.is("empty",e.isEmpty)],onMousemove:e.handleMouseMove,onMouseleave:e.clearHoverZone},{default:mt(()=>{var A;return[(Z(!0),ue(cr,null,Ei(e.nodes,P=>(Z(),Bt(b,{key:P.uid,node:P,"menu-id":e.menuId,onExpand:e.handleExpand},null,8,["node","menu-id","onExpand"]))),128)),e.isLoading?(Z(),ue("div",{key:0,class:ge(e.ns.e("empty-text"))},[st(E,{size:"14",class:ge(e.ns.is("loading"))},{default:mt(()=>[st(r)]),_:1},8,["class"]),ei(" "+gn(e.t("el.cascader.loading")),1)],2)):e.isEmpty?(Z(),ue("div",{key:1,class:ge(e.ns.e("empty-text"))},[It(e.$slots,"empty",{},()=>[ei(gn(e.t("el.cascader.noData")),1)])],2)):(A=e.panel)!=null&&A.isHoverMenu?(Z(),ue(cr,{key:2},[At(" eslint-disable-next-line vue/html-self-closing "),(Z(),ue("svg",{ref:"hoverZone",class:ge(e.ns.e("hover-zone"))},null,2))],2112)):At("v-if",!0)]}),_:3},8,["class","wrap-class","view-class","onMousemove","onMouseleave"])}var nde=En(ede,[["render",tde],["__file","menu.vue"]]);const h8=(e="")=>e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d"),fd=e=>Yv(e);let rde=0;const ide=e=>{const n=[e];let{parent:s}=e;for(;s;)n.unshift(s),s=s.parent;return n};let i6=class s6{constructor(n,s,l,d=!1){this.data=n,this.config=s,this.parent=l,this.root=d,this.uid=rde++,this.checked=!1,this.indeterminate=!1,this.loading=!1;const{value:m,label:b,children:r}=s,E=n[r],M=ide(this);this.level=d?0:l?l.level+1:1,this.value=n[m],this.label=n[b],this.pathNodes=M,this.pathValues=M.map(A=>A.value),this.pathLabels=M.map(A=>A.label),this.childrenData=E,this.children=(E||[]).map(A=>new s6(A,s,this)),this.loaded=!s.lazy||this.isLeaf||!ru(E)}get isDisabled(){const{data:n,parent:s,config:l}=this,{disabled:d,checkStrictly:m}=l;return(hr(d)?d(n,this):!!n[d])||!m&&s?.isDisabled}get isLeaf(){const{data:n,config:s,childrenData:l,loaded:d}=this,{lazy:m,leaf:b}=s,r=hr(b)?b(n,this):n[b];return Li(r)?m&&!d?!1:!(mn(l)&&l.length):!!r}get valueByOption(){return this.config.emitPath?this.pathValues:this.value}appendChild(n){const{childrenData:s,children:l}=this,d=new s6(n,this.config,this);return mn(s)?s.push(n):this.childrenData=[n],l.push(d),d}calcText(n,s){const l=n?this.pathLabels.join(s):this.label;return this.text=l,l}broadcast(n,...s){const l=`onParent${fd(n)}`;this.children.forEach(d=>{d&&(d.broadcast(n,...s),d[l]&&d[l](...s))})}emit(n,...s){const{parent:l}=this,d=`onChild${fd(n)}`;l&&(l[d]&&l[d](...s),l.emit(n,...s))}onParentCheck(n){this.isDisabled||this.setCheckState(n)}onChildCheck(){const{children:n}=this,s=n.filter(d=>!d.isDisabled),l=s.length?s.every(d=>d.checked):!1;this.setCheckState(l)}setCheckState(n){const s=this.children.length,l=this.children.reduce((d,m)=>{const b=m.checked?1:m.indeterminate?.5:0;return d+b},0);this.checked=this.loaded&&this.children.filter(d=>!d.isDisabled).every(d=>d.loaded&&d.checked)&&n,this.indeterminate=this.loaded&&l!==s&&l>0}doCheck(n){if(this.checked===n)return;const{checkStrictly:s,multiple:l}=this.config;s||!l?this.checked=n:(this.broadcast("check",n),this.setCheckState(n),this.emit("check"))}};const o6=(e,n)=>e.reduce((s,l)=>(l.isLeaf?s.push(l):(!n&&s.push(l),s=s.concat(o6(l.children,n))),s),[]);class BM{constructor(n,s){this.config=s;const l=(n||[]).map(d=>new i6(d,this.config));this.nodes=l,this.allNodes=o6(l,!1),this.leafNodes=o6(l,!0)}getNodes(){return this.nodes}getFlattedNodes(n){return n?this.leafNodes:this.allNodes}appendNode(n,s){const l=s?s.appendChild(n):new i6(n,this.config);s||this.nodes.push(l),this.appendAllNodesAndLeafNodes(l)}appendNodes(n,s){n.forEach(l=>this.appendNode(l,s))}appendAllNodesAndLeafNodes(n){this.allNodes.push(n),n.isLeaf&&this.leafNodes.push(n),n.children&&n.children.forEach(s=>{this.appendAllNodesAndLeafNodes(s)})}getNodeByValue(n,s=!1){return!n&&n!==0?null:this.getFlattedNodes(s).find(d=>la(d.value,n)||la(d.pathValues,n))||null}getSameNode(n){return n&&this.getFlattedNodes(!1).find(({value:l,level:d})=>la(n.value,l)&&n.level===d)||null}}const MD=bn({modelValue:{type:wt([Number,String,Array])},options:{type:wt(Array),default:()=>[]},props:{type:wt(Object),default:()=>({})}}),sde={expandTrigger:"click",multiple:!1,checkStrictly:!1,emitPath:!0,lazy:!1,lazyLoad:ys,value:"value",label:"label",children:"children",leaf:"leaf",disabled:"disabled",hoverThreshold:500},ode=e=>se(()=>({...sde,...e.props})),VM=e=>{if(!e)return 0;const n=e.id.split("-");return Number(n[n.length-2])},ade=e=>{if(!e)return;const n=e.querySelector("input");n?n.click():zO(e)&&e.click()},lde=(e,n)=>{const s=n.slice(0),l=s.map(m=>m.uid),d=e.reduce((m,b)=>{const r=l.indexOf(b.uid);return r>-1&&(m.push(b),s.splice(r,1),l.splice(r,1)),m},[]);return d.push(...s),d},$M=e=>[...new Set(e)],yl=e=>!e&&e!==0?[]:mn(e)?e:[e],ude=xe({name:"ElCascaderPanel",components:{ElCascaderMenu:nde},props:{...MD,border:{type:Boolean,default:!0},renderLabel:Function},emits:[Nr,mi,"close","expand-change"],setup(e,{emit:n,slots:s}){let l=!1;const d=dn("cascader"),m=ode(e);let b=null;const r=Re(!0),E=Re([]),M=Re(null),A=Re([]),P=Re(null),D=Re([]),z=se(()=>m.value.expandTrigger==="hover"),F=se(()=>e.renderLabel||s.default),N=()=>{const{options:ye}=e,Ue=m.value;l=!1,b=new BM(ye,Ue),A.value=[b.getNodes()],Ue.lazy&&ru(e.options)?(r.value=!1,q(void 0,Ne=>{Ne&&(b=new BM(Ne,Ue),A.value=[b.getNodes()]),r.value=!0,fe(!1,!0)})):fe(!1,!0)},q=(ye,Ue)=>{const Ne=m.value;ye=ye||new i6({},Ne,void 0,!0),ye.loading=!0;const Pe=ve=>{const $e=ye,Te=$e.root?null:$e;ve&&b?.appendNodes(ve,Te),$e.loading=!1,$e.loaded=!0,$e.childrenData=$e.childrenData||[],Ue&&Ue(ve)};Ne.lazyLoad(ye,Pe)},G=(ye,Ue)=>{var Ne;const{level:Pe}=ye,ve=A.value.slice(0,Pe);let $e;ye.isLeaf?$e=ye.pathNodes[Pe-2]:($e=ye,ve.push(ye.children)),((Ne=P.value)==null?void 0:Ne.uid)!==$e?.uid&&(P.value=ye,A.value=ve,!Ue&&n("expand-change",ye?.pathValues||[]))},ie=(ye,Ue,Ne=!0)=>{const{checkStrictly:Pe,multiple:ve}=m.value,$e=D.value[0];l=!0,!ve&&$e?.doCheck(!1),ye.doCheck(Ue),he(),Ne&&!ve&&!Pe&&n("close"),!Ne&&!ve&&!Pe&&W(ye)},W=ye=>{ye&&(ye=ye.parent,W(ye),ye&&G(ye))},Y=ye=>b?.getFlattedNodes(ye),J=ye=>{var Ue;return(Ue=Y(ye))==null?void 0:Ue.filter(Ne=>Ne.checked!==!1)},re=()=>{D.value.forEach(ye=>ye.doCheck(!1)),he(),A.value=A.value.slice(0,1),P.value=null,n("expand-change",[])},he=()=>{var ye;const{checkStrictly:Ue,multiple:Ne}=m.value,Pe=D.value,ve=J(!Ue),$e=lde(Pe,ve),Te=$e.map(Ae=>Ae.valueByOption);D.value=$e,M.value=Ne?Te:(ye=Te[0])!=null?ye:null},fe=(ye=!1,Ue=!1)=>{const{modelValue:Ne}=e,{lazy:Pe,multiple:ve,checkStrictly:$e}=m.value,Te=!$e;if(!(!r.value||l||!Ue&&la(Ne,M.value)))if(Pe&&!ye){const Ve=$M(cK(yl(Ne))).map(We=>b?.getNodeByValue(We)).filter(We=>!!We&&!We.loaded&&!We.loading);Ve.length?Ve.forEach(We=>{q(We,()=>fe(!1,Ue))}):fe(!0,Ue)}else{const Ae=ve?yl(Ne):[Ne],Ve=$M(Ae.map(We=>b?.getNodeByValue(We,Te)));ce(Ve,Ue),M.value=Ib(Ne)}},ce=(ye,Ue=!0)=>{const{checkStrictly:Ne}=m.value,Pe=D.value,ve=ye.filter(Ae=>!!Ae&&(Ne||Ae.isLeaf)),$e=b?.getSameNode(P.value),Te=Ue&&$e||ve[0];Te?Te.pathNodes.forEach(Ae=>G(Ae,!0)):P.value=null,Pe.forEach(Ae=>Ae.doCheck(!1)),ts(ve).forEach(Ae=>Ae.doCheck(!0)),D.value=ve,dr(me)},me=()=>{Pi&&E.value.forEach(ye=>{const Ue=ye?.$el;if(Ue){const Ne=Ue.querySelector(`.${d.namespace.value}-scrollbar__wrap`),Pe=Ue.querySelector(`.${d.b("node")}.${d.is("active")}`)||Ue.querySelector(`.${d.b("node")}.in-active-path`);$S(Ne,Pe)}})},we=ye=>{const Ue=ye.target,{code:Ne}=ye;switch(Ne){case Un.up:case Un.down:{ye.preventDefault();const Pe=Ne===Un.up?-1:1;V2(NO(Ue,Pe,`.${d.b("node")}[tabindex="-1"]`));break}case Un.left:{ye.preventDefault();const Pe=E.value[VM(Ue)-1],ve=Pe?.$el.querySelector(`.${d.b("node")}[aria-expanded="true"]`);V2(ve);break}case Un.right:{ye.preventDefault();const Pe=E.value[VM(Ue)+1],ve=Pe?.$el.querySelector(`.${d.b("node")}[tabindex="-1"]`);V2(ve);break}case Un.enter:case Un.numpadEnter:ade(Ue);break}};return Ti(d8,ts({config:m,expandingNode:P,checkedNodes:D,isHoverMenu:z,initialLoaded:r,renderLabelFn:F,lazyLoad:q,expandNode:G,handleCheckChange:ie})),on([m,()=>e.options],N,{deep:!0,immediate:!0}),on(()=>e.modelValue,()=>{l=!1,fe()},{deep:!0}),on(()=>M.value,ye=>{la(ye,e.modelValue)||(n(Nr,ye),n(mi,ye))}),KR(()=>E.value=[]),Zr(()=>!ru(e.modelValue)&&fe()),{ns:d,menuList:E,menus:A,checkedNodes:D,handleKeyDown:we,handleCheckChange:ie,getFlattedNodes:Y,getCheckedNodes:J,clearCheckedNodes:re,calculateCheckedValue:he,scrollToExpandingNode:me}}});function cde(e,n,s,l,d,m){const b=fi("el-cascader-menu");return Z(),ue("div",{class:ge([e.ns.b("panel"),e.ns.is("bordered",e.border)]),onKeydown:e.handleKeyDown},[(Z(!0),ue(cr,null,Ei(e.menus,(r,E)=>(Z(),Bt(b,{key:E,ref_for:!0,ref:M=>e.menuList[E]=M,index:E,nodes:[...r]},{empty:mt(()=>[It(e.$slots,"empty")]),_:2},1032,["index","nodes"]))),128))],42,["onKeydown"])}var dde=En(ude,[["render",cde],["__file","index.vue"]]);const AD=Gr(dde),vh=bn({type:{type:String,values:["primary","success","info","warning","danger"],default:"primary"},closable:Boolean,disableTransitions:Boolean,hit:Boolean,color:String,size:{type:String,values:Cd},effect:{type:String,values:["dark","light","plain"],default:"light"},round:Boolean}),hde={close:e=>e instanceof MouseEvent,click:e=>e instanceof MouseEvent},fde=xe({name:"ElTag"}),pde=xe({...fde,props:vh,emits:hde,setup(e,{emit:n}){const s=e,l=Lo(),d=dn("tag"),m=se(()=>{const{type:M,hit:A,effect:P,closable:D,round:z}=s;return[d.b(),d.is("closable",D),d.m(M||"primary"),d.m(l.value),d.m(P),d.is("hit",A),d.is("round",z)]}),b=M=>{n("close",M)},r=M=>{n("click",M)},E=M=>{var A,P,D;(D=(P=(A=M?.component)==null?void 0:A.subTree)==null?void 0:P.component)!=null&&D.bum&&(M.component.subTree.component.bum=null)};return(M,A)=>M.disableTransitions?(Z(),ue("span",{key:0,class:ge(w(m)),style:fr({backgroundColor:M.color}),onClick:r},[ae("span",{class:ge(w(d).e("content"))},[It(M.$slots,"default")],2),M.closable?(Z(),Bt(w(rr),{key:0,class:ge(w(d).e("close")),onClick:Er(b,["stop"])},{default:mt(()=>[st(w(du))]),_:1},8,["class","onClick"])):At("v-if",!0)],6)):(Z(),Bt(ha,{key:1,name:`${w(d).namespace.value}-zoom-in-center`,appear:"",onVnodeMounted:E},{default:mt(()=>[ae("span",{class:ge(w(m)),style:fr({backgroundColor:M.color}),onClick:r},[ae("span",{class:ge(w(d).e("content"))},[It(M.$slots,"default")],2),M.closable?(Z(),Bt(w(rr),{key:0,class:ge(w(d).e("close")),onClick:Er(b,["stop"])},{default:mt(()=>[st(w(du))]),_:1},8,["class","onClick"])):At("v-if",!0)],6)]),_:3},8,["name"]))}});var mde=En(pde,[["__file","tag.vue"]]);const Wg=Gr(mde),gde=bn({...MD,size:Fo,placeholder:String,disabled:Boolean,clearable:Boolean,filterable:Boolean,filterMethod:{type:wt(Function),default:(e,n)=>e.text.includes(n)},separator:{type:String,default:" / "},showAllLevels:{type:Boolean,default:!0},collapseTags:Boolean,maxCollapseTags:{type:Number,default:1},collapseTagsTooltip:{type:Boolean,default:!1},debounce:{type:Number,default:300},beforeFilter:{type:wt(Function),default:()=>!0},placement:{type:wt(String),values:Eh,default:"bottom-start"},fallbackPlacements:{type:wt(Array),default:["bottom-start","bottom","top-start","top","right","left"]},popperClass:{type:String,default:""},teleported:Ao.teleported,tagType:{...vh.type,default:"info"},tagEffect:{...vh.effect,default:"light"},validateEvent:{type:Boolean,default:!0},persistent:{type:Boolean,default:!0},...c0}),_de={[Nr]:e=>!0,[mi]:e=>!0,focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent,clear:()=>!0,visibleChange:e=>Ts(e),expandChange:e=>!!e,removeTag:e=>!!e},df=new Map;if(Pi){let e;document.addEventListener("mousedown",n=>e=n),document.addEventListener("mouseup",n=>{if(e){for(const s of df.values())for(const{documentHandler:l}of s)l(n,e);e=void 0}})}function HM(e,n){let s=[];return mn(n.arg)?s=n.arg:xl(n.arg)&&s.push(n.arg),function(l,d){const m=n.instance.popperRef,b=l.target,r=d?.target,E=!n||!n.instance,M=!b||!r,A=e.contains(b)||e.contains(r),P=e===b,D=s.length&&s.some(F=>F?.contains(b))||s.length&&s.includes(r),z=m&&(m.contains(b)||m.contains(r));E||M||A||P||D||z||n.value(l,d)}}const yh={beforeMount(e,n){df.has(e)||df.set(e,[]),df.get(e).push({documentHandler:HM(e,n),bindingFn:n.value})},updated(e,n){df.has(e)||df.set(e,[]);const s=df.get(e),l=s.findIndex(m=>m.bindingFn===n.oldValue),d={documentHandler:HM(e,n),bindingFn:n.value};l>=0?s.splice(l,1,d):s.push(d)},unmounted(e){df.delete(e)}},vde="ElCascader",yde=xe({name:vde}),bde=xe({...yde,props:gde,emits:_de,setup(e,{expose:n,emit:s}){const l=e,d={modifiers:[{name:"arrowPosition",enabled:!0,phase:"main",fn:({state:vt})=>{const{modifiersData:yt,placement:it}=vt;["right","left","bottom","top"].includes(it)||(yt.arrow.x=35)},requires:["arrow"]}]},m=wh();let b=0,r=0;const E=dn("cascader"),M=dn("input"),{t:A}=Oi(),{form:P,formItem:D}=Fa(),{valueOnClear:z}=vx(l),{isComposing:F,handleComposition:N}=ay({afterComposition(vt){var yt;const it=(yt=vt.target)==null?void 0:yt.value;pr(it)}}),q=Re(null),G=Re(null),ie=Re(null),W=Re(null),Y=Re(null),J=Re(!1),re=Re(!1),he=Re(!1),fe=Re(!1),ce=Re(""),me=Re(""),we=Re([]),ye=Re([]),Ue=Re([]),Ne=se(()=>m.style),Pe=se(()=>l.disabled||P?.disabled),ve=se(()=>l.placeholder||A("el.cascader.placeholder")),$e=se(()=>me.value||we.value.length>0||F.value?"":ve.value),Te=Lo(),Ae=se(()=>Te.value==="small"?"small":"default"),Ve=se(()=>!!l.props.multiple),We=se(()=>!l.filterable||Ve.value),ft=se(()=>Ve.value?me.value:ce.value),at=se(()=>{var vt;return((vt=W.value)==null?void 0:vt.checkedNodes)||[]}),ct=se(()=>!l.clearable||Pe.value||he.value||!re.value?!1:!!at.value.length),Mt=se(()=>{const{showAllLevels:vt,separator:yt}=l,it=at.value;return it.length?Ve.value?"":it[0].calcText(vt,yt):""}),Ct=se(()=>D?.validateState||""),gt=se({get(){return Ib(l.modelValue)},set(vt){const yt=vt??z.value;s(Nr,yt),s(mi,yt),l.validateEvent&&D?.validate("change").catch(it=>void 0)}}),Ke=se(()=>[E.b(),E.m(Te.value),E.is("disabled",Pe.value),m.class]),Lt=se(()=>[M.e("icon"),"icon-arrow-down",E.is("reverse",J.value)]),xn=se(()=>E.is("focus",J.value||fe.value)),Ht=se(()=>{var vt,yt;return(yt=(vt=q.value)==null?void 0:vt.popperRef)==null?void 0:yt.contentRef}),le=vt=>{var yt,it,ln;Pe.value||(vt=vt??!J.value,vt!==J.value&&(J.value=vt,(it=(yt=G.value)==null?void 0:yt.input)==null||it.setAttribute("aria-expanded",`${vt}`),vt?(nt(),dr((ln=W.value)==null?void 0:ln.scrollToExpandingNode)):l.filterable&&Bn(),s("visibleChange",vt)))},nt=()=>{dr(()=>{var vt;(vt=q.value)==null||vt.updatePopper()})},Gt=()=>{he.value=!1},an=vt=>{const{showAllLevels:yt,separator:it}=l;return{node:vt,key:vt.uid,text:vt.calcText(yt,it),hitState:!1,closable:!Pe.value&&!vt.isDisabled,isCollapseTag:!1}},Qt=vt=>{var yt;const it=vt.node;it.doCheck(!1),(yt=W.value)==null||yt.calculateCheckedValue(),s("removeTag",it.valueByOption)},Zt=()=>{if(!Ve.value)return;const vt=at.value,yt=[],it=[];if(vt.forEach(ln=>it.push(an(ln))),ye.value=it,vt.length){vt.slice(0,l.maxCollapseTags).forEach(vr=>yt.push(an(vr)));const ln=vt.slice(l.maxCollapseTags),Xn=ln.length;Xn&&(l.collapseTags?yt.push({key:-1,text:`+ ${Xn}`,closable:!1,isCollapseTag:!0}):ln.forEach(vr=>yt.push(an(vr))))}we.value=yt},rn=()=>{var vt,yt;const{filterMethod:it,showAllLevels:ln,separator:Xn}=l,vr=(yt=(vt=W.value)==null?void 0:vt.getFlattedNodes(!l.props.checkStrictly))==null?void 0:yt.filter(Ii=>Ii.isDisabled?!1:(Ii.calcText(ln,Xn),it(Ii,ft.value)));Ve.value&&(we.value.forEach(Ii=>{Ii.hitState=!1}),ye.value.forEach(Ii=>{Ii.hitState=!1})),he.value=!0,Ue.value=vr,nt()},bt=()=>{var vt;let yt;he.value&&Y.value?yt=Y.value.$el.querySelector(`.${E.e("suggestion-item")}`):yt=(vt=W.value)==null?void 0:vt.$el.querySelector(`.${E.b("node")}[tabindex="-1"]`),yt&&(yt.focus(),!he.value&&yt.click())},fn=()=>{var vt,yt;const it=(vt=G.value)==null?void 0:vt.input,ln=ie.value,Xn=(yt=Y.value)==null?void 0:yt.$el;if(!(!Pi||!it)){if(Xn){const vr=Xn.querySelector(`.${E.e("suggestion-list")}`);vr.style.minWidth=`${it.offsetWidth}px`}if(ln){const{offsetHeight:vr}=ln,Ii=we.value.length>0?`${Math.max(vr,b)-2}px`:`${b}px`;it.style.height=Ii,nt()}}},pn=vt=>{var yt;return(yt=W.value)==null?void 0:yt.getCheckedNodes(vt)},Vn=vt=>{nt(),s("expandChange",vt)},Nn=vt=>{if(!F.value)switch(vt.code){case Un.enter:case Un.numpadEnter:le();break;case Un.down:le(!0),dr(bt),vt.preventDefault();break;case Un.esc:J.value===!0&&(vt.preventDefault(),vt.stopPropagation(),le(!1));break;case Un.tab:le(!1);break}},Ot=()=>{var vt;(vt=W.value)==null||vt.clearCheckedNodes(),!J.value&&l.filterable&&Bn(),le(!1),s("clear")},Bn=()=>{const{value:vt}=Mt;ce.value=vt,me.value=vt},Sr=vt=>{var yt,it;const{checked:ln}=vt;Ve.value?(yt=W.value)==null||yt.handleCheckChange(vt,!ln,!1):(!ln&&((it=W.value)==null||it.handleCheckChange(vt,!0,!1)),le(!1))},Ur=vt=>{const yt=vt.target,{code:it}=vt;switch(it){case Un.up:case Un.down:{vt.preventDefault();const ln=it===Un.up?-1:1;V2(NO(yt,ln,`.${E.e("suggestion-item")}[tabindex="-1"]`));break}case Un.enter:case Un.numpadEnter:yt.click();break}},Kn=()=>{const vt=we.value,yt=vt[vt.length-1];r=me.value?0:r+1,!(!yt||!r||l.collapseTags&&vt.length>1)&&(yt.hitState?Qt(yt):yt.hitState=!0)},ui=vt=>{const yt=vt.target,it=E.e("search-input");yt.className===it&&(fe.value=!0),s("focus",vt)},wr=vt=>{fe.value=!1,s("blur",vt)},Tr=Vl(()=>{const{value:vt}=ft;if(!vt)return;const yt=l.beforeFilter(vt);yv(yt)?yt.then(rn).catch(()=>{}):yt!==!1?rn():Gt()},l.debounce),pr=(vt,yt)=>{!J.value&&le(!0),!yt?.isComposing&&(vt?Tr():Gt())},Fr=vt=>Number.parseFloat(GK(M.cssVarName("input-height"),vt).value)-2;return on(he,nt),on([at,Pe,()=>l.collapseTags],Zt),on(we,()=>{dr(()=>fn())}),on(Te,async()=>{await dr();const vt=G.value.input;b=Fr(vt)||b,fn()}),on(Mt,Bn,{immediate:!0}),Zr(()=>{const vt=G.value.input,yt=Fr(vt);b=vt.offsetHeight||yt,so(vt,fn)}),n({getCheckedNodes:pn,cascaderPanelRef:W,togglePopperVisible:le,contentRef:Ht,presentText:Mt}),(vt,yt)=>(Z(),Bt(w(Na),{ref_key:"tooltipRef",ref:q,visible:J.value,teleported:vt.teleported,"popper-class":[w(E).e("dropdown"),vt.popperClass],"popper-options":d,"fallback-placements":vt.fallbackPlacements,"stop-popper-mouse-event":!1,"gpu-acceleration":!1,placement:vt.placement,transition:`${w(E).namespace.value}-zoom-in-top`,effect:"light",pure:"",persistent:vt.persistent,onHide:Gt},{default:mt(()=>[Wr((Z(),ue("div",{class:ge(w(Ke)),style:fr(w(Ne)),onClick:()=>le(w(We)?void 0:!0),onKeydown:Nn,onMouseenter:it=>re.value=!0,onMouseleave:it=>re.value=!1},[st(w(nl),{ref_key:"input",ref:G,modelValue:ce.value,"onUpdate:modelValue":it=>ce.value=it,placeholder:w($e),readonly:w(We),disabled:w(Pe),"validate-event":!1,size:w(Te),class:ge(w(xn)),tabindex:w(Ve)&&vt.filterable&&!w(Pe)?-1:void 0,onCompositionstart:w(N),onCompositionupdate:w(N),onCompositionend:w(N),onFocus:ui,onBlur:wr,onInput:pr},cu({suffix:mt(()=>[w(ct)?(Z(),Bt(w(rr),{key:"clear",class:ge([w(M).e("icon"),"icon-circle-close"]),onClick:Er(Ot,["stop"])},{default:mt(()=>[st(w(Td))]),_:1},8,["class","onClick"])):(Z(),Bt(w(rr),{key:"arrow-down",class:ge(w(Lt)),onClick:Er(it=>le(),["stop"])},{default:mt(()=>[st(w(Ed))]),_:1},8,["class","onClick"]))]),_:2},[vt.$slots.prefix?{name:"prefix",fn:mt(()=>[It(vt.$slots,"prefix")])}:void 0]),1032,["modelValue","onUpdate:modelValue","placeholder","readonly","disabled","size","class","tabindex","onCompositionstart","onCompositionupdate","onCompositionend"]),w(Ve)?(Z(),ue("div",{key:0,ref_key:"tagWrapper",ref:ie,class:ge([w(E).e("tags"),w(E).is("validate",!!w(Ct))])},[(Z(!0),ue(cr,null,Ei(we.value,it=>(Z(),Bt(w(Wg),{key:it.key,type:vt.tagType,size:w(Ae),effect:vt.tagEffect,hit:it.hitState,closable:it.closable,"disable-transitions":"",onClose:ln=>Qt(it)},{default:mt(()=>[it.isCollapseTag===!1?(Z(),ue("span",{key:0},gn(it.text),1)):(Z(),Bt(w(Na),{key:1,disabled:J.value||!vt.collapseTagsTooltip,"fallback-placements":["bottom","top","right","left"],placement:"bottom",effect:"light"},{default:mt(()=>[ae("span",null,gn(it.text),1)]),content:mt(()=>[ae("div",{class:ge(w(E).e("collapse-tags"))},[(Z(!0),ue(cr,null,Ei(ye.value.slice(vt.maxCollapseTags),(ln,Xn)=>(Z(),ue("div",{key:Xn,class:ge(w(E).e("collapse-tag"))},[(Z(),Bt(w(Wg),{key:ln.key,class:"in-tooltip",type:vt.tagType,size:w(Ae),effect:vt.tagEffect,hit:ln.hitState,closable:ln.closable,"disable-transitions":"",onClose:vr=>Qt(ln)},{default:mt(()=>[ae("span",null,gn(ln.text),1)]),_:2},1032,["type","size","effect","hit","closable","onClose"]))],2))),128))],2)]),_:2},1032,["disabled"]))]),_:2},1032,["type","size","effect","hit","closable","onClose"]))),128)),vt.filterable&&!w(Pe)?Wr((Z(),ue("input",{key:0,"onUpdate:modelValue":it=>me.value=it,type:"text",class:ge(w(E).e("search-input")),placeholder:w(Mt)?"":w(ve),onInput:it=>pr(me.value,it),onClick:Er(it=>le(!0),["stop"]),onKeydown:Ps(Kn,["delete"]),onCompositionstart:w(N),onCompositionupdate:w(N),onCompositionend:w(N),onFocus:ui,onBlur:wr},null,42,["onUpdate:modelValue","placeholder","onInput","onClick","onKeydown","onCompositionstart","onCompositionupdate","onCompositionend"])),[[Jv,me.value]]):At("v-if",!0)],2)):At("v-if",!0)],46,["onClick","onMouseenter","onMouseleave"])),[[w(yh),()=>le(!1),w(Ht)]])]),content:mt(()=>[Wr(st(w(AD),{ref_key:"cascaderPanelRef",ref:W,modelValue:w(gt),"onUpdate:modelValue":it=>Hs(gt)?gt.value=it:null,options:vt.options,props:l.props,border:!1,"render-label":vt.$slots.default,onExpandChange:Vn,onClose:it=>vt.$nextTick(()=>le(!1))},{empty:mt(()=>[It(vt.$slots,"empty")]),_:3},8,["modelValue","onUpdate:modelValue","options","props","render-label","onClose"]),[[Ki,!he.value]]),vt.filterable?Wr((Z(),Bt(w(Id),{key:0,ref_key:"suggestionPanel",ref:Y,tag:"ul",class:ge(w(E).e("suggestion-panel")),"view-class":w(E).e("suggestion-list"),onKeydown:Ur},{default:mt(()=>[Ue.value.length?(Z(!0),ue(cr,{key:0},Ei(Ue.value,it=>(Z(),ue("li",{key:it.uid,class:ge([w(E).e("suggestion-item"),w(E).is("checked",it.checked)]),tabindex:-1,onClick:ln=>Sr(it)},[It(vt.$slots,"suggestion-item",{item:it},()=>[ae("span",null,gn(it.text),1),it.checked?(Z(),Bt(w(rr),{key:0},{default:mt(()=>[st(w(d0))]),_:1})):At("v-if",!0)])],10,["onClick"]))),128)):It(vt.$slots,"empty",{key:1},()=>[ae("li",{class:ge(w(E).e("empty-text"))},gn(w(A)("el.cascader.noMatch")),3)])]),_:3},8,["class","view-class"])),[[Ki,he.value]]):At("v-if",!0)]),_:3},8,["visible","teleported","popper-class","fallback-placements","placement","transition","persistent"]))}});var xde=En(bde,[["__file","cascader.vue"]]);const wde=Gr(xde),Sde=bn({checked:Boolean,disabled:Boolean,type:{type:String,values:["primary","success","info","warning","danger"],default:"primary"}}),Cde={"update:checked":e=>Ts(e),[mi]:e=>Ts(e)},Ede=xe({name:"ElCheckTag"}),Tde=xe({...Ede,props:Sde,emits:Cde,setup(e,{emit:n}){const s=e,l=dn("check-tag"),d=se(()=>s.disabled),m=se(()=>[l.b(),l.is("checked",s.checked),l.is("disabled",d.value),l.m(s.type||"primary")]),b=()=>{if(d.value)return;const r=!s.checked;n(mi,r),n("update:checked",r)};return(r,E)=>(Z(),ue("span",{class:ge(w(m)),onClick:b},[It(r.$slots,"default")],2))}});var Ide=En(Tde,[["__file","check-tag.vue"]]);const kde=Gr(Ide),Mde=bn({tag:{type:String,default:"div"},span:{type:Number,default:24},offset:{type:Number,default:0},pull:{type:Number,default:0},push:{type:Number,default:0},xs:{type:wt([Number,Object]),default:()=>oo({})},sm:{type:wt([Number,Object]),default:()=>oo({})},md:{type:wt([Number,Object]),default:()=>oo({})},lg:{type:wt([Number,Object]),default:()=>oo({})},xl:{type:wt([Number,Object]),default:()=>oo({})}}),RD=Symbol("rowContextKey"),Ade=xe({name:"ElCol"}),Rde=xe({...Ade,props:Mde,setup(e){const n=e,{gutter:s}=Gn(RD,{gutter:se(()=>0)}),l=dn("col"),d=se(()=>{const b={};return s.value&&(b.paddingLeft=b.paddingRight=`${s.value/2}px`),b}),m=se(()=>{const b=[];return["span","offset","pull","push"].forEach(M=>{const A=n[M];gr(A)&&(M==="span"?b.push(l.b(`${n[M]}`)):A>0&&b.push(l.b(`${M}-${n[M]}`)))}),["xs","sm","md","lg","xl"].forEach(M=>{gr(n[M])?b.push(l.b(`${M}-${n[M]}`)):Yr(n[M])&&Object.entries(n[M]).forEach(([A,P])=>{b.push(A!=="span"?l.b(`${M}-${A}-${P}`):l.b(`${M}-${P}`))})}),s.value&&b.push(l.is("guttered")),[l.b(),b]});return(b,r)=>(Z(),Bt(si(b.tag),{class:ge(w(m)),style:fr(w(d))},{default:mt(()=>[It(b.$slots,"default")]),_:3},8,["class","style"]))}});var Pde=En(Rde,[["__file","col.vue"]]);const Lde=Gr(Pde),UM=e=>gr(e)||ir(e)||mn(e),Ode=bn({accordion:Boolean,modelValue:{type:wt([Array,String,Number]),default:()=>oo([])}}),Dde={[Nr]:UM,[mi]:UM},PD=Symbol("collapseContextKey"),zde=(e,n)=>{const s=Re(el(e.modelValue)),l=m=>{s.value=m;const b=e.accordion?s.value[0]:s.value;n(Nr,b),n(mi,b)},d=m=>{if(e.accordion)l([s.value[0]===m?"":m]);else{const b=[...s.value],r=b.indexOf(m);r>-1?b.splice(r,1):b.push(m),l(b)}};return on(()=>e.modelValue,()=>s.value=el(e.modelValue),{deep:!0}),Ti(PD,{activeNames:s,handleItemClick:d}),{activeNames:s,setActiveNames:l}},Nde=()=>{const e=dn("collapse");return{rootKls:se(()=>e.b())}},Fde=xe({name:"ElCollapse"}),Bde=xe({...Fde,props:Ode,emits:Dde,setup(e,{expose:n,emit:s}){const l=e,{activeNames:d,setActiveNames:m}=zde(l,s),{rootKls:b}=Nde();return n({activeNames:d,setActiveNames:m}),(r,E)=>(Z(),ue("div",{class:ge(w(b))},[It(r.$slots,"default")],2))}});var Vde=En(Bde,[["__file","collapse.vue"]]);const $de=xe({name:"ElCollapseTransition"}),Hde=xe({...$de,setup(e){const n=dn("collapse-transition"),s=d=>{d.style.maxHeight="",d.style.overflow=d.dataset.oldOverflow,d.style.paddingTop=d.dataset.oldPaddingTop,d.style.paddingBottom=d.dataset.oldPaddingBottom},l={beforeEnter(d){d.dataset||(d.dataset={}),d.dataset.oldPaddingTop=d.style.paddingTop,d.dataset.oldPaddingBottom=d.style.paddingBottom,d.style.height&&(d.dataset.elExistsHeight=d.style.height),d.style.maxHeight=0,d.style.paddingTop=0,d.style.paddingBottom=0},enter(d){requestAnimationFrame(()=>{d.dataset.oldOverflow=d.style.overflow,d.dataset.elExistsHeight?d.style.maxHeight=d.dataset.elExistsHeight:d.scrollHeight!==0?d.style.maxHeight=`${d.scrollHeight}px`:d.style.maxHeight=0,d.style.paddingTop=d.dataset.oldPaddingTop,d.style.paddingBottom=d.dataset.oldPaddingBottom,d.style.overflow="hidden"})},afterEnter(d){d.style.maxHeight="",d.style.overflow=d.dataset.oldOverflow},enterCancelled(d){s(d)},beforeLeave(d){d.dataset||(d.dataset={}),d.dataset.oldPaddingTop=d.style.paddingTop,d.dataset.oldPaddingBottom=d.style.paddingBottom,d.dataset.oldOverflow=d.style.overflow,d.style.maxHeight=`${d.scrollHeight}px`,d.style.overflow="hidden"},leave(d){d.scrollHeight!==0&&(d.style.maxHeight=0,d.style.paddingTop=0,d.style.paddingBottom=0)},afterLeave(d){s(d)},leaveCancelled(d){s(d)}};return(d,m)=>(Z(),Bt(ha,pi({name:w(n).b()},RV(l)),{default:mt(()=>[It(d.$slots,"default")]),_:3},16,["name"]))}});var Ude=En(Hde,[["__file","collapse-transition.vue"]]);const Rx=Gr(Ude),jde=bn({title:{type:String,default:""},name:{type:wt([String,Number]),default:void 0},icon:{type:bs,default:il},disabled:Boolean}),Gde=e=>{const n=Gn(PD),{namespace:s}=dn("collapse"),l=Re(!1),d=Re(!1),m=YS(),b=se(()=>m.current++),r=se(()=>{var D;return(D=e.name)!=null?D:`${s.value}-id-${m.prefix}-${w(b)}`}),E=se(()=>n?.activeNames.value.includes(w(r)));return{focusing:l,id:b,isActive:E,handleFocus:()=>{setTimeout(()=>{d.value?d.value=!1:l.value=!0},50)},handleHeaderClick:()=>{e.disabled||(n?.handleItemClick(w(r)),l.value=!1,d.value=!0)},handleEnterClick:()=>{n?.handleItemClick(w(r))}}},qde=(e,{focusing:n,isActive:s,id:l})=>{const d=dn("collapse"),m=se(()=>[d.b("item"),d.is("active",w(s)),d.is("disabled",e.disabled)]),b=se(()=>[d.be("item","header"),d.is("active",w(s)),{focusing:w(n)&&!e.disabled}]),r=se(()=>[d.be("item","arrow"),d.is("active",w(s))]),E=se(()=>d.be("item","wrap")),M=se(()=>d.be("item","content")),A=se(()=>d.b(`content-${w(l)}`)),P=se(()=>d.b(`head-${w(l)}`));return{arrowKls:r,headKls:b,rootKls:m,itemWrapperKls:E,itemContentKls:M,scopedContentId:A,scopedHeadId:P}},Wde=xe({name:"ElCollapseItem"}),Kde=xe({...Wde,props:jde,setup(e,{expose:n}){const s=e,{focusing:l,id:d,isActive:m,handleFocus:b,handleHeaderClick:r,handleEnterClick:E}=Gde(s),{arrowKls:M,headKls:A,rootKls:P,itemWrapperKls:D,itemContentKls:z,scopedContentId:F,scopedHeadId:N}=qde(s,{focusing:l,isActive:m,id:d});return n({isActive:m}),(q,G)=>(Z(),ue("div",{class:ge(w(P))},[ae("button",{id:w(N),class:ge(w(A)),"aria-expanded":w(m),"aria-controls":w(F),"aria-describedby":w(F),tabindex:q.disabled?-1:0,type:"button",onClick:w(r),onKeydown:Ps(Er(w(E),["stop","prevent"]),["space","enter"]),onFocus:w(b),onBlur:ie=>l.value=!1},[It(q.$slots,"title",{},()=>[ei(gn(q.title),1)]),It(q.$slots,"icon",{isActive:w(m)},()=>[st(w(rr),{class:ge(w(M))},{default:mt(()=>[(Z(),Bt(si(q.icon)))]),_:1},8,["class"])])],42,["id","aria-expanded","aria-controls","aria-describedby","tabindex","onClick","onKeydown","onFocus","onBlur"]),st(w(Rx),null,{default:mt(()=>[Wr(ae("div",{id:w(F),role:"region",class:ge(w(D)),"aria-hidden":!w(m),"aria-labelledby":w(N)},[ae("div",{class:ge(w(z))},[It(q.$slots,"default")],2)],10,["id","aria-hidden","aria-labelledby"]),[[Ki,w(m)]])]),_:3})],2))}});var LD=En(Kde,[["__file","collapse-item.vue"]]);const Yde=Gr(Vde,{CollapseItem:LD}),Zde=ao(LD),Xde=bn({color:{type:wt(Object),required:!0},vertical:{type:Boolean,default:!1}});let l4=!1;function zv(e,n){if(!Pi)return;const s=function(m){var b;(b=n.drag)==null||b.call(n,m)},l=function(m){var b;document.removeEventListener("mousemove",s),document.removeEventListener("mouseup",l),document.removeEventListener("touchmove",s),document.removeEventListener("touchend",l),document.onselectstart=null,document.ondragstart=null,l4=!1,(b=n.end)==null||b.call(n,m)},d=function(m){var b;l4||(m.preventDefault(),document.onselectstart=()=>!1,document.ondragstart=()=>!1,document.addEventListener("mousemove",s),document.addEventListener("mouseup",l),document.addEventListener("touchmove",s),document.addEventListener("touchend",l),l4=!0,(b=n.start)==null||b.call(n,m))};e.addEventListener("mousedown",d),e.addEventListener("touchstart",d,{passive:!1})}const Jde=(e,n)=>{if(!Pi||!e||!n)return!1;const s=e.getBoundingClientRect();let l;return n instanceof Element?l=n.getBoundingClientRect():l={top:0,right:window.innerWidth,bottom:window.innerHeight,left:0},s.top<l.bottom&&s.bottom>l.top&&s.right>l.left&&s.left<l.right},jM=e=>{let n=0,s=e;for(;s;)n+=s.offsetTop,s=s.offsetParent;return n},a6=(e,n)=>Math.abs(jM(e)-jM(n)),f8=e=>{let n,s;return e.type==="touchend"?(s=e.changedTouches[0].clientY,n=e.changedTouches[0].clientX):e.type.startsWith("touch")?(s=e.touches[0].clientY,n=e.touches[0].clientX):(s=e.clientY,n=e.clientX),{clientX:n,clientY:s}},Qde=e=>{const n=oi(),{t:s}=Oi(),l=Zs(),d=Zs(),m=se(()=>e.color.get("alpha")),b=se(()=>s("el.colorpicker.alphaLabel"));function r(P){var D;P.target!==l.value&&E(P),(D=l.value)==null||D.focus()}function E(P){if(!d.value||!l.value)return;const z=n.vnode.el.getBoundingClientRect(),{clientX:F,clientY:N}=f8(P);if(e.vertical){let q=N-z.top;q=Math.max(l.value.offsetHeight/2,q),q=Math.min(q,z.height-l.value.offsetHeight/2),e.color.set("alpha",Math.round((q-l.value.offsetHeight/2)/(z.height-l.value.offsetHeight)*100))}else{let q=F-z.left;q=Math.max(l.value.offsetWidth/2,q),q=Math.min(q,z.width-l.value.offsetWidth/2),e.color.set("alpha",Math.round((q-l.value.offsetWidth/2)/(z.width-l.value.offsetWidth)*100))}}function M(P){const{code:D,shiftKey:z}=P,F=z?10:1;switch(D){case Un.left:case Un.down:P.preventDefault(),P.stopPropagation(),A(-F);break;case Un.right:case Un.up:P.preventDefault(),P.stopPropagation(),A(F);break}}function A(P){let D=m.value+P;D=D<0?0:D>100?100:D,e.color.set("alpha",D)}return{thumb:l,bar:d,alpha:m,alphaLabel:b,handleDrag:E,handleClick:r,handleKeydown:M}},ehe=(e,{bar:n,thumb:s,handleDrag:l})=>{const d=oi(),m=dn("color-alpha-slider"),b=Re(0),r=Re(0),E=Re();function M(){if(!s.value||e.vertical)return 0;const ie=d.vnode.el,W=e.color.get("alpha");return ie?Math.round(W*(ie.offsetWidth-s.value.offsetWidth/2)/100):0}function A(){if(!s.value)return 0;const ie=d.vnode.el;if(!e.vertical)return 0;const W=e.color.get("alpha");return ie?Math.round(W*(ie.offsetHeight-s.value.offsetHeight/2)/100):0}function P(){if(e.color&&e.color.value){const{r:ie,g:W,b:Y}=e.color.toRgb();return`linear-gradient(to right, rgba(${ie}, ${W}, ${Y}, 0) 0%, rgba(${ie}, ${W}, ${Y}, 1) 100%)`}return""}function D(){b.value=M(),r.value=A(),E.value=P()}Zr(()=>{if(!n.value||!s.value)return;const ie={drag:W=>{l(W)},end:W=>{l(W)}};zv(n.value,ie),zv(s.value,ie),D()}),on(()=>e.color.get("alpha"),()=>D()),on(()=>e.color.value,()=>D());const z=se(()=>[m.b(),m.is("vertical",e.vertical)]),F=se(()=>m.e("bar")),N=se(()=>m.e("thumb")),q=se(()=>({background:E.value})),G=se(()=>({left:ho(b.value),top:ho(r.value)}));return{rootKls:z,barKls:F,barStyle:q,thumbKls:N,thumbStyle:G,update:D}},the="ElColorAlphaSlider",nhe=xe({name:the}),rhe=xe({...nhe,props:Xde,setup(e,{expose:n}){const s=e,{alpha:l,alphaLabel:d,bar:m,thumb:b,handleDrag:r,handleClick:E,handleKeydown:M}=Qde(s),{rootKls:A,barKls:P,barStyle:D,thumbKls:z,thumbStyle:F,update:N}=ehe(s,{bar:m,thumb:b,handleDrag:r});return n({update:N,bar:m,thumb:b}),(q,G)=>(Z(),ue("div",{class:ge(w(A))},[ae("div",{ref_key:"bar",ref:m,class:ge(w(P)),style:fr(w(D)),onClick:w(E)},null,14,["onClick"]),ae("div",{ref_key:"thumb",ref:b,class:ge(w(z)),style:fr(w(F)),"aria-label":w(d),"aria-valuenow":w(l),"aria-orientation":q.vertical?"vertical":"horizontal","aria-valuemin":"0","aria-valuemax":"100",role:"slider",tabindex:"0",onKeydown:w(M)},null,46,["aria-label","aria-valuenow","aria-orientation","onKeydown"])],2))}});var ihe=En(rhe,[["__file","alpha-slider.vue"]]);const she=xe({name:"ElColorHueSlider",props:{color:{type:Object,required:!0},vertical:Boolean},setup(e){const n=dn("color-hue-slider"),s=oi(),l=Re(),d=Re(),m=Re(0),b=Re(0),r=se(()=>e.color.get("hue"));on(()=>r.value,()=>{D()});function E(z){z.target!==l.value&&M(z)}function M(z){if(!d.value||!l.value)return;const N=s.vnode.el.getBoundingClientRect(),{clientX:q,clientY:G}=f8(z);let ie;if(e.vertical){let W=G-N.top;W=Math.min(W,N.height-l.value.offsetHeight/2),W=Math.max(l.value.offsetHeight/2,W),ie=Math.round((W-l.value.offsetHeight/2)/(N.height-l.value.offsetHeight)*360)}else{let W=q-N.left;W=Math.min(W,N.width-l.value.offsetWidth/2),W=Math.max(l.value.offsetWidth/2,W),ie=Math.round((W-l.value.offsetWidth/2)/(N.width-l.value.offsetWidth)*360)}e.color.set("hue",ie)}function A(){if(!l.value)return 0;const z=s.vnode.el;if(e.vertical)return 0;const F=e.color.get("hue");return z?Math.round(F*(z.offsetWidth-l.value.offsetWidth/2)/360):0}function P(){if(!l.value)return 0;const z=s.vnode.el;if(!e.vertical)return 0;const F=e.color.get("hue");return z?Math.round(F*(z.offsetHeight-l.value.offsetHeight/2)/360):0}function D(){m.value=A(),b.value=P()}return Zr(()=>{if(!d.value||!l.value)return;const z={drag:F=>{M(F)},end:F=>{M(F)}};zv(d.value,z),zv(l.value,z),D()}),{bar:d,thumb:l,thumbLeft:m,thumbTop:b,hueValue:r,handleClick:E,update:D,ns:n}}});function ohe(e,n,s,l,d,m){return Z(),ue("div",{class:ge([e.ns.b(),e.ns.is("vertical",e.vertical)])},[ae("div",{ref:"bar",class:ge(e.ns.e("bar")),onClick:e.handleClick},null,10,["onClick"]),ae("div",{ref:"thumb",class:ge(e.ns.e("thumb")),style:fr({left:e.thumbLeft+"px",top:e.thumbTop+"px"})},null,6)],2)}var ahe=En(she,[["render",ohe],["__file","hue-slider.vue"]]);const lhe=bn({modelValue:String,id:String,showAlpha:Boolean,colorFormat:String,disabled:Boolean,size:Fo,popperClass:{type:String,default:""},tabindex:{type:[String,Number],default:0},teleported:Ao.teleported,predefine:{type:wt(Array)},validateEvent:{type:Boolean,default:!0},...Ta(["ariaLabel"])}),uhe={[Nr]:e=>ir(e)||ea(e),[mi]:e=>ir(e)||ea(e),activeChange:e=>ir(e)||ea(e),focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent},OD=Symbol("colorPickerContextKey"),GM=function(e,n,s){return[e,n*s/((e=(2-n)*s)<1?e:2-e)||0,e/2]},che=function(e){return ir(e)&&e.includes(".")&&Number.parseFloat(e)===1},dhe=function(e){return ir(e)&&e.includes("%")},kg=function(e,n){che(e)&&(e="100%");const s=dhe(e);return e=Math.min(n,Math.max(0,Number.parseFloat(`${e}`))),s&&(e=Number.parseInt(`${e*n}`,10)/100),Math.abs(e-n)<1e-6?1:e%n/Number.parseFloat(n)},qM={10:"A",11:"B",12:"C",13:"D",14:"E",15:"F"},j2=e=>{e=Math.min(Math.round(e),255);const n=Math.floor(e/16),s=e%16;return`${qM[n]||n}${qM[s]||s}`},WM=function({r:e,g:n,b:s}){return Number.isNaN(+e)||Number.isNaN(+n)||Number.isNaN(+s)?"":`#${j2(e)}${j2(n)}${j2(s)}`},u4={A:10,B:11,C:12,D:13,E:14,F:15},Ep=function(e){return e.length===2?(u4[e[0].toUpperCase()]||+e[0])*16+(u4[e[1].toUpperCase()]||+e[1]):u4[e[1].toUpperCase()]||+e[1]},hhe=function(e,n,s){n=n/100,s=s/100;let l=n;const d=Math.max(s,.01);s*=2,n*=s<=1?s:2-s,l*=d<=1?d:2-d;const m=(s+n)/2,b=s===0?2*l/(d+l):2*n/(s+n);return{h:e,s:b*100,v:m*100}},KM=(e,n,s)=>{e=kg(e,255),n=kg(n,255),s=kg(s,255);const l=Math.max(e,n,s),d=Math.min(e,n,s);let m;const b=l,r=l-d,E=l===0?0:r/l;if(l===d)m=0;else{switch(l){case e:{m=(n-s)/r+(n<s?6:0);break}case n:{m=(s-e)/r+2;break}case s:{m=(e-n)/r+4;break}}m/=6}return{h:m*360,s:E*100,v:b*100}},W_=function(e,n,s){e=kg(e,360)*6,n=kg(n,100),s=kg(s,100);const l=Math.floor(e),d=e-l,m=s*(1-n),b=s*(1-d*n),r=s*(1-(1-d)*n),E=l%6,M=[s,b,m,m,r,s][E],A=[r,s,s,b,m,m][E],P=[m,m,r,s,s,b][E];return{r:Math.round(M*255),g:Math.round(A*255),b:Math.round(P*255)}};class gv{constructor(n={}){this._hue=0,this._saturation=100,this._value=100,this._alpha=100,this.enableAlpha=!1,this.format="hex",this.value="";for(const s in n)Wi(n,s)&&(this[s]=n[s]);n.value?this.fromString(n.value):this.doOnChange()}set(n,s){if(arguments.length===1&&typeof n=="object"){for(const l in n)Wi(n,l)&&this.set(l,n[l]);return}this[`_${n}`]=s,this.doOnChange()}get(n){return n==="alpha"?Math.floor(this[`_${n}`]):this[`_${n}`]}toRgb(){return W_(this._hue,this._saturation,this._value)}fromString(n){if(!n){this._hue=0,this._saturation=100,this._value=100,this.doOnChange();return}const s=(l,d,m)=>{this._hue=Math.max(0,Math.min(360,l)),this._saturation=Math.max(0,Math.min(100,d)),this._value=Math.max(0,Math.min(100,m)),this.doOnChange()};if(n.includes("hsl")){const l=n.replace(/hsla|hsl|\(|\)/gm,"").split(/\s|,/g).filter(d=>d!=="").map((d,m)=>m>2?Number.parseFloat(d):Number.parseInt(d,10));if(l.length===4?this._alpha=Number.parseFloat(l[3])*100:l.length===3&&(this._alpha=100),l.length>=3){const{h:d,s:m,v:b}=hhe(l[0],l[1],l[2]);s(d,m,b)}}else if(n.includes("hsv")){const l=n.replace(/hsva|hsv|\(|\)/gm,"").split(/\s|,/g).filter(d=>d!=="").map((d,m)=>m>2?Number.parseFloat(d):Number.parseInt(d,10));l.length===4?this._alpha=Number.parseFloat(l[3])*100:l.length===3&&(this._alpha=100),l.length>=3&&s(l[0],l[1],l[2])}else if(n.includes("rgb")){const l=n.replace(/rgba|rgb|\(|\)/gm,"").split(/\s|,/g).filter(d=>d!=="").map((d,m)=>m>2?Number.parseFloat(d):Number.parseInt(d,10));if(l.length===4?this._alpha=Number.parseFloat(l[3])*100:l.length===3&&(this._alpha=100),l.length>=3){const{h:d,s:m,v:b}=KM(l[0],l[1],l[2]);s(d,m,b)}}else if(n.includes("#")){const l=n.replace("#","").trim();if(!/^[0-9a-fA-F]{3}$|^[0-9a-fA-F]{6}$|^[0-9a-fA-F]{8}$/.test(l))return;let d,m,b;l.length===3?(d=Ep(l[0]+l[0]),m=Ep(l[1]+l[1]),b=Ep(l[2]+l[2])):(l.length===6||l.length===8)&&(d=Ep(l.slice(0,2)),m=Ep(l.slice(2,4)),b=Ep(l.slice(4,6))),l.length===8?this._alpha=Ep(l.slice(6))/255*100:(l.length===3||l.length===6)&&(this._alpha=100);const{h:r,s:E,v:M}=KM(d,m,b);s(r,E,M)}}compare(n){return Math.abs(n._hue-this._hue)<2&&Math.abs(n._saturation-this._saturation)<1&&Math.abs(n._value-this._value)<1&&Math.abs(n._alpha-this._alpha)<1}doOnChange(){const{_hue:n,_saturation:s,_value:l,_alpha:d,format:m}=this;if(this.enableAlpha)switch(m){case"hsl":{const b=GM(n,s/100,l/100);this.value=`hsla(${n}, ${Math.round(b[1]*100)}%, ${Math.round(b[2]*100)}%, ${this.get("alpha")/100})`;break}case"hsv":{this.value=`hsva(${n}, ${Math.round(s)}%, ${Math.round(l)}%, ${this.get("alpha")/100})`;break}case"hex":{this.value=`${WM(W_(n,s,l))}${j2(d*255/100)}`;break}default:{const{r:b,g:r,b:E}=W_(n,s,l);this.value=`rgba(${b}, ${r}, ${E}, ${this.get("alpha")/100})`}}else switch(m){case"hsl":{const b=GM(n,s/100,l/100);this.value=`hsl(${n}, ${Math.round(b[1]*100)}%, ${Math.round(b[2]*100)}%)`;break}case"hsv":{this.value=`hsv(${n}, ${Math.round(s)}%, ${Math.round(l)}%)`;break}case"rgb":{const{r:b,g:r,b:E}=W_(n,s,l);this.value=`rgb(${b}, ${r}, ${E})`;break}default:this.value=WM(W_(n,s,l))}}}const fhe=xe({props:{colors:{type:Array,required:!0},color:{type:Object,required:!0},enableAlpha:{type:Boolean,required:!0}},setup(e){const n=dn("color-predefine"),{currentColor:s}=Gn(OD),l=Re(m(e.colors,e.color));on(()=>s.value,b=>{const r=new gv;r.fromString(b),l.value.forEach(E=>{E.selected=r.compare(E)})}),Da(()=>{l.value=m(e.colors,e.color)});function d(b){e.color.fromString(e.colors[b])}function m(b,r){return b.map(E=>{const M=new gv;return M.enableAlpha=e.enableAlpha,M.format="rgba",M.fromString(E),M.selected=M.value===r.value,M})}return{rgbaColors:l,handleSelect:d,ns:n}}});function phe(e,n,s,l,d,m){return Z(),ue("div",{class:ge(e.ns.b())},[ae("div",{class:ge(e.ns.e("colors"))},[(Z(!0),ue(cr,null,Ei(e.rgbaColors,(b,r)=>(Z(),ue("div",{key:e.colors[r],class:ge([e.ns.e("color-selector"),e.ns.is("alpha",b._alpha<100),{selected:b.selected}]),onClick:E=>e.handleSelect(r)},[ae("div",{style:fr({backgroundColor:b.value})},null,4)],10,["onClick"]))),128))],2)],2)}var mhe=En(fhe,[["render",phe],["__file","predefine.vue"]]);const ghe=xe({name:"ElSlPanel",props:{color:{type:Object,required:!0}},setup(e){const n=dn("color-svpanel"),s=oi(),l=Re(0),d=Re(0),m=Re("hsl(0, 100%, 50%)"),b=se(()=>{const M=e.color.get("hue"),A=e.color.get("value");return{hue:M,value:A}});function r(){const M=e.color.get("saturation"),A=e.color.get("value"),P=s.vnode.el,{clientWidth:D,clientHeight:z}=P;d.value=M*D/100,l.value=(100-A)*z/100,m.value=`hsl(${e.color.get("hue")}, 100%, 50%)`}function E(M){const P=s.vnode.el.getBoundingClientRect(),{clientX:D,clientY:z}=f8(M);let F=D-P.left,N=z-P.top;F=Math.max(0,F),F=Math.min(F,P.width),N=Math.max(0,N),N=Math.min(N,P.height),d.value=F,l.value=N,e.color.set({saturation:F/P.width*100,value:100-N/P.height*100})}return on(()=>b.value,()=>{r()}),Zr(()=>{zv(s.vnode.el,{drag:M=>{E(M)},end:M=>{E(M)}}),r()}),{cursorTop:l,cursorLeft:d,background:m,colorValue:b,handleDrag:E,update:r,ns:n}}});function _he(e,n,s,l,d,m){return Z(),ue("div",{class:ge(e.ns.b()),style:fr({backgroundColor:e.background})},[ae("div",{class:ge(e.ns.e("white"))},null,2),ae("div",{class:ge(e.ns.e("black"))},null,2),ae("div",{class:ge(e.ns.e("cursor")),style:fr({top:e.cursorTop+"px",left:e.cursorLeft+"px"})},[ae("div")],6)],6)}var vhe=En(ghe,[["render",_he],["__file","sv-panel.vue"]]);const yhe=xe({name:"ElColorPicker"}),bhe=xe({...yhe,props:lhe,emits:uhe,setup(e,{expose:n,emit:s}){const l=e,{t:d}=Oi(),m=dn("color"),{formItem:b}=Fa(),r=Lo(),E=Ba(),{inputId:M,isLabeledByFormItem:A}=Du(l,{formItemContext:b}),P=Re(),D=Re(),z=Re(),F=Re(),N=Re(),q=Re(),{isFocused:G,handleFocus:ie,handleBlur:W}=Pf(N,{beforeFocus(){return E.value},beforeBlur(Lt){var xn;return(xn=F.value)==null?void 0:xn.isFocusInsideContent(Lt)},afterBlur(){Pe(!1),Ae()}});let Y=!0;const J=ts(new gv({enableAlpha:l.showAlpha,format:l.colorFormat||"",value:l.modelValue})),re=Re(!1),he=Re(!1),fe=Re(""),ce=se(()=>!l.modelValue&&!he.value?"transparent":Ne(J,l.showAlpha)),me=se(()=>!l.modelValue&&!he.value?"":J.value),we=se(()=>A.value?void 0:l.ariaLabel||d("el.colorpicker.defaultLabel")),ye=se(()=>A.value?b?.labelId:void 0),Ue=se(()=>[m.b("picker"),m.is("disabled",E.value),m.bm("picker",r.value),m.is("focused",G.value)]);function Ne(Lt,xn){if(!(Lt instanceof gv))throw new TypeError("color should be instance of _color Class");const{r:Ht,g:le,b:nt}=Lt.toRgb();return xn?`rgba(${Ht}, ${le}, ${nt}, ${Lt.get("alpha")/100})`:`rgb(${Ht}, ${le}, ${nt})`}function Pe(Lt){re.value=Lt}const ve=Vl(Pe,100,{leading:!0});function $e(){E.value||Pe(!0)}function Te(){ve(!1),Ae()}function Ae(){dr(()=>{l.modelValue?J.fromString(l.modelValue):(J.value="",dr(()=>{he.value=!1}))})}function Ve(){E.value||(re.value&&Ae(),ve(!re.value))}function We(){J.fromString(fe.value)}function ft(){const Lt=J.value;s(Nr,Lt),s(mi,Lt),l.validateEvent&&b?.validate("change").catch(xn=>void 0),ve(!1),dr(()=>{const xn=new gv({enableAlpha:l.showAlpha,format:l.colorFormat||"",value:l.modelValue});J.compare(xn)||Ae()})}function at(){ve(!1),s(Nr,null),s(mi,null),l.modelValue!==null&&l.validateEvent&&b?.validate("change").catch(Lt=>void 0),Ae()}function ct(){re.value&&(Te(),G.value&&gt())}function Mt(Lt){Lt.preventDefault(),Lt.stopPropagation(),Pe(!1),Ae()}function Ct(Lt){switch(Lt.code){case Un.enter:case Un.numpadEnter:case Un.space:Lt.preventDefault(),Lt.stopPropagation(),$e(),q.value.focus();break;case Un.esc:Mt(Lt);break}}function gt(){N.value.focus()}function Ke(){N.value.blur()}return Zr(()=>{l.modelValue&&(fe.value=me.value)}),on(()=>l.modelValue,Lt=>{Lt?Lt&&Lt!==J.value&&(Y=!1,J.fromString(Lt)):he.value=!1}),on(()=>[l.colorFormat,l.showAlpha],()=>{J.enableAlpha=l.showAlpha,J.format=l.colorFormat||J.format,J.doOnChange(),s(Nr,J.value)}),on(()=>me.value,Lt=>{fe.value=Lt,Y&&s("activeChange",Lt),Y=!0}),on(()=>J.value,()=>{!l.modelValue&&!he.value&&(he.value=!0)}),on(()=>re.value,()=>{dr(()=>{var Lt,xn,Ht;(Lt=P.value)==null||Lt.update(),(xn=D.value)==null||xn.update(),(Ht=z.value)==null||Ht.update()})}),Ti(OD,{currentColor:me}),n({color:J,show:$e,hide:Te,focus:gt,blur:Ke}),(Lt,xn)=>(Z(),Bt(w(Na),{ref_key:"popper",ref:F,visible:re.value,"show-arrow":!1,"fallback-placements":["bottom","top","right","left"],offset:0,"gpu-acceleration":!1,"popper-class":[w(m).be("picker","panel"),w(m).b("dropdown"),Lt.popperClass],"stop-popper-mouse-event":!1,effect:"light",trigger:"click",teleported:Lt.teleported,transition:`${w(m).namespace.value}-zoom-in-top`,persistent:"",onHide:Ht=>Pe(!1)},{content:mt(()=>[Wr((Z(),ue("div",{onKeydown:Ps(Mt,["esc"])},[ae("div",{class:ge(w(m).be("dropdown","main-wrapper"))},[st(ahe,{ref_key:"hue",ref:P,class:"hue-slider",color:w(J),vertical:""},null,8,["color"]),st(vhe,{ref_key:"sv",ref:D,color:w(J)},null,8,["color"])],2),Lt.showAlpha?(Z(),Bt(ihe,{key:0,ref_key:"alpha",ref:z,color:w(J)},null,8,["color"])):At("v-if",!0),Lt.predefine?(Z(),Bt(mhe,{key:1,ref:"predefine","enable-alpha":Lt.showAlpha,color:w(J),colors:Lt.predefine},null,8,["enable-alpha","color","colors"])):At("v-if",!0),ae("div",{class:ge(w(m).be("dropdown","btns"))},[ae("span",{class:ge(w(m).be("dropdown","value"))},[st(w(nl),{ref_key:"inputRef",ref:q,modelValue:fe.value,"onUpdate:modelValue":Ht=>fe.value=Ht,"validate-event":!1,size:"small",onKeyup:Ps(We,["enter"]),onBlur:We},null,8,["modelValue","onUpdate:modelValue","onKeyup"])],2),st(w(ua),{class:ge(w(m).be("dropdown","link-btn")),text:"",size:"small",onClick:at},{default:mt(()=>[ei(gn(w(d)("el.colorpicker.clear")),1)]),_:1},8,["class"]),st(w(ua),{plain:"",size:"small",class:ge(w(m).be("dropdown","btn")),onClick:ft},{default:mt(()=>[ei(gn(w(d)("el.colorpicker.confirm")),1)]),_:1},8,["class"])],2)],40,["onKeydown"])),[[w(yh),ct,N.value]])]),default:mt(()=>[ae("div",pi({id:w(M),ref_key:"triggerRef",ref:N},Lt.$attrs,{class:w(Ue),role:"button","aria-label":w(we),"aria-labelledby":w(ye),"aria-description":w(d)("el.colorpicker.description",{color:Lt.modelValue||""}),"aria-disabled":w(E),tabindex:w(E)?void 0:Lt.tabindex,onKeydown:Ct,onFocus:w(ie),onBlur:w(W)}),[w(E)?(Z(),ue("div",{key:0,class:ge(w(m).be("picker","mask"))},null,2)):At("v-if",!0),ae("div",{class:ge(w(m).be("picker","trigger")),onClick:Ve},[ae("span",{class:ge([w(m).be("picker","color"),w(m).is("alpha",Lt.showAlpha)])},[ae("span",{class:ge(w(m).be("picker","color-inner")),style:fr({backgroundColor:w(ce)})},[Wr(st(w(rr),{class:ge([w(m).be("picker","icon"),w(m).is("icon-arrow-down")])},{default:mt(()=>[st(w(Ed))]),_:1},8,["class"]),[[Ki,Lt.modelValue||he.value]]),Wr(st(w(rr),{class:ge([w(m).be("picker","empty"),w(m).is("icon-close")])},{default:mt(()=>[st(w(du))]),_:1},8,["class"]),[[Ki,!Lt.modelValue&&!he.value]])],6)],2)],2)],16,["id","aria-label","aria-labelledby","aria-description","aria-disabled","tabindex","onFocus","onBlur"])]),_:1},8,["visible","popper-class","teleported","transition","onHide"]))}});var xhe=En(bhe,[["__file","color-picker.vue"]]);const whe=Gr(xhe),She=bn({a11y:{type:Boolean,default:!0},locale:{type:wt(Object)},size:Fo,button:{type:wt(Object)},experimentalFeatures:{type:wt(Object)},keyboardNavigation:{type:Boolean,default:!0},message:{type:wt(Object)},zIndex:Number,namespace:{type:String,default:"el"},...c0}),lc={},Che=xe({name:"ElConfigProvider",props:She,setup(e,{slots:n}){on(()=>e.message,l=>{Object.assign(lc,l??{})},{immediate:!0,deep:!0});const s=BS(e);return()=>It(n,"default",{config:s?.value})}}),Ehe=Gr(Che),The=xe({name:"ElContainer"}),Ihe=xe({...The,props:{direction:{type:String}},setup(e){const n=e,s=qo(),l=dn("container"),d=se(()=>n.direction==="vertical"?!0:n.direction==="horizontal"?!1:s&&s.default?s.default().some(b=>{const r=b.type.name;return r==="ElHeader"||r==="ElFooter"}):!1);return(m,b)=>(Z(),ue("section",{class:ge([w(l).b(),w(l).is("vertical",w(d))])},[It(m.$slots,"default")],2))}});var khe=En(Ihe,[["__file","container.vue"]]);const Mhe=xe({name:"ElAside"}),Ahe=xe({...Mhe,props:{width:{type:String,default:null}},setup(e){const n=e,s=dn("aside"),l=se(()=>n.width?s.cssVarBlock({width:n.width}):{});return(d,m)=>(Z(),ue("aside",{class:ge(w(s).b()),style:fr(w(l))},[It(d.$slots,"default")],6))}});var DD=En(Ahe,[["__file","aside.vue"]]);const Rhe=xe({name:"ElFooter"}),Phe=xe({...Rhe,props:{height:{type:String,default:null}},setup(e){const n=e,s=dn("footer"),l=se(()=>n.height?s.cssVarBlock({height:n.height}):{});return(d,m)=>(Z(),ue("footer",{class:ge(w(s).b()),style:fr(w(l))},[It(d.$slots,"default")],6))}});var zD=En(Phe,[["__file","footer.vue"]]);const Lhe=xe({name:"ElHeader"}),Ohe=xe({...Lhe,props:{height:{type:String,default:null}},setup(e){const n=e,s=dn("header"),l=se(()=>n.height?s.cssVarBlock({height:n.height}):{});return(d,m)=>(Z(),ue("header",{class:ge(w(s).b()),style:fr(w(l))},[It(d.$slots,"default")],6))}});var ND=En(Ohe,[["__file","header.vue"]]);const Dhe=xe({name:"ElMain"}),zhe=xe({...Dhe,setup(e){const n=dn("main");return(s,l)=>(Z(),ue("main",{class:ge(w(n).b())},[It(s.$slots,"default")],2))}});var FD=En(zhe,[["__file","main.vue"]]);const Nhe=Gr(khe,{Aside:DD,Footer:zD,Header:ND,Main:FD}),Fhe=ao(DD),Bhe=ao(zD),Vhe=ao(ND),$he=ao(FD);var G2={exports:{}},Hhe=G2.exports,YM;function Uhe(){return YM||(YM=1,function(e,n){(function(s,l){e.exports=l()})(Hhe,function(){var s={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},l=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|Q|YYYY|YY?|ww?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,d=/\d/,m=/\d\d/,b=/\d\d?/,r=/\d*[^-_:/,()\s\d]+/,E={},M=function(q){return(q=+q)+(q>68?1900:2e3)},A=function(q){return function(G){this[q]=+G}},P=[/[+-]\d\d:?(\d\d)?|Z/,function(q){(this.zone||(this.zone={})).offset=function(G){if(!G||G==="Z")return 0;var ie=G.match(/([+-]|\d\d)/g),W=60*ie[1]+(+ie[2]||0);return W===0?0:ie[0]==="+"?-W:W}(q)}],D=function(q){var G=E[q];return G&&(G.indexOf?G:G.s.concat(G.f))},z=function(q,G){var ie,W=E.meridiem;if(W){for(var Y=1;Y<=24;Y+=1)if(q.indexOf(W(Y,0,G))>-1){ie=Y>12;break}}else ie=q===(G?"pm":"PM");return ie},F={A:[r,function(q){this.afternoon=z(q,!1)}],a:[r,function(q){this.afternoon=z(q,!0)}],Q:[d,function(q){this.month=3*(q-1)+1}],S:[d,function(q){this.milliseconds=100*+q}],SS:[m,function(q){this.milliseconds=10*+q}],SSS:[/\d{3}/,function(q){this.milliseconds=+q}],s:[b,A("seconds")],ss:[b,A("seconds")],m:[b,A("minutes")],mm:[b,A("minutes")],H:[b,A("hours")],h:[b,A("hours")],HH:[b,A("hours")],hh:[b,A("hours")],D:[b,A("day")],DD:[m,A("day")],Do:[r,function(q){var G=E.ordinal,ie=q.match(/\d+/);if(this.day=ie[0],G)for(var W=1;W<=31;W+=1)G(W).replace(/\[|\]/g,"")===q&&(this.day=W)}],w:[b,A("week")],ww:[m,A("week")],M:[b,A("month")],MM:[m,A("month")],MMM:[r,function(q){var G=D("months"),ie=(D("monthsShort")||G.map(function(W){return W.slice(0,3)})).indexOf(q)+1;if(ie<1)throw new Error;this.month=ie%12||ie}],MMMM:[r,function(q){var G=D("months").indexOf(q)+1;if(G<1)throw new Error;this.month=G%12||G}],Y:[/[+-]?\d+/,A("year")],YY:[m,function(q){this.year=M(q)}],YYYY:[/\d{4}/,A("year")],Z:P,ZZ:P};function N(q){var G,ie;G=q,ie=E&&E.formats;for(var W=(q=G.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(me,we,ye){var Ue=ye&&ye.toUpperCase();return we||ie[ye]||s[ye]||ie[Ue].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(Ne,Pe,ve){return Pe||ve.slice(1)})})).match(l),Y=W.length,J=0;J<Y;J+=1){var re=W[J],he=F[re],fe=he&&he[0],ce=he&&he[1];W[J]=ce?{regex:fe,parser:ce}:re.replace(/^\[|\]$/g,"")}return function(me){for(var we={},ye=0,Ue=0;ye<Y;ye+=1){var Ne=W[ye];if(typeof Ne=="string")Ue+=Ne.length;else{var Pe=Ne.regex,ve=Ne.parser,$e=me.slice(Ue),Te=Pe.exec($e)[0];ve.call(we,Te),me=me.replace(Te,"")}}return function(Ae){var Ve=Ae.afternoon;if(Ve!==void 0){var We=Ae.hours;Ve?We<12&&(Ae.hours+=12):We===12&&(Ae.hours=0),delete Ae.afternoon}}(we),we}}return function(q,G,ie){ie.p.customParseFormat=!0,q&&q.parseTwoDigitYear&&(M=q.parseTwoDigitYear);var W=G.prototype,Y=W.parse;W.parse=function(J){var re=J.date,he=J.utc,fe=J.args;this.$u=he;var ce=fe[1];if(typeof ce=="string"){var me=fe[2]===!0,we=fe[3]===!0,ye=me||we,Ue=fe[2];we&&(Ue=fe[2]),E=this.$locale(),!me&&Ue&&(E=ie.Ls[Ue]),this.$d=function($e,Te,Ae,Ve){try{if(["x","X"].indexOf(Te)>-1)return new Date((Te==="X"?1e3:1)*$e);var We=N(Te)($e),ft=We.year,at=We.month,ct=We.day,Mt=We.hours,Ct=We.minutes,gt=We.seconds,Ke=We.milliseconds,Lt=We.zone,xn=We.week,Ht=new Date,le=ct||(ft||at?1:Ht.getDate()),nt=ft||Ht.getFullYear(),Gt=0;ft&&!at||(Gt=at>0?at-1:Ht.getMonth());var an,Qt=Mt||0,Zt=Ct||0,rn=gt||0,bt=Ke||0;return Lt?new Date(Date.UTC(nt,Gt,le,Qt,Zt,rn,bt+60*Lt.offset*1e3)):Ae?new Date(Date.UTC(nt,Gt,le,Qt,Zt,rn,bt)):(an=new Date(nt,Gt,le,Qt,Zt,rn,bt),xn&&(an=Ve(an).week(xn).toDate()),an)}catch{return new Date("")}}(re,ce,he,ie),this.init(),Ue&&Ue!==!0&&(this.$L=this.locale(Ue).$L),ye&&re!=this.format(ce)&&(this.$d=new Date("")),E={}}else if(ce instanceof Array)for(var Ne=ce.length,Pe=1;Pe<=Ne;Pe+=1){fe[1]=ce[Pe-1];var ve=ie.apply(this,fe);if(ve.isValid()){this.$d=ve.$d,this.$L=ve.$L,this.init();break}Pe===Ne&&(this.$d=new Date(""))}else Y.call(this,J)}}})}(G2)),G2.exports}var jhe=Uhe();const p8=bc(jhe);var q2={exports:{}},Ghe=q2.exports,ZM;function qhe(){return ZM||(ZM=1,function(e,n){(function(s,l){e.exports=l()})(Ghe,function(){return function(s,l){var d=l.prototype,m=d.format;d.format=function(b){var r=this,E=this.$locale();if(!this.isValid())return m.bind(this)(b);var M=this.$utils(),A=(b||"YYYY-MM-DDTHH:mm:ssZ").replace(/\[([^\]]+)]|Q|wo|ww|w|WW|W|zzz|z|gggg|GGGG|Do|X|x|k{1,2}|S/g,function(P){switch(P){case"Q":return Math.ceil((r.$M+1)/3);case"Do":return E.ordinal(r.$D);case"gggg":return r.weekYear();case"GGGG":return r.isoWeekYear();case"wo":return E.ordinal(r.week(),"W");case"w":case"ww":return M.s(r.week(),P==="w"?1:2,"0");case"W":case"WW":return M.s(r.isoWeek(),P==="W"?1:2,"0");case"k":case"kk":return M.s(String(r.$H===0?24:r.$H),P==="k"?1:2,"0");case"X":return Math.floor(r.$d.getTime()/1e3);case"x":return r.$d.getTime();case"z":return"["+r.offsetName()+"]";case"zzz":return"["+r.offsetName("long")+"]";default:return P}});return m.bind(this)(A)}}})}(q2)),q2.exports}var Whe=qhe();const Khe=bc(Whe);var W2={exports:{}},Yhe=W2.exports,XM;function Zhe(){return XM||(XM=1,function(e,n){(function(s,l){e.exports=l()})(Yhe,function(){var s="week",l="year";return function(d,m,b){var r=m.prototype;r.week=function(E){if(E===void 0&&(E=null),E!==null)return this.add(7*(E-this.week()),"day");var M=this.$locale().yearStart||1;if(this.month()===11&&this.date()>25){var A=b(this).startOf(l).add(1,l).date(M),P=b(this).endOf(s);if(A.isBefore(P))return 1}var D=b(this).startOf(l).date(M).startOf(s).subtract(1,"millisecond"),z=this.diff(D,s,!0);return z<0?b(this).startOf("week").week():Math.ceil(z)},r.weeks=function(E){return E===void 0&&(E=null),this.week(E)}}})}(W2)),W2.exports}var Xhe=Zhe();const Jhe=bc(Xhe);var K2={exports:{}},Qhe=K2.exports,JM;function efe(){return JM||(JM=1,function(e,n){(function(s,l){e.exports=l()})(Qhe,function(){return function(s,l){l.prototype.weekYear=function(){var d=this.month(),m=this.week(),b=this.year();return m===1&&d===11?b+1:d===0&&m>=52?b-1:b}}})}(K2)),K2.exports}var tfe=efe();const nfe=bc(tfe);var Y2={exports:{}},rfe=Y2.exports,QM;function ife(){return QM||(QM=1,function(e,n){(function(s,l){e.exports=l()})(rfe,function(){return function(s,l,d){l.prototype.dayOfYear=function(m){var b=Math.round((d(this).startOf("day")-d(this).startOf("year"))/864e5)+1;return m==null?b:this.add(m-b,"day")}}})}(Y2)),Y2.exports}var sfe=ife();const ofe=bc(sfe);var Z2={exports:{}},afe=Z2.exports,eA;function lfe(){return eA||(eA=1,function(e,n){(function(s,l){e.exports=l()})(afe,function(){return function(s,l){l.prototype.isSameOrAfter=function(d,m){return this.isSame(d,m)||this.isAfter(d,m)}}})}(Z2)),Z2.exports}var ufe=lfe();const cfe=bc(ufe);var X2={exports:{}},dfe=X2.exports,tA;function hfe(){return tA||(tA=1,function(e,n){(function(s,l){e.exports=l()})(dfe,function(){return function(s,l){l.prototype.isSameOrBefore=function(d,m){return this.isSame(d,m)||this.isBefore(d,m)}}})}(X2)),X2.exports}var ffe=hfe();const pfe=bc(ffe),nA=["hours","minutes","seconds"],Lb="HH:mm:ss",fg="YYYY-MM-DD",mfe={date:fg,dates:fg,week:"gggg[w]ww",year:"YYYY",years:"YYYY",month:"YYYY-MM",months:"YYYY-MM",datetime:`${fg} ${Lb}`,monthrange:"YYYY-MM",yearrange:"YYYY",daterange:fg,datetimerange:`${fg} ${Lb}`},BD=bn({disabledHours:{type:wt(Function)},disabledMinutes:{type:wt(Function)},disabledSeconds:{type:wt(Function)}}),VD=bn({visible:Boolean,actualVisible:{type:Boolean,default:void 0},format:{type:String,default:""}}),m8=bn({id:{type:wt([Array,String])},name:{type:wt([Array,String])},popperClass:{type:String,default:""},format:String,valueFormat:String,dateFormat:String,timeFormat:String,type:{type:String,default:""},clearable:{type:Boolean,default:!0},clearIcon:{type:wt([String,Object]),default:Td},editable:{type:Boolean,default:!0},prefixIcon:{type:wt([String,Object]),default:""},size:Fo,readonly:Boolean,disabled:Boolean,placeholder:{type:String,default:""},popperOptions:{type:wt(Object),default:()=>({})},modelValue:{type:wt([Date,Array,String,Number]),default:""},rangeSeparator:{type:String,default:"-"},startPlaceholder:String,endPlaceholder:String,defaultValue:{type:wt([Date,Array])},defaultTime:{type:wt([Date,Array])},isRange:Boolean,...BD,disabledDate:{type:Function},cellClassName:{type:Function},shortcuts:{type:Array,default:()=>[]},arrowControl:Boolean,tabindex:{type:wt([String,Number]),default:0},validateEvent:{type:Boolean,default:!0},unlinkPanels:Boolean,placement:{type:wt(String),values:Eh,default:"bottom"},fallbackPlacements:{type:wt(Array),default:["bottom","top","right","left"]},...c0,...Ta(["ariaLabel"]),showNow:{type:Boolean,default:!0}}),gfe=bn({id:{type:wt(Array)},name:{type:wt(Array)},modelValue:{type:wt([Array,String])},startPlaceholder:String,endPlaceholder:String,disabled:Boolean}),_fe=xe({name:"PickerRangeTrigger",inheritAttrs:!1}),vfe=xe({..._fe,props:gfe,emits:["mouseenter","mouseleave","click","touchstart","focus","blur","startInput","endInput","startChange","endChange"],setup(e,{expose:n,emit:s}){const l=oy(),d=dn("date"),m=dn("range"),b=Re(),r=Re(),{wrapperRef:E,isFocused:M}=Pf(b),A=Y=>{s("click",Y)},P=Y=>{s("mouseenter",Y)},D=Y=>{s("mouseleave",Y)},z=Y=>{s("mouseenter",Y)},F=Y=>{s("startInput",Y)},N=Y=>{s("endInput",Y)},q=Y=>{s("startChange",Y)},G=Y=>{s("endChange",Y)};return n({focus:()=>{var Y;(Y=b.value)==null||Y.focus()},blur:()=>{var Y,J;(Y=b.value)==null||Y.blur(),(J=r.value)==null||J.blur()}}),(Y,J)=>(Z(),ue("div",{ref_key:"wrapperRef",ref:E,class:ge([w(d).is("active",w(M)),Y.$attrs.class]),style:fr(Y.$attrs.style),onClick:A,onMouseenter:P,onMouseleave:D,onTouchstartPassive:z},[It(Y.$slots,"prefix"),ae("input",pi(w(l),{id:Y.id&&Y.id[0],ref_key:"inputRef",ref:b,name:Y.name&&Y.name[0],placeholder:Y.startPlaceholder,value:Y.modelValue&&Y.modelValue[0],class:w(m).b("input"),disabled:Y.disabled,onInput:F,onChange:q}),null,16,["id","name","placeholder","value","disabled"]),It(Y.$slots,"range-separator"),ae("input",pi(w(l),{id:Y.id&&Y.id[1],ref_key:"endInputRef",ref:r,name:Y.name&&Y.name[1],placeholder:Y.endPlaceholder,value:Y.modelValue&&Y.modelValue[1],class:w(m).b("input"),disabled:Y.disabled,onInput:N,onChange:G}),null,16,["id","name","placeholder","value","disabled"]),It(Y.$slots,"suffix")],38))}});var yfe=En(vfe,[["__file","picker-range-trigger.vue"]]);const bfe=xe({name:"Picker"}),xfe=xe({...bfe,props:m8,emits:[Nr,mi,"focus","blur","clear","calendar-change","panel-change","visible-change","keydown"],setup(e,{expose:n,emit:s}){const l=e,d=wh(),{lang:m}=Oi(),b=dn("date"),r=dn("input"),E=dn("range"),{form:M,formItem:A}=Fa(),P=Gn("ElPopperOptions",{}),{valueOnClear:D}=vx(l,null),z=Re(),F=Re(),N=Re(!1),q=Re(!1),G=Re(null);let ie=!1;const{isFocused:W,handleFocus:Y,handleBlur:J}=Pf(F,{beforeFocus(){return l.readonly||Ae.value},afterFocus(){N.value=!0},beforeBlur(it){var ln;return!ie&&((ln=z.value)==null?void 0:ln.isFocusInsideContent(it))},afterBlur(){fn(),N.value=!1,ie=!1,l.validateEvent&&A?.validate("blur").catch(it=>void 0)}}),re=se(()=>[b.b("editor"),b.bm("editor",l.type),r.e("wrapper"),b.is("disabled",Ae.value),b.is("active",N.value),E.b("editor"),Qt?E.bm("editor",Qt.value):"",d.class]),he=se(()=>[r.e("icon"),E.e("close-icon"),Ke.value?"":E.e("close-icon--hidden")]);on(N,it=>{it?dr(()=>{it&&(G.value=l.modelValue)}):(bt.value=null,dr(()=>{fe(l.modelValue)}))});const fe=(it,ln)=>{(ln||!LM(it,G.value))&&(s(mi,it),ln&&(G.value=it),l.validateEvent&&A?.validate("change").catch(Xn=>void 0))},ce=it=>{if(!LM(l.modelValue,it)){let ln;mn(it)?ln=it.map(Xn=>DM(Xn,l.valueFormat,m.value)):it&&(ln=DM(it,l.valueFormat,m.value)),s(Nr,it&&ln,m.value)}},me=it=>{s("keydown",it)},we=se(()=>F.value?Array.from(F.value.$el.querySelectorAll("input")):[]),ye=(it,ln,Xn)=>{const vr=we.value;vr.length&&(!Xn||Xn==="min"?(vr[0].setSelectionRange(it,ln),vr[0].focus()):Xn==="max"&&(vr[1].setSelectionRange(it,ln),vr[1].focus()))},Ue=(it="",ln=!1)=>{N.value=ln;let Xn;mn(it)?Xn=it.map(vr=>vr.toDate()):Xn=it&&it.toDate(),bt.value=null,ce(Xn)},Ne=()=>{q.value=!0},Pe=()=>{s("visible-change",!0)},ve=()=>{q.value=!1,N.value=!1,s("visible-change",!1)},$e=()=>{N.value=!0},Te=()=>{N.value=!1},Ae=se(()=>l.disabled||M?.disabled),Ve=se(()=>{let it;if(xn.value?wr.value.getDefaultValue&&(it=wr.value.getDefaultValue()):mn(l.modelValue)?it=l.modelValue.map(ln=>OM(ln,l.valueFormat,m.value)):it=OM(l.modelValue,l.valueFormat,m.value),wr.value.getRangeAvailableTime){const ln=wr.value.getRangeAvailableTime(it);la(ln,it)||(it=ln,xn.value||ce(w2(it)))}return mn(it)&&it.some(ln=>!ln)&&(it=[]),it}),We=se(()=>{if(!wr.value.panelReady)return"";const it=Vn(Ve.value);return mn(bt.value)?[bt.value[0]||it&&it[0]||"",bt.value[1]||it&&it[1]||""]:bt.value!==null?bt.value:!at.value&&xn.value||!N.value&&xn.value?"":it?ct.value||Mt.value||Ct.value?it.join(", "):it:""}),ft=se(()=>l.type.includes("time")),at=se(()=>l.type.startsWith("time")),ct=se(()=>l.type==="dates"),Mt=se(()=>l.type==="months"),Ct=se(()=>l.type==="years"),gt=se(()=>l.prefixIcon||(ft.value?US:aO)),Ke=Re(!1),Lt=it=>{l.readonly||Ae.value||(Ke.value&&(it.stopPropagation(),wr.value.handleClear?wr.value.handleClear():ce(D.value),fe(D.value,!0),Ke.value=!1,ve()),s("clear"))},xn=se(()=>{const{modelValue:it}=l;return!it||mn(it)&&!it.filter(Boolean).length}),Ht=async it=>{var ln;l.readonly||Ae.value||(((ln=it.target)==null?void 0:ln.tagName)!=="INPUT"||W.value)&&(N.value=!0)},le=()=>{l.readonly||Ae.value||!xn.value&&l.clearable&&(Ke.value=!0)},nt=()=>{Ke.value=!1},Gt=it=>{var ln;l.readonly||Ae.value||(((ln=it.touches[0].target)==null?void 0:ln.tagName)!=="INPUT"||W.value)&&(N.value=!0)},an=se(()=>l.type.includes("range")),Qt=Lo(),Zt=se(()=>{var it,ln;return(ln=(it=w(z))==null?void 0:it.popperRef)==null?void 0:ln.contentRef}),rn=FS(F,it=>{const ln=w(Zt),Xn=bl(F);ln&&(it.target===ln||it.composedPath().includes(ln))||it.target===Xn||Xn&&it.composedPath().includes(Xn)||(N.value=!1)});Ls(()=>{rn?.()});const bt=Re(null),fn=()=>{if(bt.value){const it=pn(We.value);it&&Nn(it)&&(ce(w2(it)),bt.value=null)}bt.value===""&&(ce(D.value),fe(D.value,!0),bt.value=null)},pn=it=>it?wr.value.parseUserInput(it):null,Vn=it=>it?wr.value.formatToString(it):null,Nn=it=>wr.value.isValidValue(it),Ot=async it=>{if(l.readonly||Ae.value)return;const{code:ln}=it;if(me(it),ln===Un.esc){N.value===!0&&(N.value=!1,it.preventDefault(),it.stopPropagation());return}if(ln===Un.down&&(wr.value.handleFocusPicker&&(it.preventDefault(),it.stopPropagation()),N.value===!1&&(N.value=!0,await dr()),wr.value.handleFocusPicker)){wr.value.handleFocusPicker();return}if(ln===Un.tab){ie=!0;return}if(ln===Un.enter||ln===Un.numpadEnter){(bt.value===null||bt.value===""||Nn(pn(We.value)))&&(fn(),N.value=!1),it.stopPropagation();return}if(bt.value){it.stopPropagation();return}wr.value.handleKeydownInput&&wr.value.handleKeydownInput(it)},Bn=it=>{bt.value=it,N.value||(N.value=!0)},Sr=it=>{const ln=it.target;bt.value?bt.value=[ln.value,bt.value[1]]:bt.value=[ln.value,null]},Ur=it=>{const ln=it.target;bt.value?bt.value=[bt.value[0],ln.value]:bt.value=[null,ln.value]},Kn=()=>{var it;const ln=bt.value,Xn=pn(ln&&ln[0]),vr=w(Ve);if(Xn&&Xn.isValid()){bt.value=[Vn(Xn),((it=We.value)==null?void 0:it[1])||null];const Ii=[Xn,vr&&(vr[1]||null)];Nn(Ii)&&(ce(w2(Ii)),bt.value=null)}},ui=()=>{var it;const ln=w(bt),Xn=pn(ln&&ln[1]),vr=w(Ve);if(Xn&&Xn.isValid()){bt.value=[((it=w(We))==null?void 0:it[0])||null,Vn(Xn)];const Ii=[vr&&vr[0],Xn];Nn(Ii)&&(ce(w2(Ii)),bt.value=null)}},wr=Re({}),Tr=it=>{wr.value[it[0]]=it[1],wr.value.panelReady=!0},pr=it=>{s("calendar-change",it)},Fr=(it,ln,Xn)=>{s("panel-change",it,ln,Xn)},vt=()=>{var it;(it=F.value)==null||it.focus()},yt=()=>{var it;(it=F.value)==null||it.blur()};return Ti("EP_PICKER_BASE",{props:l}),n({focus:vt,blur:yt,handleOpen:$e,handleClose:Te,onPick:Ue}),(it,ln)=>(Z(),Bt(w(Na),pi({ref_key:"refPopper",ref:z,visible:N.value,effect:"light",pure:"",trigger:"click"},it.$attrs,{role:"dialog",teleported:"",transition:`${w(b).namespace.value}-zoom-in-top`,"popper-class":[`${w(b).namespace.value}-picker__popper`,it.popperClass],"popper-options":w(P),"fallback-placements":it.fallbackPlacements,"gpu-acceleration":!1,placement:it.placement,"stop-popper-mouse-event":!1,"hide-after":0,persistent:"",onBeforeShow:Ne,onShow:Pe,onHide:ve}),{default:mt(()=>[w(an)?(Z(),Bt(yfe,{key:1,id:it.id,ref_key:"inputRef",ref:F,"model-value":w(We),name:it.name,disabled:w(Ae),readonly:!it.editable||it.readonly,"start-placeholder":it.startPlaceholder,"end-placeholder":it.endPlaceholder,class:ge(w(re)),style:fr(it.$attrs.style),"aria-label":it.ariaLabel,tabindex:it.tabindex,autocomplete:"off",role:"combobox",onClick:Ht,onFocus:w(Y),onBlur:w(J),onStartInput:Sr,onStartChange:Kn,onEndInput:Ur,onEndChange:ui,onMousedown:Ht,onMouseenter:le,onMouseleave:nt,onTouchstartPassive:Gt,onKeydown:Ot},{prefix:mt(()=>[w(gt)?(Z(),Bt(w(rr),{key:0,class:ge([w(r).e("icon"),w(E).e("icon")])},{default:mt(()=>[(Z(),Bt(si(w(gt))))]),_:1},8,["class"])):At("v-if",!0)]),"range-separator":mt(()=>[It(it.$slots,"range-separator",{},()=>[ae("span",{class:ge(w(E).b("separator"))},gn(it.rangeSeparator),3)])]),suffix:mt(()=>[it.clearIcon?(Z(),Bt(w(rr),{key:0,class:ge(w(he)),onMousedown:Er(w(ys),["prevent"]),onClick:Lt},{default:mt(()=>[(Z(),Bt(si(it.clearIcon)))]),_:1},8,["class","onMousedown"])):At("v-if",!0)]),_:3},8,["id","model-value","name","disabled","readonly","start-placeholder","end-placeholder","class","style","aria-label","tabindex","onFocus","onBlur"])):(Z(),Bt(w(nl),{key:0,id:it.id,ref_key:"inputRef",ref:F,"container-role":"combobox","model-value":w(We),name:it.name,size:w(Qt),disabled:w(Ae),placeholder:it.placeholder,class:ge([w(b).b("editor"),w(b).bm("editor",it.type),it.$attrs.class]),style:fr(it.$attrs.style),readonly:!it.editable||it.readonly||w(ct)||w(Mt)||w(Ct)||it.type==="week","aria-label":it.ariaLabel,tabindex:it.tabindex,"validate-event":!1,onInput:Bn,onFocus:w(Y),onBlur:w(J),onKeydown:Ot,onChange:fn,onMousedown:Ht,onMouseenter:le,onMouseleave:nt,onTouchstartPassive:Gt,onClick:Er(()=>{},["stop"])},{prefix:mt(()=>[w(gt)?(Z(),Bt(w(rr),{key:0,class:ge(w(r).e("icon")),onMousedown:Er(Ht,["prevent"]),onTouchstartPassive:Gt},{default:mt(()=>[(Z(),Bt(si(w(gt))))]),_:1},8,["class","onMousedown"])):At("v-if",!0)]),suffix:mt(()=>[Ke.value&&it.clearIcon?(Z(),Bt(w(rr),{key:0,class:ge(`${w(r).e("icon")} clear-icon`),onMousedown:Er(w(ys),["prevent"]),onClick:Lt},{default:mt(()=>[(Z(),Bt(si(it.clearIcon)))]),_:1},8,["class","onMousedown"])):At("v-if",!0)]),_:1},8,["id","model-value","name","size","disabled","placeholder","class","style","readonly","aria-label","tabindex","onFocus","onBlur","onClick"]))]),content:mt(()=>[It(it.$slots,"default",{visible:N.value,actualVisible:q.value,parsedValue:w(Ve),format:it.format,dateFormat:it.dateFormat,timeFormat:it.timeFormat,unlinkPanels:it.unlinkPanels,type:it.type,defaultValue:it.defaultValue,showNow:it.showNow,onPick:Ue,onSelectRange:ye,onSetPickerOption:Tr,onCalendarChange:pr,onPanelChange:Fr,onMousedown:Er(()=>{},["stop"])})]),_:3},16,["visible","transition","popper-class","popper-options","fallback-placements","placement"]))}});var $D=En(xfe,[["__file","picker.vue"]]);const wfe=bn({...VD,datetimeRole:String,parsedValue:{type:wt(Object)}}),HD=({getAvailableHours:e,getAvailableMinutes:n,getAvailableSeconds:s})=>{const l=(b,r,E,M)=>{const A={hour:e,minute:n,second:s};let P=b;return["hour","minute","second"].forEach(D=>{if(A[D]){let z;const F=A[D];switch(D){case"minute":{z=F(P.hour(),r,M);break}case"second":{z=F(P.hour(),P.minute(),r,M);break}default:{z=F(r,M);break}}if(z?.length&&!z.includes(P[D]())){const N=E?0:z.length-1;P=P[D](z[N])}}}),P},d={};return{timePickerOptions:d,getAvailableTime:l,onSetOption:([b,r])=>{d[b]=r}}},c4=e=>{const n=(l,d)=>l||d,s=l=>l!==!0;return e.map(n).filter(s)},UD=(e,n,s)=>({getHoursList:(b,r)=>o4(24,e&&(()=>e?.(b,r))),getMinutesList:(b,r,E)=>o4(60,n&&(()=>n?.(b,r,E))),getSecondsList:(b,r,E,M)=>o4(60,s&&(()=>s?.(b,r,E,M)))}),jD=(e,n,s)=>{const{getHoursList:l,getMinutesList:d,getSecondsList:m}=UD(e,n,s);return{getAvailableHours:(M,A)=>c4(l(M,A)),getAvailableMinutes:(M,A,P)=>c4(d(M,A,P)),getAvailableSeconds:(M,A,P,D)=>c4(m(M,A,P,D))}},GD=e=>{const n=Re(e.parsedValue);return on(()=>e.visible,s=>{s||(n.value=e.parsedValue)}),n},Sfe=bn({role:{type:String,required:!0},spinnerDate:{type:wt(Object),required:!0},showSeconds:{type:Boolean,default:!0},arrowControl:Boolean,amPmMode:{type:wt(String),default:""},...BD}),Cfe=100,Efe=600,Ob={beforeMount(e,n){const s=n.value,{interval:l=Cfe,delay:d=Efe}=hr(s)?{}:s;let m,b;const r=()=>hr(s)?s():s.handler(),E=()=>{b&&(clearTimeout(b),b=void 0),m&&(clearInterval(m),m=void 0)};e.addEventListener("mousedown",M=>{M.button===0&&(E(),r(),document.addEventListener("mouseup",()=>E(),{once:!0}),b=setTimeout(()=>{m=setInterval(()=>{r()},l)},d))})}},Tfe=xe({__name:"basic-time-spinner",props:Sfe,emits:[mi,"select-range","set-option"],setup(e,{emit:n}){const s=e,l=Gn("EP_PICKER_BASE"),{isRange:d,format:m}=l.props,b=dn("time"),{getHoursList:r,getMinutesList:E,getSecondsList:M}=UD(s.disabledHours,s.disabledMinutes,s.disabledSeconds);let A=!1;const P=Re(),D=Re(),z=Re(),F=Re(),N={hours:D,minutes:z,seconds:F},q=se(()=>s.showSeconds?nA:nA.slice(0,2)),G=se(()=>{const{spinnerDate:ft}=s,at=ft.hour(),ct=ft.minute(),Mt=ft.second();return{hours:at,minutes:ct,seconds:Mt}}),ie=se(()=>{const{hours:ft,minutes:at}=w(G),{role:ct,spinnerDate:Mt}=s,Ct=d?void 0:Mt;return{hours:r(ct,Ct),minutes:E(ft,ct,Ct),seconds:M(ft,at,ct,Ct)}}),W=se(()=>{const{hours:ft,minutes:at,seconds:ct}=w(G);return{hours:s4(ft,23),minutes:s4(at,59),seconds:s4(ct,59)}}),Y=Vl(ft=>{A=!1,he(ft)},200),J=ft=>{if(!!!s.amPmMode)return"";const ct=s.amPmMode==="A";let Mt=ft<12?" am":" pm";return ct&&(Mt=Mt.toUpperCase()),Mt},re=ft=>{let at=[0,0];if(!m||m===Lb)switch(ft){case"hours":at=[0,2];break;case"minutes":at=[3,5];break;case"seconds":at=[6,8];break}const[ct,Mt]=at;n("select-range",ct,Mt),P.value=ft},he=ft=>{me(ft,w(G)[ft])},fe=()=>{he("hours"),he("minutes"),he("seconds")},ce=ft=>ft.querySelector(`.${b.namespace.value}-scrollbar__wrap`),me=(ft,at)=>{if(s.arrowControl)return;const ct=w(N[ft]);ct&&ct.$el&&(ce(ct.$el).scrollTop=Math.max(0,at*we(ft)))},we=ft=>{const at=w(N[ft]),ct=at?.$el.querySelector("li");return ct&&Number.parseFloat(sh(ct,"height"))||0},ye=()=>{Ne(1)},Ue=()=>{Ne(-1)},Ne=ft=>{P.value||re("hours");const at=P.value,ct=w(G)[at],Mt=P.value==="hours"?24:60,Ct=Pe(at,ct,ft,Mt);ve(at,Ct),me(at,Ct),dr(()=>re(at))},Pe=(ft,at,ct,Mt)=>{let Ct=(at+ct+Mt)%Mt;const gt=w(ie)[ft];for(;gt[Ct]&&Ct!==at;)Ct=(Ct+ct+Mt)%Mt;return Ct},ve=(ft,at)=>{if(w(ie)[ft][at])return;const{hours:Ct,minutes:gt,seconds:Ke}=w(G);let Lt;switch(ft){case"hours":Lt=s.spinnerDate.hour(at).minute(gt).second(Ke);break;case"minutes":Lt=s.spinnerDate.hour(Ct).minute(at).second(Ke);break;case"seconds":Lt=s.spinnerDate.hour(Ct).minute(gt).second(at);break}n(mi,Lt)},$e=(ft,{value:at,disabled:ct})=>{ct||(ve(ft,at),re(ft),me(ft,at))},Te=ft=>{const at=w(N[ft]);if(!at)return;A=!0,Y(ft);const ct=Math.min(Math.round((ce(at.$el).scrollTop-(Ae(ft)*.5-10)/we(ft)+3)/we(ft)),ft==="hours"?23:59);ve(ft,ct)},Ae=ft=>w(N[ft]).$el.offsetHeight,Ve=()=>{const ft=at=>{const ct=w(N[at]);ct&&ct.$el&&(ce(ct.$el).onscroll=()=>{Te(at)})};ft("hours"),ft("minutes"),ft("seconds")};Zr(()=>{dr(()=>{!s.arrowControl&&Ve(),fe(),s.role==="start"&&re("hours")})});const We=(ft,at)=>{N[at].value=ft??void 0};return n("set-option",[`${s.role}_scrollDown`,Ne]),n("set-option",[`${s.role}_emitSelectRange`,re]),on(()=>s.spinnerDate,()=>{A||fe()}),(ft,at)=>(Z(),ue("div",{class:ge([w(b).b("spinner"),{"has-seconds":ft.showSeconds}])},[ft.arrowControl?At("v-if",!0):(Z(!0),ue(cr,{key:0},Ei(w(q),ct=>(Z(),Bt(w(Id),{key:ct,ref_for:!0,ref:Mt=>We(Mt,ct),class:ge(w(b).be("spinner","wrapper")),"wrap-style":"max-height: inherit;","view-class":w(b).be("spinner","list"),noresize:"",tag:"ul",onMouseenter:Mt=>re(ct),onMousemove:Mt=>he(ct)},{default:mt(()=>[(Z(!0),ue(cr,null,Ei(w(ie)[ct],(Mt,Ct)=>(Z(),ue("li",{key:Ct,class:ge([w(b).be("spinner","item"),w(b).is("active",Ct===w(G)[ct]),w(b).is("disabled",Mt)]),onClick:gt=>$e(ct,{value:Ct,disabled:Mt})},[ct==="hours"?(Z(),ue(cr,{key:0},[ei(gn(("0"+(ft.amPmMode?Ct%12||12:Ct)).slice(-2))+gn(J(Ct)),1)],64)):(Z(),ue(cr,{key:1},[ei(gn(("0"+Ct).slice(-2)),1)],64))],10,["onClick"]))),128))]),_:2},1032,["class","view-class","onMouseenter","onMousemove"]))),128)),ft.arrowControl?(Z(!0),ue(cr,{key:1},Ei(w(q),ct=>(Z(),ue("div",{key:ct,class:ge([w(b).be("spinner","wrapper"),w(b).is("arrow")]),onMouseenter:Mt=>re(ct)},[Wr((Z(),Bt(w(rr),{class:ge(["arrow-up",w(b).be("spinner","arrow")])},{default:mt(()=>[st(w(xx))]),_:1},8,["class"])),[[w(Ob),Ue]]),Wr((Z(),Bt(w(rr),{class:ge(["arrow-down",w(b).be("spinner","arrow")])},{default:mt(()=>[st(w(Ed))]),_:1},8,["class"])),[[w(Ob),ye]]),ae("ul",{class:ge(w(b).be("spinner","list"))},[(Z(!0),ue(cr,null,Ei(w(W)[ct],(Mt,Ct)=>(Z(),ue("li",{key:Ct,class:ge([w(b).be("spinner","item"),w(b).is("active",Mt===w(G)[ct]),w(b).is("disabled",w(ie)[ct][Mt])])},[w(gr)(Mt)?(Z(),ue(cr,{key:0},[ct==="hours"?(Z(),ue(cr,{key:0},[ei(gn(("0"+(ft.amPmMode?Mt%12||12:Mt)).slice(-2))+gn(J(Mt)),1)],64)):(Z(),ue(cr,{key:1},[ei(gn(("0"+Mt).slice(-2)),1)],64))],64)):At("v-if",!0)],2))),128))],2)],42,["onMouseenter"]))),128)):At("v-if",!0)],2))}});var l6=En(Tfe,[["__file","basic-time-spinner.vue"]]);const Ife=xe({__name:"panel-time-pick",props:wfe,emits:["pick","select-range","set-picker-option"],setup(e,{emit:n}){const s=e,l=Gn("EP_PICKER_BASE"),{arrowControl:d,disabledHours:m,disabledMinutes:b,disabledSeconds:r,defaultValue:E}=l.props,{getAvailableHours:M,getAvailableMinutes:A,getAvailableSeconds:P}=jD(m,b,r),D=dn("time"),{t:z,lang:F}=Oi(),N=Re([0,2]),q=GD(s),G=se(()=>Li(s.actualVisible)?`${D.namespace.value}-zoom-in-top`:""),ie=se(()=>s.format.includes("ss")),W=se(()=>s.format.includes("A")?"A":s.format.includes("a")?"a":""),Y=Te=>{const Ae=jr(Te).locale(F.value),Ve=Ne(Ae);return Ae.isSame(Ve)},J=()=>{n("pick",q.value,!1)},re=(Te=!1,Ae=!1)=>{Ae||n("pick",s.parsedValue,Te)},he=Te=>{if(!s.visible)return;const Ae=Ne(Te).millisecond(0);n("pick",Ae,!0)},fe=(Te,Ae)=>{n("select-range",Te,Ae),N.value=[Te,Ae]},ce=Te=>{const Ae=[0,3].concat(ie.value?[6]:[]),Ve=["hours","minutes"].concat(ie.value?["seconds"]:[]),ft=(Ae.indexOf(N.value[0])+Te+Ae.length)%Ae.length;we.start_emitSelectRange(Ve[ft])},me=Te=>{const Ae=Te.code,{left:Ve,right:We,up:ft,down:at}=Un;if([Ve,We].includes(Ae)){ce(Ae===Ve?-1:1),Te.preventDefault();return}if([ft,at].includes(Ae)){const ct=Ae===ft?-1:1;we.start_scrollDown(ct),Te.preventDefault();return}},{timePickerOptions:we,onSetOption:ye,getAvailableTime:Ue}=HD({getAvailableHours:M,getAvailableMinutes:A,getAvailableSeconds:P}),Ne=Te=>Ue(Te,s.datetimeRole||"",!0),Pe=Te=>Te?jr(Te,s.format).locale(F.value):null,ve=Te=>Te?Te.format(s.format):null,$e=()=>jr(E).locale(F.value);return n("set-picker-option",["isValidValue",Y]),n("set-picker-option",["formatToString",ve]),n("set-picker-option",["parseUserInput",Pe]),n("set-picker-option",["handleKeydownInput",me]),n("set-picker-option",["getRangeAvailableTime",Ne]),n("set-picker-option",["getDefaultValue",$e]),(Te,Ae)=>(Z(),Bt(ha,{name:w(G)},{default:mt(()=>[Te.actualVisible||Te.visible?(Z(),ue("div",{key:0,class:ge(w(D).b("panel"))},[ae("div",{class:ge([w(D).be("panel","content"),{"has-seconds":w(ie)}])},[st(l6,{ref:"spinner",role:Te.datetimeRole||"start","arrow-control":w(d),"show-seconds":w(ie),"am-pm-mode":w(W),"spinner-date":Te.parsedValue,"disabled-hours":w(m),"disabled-minutes":w(b),"disabled-seconds":w(r),onChange:he,onSetOption:w(ye),onSelectRange:fe},null,8,["role","arrow-control","show-seconds","am-pm-mode","spinner-date","disabled-hours","disabled-minutes","disabled-seconds","onSetOption"])],2),ae("div",{class:ge(w(D).be("panel","footer"))},[ae("button",{type:"button",class:ge([w(D).be("panel","btn"),"cancel"]),onClick:J},gn(w(z)("el.datepicker.cancel")),3),ae("button",{type:"button",class:ge([w(D).be("panel","btn"),"confirm"]),onClick:Ve=>re()},gn(w(z)("el.datepicker.confirm")),11,["onClick"])],2)],2)):At("v-if",!0)]),_:1},8,["name"]))}});var Db=En(Ife,[["__file","panel-time-pick.vue"]]);const kfe=bn({...VD,parsedValue:{type:wt(Array)}}),Mfe=xe({__name:"panel-time-range",props:kfe,emits:["pick","select-range","set-picker-option"],setup(e,{emit:n}){const s=e,l=(Ht,le)=>{const nt=[];for(let Gt=Ht;Gt<=le;Gt++)nt.push(Gt);return nt},{t:d,lang:m}=Oi(),b=dn("time"),r=dn("picker"),E=Gn("EP_PICKER_BASE"),{arrowControl:M,disabledHours:A,disabledMinutes:P,disabledSeconds:D,defaultValue:z}=E.props,F=se(()=>[b.be("range-picker","body"),b.be("panel","content"),b.is("arrow",M),Y.value?"has-seconds":""]),N=se(()=>[b.be("range-picker","body"),b.be("panel","content"),b.is("arrow",M),Y.value?"has-seconds":""]),q=se(()=>s.parsedValue[0]),G=se(()=>s.parsedValue[1]),ie=GD(s),W=()=>{n("pick",ie.value,!1)},Y=se(()=>s.format.includes("ss")),J=se(()=>s.format.includes("A")?"A":s.format.includes("a")?"a":""),re=(Ht=!1)=>{n("pick",[q.value,G.value],Ht)},he=Ht=>{me(Ht.millisecond(0),G.value)},fe=Ht=>{me(q.value,Ht.millisecond(0))},ce=Ht=>{const le=Ht.map(Gt=>jr(Gt).locale(m.value)),nt=We(le);return le[0].isSame(nt[0])&&le[1].isSame(nt[1])},me=(Ht,le)=>{s.visible&&n("pick",[Ht,le],!0)},we=se(()=>q.value>G.value),ye=Re([0,2]),Ue=(Ht,le)=>{n("select-range",Ht,le,"min"),ye.value=[Ht,le]},Ne=se(()=>Y.value?11:8),Pe=(Ht,le)=>{n("select-range",Ht,le,"max");const nt=w(Ne);ye.value=[Ht+nt,le+nt]},ve=Ht=>{const le=Y.value?[0,3,6,11,14,17]:[0,3,8,11],nt=["hours","minutes"].concat(Y.value?["seconds"]:[]),an=(le.indexOf(ye.value[0])+Ht+le.length)%le.length,Qt=le.length/2;an<Qt?Mt.start_emitSelectRange(nt[an]):Mt.end_emitSelectRange(nt[an-Qt])},$e=Ht=>{const le=Ht.code,{left:nt,right:Gt,up:an,down:Qt}=Un;if([nt,Gt].includes(le)){ve(le===nt?-1:1),Ht.preventDefault();return}if([an,Qt].includes(le)){const Zt=le===an?-1:1,rn=ye.value[0]<Ne.value?"start":"end";Mt[`${rn}_scrollDown`](Zt),Ht.preventDefault();return}},Te=(Ht,le)=>{const nt=A?A(Ht):[],Gt=Ht==="start",Qt=(le||(Gt?G.value:q.value)).hour(),Zt=Gt?l(Qt+1,23):l(0,Qt-1);return Q3(nt,Zt)},Ae=(Ht,le,nt)=>{const Gt=P?P(Ht,le):[],an=le==="start",Qt=nt||(an?G.value:q.value),Zt=Qt.hour();if(Ht!==Zt)return Gt;const rn=Qt.minute(),bt=an?l(rn+1,59):l(0,rn-1);return Q3(Gt,bt)},Ve=(Ht,le,nt,Gt)=>{const an=D?D(Ht,le,nt):[],Qt=nt==="start",Zt=Gt||(Qt?G.value:q.value),rn=Zt.hour(),bt=Zt.minute();if(Ht!==rn||le!==bt)return an;const fn=Zt.second(),pn=Qt?l(fn+1,59):l(0,fn-1);return Q3(an,pn)},We=([Ht,le])=>[Ct(Ht,"start",!0,le),Ct(le,"end",!1,Ht)],{getAvailableHours:ft,getAvailableMinutes:at,getAvailableSeconds:ct}=jD(Te,Ae,Ve),{timePickerOptions:Mt,getAvailableTime:Ct,onSetOption:gt}=HD({getAvailableHours:ft,getAvailableMinutes:at,getAvailableSeconds:ct}),Ke=Ht=>Ht?mn(Ht)?Ht.map(le=>jr(le,s.format).locale(m.value)):jr(Ht,s.format).locale(m.value):null,Lt=Ht=>Ht?mn(Ht)?Ht.map(le=>le.format(s.format)):Ht.format(s.format):null,xn=()=>{if(mn(z))return z.map(le=>jr(le).locale(m.value));const Ht=jr(z).locale(m.value);return[Ht,Ht.add(60,"m")]};return n("set-picker-option",["formatToString",Lt]),n("set-picker-option",["parseUserInput",Ke]),n("set-picker-option",["isValidValue",ce]),n("set-picker-option",["handleKeydownInput",$e]),n("set-picker-option",["getDefaultValue",xn]),n("set-picker-option",["getRangeAvailableTime",We]),(Ht,le)=>Ht.actualVisible?(Z(),ue("div",{key:0,class:ge([w(b).b("range-picker"),w(r).b("panel")])},[ae("div",{class:ge(w(b).be("range-picker","content"))},[ae("div",{class:ge(w(b).be("range-picker","cell"))},[ae("div",{class:ge(w(b).be("range-picker","header"))},gn(w(d)("el.datepicker.startTime")),3),ae("div",{class:ge(w(F))},[st(l6,{ref:"minSpinner",role:"start","show-seconds":w(Y),"am-pm-mode":w(J),"arrow-control":w(M),"spinner-date":w(q),"disabled-hours":Te,"disabled-minutes":Ae,"disabled-seconds":Ve,onChange:he,onSetOption:w(gt),onSelectRange:Ue},null,8,["show-seconds","am-pm-mode","arrow-control","spinner-date","onSetOption"])],2)],2),ae("div",{class:ge(w(b).be("range-picker","cell"))},[ae("div",{class:ge(w(b).be("range-picker","header"))},gn(w(d)("el.datepicker.endTime")),3),ae("div",{class:ge(w(N))},[st(l6,{ref:"maxSpinner",role:"end","show-seconds":w(Y),"am-pm-mode":w(J),"arrow-control":w(M),"spinner-date":w(G),"disabled-hours":Te,"disabled-minutes":Ae,"disabled-seconds":Ve,onChange:fe,onSetOption:w(gt),onSelectRange:Pe},null,8,["show-seconds","am-pm-mode","arrow-control","spinner-date","onSetOption"])],2)],2)],2),ae("div",{class:ge(w(b).be("panel","footer"))},[ae("button",{type:"button",class:ge([w(b).be("panel","btn"),"cancel"]),onClick:nt=>W()},gn(w(d)("el.datepicker.cancel")),11,["onClick"]),ae("button",{type:"button",class:ge([w(b).be("panel","btn"),"confirm"]),disabled:w(we),onClick:nt=>re()},gn(w(d)("el.datepicker.confirm")),11,["disabled","onClick"])],2)],2)):At("v-if",!0)}});var Afe=En(Mfe,[["__file","panel-time-range.vue"]]);jr.extend(p8);var Rfe=xe({name:"ElTimePicker",install:null,props:{...m8,isRange:{type:Boolean,default:!1}},emits:[Nr],setup(e,n){const s=Re(),[l,d]=e.isRange?["timerange",Afe]:["time",Db],m=b=>n.emit(Nr,b);return Ti("ElPopperOptions",e.popperOptions),n.expose({focus:()=>{var b;(b=s.value)==null||b.focus()},blur:()=>{var b;(b=s.value)==null||b.blur()},handleOpen:()=>{var b;(b=s.value)==null||b.handleOpen()},handleClose:()=>{var b;(b=s.value)==null||b.handleClose()}}),()=>{var b;const r=(b=e.format)!=null?b:Lb;return st($D,pi(e,{ref:s,type:l,format:r,"onUpdate:modelValue":m}),{default:E=>st(d,E,null)})}}});const Pfe=Gr(Rfe),Px=Symbol(),Lfe=bn({...m8,type:{type:wt(String),default:"date"}}),Ofe=["date","dates","year","years","month","months","week","range"],g8=bn({disabledDate:{type:wt(Function)},date:{type:wt(Object),required:!0},minDate:{type:wt(Object)},maxDate:{type:wt(Object)},parsedValue:{type:wt([Object,Array])},rangeState:{type:wt(Object),default:()=>({endDate:null,selecting:!1})}}),qD=bn({type:{type:wt(String),required:!0,values:Bue},dateFormat:String,timeFormat:String,showNow:{type:Boolean,default:!0}}),_8=bn({unlinkPanels:Boolean,parsedValue:{type:wt(Array)}}),v8=e=>({type:String,values:Ofe,default:e}),Dfe=bn({...qD,parsedValue:{type:wt([Object,Array])},visible:{type:Boolean},format:{type:String,default:""}}),Kg=e=>{if(!mn(e))return!1;const[n,s]=e;return jr.isDayjs(n)&&jr.isDayjs(s)&&jr(n).isValid()&&jr(s).isValid()&&n.isSameOrBefore(s)},y8=(e,{lang:n,unit:s,unlinkPanels:l})=>{let d;if(mn(e)){let[m,b]=e.map(r=>jr(r).locale(n));return l||(b=m.add(1,s)),[m,b]}else e?d=jr(e):d=jr();return d=d.locale(n),[d,d.add(1,s)]},zfe=(e,n,{columnIndexOffset:s,startDate:l,nextEndDate:d,now:m,unit:b,relativeDateGetter:r,setCellMetadata:E,setRowMetadata:M})=>{for(let A=0;A<e.row;A++){const P=n[A];for(let D=0;D<e.column;D++){let z=P[D+s];z||(z={row:A,column:D,type:"normal",inRange:!1,start:!1,end:!1});const F=A*e.column+D,N=r(F);z.dayjs=N,z.date=N.toDate(),z.timestamp=N.valueOf(),z.type="normal",z.inRange=!!(l&&N.isSameOrAfter(l,b)&&d&&N.isSameOrBefore(d,b))||!!(l&&N.isSameOrBefore(l,b)&&d&&N.isSameOrAfter(d,b)),l?.isSameOrAfter(d)?(z.start=!!d&&N.isSame(d,b),z.end=l&&N.isSame(l,b)):(z.start=!!l&&N.isSame(l,b),z.end=!!d&&N.isSame(d,b)),N.isSame(m,b)&&(z.type="today"),E?.(z,{rowIndex:A,columnIndex:D}),P[D+s]=z}M?.(P)}},zb=(e,n,s)=>{const l=jr().locale(s).startOf("month").month(n).year(e),d=l.daysInMonth();return xf(d).map(m=>l.add(m,"day").toDate())},Nv=(e,n,s,l)=>{const d=jr().year(e).month(n).startOf("month"),m=zb(e,n,s).find(b=>!l?.(b));return m?jr(m).locale(s):d.locale(s)},u6=(e,n,s)=>{const l=e.year();if(!s?.(e.toDate()))return e.locale(n);const d=e.month();if(!zb(l,d,n).every(s))return Nv(l,d,n,s);for(let m=0;m<12;m++)if(!zb(l,m,n).every(s))return Nv(l,m,n,s);return e},Yg=(e,n,s,l)=>{if(mn(e))return e.map(d=>Yg(d,n,s,l));if(ir(e)){const d=l.value?jr(e):jr(e,n);if(!d.isValid())return d}return jr(e,n).locale(s)},Nfe=bn({...g8,cellClassName:{type:wt(Function)},showWeekNumber:Boolean,selectionMode:v8("date")}),Ffe=["changerange","pick","select"],c6=(e="")=>["normal","today"].includes(e),Bfe=(e,n)=>{const{lang:s}=Oi(),l=Re(),d=Re(),m=Re(),b=Re(),r=Re([[],[],[],[],[],[]]);let E=!1;const M=e.date.$locale().weekStart||7,A=e.date.locale("en").localeData().weekdaysShort().map(Ae=>Ae.toLowerCase()),P=se(()=>M>3?7-M:-M),D=se(()=>{const Ae=e.date.startOf("month");return Ae.subtract(Ae.day()||7,"day")}),z=se(()=>A.concat(A).slice(M,M+7)),F=se(()=>pL(w(Y)).some(Ae=>Ae.isCurrent)),N=se(()=>{const Ae=e.date.startOf("month"),Ve=Ae.day()||7,We=Ae.daysInMonth(),ft=Ae.subtract(1,"month").daysInMonth();return{startOfMonthDay:Ve,dateCountOfMonth:We,dateCountOfLastMonth:ft}}),q=se(()=>e.selectionMode==="dates"?yl(e.parsedValue):[]),G=(Ae,{count:Ve,rowIndex:We,columnIndex:ft})=>{const{startOfMonthDay:at,dateCountOfMonth:ct,dateCountOfLastMonth:Mt}=w(N),Ct=w(P);if(We>=0&&We<=1){const gt=at+Ct<0?7+at+Ct:at+Ct;if(ft+We*7>=gt)return Ae.text=Ve,!0;Ae.text=Mt-(gt-ft%7)+1+We*7,Ae.type="prev-month"}else return Ve<=ct?Ae.text=Ve:(Ae.text=Ve-ct,Ae.type="next-month"),!0;return!1},ie=(Ae,{columnIndex:Ve,rowIndex:We},ft)=>{const{disabledDate:at,cellClassName:ct}=e,Mt=w(q),Ct=G(Ae,{count:ft,rowIndex:We,columnIndex:Ve}),gt=Ae.dayjs.toDate();return Ae.selected=Mt.find(Ke=>Ke.isSame(Ae.dayjs,"day")),Ae.isSelected=!!Ae.selected,Ae.isCurrent=re(Ae),Ae.disabled=at?.(gt),Ae.customClass=ct?.(gt),Ct},W=Ae=>{if(e.selectionMode==="week"){const[Ve,We]=e.showWeekNumber?[1,7]:[0,6],ft=Te(Ae[Ve+1]);Ae[Ve].inRange=ft,Ae[Ve].start=ft,Ae[We].inRange=ft,Ae[We].end=ft}},Y=se(()=>{const{minDate:Ae,maxDate:Ve,rangeState:We,showWeekNumber:ft}=e,at=w(P),ct=w(r),Mt="day";let Ct=1;if(ft)for(let gt=0;gt<6;gt++)ct[gt][0]||(ct[gt][0]={type:"week",text:w(D).add(gt*7+1,Mt).week()});return zfe({row:6,column:7},ct,{startDate:Ae,columnIndexOffset:ft?1:0,nextEndDate:We.endDate||Ve||We.selecting&&Ae||null,now:jr().locale(w(s)).startOf(Mt),unit:Mt,relativeDateGetter:gt=>w(D).add(gt-at,Mt),setCellMetadata:(...gt)=>{ie(...gt,Ct)&&(Ct+=1)},setRowMetadata:W}),ct});on(()=>e.date,async()=>{var Ae;(Ae=w(l))!=null&&Ae.contains(document.activeElement)&&(await dr(),await J())});const J=async()=>{var Ae;return(Ae=w(d))==null?void 0:Ae.focus()},re=Ae=>e.selectionMode==="date"&&c6(Ae.type)&&he(Ae,e.parsedValue),he=(Ae,Ve)=>Ve?jr(Ve).locale(w(s)).isSame(e.date.date(Number(Ae.text)),"day"):!1,fe=(Ae,Ve)=>{const We=Ae*7+(Ve-(e.showWeekNumber?1:0))-w(P);return w(D).add(We,"day")},ce=Ae=>{var Ve;if(!e.rangeState.selecting)return;let We=Ae.target;if(We.tagName==="SPAN"&&(We=(Ve=We.parentNode)==null?void 0:Ve.parentNode),We.tagName==="DIV"&&(We=We.parentNode),We.tagName!=="TD")return;const ft=We.parentNode.rowIndex-1,at=We.cellIndex;w(Y)[ft][at].disabled||(ft!==w(m)||at!==w(b))&&(m.value=ft,b.value=at,n("changerange",{selecting:!0,endDate:fe(ft,at)}))},me=Ae=>!w(F)&&Ae?.text===1&&Ae.type==="normal"||Ae.isCurrent,we=Ae=>{E||w(F)||e.selectionMode!=="date"||$e(Ae,!0)},ye=Ae=>{Ae.target.closest("td")&&(E=!0)},Ue=Ae=>{Ae.target.closest("td")&&(E=!1)},Ne=Ae=>{!e.rangeState.selecting||!e.minDate?(n("pick",{minDate:Ae,maxDate:null}),n("select",!0)):(Ae>=e.minDate?n("pick",{minDate:e.minDate,maxDate:Ae}):n("pick",{minDate:Ae,maxDate:e.minDate}),n("select",!1))},Pe=Ae=>{const Ve=Ae.week(),We=`${Ae.year()}w${Ve}`;n("pick",{year:Ae.year(),week:Ve,value:We,date:Ae.startOf("week")})},ve=(Ae,Ve)=>{const We=Ve?yl(e.parsedValue).filter(ft=>ft?.valueOf()!==Ae.valueOf()):yl(e.parsedValue).concat([Ae]);n("pick",We)},$e=(Ae,Ve=!1)=>{const We=Ae.target.closest("td");if(!We)return;const ft=We.parentNode.rowIndex-1,at=We.cellIndex,ct=w(Y)[ft][at];if(ct.disabled||ct.type==="week")return;const Mt=fe(ft,at);switch(e.selectionMode){case"range":{Ne(Mt);break}case"date":{n("pick",Mt,Ve);break}case"week":{Pe(Mt);break}case"dates":{ve(Mt,!!ct.selected);break}}},Te=Ae=>{if(e.selectionMode!=="week")return!1;let Ve=e.date.startOf("day");if(Ae.type==="prev-month"&&(Ve=Ve.subtract(1,"month")),Ae.type==="next-month"&&(Ve=Ve.add(1,"month")),Ve=Ve.date(Number.parseInt(Ae.text,10)),e.parsedValue&&!mn(e.parsedValue)){const We=(e.parsedValue.day()-M+7)%7-1;return e.parsedValue.subtract(We,"day").isSame(Ve,"day")}return!1};return{WEEKS:z,rows:Y,tbodyRef:l,currentCellRef:d,focus:J,isCurrent:re,isWeekActive:Te,isSelectedCell:me,handlePickDate:$e,handleMouseUp:Ue,handleMouseDown:ye,handleMouseMove:ce,handleFocus:we}},Vfe=(e,{isCurrent:n,isWeekActive:s})=>{const l=dn("date-table"),{t:d}=Oi(),m=se(()=>[l.b(),{"is-week-mode":e.selectionMode==="week"}]),b=se(()=>d("el.datepicker.dateTablePrompt")),r=se(()=>d("el.datepicker.week"));return{tableKls:m,tableLabel:b,weekLabel:r,getCellClasses:A=>{const P=[];return c6(A.type)&&!A.disabled?(P.push("available"),A.type==="today"&&P.push("today")):P.push(A.type),n(A)&&P.push("current"),A.inRange&&(c6(A.type)||e.selectionMode==="week")&&(P.push("in-range"),A.start&&P.push("start-date"),A.end&&P.push("end-date")),A.disabled&&P.push("disabled"),A.selected&&P.push("selected"),A.customClass&&P.push(A.customClass),P.join(" ")},getRowKls:A=>[l.e("row"),{current:s(A)}],t:d}},$fe=bn({cell:{type:wt(Object)}});var b8=xe({name:"ElDatePickerCell",props:$fe,setup(e){const n=dn("date-table-cell"),{slots:s}=Gn(Px);return()=>{const{cell:l}=e;return It(s,"default",{...l},()=>{var d;return[st("div",{class:n.b()},[st("span",{class:n.e("text")},[(d=l?.renderText)!=null?d:l?.text])])]})}}});const Hfe=xe({__name:"basic-date-table",props:Nfe,emits:Ffe,setup(e,{expose:n,emit:s}){const l=e,{WEEKS:d,rows:m,tbodyRef:b,currentCellRef:r,focus:E,isCurrent:M,isWeekActive:A,isSelectedCell:P,handlePickDate:D,handleMouseUp:z,handleMouseDown:F,handleMouseMove:N,handleFocus:q}=Bfe(l,s),{tableLabel:G,tableKls:ie,weekLabel:W,getCellClasses:Y,getRowKls:J,t:re}=Vfe(l,{isCurrent:M,isWeekActive:A});let he=!1;return Ls(()=>{he=!0}),n({focus:E}),(fe,ce)=>(Z(),ue("table",{"aria-label":w(G),class:ge(w(ie)),cellspacing:"0",cellpadding:"0",role:"grid",onClick:w(D),onMousemove:w(N),onMousedown:Er(w(F),["prevent"]),onMouseup:w(z)},[ae("tbody",{ref_key:"tbodyRef",ref:b},[ae("tr",null,[fe.showWeekNumber?(Z(),ue("th",{key:0,scope:"col"},gn(w(W)),1)):At("v-if",!0),(Z(!0),ue(cr,null,Ei(w(d),(me,we)=>(Z(),ue("th",{key:we,"aria-label":w(re)("el.datepicker.weeksFull."+me),scope:"col"},gn(w(re)("el.datepicker.weeks."+me)),9,["aria-label"]))),128))]),(Z(!0),ue(cr,null,Ei(w(m),(me,we)=>(Z(),ue("tr",{key:we,class:ge(w(J)(me[1]))},[(Z(!0),ue(cr,null,Ei(me,(ye,Ue)=>(Z(),ue("td",{key:`${we}.${Ue}`,ref_for:!0,ref:Ne=>!w(he)&&w(P)(ye)&&(r.value=Ne),class:ge(w(Y)(ye)),"aria-current":ye.isCurrent?"date":void 0,"aria-selected":ye.isCurrent,tabindex:w(P)(ye)?0:-1,onFocus:w(q)},[st(w(b8),{cell:ye},null,8,["cell"])],42,["aria-current","aria-selected","tabindex","onFocus"]))),128))],2))),128))],512)],42,["aria-label","onClick","onMousemove","onMousedown","onMouseup"]))}});var d6=En(Hfe,[["__file","basic-date-table.vue"]]);const Ufe=bn({...g8,selectionMode:v8("month")}),jfe=xe({__name:"basic-month-table",props:Ufe,emits:["changerange","pick","select"],setup(e,{expose:n,emit:s}){const l=e,d=dn("month-table"),{t:m,lang:b}=Oi(),r=Re(),E=Re(),M=Re(l.date.locale("en").localeData().monthsShort().map(W=>W.toLowerCase())),A=Re([[],[],[]]),P=Re(),D=Re(),z=se(()=>{var W,Y;const J=A.value,re=jr().locale(b.value).startOf("month");for(let he=0;he<3;he++){const fe=J[he];for(let ce=0;ce<4;ce++){const me=fe[ce]||(fe[ce]={row:he,column:ce,type:"normal",inRange:!1,start:!1,end:!1,text:-1,disabled:!1});me.type="normal";const we=he*4+ce,ye=l.date.startOf("year").month(we),Ue=l.rangeState.endDate||l.maxDate||l.rangeState.selecting&&l.minDate||null;me.inRange=!!(l.minDate&&ye.isSameOrAfter(l.minDate,"month")&&Ue&&ye.isSameOrBefore(Ue,"month"))||!!(l.minDate&&ye.isSameOrBefore(l.minDate,"month")&&Ue&&ye.isSameOrAfter(Ue,"month")),(W=l.minDate)!=null&&W.isSameOrAfter(Ue)?(me.start=!!(Ue&&ye.isSame(Ue,"month")),me.end=l.minDate&&ye.isSame(l.minDate,"month")):(me.start=!!(l.minDate&&ye.isSame(l.minDate,"month")),me.end=!!(Ue&&ye.isSame(Ue,"month"))),re.isSame(ye)&&(me.type="today"),me.text=we,me.disabled=((Y=l.disabledDate)==null?void 0:Y.call(l,ye.toDate()))||!1}}return J}),F=()=>{var W;(W=E.value)==null||W.focus()},N=W=>{const Y={},J=l.date.year(),re=new Date,he=W.text;return Y.disabled=l.disabledDate?zb(J,he,b.value).every(l.disabledDate):!1,Y.current=yl(l.parsedValue).findIndex(fe=>jr.isDayjs(fe)&&fe.year()===J&&fe.month()===he)>=0,Y.today=re.getFullYear()===J&&re.getMonth()===he,W.inRange&&(Y["in-range"]=!0,W.start&&(Y["start-date"]=!0),W.end&&(Y["end-date"]=!0)),Y},q=W=>{const Y=l.date.year(),J=W.text;return yl(l.date).findIndex(re=>re.year()===Y&&re.month()===J)>=0},G=W=>{var Y;if(!l.rangeState.selecting)return;let J=W.target;if(J.tagName==="SPAN"&&(J=(Y=J.parentNode)==null?void 0:Y.parentNode),J.tagName==="DIV"&&(J=J.parentNode),J.tagName!=="TD")return;const re=J.parentNode.rowIndex,he=J.cellIndex;z.value[re][he].disabled||(re!==P.value||he!==D.value)&&(P.value=re,D.value=he,s("changerange",{selecting:!0,endDate:l.date.startOf("year").month(re*4+he)}))},ie=W=>{var Y;const J=(Y=W.target)==null?void 0:Y.closest("td");if(J?.tagName!=="TD"||Nl(J,"disabled"))return;const re=J.cellIndex,fe=J.parentNode.rowIndex*4+re,ce=l.date.startOf("year").month(fe);if(l.selectionMode==="months"){if(W.type==="keydown"){s("pick",yl(l.parsedValue),!1);return}const me=Nv(l.date.year(),fe,b.value,l.disabledDate),we=Nl(J,"current")?yl(l.parsedValue).filter(ye=>ye?.year()!==me.year()||ye?.month()!==me.month()):yl(l.parsedValue).concat([jr(me)]);s("pick",we)}else l.selectionMode==="range"?l.rangeState.selecting?(l.minDate&&ce>=l.minDate?s("pick",{minDate:l.minDate,maxDate:ce}):s("pick",{minDate:ce,maxDate:l.minDate}),s("select",!1)):(s("pick",{minDate:ce,maxDate:null}),s("select",!0)):s("pick",fe)};return on(()=>l.date,async()=>{var W,Y;(W=r.value)!=null&&W.contains(document.activeElement)&&(await dr(),(Y=E.value)==null||Y.focus())}),n({focus:F}),(W,Y)=>(Z(),ue("table",{role:"grid","aria-label":w(m)("el.datepicker.monthTablePrompt"),class:ge(w(d).b()),onClick:ie,onMousemove:G},[ae("tbody",{ref_key:"tbodyRef",ref:r},[(Z(!0),ue(cr,null,Ei(w(z),(J,re)=>(Z(),ue("tr",{key:re},[(Z(!0),ue(cr,null,Ei(J,(he,fe)=>(Z(),ue("td",{key:fe,ref_for:!0,ref:ce=>q(he)&&(E.value=ce),class:ge(N(he)),"aria-selected":`${q(he)}`,"aria-label":w(m)(`el.datepicker.month${+he.text+1}`),tabindex:q(he)?0:-1,onKeydown:[Ps(Er(ie,["prevent","stop"]),["space"]),Ps(Er(ie,["prevent","stop"]),["enter"])]},[st(w(b8),{cell:{...he,renderText:w(m)("el.datepicker.months."+M.value[he.text])}},null,8,["cell"])],42,["aria-selected","aria-label","tabindex","onKeydown"]))),128))]))),128))],512)],42,["aria-label"]))}});var h6=En(jfe,[["__file","basic-month-table.vue"]]);const Gfe=bn({...g8,selectionMode:v8("year")}),qfe=xe({__name:"basic-year-table",props:Gfe,emits:["changerange","pick","select"],setup(e,{expose:n,emit:s}){const l=e,d=(Y,J)=>{const re=jr(String(Y)).locale(J).startOf("year"),fe=re.endOf("year").dayOfYear();return xf(fe).map(ce=>re.add(ce,"day").toDate())},m=dn("year-table"),{t:b,lang:r}=Oi(),E=Re(),M=Re(),A=se(()=>Math.floor(l.date.year()/10)*10),P=Re([[],[],[]]),D=Re(),z=Re(),F=se(()=>{var Y;const J=P.value,re=jr().locale(r.value).startOf("year");for(let he=0;he<3;he++){const fe=J[he];for(let ce=0;ce<4&&!(he*4+ce>=10);ce++){let me=fe[ce];me||(me={row:he,column:ce,type:"normal",inRange:!1,start:!1,end:!1,text:-1,disabled:!1}),me.type="normal";const we=he*4+ce+A.value,ye=jr().year(we),Ue=l.rangeState.endDate||l.maxDate||l.rangeState.selecting&&l.minDate||null;me.inRange=!!(l.minDate&&ye.isSameOrAfter(l.minDate,"year")&&Ue&&ye.isSameOrBefore(Ue,"year"))||!!(l.minDate&&ye.isSameOrBefore(l.minDate,"year")&&Ue&&ye.isSameOrAfter(Ue,"year")),(Y=l.minDate)!=null&&Y.isSameOrAfter(Ue)?(me.start=!!(Ue&&ye.isSame(Ue,"year")),me.end=!!(l.minDate&&ye.isSame(l.minDate,"year"))):(me.start=!!(l.minDate&&ye.isSame(l.minDate,"year")),me.end=!!(Ue&&ye.isSame(Ue,"year"))),re.isSame(ye)&&(me.type="today"),me.text=we;const Pe=ye.toDate();me.disabled=l.disabledDate&&l.disabledDate(Pe)||!1,fe[ce]=me}}return J}),N=()=>{var Y;(Y=M.value)==null||Y.focus()},q=Y=>{const J={},re=jr().locale(r.value),he=Y.text;return J.disabled=l.disabledDate?d(he,r.value).every(l.disabledDate):!1,J.today=re.year()===he,J.current=yl(l.parsedValue).findIndex(fe=>fe.year()===he)>=0,Y.inRange&&(J["in-range"]=!0,Y.start&&(J["start-date"]=!0),Y.end&&(J["end-date"]=!0)),J},G=Y=>{const J=Y.text;return yl(l.date).findIndex(re=>re.year()===J)>=0},ie=Y=>{var J;const re=(J=Y.target)==null?void 0:J.closest("td");if(!re||!re.textContent||Nl(re,"disabled"))return;const he=re.cellIndex,ce=re.parentNode.rowIndex*4+he+A.value,me=jr().year(ce);if(l.selectionMode==="range")l.rangeState.selecting?(l.minDate&&me>=l.minDate?s("pick",{minDate:l.minDate,maxDate:me}):s("pick",{minDate:me,maxDate:l.minDate}),s("select",!1)):(s("pick",{minDate:me,maxDate:null}),s("select",!0));else if(l.selectionMode==="years"){if(Y.type==="keydown"){s("pick",yl(l.parsedValue),!1);return}const we=u6(me.startOf("year"),r.value,l.disabledDate),ye=Nl(re,"current")?yl(l.parsedValue).filter(Ue=>Ue?.year()!==ce):yl(l.parsedValue).concat([we]);s("pick",ye)}else s("pick",ce)},W=Y=>{var J;if(!l.rangeState.selecting)return;const re=(J=Y.target)==null?void 0:J.closest("td");if(!re)return;const he=re.parentNode.rowIndex,fe=re.cellIndex;F.value[he][fe].disabled||(he!==D.value||fe!==z.value)&&(D.value=he,z.value=fe,s("changerange",{selecting:!0,endDate:jr().year(A.value).add(he*4+fe,"year")}))};return on(()=>l.date,async()=>{var Y,J;(Y=E.value)!=null&&Y.contains(document.activeElement)&&(await dr(),(J=M.value)==null||J.focus())}),n({focus:N}),(Y,J)=>(Z(),ue("table",{role:"grid","aria-label":w(b)("el.datepicker.yearTablePrompt"),class:ge(w(m).b()),onClick:ie,onMousemove:W},[ae("tbody",{ref_key:"tbodyRef",ref:E},[(Z(!0),ue(cr,null,Ei(w(F),(re,he)=>(Z(),ue("tr",{key:he},[(Z(!0),ue(cr,null,Ei(re,(fe,ce)=>(Z(),ue("td",{key:`${he}_${ce}`,ref_for:!0,ref:me=>G(fe)&&(M.value=me),class:ge(["available",q(fe)]),"aria-selected":G(fe),"aria-label":String(fe.text),tabindex:G(fe)?0:-1,onKeydown:[Ps(Er(ie,["prevent","stop"]),["space"]),Ps(Er(ie,["prevent","stop"]),["enter"])]},[st(w(b8),{cell:fe},null,8,["cell"])],42,["aria-selected","aria-label","tabindex","onKeydown"]))),128))]))),128))],512)],42,["aria-label"]))}});var f6=En(qfe,[["__file","basic-year-table.vue"]]);const Wfe=xe({__name:"panel-date-pick",props:Dfe,emits:["pick","set-picker-option","panel-change"],setup(e,{emit:n}){const s=e,l=(vt,yt,it)=>!0,d=dn("picker-panel"),m=dn("date-picker"),b=wh(),r=qo(),{t:E,lang:M}=Oi(),A=Gn("EP_PICKER_BASE"),P=Gn("ElIsDefaultFormat"),D=Gn(Mx),{shortcuts:z,disabledDate:F,cellClassName:N,defaultTime:q}=A.props,G=cs(A.props,"defaultValue"),ie=Re(),W=Re(jr().locale(M.value)),Y=Re(!1);let J=!1;const re=se(()=>jr(q).locale(M.value)),he=se(()=>W.value.month()),fe=se(()=>W.value.year()),ce=Re([]),me=Re(null),we=Re(null),ye=vt=>ce.value.length>0?l(vt,ce.value,s.format||"HH:mm:ss"):!0,Ue=vt=>q&&!Qt.value&&!Y.value&&!J?re.value.year(vt.year()).month(vt.month()).date(vt.date()):Ke.value?vt.millisecond(0):vt.startOf("day"),Ne=(vt,...yt)=>{if(!vt)n("pick",vt,...yt);else if(mn(vt)){const it=vt.map(Ue);n("pick",it,...yt)}else n("pick",Ue(vt),...yt);me.value=null,we.value=null,Y.value=!1,J=!1},Pe=async(vt,yt)=>{if(We.value==="date"){vt=vt;let it=s.parsedValue?s.parsedValue.year(vt.year()).month(vt.month()).date(vt.date()):vt;ye(it),W.value=it,Ne(it,Ke.value||yt),s.type==="datetime"&&(await dr(),ui())}else We.value==="week"?Ne(vt.date):We.value==="dates"&&Ne(vt,!0)},ve=vt=>{const yt=vt?"add":"subtract";W.value=W.value[yt](1,"month"),Fr("month")},$e=vt=>{const yt=W.value,it=vt?"add":"subtract";W.value=Te.value==="year"?yt[it](10,"year"):yt[it](1,"year"),Fr("year")},Te=Re("date"),Ae=se(()=>{const vt=E("el.datepicker.year");if(Te.value==="year"){const yt=Math.floor(fe.value/10)*10;return vt?`${yt} ${vt} - ${yt+9} ${vt}`:`${yt} - ${yt+9}`}return`${fe.value} ${vt}`}),Ve=vt=>{const yt=hr(vt.value)?vt.value():vt.value;if(yt){J=!0,Ne(jr(yt).locale(M.value));return}vt.onClick&&vt.onClick({attrs:b,slots:r,emit:n})},We=se(()=>{const{type:vt}=s;return["week","month","months","year","years","dates"].includes(vt)?vt:"date"}),ft=se(()=>We.value==="dates"||We.value==="months"||We.value==="years"),at=se(()=>We.value==="date"?Te.value:We.value),ct=se(()=>!!z.length),Mt=async(vt,yt)=>{We.value==="month"?(W.value=Nv(W.value.year(),vt,M.value,F),Ne(W.value,!1)):We.value==="months"?Ne(vt,yt??!0):(W.value=Nv(W.value.year(),vt,M.value,F),Te.value="date",["month","year","date","week"].includes(We.value)&&(Ne(W.value,!0),await dr(),ui())),Fr("month")},Ct=async(vt,yt)=>{if(We.value==="year"){const it=W.value.startOf("year").year(vt);W.value=u6(it,M.value,F),Ne(W.value,!1)}else if(We.value==="years")Ne(vt,yt??!0);else{const it=W.value.year(vt);W.value=u6(it,M.value,F),Te.value="month",["month","year","date","week"].includes(We.value)&&(Ne(W.value,!0),await dr(),ui())}Fr("year")},gt=async vt=>{Te.value=vt,await dr(),ui()},Ke=se(()=>s.type==="datetime"||s.type==="datetimerange"),Lt=se(()=>{const vt=Ke.value||We.value==="dates",yt=We.value==="years",it=We.value==="months",ln=Te.value==="date",Xn=Te.value==="year",vr=Te.value==="month";return vt&&ln||yt&&Xn||it&&vr}),xn=se(()=>F?s.parsedValue?mn(s.parsedValue)?F(s.parsedValue[0].toDate()):F(s.parsedValue.toDate()):!0:!1),Ht=()=>{if(ft.value)Ne(s.parsedValue);else{let vt=s.parsedValue;if(!vt){const yt=jr(q).locale(M.value),it=Kn();vt=yt.year(it.year()).month(it.month()).date(it.date())}W.value=vt,Ne(vt)}},le=se(()=>F?F(jr().locale(M.value).toDate()):!1),nt=()=>{const yt=jr().locale(M.value).toDate();Y.value=!0,(!F||!F(yt))&&ye(yt)&&(W.value=jr().locale(M.value),Ne(W.value))},Gt=se(()=>s.timeFormat||hD(s.format)),an=se(()=>s.dateFormat||dD(s.format)),Qt=se(()=>{if(we.value)return we.value;if(!(!s.parsedValue&&!G.value))return(s.parsedValue||W.value).format(Gt.value)}),Zt=se(()=>{if(me.value)return me.value;if(!(!s.parsedValue&&!G.value))return(s.parsedValue||W.value).format(an.value)}),rn=Re(!1),bt=()=>{rn.value=!0},fn=()=>{rn.value=!1},pn=vt=>({hour:vt.hour(),minute:vt.minute(),second:vt.second(),year:vt.year(),month:vt.month(),date:vt.date()}),Vn=(vt,yt,it)=>{const{hour:ln,minute:Xn,second:vr}=pn(vt),Ii=s.parsedValue?s.parsedValue.hour(ln).minute(Xn).second(vr):vt;W.value=Ii,Ne(W.value,!0),it||(rn.value=yt)},Nn=vt=>{const yt=jr(vt,Gt.value).locale(M.value);if(yt.isValid()&&ye(yt)){const{year:it,month:ln,date:Xn}=pn(W.value);W.value=yt.year(it).month(ln).date(Xn),we.value=null,rn.value=!1,Ne(W.value,!0)}},Ot=vt=>{const yt=Yg(vt,an.value,M.value,P);if(yt.isValid()){if(F&&F(yt.toDate()))return;const{hour:it,minute:ln,second:Xn}=pn(W.value);W.value=yt.hour(it).minute(ln).second(Xn),me.value=null,Ne(W.value,!0)}},Bn=vt=>jr.isDayjs(vt)&&vt.isValid()&&(F?!F(vt.toDate()):!0),Sr=vt=>mn(vt)?vt.map(yt=>yt.format(s.format)):vt.format(s.format),Ur=vt=>Yg(vt,s.format,M.value,P),Kn=()=>{const vt=jr(G.value).locale(M.value);if(!G.value){const yt=re.value;return jr().hour(yt.hour()).minute(yt.minute()).second(yt.second()).locale(M.value)}return vt},ui=()=>{var vt;["week","month","year","date"].includes(We.value)&&((vt=ie.value)==null||vt.focus())},wr=()=>{ui(),We.value==="week"&&pr(Un.down)},Tr=vt=>{const{code:yt}=vt;[Un.up,Un.down,Un.left,Un.right,Un.home,Un.end,Un.pageUp,Un.pageDown].includes(yt)&&(pr(yt),vt.stopPropagation(),vt.preventDefault()),[Un.enter,Un.space,Un.numpadEnter].includes(yt)&&me.value===null&&we.value===null&&(vt.preventDefault(),Ne(W.value,!1))},pr=vt=>{var yt;const{up:it,down:ln,left:Xn,right:vr,home:Ii,end:ds,pageUp:Qs,pageDown:Xs}=Un,ks={year:{[it]:-4,[ln]:4,[Xn]:-1,[vr]:1,offset:(Ri,_r)=>Ri.setFullYear(Ri.getFullYear()+_r)},month:{[it]:-4,[ln]:4,[Xn]:-1,[vr]:1,offset:(Ri,_r)=>Ri.setMonth(Ri.getMonth()+_r)},week:{[it]:-1,[ln]:1,[Xn]:-1,[vr]:1,offset:(Ri,_r)=>Ri.setDate(Ri.getDate()+_r*7)},date:{[it]:-7,[ln]:7,[Xn]:-1,[vr]:1,[Ii]:Ri=>-Ri.getDay(),[ds]:Ri=>-Ri.getDay()+6,[Qs]:Ri=>-new Date(Ri.getFullYear(),Ri.getMonth(),0).getDate(),[Xs]:Ri=>new Date(Ri.getFullYear(),Ri.getMonth()+1,0).getDate(),offset:(Ri,_r)=>Ri.setDate(Ri.getDate()+_r)}},Rn=W.value.toDate();for(;Math.abs(W.value.diff(Rn,"year",!0))<1;){const Ri=ks[at.value];if(!Ri)return;if(Ri.offset(Rn,hr(Ri[vt])?Ri[vt](Rn):(yt=Ri[vt])!=null?yt:0),F&&F(Rn))break;const _r=jr(Rn).locale(M.value);W.value=_r,n("pick",_r,!0);break}},Fr=vt=>{n("panel-change",W.value.toDate(),vt,Te.value)};return on(()=>We.value,vt=>{if(["month","year"].includes(vt)){Te.value=vt;return}else if(vt==="years"){Te.value="year";return}else if(vt==="months"){Te.value="month";return}Te.value="date"},{immediate:!0}),on(()=>Te.value,()=>{D?.updatePopper()}),on(()=>G.value,vt=>{vt&&(W.value=Kn())},{immediate:!0}),on(()=>s.parsedValue,vt=>{if(vt){if(ft.value||mn(vt))return;W.value=vt}else W.value=Kn()},{immediate:!0}),n("set-picker-option",["isValidValue",Bn]),n("set-picker-option",["formatToString",Sr]),n("set-picker-option",["parseUserInput",Ur]),n("set-picker-option",["handleFocusPicker",wr]),(vt,yt)=>(Z(),ue("div",{class:ge([w(d).b(),w(m).b(),{"has-sidebar":vt.$slots.sidebar||w(ct),"has-time":w(Ke)}])},[ae("div",{class:ge(w(d).e("body-wrapper"))},[It(vt.$slots,"sidebar",{class:ge(w(d).e("sidebar"))}),w(ct)?(Z(),ue("div",{key:0,class:ge(w(d).e("sidebar"))},[(Z(!0),ue(cr,null,Ei(w(z),(it,ln)=>(Z(),ue("button",{key:ln,type:"button",class:ge(w(d).e("shortcut")),onClick:Xn=>Ve(it)},gn(it.text),11,["onClick"]))),128))],2)):At("v-if",!0),ae("div",{class:ge(w(d).e("body"))},[w(Ke)?(Z(),ue("div",{key:0,class:ge(w(m).e("time-header"))},[ae("span",{class:ge(w(m).e("editor-wrap"))},[st(w(nl),{placeholder:w(E)("el.datepicker.selectDate"),"model-value":w(Zt),size:"small","validate-event":!1,onInput:it=>me.value=it,onChange:Ot},null,8,["placeholder","model-value","onInput"])],2),Wr((Z(),ue("span",{class:ge(w(m).e("editor-wrap"))},[st(w(nl),{placeholder:w(E)("el.datepicker.selectTime"),"model-value":w(Qt),size:"small","validate-event":!1,onFocus:bt,onInput:it=>we.value=it,onChange:Nn},null,8,["placeholder","model-value","onInput"]),st(w(Db),{visible:rn.value,format:w(Gt),"parsed-value":W.value,onPick:Vn},null,8,["visible","format","parsed-value"])],2)),[[w(yh),fn]])],2)):At("v-if",!0),Wr(ae("div",{class:ge([w(m).e("header"),(Te.value==="year"||Te.value==="month")&&w(m).e("header--bordered")])},[ae("span",{class:ge(w(m).e("prev-btn"))},[ae("button",{type:"button","aria-label":w(E)("el.datepicker.prevYear"),class:ge(["d-arrow-left",w(d).e("icon-btn")]),onClick:it=>$e(!1)},[It(vt.$slots,"prev-year",{},()=>[st(w(rr),null,{default:mt(()=>[st(w(mh))]),_:1})])],10,["aria-label","onClick"]),Wr(ae("button",{type:"button","aria-label":w(E)("el.datepicker.prevMonth"),class:ge([w(d).e("icon-btn"),"arrow-left"]),onClick:it=>ve(!1)},[It(vt.$slots,"prev-month",{},()=>[st(w(rr),null,{default:mt(()=>[st(w(ph))]),_:1})])],10,["aria-label","onClick"]),[[Ki,Te.value==="date"]])],2),ae("span",{role:"button",class:ge(w(m).e("header-label")),"aria-live":"polite",tabindex:"0",onKeydown:Ps(it=>gt("year"),["enter"]),onClick:it=>gt("year")},gn(w(Ae)),43,["onKeydown","onClick"]),Wr(ae("span",{role:"button","aria-live":"polite",tabindex:"0",class:ge([w(m).e("header-label"),{active:Te.value==="month"}]),onKeydown:Ps(it=>gt("month"),["enter"]),onClick:it=>gt("month")},gn(w(E)(`el.datepicker.month${w(he)+1}`)),43,["onKeydown","onClick"]),[[Ki,Te.value==="date"]]),ae("span",{class:ge(w(m).e("next-btn"))},[Wr(ae("button",{type:"button","aria-label":w(E)("el.datepicker.nextMonth"),class:ge([w(d).e("icon-btn"),"arrow-right"]),onClick:it=>ve(!0)},[It(vt.$slots,"next-month",{},()=>[st(w(rr),null,{default:mt(()=>[st(w(il))]),_:1})])],10,["aria-label","onClick"]),[[Ki,Te.value==="date"]]),ae("button",{type:"button","aria-label":w(E)("el.datepicker.nextYear"),class:ge([w(d).e("icon-btn"),"d-arrow-right"]),onClick:it=>$e(!0)},[It(vt.$slots,"next-year",{},()=>[st(w(rr),null,{default:mt(()=>[st(w(gh))]),_:1})])],10,["aria-label","onClick"])],2)],2),[[Ki,Te.value!=="time"]]),ae("div",{class:ge(w(d).e("content")),onKeydown:Tr},[Te.value==="date"?(Z(),Bt(d6,{key:0,ref_key:"currentViewRef",ref:ie,"selection-mode":w(We),date:W.value,"parsed-value":vt.parsedValue,"disabled-date":w(F),"cell-class-name":w(N),onPick:Pe},null,8,["selection-mode","date","parsed-value","disabled-date","cell-class-name"])):At("v-if",!0),Te.value==="year"?(Z(),Bt(f6,{key:1,ref_key:"currentViewRef",ref:ie,"selection-mode":w(We),date:W.value,"disabled-date":w(F),"parsed-value":vt.parsedValue,onPick:Ct},null,8,["selection-mode","date","disabled-date","parsed-value"])):At("v-if",!0),Te.value==="month"?(Z(),Bt(h6,{key:2,ref_key:"currentViewRef",ref:ie,"selection-mode":w(We),date:W.value,"parsed-value":vt.parsedValue,"disabled-date":w(F),onPick:Mt},null,8,["selection-mode","date","parsed-value","disabled-date"])):At("v-if",!0)],34)],2)],2),Wr(ae("div",{class:ge(w(d).e("footer"))},[Wr(st(w(ua),{text:"",size:"small",class:ge(w(d).e("link-btn")),disabled:w(le),onClick:nt},{default:mt(()=>[ei(gn(w(E)("el.datepicker.now")),1)]),_:1},8,["class","disabled"]),[[Ki,!w(ft)&&vt.showNow]]),st(w(ua),{plain:"",size:"small",class:ge(w(d).e("link-btn")),disabled:w(xn),onClick:Ht},{default:mt(()=>[ei(gn(w(E)("el.datepicker.confirm")),1)]),_:1},8,["class","disabled"])],2),[[Ki,w(Lt)]])],2))}});var Kfe=En(Wfe,[["__file","panel-date-pick.vue"]]);const Yfe=bn({...qD,..._8,visible:Boolean}),WD=e=>{const{emit:n}=oi(),s=wh(),l=qo();return m=>{const b=hr(m.value)?m.value():m.value;if(b){n("pick",[jr(b[0]).locale(e.value),jr(b[1]).locale(e.value)]);return}m.onClick&&m.onClick({attrs:s,slots:l,emit:n})}},KD=(e,{defaultValue:n,leftDate:s,rightDate:l,unit:d,onParsedValueChanged:m})=>{const{emit:b}=oi(),{pickerNs:r}=Gn(Px),E=dn("date-range-picker"),{t:M,lang:A}=Oi(),P=WD(A),D=Re(),z=Re(),F=Re({endDate:null,selecting:!1}),N=Y=>{F.value=Y},q=(Y=!1)=>{const J=w(D),re=w(z);Kg([J,re])&&b("pick",[J,re],Y)},G=Y=>{F.value.selecting=Y,Y||(F.value.endDate=null)},ie=Y=>{if(mn(Y)&&Y.length===2){const[J,re]=Y;D.value=J,s.value=J,z.value=re,m(w(D),w(z))}else W()},W=()=>{const[Y,J]=y8(w(n),{lang:w(A),unit:d,unlinkPanels:e.unlinkPanels});D.value=void 0,z.value=void 0,s.value=Y,l.value=J};return on(n,Y=>{Y&&W()},{immediate:!0}),on(()=>e.parsedValue,ie,{immediate:!0}),{minDate:D,maxDate:z,rangeState:F,lang:A,ppNs:r,drpNs:E,handleChangeRange:N,handleRangeConfirm:q,handleShortcutClick:P,onSelect:G,onReset:ie,t:M}},S2="month",Zfe=xe({__name:"panel-date-range",props:Yfe,emits:["pick","set-picker-option","calendar-change","panel-change"],setup(e,{emit:n}){const s=e,l=Gn("EP_PICKER_BASE"),d=Gn("ElIsDefaultFormat"),{disabledDate:m,cellClassName:b,defaultTime:r,clearable:E}=l.props,M=cs(l.props,"format"),A=cs(l.props,"shortcuts"),P=cs(l.props,"defaultValue"),{lang:D}=Oi(),z=Re(jr().locale(D.value)),F=Re(jr().locale(D.value).add(1,S2)),{minDate:N,maxDate:q,rangeState:G,ppNs:ie,drpNs:W,handleChangeRange:Y,handleRangeConfirm:J,handleShortcutClick:re,onSelect:he,onReset:fe,t:ce}=KD(s,{defaultValue:P,leftDate:z,rightDate:F,unit:S2,onParsedValueChanged:vt});on(()=>s.visible,yt=>{!yt&&G.value.selecting&&(fe(s.parsedValue),he(!1))});const me=Re({min:null,max:null}),we=Re({min:null,max:null}),ye=se(()=>`${z.value.year()} ${ce("el.datepicker.year")} ${ce(`el.datepicker.month${z.value.month()+1}`)}`),Ue=se(()=>`${F.value.year()} ${ce("el.datepicker.year")} ${ce(`el.datepicker.month${F.value.month()+1}`)}`),Ne=se(()=>z.value.year()),Pe=se(()=>z.value.month()),ve=se(()=>F.value.year()),$e=se(()=>F.value.month()),Te=se(()=>!!A.value.length),Ae=se(()=>me.value.min!==null?me.value.min:N.value?N.value.format(ct.value):""),Ve=se(()=>me.value.max!==null?me.value.max:q.value||N.value?(q.value||N.value).format(ct.value):""),We=se(()=>we.value.min!==null?we.value.min:N.value?N.value.format(at.value):""),ft=se(()=>we.value.max!==null?we.value.max:q.value||N.value?(q.value||N.value).format(at.value):""),at=se(()=>s.timeFormat||hD(M.value)),ct=se(()=>s.dateFormat||dD(M.value)),Mt=yt=>Kg(yt)&&(m?!m(yt[0].toDate())&&!m(yt[1].toDate()):!0),Ct=()=>{z.value=z.value.subtract(1,"year"),s.unlinkPanels||(F.value=z.value.add(1,"month")),Gt("year")},gt=()=>{z.value=z.value.subtract(1,"month"),s.unlinkPanels||(F.value=z.value.add(1,"month")),Gt("month")},Ke=()=>{s.unlinkPanels?F.value=F.value.add(1,"year"):(z.value=z.value.add(1,"year"),F.value=z.value.add(1,"month")),Gt("year")},Lt=()=>{s.unlinkPanels?F.value=F.value.add(1,"month"):(z.value=z.value.add(1,"month"),F.value=z.value.add(1,"month")),Gt("month")},xn=()=>{z.value=z.value.add(1,"year"),Gt("year")},Ht=()=>{z.value=z.value.add(1,"month"),Gt("month")},le=()=>{F.value=F.value.subtract(1,"year"),Gt("year")},nt=()=>{F.value=F.value.subtract(1,"month"),Gt("month")},Gt=yt=>{n("panel-change",[z.value.toDate(),F.value.toDate()],yt)},an=se(()=>{const yt=(Pe.value+1)%12,it=Pe.value+1>=12?1:0;return s.unlinkPanels&&new Date(Ne.value+it,yt)<new Date(ve.value,$e.value)}),Qt=se(()=>s.unlinkPanels&&ve.value*12+$e.value-(Ne.value*12+Pe.value+1)>=12),Zt=se(()=>!(N.value&&q.value&&!G.value.selecting&&Kg([N.value,q.value]))),rn=se(()=>s.type==="datetime"||s.type==="datetimerange"),bt=(yt,it)=>{if(yt)return r?jr(r[it]||r).locale(D.value).year(yt.year()).month(yt.month()).date(yt.date()):yt},fn=(yt,it=!0)=>{const ln=yt.minDate,Xn=yt.maxDate,vr=bt(ln,0),Ii=bt(Xn,1);q.value===Ii&&N.value===vr||(n("calendar-change",[ln.toDate(),Xn&&Xn.toDate()]),q.value=Ii,N.value=vr,!(!it||rn.value)&&J())},pn=Re(!1),Vn=Re(!1),Nn=()=>{pn.value=!1},Ot=()=>{Vn.value=!1},Bn=(yt,it)=>{me.value[it]=yt;const ln=jr(yt,ct.value).locale(D.value);if(ln.isValid()){if(m&&m(ln.toDate()))return;it==="min"?(z.value=ln,N.value=(N.value||z.value).year(ln.year()).month(ln.month()).date(ln.date()),!s.unlinkPanels&&(!q.value||q.value.isBefore(N.value))&&(F.value=ln.add(1,"month"),q.value=N.value.add(1,"month"))):(F.value=ln,q.value=(q.value||F.value).year(ln.year()).month(ln.month()).date(ln.date()),!s.unlinkPanels&&(!N.value||N.value.isAfter(q.value))&&(z.value=ln.subtract(1,"month"),N.value=q.value.subtract(1,"month")))}},Sr=(yt,it)=>{me.value[it]=null},Ur=(yt,it)=>{we.value[it]=yt;const ln=jr(yt,at.value).locale(D.value);ln.isValid()&&(it==="min"?(pn.value=!0,N.value=(N.value||z.value).hour(ln.hour()).minute(ln.minute()).second(ln.second())):(Vn.value=!0,q.value=(q.value||F.value).hour(ln.hour()).minute(ln.minute()).second(ln.second()),F.value=q.value))},Kn=(yt,it)=>{we.value[it]=null,it==="min"?(z.value=N.value,pn.value=!1,(!q.value||q.value.isBefore(N.value))&&(q.value=N.value)):(F.value=q.value,Vn.value=!1,q.value&&q.value.isBefore(N.value)&&(N.value=q.value))},ui=(yt,it,ln)=>{we.value.min||(yt&&(z.value=yt,N.value=(N.value||z.value).hour(yt.hour()).minute(yt.minute()).second(yt.second())),ln||(pn.value=it),(!q.value||q.value.isBefore(N.value))&&(q.value=N.value,F.value=yt))},wr=(yt,it,ln)=>{we.value.max||(yt&&(F.value=yt,q.value=(q.value||F.value).hour(yt.hour()).minute(yt.minute()).second(yt.second())),ln||(Vn.value=it),q.value&&q.value.isBefore(N.value)&&(N.value=q.value))},Tr=()=>{z.value=y8(w(P),{lang:w(D),unit:"month",unlinkPanels:s.unlinkPanels})[0],F.value=z.value.add(1,"month"),q.value=void 0,N.value=void 0,n("pick",null)},pr=yt=>mn(yt)?yt.map(it=>it.format(M.value)):yt.format(M.value),Fr=yt=>Yg(yt,M.value,D.value,d);function vt(yt,it){if(s.unlinkPanels&&it){const ln=yt?.year()||0,Xn=yt?.month()||0,vr=it.year(),Ii=it.month();F.value=ln===vr&&Xn===Ii?it.add(1,S2):it}else F.value=z.value.add(1,S2),it&&(F.value=F.value.hour(it.hour()).minute(it.minute()).second(it.second()))}return n("set-picker-option",["isValidValue",Mt]),n("set-picker-option",["parseUserInput",Fr]),n("set-picker-option",["formatToString",pr]),n("set-picker-option",["handleClear",Tr]),(yt,it)=>(Z(),ue("div",{class:ge([w(ie).b(),w(W).b(),{"has-sidebar":yt.$slots.sidebar||w(Te),"has-time":w(rn)}])},[ae("div",{class:ge(w(ie).e("body-wrapper"))},[It(yt.$slots,"sidebar",{class:ge(w(ie).e("sidebar"))}),w(Te)?(Z(),ue("div",{key:0,class:ge(w(ie).e("sidebar"))},[(Z(!0),ue(cr,null,Ei(w(A),(ln,Xn)=>(Z(),ue("button",{key:Xn,type:"button",class:ge(w(ie).e("shortcut")),onClick:vr=>w(re)(ln)},gn(ln.text),11,["onClick"]))),128))],2)):At("v-if",!0),ae("div",{class:ge(w(ie).e("body"))},[w(rn)?(Z(),ue("div",{key:0,class:ge(w(W).e("time-header"))},[ae("span",{class:ge(w(W).e("editors-wrap"))},[ae("span",{class:ge(w(W).e("time-picker-wrap"))},[st(w(nl),{size:"small",disabled:w(G).selecting,placeholder:w(ce)("el.datepicker.startDate"),class:ge(w(W).e("editor")),"model-value":w(Ae),"validate-event":!1,onInput:ln=>Bn(ln,"min"),onChange:ln=>Sr(ln,"min")},null,8,["disabled","placeholder","class","model-value","onInput","onChange"])],2),Wr((Z(),ue("span",{class:ge(w(W).e("time-picker-wrap"))},[st(w(nl),{size:"small",class:ge(w(W).e("editor")),disabled:w(G).selecting,placeholder:w(ce)("el.datepicker.startTime"),"model-value":w(We),"validate-event":!1,onFocus:ln=>pn.value=!0,onInput:ln=>Ur(ln,"min"),onChange:ln=>Kn(ln,"min")},null,8,["class","disabled","placeholder","model-value","onFocus","onInput","onChange"]),st(w(Db),{visible:pn.value,format:w(at),"datetime-role":"start","parsed-value":z.value,onPick:ui},null,8,["visible","format","parsed-value"])],2)),[[w(yh),Nn]])],2),ae("span",null,[st(w(rr),null,{default:mt(()=>[st(w(il))]),_:1})]),ae("span",{class:ge([w(W).e("editors-wrap"),"is-right"])},[ae("span",{class:ge(w(W).e("time-picker-wrap"))},[st(w(nl),{size:"small",class:ge(w(W).e("editor")),disabled:w(G).selecting,placeholder:w(ce)("el.datepicker.endDate"),"model-value":w(Ve),readonly:!w(N),"validate-event":!1,onInput:ln=>Bn(ln,"max"),onChange:ln=>Sr(ln,"max")},null,8,["class","disabled","placeholder","model-value","readonly","onInput","onChange"])],2),Wr((Z(),ue("span",{class:ge(w(W).e("time-picker-wrap"))},[st(w(nl),{size:"small",class:ge(w(W).e("editor")),disabled:w(G).selecting,placeholder:w(ce)("el.datepicker.endTime"),"model-value":w(ft),readonly:!w(N),"validate-event":!1,onFocus:ln=>w(N)&&(Vn.value=!0),onInput:ln=>Ur(ln,"max"),onChange:ln=>Kn(ln,"max")},null,8,["class","disabled","placeholder","model-value","readonly","onFocus","onInput","onChange"]),st(w(Db),{"datetime-role":"end",visible:Vn.value,format:w(at),"parsed-value":F.value,onPick:wr},null,8,["visible","format","parsed-value"])],2)),[[w(yh),Ot]])],2)],2)):At("v-if",!0),ae("div",{class:ge([[w(ie).e("content"),w(W).e("content")],"is-left"])},[ae("div",{class:ge(w(W).e("header"))},[ae("button",{type:"button",class:ge([w(ie).e("icon-btn"),"d-arrow-left"]),"aria-label":w(ce)("el.datepicker.prevYear"),onClick:Ct},[It(yt.$slots,"prev-year",{},()=>[st(w(rr),null,{default:mt(()=>[st(w(mh))]),_:1})])],10,["aria-label"]),ae("button",{type:"button",class:ge([w(ie).e("icon-btn"),"arrow-left"]),"aria-label":w(ce)("el.datepicker.prevMonth"),onClick:gt},[It(yt.$slots,"prev-month",{},()=>[st(w(rr),null,{default:mt(()=>[st(w(ph))]),_:1})])],10,["aria-label"]),yt.unlinkPanels?(Z(),ue("button",{key:0,type:"button",disabled:!w(Qt),class:ge([[w(ie).e("icon-btn"),{"is-disabled":!w(Qt)}],"d-arrow-right"]),"aria-label":w(ce)("el.datepicker.nextYear"),onClick:xn},[It(yt.$slots,"next-year",{},()=>[st(w(rr),null,{default:mt(()=>[st(w(gh))]),_:1})])],10,["disabled","aria-label"])):At("v-if",!0),yt.unlinkPanels?(Z(),ue("button",{key:1,type:"button",disabled:!w(an),class:ge([[w(ie).e("icon-btn"),{"is-disabled":!w(an)}],"arrow-right"]),"aria-label":w(ce)("el.datepicker.nextMonth"),onClick:Ht},[It(yt.$slots,"next-month",{},()=>[st(w(rr),null,{default:mt(()=>[st(w(il))]),_:1})])],10,["disabled","aria-label"])):At("v-if",!0),ae("div",null,gn(w(ye)),1)],2),st(d6,{"selection-mode":"range",date:z.value,"min-date":w(N),"max-date":w(q),"range-state":w(G),"disabled-date":w(m),"cell-class-name":w(b),onChangerange:w(Y),onPick:fn,onSelect:w(he)},null,8,["date","min-date","max-date","range-state","disabled-date","cell-class-name","onChangerange","onSelect"])],2),ae("div",{class:ge([[w(ie).e("content"),w(W).e("content")],"is-right"])},[ae("div",{class:ge(w(W).e("header"))},[yt.unlinkPanels?(Z(),ue("button",{key:0,type:"button",disabled:!w(Qt),class:ge([[w(ie).e("icon-btn"),{"is-disabled":!w(Qt)}],"d-arrow-left"]),"aria-label":w(ce)("el.datepicker.prevYear"),onClick:le},[It(yt.$slots,"prev-year",{},()=>[st(w(rr),null,{default:mt(()=>[st(w(mh))]),_:1})])],10,["disabled","aria-label"])):At("v-if",!0),yt.unlinkPanels?(Z(),ue("button",{key:1,type:"button",disabled:!w(an),class:ge([[w(ie).e("icon-btn"),{"is-disabled":!w(an)}],"arrow-left"]),"aria-label":w(ce)("el.datepicker.prevMonth"),onClick:nt},[It(yt.$slots,"prev-month",{},()=>[st(w(rr),null,{default:mt(()=>[st(w(ph))]),_:1})])],10,["disabled","aria-label"])):At("v-if",!0),ae("button",{type:"button","aria-label":w(ce)("el.datepicker.nextYear"),class:ge([w(ie).e("icon-btn"),"d-arrow-right"]),onClick:Ke},[It(yt.$slots,"next-year",{},()=>[st(w(rr),null,{default:mt(()=>[st(w(gh))]),_:1})])],10,["aria-label"]),ae("button",{type:"button",class:ge([w(ie).e("icon-btn"),"arrow-right"]),"aria-label":w(ce)("el.datepicker.nextMonth"),onClick:Lt},[It(yt.$slots,"next-month",{},()=>[st(w(rr),null,{default:mt(()=>[st(w(il))]),_:1})])],10,["aria-label"]),ae("div",null,gn(w(Ue)),1)],2),st(d6,{"selection-mode":"range",date:F.value,"min-date":w(N),"max-date":w(q),"range-state":w(G),"disabled-date":w(m),"cell-class-name":w(b),onChangerange:w(Y),onPick:fn,onSelect:w(he)},null,8,["date","min-date","max-date","range-state","disabled-date","cell-class-name","onChangerange","onSelect"])],2)],2)],2),w(rn)?(Z(),ue("div",{key:0,class:ge(w(ie).e("footer"))},[w(E)?(Z(),Bt(w(ua),{key:0,text:"",size:"small",class:ge(w(ie).e("link-btn")),onClick:Tr},{default:mt(()=>[ei(gn(w(ce)("el.datepicker.clear")),1)]),_:1},8,["class"])):At("v-if",!0),st(w(ua),{plain:"",size:"small",class:ge(w(ie).e("link-btn")),disabled:w(Zt),onClick:ln=>w(J)(!1)},{default:mt(()=>[ei(gn(w(ce)("el.datepicker.confirm")),1)]),_:1},8,["class","disabled","onClick"])],2)):At("v-if",!0)],2))}});var Xfe=En(Zfe,[["__file","panel-date-range.vue"]]);const Jfe=bn({..._8}),Qfe=["pick","set-picker-option","calendar-change"],epe=({unlinkPanels:e,leftDate:n,rightDate:s})=>{const{t:l}=Oi(),d=()=>{n.value=n.value.subtract(1,"year"),e.value||(s.value=s.value.subtract(1,"year"))},m=()=>{e.value||(n.value=n.value.add(1,"year")),s.value=s.value.add(1,"year")},b=()=>{n.value=n.value.add(1,"year")},r=()=>{s.value=s.value.subtract(1,"year")},E=se(()=>`${n.value.year()} ${l("el.datepicker.year")}`),M=se(()=>`${s.value.year()} ${l("el.datepicker.year")}`),A=se(()=>n.value.year()),P=se(()=>s.value.year()===n.value.year()?n.value.year()+1:s.value.year());return{leftPrevYear:d,rightNextYear:m,leftNextYear:b,rightPrevYear:r,leftLabel:E,rightLabel:M,leftYear:A,rightYear:P}},C2="year",tpe=xe({name:"DatePickerMonthRange"}),npe=xe({...tpe,props:Jfe,emits:Qfe,setup(e,{emit:n}){const s=e,{lang:l}=Oi(),d=Gn("EP_PICKER_BASE"),m=Gn("ElIsDefaultFormat"),{shortcuts:b,disabledDate:r}=d.props,E=cs(d.props,"format"),M=cs(d.props,"defaultValue"),A=Re(jr().locale(l.value)),P=Re(jr().locale(l.value).add(1,C2)),{minDate:D,maxDate:z,rangeState:F,ppNs:N,drpNs:q,handleChangeRange:G,handleRangeConfirm:ie,handleShortcutClick:W,onSelect:Y}=KD(s,{defaultValue:M,leftDate:A,rightDate:P,unit:C2,onParsedValueChanged:Ae}),J=se(()=>!!b.length),{leftPrevYear:re,rightNextYear:he,leftNextYear:fe,rightPrevYear:ce,leftLabel:me,rightLabel:we,leftYear:ye,rightYear:Ue}=epe({unlinkPanels:cs(s,"unlinkPanels"),leftDate:A,rightDate:P}),Ne=se(()=>s.unlinkPanels&&Ue.value>ye.value+1),Pe=(Ve,We=!0)=>{const ft=Ve.minDate,at=Ve.maxDate;z.value===at&&D.value===ft||(n("calendar-change",[ft.toDate(),at&&at.toDate()]),z.value=at,D.value=ft,We&&ie())},ve=()=>{A.value=y8(w(M),{lang:w(l),unit:"year",unlinkPanels:s.unlinkPanels})[0],P.value=A.value.add(1,"year"),n("pick",null)},$e=Ve=>mn(Ve)?Ve.map(We=>We.format(E.value)):Ve.format(E.value),Te=Ve=>Yg(Ve,E.value,l.value,m);function Ae(Ve,We){if(s.unlinkPanels&&We){const ft=Ve?.year()||0,at=We.year();P.value=ft===at?We.add(1,C2):We}else P.value=A.value.add(1,C2)}return n("set-picker-option",["isValidValue",Kg]),n("set-picker-option",["formatToString",$e]),n("set-picker-option",["parseUserInput",Te]),n("set-picker-option",["handleClear",ve]),(Ve,We)=>(Z(),ue("div",{class:ge([w(N).b(),w(q).b(),{"has-sidebar":!!Ve.$slots.sidebar||w(J)}])},[ae("div",{class:ge(w(N).e("body-wrapper"))},[It(Ve.$slots,"sidebar",{class:ge(w(N).e("sidebar"))}),w(J)?(Z(),ue("div",{key:0,class:ge(w(N).e("sidebar"))},[(Z(!0),ue(cr,null,Ei(w(b),(ft,at)=>(Z(),ue("button",{key:at,type:"button",class:ge(w(N).e("shortcut")),onClick:ct=>w(W)(ft)},gn(ft.text),11,["onClick"]))),128))],2)):At("v-if",!0),ae("div",{class:ge(w(N).e("body"))},[ae("div",{class:ge([[w(N).e("content"),w(q).e("content")],"is-left"])},[ae("div",{class:ge(w(q).e("header"))},[ae("button",{type:"button",class:ge([w(N).e("icon-btn"),"d-arrow-left"]),onClick:w(re)},[It(Ve.$slots,"prev-year",{},()=>[st(w(rr),null,{default:mt(()=>[st(w(mh))]),_:1})])],10,["onClick"]),Ve.unlinkPanels?(Z(),ue("button",{key:0,type:"button",disabled:!w(Ne),class:ge([[w(N).e("icon-btn"),{[w(N).is("disabled")]:!w(Ne)}],"d-arrow-right"]),onClick:w(fe)},[It(Ve.$slots,"next-year",{},()=>[st(w(rr),null,{default:mt(()=>[st(w(gh))]),_:1})])],10,["disabled","onClick"])):At("v-if",!0),ae("div",null,gn(w(me)),1)],2),st(h6,{"selection-mode":"range",date:A.value,"min-date":w(D),"max-date":w(z),"range-state":w(F),"disabled-date":w(r),onChangerange:w(G),onPick:Pe,onSelect:w(Y)},null,8,["date","min-date","max-date","range-state","disabled-date","onChangerange","onSelect"])],2),ae("div",{class:ge([[w(N).e("content"),w(q).e("content")],"is-right"])},[ae("div",{class:ge(w(q).e("header"))},[Ve.unlinkPanels?(Z(),ue("button",{key:0,type:"button",disabled:!w(Ne),class:ge([[w(N).e("icon-btn"),{"is-disabled":!w(Ne)}],"d-arrow-left"]),onClick:w(ce)},[It(Ve.$slots,"prev-year",{},()=>[st(w(rr),null,{default:mt(()=>[st(w(mh))]),_:1})])],10,["disabled","onClick"])):At("v-if",!0),ae("button",{type:"button",class:ge([w(N).e("icon-btn"),"d-arrow-right"]),onClick:w(he)},[It(Ve.$slots,"next-year",{},()=>[st(w(rr),null,{default:mt(()=>[st(w(gh))]),_:1})])],10,["onClick"]),ae("div",null,gn(w(we)),1)],2),st(h6,{"selection-mode":"range",date:P.value,"min-date":w(D),"max-date":w(z),"range-state":w(F),"disabled-date":w(r),onChangerange:w(G),onPick:Pe,onSelect:w(Y)},null,8,["date","min-date","max-date","range-state","disabled-date","onChangerange","onSelect"])],2)],2)],2)],2))}});var rpe=En(npe,[["__file","panel-month-range.vue"]]);const ipe=bn({..._8}),spe=["pick","set-picker-option","calendar-change"],ope=({unlinkPanels:e,leftDate:n,rightDate:s})=>{const l=()=>{n.value=n.value.subtract(10,"year"),e.value||(s.value=s.value.subtract(10,"year"))},d=()=>{e.value||(n.value=n.value.add(10,"year")),s.value=s.value.add(10,"year")},m=()=>{n.value=n.value.add(10,"year")},b=()=>{s.value=s.value.subtract(10,"year")},r=se(()=>{const P=Math.floor(n.value.year()/10)*10;return`${P}-${P+9}`}),E=se(()=>{const P=Math.floor(s.value.year()/10)*10;return`${P}-${P+9}`}),M=se(()=>Math.floor(n.value.year()/10)*10+9),A=se(()=>Math.floor(s.value.year()/10)*10);return{leftPrevYear:l,rightNextYear:d,leftNextYear:m,rightPrevYear:b,leftLabel:r,rightLabel:E,leftYear:M,rightYear:A}},rA="year",ape=xe({name:"DatePickerYearRange"}),lpe=xe({...ape,props:ipe,emits:spe,setup(e,{emit:n}){const s=e,{lang:l}=Oi(),d=Re(jr().locale(l.value)),m=Re(d.value.add(10,"year")),{pickerNs:b}=Gn(Px),r=dn("date-range-picker"),E=Gn("isDefaultFormat"),M=se(()=>!!Pe.length),A=se(()=>[b.b(),r.b(),{"has-sidebar":!!qo().sidebar||M.value}]),P=se(()=>({content:[b.e("content"),r.e("content"),"is-left"],arrowLeftBtn:[b.e("icon-btn"),"d-arrow-left"],arrowRightBtn:[b.e("icon-btn"),{[b.is("disabled")]:!re.value},"d-arrow-right"]})),D=se(()=>({content:[b.e("content"),r.e("content"),"is-right"],arrowLeftBtn:[b.e("icon-btn"),{"is-disabled":!re.value},"d-arrow-left"],arrowRightBtn:[b.e("icon-btn"),"d-arrow-right"]})),z=WD(l),{leftPrevYear:F,rightNextYear:N,leftNextYear:q,rightPrevYear:G,leftLabel:ie,rightLabel:W,leftYear:Y,rightYear:J}=ope({unlinkPanels:cs(s,"unlinkPanels"),leftDate:d,rightDate:m}),re=se(()=>s.unlinkPanels&&J.value>Y.value+1),he=Re(),fe=Re(),ce=Re({endDate:null,selecting:!1}),me=ct=>{ce.value=ct},we=(ct,Mt=!0)=>{const Ct=ct.minDate,gt=ct.maxDate;fe.value===gt&&he.value===Ct||(n("calendar-change",[Ct.toDate(),gt&&gt.toDate()]),fe.value=gt,he.value=Ct,Mt&&ye())},ye=(ct=!1)=>{Kg([he.value,fe.value])&&n("pick",[he.value,fe.value],ct)},Ue=ct=>{ce.value.selecting=ct,ct||(ce.value.endDate=null)},Ne=Gn("EP_PICKER_BASE"),{shortcuts:Pe,disabledDate:ve}=Ne.props,$e=cs(Ne.props,"format"),Te=cs(Ne.props,"defaultValue"),Ae=()=>{let ct;if(mn(Te.value)){const Mt=jr(Te.value[0]);let Ct=jr(Te.value[1]);return s.unlinkPanels||(Ct=Mt.add(10,rA)),[Mt,Ct]}else Te.value?ct=jr(Te.value):ct=jr();return ct=ct.locale(l.value),[ct,ct.add(10,rA)]};on(()=>Te.value,ct=>{if(ct){const Mt=Ae();d.value=Mt[0],m.value=Mt[1]}},{immediate:!0}),on(()=>s.parsedValue,ct=>{if(ct&&ct.length===2)if(he.value=ct[0],fe.value=ct[1],d.value=he.value,s.unlinkPanels&&fe.value){const Mt=he.value.year(),Ct=fe.value.year();m.value=Mt===Ct?fe.value.add(10,"year"):fe.value}else m.value=d.value.add(10,"year");else{const Mt=Ae();he.value=void 0,fe.value=void 0,d.value=Mt[0],m.value=Mt[1]}},{immediate:!0});const Ve=ct=>Yg(ct,$e.value,l.value,E),We=ct=>mn(ct)?ct.map(Mt=>Mt.format($e.value)):ct.format($e.value),ft=ct=>Kg(ct)&&(ve?!ve(ct[0].toDate())&&!ve(ct[1].toDate()):!0),at=()=>{const ct=Ae();d.value=ct[0],m.value=ct[1],fe.value=void 0,he.value=void 0,n("pick",null)};return n("set-picker-option",["isValidValue",ft]),n("set-picker-option",["parseUserInput",Ve]),n("set-picker-option",["formatToString",We]),n("set-picker-option",["handleClear",at]),(ct,Mt)=>(Z(),ue("div",{class:ge(w(A))},[ae("div",{class:ge(w(b).e("body-wrapper"))},[It(ct.$slots,"sidebar",{class:ge(w(b).e("sidebar"))}),w(M)?(Z(),ue("div",{key:0,class:ge(w(b).e("sidebar"))},[(Z(!0),ue(cr,null,Ei(w(Pe),(Ct,gt)=>(Z(),ue("button",{key:gt,type:"button",class:ge(w(b).e("shortcut")),onClick:Ke=>w(z)(Ct)},gn(Ct.text),11,["onClick"]))),128))],2)):At("v-if",!0),ae("div",{class:ge(w(b).e("body"))},[ae("div",{class:ge(w(P).content)},[ae("div",{class:ge(w(r).e("header"))},[ae("button",{type:"button",class:ge(w(P).arrowLeftBtn),onClick:w(F)},[It(ct.$slots,"prev-year",{},()=>[st(w(rr),null,{default:mt(()=>[st(w(mh))]),_:1})])],10,["onClick"]),ct.unlinkPanels?(Z(),ue("button",{key:0,type:"button",disabled:!w(re),class:ge(w(P).arrowRightBtn),onClick:w(q)},[It(ct.$slots,"next-year",{},()=>[st(w(rr),null,{default:mt(()=>[st(w(gh))]),_:1})])],10,["disabled","onClick"])):At("v-if",!0),ae("div",null,gn(w(ie)),1)],2),st(f6,{"selection-mode":"range",date:d.value,"min-date":he.value,"max-date":fe.value,"range-state":ce.value,"disabled-date":w(ve),onChangerange:me,onPick:we,onSelect:Ue},null,8,["date","min-date","max-date","range-state","disabled-date"])],2),ae("div",{class:ge(w(D).content)},[ae("div",{class:ge(w(r).e("header"))},[ct.unlinkPanels?(Z(),ue("button",{key:0,type:"button",disabled:!w(re),class:ge(w(D).arrowLeftBtn),onClick:w(G)},[It(ct.$slots,"prev-year",{},()=>[st(w(rr),null,{default:mt(()=>[st(w(mh))]),_:1})])],10,["disabled","onClick"])):At("v-if",!0),ae("button",{type:"button",class:ge(w(D).arrowRightBtn),onClick:w(N)},[It(ct.$slots,"next-year",{},()=>[st(w(rr),null,{default:mt(()=>[st(w(gh))]),_:1})])],10,["onClick"]),ae("div",null,gn(w(W)),1)],2),st(f6,{"selection-mode":"range",date:m.value,"min-date":he.value,"max-date":fe.value,"range-state":ce.value,"disabled-date":w(ve),onChangerange:me,onPick:we,onSelect:Ue},null,8,["date","min-date","max-date","range-state","disabled-date"])],2)],2)],2)],2))}});var upe=En(lpe,[["__file","panel-year-range.vue"]]);const cpe=function(e){switch(e){case"daterange":case"datetimerange":return Xfe;case"monthrange":return rpe;case"yearrange":return upe;default:return Kfe}};jr.extend(fD);jr.extend(Khe);jr.extend(p8);jr.extend(Jhe);jr.extend(nfe);jr.extend(ofe);jr.extend(cfe);jr.extend(pfe);var dpe=xe({name:"ElDatePicker",install:null,props:Lfe,emits:[Nr],setup(e,{expose:n,emit:s,slots:l}){const d=dn("picker-panel"),m=se(()=>!e.format);Ti("ElIsDefaultFormat",m),Ti("ElPopperOptions",ts(cs(e,"popperOptions"))),Ti(Px,{slots:l,pickerNs:d});const b=Re();n({focus:()=>{var M;(M=b.value)==null||M.focus()},blur:()=>{var M;(M=b.value)==null||M.blur()},handleOpen:()=>{var M;(M=b.value)==null||M.handleOpen()},handleClose:()=>{var M;(M=b.value)==null||M.handleClose()}});const E=M=>{s(Nr,M)};return()=>{var M;const A=(M=e.format)!=null?M:mfe[e.type]||fg,P=cpe(e.type);return st($D,pi(e,{format:A,type:e.type,ref:b,"onUpdate:modelValue":E}),{default:D=>st(P,D,{"prev-month":l["prev-month"],"next-month":l["next-month"],"prev-year":l["prev-year"],"next-year":l["next-year"]}),"range-separator":l["range-separator"]})}}});const hpe=Gr(dpe),x8=Symbol("elDescriptions");var K_=xe({name:"ElDescriptionsCell",props:{cell:{type:Object},tag:{type:String,default:"td"},type:{type:String}},setup(){return{descriptions:Gn(x8,{})}},render(){var e;const n=uce(this.cell),s=(((e=this.cell)==null?void 0:e.dirs)||[]).map(G=>{const{dir:ie,arg:W,modifiers:Y,value:J}=G;return[ie,J,W,Y]}),{border:l,direction:d}=this.descriptions,m=d==="vertical",b=()=>{var G,ie,W;return((W=(ie=(G=this.cell)==null?void 0:G.children)==null?void 0:ie.label)==null?void 0:W.call(ie))||n.label},r=()=>{var G,ie,W;return(W=(ie=(G=this.cell)==null?void 0:G.children)==null?void 0:ie.default)==null?void 0:W.call(ie)},E=n.span,M=n.rowspan,A=n.align?`is-${n.align}`:"",P=n.labelAlign?`is-${n.labelAlign}`:A,D=n.className,z=n.labelClassName,F=this.type==="label"&&(n.labelWidth||this.descriptions.labelWidth)||n.width,N={width:ho(F),minWidth:ho(n.minWidth)},q=dn("descriptions");switch(this.type){case"label":return Wr(xr(this.tag,{style:N,class:[q.e("cell"),q.e("label"),q.is("bordered-label",l),q.is("vertical-label",m),P,z],colSpan:m?E:1,rowspan:m?1:M},b()),s);case"content":return Wr(xr(this.tag,{style:N,class:[q.e("cell"),q.e("content"),q.is("bordered-content",l),q.is("vertical-content",m),A,D],colSpan:m?E:E*2-1,rowspan:m?M*2-1:M},r()),s);default:{const G=b(),ie={},W=ho(n.labelWidth||this.descriptions.labelWidth);return W&&(ie.width=W,ie.display="inline-block"),Wr(xr("td",{style:N,class:[q.e("cell"),A],colSpan:E,rowspan:M},[ea(G)?void 0:xr("span",{style:ie,class:[q.e("label"),z]},G),xr("span",{class:[q.e("content"),D]},r())]),s)}}}});const fpe=bn({row:{type:wt(Array),default:()=>[]}}),ppe=xe({name:"ElDescriptionsRow"}),mpe=xe({...ppe,props:fpe,setup(e){const n=Gn(x8,{});return(s,l)=>w(n).direction==="vertical"?(Z(),ue(cr,{key:0},[ae("tr",null,[(Z(!0),ue(cr,null,Ei(s.row,(d,m)=>(Z(),Bt(w(K_),{key:`tr1-${m}`,cell:d,tag:"th",type:"label"},null,8,["cell"]))),128))]),ae("tr",null,[(Z(!0),ue(cr,null,Ei(s.row,(d,m)=>(Z(),Bt(w(K_),{key:`tr2-${m}`,cell:d,tag:"td",type:"content"},null,8,["cell"]))),128))])],64)):(Z(),ue("tr",{key:1},[(Z(!0),ue(cr,null,Ei(s.row,(d,m)=>(Z(),ue(cr,{key:`tr3-${m}`},[w(n).border?(Z(),ue(cr,{key:0},[st(w(K_),{cell:d,tag:"td",type:"label"},null,8,["cell"]),st(w(K_),{cell:d,tag:"td",type:"content"},null,8,["cell"])],64)):(Z(),Bt(w(K_),{key:1,cell:d,tag:"td",type:"both"},null,8,["cell"]))],64))),128))]))}});var gpe=En(mpe,[["__file","descriptions-row.vue"]]);const _pe=bn({border:Boolean,column:{type:Number,default:3},direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},size:Fo,title:{type:String,default:""},extra:{type:String,default:""},labelWidth:{type:[String,Number],default:""}}),YD="ElDescriptionsItem",vpe=xe({name:"ElDescriptions"}),ype=xe({...vpe,props:_pe,setup(e){const n=e,s=dn("descriptions"),l=Lo(),d=qo();Ti(x8,n);const m=se(()=>[s.b(),s.m(l.value)]),b=(E,M,A,P=!1)=>(E.props||(E.props={}),M>A&&(E.props.span=A),P&&(E.props.span=M),E),r=()=>{if(!d.default)return[];const E=ah(d.default()).filter(F=>{var N;return((N=F?.type)==null?void 0:N.name)===YD}),M=[];let A=[],P=n.column,D=0;const z=[];return E.forEach((F,N)=>{var q,G,ie;const W=((q=F.props)==null?void 0:q.span)||1,Y=((G=F.props)==null?void 0:G.rowspan)||1,J=M.length;if(z[J]||(z[J]=0),Y>1)for(let re=1;re<Y;re++)z[ie=J+re]||(z[ie]=0),z[J+re]++,D++;if(z[J]>0&&(P-=z[J],z[J]=0),N<E.length-1&&(D+=W>P?P:W),N===E.length-1){const re=n.column-D%n.column;A.push(b(F,re,P,!0)),M.push(A);return}W<P?(P-=W,A.push(F)):(A.push(b(F,W,P)),M.push(A),P=n.column,A=[])}),M};return(E,M)=>(Z(),ue("div",{class:ge(w(m))},[E.title||E.extra||E.$slots.title||E.$slots.extra?(Z(),ue("div",{key:0,class:ge(w(s).e("header"))},[ae("div",{class:ge(w(s).e("title"))},[It(E.$slots,"title",{},()=>[ei(gn(E.title),1)])],2),ae("div",{class:ge(w(s).e("extra"))},[It(E.$slots,"extra",{},()=>[ei(gn(E.extra),1)])],2)],2)):At("v-if",!0),ae("div",{class:ge(w(s).e("body"))},[ae("table",{class:ge([w(s).e("table"),w(s).is("bordered",E.border)])},[ae("tbody",null,[(Z(!0),ue(cr,null,Ei(r(),(A,P)=>(Z(),Bt(gpe,{key:P,row:A},null,8,["row"]))),128))])],2)],2)],2))}});var bpe=En(ype,[["__file","description.vue"]]);const xpe=bn({label:{type:String,default:""},span:{type:Number,default:1},rowspan:{type:Number,default:1},width:{type:[String,Number],default:""},minWidth:{type:[String,Number],default:""},labelWidth:{type:[String,Number],default:""},align:{type:String,default:"left"},labelAlign:{type:String,default:""},className:{type:String,default:""},labelClassName:{type:String,default:""}}),ZD=xe({name:YD,props:xpe}),wpe=Gr(bpe,{DescriptionsItem:ZD}),Spe=ao(ZD),w8=e=>{if(!e)return{onClick:ys,onMousedown:ys,onMouseup:ys};let n=!1,s=!1;return{onClick:b=>{n&&s&&e(b),n=s=!1},onMousedown:b=>{n=b.target===b.currentTarget},onMouseup:b=>{s=b.target===b.currentTarget}}},Cpe=bn({mask:{type:Boolean,default:!0},customMaskEvent:Boolean,overlayClass:{type:wt([String,Array,Object])},zIndex:{type:wt([String,Number])}}),Epe={click:e=>e instanceof MouseEvent},Tpe="overlay";var Ipe=xe({name:"ElOverlay",props:Cpe,emits:Epe,setup(e,{slots:n,emit:s}){const l=dn(Tpe),d=E=>{s("click",E)},{onClick:m,onMousedown:b,onMouseup:r}=w8(e.customMaskEvent?void 0:d);return()=>e.mask?st("div",{class:[l.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:m,onMousedown:b,onMouseup:r},[It(n,"default")],Cu.STYLE|Cu.CLASS|Cu.PROPS,["onClick","onMouseup","onMousedown"]):xr("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[It(n,"default")])}});const S8=Ipe,XD=Symbol("dialogInjectionKey"),JD=bn({center:Boolean,alignCenter:Boolean,closeIcon:{type:bs},draggable:Boolean,overflow:Boolean,fullscreen:Boolean,headerClass:String,bodyClass:String,footerClass:String,showClose:{type:Boolean,default:!0},title:{type:String,default:""},ariaLevel:{type:String,default:"2"}}),kpe={close:()=>!0},QD=(e,n,s,l)=>{const d={offsetX:0,offsetY:0},m=(P,D)=>{if(e.value){const{offsetX:z,offsetY:F}=d,N=e.value.getBoundingClientRect(),q=N.left,G=N.top,ie=N.width,W=N.height,Y=document.documentElement.clientWidth,J=document.documentElement.clientHeight,re=-q+z,he=-G+F,fe=Y-q-ie+z,ce=J-G-W+F;l?.value||(P=Math.min(Math.max(P,re),fe),D=Math.min(Math.max(D,he),ce)),d.offsetX=P,d.offsetY=D,e.value.style.transform=`translate(${ho(P)}, ${ho(D)})`}},b=P=>{const D=P.clientX,z=P.clientY,{offsetX:F,offsetY:N}=d,q=ie=>{const W=F+ie.clientX-D,Y=N+ie.clientY-z;m(W,Y)},G=()=>{document.removeEventListener("mousemove",q),document.removeEventListener("mouseup",G)};document.addEventListener("mousemove",q),document.addEventListener("mouseup",G)},r=()=>{n.value&&e.value&&(n.value.addEventListener("mousedown",b),window.addEventListener("resize",A))},E=()=>{n.value&&e.value&&(n.value.removeEventListener("mousedown",b),window.removeEventListener("resize",A))},M=()=>{d.offsetX=0,d.offsetY=0,e.value&&(e.value.style.transform="")},A=()=>{const{offsetX:P,offsetY:D}=d;m(P,D)};return Zr(()=>{Da(()=>{s.value?r():E()})}),Ls(()=>{E()}),{resetPosition:M,updatePosition:A}},Lx=(...e)=>n=>{e.forEach(s=>{hr(s)?s(n):s.value=n})},Mpe=xe({name:"ElDialogContent"}),Ape=xe({...Mpe,props:JD,emits:kpe,setup(e,{expose:n}){const s=e,{t:l}=Oi(),{Close:d}=IO,{dialogRef:m,headerRef:b,bodyId:r,ns:E,style:M}=Gn(XD),{focusTrapRef:A}=Gn(QS),P=se(()=>[E.b(),E.is("fullscreen",s.fullscreen),E.is("draggable",s.draggable),E.is("align-center",s.alignCenter),{[E.m("center")]:s.center}]),D=Lx(A,m),z=se(()=>s.draggable),F=se(()=>s.overflow),{resetPosition:N,updatePosition:q}=QD(m,b,z,F);return n({resetPosition:N,updatePosition:q}),(G,ie)=>(Z(),ue("div",{ref:w(D),class:ge(w(P)),style:fr(w(M)),tabindex:"-1"},[ae("header",{ref_key:"headerRef",ref:b,class:ge([w(E).e("header"),G.headerClass,{"show-close":G.showClose}])},[It(G.$slots,"header",{},()=>[ae("span",{role:"heading","aria-level":G.ariaLevel,class:ge(w(E).e("title"))},gn(G.title),11,["aria-level"])]),G.showClose?(Z(),ue("button",{key:0,"aria-label":w(l)("el.dialog.close"),class:ge(w(E).e("headerbtn")),type:"button",onClick:W=>G.$emit("close")},[st(w(rr),{class:ge(w(E).e("close"))},{default:mt(()=>[(Z(),Bt(si(G.closeIcon||w(d))))]),_:1},8,["class"])],10,["aria-label","onClick"])):At("v-if",!0)],2),ae("div",{id:w(r),class:ge([w(E).e("body"),G.bodyClass])},[It(G.$slots,"default")],10,["id"]),G.$slots.footer?(Z(),ue("footer",{key:0,class:ge([w(E).e("footer"),G.footerClass])},[It(G.$slots,"footer")],2)):At("v-if",!0)],6))}});var Rpe=En(Ape,[["__file","dialog-content.vue"]]);const ez=bn({...JD,appendToBody:Boolean,appendTo:{type:Ax.to.type,default:"body"},beforeClose:{type:wt(Function)},destroyOnClose:Boolean,closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:Boolean,modalClass:String,headerClass:String,bodyClass:String,footerClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:Boolean,headerAriaLevel:{type:String,default:"2"}}),tz={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[Nr]:e=>Ts(e),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},C8=(e,n={})=>{Hs(e)||No("[useLockscreen]","You need to pass a ref param to this function");const s=n.ns||dn("popup"),l=se(()=>s.bm("parent","hidden"));if(!Pi||Nl(document.body,l.value))return;let d=0,m=!1,b="0";const r=()=>{setTimeout(()=>{typeof document>"u"||m&&document&&(document.body.style.width=b,rl(document.body,l.value))},200)};on(e,E=>{if(!E){r();return}m=!Nl(document.body,l.value),m&&(b=document.body.style.width,Tu(document.body,l.value)),d=rO(s.namespace.value);const M=document.documentElement.clientHeight<document.body.scrollHeight,A=sh(document.body,"overflowY");d>0&&(M||A==="scroll")&&m&&(document.body.style.width=`calc(100% - ${d}px)`)}),hR(()=>r())},nz=(e,n)=>{var s;const d=oi().emit,{nextZIndex:m}=u0();let b="";const r=Ea(),E=Ea(),M=Re(!1),A=Re(!1),P=Re(!1),D=Re((s=e.zIndex)!=null?s:m());let z,F;const N=yx("namespace",dv),q=se(()=>{const Pe={},ve=`--${N.value}-dialog`;return e.fullscreen||(e.top&&(Pe[`${ve}-margin-top`]=e.top),e.width&&(Pe[`${ve}-width`]=ho(e.width))),Pe}),G=se(()=>e.alignCenter?{display:"flex"}:{});function ie(){d("opened")}function W(){d("closed"),d(Nr,!1),e.destroyOnClose&&(P.value=!1)}function Y(){d("close")}function J(){F?.(),z?.(),e.openDelay&&e.openDelay>0?{stop:z}=Up(()=>ce(),e.openDelay):ce()}function re(){z?.(),F?.(),e.closeDelay&&e.closeDelay>0?{stop:F}=Up(()=>me(),e.closeDelay):me()}function he(){function Pe(ve){ve||(A.value=!0,M.value=!1)}e.beforeClose?e.beforeClose(Pe):re()}function fe(){e.closeOnClickModal&&he()}function ce(){Pi&&(M.value=!0)}function me(){M.value=!1}function we(){d("openAutoFocus")}function ye(){d("closeAutoFocus")}function Ue(Pe){var ve;((ve=Pe.detail)==null?void 0:ve.focusReason)==="pointer"&&Pe.preventDefault()}e.lockScroll&&C8(M);function Ne(){e.closeOnPressEscape&&he()}return on(()=>e.modelValue,Pe=>{Pe?(A.value=!1,J(),P.value=!0,D.value=BL(e.zIndex)?m():D.value++,dr(()=>{d("open"),n.value&&(n.value.parentElement.scrollTop=0,n.value.parentElement.scrollLeft=0,n.value.scrollTop=0)})):M.value&&re()}),on(()=>e.fullscreen,Pe=>{n.value&&(Pe?(b=n.value.style.transform,n.value.style.transform=""):n.value.style.transform=b)}),Zr(()=>{e.modelValue&&(M.value=!0,P.value=!0,J())}),{afterEnter:ie,afterLeave:W,beforeLeave:Y,handleClose:he,onModalClick:fe,close:re,doClose:me,onOpenAutoFocus:we,onCloseAutoFocus:ye,onCloseRequested:Ne,onFocusoutPrevented:Ue,titleId:r,bodyId:E,closed:A,style:q,overlayDialogStyle:G,rendered:P,visible:M,zIndex:D}},Ppe=xe({name:"ElDialog",inheritAttrs:!1}),Lpe=xe({...Ppe,props:ez,emits:tz,setup(e,{expose:n}){const s=e,l=qo();ch({scope:"el-dialog",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/dialog.html#slots"},se(()=>!!l.title));const d=dn("dialog"),m=Re(),b=Re(),r=Re(),{visible:E,titleId:M,bodyId:A,style:P,overlayDialogStyle:D,rendered:z,zIndex:F,afterEnter:N,afterLeave:q,beforeLeave:G,handleClose:ie,onModalClick:W,onOpenAutoFocus:Y,onCloseAutoFocus:J,onCloseRequested:re,onFocusoutPrevented:he}=nz(s,m);Ti(XD,{dialogRef:m,headerRef:b,bodyId:A,ns:d,rendered:z,style:P});const fe=w8(W),ce=se(()=>s.draggable&&!s.fullscreen);return n({visible:E,dialogContentRef:r,resetPosition:()=>{var we;(we=r.value)==null||we.resetPosition()},handleClose:ie}),(we,ye)=>(Z(),Bt(w(f0),{to:we.appendTo,disabled:we.appendTo!=="body"?!1:!we.appendToBody},{default:mt(()=>[st(ha,{name:"dialog-fade",onAfterEnter:w(N),onAfterLeave:w(q),onBeforeLeave:w(G),persisted:""},{default:mt(()=>[Wr(st(w(S8),{"custom-mask-event":"",mask:we.modal,"overlay-class":we.modalClass,"z-index":w(F)},{default:mt(()=>[ae("div",{role:"dialog","aria-modal":"true","aria-label":we.title||void 0,"aria-labelledby":we.title?void 0:w(M),"aria-describedby":w(A),class:ge(`${w(d).namespace.value}-overlay-dialog`),style:fr(w(D)),onClick:w(fe).onClick,onMousedown:w(fe).onMousedown,onMouseup:w(fe).onMouseup},[st(w(h0),{loop:"",trapped:w(E),"focus-start-el":"container",onFocusAfterTrapped:w(Y),onFocusAfterReleased:w(J),onFocusoutPrevented:w(he),onReleaseRequested:w(re)},{default:mt(()=>[w(z)?(Z(),Bt(Rpe,pi({key:0,ref_key:"dialogContentRef",ref:r},we.$attrs,{center:we.center,"align-center":we.alignCenter,"close-icon":we.closeIcon,draggable:w(ce),overflow:we.overflow,fullscreen:we.fullscreen,"header-class":we.headerClass,"body-class":we.bodyClass,"footer-class":we.footerClass,"show-close":we.showClose,title:we.title,"aria-level":we.headerAriaLevel,onClose:w(ie)}),cu({header:mt(()=>[we.$slots.title?It(we.$slots,"title",{key:1}):It(we.$slots,"header",{key:0,close:w(ie),titleId:w(M),titleClass:w(d).e("title")})]),default:mt(()=>[It(we.$slots,"default")]),_:2},[we.$slots.footer?{name:"footer",fn:mt(()=>[It(we.$slots,"footer")])}:void 0]),1040,["center","align-center","close-icon","draggable","overflow","fullscreen","header-class","body-class","footer-class","show-close","title","aria-level","onClose"])):At("v-if",!0)]),_:3},8,["trapped","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])],46,["aria-label","aria-labelledby","aria-describedby","onClick","onMousedown","onMouseup"])]),_:3},8,["mask","overlay-class","z-index"]),[[Ki,w(E)]])]),_:3},8,["onAfterEnter","onAfterLeave","onBeforeLeave"])]),_:3},8,["to","disabled"]))}});var Ope=En(Lpe,[["__file","dialog.vue"]]);const Dpe=Gr(Ope),zpe=bn({direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},contentPosition:{type:String,values:["left","center","right"],default:"center"},borderStyle:{type:wt(String),default:"solid"}}),Npe=xe({name:"ElDivider"}),Fpe=xe({...Npe,props:zpe,setup(e){const n=e,s=dn("divider"),l=se(()=>s.cssVar({"border-style":n.borderStyle}));return(d,m)=>(Z(),ue("div",{class:ge([w(s).b(),w(s).m(d.direction)]),style:fr(w(l)),role:"separator"},[d.$slots.default&&d.direction!=="vertical"?(Z(),ue("div",{key:0,class:ge([w(s).e("text"),w(s).is(d.contentPosition)])},[It(d.$slots,"default")],2)):At("v-if",!0)],6))}});var Bpe=En(Fpe,[["__file","divider.vue"]]);const rz=Gr(Bpe),Vpe=bn({...ez,direction:{type:String,default:"rtl",values:["ltr","rtl","ttb","btt"]},size:{type:[String,Number],default:"30%"},withHeader:{type:Boolean,default:!0},modalFade:{type:Boolean,default:!0},headerAriaLevel:{type:String,default:"2"}}),$pe=tz,Hpe=xe({name:"ElDrawer",inheritAttrs:!1}),Upe=xe({...Hpe,props:Vpe,emits:$pe,setup(e,{expose:n}){const s=e,l=qo();ch({scope:"el-drawer",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/drawer.html#slots"},se(()=>!!l.title));const d=Re(),m=Re(),b=dn("drawer"),{t:r}=Oi(),{afterEnter:E,afterLeave:M,beforeLeave:A,visible:P,rendered:D,titleId:z,bodyId:F,zIndex:N,onModalClick:q,onOpenAutoFocus:G,onCloseAutoFocus:ie,onFocusoutPrevented:W,onCloseRequested:Y,handleClose:J}=nz(s,d),re=se(()=>s.direction==="rtl"||s.direction==="ltr"),he=se(()=>ho(s.size));return n({handleClose:J,afterEnter:E,afterLeave:M}),(fe,ce)=>(Z(),Bt(w(f0),{to:fe.appendTo,disabled:fe.appendTo!=="body"?!1:!fe.appendToBody},{default:mt(()=>[st(ha,{name:w(b).b("fade"),onAfterEnter:w(E),onAfterLeave:w(M),onBeforeLeave:w(A),persisted:""},{default:mt(()=>[Wr(st(w(S8),{mask:fe.modal,"overlay-class":fe.modalClass,"z-index":w(N),onClick:w(q)},{default:mt(()=>[st(w(h0),{loop:"",trapped:w(P),"focus-trap-el":d.value,"focus-start-el":m.value,onFocusAfterTrapped:w(G),onFocusAfterReleased:w(ie),onFocusoutPrevented:w(W),onReleaseRequested:w(Y)},{default:mt(()=>[ae("div",pi({ref_key:"drawerRef",ref:d,"aria-modal":"true","aria-label":fe.title||void 0,"aria-labelledby":fe.title?void 0:w(z),"aria-describedby":w(F)},fe.$attrs,{class:[w(b).b(),fe.direction,w(P)&&"open"],style:w(re)?"width: "+w(he):"height: "+w(he),role:"dialog",onClick:Er(()=>{},["stop"])}),[ae("span",{ref_key:"focusStartRef",ref:m,class:ge(w(b).e("sr-focus")),tabindex:"-1"},null,2),fe.withHeader?(Z(),ue("header",{key:0,class:ge([w(b).e("header"),fe.headerClass])},[fe.$slots.title?It(fe.$slots,"title",{key:1},()=>[At(" DEPRECATED SLOT ")]):It(fe.$slots,"header",{key:0,close:w(J),titleId:w(z),titleClass:w(b).e("title")},()=>[fe.$slots.title?At("v-if",!0):(Z(),ue("span",{key:0,id:w(z),role:"heading","aria-level":fe.headerAriaLevel,class:ge(w(b).e("title"))},gn(fe.title),11,["id","aria-level"]))]),fe.showClose?(Z(),ue("button",{key:2,"aria-label":w(r)("el.drawer.close"),class:ge(w(b).e("close-btn")),type:"button",onClick:w(J)},[st(w(rr),{class:ge(w(b).e("close"))},{default:mt(()=>[st(w(du))]),_:1},8,["class"])],10,["aria-label","onClick"])):At("v-if",!0)],2)):At("v-if",!0),w(D)?(Z(),ue("div",{key:1,id:w(F),class:ge([w(b).e("body"),fe.bodyClass])},[It(fe.$slots,"default")],10,["id"])):At("v-if",!0),fe.$slots.footer?(Z(),ue("div",{key:2,class:ge([w(b).e("footer"),fe.footerClass])},[It(fe.$slots,"footer")],2)):At("v-if",!0)],16,["aria-label","aria-labelledby","aria-describedby","onClick"])]),_:3},8,["trapped","focus-trap-el","focus-start-el","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])]),_:3},8,["mask","overlay-class","z-index","onClick"]),[[Ki,w(P)]])]),_:3},8,["name","onAfterEnter","onAfterLeave","onBeforeLeave"])]),_:3},8,["to","disabled"]))}});var jpe=En(Upe,[["__file","drawer.vue"]]);const Gpe=Gr(jpe),qpe=xe({inheritAttrs:!1});function Wpe(e,n,s,l,d,m){return It(e.$slots,"default")}var Kpe=En(qpe,[["render",Wpe],["__file","collection.vue"]]);const Ype=xe({name:"ElCollectionItem",inheritAttrs:!1});function Zpe(e,n,s,l,d,m){return It(e.$slots,"default")}var Xpe=En(Ype,[["render",Zpe],["__file","collection-item.vue"]]);const iz="data-el-collection-item",sz=e=>{const n=`El${e}Collection`,s=`${n}Item`,l=Symbol(n),d=Symbol(s),m={...Kpe,name:n,setup(){const r=Re(),E=new Map;Ti(l,{itemMap:E,getItems:()=>{const A=w(r);if(!A)return[];const P=Array.from(A.querySelectorAll(`[${iz}]`));return[...E.values()].sort((z,F)=>P.indexOf(z.ref)-P.indexOf(F.ref))},collectionRef:r})}},b={...Xpe,name:s,setup(r,{attrs:E}){const M=Re(),A=Gn(l,void 0);Ti(d,{collectionItemRef:M}),Zr(()=>{const P=w(M);P&&A.itemMap.set(P,{ref:P,...E})}),Ls(()=>{const P=w(M);A.itemMap.delete(P)})}};return{COLLECTION_INJECTION_KEY:l,COLLECTION_ITEM_INJECTION_KEY:d,ElCollection:m,ElCollectionItem:b}},Jpe=bn({style:{type:wt([String,Array,Object])},currentTabId:{type:wt(String)},defaultCurrentTabId:String,loop:Boolean,dir:{type:String,values:["ltr","rtl"],default:"ltr"},orientation:{type:wt(String)},onBlur:Function,onFocus:Function,onMousedown:Function}),{ElCollection:Qpe,ElCollectionItem:eme,COLLECTION_INJECTION_KEY:E8,COLLECTION_ITEM_INJECTION_KEY:tme}=sz("RovingFocusGroup"),T8=Symbol("elRovingFocusGroup"),oz=Symbol("elRovingFocusGroupItem"),nme={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"},rme=(e,n)=>e,ime=(e,n,s)=>{const l=rme(e.code);return nme[l]},sme=(e,n)=>e.map((s,l)=>e[(l+n)%e.length]),I8=e=>{const{activeElement:n}=document;for(const s of e)if(s===n||(s.focus(),n!==document.activeElement))return},iA="currentTabIdChange",sA="rovingFocusGroup.entryFocus",ome={bubbles:!1,cancelable:!0},ame=xe({name:"ElRovingFocusGroupImpl",inheritAttrs:!1,props:Jpe,emits:[iA,"entryFocus"],setup(e,{emit:n}){var s;const l=Re((s=e.currentTabId||e.defaultCurrentTabId)!=null?s:null),d=Re(!1),m=Re(!1),b=Re(),{getItems:r}=Gn(E8,void 0),E=se(()=>[{outline:"none"},e.style]),M=N=>{n(iA,N)},A=()=>{d.value=!0},P=_o(N=>{var q;(q=e.onMousedown)==null||q.call(e,N)},()=>{m.value=!0}),D=_o(N=>{var q;(q=e.onFocus)==null||q.call(e,N)},N=>{const q=!w(m),{target:G,currentTarget:ie}=N;if(G===ie&&q&&!w(d)){const W=new Event(sA,ome);if(ie?.dispatchEvent(W),!W.defaultPrevented){const Y=r().filter(ce=>ce.focusable),J=Y.find(ce=>ce.active),re=Y.find(ce=>ce.id===w(l)),fe=[J,re,...Y].filter(Boolean).map(ce=>ce.ref);I8(fe)}}m.value=!1}),z=_o(N=>{var q;(q=e.onBlur)==null||q.call(e,N)},()=>{d.value=!1}),F=(...N)=>{n("entryFocus",...N)};Ti(T8,{currentTabbedId:n0(l),loop:cs(e,"loop"),tabIndex:se(()=>w(d)?-1:0),rovingFocusGroupRef:b,rovingFocusGroupRootStyle:E,orientation:cs(e,"orientation"),dir:cs(e,"dir"),onItemFocus:M,onItemShiftTab:A,onBlur:z,onFocus:D,onMousedown:P}),on(()=>e.currentTabId,N=>{l.value=N??null}),Is(b,sA,F)}});function lme(e,n,s,l,d,m){return It(e.$slots,"default")}var ume=En(ame,[["render",lme],["__file","roving-focus-group-impl.vue"]]);const cme=xe({name:"ElRovingFocusGroup",components:{ElFocusGroupCollection:Qpe,ElRovingFocusGroupImpl:ume}});function dme(e,n,s,l,d,m){const b=fi("el-roving-focus-group-impl"),r=fi("el-focus-group-collection");return Z(),Bt(r,null,{default:mt(()=>[st(b,iu(vd(e.$attrs)),{default:mt(()=>[It(e.$slots,"default")]),_:3},16)]),_:3})}var hme=En(cme,[["render",dme],["__file","roving-focus-group.vue"]]);const J2=bn({trigger:Ig.trigger,triggerKeys:{type:wt(Array),default:()=>[Un.enter,Un.numpadEnter,Un.space,Un.down]},effect:{...Ao.effect,default:"light"},type:{type:wt(String)},placement:{type:wt(String),default:"bottom"},popperOptions:{type:wt(Object),default:()=>({})},id:String,size:{type:String,default:""},splitButton:Boolean,hideOnClick:{type:Boolean,default:!0},loop:{type:Boolean,default:!0},showTimeout:{type:Number,default:150},hideTimeout:{type:Number,default:150},tabindex:{type:wt([Number,String]),default:0},maxHeight:{type:wt([Number,String]),default:""},popperClass:{type:String,default:""},disabled:Boolean,role:{type:String,values:RO,default:"menu"},buttonProps:{type:wt(Object)},teleported:Ao.teleported,persistent:{type:Boolean,default:!0}}),az=bn({command:{type:[Object,String,Number],default:()=>({})},disabled:Boolean,divided:Boolean,textValue:String,icon:{type:bs}}),fme=bn({onKeydown:{type:wt(Function)}}),pme=[Un.down,Un.pageDown,Un.home],lz=[Un.up,Un.pageUp,Un.end],mme=[...pme,...lz],{ElCollection:gme,ElCollectionItem:_me,COLLECTION_INJECTION_KEY:vme,COLLECTION_ITEM_INJECTION_KEY:yme}=sz("Dropdown"),Ox=Symbol("elDropdown"),{ButtonGroup:bme}=ua,xme=xe({name:"ElDropdown",components:{ElButton:ua,ElButtonGroup:bme,ElScrollbar:Id,ElDropdownCollection:gme,ElTooltip:Na,ElRovingFocusGroup:hme,ElOnlyChild:FO,ElIcon:rr,ArrowDown:Ed},props:J2,emits:["visible-change","click","command"],setup(e,{emit:n}){const s=oi(),l=dn("dropdown"),{t:d}=Oi(),m=Re(),b=Re(),r=Re(),E=Re(),M=Re(null),A=Re(null),P=Re(!1),D=se(()=>({maxHeight:ho(e.maxHeight)})),z=se(()=>[l.m(Y.value)]),F=se(()=>el(e.trigger)),N=Ea().value,q=se(()=>e.id||N);on([m,F],([ve,$e],[Te])=>{var Ae,Ve,We;(Ae=Te?.$el)!=null&&Ae.removeEventListener&&Te.$el.removeEventListener("pointerenter",re),(Ve=ve?.$el)!=null&&Ve.removeEventListener&&ve.$el.removeEventListener("pointerenter",re),(We=ve?.$el)!=null&&We.addEventListener&&$e.includes("hover")&&ve.$el.addEventListener("pointerenter",re)},{immediate:!0}),Ls(()=>{var ve,$e;($e=(ve=m.value)==null?void 0:ve.$el)!=null&&$e.removeEventListener&&m.value.$el.removeEventListener("pointerenter",re)});function G(){ie()}function ie(){var ve;(ve=r.value)==null||ve.onClose()}function W(){var ve;(ve=r.value)==null||ve.onOpen()}const Y=Lo();function J(...ve){n("command",...ve)}function re(){var ve,$e;($e=(ve=m.value)==null?void 0:ve.$el)==null||$e.focus()}function he(){}function fe(){const ve=w(E);F.value.includes("hover")&&ve?.focus(),A.value=null}function ce(ve){A.value=ve}function me(ve){P.value||(ve.preventDefault(),ve.stopImmediatePropagation())}function we(){n("visible-change",!0)}function ye(ve){var $e;ve?.type==="keydown"&&(($e=E.value)==null||$e.focus())}function Ue(){n("visible-change",!1)}return Ti(Ox,{contentRef:E,role:se(()=>e.role),triggerId:q,isUsingKeyboard:P,onItemEnter:he,onItemLeave:fe}),Ti("elDropdown",{instance:s,dropdownSize:Y,handleClick:G,commandHandler:J,trigger:cs(e,"trigger"),hideOnClick:cs(e,"hideOnClick")}),{t:d,ns:l,scrollbar:M,wrapStyle:D,dropdownTriggerKls:z,dropdownSize:Y,triggerId:q,currentTabId:A,handleCurrentTabIdChange:ce,handlerMainButtonClick:ve=>{n("click",ve)},handleEntryFocus:me,handleClose:ie,handleOpen:W,handleBeforeShowTooltip:we,handleShowTooltip:ye,handleBeforeHideTooltip:Ue,onFocusAfterTrapped:ve=>{var $e,Te;ve.preventDefault(),(Te=($e=E.value)==null?void 0:$e.focus)==null||Te.call($e,{preventScroll:!0})},popperRef:r,contentRef:E,triggeringElementRef:m,referenceElementRef:b}}});function wme(e,n,s,l,d,m){var b;const r=fi("el-dropdown-collection"),E=fi("el-roving-focus-group"),M=fi("el-scrollbar"),A=fi("el-only-child"),P=fi("el-tooltip"),D=fi("el-button"),z=fi("arrow-down"),F=fi("el-icon"),N=fi("el-button-group");return Z(),ue("div",{class:ge([e.ns.b(),e.ns.is("disabled",e.disabled)])},[st(P,{ref:"popperRef",role:e.role,effect:e.effect,"fallback-placements":["bottom","top"],"popper-options":e.popperOptions,"gpu-acceleration":!1,"hide-after":e.trigger==="hover"?e.hideTimeout:0,"manual-mode":!0,placement:e.placement,"popper-class":[e.ns.e("popper"),e.popperClass],"reference-element":(b=e.referenceElementRef)==null?void 0:b.$el,trigger:e.trigger,"trigger-keys":e.triggerKeys,"trigger-target-el":e.contentRef,"show-after":e.trigger==="hover"?e.showTimeout:0,"stop-popper-mouse-event":!1,"virtual-ref":e.triggeringElementRef,"virtual-triggering":e.splitButton,disabled:e.disabled,transition:`${e.ns.namespace.value}-zoom-in-top`,teleported:e.teleported,pure:"",persistent:e.persistent,onBeforeShow:e.handleBeforeShowTooltip,onShow:e.handleShowTooltip,onBeforeHide:e.handleBeforeHideTooltip},cu({content:mt(()=>[st(M,{ref:"scrollbar","wrap-style":e.wrapStyle,tag:"div","view-class":e.ns.e("list")},{default:mt(()=>[st(E,{loop:e.loop,"current-tab-id":e.currentTabId,orientation:"horizontal",onCurrentTabIdChange:e.handleCurrentTabIdChange,onEntryFocus:e.handleEntryFocus},{default:mt(()=>[st(r,null,{default:mt(()=>[It(e.$slots,"dropdown")]),_:3})]),_:3},8,["loop","current-tab-id","onCurrentTabIdChange","onEntryFocus"])]),_:3},8,["wrap-style","view-class"])]),_:2},[e.splitButton?void 0:{name:"default",fn:mt(()=>[st(A,{id:e.triggerId,ref:"triggeringElementRef",role:"button",tabindex:e.tabindex},{default:mt(()=>[It(e.$slots,"default")]),_:3},8,["id","tabindex"])])}]),1032,["role","effect","popper-options","hide-after","placement","popper-class","reference-element","trigger","trigger-keys","trigger-target-el","show-after","virtual-ref","virtual-triggering","disabled","transition","teleported","persistent","onBeforeShow","onShow","onBeforeHide"]),e.splitButton?(Z(),Bt(N,{key:0},{default:mt(()=>[st(D,pi({ref:"referenceElementRef"},e.buttonProps,{size:e.dropdownSize,type:e.type,disabled:e.disabled,tabindex:e.tabindex,onClick:e.handlerMainButtonClick}),{default:mt(()=>[It(e.$slots,"default")]),_:3},16,["size","type","disabled","tabindex","onClick"]),st(D,pi({id:e.triggerId,ref:"triggeringElementRef"},e.buttonProps,{role:"button",size:e.dropdownSize,type:e.type,class:e.ns.e("caret-button"),disabled:e.disabled,tabindex:e.tabindex,"aria-label":e.t("el.dropdown.toggleDropdown")}),{default:mt(()=>[st(F,{class:ge(e.ns.e("icon"))},{default:mt(()=>[st(z)]),_:1},8,["class"])]),_:1},16,["id","size","type","class","disabled","tabindex","aria-label"])]),_:3})):At("v-if",!0)],2)}var Sme=En(xme,[["render",wme],["__file","dropdown.vue"]]);const Cme=xe({components:{ElRovingFocusCollectionItem:eme},props:{focusable:{type:Boolean,default:!0},active:{type:Boolean,default:!1}},emits:["mousedown","focus","keydown"],setup(e,{emit:n}){const{currentTabbedId:s,loop:l,onItemFocus:d,onItemShiftTab:m}=Gn(T8,void 0),{getItems:b}=Gn(E8,void 0),r=Ea(),E=Re(),M=_o(z=>{n("mousedown",z)},z=>{e.focusable?d(w(r)):z.preventDefault()}),A=_o(z=>{n("focus",z)},()=>{d(w(r))}),P=_o(z=>{n("keydown",z)},z=>{const{code:F,shiftKey:N,target:q,currentTarget:G}=z;if(F===Un.tab&&N){m();return}if(q!==G)return;const ie=ime(z);if(ie){z.preventDefault();let Y=b().filter(J=>J.focusable).map(J=>J.ref);switch(ie){case"last":{Y.reverse();break}case"prev":case"next":{ie==="prev"&&Y.reverse();const J=Y.indexOf(G);Y=l.value?sme(Y,J+1):Y.slice(J+1);break}}dr(()=>{I8(Y)})}}),D=se(()=>s.value===w(r));return Ti(oz,{rovingFocusGroupItemRef:E,tabIndex:se(()=>w(D)?0:-1),handleMousedown:M,handleFocus:A,handleKeydown:P}),{id:r,handleKeydown:P,handleFocus:A,handleMousedown:M}}});function Eme(e,n,s,l,d,m){const b=fi("el-roving-focus-collection-item");return Z(),Bt(b,{id:e.id,focusable:e.focusable,active:e.active},{default:mt(()=>[It(e.$slots,"default")]),_:3},8,["id","focusable","active"])}var Tme=En(Cme,[["render",Eme],["__file","roving-focus-item.vue"]]);const Ime=xe({name:"DropdownItemImpl",components:{ElIcon:rr},props:az,emits:["pointermove","pointerleave","click","clickimpl"],setup(e,{emit:n}){const s=dn("dropdown"),{role:l}=Gn(Ox,void 0),{collectionItemRef:d}=Gn(yme,void 0),{collectionItemRef:m}=Gn(tme,void 0),{rovingFocusGroupItemRef:b,tabIndex:r,handleFocus:E,handleKeydown:M,handleMousedown:A}=Gn(oz,void 0),P=Lx(d,m,b),D=se(()=>l.value==="menu"?"menuitem":l.value==="navigation"?"link":"button"),z=_o(F=>{if([Un.enter,Un.numpadEnter,Un.space].includes(F.code))return F.preventDefault(),F.stopImmediatePropagation(),n("clickimpl",F),!0},M);return{ns:s,itemRef:P,dataset:{[iz]:""},role:D,tabIndex:r,handleFocus:E,handleKeydown:z,handleMousedown:A}}});function kme(e,n,s,l,d,m){const b=fi("el-icon");return Z(),ue(cr,null,[e.divided?(Z(),ue("li",{key:0,role:"separator",class:ge(e.ns.bem("menu","item","divided"))},null,2)):At("v-if",!0),ae("li",pi({ref:e.itemRef},{...e.dataset,...e.$attrs},{"aria-disabled":e.disabled,class:[e.ns.be("menu","item"),e.ns.is("disabled",e.disabled)],tabindex:e.tabIndex,role:e.role,onClick:r=>e.$emit("clickimpl",r),onFocus:e.handleFocus,onKeydown:Er(e.handleKeydown,["self"]),onMousedown:e.handleMousedown,onPointermove:r=>e.$emit("pointermove",r),onPointerleave:r=>e.$emit("pointerleave",r)}),[e.icon?(Z(),Bt(b,{key:0},{default:mt(()=>[(Z(),Bt(si(e.icon)))]),_:1})):At("v-if",!0),It(e.$slots,"default")],16,["aria-disabled","tabindex","role","onClick","onFocus","onKeydown","onMousedown","onPointermove","onPointerleave"])],64)}var Mme=En(Ime,[["render",kme],["__file","dropdown-item-impl.vue"]]);const uz=()=>{const e=Gn("elDropdown",{}),n=se(()=>e?.dropdownSize);return{elDropdown:e,_elDropdownSize:n}},Ame=xe({name:"ElDropdownItem",components:{ElDropdownCollectionItem:_me,ElRovingFocusItem:Tme,ElDropdownItemImpl:Mme},inheritAttrs:!1,props:az,emits:["pointermove","pointerleave","click"],setup(e,{emit:n,attrs:s}){const{elDropdown:l}=uz(),d=oi(),m=Re(null),b=se(()=>{var z,F;return(F=(z=w(m))==null?void 0:z.textContent)!=null?F:""}),{onItemEnter:r,onItemLeave:E}=Gn(Ox,void 0),M=_o(z=>(n("pointermove",z),z.defaultPrevented),TM(z=>{if(e.disabled){E(z);return}const F=z.currentTarget;F===document.activeElement||F.contains(document.activeElement)||(r(z),z.defaultPrevented||F?.focus())})),A=_o(z=>(n("pointerleave",z),z.defaultPrevented),TM(E)),P=_o(z=>{if(!e.disabled)return n("click",z),z.type!=="keydown"&&z.defaultPrevented},z=>{var F,N,q;if(e.disabled){z.stopImmediatePropagation();return}(F=l?.hideOnClick)!=null&&F.value&&((N=l.handleClick)==null||N.call(l)),(q=l.commandHandler)==null||q.call(l,e.command,d,z)}),D=se(()=>({...e,...s}));return{handleClick:P,handlePointerMove:M,handlePointerLeave:A,textContent:b,propsAndAttrs:D}}});function Rme(e,n,s,l,d,m){var b;const r=fi("el-dropdown-item-impl"),E=fi("el-roving-focus-item"),M=fi("el-dropdown-collection-item");return Z(),Bt(M,{disabled:e.disabled,"text-value":(b=e.textValue)!=null?b:e.textContent},{default:mt(()=>[st(E,{focusable:!e.disabled},{default:mt(()=>[st(r,pi(e.propsAndAttrs,{onPointerleave:e.handlePointerLeave,onPointermove:e.handlePointerMove,onClickimpl:e.handleClick}),{default:mt(()=>[It(e.$slots,"default")]),_:3},16,["onPointerleave","onPointermove","onClickimpl"])]),_:3},8,["focusable"])]),_:3},8,["disabled","text-value"])}var cz=En(Ame,[["render",Rme],["__file","dropdown-item.vue"]]);const Pme=xe({name:"ElDropdownMenu",props:fme,setup(e){const n=dn("dropdown"),{_elDropdownSize:s}=uz(),l=s.value,{focusTrapRef:d,onKeydown:m}=Gn(QS,void 0),{contentRef:b,role:r,triggerId:E}=Gn(Ox,void 0),{collectionRef:M,getItems:A}=Gn(vme,void 0),{rovingFocusGroupRef:P,rovingFocusGroupRootStyle:D,tabIndex:z,onBlur:F,onFocus:N,onMousedown:q}=Gn(T8,void 0),{collectionRef:G}=Gn(E8,void 0),ie=se(()=>[n.b("menu"),n.bm("menu",l?.value)]),W=Lx(b,M,d,P,G),Y=_o(re=>{var he;(he=e.onKeydown)==null||he.call(e,re)},re=>{const{currentTarget:he,code:fe,target:ce}=re;if(he.contains(ce),Un.tab===fe&&re.stopImmediatePropagation(),re.preventDefault(),ce!==w(b)||!mme.includes(fe))return;const we=A().filter(ye=>!ye.disabled).map(ye=>ye.ref);lz.includes(fe)&&we.reverse(),I8(we)});return{size:l,rovingFocusGroupRootStyle:D,tabIndex:z,dropdownKls:ie,role:r,triggerId:E,dropdownListWrapperRef:W,handleKeydown:re=>{Y(re),m(re)},onBlur:F,onFocus:N,onMousedown:q}}});function Lme(e,n,s,l,d,m){return Z(),ue("ul",{ref:e.dropdownListWrapperRef,class:ge(e.dropdownKls),style:fr(e.rovingFocusGroupRootStyle),tabindex:-1,role:e.role,"aria-labelledby":e.triggerId,onBlur:e.onBlur,onFocus:e.onFocus,onKeydown:Er(e.handleKeydown,["self"]),onMousedown:Er(e.onMousedown,["self"])},[It(e.$slots,"default")],46,["role","aria-labelledby","onBlur","onFocus","onKeydown","onMousedown"])}var dz=En(Pme,[["render",Lme],["__file","dropdown-menu.vue"]]);const Ome=Gr(Sme,{DropdownItem:cz,DropdownMenu:dz}),Dme=ao(cz),zme=ao(dz),Nme=xe({name:"ImgEmpty"}),Fme=xe({...Nme,setup(e){const n=dn("empty"),s=Ea();return(l,d)=>(Z(),ue("svg",{viewBox:"0 0 79 86",version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},[ae("defs",null,[ae("linearGradient",{id:`linearGradient-1-${w(s)}`,x1:"38.8503086%",y1:"0%",x2:"61.1496914%",y2:"100%"},[ae("stop",{"stop-color":`var(${w(n).cssVarBlockName("fill-color-1")})`,offset:"0%"},null,8,["stop-color"]),ae("stop",{"stop-color":`var(${w(n).cssVarBlockName("fill-color-4")})`,offset:"100%"},null,8,["stop-color"])],8,["id"]),ae("linearGradient",{id:`linearGradient-2-${w(s)}`,x1:"0%",y1:"9.5%",x2:"100%",y2:"90.5%"},[ae("stop",{"stop-color":`var(${w(n).cssVarBlockName("fill-color-1")})`,offset:"0%"},null,8,["stop-color"]),ae("stop",{"stop-color":`var(${w(n).cssVarBlockName("fill-color-6")})`,offset:"100%"},null,8,["stop-color"])],8,["id"]),ae("rect",{id:`path-3-${w(s)}`,x:"0",y:"0",width:"17",height:"36"},null,8,["id"])]),ae("g",{stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},[ae("g",{transform:"translate(-1268.000000, -535.000000)"},[ae("g",{transform:"translate(1268.000000, 535.000000)"},[ae("path",{d:"M39.5,86 C61.3152476,86 79,83.9106622 79,81.3333333 C79,78.7560045 57.3152476,78 35.5,78 C13.6847524,78 0,78.7560045 0,81.3333333 C0,83.9106622 17.6847524,86 39.5,86 Z",fill:`var(${w(n).cssVarBlockName("fill-color-3")})`},null,8,["fill"]),ae("polygon",{fill:`var(${w(n).cssVarBlockName("fill-color-7")})`,transform:"translate(27.500000, 51.500000) scale(1, -1) translate(-27.500000, -51.500000) ",points:"13 58 53 58 42 45 2 45"},null,8,["fill"]),ae("g",{transform:"translate(34.500000, 31.500000) scale(-1, 1) rotate(-25.000000) translate(-34.500000, -31.500000) translate(7.000000, 10.000000)"},[ae("polygon",{fill:`var(${w(n).cssVarBlockName("fill-color-7")})`,transform:"translate(11.500000, 5.000000) scale(1, -1) translate(-11.500000, -5.000000) ",points:"2.84078316e-14 3 18 3 23 7 5 7"},null,8,["fill"]),ae("polygon",{fill:`var(${w(n).cssVarBlockName("fill-color-5")})`,points:"-3.69149156e-15 7 38 7 38 43 -3.69149156e-15 43"},null,8,["fill"]),ae("rect",{fill:`url(#linearGradient-1-${w(s)})`,transform:"translate(46.500000, 25.000000) scale(-1, 1) translate(-46.500000, -25.000000) ",x:"38",y:"7",width:"17",height:"36"},null,8,["fill"]),ae("polygon",{fill:`var(${w(n).cssVarBlockName("fill-color-2")})`,transform:"translate(39.500000, 3.500000) scale(-1, 1) translate(-39.500000, -3.500000) ",points:"24 7 41 7 55 -3.63806207e-12 38 -3.63806207e-12"},null,8,["fill"])]),ae("rect",{fill:`url(#linearGradient-2-${w(s)})`,x:"13",y:"45",width:"40",height:"36"},null,8,["fill"]),ae("g",{transform:"translate(53.000000, 45.000000)"},[ae("use",{fill:`var(${w(n).cssVarBlockName("fill-color-8")})`,transform:"translate(8.500000, 18.000000) scale(-1, 1) translate(-8.500000, -18.000000) ","xlink:href":`#path-3-${w(s)}`},null,8,["fill","xlink:href"]),ae("polygon",{fill:`var(${w(n).cssVarBlockName("fill-color-9")})`,mask:`url(#mask-4-${w(s)})`,transform:"translate(12.000000, 9.000000) scale(-1, 1) translate(-12.000000, -9.000000) ",points:"7 0 24 0 20 18 7 16.5"},null,8,["fill","mask"])]),ae("polygon",{fill:`var(${w(n).cssVarBlockName("fill-color-2")})`,transform:"translate(66.000000, 51.500000) scale(-1, 1) translate(-66.000000, -51.500000) ",points:"62 45 79 45 70 58 53 58"},null,8,["fill"])])])])]))}});var Bme=En(Fme,[["__file","img-empty.vue"]]);const Vme=bn({image:{type:String,default:""},imageSize:Number,description:{type:String,default:""}}),$me=xe({name:"ElEmpty"}),Hme=xe({...$me,props:Vme,setup(e){const n=e,{t:s}=Oi(),l=dn("empty"),d=se(()=>n.description||s("el.table.emptyText")),m=se(()=>({width:ho(n.imageSize)}));return(b,r)=>(Z(),ue("div",{class:ge(w(l).b())},[ae("div",{class:ge(w(l).e("image")),style:fr(w(m))},[b.image?(Z(),ue("img",{key:0,src:b.image,ondragstart:"return false"},null,8,["src"])):It(b.$slots,"image",{key:1},()=>[st(Bme)])],6),ae("div",{class:ge(w(l).e("description"))},[b.$slots.description?It(b.$slots,"description",{key:0}):(Z(),ue("p",{key:1},gn(w(d)),1))],2),b.$slots.default?(Z(),ue("div",{key:0,class:ge(w(l).e("bottom"))},[It(b.$slots,"default")],2)):At("v-if",!0)],2))}});var Ume=En(Hme,[["__file","empty.vue"]]);const hz=Gr(Ume),jme=bn({size:{type:String,values:Cd},disabled:Boolean}),Gme=bn({...jme,model:Object,rules:{type:wt(Object)},labelPosition:{type:String,values:["left","right","top"],default:"right"},requireAsteriskPosition:{type:String,values:["left","right"],default:"left"},labelWidth:{type:[String,Number],default:""},labelSuffix:{type:String,default:""},inline:Boolean,inlineMessage:Boolean,statusIcon:Boolean,showMessage:{type:Boolean,default:!0},validateOnRuleChange:{type:Boolean,default:!0},hideRequiredAsterisk:Boolean,scrollToError:Boolean,scrollIntoViewOptions:{type:[Object,Boolean]}}),qme={validate:(e,n,s)=>(mn(e)||ir(e))&&Ts(n)&&ir(s)};function Wme(){const e=Re([]),n=se(()=>{if(!e.value.length)return"0";const m=Math.max(...e.value);return m?`${m}px`:""});function s(m){const b=e.value.indexOf(m);return b===-1&&n.value,b}function l(m,b){if(m&&b){const r=s(b);e.value.splice(r,1,m)}else m&&e.value.push(m)}function d(m){const b=s(m);b>-1&&e.value.splice(b,1)}return{autoLabelWidth:n,registerLabelWidth:l,deregisterLabelWidth:d}}const E2=(e,n)=>{const s=el(n);return s.length>0?e.filter(l=>l.prop&&s.includes(l.prop)):e},Kme="ElForm",Yme=xe({name:Kme}),Zme=xe({...Yme,props:Gme,emits:qme,setup(e,{expose:n,emit:s}){const l=e,d=[],m=Lo(),b=dn("form"),r=se(()=>{const{labelPosition:W,inline:Y}=l;return[b.b(),b.m(m.value||"default"),{[b.m(`label-${W}`)]:W,[b.m("inline")]:Y}]}),E=W=>d.find(Y=>Y.prop===W),M=W=>{d.push(W)},A=W=>{W.prop&&d.splice(d.indexOf(W),1)},P=(W=[])=>{l.model&&E2(d,W).forEach(Y=>Y.resetField())},D=(W=[])=>{E2(d,W).forEach(Y=>Y.clearValidate())},z=se(()=>!!l.model),F=W=>{if(d.length===0)return[];const Y=E2(d,W);return Y.length?Y:[]},N=async W=>G(void 0,W),q=async(W=[])=>{if(!z.value)return!1;const Y=F(W);if(Y.length===0)return!0;let J={};for(const re of Y)try{await re.validate(""),re.validateState==="error"&&re.resetField()}catch(he){J={...J,...he}}return Object.keys(J).length===0?!0:Promise.reject(J)},G=async(W=[],Y)=>{const J=!hr(Y);try{const re=await q(W);return re===!0&&await Y?.(re),re}catch(re){if(re instanceof Error)throw re;const he=re;return l.scrollToError&&ie(Object.keys(he)[0]),await Y?.(!1,he),J&&Promise.reject(he)}},ie=W=>{var Y;const J=E2(d,W)[0];J&&((Y=J.$el)==null||Y.scrollIntoView(l.scrollIntoViewOptions))};return on(()=>l.rules,()=>{l.validateOnRuleChange&&N().catch(W=>void 0)},{deep:!0,flush:"post"}),Ti(Jp,ts({...da(l),emit:s,resetFields:P,clearValidate:D,validateField:G,getField:E,addField:M,removeField:A,...Wme()})),n({validate:N,validateField:G,resetFields:P,clearValidate:D,scrollToField:ie,fields:d}),(W,Y)=>(Z(),ue("form",{class:ge(w(r))},[It(W.$slots,"default")],2))}});var Xme=En(Zme,[["__file","form.vue"]]);function Rp(){return Rp=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var s=arguments[n];for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&(e[l]=s[l])}return e},Rp.apply(this,arguments)}function Jme(e,n){e.prototype=Object.create(n.prototype),e.prototype.constructor=e,Fv(e,n)}function p6(e){return p6=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(s){return s.__proto__||Object.getPrototypeOf(s)},p6(e)}function Fv(e,n){return Fv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(l,d){return l.__proto__=d,l},Fv(e,n)}function Qme(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Q2(e,n,s){return Qme()?Q2=Reflect.construct.bind():Q2=function(d,m,b){var r=[null];r.push.apply(r,m);var E=Function.bind.apply(d,r),M=new E;return b&&Fv(M,b.prototype),M},Q2.apply(null,arguments)}function ege(e){return Function.toString.call(e).indexOf("[native code]")!==-1}function m6(e){var n=typeof Map=="function"?new Map:void 0;return m6=function(l){if(l===null||!ege(l))return l;if(typeof l!="function")throw new TypeError("Super expression must either be null or a function");if(typeof n<"u"){if(n.has(l))return n.get(l);n.set(l,d)}function d(){return Q2(l,arguments,p6(this).constructor)}return d.prototype=Object.create(l.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),Fv(d,l)},m6(e)}var tge=/%[sdj%]/g,nge=function(){};function g6(e){if(!e||!e.length)return null;var n={};return e.forEach(function(s){var l=s.field;n[l]=n[l]||[],n[l].push(s)}),n}function ou(e){for(var n=arguments.length,s=new Array(n>1?n-1:0),l=1;l<n;l++)s[l-1]=arguments[l];var d=0,m=s.length;if(typeof e=="function")return e.apply(null,s);if(typeof e=="string"){var b=e.replace(tge,function(r){if(r==="%%")return"%";if(d>=m)return r;switch(r){case"%s":return String(s[d++]);case"%d":return Number(s[d++]);case"%j":try{return JSON.stringify(s[d++])}catch{return"[Circular]"}break;default:return r}});return b}return e}function rge(e){return e==="string"||e==="url"||e==="hex"||e==="email"||e==="date"||e==="pattern"}function fa(e,n){return!!(e==null||n==="array"&&Array.isArray(e)&&!e.length||rge(n)&&typeof e=="string"&&!e)}function ige(e,n,s){var l=[],d=0,m=e.length;function b(r){l.push.apply(l,r||[]),d++,d===m&&s(l)}e.forEach(function(r){n(r,b)})}function oA(e,n,s){var l=0,d=e.length;function m(b){if(b&&b.length){s(b);return}var r=l;l=l+1,r<d?n(e[r],m):s([])}m([])}function sge(e){var n=[];return Object.keys(e).forEach(function(s){n.push.apply(n,e[s]||[])}),n}var aA=function(e){Jme(n,e);function n(s,l){var d;return d=e.call(this,"Async Validation Error")||this,d.errors=s,d.fields=l,d}return n}(m6(Error));function oge(e,n,s,l,d){if(n.first){var m=new Promise(function(D,z){var F=function(G){return l(G),G.length?z(new aA(G,g6(G))):D(d)},N=sge(e);oA(N,s,F)});return m.catch(function(D){return D}),m}var b=n.firstFields===!0?Object.keys(e):n.firstFields||[],r=Object.keys(e),E=r.length,M=0,A=[],P=new Promise(function(D,z){var F=function(q){if(A.push.apply(A,q),M++,M===E)return l(A),A.length?z(new aA(A,g6(A))):D(d)};r.length||(l(A),D(d)),r.forEach(function(N){var q=e[N];b.indexOf(N)!==-1?oA(q,s,F):ige(q,s,F)})});return P.catch(function(D){return D}),P}function age(e){return!!(e&&e.message!==void 0)}function lge(e,n){for(var s=e,l=0;l<n.length;l++){if(s==null)return s;s=s[n[l]]}return s}function lA(e,n){return function(s){var l;return e.fullFields?l=lge(n,e.fullFields):l=n[s.field||e.fullField],age(s)?(s.field=s.field||e.fullField,s.fieldValue=l,s):{message:typeof s=="function"?s():s,fieldValue:l,field:s.field||e.fullField}}}function uA(e,n){if(n){for(var s in n)if(n.hasOwnProperty(s)){var l=n[s];typeof l=="object"&&typeof e[s]=="object"?e[s]=Rp({},e[s],l):e[s]=l}}return e}var fz=function(n,s,l,d,m,b){n.required&&(!l.hasOwnProperty(n.field)||fa(s,b||n.type))&&d.push(ou(m.messages.required,n.fullField))},uge=function(n,s,l,d,m){(/^\s+$/.test(s)||s==="")&&d.push(ou(m.messages.whitespace,n.fullField))},T2,cge=function(){if(T2)return T2;var e="[a-fA-F\\d:]",n=function(Y){return Y&&Y.includeBoundaries?"(?:(?<=\\s|^)(?="+e+")|(?<="+e+")(?=\\s|$))":""},s="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",l="[a-fA-F\\d]{1,4}",d=(`
(?:
(?:`+l+":){7}(?:"+l+`|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8
(?:`+l+":){6}(?:"+s+"|:"+l+`|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4
(?:`+l+":){5}(?::"+s+"|(?::"+l+`){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4
(?:`+l+":){4}(?:(?::"+l+"){0,1}:"+s+"|(?::"+l+`){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4
(?:`+l+":){3}(?:(?::"+l+"){0,2}:"+s+"|(?::"+l+`){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4
(?:`+l+":){2}(?:(?::"+l+"){0,3}:"+s+"|(?::"+l+`){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4
(?:`+l+":){1}(?:(?::"+l+"){0,4}:"+s+"|(?::"+l+`){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4
(?::(?:(?::`+l+"){0,5}:"+s+"|(?::"+l+`){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4
)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1
`).replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),m=new RegExp("(?:^"+s+"$)|(?:^"+d+"$)"),b=new RegExp("^"+s+"$"),r=new RegExp("^"+d+"$"),E=function(Y){return Y&&Y.exact?m:new RegExp("(?:"+n(Y)+s+n(Y)+")|(?:"+n(Y)+d+n(Y)+")","g")};E.v4=function(W){return W&&W.exact?b:new RegExp(""+n(W)+s+n(W),"g")},E.v6=function(W){return W&&W.exact?r:new RegExp(""+n(W)+d+n(W),"g")};var M="(?:(?:[a-z]+:)?//)",A="(?:\\S+(?::\\S*)?@)?",P=E.v4().source,D=E.v6().source,z="(?:(?:[a-z\\u00a1-\\uffff0-9][-_]*)*[a-z\\u00a1-\\uffff0-9]+)",F="(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*",N="(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))",q="(?::\\d{2,5})?",G='(?:[/?#][^\\s"]*)?',ie="(?:"+M+"|www\\.)"+A+"(?:localhost|"+P+"|"+D+"|"+z+F+N+")"+q+G;return T2=new RegExp("(?:^"+ie+"$)","i"),T2},cA={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+\.)+[a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}))$/,hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},ev={integer:function(n){return ev.number(n)&&parseInt(n,10)===n},float:function(n){return ev.number(n)&&!ev.integer(n)},array:function(n){return Array.isArray(n)},regexp:function(n){if(n instanceof RegExp)return!0;try{return!!new RegExp(n)}catch{return!1}},date:function(n){return typeof n.getTime=="function"&&typeof n.getMonth=="function"&&typeof n.getYear=="function"&&!isNaN(n.getTime())},number:function(n){return isNaN(n)?!1:typeof n=="number"},object:function(n){return typeof n=="object"&&!ev.array(n)},method:function(n){return typeof n=="function"},email:function(n){return typeof n=="string"&&n.length<=320&&!!n.match(cA.email)},url:function(n){return typeof n=="string"&&n.length<=2048&&!!n.match(cge())},hex:function(n){return typeof n=="string"&&!!n.match(cA.hex)}},dge=function(n,s,l,d,m){if(n.required&&s===void 0){fz(n,s,l,d,m);return}var b=["integer","float","array","regexp","object","method","email","number","date","url","hex"],r=n.type;b.indexOf(r)>-1?ev[r](s)||d.push(ou(m.messages.types[r],n.fullField,n.type)):r&&typeof s!==n.type&&d.push(ou(m.messages.types[r],n.fullField,n.type))},hge=function(n,s,l,d,m){var b=typeof n.len=="number",r=typeof n.min=="number",E=typeof n.max=="number",M=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,A=s,P=null,D=typeof s=="number",z=typeof s=="string",F=Array.isArray(s);if(D?P="number":z?P="string":F&&(P="array"),!P)return!1;F&&(A=s.length),z&&(A=s.replace(M,"_").length),b?A!==n.len&&d.push(ou(m.messages[P].len,n.fullField,n.len)):r&&!E&&A<n.min?d.push(ou(m.messages[P].min,n.fullField,n.min)):E&&!r&&A>n.max?d.push(ou(m.messages[P].max,n.fullField,n.max)):r&&E&&(A<n.min||A>n.max)&&d.push(ou(m.messages[P].range,n.fullField,n.min,n.max))},ag="enum",fge=function(n,s,l,d,m){n[ag]=Array.isArray(n[ag])?n[ag]:[],n[ag].indexOf(s)===-1&&d.push(ou(m.messages[ag],n.fullField,n[ag].join(", ")))},pge=function(n,s,l,d,m){if(n.pattern){if(n.pattern instanceof RegExp)n.pattern.lastIndex=0,n.pattern.test(s)||d.push(ou(m.messages.pattern.mismatch,n.fullField,s,n.pattern));else if(typeof n.pattern=="string"){var b=new RegExp(n.pattern);b.test(s)||d.push(ou(m.messages.pattern.mismatch,n.fullField,s,n.pattern))}}},Ds={required:fz,whitespace:uge,type:dge,range:hge,enum:fge,pattern:pge},mge=function(n,s,l,d,m){var b=[],r=n.required||!n.required&&d.hasOwnProperty(n.field);if(r){if(fa(s,"string")&&!n.required)return l();Ds.required(n,s,d,b,m,"string"),fa(s,"string")||(Ds.type(n,s,d,b,m),Ds.range(n,s,d,b,m),Ds.pattern(n,s,d,b,m),n.whitespace===!0&&Ds.whitespace(n,s,d,b,m))}l(b)},gge=function(n,s,l,d,m){var b=[],r=n.required||!n.required&&d.hasOwnProperty(n.field);if(r){if(fa(s)&&!n.required)return l();Ds.required(n,s,d,b,m),s!==void 0&&Ds.type(n,s,d,b,m)}l(b)},_ge=function(n,s,l,d,m){var b=[],r=n.required||!n.required&&d.hasOwnProperty(n.field);if(r){if(s===""&&(s=void 0),fa(s)&&!n.required)return l();Ds.required(n,s,d,b,m),s!==void 0&&(Ds.type(n,s,d,b,m),Ds.range(n,s,d,b,m))}l(b)},vge=function(n,s,l,d,m){var b=[],r=n.required||!n.required&&d.hasOwnProperty(n.field);if(r){if(fa(s)&&!n.required)return l();Ds.required(n,s,d,b,m),s!==void 0&&Ds.type(n,s,d,b,m)}l(b)},yge=function(n,s,l,d,m){var b=[],r=n.required||!n.required&&d.hasOwnProperty(n.field);if(r){if(fa(s)&&!n.required)return l();Ds.required(n,s,d,b,m),fa(s)||Ds.type(n,s,d,b,m)}l(b)},bge=function(n,s,l,d,m){var b=[],r=n.required||!n.required&&d.hasOwnProperty(n.field);if(r){if(fa(s)&&!n.required)return l();Ds.required(n,s,d,b,m),s!==void 0&&(Ds.type(n,s,d,b,m),Ds.range(n,s,d,b,m))}l(b)},xge=function(n,s,l,d,m){var b=[],r=n.required||!n.required&&d.hasOwnProperty(n.field);if(r){if(fa(s)&&!n.required)return l();Ds.required(n,s,d,b,m),s!==void 0&&(Ds.type(n,s,d,b,m),Ds.range(n,s,d,b,m))}l(b)},wge=function(n,s,l,d,m){var b=[],r=n.required||!n.required&&d.hasOwnProperty(n.field);if(r){if(s==null&&!n.required)return l();Ds.required(n,s,d,b,m,"array"),s!=null&&(Ds.type(n,s,d,b,m),Ds.range(n,s,d,b,m))}l(b)},Sge=function(n,s,l,d,m){var b=[],r=n.required||!n.required&&d.hasOwnProperty(n.field);if(r){if(fa(s)&&!n.required)return l();Ds.required(n,s,d,b,m),s!==void 0&&Ds.type(n,s,d,b,m)}l(b)},Cge="enum",Ege=function(n,s,l,d,m){var b=[],r=n.required||!n.required&&d.hasOwnProperty(n.field);if(r){if(fa(s)&&!n.required)return l();Ds.required(n,s,d,b,m),s!==void 0&&Ds[Cge](n,s,d,b,m)}l(b)},Tge=function(n,s,l,d,m){var b=[],r=n.required||!n.required&&d.hasOwnProperty(n.field);if(r){if(fa(s,"string")&&!n.required)return l();Ds.required(n,s,d,b,m),fa(s,"string")||Ds.pattern(n,s,d,b,m)}l(b)},Ige=function(n,s,l,d,m){var b=[],r=n.required||!n.required&&d.hasOwnProperty(n.field);if(r){if(fa(s,"date")&&!n.required)return l();if(Ds.required(n,s,d,b,m),!fa(s,"date")){var E;s instanceof Date?E=s:E=new Date(s),Ds.type(n,E,d,b,m),E&&Ds.range(n,E.getTime(),d,b,m)}}l(b)},kge=function(n,s,l,d,m){var b=[],r=Array.isArray(s)?"array":typeof s;Ds.required(n,s,d,b,m,r),l(b)},d4=function(n,s,l,d,m){var b=n.type,r=[],E=n.required||!n.required&&d.hasOwnProperty(n.field);if(E){if(fa(s,b)&&!n.required)return l();Ds.required(n,s,d,r,m,b),fa(s,b)||Ds.type(n,s,d,r,m)}l(r)},Mge=function(n,s,l,d,m){var b=[],r=n.required||!n.required&&d.hasOwnProperty(n.field);if(r){if(fa(s)&&!n.required)return l();Ds.required(n,s,d,b,m)}l(b)},_v={string:mge,method:gge,number:_ge,boolean:vge,regexp:yge,integer:bge,float:xge,array:wge,object:Sge,enum:Ege,pattern:Tge,date:Ige,url:d4,hex:d4,email:d4,required:kge,any:Mge};function _6(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var n=JSON.parse(JSON.stringify(this));return n.clone=this.clone,n}}}var v6=_6(),cy=function(){function e(s){this.rules=null,this._messages=v6,this.define(s)}var n=e.prototype;return n.define=function(l){var d=this;if(!l)throw new Error("Cannot configure a schema with no rules");if(typeof l!="object"||Array.isArray(l))throw new Error("Rules must be an object");this.rules={},Object.keys(l).forEach(function(m){var b=l[m];d.rules[m]=Array.isArray(b)?b:[b]})},n.messages=function(l){return l&&(this._messages=uA(_6(),l)),this._messages},n.validate=function(l,d,m){var b=this;d===void 0&&(d={}),m===void 0&&(m=function(){});var r=l,E=d,M=m;if(typeof E=="function"&&(M=E,E={}),!this.rules||Object.keys(this.rules).length===0)return M&&M(null,r),Promise.resolve(r);function A(N){var q=[],G={};function ie(Y){if(Array.isArray(Y)){var J;q=(J=q).concat.apply(J,Y)}else q.push(Y)}for(var W=0;W<N.length;W++)ie(N[W]);q.length?(G=g6(q),M(q,G)):M(null,r)}if(E.messages){var P=this.messages();P===v6&&(P=_6()),uA(P,E.messages),E.messages=P}else E.messages=this.messages();var D={},z=E.keys||Object.keys(this.rules);z.forEach(function(N){var q=b.rules[N],G=r[N];q.forEach(function(ie){var W=ie;typeof W.transform=="function"&&(r===l&&(r=Rp({},r)),G=r[N]=W.transform(G)),typeof W=="function"?W={validator:W}:W=Rp({},W),W.validator=b.getValidationMethod(W),W.validator&&(W.field=N,W.fullField=W.fullField||N,W.type=b.getType(W),D[N]=D[N]||[],D[N].push({rule:W,value:G,source:r,field:N}))})});var F={};return oge(D,E,function(N,q){var G=N.rule,ie=(G.type==="object"||G.type==="array")&&(typeof G.fields=="object"||typeof G.defaultField=="object");ie=ie&&(G.required||!G.required&&N.value),G.field=N.field;function W(re,he){return Rp({},he,{fullField:G.fullField+"."+re,fullFields:G.fullFields?[].concat(G.fullFields,[re]):[re]})}function Y(re){re===void 0&&(re=[]);var he=Array.isArray(re)?re:[re];!E.suppressWarning&&he.length&&e.warning("async-validator:",he),he.length&&G.message!==void 0&&(he=[].concat(G.message));var fe=he.map(lA(G,r));if(E.first&&fe.length)return F[G.field]=1,q(fe);if(!ie)q(fe);else{if(G.required&&!N.value)return G.message!==void 0?fe=[].concat(G.message).map(lA(G,r)):E.error&&(fe=[E.error(G,ou(E.messages.required,G.field))]),q(fe);var ce={};G.defaultField&&Object.keys(N.value).map(function(ye){ce[ye]=G.defaultField}),ce=Rp({},ce,N.rule.fields);var me={};Object.keys(ce).forEach(function(ye){var Ue=ce[ye],Ne=Array.isArray(Ue)?Ue:[Ue];me[ye]=Ne.map(W.bind(null,ye))});var we=new e(me);we.messages(E.messages),N.rule.options&&(N.rule.options.messages=E.messages,N.rule.options.error=E.error),we.validate(N.value,N.rule.options||E,function(ye){var Ue=[];fe&&fe.length&&Ue.push.apply(Ue,fe),ye&&ye.length&&Ue.push.apply(Ue,ye),q(Ue.length?Ue:null)})}}var J;if(G.asyncValidator)J=G.asyncValidator(G,N.value,Y,N.source,E);else if(G.validator){try{J=G.validator(G,N.value,Y,N.source,E)}catch(re){console.error?.(re),E.suppressValidatorError||setTimeout(function(){throw re},0),Y(re.message)}J===!0?Y():J===!1?Y(typeof G.message=="function"?G.message(G.fullField||G.field):G.message||(G.fullField||G.field)+" fails"):J instanceof Array?Y(J):J instanceof Error&&Y(J.message)}J&&J.then&&J.then(function(){return Y()},function(re){return Y(re)})},function(N){A(N)},r)},n.getType=function(l){if(l.type===void 0&&l.pattern instanceof RegExp&&(l.type="pattern"),typeof l.validator!="function"&&l.type&&!_v.hasOwnProperty(l.type))throw new Error(ou("Unknown rule type %s",l.type));return l.type||"string"},n.getValidationMethod=function(l){if(typeof l.validator=="function")return l.validator;var d=Object.keys(l),m=d.indexOf("message");return m!==-1&&d.splice(m,1),d.length===1&&d[0]==="required"?_v.required:_v[this.getType(l)]||void 0},e}();cy.register=function(n,s){if(typeof s!="function")throw new Error("Cannot register a validator by type, validator is not a function");_v[n]=s};cy.warning=nge;cy.messages=v6;cy.validators=_v;const Age=["","error","validating","success"],Rge=bn({label:String,labelWidth:{type:[String,Number],default:""},labelPosition:{type:String,values:["left","right","top",""],default:""},prop:{type:wt([String,Array])},required:{type:Boolean,default:void 0},rules:{type:wt([Object,Array])},error:String,validateStatus:{type:String,values:Age},for:String,inlineMessage:{type:[String,Boolean],default:""},showMessage:{type:Boolean,default:!0},size:{type:String,values:Cd}}),dA="ElLabelWrap";var Pge=xe({name:dA,props:{isAutoWidth:Boolean,updateAll:Boolean},setup(e,{slots:n}){const s=Gn(Jp,void 0),l=Gn(xd);l||No(dA,"usage: <el-form-item><label-wrap /></el-form-item>");const d=dn("form"),m=Re(),b=Re(0),r=()=>{var A;if((A=m.value)!=null&&A.firstElementChild){const P=window.getComputedStyle(m.value.firstElementChild).width;return Math.ceil(Number.parseFloat(P))}else return 0},E=(A="update")=>{dr(()=>{n.default&&e.isAutoWidth&&(A==="update"?b.value=r():A==="remove"&&s?.deregisterLabelWidth(b.value))})},M=()=>E("update");return Zr(()=>{M()}),Ls(()=>{E("remove")}),yc(()=>M()),on(b,(A,P)=>{e.updateAll&&s?.registerLabelWidth(A,P)}),so(se(()=>{var A,P;return(P=(A=m.value)==null?void 0:A.firstElementChild)!=null?P:null}),M),()=>{var A,P;if(!n)return null;const{isAutoWidth:D}=e;if(D){const z=s?.autoLabelWidth,F=l?.hasLabel,N={};if(F&&z&&z!=="auto"){const q=Math.max(0,Number.parseInt(z,10)-b.value),ie=(l.labelPosition||s.labelPosition)==="left"?"marginRight":"marginLeft";q&&(N[ie]=`${q}px`)}return st("div",{ref:m,class:[d.be("item","label-wrap")],style:N},[(A=n.default)==null?void 0:A.call(n)])}else return st(cr,{ref:m},[(P=n.default)==null?void 0:P.call(n)])}}});const Lge=xe({name:"ElFormItem"}),Oge=xe({...Lge,props:Rge,setup(e,{expose:n}){const s=e,l=qo(),d=Gn(Jp,void 0),m=Gn(xd,void 0),b=Lo(void 0,{formItem:!1}),r=dn("form-item"),E=Ea().value,M=Re([]),A=Re(""),P=$K(A,100),D=Re(""),z=Re();let F,N=!1;const q=se(()=>s.labelPosition||d?.labelPosition),G=se(()=>{if(q.value==="top")return{};const Ke=ho(s.labelWidth||d?.labelWidth||"");return Ke?{width:Ke}:{}}),ie=se(()=>{if(q.value==="top"||d?.inline)return{};if(!s.label&&!s.labelWidth&&me)return{};const Ke=ho(s.labelWidth||d?.labelWidth||"");return!s.label&&!l.label?{marginLeft:Ke}:{}}),W=se(()=>[r.b(),r.m(b.value),r.is("error",A.value==="error"),r.is("validating",A.value==="validating"),r.is("success",A.value==="success"),r.is("required",Pe.value||s.required),r.is("no-asterisk",d?.hideRequiredAsterisk),d?.requireAsteriskPosition==="right"?"asterisk-right":"asterisk-left",{[r.m("feedback")]:d?.statusIcon,[r.m(`label-${q.value}`)]:q.value}]),Y=se(()=>Ts(s.inlineMessage)?s.inlineMessage:d?.inlineMessage||!1),J=se(()=>[r.e("error"),{[r.em("error","inline")]:Y.value}]),re=se(()=>s.prop?ir(s.prop)?s.prop:s.prop.join("."):""),he=se(()=>!!(s.label||l.label)),fe=se(()=>s.for||(M.value.length===1?M.value[0]:void 0)),ce=se(()=>!fe.value&&he.value),me=!!m,we=se(()=>{const Ke=d?.model;if(!(!Ke||!s.prop))return fv(Ke,s.prop).value}),ye=se(()=>{const{required:Ke}=s,Lt=[];s.rules&&Lt.push(...el(s.rules));const xn=d?.rules;if(xn&&s.prop){const Ht=fv(xn,s.prop).value;Ht&&Lt.push(...el(Ht))}if(Ke!==void 0){const Ht=Lt.map((le,nt)=>[le,nt]).filter(([le])=>Object.keys(le).includes("required"));if(Ht.length>0)for(const[le,nt]of Ht)le.required!==Ke&&(Lt[nt]={...le,required:Ke});else Lt.push({required:Ke})}return Lt}),Ue=se(()=>ye.value.length>0),Ne=Ke=>ye.value.filter(xn=>!xn.trigger||!Ke?!0:mn(xn.trigger)?xn.trigger.includes(Ke):xn.trigger===Ke).map(({trigger:xn,...Ht})=>Ht),Pe=se(()=>ye.value.some(Ke=>Ke.required)),ve=se(()=>{var Ke;return P.value==="error"&&s.showMessage&&((Ke=d?.showMessage)!=null?Ke:!0)}),$e=se(()=>`${s.label||""}${d?.labelSuffix||""}`),Te=Ke=>{A.value=Ke},Ae=Ke=>{var Lt,xn;const{errors:Ht,fields:le}=Ke;(!Ht||!le)&&console.error(Ke),Te("error"),D.value=Ht?(xn=(Lt=Ht?.[0])==null?void 0:Lt.message)!=null?xn:`${s.prop} is required`:"",d?.emit("validate",s.prop,!1,D.value)},Ve=()=>{Te("success"),d?.emit("validate",s.prop,!0,"")},We=async Ke=>{const Lt=re.value;return new cy({[Lt]:Ke}).validate({[Lt]:we.value},{firstFields:!0}).then(()=>(Ve(),!0)).catch(Ht=>(Ae(Ht),Promise.reject(Ht)))},ft=async(Ke,Lt)=>{if(N||!s.prop)return!1;const xn=hr(Lt);if(!Ue.value)return Lt?.(!1),!1;const Ht=Ne(Ke);return Ht.length===0?(Lt?.(!0),!0):(Te("validating"),We(Ht).then(()=>(Lt?.(!0),!0)).catch(le=>{const{fields:nt}=le;return Lt?.(!1,nt),xn?!1:Promise.reject(nt)}))},at=()=>{Te(""),D.value="",N=!1},ct=async()=>{const Ke=d?.model;if(!Ke||!s.prop)return;const Lt=fv(Ke,s.prop);N=!0,Lt.value=D5(F),await dr(),at(),N=!1},Mt=Ke=>{M.value.includes(Ke)||M.value.push(Ke)},Ct=Ke=>{M.value=M.value.filter(Lt=>Lt!==Ke)};on(()=>s.error,Ke=>{D.value=Ke||"",Te(Ke?"error":"")},{immediate:!0}),on(()=>s.validateStatus,Ke=>Te(Ke||""));const gt=ts({...da(s),$el:z,size:b,validateState:A,labelId:E,inputIds:M,isGroup:ce,hasLabel:he,fieldValue:we,addInputId:Mt,removeInputId:Ct,resetField:ct,clearValidate:at,validate:ft});return Ti(xd,gt),Zr(()=>{s.prop&&(d?.addField(gt),F=D5(we.value))}),Ls(()=>{d?.removeField(gt)}),n({size:b,validateMessage:D,validateState:A,validate:ft,clearValidate:at,resetField:ct}),(Ke,Lt)=>{var xn;return Z(),ue("div",{ref_key:"formItemRef",ref:z,class:ge(w(W)),role:w(ce)?"group":void 0,"aria-labelledby":w(ce)?w(E):void 0},[st(w(Pge),{"is-auto-width":w(G).width==="auto","update-all":((xn=w(d))==null?void 0:xn.labelWidth)==="auto"},{default:mt(()=>[w(he)?(Z(),Bt(si(w(fe)?"label":"div"),{key:0,id:w(E),for:w(fe),class:ge(w(r).e("label")),style:fr(w(G))},{default:mt(()=>[It(Ke.$slots,"label",{label:w($e)},()=>[ei(gn(w($e)),1)])]),_:3},8,["id","for","class","style"])):At("v-if",!0)]),_:3},8,["is-auto-width","update-all"]),ae("div",{class:ge(w(r).e("content")),style:fr(w(ie))},[It(Ke.$slots,"default"),st(TP,{name:`${w(r).namespace.value}-zoom-in-top`},{default:mt(()=>[w(ve)?It(Ke.$slots,"error",{key:0,error:D.value},()=>[ae("div",{class:ge(w(J))},gn(D.value),3)]):At("v-if",!0)]),_:3},8,["name"])],6)],10,["role","aria-labelledby"])}}});var pz=En(Oge,[["__file","form-item.vue"]]);const Dge=Gr(Xme,{FormItem:pz}),zge=ao(pz),Nge=bn({urlList:{type:wt(Array),default:()=>oo([])},zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},hideOnClickModal:Boolean,teleported:Boolean,closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2},minScale:{type:Number,default:.2},maxScale:{type:Number,default:7},showProgress:{type:Boolean,default:!1},crossorigin:{type:wt(String)}}),Fge={close:()=>!0,switch:e=>gr(e),rotate:e=>gr(e)},Bge=xe({name:"ElImageViewer"}),Vge=xe({...Bge,props:Nge,emits:Fge,setup(e,{expose:n,emit:s}){var l;const d=e,m={CONTAIN:{name:"contain",icon:lh(hO)},ORIGINAL:{name:"original",icon:lh(bO)}};let b,r="";const{t:E}=Oi(),M=dn("image-viewer"),{nextZIndex:A}=u0(),P=Re(),D=Re([]),z=H7(),F=Re(!0),N=Re(d.initialIndex),q=Zs(m.CONTAIN),G=Re({scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}),ie=Re((l=d.zIndex)!=null?l:A()),W=se(()=>{const{urlList:Ct}=d;return Ct.length<=1}),Y=se(()=>N.value===0),J=se(()=>N.value===d.urlList.length-1),re=se(()=>d.urlList[N.value]),he=se(()=>[M.e("btn"),M.e("prev"),M.is("disabled",!d.infinite&&Y.value)]),fe=se(()=>[M.e("btn"),M.e("next"),M.is("disabled",!d.infinite&&J.value)]),ce=se(()=>{const{scale:Ct,deg:gt,offsetX:Ke,offsetY:Lt,enableTransition:xn}=G.value;let Ht=Ke/Ct,le=Lt/Ct;const nt=gt*Math.PI/180,Gt=Math.cos(nt),an=Math.sin(nt);Ht=Ht*Gt+le*an,le=le*Gt-Ke/Ct*an;const Qt={transform:`scale(${Ct}) rotate(${gt}deg) translate(${Ht}px, ${le}px)`,transition:xn?"transform .3s":""};return q.value.name===m.CONTAIN.name&&(Qt.maxWidth=Qt.maxHeight="100%"),Qt}),me=se(()=>`${N.value+1} / ${d.urlList.length}`);function we(){Ue(),b?.(),document.body.style.overflow=r,s("close")}function ye(){const Ct=zp(Ke=>{switch(Ke.code){case Un.esc:d.closeOnPressEscape&&we();break;case Un.space:Te();break;case Un.left:Ve();break;case Un.up:ft("zoomIn");break;case Un.right:We();break;case Un.down:ft("zoomOut");break}}),gt=zp(Ke=>{const Lt=Ke.deltaY||Ke.deltaX;ft(Lt<0?"zoomIn":"zoomOut",{zoomRate:d.zoomRate,enableTransition:!1})});z.run(()=>{Is(document,"keydown",Ct),Is(document,"wheel",gt)})}function Ue(){z.stop()}function Ne(){F.value=!1}function Pe(Ct){F.value=!1,Ct.target.alt=E("el.image.error")}function ve(Ct){if(F.value||Ct.button!==0||!P.value)return;G.value.enableTransition=!1;const{offsetX:gt,offsetY:Ke}=G.value,Lt=Ct.pageX,xn=Ct.pageY,Ht=zp(nt=>{G.value={...G.value,offsetX:gt+nt.pageX-Lt,offsetY:Ke+nt.pageY-xn}}),le=Is(document,"mousemove",Ht);Is(document,"mouseup",()=>{le()}),Ct.preventDefault()}function $e(){G.value={scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}}function Te(){if(F.value)return;const Ct=$g(m),gt=Object.values(m),Ke=q.value.name,xn=(gt.findIndex(Ht=>Ht.name===Ke)+1)%Ct.length;q.value=m[Ct[xn]],$e()}function Ae(Ct){const gt=d.urlList.length;N.value=(Ct+gt)%gt}function Ve(){Y.value&&!d.infinite||Ae(N.value-1)}function We(){J.value&&!d.infinite||Ae(N.value+1)}function ft(Ct,gt={}){if(F.value)return;const{minScale:Ke,maxScale:Lt}=d,{zoomRate:xn,rotateDeg:Ht,enableTransition:le}={zoomRate:d.zoomRate,rotateDeg:90,enableTransition:!0,...gt};switch(Ct){case"zoomOut":G.value.scale>Ke&&(G.value.scale=Number.parseFloat((G.value.scale/xn).toFixed(3)));break;case"zoomIn":G.value.scale<Lt&&(G.value.scale=Number.parseFloat((G.value.scale*xn).toFixed(3)));break;case"clockwise":G.value.deg+=Ht,s("rotate",G.value.deg);break;case"anticlockwise":G.value.deg-=Ht,s("rotate",G.value.deg);break}G.value.enableTransition=le}function at(Ct){var gt;((gt=Ct.detail)==null?void 0:gt.focusReason)==="pointer"&&Ct.preventDefault()}function ct(){d.closeOnPressEscape&&we()}function Mt(Ct){if(Ct.ctrlKey){if(Ct.deltaY<0)return Ct.preventDefault(),!1;if(Ct.deltaY>0)return Ct.preventDefault(),!1}}return on(re,()=>{dr(()=>{const Ct=D.value[0];Ct?.complete||(F.value=!0)})}),on(N,Ct=>{$e(),s("switch",Ct)}),Zr(()=>{ye(),b=Is("wheel",Mt,{passive:!1}),r=document.body.style.overflow,document.body.style.overflow="hidden"}),n({setActiveItem:Ae}),(Ct,gt)=>(Z(),Bt(w(f0),{to:"body",disabled:!Ct.teleported},{default:mt(()=>[st(ha,{name:"viewer-fade",appear:""},{default:mt(()=>[ae("div",{ref_key:"wrapper",ref:P,tabindex:-1,class:ge(w(M).e("wrapper")),style:fr({zIndex:ie.value})},[st(w(h0),{loop:"",trapped:"","focus-trap-el":P.value,"focus-start-el":"container",onFocusoutPrevented:at,onReleaseRequested:ct},{default:mt(()=>[ae("div",{class:ge(w(M).e("mask")),onClick:Er(Ke=>Ct.hideOnClickModal&&we(),["self"])},null,10,["onClick"]),At(" CLOSE "),ae("span",{class:ge([w(M).e("btn"),w(M).e("close")]),onClick:we},[st(w(rr),null,{default:mt(()=>[st(w(du))]),_:1})],2),At(" ARROW "),w(W)?At("v-if",!0):(Z(),ue(cr,{key:0},[ae("span",{class:ge(w(he)),onClick:Ve},[st(w(rr),null,{default:mt(()=>[st(w(ph))]),_:1})],2),ae("span",{class:ge(w(fe)),onClick:We},[st(w(rr),null,{default:mt(()=>[st(w(il))]),_:1})],2)],64)),Ct.$slots.progress||Ct.showProgress?(Z(),ue("div",{key:1,class:ge([w(M).e("btn"),w(M).e("progress")])},[It(Ct.$slots,"progress",{activeIndex:N.value,total:Ct.urlList.length},()=>[ei(gn(w(me)),1)])],2)):At("v-if",!0),At(" ACTIONS "),ae("div",{class:ge([w(M).e("btn"),w(M).e("actions")])},[ae("div",{class:ge(w(M).e("actions__inner"))},[It(Ct.$slots,"toolbar",{actions:ft,prev:Ve,next:We,reset:Te,activeIndex:N.value,setActiveItem:Ae},()=>[st(w(rr),{onClick:Ke=>ft("zoomOut")},{default:mt(()=>[st(w(TO))]),_:1},8,["onClick"]),st(w(rr),{onClick:Ke=>ft("zoomIn")},{default:mt(()=>[st(w(qS))]),_:1},8,["onClick"]),ae("i",{class:ge(w(M).e("actions__divider"))},null,2),st(w(rr),{onClick:Te},{default:mt(()=>[(Z(),Bt(si(w(q).icon)))]),_:1}),ae("i",{class:ge(w(M).e("actions__divider"))},null,2),st(w(rr),{onClick:Ke=>ft("anticlockwise")},{default:mt(()=>[st(w(vO))]),_:1},8,["onClick"]),st(w(rr),{onClick:Ke=>ft("clockwise")},{default:mt(()=>[st(w(yO))]),_:1},8,["onClick"])])],2)],2),At(" CANVAS "),ae("div",{class:ge(w(M).e("canvas"))},[(Z(!0),ue(cr,null,Ei(Ct.urlList,(Ke,Lt)=>Wr((Z(),ue("img",{ref_for:!0,ref:xn=>D.value[Lt]=xn,key:Ke,src:Ke,style:fr(w(ce)),class:ge(w(M).e("img")),crossorigin:Ct.crossorigin,onLoad:Ne,onError:Pe,onMousedown:ve},null,46,["src","crossorigin"])),[[Ki,Lt===N.value]])),128))],2),It(Ct.$slots,"default")]),_:3},8,["focus-trap-el"])],6)]),_:3})]),_:3},8,["disabled"]))}});var $ge=En(Vge,[["__file","image-viewer.vue"]]);const mz=Gr($ge),Hge=bn({hideOnClickModal:Boolean,src:{type:String,default:""},fit:{type:String,values:["","contain","cover","fill","none","scale-down"],default:""},loading:{type:String,values:["eager","lazy"]},lazy:Boolean,scrollContainer:{type:wt([String,Object])},previewSrcList:{type:wt(Array),default:()=>oo([])},previewTeleported:Boolean,zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2},minScale:{type:Number,default:.2},maxScale:{type:Number,default:7},showProgress:{type:Boolean,default:!1},crossorigin:{type:wt(String)}}),Uge={load:e=>e instanceof Event,error:e=>e instanceof Event,switch:e=>gr(e),close:()=>!0,show:()=>!0},jge=xe({name:"ElImage",inheritAttrs:!1}),Gge=xe({...jge,props:Hge,emits:Uge,setup(e,{expose:n,emit:s}){const l=e,{t:d}=Oi(),m=dn("image"),b=wh(),r=se(()=>Lv(Object.entries(b).filter(([ve])=>/^(data-|on[A-Z])/i.test(ve)||["id","style"].includes(ve)))),E=oy({excludeListeners:!0,excludeKeys:se(()=>Object.keys(r.value))}),M=Re(),A=Re(!1),P=Re(!0),D=Re(!1),z=Re(),F=Re(),N=Pi&&"loading"in HTMLImageElement.prototype;let q;const G=se(()=>[m.e("inner"),W.value&&m.e("preview"),P.value&&m.is("loading")]),ie=se(()=>{const{fit:ve}=l;return Pi&&ve?{objectFit:ve}:{}}),W=se(()=>{const{previewSrcList:ve}=l;return mn(ve)&&ve.length>0}),Y=se(()=>{const{previewSrcList:ve,initialIndex:$e}=l;let Te=$e;return $e>ve.length-1&&(Te=0),Te}),J=se(()=>l.loading==="eager"?!1:!N&&l.loading==="lazy"||l.lazy),re=()=>{Pi&&(P.value=!0,A.value=!1,M.value=l.src)};function he(ve){P.value=!1,A.value=!1,s("load",ve)}function fe(ve){P.value=!1,A.value=!0,s("error",ve)}function ce(){Jde(z.value,F.value)&&(re(),ye())}const me=UL(ce,200,!0);async function we(){var ve;if(!Pi)return;await dr();const{scrollContainer:$e}=l;xl($e)?F.value=$e:ir($e)&&$e!==""?F.value=(ve=document.querySelector($e))!=null?ve:void 0:z.value&&(F.value=VS(z.value)),F.value&&(q=Is(F,"scroll",me),setTimeout(()=>ce(),100))}function ye(){!Pi||!F.value||!me||(q?.(),F.value=void 0)}function Ue(){W.value&&(D.value=!0,s("show"))}function Ne(){D.value=!1,s("close")}function Pe(ve){s("switch",ve)}return on(()=>l.src,()=>{J.value?(P.value=!0,A.value=!1,ye(),we()):re()}),Zr(()=>{J.value?we():re()}),n({showPreview:Ue}),(ve,$e)=>(Z(),ue("div",pi({ref_key:"container",ref:z},w(r),{class:[w(m).b(),ve.$attrs.class]}),[A.value?It(ve.$slots,"error",{key:0},()=>[ae("div",{class:ge(w(m).e("error"))},gn(w(d)("el.image.error")),3)]):(Z(),ue(cr,{key:1},[M.value!==void 0?(Z(),ue("img",pi({key:0},w(E),{src:M.value,loading:ve.loading,style:w(ie),class:w(G),crossorigin:ve.crossorigin,onClick:Ue,onLoad:he,onError:fe}),null,16,["src","loading","crossorigin"])):At("v-if",!0),P.value?(Z(),ue("div",{key:1,class:ge(w(m).e("wrapper"))},[It(ve.$slots,"placeholder",{},()=>[ae("div",{class:ge(w(m).e("placeholder"))},null,2)])],2)):At("v-if",!0)],64)),w(W)?(Z(),ue(cr,{key:2},[D.value?(Z(),Bt(w(mz),{key:0,"z-index":ve.zIndex,"initial-index":w(Y),infinite:ve.infinite,"zoom-rate":ve.zoomRate,"min-scale":ve.minScale,"max-scale":ve.maxScale,"show-progress":ve.showProgress,"url-list":ve.previewSrcList,crossorigin:ve.crossorigin,"hide-on-click-modal":ve.hideOnClickModal,teleported:ve.previewTeleported,"close-on-press-escape":ve.closeOnPressEscape,onClose:Ne,onSwitch:Pe},{progress:mt(Te=>[It(ve.$slots,"progress",iu(vd(Te)))]),toolbar:mt(Te=>[It(ve.$slots,"toolbar",iu(vd(Te)))]),default:mt(()=>[ve.$slots.viewer?(Z(),ue("div",{key:0},[It(ve.$slots,"viewer")])):At("v-if",!0)]),_:3},8,["z-index","initial-index","infinite","zoom-rate","min-scale","max-scale","show-progress","url-list","crossorigin","hide-on-click-modal","teleported","close-on-press-escape"])):At("v-if",!0)],64)):At("v-if",!0)],16))}});var qge=En(Gge,[["__file","image.vue"]]);const Wge=Gr(qge),Kge=bn({id:{type:String,default:void 0},step:{type:Number,default:1},stepStrictly:Boolean,max:{type:Number,default:Number.POSITIVE_INFINITY},min:{type:Number,default:Number.NEGATIVE_INFINITY},modelValue:Number,readonly:Boolean,disabled:Boolean,size:Fo,controls:{type:Boolean,default:!0},controlsPosition:{type:String,default:"",values:["","right"]},valueOnClear:{type:[String,Number,null],validator:e=>e===null||gr(e)||["min","max"].includes(e),default:null},name:String,placeholder:String,precision:{type:Number,validator:e=>e>=0&&e===Number.parseInt(`${e}`,10)},validateEvent:{type:Boolean,default:!0},...Ta(["ariaLabel"])}),Yge={[mi]:(e,n)=>n!==e,blur:e=>e instanceof FocusEvent,focus:e=>e instanceof FocusEvent,[Go]:e=>gr(e)||ea(e),[Nr]:e=>gr(e)||ea(e)},Zge=xe({name:"ElInputNumber"}),Xge=xe({...Zge,props:Kge,emits:Yge,setup(e,{expose:n,emit:s}){const l=e,{t:d}=Oi(),m=dn("input-number"),b=Re(),r=ts({currentValue:l.modelValue,userInput:null}),{formItem:E}=Fa(),M=se(()=>gr(l.modelValue)&&l.modelValue<=l.min),A=se(()=>gr(l.modelValue)&&l.modelValue>=l.max),P=se(()=>{const Pe=G(l.step);return Li(l.precision)?Math.max(G(l.modelValue),Pe):(Pe>l.precision,l.precision)}),D=se(()=>l.controls&&l.controlsPosition==="right"),z=Lo(),F=Ba(),N=se(()=>{if(r.userInput!==null)return r.userInput;let Pe=r.currentValue;if(ea(Pe))return"";if(gr(Pe)){if(Number.isNaN(Pe))return"";Li(l.precision)||(Pe=Pe.toFixed(l.precision))}return Pe}),q=(Pe,ve)=>{if(Li(ve)&&(ve=P.value),ve===0)return Math.round(Pe);let $e=String(Pe);const Te=$e.indexOf(".");if(Te===-1||!$e.replace(".","").split("")[Te+ve])return Pe;const We=$e.length;return $e.charAt(We-1)==="5"&&($e=`${$e.slice(0,Math.max(0,We-1))}6`),Number.parseFloat(Number($e).toFixed(ve))},G=Pe=>{if(ea(Pe))return 0;const ve=Pe.toString(),$e=ve.indexOf(".");let Te=0;return $e!==-1&&(Te=ve.length-$e-1),Te},ie=(Pe,ve=1)=>gr(Pe)?q(Pe+l.step*ve):r.currentValue,W=()=>{if(l.readonly||F.value||A.value)return;const Pe=Number(N.value)||0,ve=ie(Pe);re(ve),s(Go,r.currentValue),Ue()},Y=()=>{if(l.readonly||F.value||M.value)return;const Pe=Number(N.value)||0,ve=ie(Pe,-1);re(ve),s(Go,r.currentValue),Ue()},J=(Pe,ve)=>{const{max:$e,min:Te,step:Ae,precision:Ve,stepStrictly:We,valueOnClear:ft}=l;$e<Te&&No("InputNumber","min should not be greater than max.");let at=Number(Pe);if(ea(Pe)||Number.isNaN(at))return null;if(Pe===""){if(ft===null)return null;at=ir(ft)?{min:Te,max:$e}[ft]:ft}return We&&(at=q(Math.round(at/Ae)*Ae,Ve),at!==Pe&&ve&&s(Nr,at)),Li(Ve)||(at=q(at,Ve)),(at>$e||at<Te)&&(at=at>$e?$e:Te,ve&&s(Nr,at)),at},re=(Pe,ve=!0)=>{var $e;const Te=r.currentValue,Ae=J(Pe);if(!ve){s(Nr,Ae);return}Te===Ae&&Pe||(r.userInput=null,s(Nr,Ae),Te!==Ae&&s(mi,Ae,Te),l.validateEvent&&(($e=E?.validate)==null||$e.call(E,"change").catch(Ve=>void 0)),r.currentValue=Ae)},he=Pe=>{r.userInput=Pe;const ve=Pe===""?null:Number(Pe);s(Go,ve),re(ve,!1)},fe=Pe=>{const ve=Pe!==""?Number(Pe):"";(gr(ve)&&!Number.isNaN(ve)||Pe==="")&&re(ve),Ue(),r.userInput=null},ce=()=>{var Pe,ve;(ve=(Pe=b.value)==null?void 0:Pe.focus)==null||ve.call(Pe)},me=()=>{var Pe,ve;(ve=(Pe=b.value)==null?void 0:Pe.blur)==null||ve.call(Pe)},we=Pe=>{s("focus",Pe)},ye=Pe=>{var ve,$e;r.userInput=null,Tx()&&r.currentValue===null&&((ve=b.value)!=null&&ve.input)&&(b.value.input.value=""),s("blur",Pe),l.validateEvent&&(($e=E?.validate)==null||$e.call(E,"blur").catch(Te=>void 0))},Ue=()=>{r.currentValue!==l.modelValue&&(r.currentValue=l.modelValue)},Ne=Pe=>{document.activeElement===Pe.target&&Pe.preventDefault()};return on(()=>l.modelValue,(Pe,ve)=>{const $e=J(Pe,!0);r.userInput===null&&$e!==ve&&(r.currentValue=$e)},{immediate:!0}),Zr(()=>{var Pe;const{min:ve,max:$e,modelValue:Te}=l,Ae=(Pe=b.value)==null?void 0:Pe.input;if(Ae.setAttribute("role","spinbutton"),Number.isFinite($e)?Ae.setAttribute("aria-valuemax",String($e)):Ae.removeAttribute("aria-valuemax"),Number.isFinite(ve)?Ae.setAttribute("aria-valuemin",String(ve)):Ae.removeAttribute("aria-valuemin"),Ae.setAttribute("aria-valuenow",r.currentValue||r.currentValue===0?String(r.currentValue):""),Ae.setAttribute("aria-disabled",String(F.value)),!gr(Te)&&Te!=null){let Ve=Number(Te);Number.isNaN(Ve)&&(Ve=null),s(Nr,Ve)}Ae.addEventListener("wheel",Ne,{passive:!1})}),yc(()=>{var Pe,ve;const $e=(Pe=b.value)==null?void 0:Pe.input;$e?.setAttribute("aria-valuenow",`${(ve=r.currentValue)!=null?ve:""}`)}),n({focus:ce,blur:me}),(Pe,ve)=>(Z(),ue("div",{class:ge([w(m).b(),w(m).m(w(z)),w(m).is("disabled",w(F)),w(m).is("without-controls",!Pe.controls),w(m).is("controls-right",w(D))]),onDragstart:Er(()=>{},["prevent"])},[Pe.controls?Wr((Z(),ue("span",{key:0,role:"button","aria-label":w(d)("el.inputNumber.decrease"),class:ge([w(m).e("decrease"),w(m).is("disabled",w(M))]),onKeydown:Ps(Y,["enter"])},[It(Pe.$slots,"decrease-icon",{},()=>[st(w(rr),null,{default:mt(()=>[w(D)?(Z(),Bt(w(Ed),{key:0})):(Z(),Bt(w(pO),{key:1}))]),_:1})])],42,["aria-label","onKeydown"])),[[w(Ob),Y]]):At("v-if",!0),Pe.controls?Wr((Z(),ue("span",{key:1,role:"button","aria-label":w(d)("el.inputNumber.increase"),class:ge([w(m).e("increase"),w(m).is("disabled",w(A))]),onKeydown:Ps(W,["enter"])},[It(Pe.$slots,"increase-icon",{},()=>[st(w(rr),null,{default:mt(()=>[w(D)?(Z(),Bt(w(xx),{key:0})):(Z(),Bt(w(jS),{key:1}))]),_:1})])],42,["aria-label","onKeydown"])),[[w(Ob),W]]):At("v-if",!0),st(w(nl),{id:Pe.id,ref_key:"input",ref:b,type:"number",step:Pe.step,"model-value":w(N),placeholder:Pe.placeholder,readonly:Pe.readonly,disabled:w(F),size:w(z),max:Pe.max,min:Pe.min,name:Pe.name,"aria-label":Pe.ariaLabel,"validate-event":!1,onKeydown:[Ps(Er(W,["prevent"]),["up"]),Ps(Er(Y,["prevent"]),["down"])],onBlur:ye,onFocus:we,onInput:he,onChange:fe},cu({_:2},[Pe.$slots.prefix?{name:"prefix",fn:mt(()=>[It(Pe.$slots,"prefix")])}:void 0,Pe.$slots.suffix?{name:"suffix",fn:mt(()=>[It(Pe.$slots,"suffix")])}:void 0]),1032,["id","step","model-value","placeholder","readonly","disabled","size","max","min","name","aria-label","onKeydown"])],42,["onDragstart"]))}});var Jge=En(Xge,[["__file","input-number.vue"]]);const gz=Gr(Jge),Qge=bn({modelValue:{type:wt(Array)},max:Number,tagType:{...vh.type,default:"info"},tagEffect:vh.effect,trigger:{type:wt(String),default:Un.enter},draggable:{type:Boolean,default:!1},delimiter:{type:[String,RegExp],default:""},size:Fo,clearable:Boolean,disabled:{type:Boolean,default:void 0},validateEvent:{type:Boolean,default:!0},readonly:Boolean,autofocus:Boolean,id:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},maxlength:{type:[String,Number]},minlength:{type:[String,Number]},placeholder:String,autocomplete:{type:String,default:"off"},saveOnBlur:{type:Boolean,default:!0},ariaLabel:String}),e0e={[Nr]:e=>mn(e)||Li(e),[mi]:e=>mn(e)||Li(e),[Go]:e=>ir(e),"add-tag":e=>ir(e),"remove-tag":e=>ir(e),focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent,clear:()=>!0};function t0e({props:e,emit:n,formItem:s}){const l=Ba(),d=Lo(),m=Zs(),b=Re(),r=se(()=>["small"].includes(d.value)?"small":"default"),E=se(()=>{var ce;return(ce=e.modelValue)!=null&&ce.length?void 0:e.placeholder}),M=se(()=>!(e.readonly||l.value)),A=se(()=>{var ce,me;return Li(e.max)?!1:((me=(ce=e.modelValue)==null?void 0:ce.length)!=null?me:0)>=e.max}),P=ce=>{var me,we;if(A.value){b.value=void 0;return}if(!J.value){if(e.delimiter){const ye=(me=b.value)==null?void 0:me.replace(e.delimiter,"");ye?.length!==((we=b.value)==null?void 0:we.length)&&(b.value=ye,z())}n(Go,ce.target.value)}},D=ce=>{var me;if(!J.value)switch(ce.code){case e.trigger:ce.preventDefault(),ce.stopPropagation(),z();break;case Un.numpadEnter:e.trigger===Un.enter&&(ce.preventDefault(),ce.stopPropagation(),z());break;case Un.backspace:!b.value&&((me=e.modelValue)!=null&&me.length)&&(ce.preventDefault(),ce.stopPropagation(),F(e.modelValue.length-1));break}},z=()=>{var ce,me;const we=(ce=b.value)==null?void 0:ce.trim();if(!we||A.value)return;const ye=[...(me=e.modelValue)!=null?me:[],we];n(Nr,ye),n(mi,ye),n("add-tag",we),b.value=void 0},F=ce=>{var me;const we=((me=e.modelValue)!=null?me:[]).slice(),[ye]=we.splice(ce,1);n(Nr,we),n(mi,we),n("remove-tag",ye)},N=()=>{b.value=void 0,n(Nr,void 0),n(mi,void 0),n("clear")},q=(ce,me,we)=>{var ye;const Ue=((ye=e.modelValue)!=null?ye:[]).slice(),[Ne]=Ue.splice(ce,1),Pe=me>ce&&we==="before"?-1:me<ce&&we==="after"?1:0;Ue.splice(me+Pe,0,Ne),n(Nr,Ue),n(mi,Ue)},G=()=>{var ce;(ce=m.value)==null||ce.focus()},ie=()=>{var ce;(ce=m.value)==null||ce.blur()},{wrapperRef:W,isFocused:Y}=Pf(m,{beforeFocus(){return l.value},afterBlur(){var ce;e.saveOnBlur?z():b.value=void 0,e.validateEvent&&((ce=s?.validate)==null||ce.call(s,"blur").catch(me=>void 0))}}),{isComposing:J,handleCompositionStart:re,handleCompositionUpdate:he,handleCompositionEnd:fe}=ay({afterComposition:P});return on(()=>e.modelValue,()=>{var ce;e.validateEvent&&((ce=s?.validate)==null||ce.call(s,mi).catch(me=>void 0))}),{inputRef:m,wrapperRef:W,isFocused:Y,isComposing:J,inputValue:b,size:d,tagSize:r,placeholder:E,closable:M,disabled:l,inputLimit:A,handleDragged:q,handleInput:P,handleKeydown:D,handleAddTag:z,handleRemoveTag:F,handleClear:N,handleCompositionStart:re,handleCompositionUpdate:he,handleCompositionEnd:fe,focus:G,blur:ie}}function n0e(){const e=Re(!1);return{hovering:e,handleMouseEnter:()=>{e.value=!0},handleMouseLeave:()=>{e.value=!1}}}function k8(){const e=Zs(),n=Re(0),s=11,l=se(()=>({minWidth:`${Math.max(n.value,s)}px`}));return so(e,()=>{var m,b;n.value=(b=(m=e.value)==null?void 0:m.getBoundingClientRect().width)!=null?b:0}),{calculatorRef:e,calculatorWidth:n,inputStyle:l}}function r0e({wrapperRef:e,handleDragged:n,afterDragged:s}){const l=dn("input-tag"),d=Zs(),m=Re(!1);let b,r,E,M;function A(F){return`.${l.e("inner")} .${l.namespace.value}-tag:nth-child(${F+1})`}function P(F,N){b=N,r=e.value.querySelector(A(N)),r&&(r.style.opacity="0.5"),F.dataTransfer.effectAllowed="move"}function D(F,N){if(E=N,F.preventDefault(),F.dataTransfer.dropEffect="move",Li(b)||b===N){m.value=!1;return}const q=e.value.querySelector(A(N)).getBoundingClientRect(),G=b+1!==N,ie=b-1!==N,W=F.clientX-q.left,Y=G?ie?.5:1:-1,J=ie?G?.5:0:1;W<=q.width*Y?M="before":W>q.width*J?M="after":M=void 0;const re=e.value.querySelector(`.${l.e("inner")}`),he=re.getBoundingClientRect(),fe=Number.parseFloat(sh(re,"gap"))/2,ce=q.top-he.top;let me=-9999;if(M==="before")me=Math.max(q.left-he.left-fe,Math.floor(-fe/2));else if(M==="after"){const we=q.right-he.left;me=we+(he.width===we?Math.floor(fe/2):fe)}nO(d.value,{top:`${ce}px`,left:`${me}px`}),m.value=!!M}function z(F){F.preventDefault(),r&&(r.style.opacity=""),M&&!Li(b)&&!Li(E)&&b!==E&&n(b,E,M),m.value=!1,b=void 0,r=null,E=void 0,M=void 0,s?.()}return{dropIndicatorRef:d,showDropIndicator:m,handleDragStart:P,handleDragOver:D,handleDragEnd:z}}function i0e({props:e,isFocused:n,hovering:s,disabled:l,inputValue:d,size:m,validateState:b,validateIcon:r,needStatusIcon:E}){const M=wh(),A=qo(),P=dn("input-tag"),D=dn("input"),z=se(()=>[P.b(),P.is("focused",n.value),P.is("hovering",s.value),P.is("disabled",l.value),P.m(m.value),P.e("wrapper"),M.class]),F=se(()=>[M.style]),N=se(()=>{var ie,W;return[P.e("inner"),P.is("draggable",e.draggable),P.is("left-space",!((ie=e.modelValue)!=null&&ie.length)&&!A.prefix),P.is("right-space",!((W=e.modelValue)!=null&&W.length)&&!G.value)]}),q=se(()=>{var ie;return e.clearable&&!l.value&&!e.readonly&&(((ie=e.modelValue)==null?void 0:ie.length)||d.value)&&(n.value||s.value)}),G=se(()=>A.suffix||q.value||b.value&&r.value&&E.value);return{ns:P,nsInput:D,containerKls:z,containerStyle:F,innerKls:N,showClear:q,showSuffix:G}}const s0e=xe({name:"ElInputTag",inheritAttrs:!1}),o0e=xe({...s0e,props:Qge,emits:e0e,setup(e,{expose:n,emit:s}){const l=e,d=oy(),m=qo(),{form:b,formItem:r}=Fa(),{inputId:E}=Du(l,{formItemContext:r}),M=se(()=>{var le;return(le=b?.statusIcon)!=null?le:!1}),A=se(()=>r?.validateState||""),P=se(()=>A.value&&Ex[A.value]),{inputRef:D,wrapperRef:z,isFocused:F,inputValue:N,size:q,tagSize:G,placeholder:ie,closable:W,disabled:Y,handleDragged:J,handleInput:re,handleKeydown:he,handleRemoveTag:fe,handleClear:ce,handleCompositionStart:me,handleCompositionUpdate:we,handleCompositionEnd:ye,focus:Ue,blur:Ne}=t0e({props:l,emit:s,formItem:r}),{hovering:Pe,handleMouseEnter:ve,handleMouseLeave:$e}=n0e(),{calculatorRef:Te,inputStyle:Ae}=k8(),{dropIndicatorRef:Ve,showDropIndicator:We,handleDragStart:ft,handleDragOver:at,handleDragEnd:ct}=r0e({wrapperRef:z,handleDragged:J,afterDragged:Ue}),{ns:Mt,nsInput:Ct,containerKls:gt,containerStyle:Ke,innerKls:Lt,showClear:xn,showSuffix:Ht}=i0e({props:l,hovering:Pe,isFocused:F,inputValue:N,disabled:Y,size:q,validateState:A,validateIcon:P,needStatusIcon:M});return n({focus:Ue,blur:Ne}),(le,nt)=>(Z(),ue("div",{ref_key:"wrapperRef",ref:z,class:ge(w(gt)),style:fr(w(Ke)),onMouseenter:w(ve),onMouseleave:w($e)},[w(m).prefix?(Z(),ue("div",{key:0,class:ge(w(Mt).e("prefix"))},[It(le.$slots,"prefix")],2)):At("v-if",!0),ae("div",{class:ge(w(Lt))},[(Z(!0),ue(cr,null,Ei(le.modelValue,(Gt,an)=>(Z(),Bt(w(Wg),{key:an,size:w(G),closable:w(W),type:le.tagType,effect:le.tagEffect,draggable:w(W)&&le.draggable,"disable-transitions":"",onClose:Qt=>w(fe)(an),onDragstart:Qt=>w(ft)(Qt,an),onDragover:Qt=>w(at)(Qt,an),onDragend:w(ct),onDrop:Er(()=>{},["stop"])},{default:mt(()=>[It(le.$slots,"tag",{value:Gt,index:an},()=>[ei(gn(Gt),1)])]),_:2},1032,["size","closable","type","effect","draggable","onClose","onDragstart","onDragover","onDragend","onDrop"]))),128)),ae("div",{class:ge(w(Mt).e("input-wrapper"))},[Wr(ae("input",pi({id:w(E),ref_key:"inputRef",ref:D,"onUpdate:modelValue":Gt=>Hs(N)?N.value=Gt:null},w(d),{type:"text",minlength:le.minlength,maxlength:le.maxlength,disabled:w(Y),readonly:le.readonly,autocomplete:le.autocomplete,tabindex:le.tabindex,placeholder:w(ie),autofocus:le.autofocus,ariaLabel:le.ariaLabel,class:w(Mt).e("input"),style:w(Ae),onCompositionstart:w(me),onCompositionupdate:w(we),onCompositionend:w(ye),onInput:w(re),onKeydown:w(he)}),null,16,["id","onUpdate:modelValue","minlength","maxlength","disabled","readonly","autocomplete","tabindex","placeholder","autofocus","ariaLabel","onCompositionstart","onCompositionupdate","onCompositionend","onInput","onKeydown"]),[[Jv,w(N)]]),ae("span",{ref_key:"calculatorRef",ref:Te,"aria-hidden":"true",class:ge(w(Mt).e("input-calculator")),textContent:gn(w(N))},null,10,["textContent"])],2),Wr(ae("div",{ref_key:"dropIndicatorRef",ref:Ve,class:ge(w(Mt).e("drop-indicator"))},null,2),[[Ki,w(We)]])],2),w(Ht)?(Z(),ue("div",{key:1,class:ge(w(Mt).e("suffix"))},[It(le.$slots,"suffix"),w(xn)?(Z(),Bt(w(rr),{key:0,class:ge([w(Mt).e("icon"),w(Mt).e("clear")]),onMousedown:Er(w(ys),["prevent"]),onClick:w(ce)},{default:mt(()=>[st(w(Td))]),_:1},8,["class","onMousedown","onClick"])):At("v-if",!0),w(A)&&w(P)&&w(M)?(Z(),Bt(w(rr),{key:1,class:ge([w(Ct).e("icon"),w(Ct).e("validateIcon"),w(Ct).is("loading",w(A)==="validating")])},{default:mt(()=>[(Z(),Bt(si(w(P))))]),_:1},8,["class"])):At("v-if",!0)],2)):At("v-if",!0)],46,["onMouseenter","onMouseleave"]))}});var a0e=En(o0e,[["__file","input-tag.vue"]]);const l0e=Gr(a0e),u0e=bn({type:{type:String,values:["primary","success","warning","info","danger","default"],default:"default"},underline:{type:[Boolean,String],values:[!0,!1,"always","never","hover"],default:"hover"},disabled:Boolean,href:{type:String,default:""},target:{type:String,default:"_self"},icon:{type:bs}}),c0e={click:e=>e instanceof MouseEvent},d0e=xe({name:"ElLink"}),h0e=xe({...d0e,props:u0e,emits:c0e,setup(e,{emit:n}){const s=e;ch({scope:"el-link",from:"The underline option (boolean)",replacement:"'always' | 'hover' | 'never'",version:"3.0.0",ref:"https://element-plus.org/en-US/component/link.html#underline"},se(()=>Ts(s.underline)));const l=dn("link"),d=se(()=>[l.b(),l.m(s.type),l.is("disabled",s.disabled),l.is("underline",m.value==="always"),l.is("hover-underline",m.value==="hover"&&!s.disabled)]),m=se(()=>Ts(s.underline)?s.underline?"hover":"never":s.underline);function b(r){s.disabled||n("click",r)}return(r,E)=>(Z(),ue("a",{class:ge(w(d)),href:r.disabled||!r.href?void 0:r.href,target:r.disabled||!r.href?void 0:r.target,onClick:b},[r.icon?(Z(),Bt(w(rr),{key:0},{default:mt(()=>[(Z(),Bt(si(r.icon)))]),_:1})):At("v-if",!0),r.$slots.default?(Z(),ue("span",{key:1,class:ge(w(l).e("inner"))},[It(r.$slots,"default")],2)):At("v-if",!0),r.$slots.icon?It(r.$slots,"icon",{key:2}):At("v-if",!0)],10,["href","target"]))}});var f0e=En(h0e,[["__file","link.vue"]]);const p0e=Gr(f0e);let m0e=class{constructor(n,s){this.parent=n,this.domNode=s,this.subIndex=0,this.subIndex=0,this.init()}init(){this.subMenuItems=this.domNode.querySelectorAll("li"),this.addListeners()}gotoSubIndex(n){n===this.subMenuItems.length?n=0:n<0&&(n=this.subMenuItems.length-1),this.subMenuItems[n].focus(),this.subIndex=n}addListeners(){const n=this.parent.domNode;Array.prototype.forEach.call(this.subMenuItems,s=>{s.addEventListener("keydown",l=>{let d=!1;switch(l.code){case Un.down:{this.gotoSubIndex(this.subIndex+1),d=!0;break}case Un.up:{this.gotoSubIndex(this.subIndex-1),d=!0;break}case Un.tab:{B2(n,"mouseleave");break}case Un.enter:case Un.numpadEnter:case Un.space:{d=!0,l.currentTarget.click();break}}return d&&(l.preventDefault(),l.stopPropagation()),!1})})}},g0e=class{constructor(n,s){this.domNode=n,this.submenu=null,this.submenu=null,this.init(s)}init(n){this.domNode.setAttribute("tabindex","0");const s=this.domNode.querySelector(`.${n}-menu`);s&&(this.submenu=new m0e(this,s)),this.addListeners()}addListeners(){this.domNode.addEventListener("keydown",n=>{let s=!1;switch(n.code){case Un.down:{B2(n.currentTarget,"mouseenter"),this.submenu&&this.submenu.gotoSubIndex(0),s=!0;break}case Un.up:{B2(n.currentTarget,"mouseenter"),this.submenu&&this.submenu.gotoSubIndex(this.submenu.subMenuItems.length-1),s=!0;break}case Un.tab:{B2(n.currentTarget,"mouseleave");break}case Un.enter:case Un.numpadEnter:case Un.space:{s=!0,n.currentTarget.click();break}}s&&n.preventDefault()})}},_0e=class{constructor(n,s){this.domNode=n,this.init(s)}init(n){const s=this.domNode.childNodes;Array.from(s).forEach(l=>{l.nodeType===1&&new g0e(l,n)})}};const v0e=xe({name:"ElMenuCollapseTransition"}),y0e=xe({...v0e,setup(e){const n=dn("menu"),s={onBeforeEnter:l=>l.style.opacity="0.2",onEnter(l,d){Tu(l,`${n.namespace.value}-opacity-transition`),l.style.opacity="1",d()},onAfterEnter(l){rl(l,`${n.namespace.value}-opacity-transition`),l.style.opacity=""},onBeforeLeave(l){l.dataset||(l.dataset={}),Nl(l,n.m("collapse"))?(rl(l,n.m("collapse")),l.dataset.oldOverflow=l.style.overflow,l.dataset.scrollWidth=l.clientWidth.toString(),Tu(l,n.m("collapse"))):(Tu(l,n.m("collapse")),l.dataset.oldOverflow=l.style.overflow,l.dataset.scrollWidth=l.clientWidth.toString(),rl(l,n.m("collapse"))),l.style.width=`${l.scrollWidth}px`,l.style.overflow="hidden"},onLeave(l){Tu(l,"horizontal-collapse-transition"),l.style.width=`${l.dataset.scrollWidth}px`}};return(l,d)=>(Z(),Bt(ha,pi({mode:"out-in"},w(s)),{default:mt(()=>[It(l.$slots,"default")]),_:3},16))}});var b0e=En(y0e,[["__file","menu-collapse-transition.vue"]]);function _z(e,n){const s=se(()=>{let d=e.parent;const m=[n.value];for(;d.type.name!=="ElMenu";)d.props.index&&m.unshift(d.props.index),d=d.parent;return m});return{parentMenu:se(()=>{let d=e.parent;for(;d&&!["ElMenu","ElSubMenu"].includes(d.type.name);)d=d.parent;return d}),indexPath:s}}function x0e(e){return se(()=>{const s=e.backgroundColor;return s?new lD(s).shade(20).toString():""})}const vz=(e,n)=>{const s=dn("menu");return se(()=>s.cssVarBlock({"text-color":e.textColor||"","hover-text-color":e.textColor||"","bg-color":e.backgroundColor||"","hover-bg-color":x0e(e).value||"","active-color":e.activeTextColor||"",level:`${n}`}))},w0e=bn({index:{type:String,required:!0},showTimeout:Number,hideTimeout:Number,popperClass:String,disabled:Boolean,teleported:{type:Boolean,default:void 0},popperOffset:Number,expandCloseIcon:{type:bs},expandOpenIcon:{type:bs},collapseCloseIcon:{type:bs},collapseOpenIcon:{type:bs}}),h4="ElSubMenu";var M8=xe({name:h4,props:w0e,setup(e,{slots:n,expose:s}){const l=oi(),{indexPath:d,parentMenu:m}=_z(l,se(()=>e.index)),b=dn("menu"),r=dn("sub-menu"),E=Gn("rootMenu");E||No(h4,"can not inject root menu");const M=Gn(`subMenu:${m.value.uid}`);M||No(h4,"can not inject sub menu");const A=Re({}),P=Re({});let D;const z=Re(!1),F=Re(),N=Re(),q=se(()=>fe.value==="horizontal"&&ie.value?"bottom-start":"right-start"),G=se(()=>fe.value==="horizontal"&&ie.value||fe.value==="vertical"&&!E.props.collapse?e.expandCloseIcon&&e.expandOpenIcon?re.value?e.expandOpenIcon:e.expandCloseIcon:Ed:e.collapseCloseIcon&&e.collapseOpenIcon?re.value?e.collapseOpenIcon:e.collapseCloseIcon:il),ie=se(()=>M.level===0),W=se(()=>{const We=e.teleported;return Li(We)?ie.value:We}),Y=se(()=>E.props.collapse?`${b.namespace.value}-zoom-in-left`:`${b.namespace.value}-zoom-in-top`),J=se(()=>fe.value==="horizontal"&&ie.value?["bottom-start","bottom-end","top-start","top-end","right-start","left-start"]:["right-start","right","right-end","left-start","bottom-start","bottom-end","top-start","top-end"]),re=se(()=>E.openedMenus.includes(e.index)),he=se(()=>[...Object.values(A.value),...Object.values(P.value)].some(({active:We})=>We)),fe=se(()=>E.props.mode),ce=se(()=>E.props.persistent),me=ts({index:e.index,indexPath:d,active:he}),we=vz(E.props,M.level+1),ye=se(()=>{var We;return(We=e.popperOffset)!=null?We:E.props.popperOffset}),Ue=se(()=>{var We;return(We=e.popperClass)!=null?We:E.props.popperClass}),Ne=se(()=>{var We;return(We=e.showTimeout)!=null?We:E.props.showTimeout}),Pe=se(()=>{var We;return(We=e.hideTimeout)!=null?We:E.props.hideTimeout}),ve=()=>{var We,ft,at;return(at=(ft=(We=N.value)==null?void 0:We.popperRef)==null?void 0:ft.popperInstanceRef)==null?void 0:at.destroy()},$e=We=>{We||ve()},Te=()=>{E.props.menuTrigger==="hover"&&E.props.mode==="horizontal"||E.props.collapse&&E.props.mode==="vertical"||e.disabled||E.handleSubMenuClick({index:e.index,indexPath:d.value,active:he.value})},Ae=(We,ft=Ne.value)=>{var at;if(We.type!=="focus"){if(E.props.menuTrigger==="click"&&E.props.mode==="horizontal"||!E.props.collapse&&E.props.mode==="vertical"||e.disabled){M.mouseInChild.value=!0;return}M.mouseInChild.value=!0,D?.(),{stop:D}=Up(()=>{E.openMenu(e.index,d.value)},ft),W.value&&((at=m.value.vnode.el)==null||at.dispatchEvent(new MouseEvent("mouseenter")))}},Ve=(We=!1)=>{var ft;if(E.props.menuTrigger==="click"&&E.props.mode==="horizontal"||!E.props.collapse&&E.props.mode==="vertical"){M.mouseInChild.value=!1;return}D?.(),M.mouseInChild.value=!1,{stop:D}=Up(()=>!z.value&&E.closeMenu(e.index,d.value),Pe.value),W.value&&We&&((ft=M.handleMouseleave)==null||ft.call(M,!0))};on(()=>E.props.collapse,We=>$e(!!We));{const We=at=>{P.value[at.index]=at},ft=at=>{delete P.value[at.index]};Ti(`subMenu:${l.uid}`,{addSubMenu:We,removeSubMenu:ft,handleMouseleave:Ve,mouseInChild:z,level:M.level+1})}return s({opened:re}),Zr(()=>{E.addSubMenu(me),M.addSubMenu(me)}),Ls(()=>{M.removeSubMenu(me),E.removeSubMenu(me)}),()=>{var We;const ft=[(We=n.title)==null?void 0:We.call(n),xr(rr,{class:r.e("icon-arrow"),style:{transform:re.value?e.expandCloseIcon&&e.expandOpenIcon||e.collapseCloseIcon&&e.collapseOpenIcon&&E.props.collapse?"none":"rotateZ(180deg)":"none"}},{default:()=>ir(G.value)?xr(l.appContext.components[G.value]):xr(G.value)})],at=E.isMenuPopup?xr(Na,{ref:N,visible:re.value,effect:"light",pure:!0,offset:ye.value,showArrow:!1,persistent:ce.value,popperClass:Ue.value,placement:q.value,teleported:W.value,fallbackPlacements:J.value,transition:Y.value,gpuAcceleration:!1},{content:()=>{var ct;return xr("div",{class:[b.m(fe.value),b.m("popup-container"),Ue.value],onMouseenter:Mt=>Ae(Mt,100),onMouseleave:()=>Ve(!0),onFocus:Mt=>Ae(Mt,100)},[xr("ul",{class:[b.b(),b.m("popup"),b.m(`popup-${q.value}`)],style:we.value},[(ct=n.default)==null?void 0:ct.call(n)])])},default:()=>xr("div",{class:r.e("title"),onClick:Te},ft)}):xr(cr,{},[xr("div",{class:r.e("title"),ref:F,onClick:Te},ft),xr(Rx,{},{default:()=>{var ct;return Wr(xr("ul",{role:"menu",class:[b.b(),b.m("inline")],style:we.value},[(ct=n.default)==null?void 0:ct.call(n)]),[[Ki,re.value]])}})]);return xr("li",{class:[r.b(),r.is("active",he.value),r.is("opened",re.value),r.is("disabled",e.disabled)],role:"menuitem",ariaHaspopup:!0,ariaExpanded:re.value,onMouseenter:Ae,onMouseleave:()=>Ve(),onFocus:Ae},[at])}}});const S0e=bn({mode:{type:String,values:["horizontal","vertical"],default:"vertical"},defaultActive:{type:String,default:""},defaultOpeneds:{type:wt(Array),default:()=>oo([])},uniqueOpened:Boolean,router:Boolean,menuTrigger:{type:String,values:["hover","click"],default:"hover"},collapse:Boolean,backgroundColor:String,textColor:String,activeTextColor:String,closeOnClickOutside:Boolean,collapseTransition:{type:Boolean,default:!0},ellipsis:{type:Boolean,default:!0},popperOffset:{type:Number,default:6},ellipsisIcon:{type:bs,default:()=>mO},popperEffect:{type:wt(String),default:"dark"},popperClass:String,showTimeout:{type:Number,default:300},hideTimeout:{type:Number,default:300},persistent:{type:Boolean,default:!0}}),f4=e=>mn(e)&&e.every(n=>ir(n)),C0e={close:(e,n)=>ir(e)&&f4(n),open:(e,n)=>ir(e)&&f4(n),select:(e,n,s,l)=>ir(e)&&f4(n)&&Yr(s)&&(Li(l)||l instanceof Promise)};var E0e=xe({name:"ElMenu",props:S0e,emits:C0e,setup(e,{emit:n,slots:s,expose:l}){const d=oi(),m=d.appContext.config.globalProperties.$router,b=Re(),r=dn("menu"),E=dn("sub-menu"),M=Re(-1),A=Re(e.defaultOpeneds&&!e.collapse?e.defaultOpeneds.slice(0):[]),P=Re(e.defaultActive),D=Re({}),z=Re({}),F=se(()=>e.mode==="horizontal"||e.mode==="vertical"&&e.collapse),N=()=>{const Pe=P.value&&D.value[P.value];if(!Pe||e.mode==="horizontal"||e.collapse)return;Pe.indexPath.forEach($e=>{const Te=z.value[$e];Te&&q($e,Te.indexPath)})},q=(Pe,ve)=>{A.value.includes(Pe)||(e.uniqueOpened&&(A.value=A.value.filter($e=>ve.includes($e))),A.value.push(Pe),n("open",Pe,ve))},G=Pe=>{const ve=A.value.indexOf(Pe);ve!==-1&&A.value.splice(ve,1)},ie=(Pe,ve)=>{G(Pe),n("close",Pe,ve)},W=({index:Pe,indexPath:ve})=>{A.value.includes(Pe)?ie(Pe,ve):q(Pe,ve)},Y=Pe=>{(e.mode==="horizontal"||e.collapse)&&(A.value=[]);const{index:ve,indexPath:$e}=Pe;if(!(ea(ve)||ea($e)))if(e.router&&m){const Te=Pe.route||ve,Ae=m.push(Te).then(Ve=>(Ve||(P.value=ve),Ve));n("select",ve,$e,{index:ve,indexPath:$e,route:Te},Ae)}else P.value=ve,n("select",ve,$e,{index:ve,indexPath:$e})},J=Pe=>{var ve;const $e=D.value,Te=$e[Pe]||P.value&&$e[P.value]||$e[e.defaultActive];P.value=(ve=Te?.index)!=null?ve:Pe},re=Pe=>{const ve=getComputedStyle(Pe),$e=Number.parseInt(ve.marginLeft,10),Te=Number.parseInt(ve.marginRight,10);return Pe.offsetWidth+$e+Te||0},he=()=>{var Pe,ve;if(!b.value)return-1;const $e=Array.from((ve=(Pe=b.value)==null?void 0:Pe.childNodes)!=null?ve:[]).filter(Mt=>Mt.nodeName!=="#text"||Mt.nodeValue),Te=64,Ae=getComputedStyle(b.value),Ve=Number.parseInt(Ae.paddingLeft,10),We=Number.parseInt(Ae.paddingRight,10),ft=b.value.clientWidth-Ve-We;let at=0,ct=0;return $e.forEach((Mt,Ct)=>{Mt.nodeName!=="#comment"&&(at+=re(Mt),at<=ft-Te&&(ct=Ct+1))}),ct===$e.length?-1:ct},fe=Pe=>z.value[Pe].indexPath,ce=(Pe,ve=33.34)=>{let $e;return()=>{$e&&clearTimeout($e),$e=setTimeout(()=>{Pe()},ve)}};let me=!0;const we=()=>{if(M.value===he())return;const Pe=()=>{M.value=-1,dr(()=>{M.value=he()})};me?Pe():ce(Pe)(),me=!1};on(()=>e.defaultActive,Pe=>{D.value[Pe]||(P.value=""),J(Pe)}),on(()=>e.collapse,Pe=>{Pe&&(A.value=[])}),on(D.value,N);let ye;Da(()=>{e.mode==="horizontal"&&e.ellipsis?ye=so(b,we).stop:ye?.()});const Ue=Re(!1);{const Pe=Ae=>{z.value[Ae.index]=Ae},ve=Ae=>{delete z.value[Ae.index]};Ti("rootMenu",ts({props:e,openedMenus:A,items:D,subMenus:z,activeIndex:P,isMenuPopup:F,addMenuItem:Ae=>{D.value[Ae.index]=Ae},removeMenuItem:Ae=>{delete D.value[Ae.index]},addSubMenu:Pe,removeSubMenu:ve,openMenu:q,closeMenu:ie,handleMenuItemClick:Y,handleSubMenuClick:W})),Ti(`subMenu:${d.uid}`,{addSubMenu:Pe,removeSubMenu:ve,mouseInChild:Ue,level:0})}Zr(()=>{e.mode==="horizontal"&&new _0e(d.vnode.el,r.namespace.value)}),l({open:ve=>{const{indexPath:$e}=z.value[ve];$e.forEach(Te=>q(Te,$e))},close:G,updateActiveIndex:J,handleResize:we});const Ne=vz(e,0);return()=>{var Pe,ve;let $e=(ve=(Pe=s.default)==null?void 0:Pe.call(s))!=null?ve:[];const Te=[];if(e.mode==="horizontal"&&b.value){const We=ah($e),ft=M.value===-1?We:We.slice(0,M.value),at=M.value===-1?[]:We.slice(M.value);at?.length&&e.ellipsis&&($e=ft,Te.push(xr(M8,{index:"sub-menu-more",class:E.e("hide-arrow"),popperOffset:e.popperOffset},{title:()=>xr(rr,{class:E.e("icon-more")},{default:()=>xr(e.ellipsisIcon)}),default:()=>at})))}const Ae=e.closeOnClickOutside?[[yh,()=>{A.value.length&&(Ue.value||(A.value.forEach(We=>n("close",We,fe(We))),A.value=[]))}]]:[],Ve=Wr(xr("ul",{key:String(e.collapse),role:"menubar",ref:b,style:Ne.value,class:{[r.b()]:!0,[r.m(e.mode)]:!0,[r.m("collapse")]:e.collapse}},[...$e,...Te]),Ae);return e.collapseTransition&&e.mode==="vertical"?xr(b0e,()=>Ve):Ve}}});const T0e=bn({index:{type:wt([String,null]),default:null},route:{type:wt([String,Object])},disabled:Boolean}),I0e={click:e=>ir(e.index)&&mn(e.indexPath)},y6="ElMenuItem",k0e=xe({name:y6}),M0e=xe({...k0e,props:T0e,emits:I0e,setup(e,{expose:n,emit:s}){const l=e,d=oi(),m=Gn("rootMenu"),b=dn("menu"),r=dn("menu-item");m||No(y6,"can not inject root menu");const{parentMenu:E,indexPath:M}=_z(d,cs(l,"index")),A=Gn(`subMenu:${E.value.uid}`);A||No(y6,"can not inject sub menu");const P=se(()=>l.index===m.activeIndex),D=ts({index:l.index,indexPath:M,active:P}),z=()=>{l.disabled||(m.handleMenuItemClick({index:l.index,indexPath:M.value,route:l.route}),s("click",D))};return Zr(()=>{A.addSubMenu(D),m.addMenuItem(D)}),Ls(()=>{A.removeSubMenu(D),m.removeMenuItem(D)}),n({parentMenu:E,rootMenu:m,active:P,nsMenu:b,nsMenuItem:r,handleClick:z}),(F,N)=>(Z(),ue("li",{class:ge([w(r).b(),w(r).is("active",w(P)),w(r).is("disabled",F.disabled)]),role:"menuitem",tabindex:"-1",onClick:z},[w(E).type.name==="ElMenu"&&w(m).props.collapse&&F.$slots.title?(Z(),Bt(w(Na),{key:0,effect:w(m).props.popperEffect,placement:"right","fallback-placements":["left"],persistent:w(m).props.persistent},{content:mt(()=>[It(F.$slots,"title")]),default:mt(()=>[ae("div",{class:ge(w(b).be("tooltip","trigger"))},[It(F.$slots,"default")],2)]),_:3},8,["effect","persistent"])):(Z(),ue(cr,{key:1},[It(F.$slots,"default"),It(F.$slots,"title")],64))],2))}});var yz=En(M0e,[["__file","menu-item.vue"]]);const A0e={title:String},R0e=xe({name:"ElMenuItemGroup"}),P0e=xe({...R0e,props:A0e,setup(e){const n=dn("menu-item-group");return(s,l)=>(Z(),ue("li",{class:ge(w(n).b())},[ae("div",{class:ge(w(n).e("title"))},[s.$slots.title?It(s.$slots,"title",{key:1}):(Z(),ue(cr,{key:0},[ei(gn(s.title),1)],64))],2),ae("ul",null,[It(s.$slots,"default")])],2))}});var bz=En(P0e,[["__file","menu-item-group.vue"]]);const L0e=Gr(E0e,{MenuItem:yz,MenuItemGroup:bz,SubMenu:M8}),O0e=ao(yz),D0e=ao(bz),z0e=ao(M8),N0e=bn({icon:{type:bs,default:()=>oO},title:String,content:{type:String,default:""}}),F0e={back:()=>!0},B0e=xe({name:"ElPageHeader"}),V0e=xe({...B0e,props:N0e,emits:F0e,setup(e,{emit:n}){const{t:s}=Oi(),l=dn("page-header");function d(){n("back")}return(m,b)=>(Z(),ue("div",{class:ge([w(l).b(),{[w(l).m("has-breadcrumb")]:!!m.$slots.breadcrumb,[w(l).m("has-extra")]:!!m.$slots.extra,[w(l).is("contentful")]:!!m.$slots.default}])},[m.$slots.breadcrumb?(Z(),ue("div",{key:0,class:ge(w(l).e("breadcrumb"))},[It(m.$slots,"breadcrumb")],2)):At("v-if",!0),ae("div",{class:ge(w(l).e("header"))},[ae("div",{class:ge(w(l).e("left"))},[ae("div",{class:ge(w(l).e("back")),role:"button",tabindex:"0",onClick:d},[m.icon||m.$slots.icon?(Z(),ue("div",{key:0,"aria-label":m.title||w(s)("el.pageHeader.title"),class:ge(w(l).e("icon"))},[It(m.$slots,"icon",{},()=>[m.icon?(Z(),Bt(w(rr),{key:0},{default:mt(()=>[(Z(),Bt(si(m.icon)))]),_:1})):At("v-if",!0)])],10,["aria-label"])):At("v-if",!0),ae("div",{class:ge(w(l).e("title"))},[It(m.$slots,"title",{},()=>[ei(gn(m.title||w(s)("el.pageHeader.title")),1)])],2)],2),st(w(rz),{direction:"vertical"}),ae("div",{class:ge(w(l).e("content"))},[It(m.$slots,"content",{},()=>[ei(gn(m.content),1)])],2)],2),m.$slots.extra?(Z(),ue("div",{key:0,class:ge(w(l).e("extra"))},[It(m.$slots,"extra")],2)):At("v-if",!0)],2),m.$slots.default?(Z(),ue("div",{key:1,class:ge(w(l).e("main"))},[It(m.$slots,"default")],2)):At("v-if",!0)],2))}});var $0e=En(V0e,[["__file","page-header.vue"]]);const H0e=Gr($0e),xz=Symbol("elPaginationKey"),U0e=bn({disabled:Boolean,currentPage:{type:Number,default:1},prevText:{type:String},prevIcon:{type:bs}}),j0e={click:e=>e instanceof MouseEvent},G0e=xe({name:"ElPaginationPrev"}),q0e=xe({...G0e,props:U0e,emits:j0e,setup(e){const n=e,{t:s}=Oi(),l=se(()=>n.disabled||n.currentPage<=1);return(d,m)=>(Z(),ue("button",{type:"button",class:"btn-prev",disabled:w(l),"aria-label":d.prevText||w(s)("el.pagination.prev"),"aria-disabled":w(l),onClick:b=>d.$emit("click",b)},[d.prevText?(Z(),ue("span",{key:0},gn(d.prevText),1)):(Z(),Bt(w(rr),{key:1},{default:mt(()=>[(Z(),Bt(si(d.prevIcon)))]),_:1}))],8,["disabled","aria-label","aria-disabled","onClick"]))}});var W0e=En(q0e,[["__file","prev.vue"]]);const K0e=bn({disabled:Boolean,currentPage:{type:Number,default:1},pageCount:{type:Number,default:50},nextText:{type:String},nextIcon:{type:bs}}),Y0e=xe({name:"ElPaginationNext"}),Z0e=xe({...Y0e,props:K0e,emits:["click"],setup(e){const n=e,{t:s}=Oi(),l=se(()=>n.disabled||n.currentPage===n.pageCount||n.pageCount===0);return(d,m)=>(Z(),ue("button",{type:"button",class:"btn-next",disabled:w(l),"aria-label":d.nextText||w(s)("el.pagination.next"),"aria-disabled":w(l),onClick:b=>d.$emit("click",b)},[d.nextText?(Z(),ue("span",{key:0},gn(d.nextText),1)):(Z(),Bt(w(rr),{key:1},{default:mt(()=>[(Z(),Bt(si(d.nextIcon)))]),_:1}))],8,["disabled","aria-label","aria-disabled","onClick"]))}});var X0e=En(Z0e,[["__file","next.vue"]]);const wz=Symbol("ElSelectGroup"),m0=Symbol("ElSelect"),b6="ElOption",J0e=bn({value:{type:[String,Number,Boolean,Object],required:!0},label:{type:[String,Number]},created:Boolean,disabled:Boolean});function Q0e(e,n){const s=Gn(m0);s||No(b6,"usage: <el-select><el-option /></el-select/>");const l=Gn(wz,{disabled:!1}),d=se(()=>A(el(s.props.modelValue),e.value)),m=se(()=>{var z;if(s.props.multiple){const F=el((z=s.props.modelValue)!=null?z:[]);return!d.value&&F.length>=s.props.multipleLimit&&s.props.multipleLimit>0}else return!1}),b=se(()=>e.label||(Yr(e.value)?"":e.value)),r=se(()=>e.value||e.label||""),E=se(()=>e.disabled||n.groupDisabled||m.value),M=oi(),A=(z=[],F)=>{if(Yr(e.value)){const N=s.props.valueKey;return z&&z.some(q=>Os(To(q,N))===To(F,N))}else return z&&z.includes(F)},P=()=>{!e.disabled&&!l.disabled&&(s.states.hoveringIndex=s.optionsArray.indexOf(M.proxy))},D=z=>{const F=new RegExp(h8(z),"i");n.visible=F.test(String(b.value))||e.created};return on(()=>b.value,()=>{!e.created&&!s.props.remote&&s.setSelected()}),on(()=>e.value,(z,F)=>{const{remote:N,valueKey:q}=s.props;if((N?z!==F:!la(z,F))&&(s.onOptionDestroy(F,M.proxy),s.onOptionCreate(M.proxy)),!e.created&&!N){if(q&&Yr(z)&&Yr(F)&&z[q]===F[q])return;s.setSelected()}}),on(()=>l.disabled,()=>{n.groupDisabled=l.disabled},{immediate:!0}),{select:s,currentLabel:b,currentValue:r,itemSelected:d,isDisabled:E,hoverItem:P,updateOption:D}}const e_e=xe({name:b6,componentName:b6,props:J0e,setup(e){const n=dn("select"),s=Ea(),l=se(()=>[n.be("dropdown","item"),n.is("disabled",w(r)),n.is("selected",w(b)),n.is("hovering",w(D))]),d=ts({index:-1,groupDisabled:!1,visible:!0,hover:!1}),{currentLabel:m,itemSelected:b,isDisabled:r,select:E,hoverItem:M,updateOption:A}=Q0e(e,d),{visible:P,hover:D}=da(d),z=oi().proxy;E.onOptionCreate(z),Ls(()=>{const N=z.value,{selected:q}=E.states,G=q.some(ie=>ie.value===z.value);dr(()=>{E.states.cachedOptions.get(N)===z&&!G&&E.states.cachedOptions.delete(N)}),E.onOptionDestroy(N,z)});function F(){r.value||E.handleOptionSelect(z)}return{ns:n,id:s,containerKls:l,currentLabel:m,itemSelected:b,isDisabled:r,select:E,visible:P,hover:D,states:d,hoverItem:M,updateOption:A,selectOptionClick:F}}});function t_e(e,n){return Wr((Z(),ue("li",{id:e.id,class:ge(e.containerKls),role:"option","aria-disabled":e.isDisabled||void 0,"aria-selected":e.itemSelected,onMousemove:e.hoverItem,onClick:Er(e.selectOptionClick,["stop"])},[It(e.$slots,"default",{},()=>[ae("span",null,gn(e.currentLabel),1)])],42,["id","aria-disabled","aria-selected","onMousemove","onClick"])),[[Ki,e.visible]])}var A8=En(e_e,[["render",t_e],["__file","option.vue"]]);const n_e=xe({name:"ElSelectDropdown",componentName:"ElSelectDropdown",setup(){const e=Gn(m0),n=dn("select"),s=se(()=>e.props.popperClass),l=se(()=>e.props.multiple),d=se(()=>e.props.fitInputWidth),m=Re("");function b(){var r;m.value=`${(r=e.selectRef)==null?void 0:r.offsetWidth}px`}return Zr(()=>{b(),so(e.selectRef,b)}),{ns:n,minWidth:m,popperClass:s,isMultiple:l,isFitInputWidth:d}}});function r_e(e,n,s,l,d,m){return Z(),ue("div",{class:ge([e.ns.b("dropdown"),e.ns.is("multiple",e.isMultiple),e.popperClass]),style:fr({[e.isFitInputWidth?"width":"minWidth"]:e.minWidth})},[e.$slots.header?(Z(),ue("div",{key:0,class:ge(e.ns.be("dropdown","header"))},[It(e.$slots,"header")],2)):At("v-if",!0),It(e.$slots,"default"),e.$slots.footer?(Z(),ue("div",{key:1,class:ge(e.ns.be("dropdown","footer"))},[It(e.$slots,"footer")],2)):At("v-if",!0)],6)}var i_e=En(n_e,[["render",r_e],["__file","select-dropdown.vue"]]);const s_e=(e,n)=>{const{t:s}=Oi(),l=Ea(),d=dn("select"),m=dn("input"),b=ts({inputValue:"",options:new Map,cachedOptions:new Map,optionValues:[],selected:[],selectionWidth:0,collapseItemWidth:0,selectedLabel:"",hoveringIndex:-1,previousQuery:null,inputHovering:!1,menuVisibleOnFocus:!1,isBeforeHide:!1}),r=Re(),E=Re(),M=Re(),A=Re(),P=Re(),D=Re(),z=Re(),F=Re(),N=Re(),q=Re(),G=Re(),{isComposing:ie,handleCompositionStart:W,handleCompositionUpdate:Y,handleCompositionEnd:J}=ay({afterComposition:je=>Kn(je)}),{wrapperRef:re,isFocused:he,handleBlur:fe}=Pf(P,{beforeFocus(){return ve.value},afterFocus(){e.automaticDropdown&&!ce.value&&(ce.value=!0,b.menuVisibleOnFocus=!0)},beforeBlur(je){var _t,Nt;return((_t=M.value)==null?void 0:_t.isFocusInsideContent(je))||((Nt=A.value)==null?void 0:Nt.isFocusInsideContent(je))},afterBlur(){var je;ce.value=!1,b.menuVisibleOnFocus=!1,e.validateEvent&&((je=ye?.validate)==null||je.call(ye,"blur").catch(_t=>void 0))}}),ce=Re(!1),me=Re(),{form:we,formItem:ye}=Fa(),{inputId:Ue}=Du(e,{formItemContext:ye}),{valueOnClear:Ne,isEmptyValue:Pe}=vx(e),ve=se(()=>e.disabled||we?.disabled),$e=se(()=>mn(e.modelValue)?e.modelValue.length>0:!Pe(e.modelValue)),Te=se(()=>{var je;return(je=we?.statusIcon)!=null?je:!1}),Ae=se(()=>e.clearable&&!ve.value&&b.inputHovering&&$e.value),Ve=se(()=>e.remote&&e.filterable&&!e.remoteShowSuffix?"":e.suffixIcon),We=se(()=>d.is("reverse",!!(Ve.value&&ce.value))),ft=se(()=>ye?.validateState||""),at=se(()=>ft.value&&Ex[ft.value]),ct=se(()=>e.remote?300:0),Mt=se(()=>e.remote&&!b.inputValue&&b.options.size===0),Ct=se(()=>e.loading?e.loadingText||s("el.select.loading"):e.filterable&&b.inputValue&&b.options.size>0&&gt.value===0?e.noMatchText||s("el.select.noMatch"):b.options.size===0?e.noDataText||s("el.select.noData"):null),gt=se(()=>Ke.value.filter(je=>je.visible).length),Ke=se(()=>{const je=Array.from(b.options.values()),_t=[];return b.optionValues.forEach(Nt=>{const Ft=je.findIndex(Sn=>Sn.value===Nt);Ft>-1&&_t.push(je[Ft])}),_t.length>=je.length?_t:je}),Lt=se(()=>Array.from(b.cachedOptions.values())),xn=se(()=>{const je=Ke.value.filter(_t=>!_t.created).some(_t=>_t.currentLabel===b.inputValue);return e.filterable&&e.allowCreate&&b.inputValue!==""&&!je}),Ht=()=>{e.filterable&&hr(e.filterMethod)||e.filterable&&e.remote&&hr(e.remoteMethod)||Ke.value.forEach(je=>{var _t;(_t=je.updateOption)==null||_t.call(je,b.inputValue)})},le=Lo(),nt=se(()=>["small"].includes(le.value)?"small":"default"),Gt=se({get(){return ce.value&&!Mt.value},set(je){ce.value=je}}),an=se(()=>{if(e.multiple&&!Li(e.modelValue))return el(e.modelValue).length===0&&!b.inputValue;const je=mn(e.modelValue)?e.modelValue[0]:e.modelValue;return e.filterable||Li(je)?!b.inputValue:!0}),Qt=se(()=>{var je;const _t=(je=e.placeholder)!=null?je:s("el.select.placeholder");return e.multiple||!$e.value?_t:b.selectedLabel}),Zt=se(()=>Mb?null:"mouseenter");on(()=>e.modelValue,(je,_t)=>{e.multiple&&e.filterable&&!e.reserveKeyword&&(b.inputValue="",rn("")),fn(),!la(je,_t)&&e.validateEvent&&ye?.validate("change").catch(Nt=>void 0)},{flush:"post",deep:!0}),on(()=>ce.value,je=>{je?rn(b.inputValue):(b.inputValue="",b.previousQuery=null,b.isBeforeHide=!0),n("visible-change",je)}),on(()=>b.options.entries(),()=>{Pi&&(fn(),e.defaultFirstOption&&(e.filterable||e.remote)&&gt.value&&bt())},{flush:"post"}),on([()=>b.hoveringIndex,Ke],([je])=>{gr(je)&&je>-1?me.value=Ke.value[je]||{}:me.value={},Ke.value.forEach(_t=>{_t.hover=me.value===_t})}),Da(()=>{b.isBeforeHide||Ht()});const rn=je=>{b.previousQuery===je||ie.value||(b.previousQuery=je,e.filterable&&hr(e.filterMethod)?e.filterMethod(je):e.filterable&&e.remote&&hr(e.remoteMethod)&&e.remoteMethod(je),e.defaultFirstOption&&(e.filterable||e.remote)&&gt.value?dr(bt):dr(Vn))},bt=()=>{const je=Ke.value.filter(Sn=>Sn.visible&&!Sn.disabled&&!Sn.states.groupDisabled),_t=je.find(Sn=>Sn.created),Nt=je[0],Ft=Ke.value.map(Sn=>Sn.value);b.hoveringIndex=it(Ft,_t||Nt)},fn=()=>{if(e.multiple)b.selectedLabel="";else{const _t=mn(e.modelValue)?e.modelValue[0]:e.modelValue,Nt=pn(_t);b.selectedLabel=Nt.currentLabel,b.selected=[Nt];return}const je=[];Li(e.modelValue)||el(e.modelValue).forEach(_t=>{je.push(pn(_t))}),b.selected=je},pn=je=>{let _t;const Nt=bv(je);for(let qn=b.cachedOptions.size-1;qn>=0;qn--){const Wn=Lt.value[qn];if(Nt?To(Wn.value,e.valueKey)===To(je,e.valueKey):Wn.value===je){_t={value:je,currentLabel:Wn.currentLabel,get isDisabled(){return Wn.isDisabled}};break}}if(_t)return _t;const Ft=Nt?je.label:je??"";return{value:je,currentLabel:Ft}},Vn=()=>{b.hoveringIndex=Ke.value.findIndex(je=>b.selected.some(_t=>gi(_t)===gi(je)))},Nn=()=>{b.selectionWidth=E.value.getBoundingClientRect().width},Ot=()=>{b.collapseItemWidth=q.value.getBoundingClientRect().width},Bn=()=>{var je,_t;(_t=(je=M.value)==null?void 0:je.updatePopper)==null||_t.call(je)},Sr=()=>{var je,_t;(_t=(je=A.value)==null?void 0:je.updatePopper)==null||_t.call(je)},Ur=()=>{b.inputValue.length>0&&!ce.value&&(ce.value=!0),rn(b.inputValue)},Kn=je=>{if(b.inputValue=je.target.value,e.remote)ui();else return Ur()},ui=Vl(()=>{Ur()},ct.value),wr=je=>{la(e.modelValue,je)||n(mi,je)},Tr=je=>FL(je,_t=>{const Nt=b.cachedOptions.get(_t);return Nt&&!Nt.disabled&&!Nt.states.groupDisabled}),pr=je=>{if(e.multiple&&je.code!==Un.delete&&je.target.value.length<=0){const _t=el(e.modelValue).slice(),Nt=Tr(_t);if(Nt<0)return;const Ft=_t[Nt];_t.splice(Nt,1),n(Nr,_t),wr(_t),n("remove-tag",Ft)}},Fr=(je,_t)=>{const Nt=b.selected.indexOf(_t);if(Nt>-1&&!ve.value){const Ft=el(e.modelValue).slice();Ft.splice(Nt,1),n(Nr,Ft),wr(Ft),n("remove-tag",_t.value)}je.stopPropagation(),Qs()},vt=je=>{je.stopPropagation();const _t=e.multiple?[]:Ne.value;if(e.multiple)for(const Nt of b.selected)Nt.isDisabled&&_t.push(Nt.value);n(Nr,_t),wr(_t),b.hoveringIndex=-1,ce.value=!1,n("clear"),Qs()},yt=je=>{var _t;if(e.multiple){const Nt=el((_t=e.modelValue)!=null?_t:[]).slice(),Ft=it(Nt,je);Ft>-1?Nt.splice(Ft,1):(e.multipleLimit<=0||Nt.length<e.multipleLimit)&&Nt.push(je.value),n(Nr,Nt),wr(Nt),je.created&&rn(""),e.filterable&&!e.reserveKeyword&&(b.inputValue="")}else n(Nr,je.value),wr(je.value),ce.value=!1;Qs(),!ce.value&&dr(()=>{ln(je)})},it=(je,_t)=>Li(_t)?-1:Yr(_t.value)?je.findIndex(Nt=>la(To(Nt,e.valueKey),gi(_t))):je.indexOf(_t.value),ln=je=>{var _t,Nt,Ft,Sn,qn;const Wn=mn(je)?je[0]:je;let Ir=null;if(Wn?.value){const Mr=Ke.value.filter(Lr=>Lr.value===Wn.value);Mr.length>0&&(Ir=Mr[0].$el)}if(M.value&&Ir){const Mr=(Sn=(Ft=(Nt=(_t=M.value)==null?void 0:_t.popperRef)==null?void 0:Nt.contentRef)==null?void 0:Ft.querySelector)==null?void 0:Sn.call(Ft,`.${d.be("dropdown","wrap")}`);Mr&&$S(Mr,Ir)}(qn=G.value)==null||qn.handleScroll()},Xn=je=>{b.options.set(je.value,je),b.cachedOptions.set(je.value,je)},vr=(je,_t)=>{b.options.get(je)===_t&&b.options.delete(je)},Ii=se(()=>{var je,_t;return(_t=(je=M.value)==null?void 0:je.popperRef)==null?void 0:_t.contentRef}),ds=()=>{b.isBeforeHide=!1,dr(()=>{var je;(je=G.value)==null||je.update(),ln(b.selected)})},Qs=()=>{var je;(je=P.value)==null||je.focus()},Xs=()=>{var je;if(ce.value){ce.value=!1,dr(()=>{var _t;return(_t=P.value)==null?void 0:_t.blur()});return}(je=P.value)==null||je.blur()},ks=je=>{vt(je)},Rn=je=>{if(ce.value=!1,he.value){const _t=new FocusEvent("focus",je);dr(()=>fe(_t))}},Ri=()=>{b.inputValue.length>0?b.inputValue="":ce.value=!1},_r=()=>{ve.value||(Mb&&(b.inputHovering=!0),b.menuVisibleOnFocus?b.menuVisibleOnFocus=!1:ce.value=!ce.value)},pa=()=>{if(!ce.value)_r();else{const je=Ke.value[b.hoveringIndex];je&&!je.isDisabled&&yt(je)}},gi=je=>Yr(je.value)?To(je.value,e.valueKey):je.value,Ut=se(()=>Ke.value.filter(je=>je.visible).every(je=>je.isDisabled)),ke=se(()=>e.multiple?e.collapseTags?b.selected.slice(0,e.maxCollapseTags):b.selected:[]),Oe=se(()=>e.multiple?e.collapseTags?b.selected.slice(e.maxCollapseTags):[]:[]),Ye=je=>{if(!ce.value){ce.value=!0;return}if(!(b.options.size===0||gt.value===0||ie.value)&&!Ut.value){je==="next"?(b.hoveringIndex++,b.hoveringIndex===b.options.size&&(b.hoveringIndex=0)):je==="prev"&&(b.hoveringIndex--,b.hoveringIndex<0&&(b.hoveringIndex=b.options.size-1));const _t=Ke.value[b.hoveringIndex];(_t.isDisabled||!_t.visible)&&Ye(je),dr(()=>ln(me.value))}},dt=()=>{if(!E.value)return 0;const je=window.getComputedStyle(E.value);return Number.parseFloat(je.gap||"6px")},tt=se(()=>{const je=dt();return{maxWidth:`${q.value&&e.maxCollapseTags===1?b.selectionWidth-b.collapseItemWidth-je:b.selectionWidth}px`}}),Tt=se(()=>({maxWidth:`${b.selectionWidth}px`})),$t=je=>{n("popup-scroll",je)};return so(E,Nn),so(F,Bn),so(re,Bn),so(N,Sr),so(q,Ot),Zr(()=>{fn()}),{inputId:Ue,contentId:l,nsSelect:d,nsInput:m,states:b,isFocused:he,expanded:ce,optionsArray:Ke,hoverOption:me,selectSize:le,filteredOptionsCount:gt,updateTooltip:Bn,updateTagTooltip:Sr,debouncedOnInputChange:ui,onInput:Kn,deletePrevTag:pr,deleteTag:Fr,deleteSelected:vt,handleOptionSelect:yt,scrollToOption:ln,hasModelValue:$e,shouldShowPlaceholder:an,currentPlaceholder:Qt,mouseEnterEventName:Zt,needStatusIcon:Te,showClose:Ae,iconComponent:Ve,iconReverse:We,validateState:ft,validateIcon:at,showNewOption:xn,updateOptions:Ht,collapseTagSize:nt,setSelected:fn,selectDisabled:ve,emptyText:Ct,handleCompositionStart:W,handleCompositionUpdate:Y,handleCompositionEnd:J,onOptionCreate:Xn,onOptionDestroy:vr,handleMenuEnter:ds,focus:Qs,blur:Xs,handleClearClick:ks,handleClickOutside:Rn,handleEsc:Ri,toggleMenu:_r,selectOption:pa,getValueKey:gi,navigateOptions:Ye,dropdownMenuVisible:Gt,showTagList:ke,collapseTagList:Oe,popupScroll:$t,tagStyle:tt,collapseTagStyle:Tt,popperRef:Ii,inputRef:P,tooltipRef:M,tagTooltipRef:A,prefixRef:D,suffixRef:z,selectRef:r,wrapperRef:re,selectionRef:E,scrollbarRef:G,menuRef:F,tagMenuRef:N,collapseItemRef:q}};var o_e=xe({name:"ElOptions",setup(e,{slots:n}){const s=Gn(m0);let l=[];return()=>{var d,m;const b=(d=n.default)==null?void 0:d.call(n),r=[];function E(M){mn(M)&&M.forEach(A=>{var P,D,z,F;const N=(P=A?.type||{})==null?void 0:P.name;N==="ElOptionGroup"?E(!ir(A.children)&&!mn(A.children)&&hr((D=A.children)==null?void 0:D.default)?(z=A.children)==null?void 0:z.default():A.children):N==="ElOption"?r.push((F=A.props)==null?void 0:F.value):mn(A.children)&&E(A.children)})}return b.length&&E((m=b[0])==null?void 0:m.children),la(r,l)||(l=r,s&&(s.states.optionValues=r)),b}}});const a_e=bn({name:String,id:String,modelValue:{type:wt([Array,String,Number,Boolean,Object]),default:void 0},autocomplete:{type:String,default:"off"},automaticDropdown:Boolean,size:Fo,effect:{type:wt(String),default:"light"},disabled:Boolean,clearable:Boolean,filterable:Boolean,allowCreate:Boolean,loading:Boolean,popperClass:{type:String,default:""},popperOptions:{type:wt(Object),default:()=>({})},remote:Boolean,loadingText:String,noMatchText:String,noDataText:String,remoteMethod:Function,filterMethod:Function,multiple:Boolean,multipleLimit:{type:Number,default:0},placeholder:{type:String},defaultFirstOption:Boolean,reserveKeyword:{type:Boolean,default:!0},valueKey:{type:String,default:"value"},collapseTags:Boolean,collapseTagsTooltip:Boolean,maxCollapseTags:{type:Number,default:1},teleported:Ao.teleported,persistent:{type:Boolean,default:!0},clearIcon:{type:bs,default:Td},fitInputWidth:Boolean,suffixIcon:{type:bs,default:Ed},tagType:{...vh.type,default:"info"},tagEffect:{...vh.effect,default:"light"},validateEvent:{type:Boolean,default:!0},remoteShowSuffix:Boolean,showArrow:{type:Boolean,default:!0},offset:{type:Number,default:12},placement:{type:wt(String),values:Eh,default:"bottom-start"},fallbackPlacements:{type:wt(Array),default:["bottom-start","top-start","right","left"]},tabindex:{type:[String,Number],default:0},appendTo:Ao.appendTo,...c0,...Ta(["ariaLabel"])});MO.scroll;const hA="ElSelect",l_e=xe({name:hA,componentName:hA,components:{ElSelectMenu:i_e,ElOption:A8,ElOptions:o_e,ElTag:Wg,ElScrollbar:Id,ElTooltip:Na,ElIcon:rr},directives:{ClickOutside:yh},props:a_e,emits:[Nr,mi,"remove-tag","clear","visible-change","focus","blur","popup-scroll"],setup(e,{emit:n}){const s=se(()=>{const{modelValue:E,multiple:M}=e,A=M?[]:void 0;return mn(E)?M?E:A:M?A:E}),l=ts({...da(e),modelValue:s}),d=s_e(l,n),{calculatorRef:m,inputStyle:b}=k8();Ti(m0,ts({props:l,states:d.states,selectRef:d.selectRef,optionsArray:d.optionsArray,setSelected:d.setSelected,handleOptionSelect:d.handleOptionSelect,onOptionCreate:d.onOptionCreate,onOptionDestroy:d.onOptionDestroy}));const r=se(()=>e.multiple?d.states.selected.map(E=>E.currentLabel):d.states.selectedLabel);return{...d,modelValue:s,selectedLabel:r,calculatorRef:m,inputStyle:b}}});function u_e(e,n){const s=fi("el-tag"),l=fi("el-tooltip"),d=fi("el-icon"),m=fi("el-option"),b=fi("el-options"),r=fi("el-scrollbar"),E=fi("el-select-menu"),M=ax("click-outside");return Wr((Z(),ue("div",{ref:"selectRef",class:ge([e.nsSelect.b(),e.nsSelect.m(e.selectSize)]),[iv(e.mouseEnterEventName)]:A=>e.states.inputHovering=!0,onMouseleave:A=>e.states.inputHovering=!1},[st(l,{ref:"tooltipRef",visible:e.dropdownMenuVisible,placement:e.placement,teleported:e.teleported,"popper-class":[e.nsSelect.e("popper"),e.popperClass],"popper-options":e.popperOptions,"fallback-placements":e.fallbackPlacements,effect:e.effect,pure:"",trigger:"click",transition:`${e.nsSelect.namespace.value}-zoom-in-top`,"stop-popper-mouse-event":!1,"gpu-acceleration":!1,persistent:e.persistent,"append-to":e.appendTo,"show-arrow":e.showArrow,offset:e.offset,onBeforeShow:e.handleMenuEnter,onHide:A=>e.states.isBeforeHide=!1},{default:mt(()=>{var A;return[ae("div",{ref:"wrapperRef",class:ge([e.nsSelect.e("wrapper"),e.nsSelect.is("focused",e.isFocused),e.nsSelect.is("hovering",e.states.inputHovering),e.nsSelect.is("filterable",e.filterable),e.nsSelect.is("disabled",e.selectDisabled)]),onClick:Er(e.toggleMenu,["prevent"])},[e.$slots.prefix?(Z(),ue("div",{key:0,ref:"prefixRef",class:ge(e.nsSelect.e("prefix"))},[It(e.$slots,"prefix")],2)):At("v-if",!0),ae("div",{ref:"selectionRef",class:ge([e.nsSelect.e("selection"),e.nsSelect.is("near",e.multiple&&!e.$slots.prefix&&!!e.states.selected.length)])},[e.multiple?It(e.$slots,"tag",{key:0},()=>[(Z(!0),ue(cr,null,Ei(e.showTagList,P=>(Z(),ue("div",{key:e.getValueKey(P),class:ge(e.nsSelect.e("selected-item"))},[st(s,{closable:!e.selectDisabled&&!P.isDisabled,size:e.collapseTagSize,type:e.tagType,effect:e.tagEffect,"disable-transitions":"",style:fr(e.tagStyle),onClose:D=>e.deleteTag(D,P)},{default:mt(()=>[ae("span",{class:ge(e.nsSelect.e("tags-text"))},[It(e.$slots,"label",{label:P.currentLabel,value:P.value},()=>[ei(gn(P.currentLabel),1)])],2)]),_:2},1032,["closable","size","type","effect","style","onClose"])],2))),128)),e.collapseTags&&e.states.selected.length>e.maxCollapseTags?(Z(),Bt(l,{key:0,ref:"tagTooltipRef",disabled:e.dropdownMenuVisible||!e.collapseTagsTooltip,"fallback-placements":["bottom","top","right","left"],effect:e.effect,placement:"bottom",teleported:e.teleported},{default:mt(()=>[ae("div",{ref:"collapseItemRef",class:ge(e.nsSelect.e("selected-item"))},[st(s,{closable:!1,size:e.collapseTagSize,type:e.tagType,effect:e.tagEffect,"disable-transitions":"",style:fr(e.collapseTagStyle)},{default:mt(()=>[ae("span",{class:ge(e.nsSelect.e("tags-text"))}," + "+gn(e.states.selected.length-e.maxCollapseTags),3)]),_:1},8,["size","type","effect","style"])],2)]),content:mt(()=>[ae("div",{ref:"tagMenuRef",class:ge(e.nsSelect.e("selection"))},[(Z(!0),ue(cr,null,Ei(e.collapseTagList,P=>(Z(),ue("div",{key:e.getValueKey(P),class:ge(e.nsSelect.e("selected-item"))},[st(s,{class:"in-tooltip",closable:!e.selectDisabled&&!P.isDisabled,size:e.collapseTagSize,type:e.tagType,effect:e.tagEffect,"disable-transitions":"",onClose:D=>e.deleteTag(D,P)},{default:mt(()=>[ae("span",{class:ge(e.nsSelect.e("tags-text"))},[It(e.$slots,"label",{label:P.currentLabel,value:P.value},()=>[ei(gn(P.currentLabel),1)])],2)]),_:2},1032,["closable","size","type","effect","onClose"])],2))),128))],2)]),_:3},8,["disabled","effect","teleported"])):At("v-if",!0)]):At("v-if",!0),ae("div",{class:ge([e.nsSelect.e("selected-item"),e.nsSelect.e("input-wrapper"),e.nsSelect.is("hidden",!e.filterable)])},[Wr(ae("input",{id:e.inputId,ref:"inputRef","onUpdate:modelValue":P=>e.states.inputValue=P,type:"text",name:e.name,class:ge([e.nsSelect.e("input"),e.nsSelect.is(e.selectSize)]),disabled:e.selectDisabled,autocomplete:e.autocomplete,style:fr(e.inputStyle),tabindex:e.tabindex,role:"combobox",readonly:!e.filterable,spellcheck:"false","aria-activedescendant":((A=e.hoverOption)==null?void 0:A.id)||"","aria-controls":e.contentId,"aria-expanded":e.dropdownMenuVisible,"aria-label":e.ariaLabel,"aria-autocomplete":"none","aria-haspopup":"listbox",onKeydown:[Ps(Er(P=>e.navigateOptions("next"),["stop","prevent"]),["down"]),Ps(Er(P=>e.navigateOptions("prev"),["stop","prevent"]),["up"]),Ps(Er(e.handleEsc,["stop","prevent"]),["esc"]),Ps(Er(e.selectOption,["stop","prevent"]),["enter"]),Ps(Er(e.deletePrevTag,["stop"]),["delete"])],onCompositionstart:e.handleCompositionStart,onCompositionupdate:e.handleCompositionUpdate,onCompositionend:e.handleCompositionEnd,onInput:e.onInput,onClick:Er(e.toggleMenu,["stop"])},null,46,["id","onUpdate:modelValue","name","disabled","autocomplete","tabindex","readonly","aria-activedescendant","aria-controls","aria-expanded","aria-label","onKeydown","onCompositionstart","onCompositionupdate","onCompositionend","onInput","onClick"]),[[Jv,e.states.inputValue]]),e.filterable?(Z(),ue("span",{key:0,ref:"calculatorRef","aria-hidden":"true",class:ge(e.nsSelect.e("input-calculator")),textContent:gn(e.states.inputValue)},null,10,["textContent"])):At("v-if",!0)],2),e.shouldShowPlaceholder?(Z(),ue("div",{key:1,class:ge([e.nsSelect.e("selected-item"),e.nsSelect.e("placeholder"),e.nsSelect.is("transparent",!e.hasModelValue||e.expanded&&!e.states.inputValue)])},[e.hasModelValue?It(e.$slots,"label",{key:0,label:e.currentPlaceholder,value:e.modelValue},()=>[ae("span",null,gn(e.currentPlaceholder),1)]):(Z(),ue("span",{key:1},gn(e.currentPlaceholder),1))],2)):At("v-if",!0)],2),ae("div",{ref:"suffixRef",class:ge(e.nsSelect.e("suffix"))},[e.iconComponent&&!e.showClose?(Z(),Bt(d,{key:0,class:ge([e.nsSelect.e("caret"),e.nsSelect.e("icon"),e.iconReverse])},{default:mt(()=>[(Z(),Bt(si(e.iconComponent)))]),_:1},8,["class"])):At("v-if",!0),e.showClose&&e.clearIcon?(Z(),Bt(d,{key:1,class:ge([e.nsSelect.e("caret"),e.nsSelect.e("icon"),e.nsSelect.e("clear")]),onClick:e.handleClearClick},{default:mt(()=>[(Z(),Bt(si(e.clearIcon)))]),_:1},8,["class","onClick"])):At("v-if",!0),e.validateState&&e.validateIcon&&e.needStatusIcon?(Z(),Bt(d,{key:2,class:ge([e.nsInput.e("icon"),e.nsInput.e("validateIcon"),e.nsInput.is("loading",e.validateState==="validating")])},{default:mt(()=>[(Z(),Bt(si(e.validateIcon)))]),_:1},8,["class"])):At("v-if",!0)],2)],10,["onClick"])]}),content:mt(()=>[st(E,{ref:"menuRef"},{default:mt(()=>[e.$slots.header?(Z(),ue("div",{key:0,class:ge(e.nsSelect.be("dropdown","header")),onClick:Er(()=>{},["stop"])},[It(e.$slots,"header")],10,["onClick"])):At("v-if",!0),Wr(st(r,{id:e.contentId,ref:"scrollbarRef",tag:"ul","wrap-class":e.nsSelect.be("dropdown","wrap"),"view-class":e.nsSelect.be("dropdown","list"),class:ge([e.nsSelect.is("empty",e.filteredOptionsCount===0)]),role:"listbox","aria-label":e.ariaLabel,"aria-orientation":"vertical",onScroll:e.popupScroll},{default:mt(()=>[e.showNewOption?(Z(),Bt(m,{key:0,value:e.states.inputValue,created:!0},null,8,["value"])):At("v-if",!0),st(b,null,{default:mt(()=>[It(e.$slots,"default")]),_:3})]),_:3},8,["id","wrap-class","view-class","class","aria-label","onScroll"]),[[Ki,e.states.options.size>0&&!e.loading]]),e.$slots.loading&&e.loading?(Z(),ue("div",{key:1,class:ge(e.nsSelect.be("dropdown","loading"))},[It(e.$slots,"loading")],2)):e.loading||e.filteredOptionsCount===0?(Z(),ue("div",{key:2,class:ge(e.nsSelect.be("dropdown","empty"))},[It(e.$slots,"empty",{},()=>[ae("span",null,gn(e.emptyText),1)])],2)):At("v-if",!0),e.$slots.footer?(Z(),ue("div",{key:3,class:ge(e.nsSelect.be("dropdown","footer")),onClick:Er(()=>{},["stop"])},[It(e.$slots,"footer")],10,["onClick"])):At("v-if",!0)]),_:3},512)]),_:3},8,["visible","placement","teleported","popper-class","popper-options","fallback-placements","effect","transition","persistent","append-to","show-arrow","offset","onBeforeShow","onHide"])],16,["onMouseleave"])),[[M,e.handleClickOutside,e.popperRef]])}var c_e=En(l_e,[["render",u_e],["__file","select.vue"]]);const d_e=xe({name:"ElOptionGroup",componentName:"ElOptionGroup",props:{label:String,disabled:Boolean},setup(e){const n=dn("select"),s=Re(),l=oi(),d=Re([]);Ti(wz,ts({...da(e)}));const m=se(()=>d.value.some(M=>M.visible===!0)),b=M=>{var A;return M.type.name==="ElOption"&&!!((A=M.component)!=null&&A.proxy)},r=M=>{const A=el(M),P=[];return A.forEach(D=>{var z;qs(D)&&(b(D)?P.push(D.component.proxy):mn(D.children)&&D.children.length?P.push(...r(D.children)):(z=D.component)!=null&&z.subTree&&P.push(...r(D.component.subTree)))}),P},E=()=>{d.value=r(l.subTree)};return Zr(()=>{E()}),GL(s,E,{attributes:!0,subtree:!0,childList:!0}),{groupRef:s,visible:m,ns:n}}});function h_e(e,n,s,l,d,m){return Wr((Z(),ue("ul",{ref:"groupRef",class:ge(e.ns.be("group","wrap"))},[ae("li",{class:ge(e.ns.be("group","title"))},gn(e.label),3),ae("li",null,[ae("ul",{class:ge(e.ns.b("group"))},[It(e.$slots,"default")],2)])],2)),[[Ki,e.visible]])}var Sz=En(d_e,[["render",h_e],["__file","option-group.vue"]]);const Gp=Gr(c_e,{Option:A8,OptionGroup:Sz}),Nb=ao(A8),f_e=ao(Sz),R8=()=>Gn(xz,{}),p_e=bn({pageSize:{type:Number,required:!0},pageSizes:{type:wt(Array),default:()=>oo([10,20,30,40,50,100])},popperClass:{type:String},disabled:Boolean,teleported:Boolean,size:{type:String,values:Cd},appendSizeTo:String}),m_e=xe({name:"ElPaginationSizes"}),g_e=xe({...m_e,props:p_e,emits:["page-size-change"],setup(e,{emit:n}){const s=e,{t:l}=Oi(),d=dn("pagination"),m=R8(),b=Re(s.pageSize);on(()=>s.pageSizes,(M,A)=>{if(!la(M,A)&&mn(M)){const P=M.includes(s.pageSize)?s.pageSize:s.pageSizes[0];n("page-size-change",P)}}),on(()=>s.pageSize,M=>{b.value=M});const r=se(()=>s.pageSizes);function E(M){var A;M!==b.value&&(b.value=M,(A=m.handleSizeChange)==null||A.call(m,Number(M)))}return(M,A)=>(Z(),ue("span",{class:ge(w(d).e("sizes"))},[st(w(Gp),{"model-value":b.value,disabled:M.disabled,"popper-class":M.popperClass,size:M.size,teleported:M.teleported,"validate-event":!1,"append-to":M.appendSizeTo,onChange:E},{default:mt(()=>[(Z(!0),ue(cr,null,Ei(w(r),P=>(Z(),Bt(w(Nb),{key:P,value:P,label:P+w(l)("el.pagination.pagesize")},null,8,["value","label"]))),128))]),_:1},8,["model-value","disabled","popper-class","size","teleported","append-to"])],2))}});var __e=En(g_e,[["__file","sizes.vue"]]);const v_e=bn({size:{type:String,values:Cd}}),y_e=xe({name:"ElPaginationJumper"}),b_e=xe({...y_e,props:v_e,setup(e){const{t:n}=Oi(),s=dn("pagination"),{pageCount:l,disabled:d,currentPage:m,changeEvent:b}=R8(),r=Re(),E=se(()=>{var P;return(P=r.value)!=null?P:m?.value});function M(P){r.value=P?+P:""}function A(P){P=Math.trunc(+P),b?.(P),r.value=void 0}return(P,D)=>(Z(),ue("span",{class:ge(w(s).e("jump")),disabled:w(d)},[ae("span",{class:ge([w(s).e("goto")])},gn(w(n)("el.pagination.goto")),3),st(w(nl),{size:P.size,class:ge([w(s).e("editor"),w(s).is("in-pagination")]),min:1,max:w(l),disabled:w(d),"model-value":w(E),"validate-event":!1,"aria-label":w(n)("el.pagination.page"),type:"number","onUpdate:modelValue":M,onChange:A},null,8,["size","class","max","disabled","model-value","aria-label"]),ae("span",{class:ge([w(s).e("classifier")])},gn(w(n)("el.pagination.pageClassifier")),3)],10,["disabled"]))}});var x_e=En(b_e,[["__file","jumper.vue"]]);const w_e=bn({total:{type:Number,default:1e3}}),S_e=xe({name:"ElPaginationTotal"}),C_e=xe({...S_e,props:w_e,setup(e){const{t:n}=Oi(),s=dn("pagination"),{disabled:l}=R8();return(d,m)=>(Z(),ue("span",{class:ge(w(s).e("total")),disabled:w(l)},gn(w(n)("el.pagination.total",{total:d.total})),11,["disabled"]))}});var E_e=En(C_e,[["__file","total.vue"]]);const T_e=bn({currentPage:{type:Number,default:1},pageCount:{type:Number,required:!0},pagerCount:{type:Number,default:7},disabled:Boolean}),I_e=xe({name:"ElPaginationPager"}),k_e=xe({...I_e,props:T_e,emits:[mi],setup(e,{emit:n}){const s=e,l=dn("pager"),d=dn("icon"),{t:m}=Oi(),b=Re(!1),r=Re(!1),E=Re(!1),M=Re(!1),A=Re(!1),P=Re(!1),D=se(()=>{const Y=s.pagerCount,J=(Y-1)/2,re=Number(s.currentPage),he=Number(s.pageCount);let fe=!1,ce=!1;he>Y&&(re>Y-J&&(fe=!0),re<he-J&&(ce=!0));const me=[];if(fe&&!ce){const we=he-(Y-2);for(let ye=we;ye<he;ye++)me.push(ye)}else if(!fe&&ce)for(let we=2;we<Y;we++)me.push(we);else if(fe&&ce){const we=Math.floor(Y/2)-1;for(let ye=re-we;ye<=re+we;ye++)me.push(ye)}else for(let we=2;we<he;we++)me.push(we);return me}),z=se(()=>["more","btn-quickprev",d.b(),l.is("disabled",s.disabled)]),F=se(()=>["more","btn-quicknext",d.b(),l.is("disabled",s.disabled)]),N=se(()=>s.disabled?-1:0);Da(()=>{const Y=(s.pagerCount-1)/2;b.value=!1,r.value=!1,s.pageCount>s.pagerCount&&(s.currentPage>s.pagerCount-Y&&(b.value=!0),s.currentPage<s.pageCount-Y&&(r.value=!0))});function q(Y=!1){s.disabled||(Y?E.value=!0:M.value=!0)}function G(Y=!1){Y?A.value=!0:P.value=!0}function ie(Y){const J=Y.target;if(J.tagName.toLowerCase()==="li"&&Array.from(J.classList).includes("number")){const re=Number(J.textContent);re!==s.currentPage&&n(mi,re)}else J.tagName.toLowerCase()==="li"&&Array.from(J.classList).includes("more")&&W(Y)}function W(Y){const J=Y.target;if(J.tagName.toLowerCase()==="ul"||s.disabled)return;let re=Number(J.textContent);const he=s.pageCount,fe=s.currentPage,ce=s.pagerCount-2;J.className.includes("more")&&(J.className.includes("quickprev")?re=fe-ce:J.className.includes("quicknext")&&(re=fe+ce)),Number.isNaN(+re)||(re<1&&(re=1),re>he&&(re=he)),re!==fe&&n(mi,re)}return(Y,J)=>(Z(),ue("ul",{class:ge(w(l).b()),onClick:W,onKeyup:Ps(ie,["enter"])},[Y.pageCount>0?(Z(),ue("li",{key:0,class:ge([[w(l).is("active",Y.currentPage===1),w(l).is("disabled",Y.disabled)],"number"]),"aria-current":Y.currentPage===1,"aria-label":w(m)("el.pagination.currentPage",{pager:1}),tabindex:w(N)}," 1 ",10,["aria-current","aria-label","tabindex"])):At("v-if",!0),b.value?(Z(),ue("li",{key:1,class:ge(w(z)),tabindex:w(N),"aria-label":w(m)("el.pagination.prevPages",{pager:Y.pagerCount-2}),onMouseenter:re=>q(!0),onMouseleave:re=>E.value=!1,onFocus:re=>G(!0),onBlur:re=>A.value=!1},[(E.value||A.value)&&!Y.disabled?(Z(),Bt(w(mh),{key:0})):(Z(),Bt(w(X4),{key:1}))],42,["tabindex","aria-label","onMouseenter","onMouseleave","onFocus","onBlur"])):At("v-if",!0),(Z(!0),ue(cr,null,Ei(w(D),re=>(Z(),ue("li",{key:re,class:ge([[w(l).is("active",Y.currentPage===re),w(l).is("disabled",Y.disabled)],"number"]),"aria-current":Y.currentPage===re,"aria-label":w(m)("el.pagination.currentPage",{pager:re}),tabindex:w(N)},gn(re),11,["aria-current","aria-label","tabindex"]))),128)),r.value?(Z(),ue("li",{key:2,class:ge(w(F)),tabindex:w(N),"aria-label":w(m)("el.pagination.nextPages",{pager:Y.pagerCount-2}),onMouseenter:re=>q(),onMouseleave:re=>M.value=!1,onFocus:re=>G(),onBlur:re=>P.value=!1},[(M.value||P.value)&&!Y.disabled?(Z(),Bt(w(gh),{key:0})):(Z(),Bt(w(X4),{key:1}))],42,["tabindex","aria-label","onMouseenter","onMouseleave","onFocus","onBlur"])):At("v-if",!0),Y.pageCount>1?(Z(),ue("li",{key:3,class:ge([[w(l).is("active",Y.currentPage===Y.pageCount),w(l).is("disabled",Y.disabled)],"number"]),"aria-current":Y.currentPage===Y.pageCount,"aria-label":w(m)("el.pagination.currentPage",{pager:Y.pageCount}),tabindex:w(N)},gn(Y.pageCount),11,["aria-current","aria-label","tabindex"])):At("v-if",!0)],42,["onKeyup"]))}});var M_e=En(k_e,[["__file","pager.vue"]]);const pl=e=>typeof e!="number",A_e=bn({pageSize:Number,defaultPageSize:Number,total:Number,pageCount:Number,pagerCount:{type:Number,validator:e=>gr(e)&&Math.trunc(e)===e&&e>4&&e<22&&e%2===1,default:7},currentPage:Number,defaultCurrentPage:Number,layout:{type:String,default:["prev","pager","next","jumper","->","total"].join(", ")},pageSizes:{type:wt(Array),default:()=>oo([10,20,30,40,50,100])},popperClass:{type:String,default:""},prevText:{type:String,default:""},prevIcon:{type:bs,default:()=>ph},nextText:{type:String,default:""},nextIcon:{type:bs,default:()=>il},teleported:{type:Boolean,default:!0},small:Boolean,size:Fo,background:Boolean,disabled:Boolean,hideOnSinglePage:Boolean,appendSizeTo:String}),R_e={"update:current-page":e=>gr(e),"update:page-size":e=>gr(e),"size-change":e=>gr(e),change:(e,n)=>gr(e)&&gr(n),"current-change":e=>gr(e),"prev-click":e=>gr(e),"next-click":e=>gr(e)},fA="ElPagination";var P_e=xe({name:fA,props:A_e,emits:R_e,setup(e,{emit:n,slots:s}){const{t:l}=Oi(),d=dn("pagination"),m=oi().vnode.props||{},b=JL(),r=se(()=>{var J;return e.small?"small":(J=e.size)!=null?J:b.value});ch({from:"small",replacement:"size",version:"3.0.0",scope:"el-pagination",ref:"https://element-plus.org/zh-CN/component/pagination.html"},se(()=>!!e.small));const E="onUpdate:currentPage"in m||"onUpdate:current-page"in m||"onCurrentChange"in m,M="onUpdate:pageSize"in m||"onUpdate:page-size"in m||"onSizeChange"in m,A=se(()=>{if(pl(e.total)&&pl(e.pageCount)||!pl(e.currentPage)&&!E)return!1;if(e.layout.includes("sizes")){if(pl(e.pageCount)){if(!pl(e.total)&&!pl(e.pageSize)&&!M)return!1}else if(!M)return!1}return!0}),P=Re(pl(e.defaultPageSize)?10:e.defaultPageSize),D=Re(pl(e.defaultCurrentPage)?1:e.defaultCurrentPage),z=se({get(){return pl(e.pageSize)?P.value:e.pageSize},set(J){pl(e.pageSize)&&(P.value=J),M&&(n("update:page-size",J),n("size-change",J))}}),F=se(()=>{let J=0;return pl(e.pageCount)?pl(e.total)||(J=Math.max(1,Math.ceil(e.total/z.value))):J=e.pageCount,J}),N=se({get(){return pl(e.currentPage)?D.value:e.currentPage},set(J){let re=J;J<1?re=1:J>F.value&&(re=F.value),pl(e.currentPage)&&(D.value=re),E&&(n("update:current-page",re),n("current-change",re))}});on(F,J=>{N.value>J&&(N.value=J)}),on([N,z],J=>{n(mi,...J)},{flush:"post"});function q(J){N.value=J}function G(J){z.value=J;const re=F.value;N.value>re&&(N.value=re)}function ie(){e.disabled||(N.value-=1,n("prev-click",N.value))}function W(){e.disabled||(N.value+=1,n("next-click",N.value))}function Y(J,re){J&&(J.props||(J.props={}),J.props.class=[J.props.class,re].join(" "))}return Ti(xz,{pageCount:F,disabled:se(()=>e.disabled),currentPage:N,changeEvent:q,handleSizeChange:G}),()=>{var J,re;if(!A.value)return l("el.pagination.deprecationWarning"),null;if(!e.layout||e.hideOnSinglePage&&F.value<=1)return null;const he=[],fe=[],ce=xr("div",{class:d.e("rightwrapper")},fe),me={prev:xr(W0e,{disabled:e.disabled,currentPage:N.value,prevText:e.prevText,prevIcon:e.prevIcon,onClick:ie}),jumper:xr(x_e,{size:r.value}),pager:xr(M_e,{currentPage:N.value,pageCount:F.value,pagerCount:e.pagerCount,onChange:q,disabled:e.disabled}),next:xr(X0e,{disabled:e.disabled,currentPage:N.value,pageCount:F.value,nextText:e.nextText,nextIcon:e.nextIcon,onClick:W}),sizes:xr(__e,{pageSize:z.value,pageSizes:e.pageSizes,popperClass:e.popperClass,disabled:e.disabled,teleported:e.teleported,size:r.value,appendSizeTo:e.appendSizeTo}),slot:(re=(J=s?.default)==null?void 0:J.call(s))!=null?re:null,total:xr(E_e,{total:pl(e.total)?0:e.total})},we=e.layout.split(",").map(Ue=>Ue.trim());let ye=!1;return we.forEach(Ue=>{if(Ue==="->"){ye=!0;return}ye?fe.push(me[Ue]):he.push(me[Ue])}),Y(he[0],d.is("first")),Y(he[he.length-1],d.is("last")),ye&&fe.length>0&&(Y(fe[0],d.is("first")),Y(fe[fe.length-1],d.is("last")),he.push(ce)),xr("div",{class:[d.b(),d.is("background",e.background),d.m(r.value)]},he)}}});const L_e=Gr(P_e),O_e=bn({title:String,confirmButtonText:String,cancelButtonText:String,confirmButtonType:{type:String,values:Q4,default:"primary"},cancelButtonType:{type:String,values:Q4,default:"text"},icon:{type:bs,default:()=>_O},iconColor:{type:String,default:"#f90"},hideIcon:{type:Boolean,default:!1},hideAfter:{type:Number,default:200},teleported:Ao.teleported,persistent:Ao.persistent,width:{type:[String,Number],default:150}}),D_e={confirm:e=>e instanceof MouseEvent,cancel:e=>e instanceof MouseEvent},z_e=xe({name:"ElPopconfirm"}),N_e=xe({...z_e,props:O_e,emits:D_e,setup(e,{emit:n}){const s=e,{t:l}=Oi(),d=dn("popconfirm"),m=Re(),b=()=>{var D,z;(z=(D=m.value)==null?void 0:D.onClose)==null||z.call(D)},r=se(()=>({width:ho(s.width)})),E=D=>{n("confirm",D),b()},M=D=>{n("cancel",D),b()},A=se(()=>s.confirmButtonText||l("el.popconfirm.confirmButtonText")),P=se(()=>s.cancelButtonText||l("el.popconfirm.cancelButtonText"));return(D,z)=>(Z(),Bt(w(Na),pi({ref_key:"tooltipRef",ref:m,trigger:"click",effect:"light"},D.$attrs,{"popper-class":`${w(d).namespace.value}-popover`,"popper-style":w(r),teleported:D.teleported,"fallback-placements":["bottom","top","right","left"],"hide-after":D.hideAfter,persistent:D.persistent}),{content:mt(()=>[ae("div",{class:ge(w(d).b())},[ae("div",{class:ge(w(d).e("main"))},[!D.hideIcon&&D.icon?(Z(),Bt(w(rr),{key:0,class:ge(w(d).e("icon")),style:fr({color:D.iconColor})},{default:mt(()=>[(Z(),Bt(si(D.icon)))]),_:1},8,["class","style"])):At("v-if",!0),ei(" "+gn(D.title),1)],2),ae("div",{class:ge(w(d).e("action"))},[It(D.$slots,"actions",{confirm:E,cancel:M},()=>[st(w(ua),{size:"small",type:D.cancelButtonType==="text"?"":D.cancelButtonType,text:D.cancelButtonType==="text",onClick:M},{default:mt(()=>[ei(gn(w(P)),1)]),_:1},8,["type","text"]),st(w(ua),{size:"small",type:D.confirmButtonType==="text"?"":D.confirmButtonType,text:D.confirmButtonType==="text",onClick:E},{default:mt(()=>[ei(gn(w(A)),1)]),_:1},8,["type","text"])])],2)],2)]),default:mt(()=>[D.$slots.reference?It(D.$slots,"reference",{key:0}):At("v-if",!0)]),_:3},16,["popper-class","popper-style","teleported","hide-after","persistent"]))}});var F_e=En(N_e,[["__file","popconfirm.vue"]]);const B_e=Gr(F_e),V_e=bn({trigger:Ig.trigger,triggerKeys:Ig.triggerKeys,placement:J2.placement,disabled:Ig.disabled,visible:Ao.visible,transition:Ao.transition,popperOptions:J2.popperOptions,tabindex:J2.tabindex,content:Ao.content,popperStyle:Ao.popperStyle,popperClass:Ao.popperClass,enterable:{...Ao.enterable,default:!0},effect:{...Ao.effect,default:"light"},teleported:Ao.teleported,title:String,width:{type:[String,Number],default:150},offset:{type:Number,default:void 0},showAfter:{type:Number,default:0},hideAfter:{type:Number,default:200},autoClose:{type:Number,default:0},showArrow:{type:Boolean,default:!0},persistent:{type:Boolean,default:!0},"onUpdate:visible":{type:Function}}),$_e={"update:visible":e=>Ts(e),"before-enter":()=>!0,"before-leave":()=>!0,"after-enter":()=>!0,"after-leave":()=>!0},H_e="onUpdate:visible",U_e=xe({name:"ElPopover"}),j_e=xe({...U_e,props:V_e,emits:$_e,setup(e,{expose:n,emit:s}){const l=e,d=se(()=>l[H_e]),m=dn("popover"),b=Re(),r=se(()=>{var q;return(q=w(b))==null?void 0:q.popperRef}),E=se(()=>[{width:ho(l.width)},l.popperStyle]),M=se(()=>[m.b(),l.popperClass,{[m.m("plain")]:!!l.content}]),A=se(()=>l.transition===`${m.namespace.value}-fade-in-linear`),P=()=>{var q;(q=b.value)==null||q.hide()},D=()=>{s("before-enter")},z=()=>{s("before-leave")},F=()=>{s("after-enter")},N=()=>{s("update:visible",!1),s("after-leave")};return n({popperRef:r,hide:P}),(q,G)=>(Z(),Bt(w(Na),pi({ref_key:"tooltipRef",ref:b},q.$attrs,{trigger:q.trigger,"trigger-keys":q.triggerKeys,placement:q.placement,disabled:q.disabled,visible:q.visible,transition:q.transition,"popper-options":q.popperOptions,tabindex:q.tabindex,content:q.content,offset:q.offset,"show-after":q.showAfter,"hide-after":q.hideAfter,"auto-close":q.autoClose,"show-arrow":q.showArrow,"aria-label":q.title,effect:q.effect,enterable:q.enterable,"popper-class":w(M),"popper-style":w(E),teleported:q.teleported,persistent:q.persistent,"gpu-acceleration":w(A),"onUpdate:visible":w(d),onBeforeShow:D,onBeforeHide:z,onShow:F,onHide:N}),{content:mt(()=>[q.title?(Z(),ue("div",{key:0,class:ge(w(m).e("title")),role:"title"},gn(q.title),3)):At("v-if",!0),It(q.$slots,"default",{},()=>[ei(gn(q.content),1)])]),default:mt(()=>[q.$slots.reference?It(q.$slots,"reference",{key:0}):At("v-if",!0)]),_:3},16,["trigger","trigger-keys","placement","disabled","visible","transition","popper-options","tabindex","content","offset","show-after","hide-after","auto-close","show-arrow","aria-label","effect","enterable","popper-class","popper-style","teleported","persistent","gpu-acceleration","onUpdate:visible"]))}});var G_e=En(j_e,[["__file","popover.vue"]]);const pA=(e,n)=>{const s=n.arg||n.value,l=s?.popperRef;l&&(l.triggerRef=e)};var q_e={mounted(e,n){pA(e,n)},updated(e,n){pA(e,n)}};const W_e="popover",Cz=CY(q_e,W_e),K_e=Gr(G_e,{directive:Cz}),Y_e=bn({type:{type:String,default:"line",values:["line","circle","dashboard"]},percentage:{type:Number,default:0,validator:e=>e>=0&&e<=100},status:{type:String,default:"",values:["","success","exception","warning"]},indeterminate:Boolean,duration:{type:Number,default:3},strokeWidth:{type:Number,default:6},strokeLinecap:{type:wt(String),default:"round"},textInside:Boolean,width:{type:Number,default:126},showText:{type:Boolean,default:!0},color:{type:wt([String,Array,Function]),default:""},striped:Boolean,stripedFlow:Boolean,format:{type:wt(Function),default:e=>`${e}%`}}),Z_e=xe({name:"ElProgress"}),X_e=xe({...Z_e,props:Y_e,setup(e){const n=e,s={success:"#13ce66",exception:"#ff4949",warning:"#e6a23c",default:"#20a0ff"},l=dn("progress"),d=se(()=>{const W={width:`${n.percentage}%`,animationDuration:`${n.duration}s`},Y=ie(n.percentage);return Y.includes("gradient")?W.background=Y:W.backgroundColor=Y,W}),m=se(()=>(n.strokeWidth/n.width*100).toFixed(1)),b=se(()=>["circle","dashboard"].includes(n.type)?Number.parseInt(`${50-Number.parseFloat(m.value)/2}`,10):0),r=se(()=>{const W=b.value,Y=n.type==="dashboard";return`
          M 50 50
          m 0 ${Y?"":"-"}${W}
          a ${W} ${W} 0 1 1 0 ${Y?"-":""}${W*2}
          a ${W} ${W} 0 1 1 0 ${Y?"":"-"}${W*2}
          `}),E=se(()=>2*Math.PI*b.value),M=se(()=>n.type==="dashboard"?.75:1),A=se(()=>`${-1*E.value*(1-M.value)/2}px`),P=se(()=>({strokeDasharray:`${E.value*M.value}px, ${E.value}px`,strokeDashoffset:A.value})),D=se(()=>({strokeDasharray:`${E.value*M.value*(n.percentage/100)}px, ${E.value}px`,strokeDashoffset:A.value,transition:"stroke-dasharray 0.6s ease 0s, stroke 0.6s ease, opacity ease 0.6s"})),z=se(()=>{let W;return n.color?W=ie(n.percentage):W=s[n.status]||s.default,W}),F=se(()=>n.status==="warning"?sy:n.type==="line"?n.status==="success"?wx:Td:n.status==="success"?d0:du),N=se(()=>n.type==="line"?12+n.strokeWidth*.4:n.width*.111111+2),q=se(()=>n.format(n.percentage));function G(W){const Y=100/W.length;return W.map((re,he)=>ir(re)?{color:re,percentage:(he+1)*Y}:re).sort((re,he)=>re.percentage-he.percentage)}const ie=W=>{var Y;const{color:J}=n;if(hr(J))return J(W);if(ir(J))return J;{const re=G(J);for(const he of re)if(he.percentage>W)return he.color;return(Y=re[re.length-1])==null?void 0:Y.color}};return(W,Y)=>(Z(),ue("div",{class:ge([w(l).b(),w(l).m(W.type),w(l).is(W.status),{[w(l).m("without-text")]:!W.showText,[w(l).m("text-inside")]:W.textInside}]),role:"progressbar","aria-valuenow":W.percentage,"aria-valuemin":"0","aria-valuemax":"100"},[W.type==="line"?(Z(),ue("div",{key:0,class:ge(w(l).b("bar"))},[ae("div",{class:ge(w(l).be("bar","outer")),style:fr({height:`${W.strokeWidth}px`})},[ae("div",{class:ge([w(l).be("bar","inner"),{[w(l).bem("bar","inner","indeterminate")]:W.indeterminate},{[w(l).bem("bar","inner","striped")]:W.striped},{[w(l).bem("bar","inner","striped-flow")]:W.stripedFlow}]),style:fr(w(d))},[(W.showText||W.$slots.default)&&W.textInside?(Z(),ue("div",{key:0,class:ge(w(l).be("bar","innerText"))},[It(W.$slots,"default",{percentage:W.percentage},()=>[ae("span",null,gn(w(q)),1)])],2)):At("v-if",!0)],6)],6)],2)):(Z(),ue("div",{key:1,class:ge(w(l).b("circle")),style:fr({height:`${W.width}px`,width:`${W.width}px`})},[(Z(),ue("svg",{viewBox:"0 0 100 100"},[ae("path",{class:ge(w(l).be("circle","track")),d:w(r),stroke:`var(${w(l).cssVarName("fill-color-light")}, #e5e9f2)`,"stroke-linecap":W.strokeLinecap,"stroke-width":w(m),fill:"none",style:fr(w(P))},null,14,["d","stroke","stroke-linecap","stroke-width"]),ae("path",{class:ge(w(l).be("circle","path")),d:w(r),stroke:w(z),fill:"none",opacity:W.percentage?1:0,"stroke-linecap":W.strokeLinecap,"stroke-width":w(m),style:fr(w(D))},null,14,["d","stroke","opacity","stroke-linecap","stroke-width"])]))],6)),(W.showText||W.$slots.default)&&!W.textInside?(Z(),ue("div",{key:2,class:ge(w(l).e("text")),style:fr({fontSize:`${w(N)}px`})},[It(W.$slots,"default",{percentage:W.percentage},()=>[W.status?(Z(),Bt(w(rr),{key:1},{default:mt(()=>[(Z(),Bt(si(w(F))))]),_:1})):(Z(),ue("span",{key:0},gn(w(q)),1))])],6)):At("v-if",!0)],10,["aria-valuenow"]))}});var J_e=En(X_e,[["__file","progress.vue"]]);const Ez=Gr(J_e),Q_e=bn({modelValue:{type:Number,default:0},id:{type:String,default:void 0},lowThreshold:{type:Number,default:2},highThreshold:{type:Number,default:4},max:{type:Number,default:5},colors:{type:wt([Array,Object]),default:()=>oo(["","",""])},voidColor:{type:String,default:""},disabledVoidColor:{type:String,default:""},icons:{type:wt([Array,Object]),default:()=>[Q_,Q_,Q_]},voidIcon:{type:bs,default:()=>CO},disabledVoidIcon:{type:bs,default:()=>Q_},disabled:Boolean,allowHalf:Boolean,showText:Boolean,showScore:Boolean,textColor:{type:String,default:""},texts:{type:wt(Array),default:()=>oo(["Extremely bad","Disappointed","Fair","Satisfied","Surprise"])},scoreTemplate:{type:String,default:"{value}"},size:Fo,clearable:Boolean,...Ta(["ariaLabel"])}),eve={[mi]:e=>gr(e),[Nr]:e=>gr(e)},tve=xe({name:"ElRate"}),nve=xe({...tve,props:Q_e,emits:eve,setup(e,{expose:n,emit:s}){const l=e;function d(ve,$e){const Te=We=>Yr(We),Ae=Object.keys($e).map(We=>+We).filter(We=>{const ft=$e[We];return(Te(ft)?ft.excluded:!1)?ve<We:ve<=We}).sort((We,ft)=>We-ft),Ve=$e[Ae[0]];return Te(Ve)&&Ve.value||Ve}const m=Gn(Jp,void 0),b=Gn(xd,void 0),r=Lo(),E=dn("rate"),{inputId:M,isLabeledByFormItem:A}=Du(l,{formItemContext:b}),P=Re(l.modelValue),D=Re(-1),z=Re(!0),F=se(()=>[E.b(),E.m(r.value)]),N=se(()=>l.disabled||m?.disabled),q=se(()=>E.cssVarBlock({"void-color":l.voidColor,"disabled-void-color":l.disabledVoidColor,"fill-color":Y.value})),G=se(()=>{let ve="";return l.showScore?ve=l.scoreTemplate.replace(/\{\s*value\s*\}/,N.value?`${l.modelValue}`:`${P.value}`):l.showText&&(ve=l.texts[Math.ceil(P.value)-1]),ve}),ie=se(()=>l.modelValue*100-Math.floor(l.modelValue)*100),W=se(()=>mn(l.colors)?{[l.lowThreshold]:l.colors[0],[l.highThreshold]:{value:l.colors[1],excluded:!0},[l.max]:l.colors[2]}:l.colors),Y=se(()=>{const ve=d(P.value,W.value);return Yr(ve)?"":ve}),J=se(()=>{let ve="";return N.value?ve=`${ie.value}%`:l.allowHalf&&(ve="50%"),{color:Y.value,width:ve}}),re=se(()=>{let ve=mn(l.icons)?[...l.icons]:{...l.icons};return ve=lh(ve),mn(ve)?{[l.lowThreshold]:ve[0],[l.highThreshold]:{value:ve[1],excluded:!0},[l.max]:ve[2]}:ve}),he=se(()=>d(l.modelValue,re.value)),fe=se(()=>N.value?ir(l.disabledVoidIcon)?l.disabledVoidIcon:lh(l.disabledVoidIcon):ir(l.voidIcon)?l.voidIcon:lh(l.voidIcon)),ce=se(()=>d(P.value,re.value));function me(ve){const $e=N.value&&ie.value>0&&ve-1<l.modelValue&&ve>l.modelValue,Te=l.allowHalf&&z.value&&ve-.5<=P.value&&ve>P.value;return $e||Te}function we(ve){l.clearable&&ve===l.modelValue&&(ve=0),s(Nr,ve),l.modelValue!==ve&&s(mi,ve)}function ye(ve){N.value||(l.allowHalf&&z.value?we(P.value):we(ve))}function Ue(ve){if(N.value)return;let $e=P.value;const Te=ve.code;return Te===Un.up||Te===Un.right?(l.allowHalf?$e+=.5:$e+=1,ve.stopPropagation(),ve.preventDefault()):(Te===Un.left||Te===Un.down)&&(l.allowHalf?$e-=.5:$e-=1,ve.stopPropagation(),ve.preventDefault()),$e=$e<0?0:$e,$e=$e>l.max?l.max:$e,s(Nr,$e),s(mi,$e),$e}function Ne(ve,$e){if(!N.value){if(l.allowHalf&&$e){let Te=$e.target;Nl(Te,E.e("item"))&&(Te=Te.querySelector(`.${E.e("icon")}`)),(Te.clientWidth===0||Nl(Te,E.e("decimal")))&&(Te=Te.parentNode),z.value=$e.offsetX*2<=Te.clientWidth,P.value=z.value?ve-.5:ve}else P.value=ve;D.value=ve}}function Pe(){N.value||(l.allowHalf&&(z.value=l.modelValue!==Math.floor(l.modelValue)),P.value=l.modelValue,D.value=-1)}return on(()=>l.modelValue,ve=>{P.value=ve,z.value=l.modelValue!==Math.floor(l.modelValue)}),l.modelValue||s(Nr,0),n({setCurrentValue:Ne,resetCurrentValue:Pe}),(ve,$e)=>{var Te;return Z(),ue("div",{id:w(M),class:ge([w(F),w(E).is("disabled",w(N))]),role:"slider","aria-label":w(A)?void 0:ve.ariaLabel||"rating","aria-labelledby":w(A)?(Te=w(b))==null?void 0:Te.labelId:void 0,"aria-valuenow":P.value,"aria-valuetext":w(G)||void 0,"aria-valuemin":"0","aria-valuemax":ve.max,tabindex:"0",style:fr(w(q)),onKeydown:Ue},[(Z(!0),ue(cr,null,Ei(ve.max,(Ae,Ve)=>(Z(),ue("span",{key:Ve,class:ge(w(E).e("item")),onMousemove:We=>Ne(Ae,We),onMouseleave:Pe,onClick:We=>ye(Ae)},[st(w(rr),{class:ge([w(E).e("icon"),{hover:D.value===Ae},w(E).is("active",Ae<=P.value)])},{default:mt(()=>[me(Ae)?At("v-if",!0):(Z(),ue(cr,{key:0},[Wr((Z(),Bt(si(w(ce)),null,null,512)),[[Ki,Ae<=P.value]]),Wr((Z(),Bt(si(w(fe)),null,null,512)),[[Ki,!(Ae<=P.value)]])],64)),me(Ae)?(Z(),ue(cr,{key:1},[(Z(),Bt(si(w(fe)),{class:ge([w(E).em("decimal","box")])},null,8,["class"])),st(w(rr),{style:fr(w(J)),class:ge([w(E).e("icon"),w(E).e("decimal")])},{default:mt(()=>[(Z(),Bt(si(w(he))))]),_:1},8,["style","class"])],64)):At("v-if",!0)]),_:2},1032,["class"])],42,["onMousemove","onClick"]))),128)),ve.showText||ve.showScore?(Z(),ue("span",{key:0,class:ge(w(E).e("text")),style:fr({color:ve.textColor})},gn(w(G)),7)):At("v-if",!0)],46,["id","aria-label","aria-labelledby","aria-valuenow","aria-valuetext","aria-valuemax"])}}});var rve=En(nve,[["__file","rate.vue"]]);const ive=Gr(rve),gg={success:"icon-success",warning:"icon-warning",error:"icon-error",info:"icon-info"},mA={[gg.success]:uO,[gg.warning]:sy,[gg.error]:Sx,[gg.info]:Cx},sve=bn({title:{type:String,default:""},subTitle:{type:String,default:""},icon:{type:String,values:["success","warning","info","error"],default:"info"}}),ove=xe({name:"ElResult"}),ave=xe({...ove,props:sve,setup(e){const n=e,s=dn("result"),l=se(()=>{const d=n.icon,m=d&&gg[d]?gg[d]:"icon-info",b=mA[m]||mA["icon-info"];return{class:m,component:b}});return(d,m)=>(Z(),ue("div",{class:ge(w(s).b())},[ae("div",{class:ge(w(s).e("icon"))},[It(d.$slots,"icon",{},()=>[w(l).component?(Z(),Bt(si(w(l).component),{key:0,class:ge(w(l).class)},null,8,["class"])):At("v-if",!0)])],2),d.title||d.$slots.title?(Z(),ue("div",{key:0,class:ge(w(s).e("title"))},[It(d.$slots,"title",{},()=>[ae("p",null,gn(d.title),1)])],2)):At("v-if",!0),d.subTitle||d.$slots["sub-title"]?(Z(),ue("div",{key:1,class:ge(w(s).e("subtitle"))},[It(d.$slots,"sub-title",{},()=>[ae("p",null,gn(d.subTitle),1)])],2)):At("v-if",!0),d.$slots.extra?(Z(),ue("div",{key:2,class:ge(w(s).e("extra"))},[It(d.$slots,"extra")],2)):At("v-if",!0)],2))}});var lve=En(ave,[["__file","result.vue"]]);const uve=Gr(lve),cve=["start","center","end","space-around","space-between","space-evenly"],dve=["top","middle","bottom"],hve=bn({tag:{type:String,default:"div"},gutter:{type:Number,default:0},justify:{type:String,values:cve,default:"start"},align:{type:String,values:dve}}),fve=xe({name:"ElRow"}),pve=xe({...fve,props:hve,setup(e){const n=e,s=dn("row"),l=se(()=>n.gutter);Ti(RD,{gutter:l});const d=se(()=>{const b={};return n.gutter&&(b.marginRight=b.marginLeft=`-${n.gutter/2}px`),b}),m=se(()=>[s.b(),s.is(`justify-${n.justify}`,n.justify!=="start"),s.is(`align-${n.align}`,!!n.align)]);return(b,r)=>(Z(),Bt(si(b.tag),{class:ge(w(m)),style:fr(w(d))},{default:mt(()=>[It(b.$slots,"default")]),_:3},8,["class","style"]))}});var mve=En(pve,[["__file","row.vue"]]);const gve=Gr(mve),_ve=xe({props:{item:{type:Object,required:!0},style:{type:Object},height:Number},setup(){return{ns:dn("select")}}});function vve(e,n,s,l,d,m){return Z(),ue("div",{class:ge(e.ns.be("group","title")),style:fr({...e.style,lineHeight:`${e.height}px`})},gn(e.item.label),7)}var yve=En(_ve,[["render",vve],["__file","group-item.vue"]]);function bve(e,{emit:n}){return{hoverItem:()=>{e.disabled||n("hover",e.index)},selectOptionClick:()=>{e.disabled||n("select",e.item,e.index)}}}const Tz={label:"label",value:"value",disabled:"disabled",options:"options"};function Dx(e){const n=se(()=>({...Tz,...e.props}));return{aliasProps:n,getLabel:b=>To(b,n.value.label),getValue:b=>To(b,n.value.value),getDisabled:b=>To(b,n.value.disabled),getOptions:b=>To(b,n.value.options)}}const xve=bn({allowCreate:Boolean,autocomplete:{type:wt(String),default:"none"},automaticDropdown:Boolean,clearable:Boolean,clearIcon:{type:bs,default:Td},effect:{type:wt(String),default:"light"},collapseTags:Boolean,collapseTagsTooltip:Boolean,maxCollapseTags:{type:Number,default:1},defaultFirstOption:Boolean,disabled:Boolean,estimatedOptionHeight:{type:Number,default:void 0},filterable:Boolean,filterMethod:Function,height:{type:Number,default:274},itemHeight:{type:Number,default:34},id:String,loading:Boolean,loadingText:String,modelValue:{type:wt([Array,String,Number,Boolean,Object])},multiple:Boolean,multipleLimit:{type:Number,default:0},name:String,noDataText:String,noMatchText:String,remoteMethod:Function,reserveKeyword:{type:Boolean,default:!0},options:{type:wt(Array),required:!0},placeholder:{type:String},teleported:Ao.teleported,persistent:{type:Boolean,default:!0},popperClass:{type:String,default:""},popperOptions:{type:wt(Object),default:()=>({})},remote:Boolean,size:Fo,props:{type:wt(Object),default:()=>Tz},valueKey:{type:String,default:"value"},scrollbarAlwaysOn:Boolean,validateEvent:{type:Boolean,default:!0},offset:{type:Number,default:12},showArrow:{type:Boolean,default:!0},placement:{type:wt(String),values:Eh,default:"bottom-start"},fallbackPlacements:{type:wt(Array),default:["bottom-start","top-start","right","left"]},tagType:{...vh.type,default:"info"},tagEffect:{...vh.effect,default:"light"},tabindex:{type:[String,Number],default:0},appendTo:Ao.appendTo,fitInputWidth:{type:[Boolean,Number],default:!0,validator(e){return Ts(e)||gr(e)}},suffixIcon:{type:bs,default:Ed},...c0,...Ta(["ariaLabel"])}),wve=bn({data:Array,disabled:Boolean,hovering:Boolean,item:{type:wt(Object),required:!0},index:Number,style:Object,selected:Boolean,created:Boolean}),Sve={[Nr]:e=>!0,[mi]:e=>!0,"remove-tag":e=>!0,"visible-change":e=>!0,focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent,clear:()=>!0},Cve={hover:e=>gr(e),select:(e,n)=>!0},P8=Symbol("ElSelectV2Injection"),Eve=xe({props:wve,emits:Cve,setup(e,{emit:n}){const s=Gn(P8),l=dn("select"),{hoverItem:d,selectOptionClick:m}=bve(e,{emit:n}),{getLabel:b}=Dx(s.props);return{ns:l,hoverItem:d,selectOptionClick:m,getLabel:b}}});function Tve(e,n,s,l,d,m){return Z(),ue("li",{"aria-selected":e.selected,style:fr(e.style),class:ge([e.ns.be("dropdown","item"),e.ns.is("selected",e.selected),e.ns.is("disabled",e.disabled),e.ns.is("created",e.created),e.ns.is("hovering",e.hovering)]),onMousemove:e.hoverItem,onClick:Er(e.selectOptionClick,["stop"])},[It(e.$slots,"default",{item:e.item,index:e.index,disabled:e.disabled},()=>[ae("span",null,gn(e.getLabel(e.item)),1)])],46,["aria-selected","onMousemove","onClick"])}var Ive=En(Eve,[["render",Tve],["__file","option-item.vue"]]),gA=Number.isNaN||function(n){return typeof n=="number"&&n!==n};function kve(e,n){return!!(e===n||gA(e)&&gA(n))}function Mve(e,n){if(e.length!==n.length)return!1;for(var s=0;s<e.length;s++)if(!kve(e[s],n[s]))return!1;return!0}function Ave(e,n){n===void 0&&(n=Mve);var s=null;function l(){for(var d=[],m=0;m<arguments.length;m++)d[m]=arguments[m];if(s&&s.lastThis===this&&n(d,s.lastArgs))return s.lastResult;var b=e.apply(this,d);return s={lastResult:b,lastArgs:d,lastThis:this},b}return l.clear=function(){s=null},l}const Iz=()=>{const n=oi().proxy.$props;return se(()=>{const s=(l,d,m)=>({});return n.perfMode?px(s):Ave(s)})},x6=50,Fb="itemRendered",Bb="scroll",_g="forward",Vb="backward",Iu="auto",zx="smart",Bv="start",md="center",Vv="end",Zg="horizontal",L8="vertical",Rve="ltr",Mg="rtl",$v="negative",O8="positive-ascending",D8="positive-descending",Pve={[Zg]:"left",[L8]:"top"},Lve=20,Ove={[Zg]:"deltaX",[L8]:"deltaY"},Dve=({atEndEdge:e,atStartEdge:n,layout:s},l)=>{let d,m=0;const b=E=>E<0&&n.value||E>0&&e.value;return{hasReachedEdge:b,onWheel:E=>{jp(d);const M=E[Ove[s.value]];b(m)&&b(m+M)||(m+=M,Tx()||E.preventDefault(),d=Tf(()=>{l(m),m=0}))}}},w6=wc({type:wt([Number,Function]),required:!0}),S6=wc({type:Number}),C6=wc({type:Number,default:2}),zve=wc({type:String,values:["ltr","rtl"],default:"ltr"}),E6=wc({type:Number,default:0}),$b=wc({type:Number,required:!0}),kz=wc({type:String,values:["horizontal","vertical"],default:L8}),Mz=bn({className:{type:String,default:""},containerElement:{type:wt([String,Object]),default:"div"},data:{type:wt(Array),default:()=>oo([])},direction:zve,height:{type:[String,Number],required:!0},innerElement:{type:[String,Object],default:"div"},style:{type:wt([Object,String,Array])},useIsScrolling:{type:Boolean,default:!1},width:{type:[Number,String],required:!1},perfMode:{type:Boolean,default:!0},scrollbarAlwaysOn:{type:Boolean,default:!1}}),Az=bn({cache:C6,estimatedItemSize:S6,layout:kz,initScrollOffset:E6,total:$b,itemSize:w6,...Mz}),T6={type:Number,default:6},Rz={type:Number,default:0},Pz={type:Number,default:2},Fp=bn({columnCache:C6,columnWidth:w6,estimatedColumnWidth:S6,estimatedRowHeight:S6,initScrollLeft:E6,initScrollTop:E6,itemKey:{type:wt(Function),default:({columnIndex:e,rowIndex:n})=>`${n}:${e}`},rowCache:C6,rowHeight:w6,totalColumn:$b,totalRow:$b,hScrollbarSize:T6,vScrollbarSize:T6,scrollbarStartGap:Rz,scrollbarEndGap:Pz,role:String,...Mz}),Lz=bn({alwaysOn:Boolean,class:String,layout:kz,total:$b,ratio:{type:Number,required:!0},clientSize:{type:Number,required:!0},scrollFrom:{type:Number,required:!0},scrollbarSize:T6,startGap:Rz,endGap:Pz,visible:Boolean}),Pp=(e,n)=>e<n?_g:Vb,Hv=e=>e===Rve||e===Mg||e===Zg,_A=e=>e===Mg;let lg=null;function Hb(e=!1){if(lg===null||e){const n=document.createElement("div"),s=n.style;s.width="50px",s.height="50px",s.overflow="scroll",s.direction="rtl";const l=document.createElement("div"),d=l.style;return d.width="100px",d.height="100px",n.appendChild(l),document.body.appendChild(n),n.scrollLeft>0?lg=D8:(n.scrollLeft=1,n.scrollLeft===0?lg=$v:lg=O8),document.body.removeChild(n),lg}return lg}function Nve({move:e,size:n,bar:s},l){const d={},m=`translate${s.axis}(${e}px)`;return d[s.size]=n,d.transform=m,l==="horizontal"?d.height="100%":d.width="100%",d}const I6=xe({name:"ElVirtualScrollBar",props:Lz,emits:["scroll","start-move","stop-move"],setup(e,{emit:n}){const s=se(()=>e.startGap+e.endGap),l=dn("virtual-scrollbar"),d=dn("scrollbar"),m=Re(),b=Re();let r=null,E=null;const M=ts({isDragging:!1,traveled:0}),A=se(()=>kO[e.layout]),P=se(()=>e.clientSize-w(s)),D=se(()=>({position:"absolute",width:`${Zg===e.layout?P.value:e.scrollbarSize}px`,height:`${Zg===e.layout?e.scrollbarSize:P.value}px`,[Pve[e.layout]]:"2px",right:"2px",bottom:"2px",borderRadius:"4px"})),z=se(()=>{const re=e.ratio,he=e.clientSize;if(re>=100)return Number.POSITIVE_INFINITY;if(re>=50)return re*he/100;const fe=he/3;return Math.floor(Math.min(Math.max(re*he,Lve),fe))}),F=se(()=>{if(!Number.isFinite(z.value))return{display:"none"};const re=`${z.value}px`;return Nve({bar:A.value,size:re,move:M.traveled},e.layout)}),N=se(()=>Math.floor(e.clientSize-z.value-w(s))),q=()=>{window.addEventListener("mousemove",Y),window.addEventListener("mouseup",W);const re=w(b);re&&(E=document.onselectstart,document.onselectstart=()=>!1,re.addEventListener("touchmove",Y,{passive:!0}),re.addEventListener("touchend",W))},G=()=>{window.removeEventListener("mousemove",Y),window.removeEventListener("mouseup",W),document.onselectstart=E,E=null;const re=w(b);re&&(re.removeEventListener("touchmove",Y),re.removeEventListener("touchend",W))},ie=re=>{re.stopImmediatePropagation(),!(re.ctrlKey||[1,2].includes(re.button))&&(M.isDragging=!0,M[A.value.axis]=re.currentTarget[A.value.offset]-(re[A.value.client]-re.currentTarget.getBoundingClientRect()[A.value.direction]),n("start-move"),q())},W=()=>{M.isDragging=!1,M[A.value.axis]=0,n("stop-move"),G()},Y=re=>{const{isDragging:he}=M;if(!he||!b.value||!m.value)return;const fe=M[A.value.axis];if(!fe)return;jp(r);const ce=(m.value.getBoundingClientRect()[A.value.direction]-re[A.value.client])*-1,me=b.value[A.value.offset]-fe,we=ce-me;r=Tf(()=>{M.traveled=Math.max(e.startGap,Math.min(we,N.value)),n("scroll",we,N.value)})},J=re=>{const he=Math.abs(re.target.getBoundingClientRect()[A.value.direction]-re[A.value.client]),fe=b.value[A.value.offset]/2,ce=he-fe;M.traveled=Math.max(0,Math.min(ce,N.value)),n("scroll",ce,N.value)};return on(()=>e.scrollFrom,re=>{M.isDragging||(M.traveled=Math.ceil(re*N.value))}),Ls(()=>{G()}),()=>xr("div",{role:"presentation",ref:m,class:[l.b(),e.class,(e.alwaysOn||M.isDragging)&&"always-on"],style:D.value,onMousedown:Er(J,["stop","prevent"]),onTouchstartPrevent:ie},xr("div",{ref:b,class:d.e("thumb"),style:F.value,onMousedown:ie},[]))}}),Oz=({name:e,getOffset:n,getItemSize:s,getItemOffset:l,getEstimatedTotalSize:d,getStartIndexForOffset:m,getStopIndexForStartIndex:b,initCache:r,clearCache:E,validateProps:M})=>xe({name:e??"ElVirtualList",props:Az,emits:[Fb,Bb],setup(A,{emit:P,expose:D}){M(A);const z=oi(),F=dn("vl"),N=Re(r(A,z)),q=Iz(),G=Re(),ie=Re(),W=Re(),Y=Re({isScrolling:!1,scrollDir:"forward",scrollOffset:gr(A.initScrollOffset)?A.initScrollOffset:0,updateRequested:!1,isScrollbarDragging:!1,scrollbarAlwaysOn:A.scrollbarAlwaysOn}),J=se(()=>{const{total:at,cache:ct}=A,{isScrolling:Mt,scrollDir:Ct,scrollOffset:gt}=w(Y);if(at===0)return[0,0,0,0];const Ke=m(A,gt,w(N)),Lt=b(A,Ke,gt,w(N)),xn=!Mt||Ct===Vb?Math.max(1,ct):1,Ht=!Mt||Ct===_g?Math.max(1,ct):1;return[Math.max(0,Ke-xn),Math.max(0,Math.min(at-1,Lt+Ht)),Ke,Lt]}),re=se(()=>d(A,w(N))),he=se(()=>Hv(A.layout)),fe=se(()=>[{position:"relative",[`overflow-${he.value?"x":"y"}`]:"scroll",WebkitOverflowScrolling:"touch",willChange:"transform"},{direction:A.direction,height:gr(A.height)?`${A.height}px`:A.height,width:gr(A.width)?`${A.width}px`:A.width},A.style]),ce=se(()=>{const at=w(re),ct=w(he);return{height:ct?"100%":`${at}px`,pointerEvents:w(Y).isScrolling?"none":void 0,width:ct?`${at}px`:"100%"}}),me=se(()=>he.value?A.width:A.height),{onWheel:we}=Dve({atStartEdge:se(()=>Y.value.scrollOffset<=0),atEndEdge:se(()=>Y.value.scrollOffset>=re.value),layout:se(()=>A.layout)},at=>{var ct,Mt;(Mt=(ct=W.value).onMouseUp)==null||Mt.call(ct),$e(Math.min(Y.value.scrollOffset+at,re.value-me.value))});Is(G,"wheel",we,{passive:!1});const ye=()=>{const{total:at}=A;if(at>0){const[gt,Ke,Lt,xn]=w(J);P(Fb,gt,Ke,Lt,xn)}const{scrollDir:ct,scrollOffset:Mt,updateRequested:Ct}=w(Y);P(Bb,ct,Mt,Ct)},Ue=at=>{const{clientHeight:ct,scrollHeight:Mt,scrollTop:Ct}=at.currentTarget,gt=w(Y);if(gt.scrollOffset===Ct)return;const Ke=Math.max(0,Math.min(Ct,Mt-ct));Y.value={...gt,isScrolling:!0,scrollDir:Pp(gt.scrollOffset,Ke),scrollOffset:Ke,updateRequested:!1},dr(Ve)},Ne=at=>{const{clientWidth:ct,scrollLeft:Mt,scrollWidth:Ct}=at.currentTarget,gt=w(Y);if(gt.scrollOffset===Mt)return;const{direction:Ke}=A;let Lt=Mt;if(Ke===Mg)switch(Hb()){case $v:{Lt=-Mt;break}case D8:{Lt=Ct-ct-Mt;break}}Lt=Math.max(0,Math.min(Lt,Ct-ct)),Y.value={...gt,isScrolling:!0,scrollDir:Pp(gt.scrollOffset,Lt),scrollOffset:Lt,updateRequested:!1},dr(Ve)},Pe=at=>{w(he)?Ne(at):Ue(at),ye()},ve=(at,ct)=>{const Mt=(re.value-me.value)/ct*at;$e(Math.min(re.value-me.value,Mt))},$e=at=>{at=Math.max(at,0),at!==w(Y).scrollOffset&&(Y.value={...w(Y),scrollOffset:at,scrollDir:Pp(w(Y).scrollOffset,at),updateRequested:!0},dr(Ve))},Te=(at,ct=Iu)=>{const{scrollOffset:Mt}=w(Y);at=Math.max(0,Math.min(at,A.total-1)),$e(n(A,at,ct,Mt,w(N)))},Ae=at=>{const{direction:ct,itemSize:Mt,layout:Ct}=A,gt=q.value(E&&Mt,E&&Ct,E&&ct);let Ke;if(Wi(gt,String(at)))Ke=gt[at];else{const Lt=l(A,at,w(N)),xn=s(A,at,w(N)),Ht=w(he),le=ct===Mg,nt=Ht?Lt:0;gt[at]=Ke={position:"absolute",left:le?void 0:`${nt}px`,right:le?`${nt}px`:void 0,top:Ht?0:`${Lt}px`,height:Ht?"100%":`${xn}px`,width:Ht?`${xn}px`:"100%"}}return Ke},Ve=()=>{Y.value.isScrolling=!1,dr(()=>{q.value(-1,null,null)})},We=()=>{const at=G.value;at&&(at.scrollTop=0)};Zr(()=>{if(!Pi)return;const{initScrollOffset:at}=A,ct=w(G);gr(at)&&ct&&(w(he)?ct.scrollLeft=at:ct.scrollTop=at),ye()}),yc(()=>{const{direction:at,layout:ct}=A,{scrollOffset:Mt,updateRequested:Ct}=w(Y),gt=w(G);if(Ct&&gt)if(ct===Zg)if(at===Mg)switch(Hb()){case $v:{gt.scrollLeft=-Mt;break}case O8:{gt.scrollLeft=Mt;break}default:{const{clientWidth:Ke,scrollWidth:Lt}=gt;gt.scrollLeft=Lt-Ke-Mt;break}}else gt.scrollLeft=Mt;else gt.scrollTop=Mt}),fS(()=>{w(G).scrollTop=w(Y).scrollOffset});const ft={ns:F,clientSize:me,estimatedTotalSize:re,windowStyle:fe,windowRef:G,innerRef:ie,innerStyle:ce,itemsToRender:J,scrollbarRef:W,states:Y,getItemStyle:Ae,onScroll:Pe,onScrollbarScroll:ve,onWheel:we,scrollTo:$e,scrollToItem:Te,resetScrollTop:We};return D({windowRef:G,innerRef:ie,getItemStyleCache:q,scrollTo:$e,scrollToItem:Te,resetScrollTop:We,states:Y}),ft},render(A){var P;const{$slots:D,className:z,clientSize:F,containerElement:N,data:q,getItemStyle:G,innerElement:ie,itemsToRender:W,innerStyle:Y,layout:J,total:re,onScroll:he,onScrollbarScroll:fe,states:ce,useIsScrolling:me,windowStyle:we,ns:ye}=A,[Ue,Ne]=W,Pe=si(N),ve=si(ie),$e=[];if(re>0)for(let We=Ue;We<=Ne;We++)$e.push(xr(cr,{key:We},(P=D.default)==null?void 0:P.call(D,{data:q,index:We,isScrolling:me?ce.isScrolling:void 0,style:G(We)})));const Te=[xr(ve,{style:Y,ref:"innerRef"},ir(ve)?$e:{default:()=>$e})],Ae=xr(I6,{ref:"scrollbarRef",clientSize:F,layout:J,onScroll:fe,ratio:F*100/this.estimatedTotalSize,scrollFrom:ce.scrollOffset/(this.estimatedTotalSize-F),total:re}),Ve=xr(Pe,{class:[ye.e("window"),z],style:we,onScroll:he,ref:"windowRef",key:0},ir(Pe)?[Te]:{default:()=>[Te]});return xr("div",{key:0,class:[ye.e("wrapper"),ce.scrollbarAlwaysOn?"always-on":""]},[Ve,Ae])}}),Dz=Oz({name:"ElFixedSizeList",getItemOffset:({itemSize:e},n)=>n*e,getItemSize:({itemSize:e})=>e,getEstimatedTotalSize:({total:e,itemSize:n})=>n*e,getOffset:({height:e,total:n,itemSize:s,layout:l,width:d},m,b,r)=>{const E=Hv(l)?d:e,M=Math.max(0,n*s-E),A=Math.min(M,m*s),P=Math.max(0,(m+1)*s-E);switch(b===zx&&(r>=P-E&&r<=A+E?b=Iu:b=md),b){case Bv:return A;case Vv:return P;case md:{const D=Math.round(P+(A-P)/2);return D<Math.ceil(E/2)?0:D>M+Math.floor(E/2)?M:D}case Iu:default:return r>=P&&r<=A?r:r<P?P:A}},getStartIndexForOffset:({total:e,itemSize:n},s)=>Math.max(0,Math.min(e-1,Math.floor(s/n))),getStopIndexForStartIndex:({height:e,total:n,itemSize:s,layout:l,width:d},m,b)=>{const r=m*s,E=Hv(l)?d:e,M=Math.ceil((E+b-r)/s);return Math.max(0,Math.min(n-1,m+M-1))},initCache(){},clearCache:!0,validateProps(){}}),vg=(e,n,s)=>{const{itemSize:l}=e,{items:d,lastVisitedIndex:m}=s;if(n>m){let b=0;if(m>=0){const r=d[m];b=r.offset+r.size}for(let r=m+1;r<=n;r++){const E=l(r);d[r]={offset:b,size:E},b+=E}s.lastVisitedIndex=n}return d[n]},Fve=(e,n,s)=>{const{items:l,lastVisitedIndex:d}=n;return(d>0?l[d].offset:0)>=s?zz(e,n,0,d,s):Bve(e,n,Math.max(0,d),s)},zz=(e,n,s,l,d)=>{for(;s<=l;){const m=s+Math.floor((l-s)/2),b=vg(e,m,n).offset;if(b===d)return m;b<d?s=m+1:b>d&&(l=m-1)}return Math.max(0,s-1)},Bve=(e,n,s,l)=>{const{total:d}=e;let m=1;for(;s<d&&vg(e,s,n).offset<l;)s+=m,m*=2;return zz(e,n,Math.floor(s/2),Math.min(s,d-1),l)},vA=({total:e},{items:n,estimatedItemSize:s,lastVisitedIndex:l})=>{let d=0;if(l>=e&&(l=e-1),l>=0){const r=n[l];d=r.offset+r.size}const b=(e-l-1)*s;return d+b},Vve=Oz({name:"ElDynamicSizeList",getItemOffset:(e,n,s)=>vg(e,n,s).offset,getItemSize:(e,n,{items:s})=>s[n].size,getEstimatedTotalSize:vA,getOffset:(e,n,s,l,d)=>{const{height:m,layout:b,width:r}=e,E=Hv(b)?r:m,M=vg(e,n,d),A=vA(e,d),P=Math.max(0,Math.min(A-E,M.offset)),D=Math.max(0,M.offset-E+M.size);switch(s===zx&&(l>=D-E&&l<=P+E?s=Iu:s=md),s){case Bv:return P;case Vv:return D;case md:return Math.round(D+(P-D)/2);case Iu:default:return l>=D&&l<=P?l:l<D?D:P}},getStartIndexForOffset:(e,n,s)=>Fve(e,s,n),getStopIndexForStartIndex:(e,n,s,l)=>{const{height:d,total:m,layout:b,width:r}=e,E=Hv(b)?r:d,M=vg(e,n,l),A=s+E;let P=M.offset+M.size,D=n;for(;D<m-1&&P<A;)D++,P+=vg(e,D,l).size;return D},initCache({estimatedItemSize:e=x6},n){const s={items:{},estimatedItemSize:e,lastVisitedIndex:-1};return s.clearCacheAfterIndex=(l,d=!0)=>{var m,b;s.lastVisitedIndex=Math.min(s.lastVisitedIndex,l-1),(m=n.exposed)==null||m.getItemStyleCache(-1),d&&((b=n.proxy)==null||b.$forceUpdate())},s},clearCache:!1,validateProps:({itemSize:e})=>{}}),$ve={loading:Boolean,data:{type:Array,required:!0},hoveringIndex:Number,width:Number};var Hve=xe({name:"ElSelectDropdown",props:$ve,setup(e,{slots:n,expose:s}){const l=Gn(P8),d=dn("select"),{getLabel:m,getValue:b,getDisabled:r}=Dx(l.props),E=Re([]),M=Re(),A=se(()=>e.data.length);on(()=>A.value,()=>{var we,ye;(ye=(we=l.tooltipRef.value).updatePopper)==null||ye.call(we)});const P=se(()=>Li(l.props.estimatedOptionHeight)),D=se(()=>P.value?{itemSize:l.props.itemHeight}:{estimatedSize:l.props.estimatedOptionHeight,itemSize:we=>E.value[we]}),z=(we=[],ye)=>{const{props:{valueKey:Ue}}=l;return Yr(ye)?we&&we.some(Ne=>Os(To(Ne,Ue))===To(ye,Ue)):we.includes(ye)},F=(we,ye)=>{if(Yr(ye)){const{valueKey:Ue}=l.props;return To(we,Ue)===To(ye,Ue)}else return we===ye},N=(we,ye)=>l.props.multiple?z(we,b(ye)):F(we,b(ye)),q=(we,ye)=>{const{disabled:Ue,multiple:Ne,multipleLimit:Pe}=l.props;return Ue||!ye&&(Ne?Pe>0&&we.length>=Pe:!1)},G=we=>e.hoveringIndex===we;s({listRef:M,isSized:P,isItemDisabled:q,isItemHovering:G,isItemSelected:N,scrollToItem:we=>{const ye=M.value;ye&&ye.scrollToItem(we)},resetScrollTop:()=>{const we=M.value;we&&we.resetScrollTop()}});const J=we=>{const{index:ye,data:Ue,style:Ne}=we,Pe=w(P),{itemSize:ve,estimatedSize:$e}=w(D),{modelValue:Te}=l.props,{onSelect:Ae,onHover:Ve}=l,We=Ue[ye];if(We.type==="Group")return st(yve,{item:We,style:Ne,height:Pe?ve:$e},null);const ft=N(Te,We),at=q(Te,ft),ct=G(ye);return st(Ive,pi(we,{selected:ft,disabled:r(We)||at,created:!!We.created,hovering:ct,item:We,onSelect:Ae,onHover:Ve}),{default:Mt=>{var Ct;return((Ct=n.default)==null?void 0:Ct.call(n,Mt))||st("span",null,[m(We)])}})},{onKeyboardNavigate:re,onKeyboardSelect:he}=l,fe=()=>{re("forward")},ce=()=>{re("backward")},me=we=>{const{code:ye}=we,{tab:Ue,esc:Ne,down:Pe,up:ve,enter:$e,numpadEnter:Te}=Un;switch([Ne,Pe,ve,$e,Te].includes(ye)&&(we.preventDefault(),we.stopPropagation()),ye){case Ue:case Ne:break;case Pe:fe();break;case ve:ce();break;case $e:case Te:he();break}};return()=>{var we,ye,Ue,Ne;const{data:Pe,width:ve}=e,{height:$e,multiple:Te,scrollbarAlwaysOn:Ae}=l.props,Ve=se(()=>Mb?!0:Ae),We=w(P)?Dz:Vve;return st("div",{class:[d.b("dropdown"),d.is("multiple",Te)],style:{width:`${ve}px`}},[(we=n.header)==null?void 0:we.call(n),((ye=n.loading)==null?void 0:ye.call(n))||((Ue=n.empty)==null?void 0:Ue.call(n))||st(We,pi({ref:M},w(D),{className:d.be("dropdown","list"),scrollbarAlwaysOn:Ve.value,data:Pe,height:$e,width:ve,total:Pe.length,onKeydown:me}),{default:ft=>st(J,ft,null)}),(Ne=n.footer)==null?void 0:Ne.call(n)])}}});function Uve(e,n){const{aliasProps:s,getLabel:l,getValue:d}=Dx(e),m=Re(0),b=Re(),r=se(()=>e.allowCreate&&e.filterable);function E(z){const F=N=>l(N)===z;return e.options&&e.options.some(F)||n.createdOptions.some(F)}function M(z){r.value&&(e.multiple&&z.created?m.value++:b.value=z)}function A(z){if(r.value)if(z&&z.length>0){if(E(z))return;const F={[s.value.value]:z,[s.value.label]:z,created:!0,[s.value.disabled]:!1};n.createdOptions.length>=m.value?n.createdOptions[m.value]=F:n.createdOptions.push(F)}else if(e.multiple)n.createdOptions.length=m.value;else{const F=b.value;n.createdOptions.length=0,F&&F.created&&n.createdOptions.push(F)}}function P(z){if(!r.value||!z||!z.created||z.created&&e.reserveKeyword&&n.inputValue===l(z))return;const F=n.createdOptions.findIndex(N=>d(N)===d(z));~F&&(n.createdOptions.splice(F,1),m.value--)}function D(){r.value&&(n.createdOptions.length=0,m.value=0)}return{createNewOption:A,removeNewOption:P,selectNewOption:M,clearAllNewOption:D}}const jve=(e,n)=>{const{t:s}=Oi(),l=dn("select"),d=dn("input"),{form:m,formItem:b}=Fa(),{inputId:r}=Du(e,{formItemContext:b}),{aliasProps:E,getLabel:M,getValue:A,getDisabled:P,getOptions:D}=Dx(e),{valueOnClear:z,isEmptyValue:F}=vx(e),N=ts({inputValue:"",cachedOptions:[],createdOptions:[],hoveringIndex:-1,inputHovering:!1,selectionWidth:0,collapseItemWidth:0,previousQuery:null,previousValue:void 0,selectedLabel:"",menuVisibleOnFocus:!1,isBeforeHide:!1}),q=Re(-1),G=Re(),ie=Re(),W=Re(),Y=Re(),J=Re(),re=Re(),he=Re(),fe=Re(),ce=Re(),me=Re(),{isComposing:we,handleCompositionStart:ye,handleCompositionEnd:Ue,handleCompositionUpdate:Ne}=ay({afterComposition:jt=>Sn(jt)}),{wrapperRef:Pe,isFocused:ve,handleBlur:$e}=Pf(J,{beforeFocus(){return ft.value},afterFocus(){e.automaticDropdown&&!We.value&&(We.value=!0,N.menuVisibleOnFocus=!0)},beforeBlur(jt){var kn,br;return((kn=W.value)==null?void 0:kn.isFocusInsideContent(jt))||((br=Y.value)==null?void 0:br.isFocusInsideContent(jt))},afterBlur(){var jt;We.value=!1,N.menuVisibleOnFocus=!1,e.validateEvent&&((jt=b?.validate)==null||jt.call(b,"blur").catch(kn=>void 0))}}),Te=se(()=>nt("")),Ae=se(()=>e.loading?!1:e.options.length>0||N.createdOptions.length>0),Ve=Re([]),We=Re(!1),ft=se(()=>e.disabled||m?.disabled),at=se(()=>{var jt;return(jt=m?.statusIcon)!=null?jt:!1}),ct=se(()=>{const jt=Ve.value.length*e.itemHeight;return jt>e.height?e.height:jt}),Mt=se(()=>e.multiple?mn(e.modelValue)&&e.modelValue.length>0:!F(e.modelValue)),Ct=se(()=>e.clearable&&!ft.value&&N.inputHovering&&Mt.value),gt=se(()=>e.remote&&e.filterable?"":e.suffixIcon),Ke=se(()=>gt.value&&l.is("reverse",We.value)),Lt=se(()=>b?.validateState||""),xn=se(()=>{if(Lt.value)return Ex[Lt.value]}),Ht=se(()=>e.remote?300:0),le=se(()=>e.loading?e.loadingText||s("el.select.loading"):e.remote&&!N.inputValue&&!Ae.value?!1:e.filterable&&N.inputValue&&Ae.value&&Ve.value.length===0?e.noMatchText||s("el.select.noMatch"):Ae.value?null:e.noDataText||s("el.select.noData")),nt=jt=>{const kn=new RegExp(h8(jt),"i"),br=e.filterable&&hr(e.filterMethod),Rr=e.filterable&&e.remote&&hr(e.remoteMethod),vi=ci=>br||Rr?!0:jt?kn.test(M(ci)||""):!0;return e.loading?[]:[...N.createdOptions,...e.options].reduce((ci,xi)=>{const ns=D(xi);if(mn(ns)){const os=ns.filter(vi);os.length>0&&ci.push({label:M(xi),type:"Group"},...os)}else(e.remote||vi(xi))&&ci.push(xi);return ci},[])},Gt=()=>{Ve.value=nt(N.inputValue)},an=se(()=>{const jt=new Map;return Te.value.forEach((kn,br)=>{jt.set(ks(A(kn)),{option:kn,index:br})}),jt}),Qt=se(()=>{const jt=new Map;return Ve.value.forEach((kn,br)=>{jt.set(ks(A(kn)),{option:kn,index:br})}),jt}),Zt=se(()=>Ve.value.every(jt=>P(jt))),rn=Lo(),bt=se(()=>rn.value==="small"?"small":"default"),fn=()=>{var jt;if(gr(e.fitInputWidth)){q.value=e.fitInputWidth;return}const kn=((jt=G.value)==null?void 0:jt.offsetWidth)||200;!e.fitInputWidth&&Ae.value?dr(()=>{q.value=Math.max(kn,pn())}):q.value=kn},pn=()=>{var jt,kn;const Rr=document.createElement("canvas").getContext("2d"),vi=l.be("dropdown","item"),xi=(((kn=(jt=fe.value)==null?void 0:jt.listRef)==null?void 0:kn.innerRef)||document).querySelector(`.${vi}`);if(xi===null||Rr===null)return 0;const ns=getComputedStyle(xi),os=Number.parseFloat(ns.paddingLeft)+Number.parseFloat(ns.paddingRight);return Rr.font=`bold ${ns.font.replace(new RegExp(`\\b${ns.fontWeight}\\b`),"")}`,Ve.value.reduce((Js,Io)=>{const io=Rr.measureText(M(Io));return Math.max(io.width,Js)},0)+os},Vn=()=>{if(!ie.value)return 0;const jt=window.getComputedStyle(ie.value);return Number.parseFloat(jt.gap||"6px")},Nn=se(()=>{const jt=Vn();return{maxWidth:`${me.value&&e.maxCollapseTags===1?N.selectionWidth-N.collapseItemWidth-jt:N.selectionWidth}px`}}),Ot=se(()=>({maxWidth:`${N.selectionWidth}px`})),Bn=se(()=>mn(e.modelValue)?e.modelValue.length===0&&!N.inputValue:e.filterable?!N.inputValue:!0),Sr=se(()=>{var jt;const kn=(jt=e.placeholder)!=null?jt:s("el.select.placeholder");return e.multiple||!Mt.value?kn:N.selectedLabel}),Ur=se(()=>{var jt,kn;return(kn=(jt=W.value)==null?void 0:jt.popperRef)==null?void 0:kn.contentRef}),Kn=se(()=>{if(e.multiple){const jt=e.modelValue.length;if(e.modelValue.length>0&&Qt.value.has(e.modelValue[jt-1])){const{index:kn}=Qt.value.get(e.modelValue[jt-1]);return kn}}else if(!F(e.modelValue)&&Qt.value.has(e.modelValue)){const{index:jt}=Qt.value.get(e.modelValue);return jt}return-1}),ui=se({get(){return We.value&&le.value!==!1},set(jt){We.value=jt}}),wr=se(()=>e.multiple?e.collapseTags?N.cachedOptions.slice(0,e.maxCollapseTags):N.cachedOptions:[]),Tr=se(()=>e.multiple?e.collapseTags?N.cachedOptions.slice(e.maxCollapseTags):[]:[]),{createNewOption:pr,removeNewOption:Fr,selectNewOption:vt,clearAllNewOption:yt}=Uve(e,N),it=()=>{ft.value||(N.menuVisibleOnFocus?N.menuVisibleOnFocus=!1:We.value=!We.value)},ln=()=>{N.inputValue.length>0&&!We.value&&(We.value=!0),pr(N.inputValue),vr(N.inputValue)},Xn=Vl(ln,Ht.value),vr=jt=>{N.previousQuery===jt||we.value||(N.previousQuery=jt,e.filterable&&hr(e.filterMethod)?e.filterMethod(jt):e.filterable&&e.remote&&hr(e.remoteMethod)&&e.remoteMethod(jt),e.defaultFirstOption&&(e.filterable||e.remote)&&Ve.value.length?dr(Ii):dr(Ft))},Ii=()=>{const jt=Ve.value.filter(Rr=>!Rr.disabled&&Rr.type!=="Group"),kn=jt.find(Rr=>Rr.created),br=jt[0];N.hoveringIndex=Xs(Ve.value,kn||br)},ds=jt=>{la(e.modelValue,jt)||n(mi,jt)},Qs=jt=>{n(Nr,jt),ds(jt),N.previousValue=e.multiple?String(jt):jt,dr(()=>{if(e.multiple&&mn(e.modelValue)){const kn=e.modelValue.map(br=>Mr(br));la(N.cachedOptions,kn)||(N.cachedOptions=kn)}else Lr(!0)})},Xs=(jt=[],kn)=>{if(!Yr(kn))return jt.indexOf(kn);const br=e.valueKey;let Rr=-1;return jt.some((vi,ci)=>To(vi,br)===To(kn,br)?(Rr=ci,!0):!1),Rr},ks=jt=>Yr(jt)?To(jt,e.valueKey):jt,Rn=()=>{fn()},Ri=()=>{N.selectionWidth=ie.value.getBoundingClientRect().width},_r=()=>{N.collapseItemWidth=me.value.getBoundingClientRect().width},pa=()=>{var jt,kn;(kn=(jt=W.value)==null?void 0:jt.updatePopper)==null||kn.call(jt)},gi=()=>{var jt,kn;(kn=(jt=Y.value)==null?void 0:jt.updatePopper)==null||kn.call(jt)},Ut=jt=>{if(e.multiple){let kn=e.modelValue.slice();const br=Xs(kn,A(jt));br>-1?(kn=[...kn.slice(0,br),...kn.slice(br+1)],N.cachedOptions.splice(br,1),Fr(jt)):(e.multipleLimit<=0||kn.length<e.multipleLimit)&&(kn=[...kn,A(jt)],N.cachedOptions.push(jt),vt(jt)),Qs(kn),jt.created&&vr(""),e.filterable&&!e.reserveKeyword&&(N.inputValue="")}else N.selectedLabel=M(jt),Qs(A(jt)),We.value=!1,vt(jt),jt.created||yt();Oe()},ke=(jt,kn)=>{let br=e.modelValue.slice();const Rr=Xs(br,A(kn));Rr>-1&&!ft.value&&(br=[...e.modelValue.slice(0,Rr),...e.modelValue.slice(Rr+1)],N.cachedOptions.splice(Rr,1),Qs(br),n("remove-tag",A(kn)),Fr(kn)),jt.stopPropagation(),Oe()},Oe=()=>{var jt;(jt=J.value)==null||jt.focus()},Ye=()=>{var jt;if(We.value){We.value=!1,dr(()=>{var kn;return(kn=J.value)==null?void 0:kn.blur()});return}(jt=J.value)==null||jt.blur()},dt=()=>{N.inputValue.length>0?N.inputValue="":We.value=!1},tt=jt=>FL(jt,kn=>!N.cachedOptions.some(br=>A(br)===kn&&P(br))),Tt=jt=>{if(e.multiple&&jt.code!==Un.delete&&N.inputValue.length===0){jt.preventDefault();const kn=e.modelValue.slice(),br=tt(kn);if(br<0)return;const Rr=kn[br];kn.splice(br,1);const vi=N.cachedOptions[br];N.cachedOptions.splice(br,1),Fr(vi),Qs(kn),n("remove-tag",Rr)}},$t=()=>{let jt;mn(e.modelValue)?jt=[]:jt=z.value,N.selectedLabel="",We.value=!1,Qs(jt),n("clear"),yt(),Oe()},je=(jt,kn=void 0)=>{const br=Ve.value;if(!["forward","backward"].includes(jt)||ft.value||br.length<=0||Zt.value||we.value)return;if(!We.value)return it();Li(kn)&&(kn=N.hoveringIndex);let Rr=-1;jt==="forward"?(Rr=kn+1,Rr>=br.length&&(Rr=0)):jt==="backward"&&(Rr=kn-1,(Rr<0||Rr>=br.length)&&(Rr=br.length-1));const vi=br[Rr];if(P(vi)||vi.type==="Group")return je(jt,Rr);N.hoveringIndex=Rr,Ir(Rr)},_t=()=>{if(We.value)~N.hoveringIndex&&Ve.value[N.hoveringIndex]&&Ut(Ve.value[N.hoveringIndex]);else return it()},Nt=jt=>{N.hoveringIndex=jt??-1},Ft=()=>{e.multiple?N.hoveringIndex=Ve.value.findIndex(jt=>e.modelValue.some(kn=>ks(kn)===ks(jt))):N.hoveringIndex=Ve.value.findIndex(jt=>ks(jt)===ks(e.modelValue))},Sn=jt=>{if(N.inputValue=jt.target.value,e.remote)Xn();else return ln()},qn=jt=>{if(We.value=!1,ve.value){const kn=new FocusEvent("focus",jt);$e(kn)}},Wn=()=>(N.isBeforeHide=!1,dr(()=>{~Kn.value&&Ir(N.hoveringIndex)})),Ir=jt=>{fe.value.scrollToItem(jt)},Mr=(jt,kn)=>{const br=ks(jt);if(an.value.has(br)){const{option:Rr}=an.value.get(br);return Rr}if(kn&&kn.length){const Rr=kn.find(vi=>ks(A(vi))===br);if(Rr)return Rr}return{[E.value.value]:jt,[E.value.label]:jt}},Lr=(jt=!1)=>{if(e.multiple)if(e.modelValue.length>0){const kn=N.cachedOptions.slice();N.cachedOptions.length=0,N.previousValue=e.modelValue.toString();for(const br of e.modelValue){const Rr=Mr(br,kn);N.cachedOptions.push(Rr)}}else N.cachedOptions=[],N.previousValue=void 0;else if(Mt.value){N.previousValue=e.modelValue;const kn=Ve.value,br=kn.findIndex(Rr=>ks(A(Rr))===ks(e.modelValue));~br?N.selectedLabel=M(kn[br]):(!N.selectedLabel||jt)&&(N.selectedLabel=ks(e.modelValue))}else N.selectedLabel="",N.previousValue=void 0;yt(),fn()};return on(()=>e.fitInputWidth,()=>{fn()}),on(We,jt=>{jt?(e.persistent||fn(),vr("")):(N.inputValue="",N.previousQuery=null,N.isBeforeHide=!0,pr("")),n("visible-change",jt)}),on(()=>e.modelValue,(jt,kn)=>{var br;(!jt||mn(jt)&&jt.length===0||e.multiple&&!la(jt.toString(),N.previousValue)||!e.multiple&&ks(jt)!==ks(N.previousValue))&&Lr(!0),!la(jt,kn)&&e.validateEvent&&((br=b?.validate)==null||br.call(b,"change").catch(vi=>void 0))},{deep:!0}),on(()=>e.options,()=>{const jt=J.value;(!jt||jt&&document.activeElement!==jt)&&Lr()},{deep:!0,flush:"post"}),on(()=>Ve.value,()=>(fn(),fe.value&&dr(fe.value.resetScrollTop))),Da(()=>{N.isBeforeHide||Gt()}),Da(()=>{const{valueKey:jt,options:kn}=e,br=new Map;for(const Rr of kn){const vi=A(Rr);let ci=vi;if(Yr(ci)&&(ci=To(vi,jt)),br.get(ci))break;br.set(ci,!0)}}),Zr(()=>{Lr()}),so(G,Rn),so(ie,Ri),so(fe,pa),so(Pe,pa),so(ce,gi),so(me,_r),{inputId:r,collapseTagSize:bt,currentPlaceholder:Sr,expanded:We,emptyText:le,popupHeight:ct,debounce:Ht,allOptions:Te,filteredOptions:Ve,iconComponent:gt,iconReverse:Ke,tagStyle:Nn,collapseTagStyle:Ot,popperSize:q,dropdownMenuVisible:ui,hasModelValue:Mt,shouldShowPlaceholder:Bn,selectDisabled:ft,selectSize:rn,needStatusIcon:at,showClearBtn:Ct,states:N,isFocused:ve,nsSelect:l,nsInput:d,inputRef:J,menuRef:fe,tagMenuRef:ce,tooltipRef:W,tagTooltipRef:Y,selectRef:G,wrapperRef:Pe,selectionRef:ie,prefixRef:re,suffixRef:he,collapseItemRef:me,popperRef:Ur,validateState:Lt,validateIcon:xn,showTagList:wr,collapseTagList:Tr,debouncedOnInputChange:Xn,deleteTag:ke,getLabel:M,getValue:A,getDisabled:P,getValueKey:ks,handleClear:$t,handleClickOutside:qn,handleDel:Tt,handleEsc:dt,focus:Oe,blur:Ye,handleMenuEnter:Wn,handleResize:Rn,resetSelectionWidth:Ri,updateTooltip:pa,updateTagTooltip:gi,updateOptions:Gt,toggleMenu:it,scrollTo:Ir,onInput:Sn,onKeyboardNavigate:je,onKeyboardSelect:_t,onSelect:Ut,onHover:Nt,handleCompositionStart:ye,handleCompositionEnd:Ue,handleCompositionUpdate:Ne}},Gve=xe({name:"ElSelectV2",components:{ElSelectMenu:Hve,ElTag:Wg,ElTooltip:Na,ElIcon:rr},directives:{ClickOutside:yh},props:xve,emits:Sve,setup(e,{emit:n}){const s=se(()=>{const{modelValue:r,multiple:E}=e,M=E?[]:void 0;return mn(r)?E?r:M:E?M:r}),l=jve(ts({...da(e),modelValue:s}),n),{calculatorRef:d,inputStyle:m}=k8();Ti(P8,{props:ts({...da(e),height:l.popupHeight,modelValue:s}),expanded:l.expanded,tooltipRef:l.tooltipRef,onSelect:l.onSelect,onHover:l.onHover,onKeyboardNavigate:l.onKeyboardNavigate,onKeyboardSelect:l.onKeyboardSelect});const b=se(()=>e.multiple?l.states.cachedOptions.map(r=>r.label):l.states.selectedLabel);return{...l,modelValue:s,selectedLabel:b,calculatorRef:d,inputStyle:m}}});function qve(e,n,s,l,d,m){const b=fi("el-tag"),r=fi("el-tooltip"),E=fi("el-icon"),M=fi("el-select-menu"),A=ax("click-outside");return Wr((Z(),ue("div",{ref:"selectRef",class:ge([e.nsSelect.b(),e.nsSelect.m(e.selectSize)]),onMouseenter:P=>e.states.inputHovering=!0,onMouseleave:P=>e.states.inputHovering=!1},[st(r,{ref:"tooltipRef",visible:e.dropdownMenuVisible,teleported:e.teleported,"popper-class":[e.nsSelect.e("popper"),e.popperClass],"gpu-acceleration":!1,"stop-popper-mouse-event":!1,"popper-options":e.popperOptions,"fallback-placements":e.fallbackPlacements,effect:e.effect,placement:e.placement,pure:"",transition:`${e.nsSelect.namespace.value}-zoom-in-top`,trigger:"click",persistent:e.persistent,"append-to":e.appendTo,"show-arrow":e.showArrow,offset:e.offset,onBeforeShow:e.handleMenuEnter,onHide:P=>e.states.isBeforeHide=!1},{default:mt(()=>[ae("div",{ref:"wrapperRef",class:ge([e.nsSelect.e("wrapper"),e.nsSelect.is("focused",e.isFocused),e.nsSelect.is("hovering",e.states.inputHovering),e.nsSelect.is("filterable",e.filterable),e.nsSelect.is("disabled",e.selectDisabled)]),onClick:Er(e.toggleMenu,["prevent"])},[e.$slots.prefix?(Z(),ue("div",{key:0,ref:"prefixRef",class:ge(e.nsSelect.e("prefix"))},[It(e.$slots,"prefix")],2)):At("v-if",!0),ae("div",{ref:"selectionRef",class:ge([e.nsSelect.e("selection"),e.nsSelect.is("near",e.multiple&&!e.$slots.prefix&&!!e.modelValue.length)])},[e.multiple?It(e.$slots,"tag",{key:0},()=>[(Z(!0),ue(cr,null,Ei(e.showTagList,P=>(Z(),ue("div",{key:e.getValueKey(e.getValue(P)),class:ge(e.nsSelect.e("selected-item"))},[st(b,{closable:!e.selectDisabled&&!e.getDisabled(P),size:e.collapseTagSize,type:e.tagType,effect:e.tagEffect,"disable-transitions":"",style:fr(e.tagStyle),onClose:D=>e.deleteTag(D,P)},{default:mt(()=>[ae("span",{class:ge(e.nsSelect.e("tags-text"))},[It(e.$slots,"label",{label:e.getLabel(P),value:e.getValue(P)},()=>[ei(gn(e.getLabel(P)),1)])],2)]),_:2},1032,["closable","size","type","effect","style","onClose"])],2))),128)),e.collapseTags&&e.modelValue.length>e.maxCollapseTags?(Z(),Bt(r,{key:0,ref:"tagTooltipRef",disabled:e.dropdownMenuVisible||!e.collapseTagsTooltip,"fallback-placements":["bottom","top","right","left"],effect:e.effect,placement:"bottom",teleported:e.teleported},{default:mt(()=>[ae("div",{ref:"collapseItemRef",class:ge(e.nsSelect.e("selected-item"))},[st(b,{closable:!1,size:e.collapseTagSize,type:e.tagType,effect:e.tagEffect,style:fr(e.collapseTagStyle),"disable-transitions":""},{default:mt(()=>[ae("span",{class:ge(e.nsSelect.e("tags-text"))}," + "+gn(e.modelValue.length-e.maxCollapseTags),3)]),_:1},8,["size","type","effect","style"])],2)]),content:mt(()=>[ae("div",{ref:"tagMenuRef",class:ge(e.nsSelect.e("selection"))},[(Z(!0),ue(cr,null,Ei(e.collapseTagList,P=>(Z(),ue("div",{key:e.getValueKey(e.getValue(P)),class:ge(e.nsSelect.e("selected-item"))},[st(b,{class:"in-tooltip",closable:!e.selectDisabled&&!e.getDisabled(P),size:e.collapseTagSize,type:e.tagType,effect:e.tagEffect,"disable-transitions":"",onClose:D=>e.deleteTag(D,P)},{default:mt(()=>[ae("span",{class:ge(e.nsSelect.e("tags-text"))},[It(e.$slots,"label",{label:e.getLabel(P),value:e.getValue(P)},()=>[ei(gn(e.getLabel(P)),1)])],2)]),_:2},1032,["closable","size","type","effect","onClose"])],2))),128))],2)]),_:3},8,["disabled","effect","teleported"])):At("v-if",!0)]):At("v-if",!0),ae("div",{class:ge([e.nsSelect.e("selected-item"),e.nsSelect.e("input-wrapper"),e.nsSelect.is("hidden",!e.filterable)])},[Wr(ae("input",{id:e.inputId,ref:"inputRef","onUpdate:modelValue":P=>e.states.inputValue=P,style:fr(e.inputStyle),autocomplete:e.autocomplete,tabindex:e.tabindex,"aria-autocomplete":"list","aria-haspopup":"listbox",autocapitalize:"off","aria-expanded":e.expanded,"aria-label":e.ariaLabel,class:ge([e.nsSelect.e("input"),e.nsSelect.is(e.selectSize)]),disabled:e.selectDisabled,role:"combobox",readonly:!e.filterable,spellcheck:"false",type:"text",name:e.name,onInput:e.onInput,onCompositionstart:e.handleCompositionStart,onCompositionupdate:e.handleCompositionUpdate,onCompositionend:e.handleCompositionEnd,onKeydown:[Ps(Er(P=>e.onKeyboardNavigate("backward"),["stop","prevent"]),["up"]),Ps(Er(P=>e.onKeyboardNavigate("forward"),["stop","prevent"]),["down"]),Ps(Er(e.onKeyboardSelect,["stop","prevent"]),["enter"]),Ps(Er(e.handleEsc,["stop","prevent"]),["esc"]),Ps(Er(e.handleDel,["stop"]),["delete"])],onClick:Er(e.toggleMenu,["stop"])},null,46,["id","onUpdate:modelValue","autocomplete","tabindex","aria-expanded","aria-label","disabled","readonly","name","onInput","onCompositionstart","onCompositionupdate","onCompositionend","onKeydown","onClick"]),[[Jv,e.states.inputValue]]),e.filterable?(Z(),ue("span",{key:0,ref:"calculatorRef","aria-hidden":"true",class:ge(e.nsSelect.e("input-calculator")),textContent:gn(e.states.inputValue)},null,10,["textContent"])):At("v-if",!0)],2),e.shouldShowPlaceholder?(Z(),ue("div",{key:1,class:ge([e.nsSelect.e("selected-item"),e.nsSelect.e("placeholder"),e.nsSelect.is("transparent",!e.hasModelValue||e.expanded&&!e.states.inputValue)])},[e.hasModelValue?It(e.$slots,"label",{key:0,label:e.currentPlaceholder,value:e.modelValue},()=>[ae("span",null,gn(e.currentPlaceholder),1)]):(Z(),ue("span",{key:1},gn(e.currentPlaceholder),1))],2)):At("v-if",!0)],2),ae("div",{ref:"suffixRef",class:ge(e.nsSelect.e("suffix"))},[e.iconComponent?Wr((Z(),Bt(E,{key:0,class:ge([e.nsSelect.e("caret"),e.nsInput.e("icon"),e.iconReverse])},{default:mt(()=>[(Z(),Bt(si(e.iconComponent)))]),_:1},8,["class"])),[[Ki,!e.showClearBtn]]):At("v-if",!0),e.showClearBtn&&e.clearIcon?(Z(),Bt(E,{key:1,class:ge([e.nsSelect.e("caret"),e.nsInput.e("icon"),e.nsSelect.e("clear")]),onClick:Er(e.handleClear,["prevent","stop"])},{default:mt(()=>[(Z(),Bt(si(e.clearIcon)))]),_:1},8,["class","onClick"])):At("v-if",!0),e.validateState&&e.validateIcon&&e.needStatusIcon?(Z(),Bt(E,{key:2,class:ge([e.nsInput.e("icon"),e.nsInput.e("validateIcon"),e.nsInput.is("loading",e.validateState==="validating")])},{default:mt(()=>[(Z(),Bt(si(e.validateIcon)))]),_:1},8,["class"])):At("v-if",!0)],2)],10,["onClick"])]),content:mt(()=>[st(M,{ref:"menuRef",data:e.filteredOptions,width:e.popperSize,"hovering-index":e.states.hoveringIndex,"scrollbar-always-on":e.scrollbarAlwaysOn},cu({default:mt(P=>[It(e.$slots,"default",iu(vd(P)))]),_:2},[e.$slots.header?{name:"header",fn:mt(()=>[ae("div",{class:ge(e.nsSelect.be("dropdown","header"))},[It(e.$slots,"header")],2)])}:void 0,e.$slots.loading&&e.loading?{name:"loading",fn:mt(()=>[ae("div",{class:ge(e.nsSelect.be("dropdown","loading"))},[It(e.$slots,"loading")],2)])}:e.loading||e.filteredOptions.length===0?{name:"empty",fn:mt(()=>[ae("div",{class:ge(e.nsSelect.be("dropdown","empty"))},[It(e.$slots,"empty",{},()=>[ae("span",null,gn(e.emptyText),1)])],2)])}:void 0,e.$slots.footer?{name:"footer",fn:mt(()=>[ae("div",{class:ge(e.nsSelect.be("dropdown","footer"))},[It(e.$slots,"footer")],2)])}:void 0]),1032,["data","width","hovering-index","scrollbar-always-on"])]),_:3},8,["visible","teleported","popper-class","popper-options","fallback-placements","effect","placement","transition","persistent","append-to","show-arrow","offset","onBeforeShow","onHide"])],42,["onMouseenter","onMouseleave"])),[[A,e.handleClickOutside,e.popperRef]])}var Wve=En(Gve,[["render",qve],["__file","select.vue"]]);const Kve=Gr(Wve),Yve=bn({animated:{type:Boolean,default:!1},count:{type:Number,default:1},rows:{type:Number,default:3},loading:{type:Boolean,default:!0},throttle:{type:wt([Number,Object])}}),Zve=bn({variant:{type:String,values:["circle","rect","h1","h3","text","caption","p","image","button"],default:"text"}}),Xve=xe({name:"ElSkeletonItem"}),Jve=xe({...Xve,props:Zve,setup(e){const n=dn("skeleton");return(s,l)=>(Z(),ue("div",{class:ge([w(n).e("item"),w(n).e(s.variant)])},[s.variant==="image"?(Z(),Bt(w(gO),{key:0})):At("v-if",!0)],2))}});var Ub=En(Jve,[["__file","skeleton-item.vue"]]);const Qve=(e,n=0)=>{if(n===0)return e;const s=Yr(n)&&!!n.initVal,l=Re(s);let d=null;const m=r=>{if(Li(r)){l.value=e.value;return}d&&clearTimeout(d),d=setTimeout(()=>{l.value=e.value},r)},b=r=>{r==="leading"?gr(n)?m(n):m(n.leading):Yr(n)?m(n.trailing):l.value=!1};return Zr(()=>b("leading")),on(()=>e.value,r=>{b(r?"leading":"trailing")}),l},eye=xe({name:"ElSkeleton"}),tye=xe({...eye,props:Yve,setup(e,{expose:n}){const s=e,l=dn("skeleton"),d=Qve(cs(s,"loading"),s.throttle);return n({uiLoading:d}),(m,b)=>w(d)?(Z(),ue("div",pi({key:0,class:[w(l).b(),w(l).is("animated",m.animated)]},m.$attrs),[(Z(!0),ue(cr,null,Ei(m.count,r=>(Z(),ue(cr,{key:r},[w(d)?It(m.$slots,"template",{key:r},()=>[st(Ub,{class:ge(w(l).is("first")),variant:"p"},null,8,["class"]),(Z(!0),ue(cr,null,Ei(m.rows,E=>(Z(),Bt(Ub,{key:E,class:ge([w(l).e("paragraph"),w(l).is("last",E===m.rows&&m.rows>1)]),variant:"p"},null,8,["class"]))),128))]):At("v-if",!0)],64))),128))],16)):It(m.$slots,"default",iu(pi({key:1},m.$attrs)))}});var nye=En(tye,[["__file","skeleton.vue"]]);const rye=Gr(nye,{SkeletonItem:Ub}),iye=ao(Ub),Nz=Symbol("sliderContextKey"),sye=bn({modelValue:{type:wt([Number,Array]),default:0},id:{type:String,default:void 0},min:{type:Number,default:0},max:{type:Number,default:100},step:{type:Number,default:1},showInput:Boolean,showInputControls:{type:Boolean,default:!0},size:Fo,inputSize:Fo,showStops:Boolean,showTooltip:{type:Boolean,default:!0},formatTooltip:{type:wt(Function),default:void 0},disabled:Boolean,range:Boolean,vertical:Boolean,height:String,debounce:{type:Number,default:300},rangeStartLabel:{type:String,default:void 0},rangeEndLabel:{type:String,default:void 0},formatValueText:{type:wt(Function),default:void 0},tooltipClass:{type:String,default:void 0},placement:{type:String,values:Eh,default:"top"},marks:{type:wt(Object)},validateEvent:{type:Boolean,default:!0},persistent:{type:Boolean,default:!0},...Ta(["ariaLabel"])}),p4=e=>gr(e)||mn(e)&&e.every(gr),oye={[Nr]:p4,[Go]:p4,[mi]:p4},aye=bn({modelValue:{type:Number,default:0},vertical:Boolean,tooltipClass:String,placement:{type:String,values:Eh,default:"top"}}),lye={[Nr]:e=>gr(e)},uye=(e,n,s)=>{const l=Re(),d=Re(!1),m=se(()=>n.value instanceof Function),b=se(()=>m.value&&n.value(e.modelValue)||e.modelValue),r=Vl(()=>{s.value&&(d.value=!0)},50),E=Vl(()=>{s.value&&(d.value=!1)},50);return{tooltip:l,tooltipVisible:d,formatValue:b,displayTooltip:r,hideTooltip:E}},cye=(e,n,s)=>{const{disabled:l,min:d,max:m,step:b,showTooltip:r,persistent:E,precision:M,sliderSize:A,formatTooltip:P,emitChange:D,resetSize:z,updateDragging:F}=Gn(Nz),{tooltip:N,tooltipVisible:q,formatValue:G,displayTooltip:ie,hideTooltip:W}=uye(e,P,r),Y=Re(),J=se(()=>`${(e.modelValue-d.value)/(m.value-d.value)*100}%`),re=se(()=>e.vertical?{bottom:J.value}:{left:J.value}),he=()=>{n.hovering=!0,ie()},fe=()=>{n.hovering=!1,n.dragging||W()},ce=at=>{l.value||(at.preventDefault(),Ae(at),window.addEventListener("mousemove",Ve),window.addEventListener("touchmove",Ve),window.addEventListener("mouseup",We),window.addEventListener("touchend",We),window.addEventListener("contextmenu",We),Y.value.focus())},me=at=>{l.value||(n.newPosition=Number.parseFloat(J.value)+at/(m.value-d.value)*100,ft(n.newPosition),D())},we=()=>{me(-b.value)},ye=()=>{me(b.value)},Ue=()=>{me(-b.value*4)},Ne=()=>{me(b.value*4)},Pe=()=>{l.value||(ft(0),D())},ve=()=>{l.value||(ft(100),D())},$e=at=>{let ct=!0;switch(at.code){case Un.left:case Un.down:we();break;case Un.right:case Un.up:ye();break;case Un.home:Pe();break;case Un.end:ve();break;case Un.pageDown:Ue();break;case Un.pageUp:Ne();break;default:ct=!1;break}ct&&at.preventDefault()},Te=at=>{let ct,Mt;return at.type.startsWith("touch")?(Mt=at.touches[0].clientY,ct=at.touches[0].clientX):(Mt=at.clientY,ct=at.clientX),{clientX:ct,clientY:Mt}},Ae=at=>{n.dragging=!0,n.isClick=!0;const{clientX:ct,clientY:Mt}=Te(at);e.vertical?n.startY=Mt:n.startX=ct,n.startPosition=Number.parseFloat(J.value),n.newPosition=n.startPosition},Ve=at=>{if(n.dragging){n.isClick=!1,ie(),z();let ct;const{clientX:Mt,clientY:Ct}=Te(at);e.vertical?(n.currentY=Ct,ct=(n.startY-n.currentY)/A.value*100):(n.currentX=Mt,ct=(n.currentX-n.startX)/A.value*100),n.newPosition=n.startPosition+ct,ft(n.newPosition)}},We=()=>{n.dragging&&(setTimeout(()=>{n.dragging=!1,n.hovering||W(),n.isClick||ft(n.newPosition),D()},0),window.removeEventListener("mousemove",Ve),window.removeEventListener("touchmove",Ve),window.removeEventListener("mouseup",We),window.removeEventListener("touchend",We),window.removeEventListener("contextmenu",We))},ft=async at=>{if(at===null||Number.isNaN(+at))return;at<0?at=0:at>100&&(at=100);const ct=100/((m.value-d.value)/b.value);let Ct=Math.round(at/ct)*ct*(m.value-d.value)*.01+d.value;Ct=Number.parseFloat(Ct.toFixed(M.value)),Ct!==e.modelValue&&s(Nr,Ct),!n.dragging&&e.modelValue!==n.oldValue&&(n.oldValue=e.modelValue),await dr(),n.dragging&&ie(),N.value.updatePopper()};return on(()=>n.dragging,at=>{F(at)}),Is(Y,"touchstart",ce,{passive:!1}),{disabled:l,button:Y,tooltip:N,tooltipVisible:q,showTooltip:r,persistent:E,wrapperStyle:re,formatValue:G,handleMouseEnter:he,handleMouseLeave:fe,onButtonDown:ce,onKeyDown:$e,setPosition:ft}},dye=xe({name:"ElSliderButton"}),hye=xe({...dye,props:aye,emits:lye,setup(e,{expose:n,emit:s}){const l=e,d=dn("slider"),m=ts({hovering:!1,dragging:!1,isClick:!1,startX:0,currentX:0,startY:0,currentY:0,startPosition:0,newPosition:0,oldValue:l.modelValue}),b=se(()=>A.value?P.value:!1),{disabled:r,button:E,tooltip:M,showTooltip:A,persistent:P,tooltipVisible:D,wrapperStyle:z,formatValue:F,handleMouseEnter:N,handleMouseLeave:q,onButtonDown:G,onKeyDown:ie,setPosition:W}=cye(l,m,s),{hovering:Y,dragging:J}=da(m);return n({onButtonDown:G,onKeyDown:ie,setPosition:W,hovering:Y,dragging:J}),(re,he)=>(Z(),ue("div",{ref_key:"button",ref:E,class:ge([w(d).e("button-wrapper"),{hover:w(Y),dragging:w(J)}]),style:fr(w(z)),tabindex:w(r)?-1:0,onMouseenter:w(N),onMouseleave:w(q),onMousedown:w(G),onFocus:w(N),onBlur:w(q),onKeydown:w(ie)},[st(w(Na),{ref_key:"tooltip",ref:M,visible:w(D),placement:re.placement,"fallback-placements":["top","bottom","right","left"],"stop-popper-mouse-event":!1,"popper-class":re.tooltipClass,disabled:!w(A),persistent:w(b)},{content:mt(()=>[ae("span",null,gn(w(F)),1)]),default:mt(()=>[ae("div",{class:ge([w(d).e("button"),{hover:w(Y),dragging:w(J)}])},null,2)]),_:1},8,["visible","placement","popper-class","disabled","persistent"])],46,["tabindex","onMouseenter","onMouseleave","onMousedown","onFocus","onBlur","onKeydown"]))}});var yA=En(hye,[["__file","button.vue"]]);const fye=bn({mark:{type:wt([String,Object]),default:void 0}});var pye=xe({name:"ElSliderMarker",props:fye,setup(e){const n=dn("slider"),s=se(()=>ir(e.mark)?e.mark:e.mark.label),l=se(()=>ir(e.mark)?void 0:e.mark.style);return()=>xr("div",{class:n.e("marks-text"),style:l.value},s.value)}});const mye=(e,n,s)=>{const{form:l,formItem:d}=Fa(),m=Zs(),b=Re(),r=Re(),E={firstButton:b,secondButton:r},M=se(()=>e.disabled||l?.disabled||!1),A=se(()=>Math.min(n.firstValue,n.secondValue)),P=se(()=>Math.max(n.firstValue,n.secondValue)),D=se(()=>e.range?`${100*(P.value-A.value)/(e.max-e.min)}%`:`${100*(n.firstValue-e.min)/(e.max-e.min)}%`),z=se(()=>e.range?`${100*(A.value-e.min)/(e.max-e.min)}%`:"0%"),F=se(()=>e.vertical?{height:e.height}:{}),N=se(()=>e.vertical?{height:D.value,bottom:z.value}:{width:D.value,left:z.value}),q=()=>{m.value&&(n.sliderSize=m.value[`client${e.vertical?"Height":"Width"}`])},G=ye=>{const Ue=e.min+ye*(e.max-e.min)/100;if(!e.range)return b;let Ne;return Math.abs(A.value-Ue)<Math.abs(P.value-Ue)?Ne=n.firstValue<n.secondValue?"firstButton":"secondButton":Ne=n.firstValue>n.secondValue?"firstButton":"secondButton",E[Ne]},ie=ye=>{const Ue=G(ye);return Ue.value.setPosition(ye),Ue},W=ye=>{n.firstValue=ye??e.min,J(e.range?[A.value,P.value]:ye??e.min)},Y=ye=>{n.secondValue=ye,e.range&&J([A.value,P.value])},J=ye=>{s(Nr,ye),s(Go,ye)},re=async()=>{await dr(),s(mi,e.range?[A.value,P.value]:e.modelValue)},he=ye=>{var Ue,Ne,Pe,ve,$e,Te;if(M.value||n.dragging)return;q();let Ae=0;if(e.vertical){const Ve=(Pe=(Ne=(Ue=ye.touches)==null?void 0:Ue.item(0))==null?void 0:Ne.clientY)!=null?Pe:ye.clientY;Ae=(m.value.getBoundingClientRect().bottom-Ve)/n.sliderSize*100}else{const Ve=(Te=($e=(ve=ye.touches)==null?void 0:ve.item(0))==null?void 0:$e.clientX)!=null?Te:ye.clientX,We=m.value.getBoundingClientRect().left;Ae=(Ve-We)/n.sliderSize*100}if(!(Ae<0||Ae>100))return ie(Ae)};return{elFormItem:d,slider:m,firstButton:b,secondButton:r,sliderDisabled:M,minValue:A,maxValue:P,runwayStyle:F,barStyle:N,resetSize:q,setPosition:ie,emitChange:re,onSliderWrapperPrevent:ye=>{var Ue,Ne;((Ue=E.firstButton.value)!=null&&Ue.dragging||(Ne=E.secondButton.value)!=null&&Ne.dragging)&&ye.preventDefault()},onSliderClick:ye=>{he(ye)&&re()},onSliderDown:async ye=>{const Ue=he(ye);Ue&&(await dr(),Ue.value.onButtonDown(ye))},onSliderMarkerDown:ye=>{if(M.value||n.dragging)return;ie(ye)&&re()},setFirstValue:W,setSecondValue:Y}},gye=(e,n,s,l)=>({stops:se(()=>{if(!e.showStops||e.min>e.max)return[];if(e.step===0)return[];const b=(e.max-e.min)/e.step,r=100*e.step/(e.max-e.min),E=Array.from({length:b-1}).map((M,A)=>(A+1)*r);return e.range?E.filter(M=>M<100*(s.value-e.min)/(e.max-e.min)||M>100*(l.value-e.min)/(e.max-e.min)):E.filter(M=>M>100*(n.firstValue-e.min)/(e.max-e.min))}),getStopStyle:b=>e.vertical?{bottom:`${b}%`}:{left:`${b}%`}}),_ye=e=>se(()=>e.marks?Object.keys(e.marks).map(Number.parseFloat).sort((s,l)=>s-l).filter(s=>s<=e.max&&s>=e.min).map(s=>({point:s,position:(s-e.min)*100/(e.max-e.min),mark:e.marks[s]})):[]),vye=(e,n,s,l,d,m)=>{const b=M=>{d(Nr,M),d(Go,M)},r=()=>e.range?![s.value,l.value].every((M,A)=>M===n.oldValue[A]):e.modelValue!==n.oldValue,E=()=>{var M,A;e.min>e.max&&No("Slider","min should not be greater than max.");const P=e.modelValue;e.range&&mn(P)?P[1]<e.min?b([e.min,e.min]):P[0]>e.max?b([e.max,e.max]):P[0]<e.min?b([e.min,P[1]]):P[1]>e.max?b([P[0],e.max]):(n.firstValue=P[0],n.secondValue=P[1],r()&&(e.validateEvent&&((M=m?.validate)==null||M.call(m,"change").catch(D=>void 0)),n.oldValue=P.slice())):!e.range&&gr(P)&&!Number.isNaN(P)&&(P<e.min?b(e.min):P>e.max?b(e.max):(n.firstValue=P,r()&&(e.validateEvent&&((A=m?.validate)==null||A.call(m,"change").catch(D=>void 0)),n.oldValue=P)))};E(),on(()=>n.dragging,M=>{M||E()}),on(()=>e.modelValue,(M,A)=>{n.dragging||mn(M)&&mn(A)&&M.every((P,D)=>P===A[D])&&n.firstValue===M[0]&&n.secondValue===M[1]||E()},{deep:!0}),on(()=>[e.min,e.max],()=>{E()})},yye=(e,n,s)=>{const l=Re();return Zr(async()=>{e.range?(mn(e.modelValue)?(n.firstValue=Math.max(e.min,e.modelValue[0]),n.secondValue=Math.min(e.max,e.modelValue[1])):(n.firstValue=e.min,n.secondValue=e.max),n.oldValue=[n.firstValue,n.secondValue]):(!gr(e.modelValue)||Number.isNaN(e.modelValue)?n.firstValue=e.min:n.firstValue=Math.min(e.max,Math.max(e.min,e.modelValue)),n.oldValue=n.firstValue),Is(window,"resize",s),await dr(),s()}),{sliderWrapper:l}},bye=xe({name:"ElSlider"}),xye=xe({...bye,props:sye,emits:oye,setup(e,{expose:n,emit:s}){const l=e,d=dn("slider"),{t:m}=Oi(),b=ts({firstValue:0,secondValue:0,oldValue:0,dragging:!1,sliderSize:1}),{elFormItem:r,slider:E,firstButton:M,secondButton:A,sliderDisabled:P,minValue:D,maxValue:z,runwayStyle:F,barStyle:N,resetSize:q,emitChange:G,onSliderWrapperPrevent:ie,onSliderClick:W,onSliderDown:Y,onSliderMarkerDown:J,setFirstValue:re,setSecondValue:he}=mye(l,b,s),{stops:fe,getStopStyle:ce}=gye(l,b,D,z),{inputId:me,isLabeledByFormItem:we}=Du(l,{formItemContext:r}),ye=Lo(),Ue=se(()=>l.inputSize||ye.value),Ne=se(()=>l.ariaLabel||m("el.slider.defaultLabel",{min:l.min,max:l.max})),Pe=se(()=>l.range?l.rangeStartLabel||m("el.slider.defaultRangeStartLabel"):Ne.value),ve=se(()=>l.formatValueText?l.formatValueText(at.value):`${at.value}`),$e=se(()=>l.rangeEndLabel||m("el.slider.defaultRangeEndLabel")),Te=se(()=>l.formatValueText?l.formatValueText(ct.value):`${ct.value}`),Ae=se(()=>[d.b(),d.m(ye.value),d.is("vertical",l.vertical),{[d.m("with-input")]:l.showInput}]),Ve=_ye(l);vye(l,b,D,z,s,r);const We=se(()=>{const gt=[l.min,l.max,l.step].map(Ke=>{const Lt=`${Ke}`.split(".")[1];return Lt?Lt.length:0});return Math.max.apply(null,gt)}),{sliderWrapper:ft}=yye(l,b,q),{firstValue:at,secondValue:ct,sliderSize:Mt}=da(b),Ct=gt=>{b.dragging=gt};return Is(ft,"touchstart",ie,{passive:!1}),Is(ft,"touchmove",ie,{passive:!1}),Ti(Nz,{...da(l),sliderSize:Mt,disabled:P,precision:We,emitChange:G,resetSize:q,updateDragging:Ct}),n({onSliderClick:W}),(gt,Ke)=>{var Lt,xn;return Z(),ue("div",{id:gt.range?w(me):void 0,ref_key:"sliderWrapper",ref:ft,class:ge(w(Ae)),role:gt.range?"group":void 0,"aria-label":gt.range&&!w(we)?w(Ne):void 0,"aria-labelledby":gt.range&&w(we)?(Lt=w(r))==null?void 0:Lt.labelId:void 0},[ae("div",{ref_key:"slider",ref:E,class:ge([w(d).e("runway"),{"show-input":gt.showInput&&!gt.range},w(d).is("disabled",w(P))]),style:fr(w(F)),onMousedown:w(Y),onTouchstartPassive:w(Y)},[ae("div",{class:ge(w(d).e("bar")),style:fr(w(N))},null,6),st(yA,{id:gt.range?void 0:w(me),ref_key:"firstButton",ref:M,"model-value":w(at),vertical:gt.vertical,"tooltip-class":gt.tooltipClass,placement:gt.placement,role:"slider","aria-label":gt.range||!w(we)?w(Pe):void 0,"aria-labelledby":!gt.range&&w(we)?(xn=w(r))==null?void 0:xn.labelId:void 0,"aria-valuemin":gt.min,"aria-valuemax":gt.range?w(ct):gt.max,"aria-valuenow":w(at),"aria-valuetext":w(ve),"aria-orientation":gt.vertical?"vertical":"horizontal","aria-disabled":w(P),"onUpdate:modelValue":w(re)},null,8,["id","model-value","vertical","tooltip-class","placement","aria-label","aria-labelledby","aria-valuemin","aria-valuemax","aria-valuenow","aria-valuetext","aria-orientation","aria-disabled","onUpdate:modelValue"]),gt.range?(Z(),Bt(yA,{key:0,ref_key:"secondButton",ref:A,"model-value":w(ct),vertical:gt.vertical,"tooltip-class":gt.tooltipClass,placement:gt.placement,role:"slider","aria-label":w($e),"aria-valuemin":w(at),"aria-valuemax":gt.max,"aria-valuenow":w(ct),"aria-valuetext":w(Te),"aria-orientation":gt.vertical?"vertical":"horizontal","aria-disabled":w(P),"onUpdate:modelValue":w(he)},null,8,["model-value","vertical","tooltip-class","placement","aria-label","aria-valuemin","aria-valuemax","aria-valuenow","aria-valuetext","aria-orientation","aria-disabled","onUpdate:modelValue"])):At("v-if",!0),gt.showStops?(Z(),ue("div",{key:1},[(Z(!0),ue(cr,null,Ei(w(fe),(Ht,le)=>(Z(),ue("div",{key:le,class:ge(w(d).e("stop")),style:fr(w(ce)(Ht))},null,6))),128))])):At("v-if",!0),w(Ve).length>0?(Z(),ue(cr,{key:2},[ae("div",null,[(Z(!0),ue(cr,null,Ei(w(Ve),(Ht,le)=>(Z(),ue("div",{key:le,style:fr(w(ce)(Ht.position)),class:ge([w(d).e("stop"),w(d).e("marks-stop")])},null,6))),128))]),ae("div",{class:ge(w(d).e("marks"))},[(Z(!0),ue(cr,null,Ei(w(Ve),(Ht,le)=>(Z(),Bt(w(pye),{key:le,mark:Ht.mark,style:fr(w(ce)(Ht.position)),onMousedown:Er(nt=>w(J)(Ht.position),["stop"])},null,8,["mark","style","onMousedown"]))),128))],2)],64)):At("v-if",!0)],46,["onMousedown","onTouchstartPassive"]),gt.showInput&&!gt.range?(Z(),Bt(w(gz),{key:0,ref:"input","model-value":w(at),class:ge(w(d).e("input")),step:gt.step,disabled:w(P),controls:gt.showInputControls,min:gt.min,max:gt.max,precision:w(We),debounce:gt.debounce,size:w(Ue),"onUpdate:modelValue":w(re),onChange:w(G)},null,8,["model-value","class","step","disabled","controls","min","max","precision","debounce","size","onUpdate:modelValue","onChange"])):At("v-if",!0)],10,["id","role","aria-label","aria-labelledby"])}}});var wye=En(xye,[["__file","slider.vue"]]);const Sye=Gr(wye),Cye=bn({prefixCls:{type:String}}),bA=xe({name:"ElSpaceItem",props:Cye,setup(e,{slots:n}){const s=dn("space"),l=se(()=>`${e.prefixCls||s.b()}__item`);return()=>xr("div",{class:l.value},It(n,"default"))}}),xA={small:8,default:12,large:16};function Eye(e){const n=dn("space"),s=se(()=>[n.b(),n.m(e.direction),e.class]),l=Re(0),d=Re(0),m=se(()=>{const r=e.wrap||e.fill?{flexWrap:"wrap"}:{},E={alignItems:e.alignment},M={rowGap:`${d.value}px`,columnGap:`${l.value}px`};return[r,E,M,e.style]}),b=se(()=>e.fill?{flexGrow:1,minWidth:`${e.fillRatio}%`}:{});return Da(()=>{const{size:r="small",wrap:E,direction:M,fill:A}=e;if(mn(r)){const[P=0,D=0]=r;l.value=P,d.value=D}else{let P;gr(r)?P=r:P=xA[r||"small"]||xA.small,(E||A)&&M==="horizontal"?l.value=d.value=P:M==="horizontal"?(l.value=P,d.value=0):(d.value=P,l.value=0)}}),{classes:s,containerStyle:m,itemStyle:b}}const Tye=bn({direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},class:{type:wt([String,Object,Array]),default:""},style:{type:wt([String,Array,Object]),default:""},alignment:{type:wt(String),default:"center"},prefixCls:{type:String},spacer:{type:wt([Object,String,Number,Array]),default:null,validator:e=>qs(e)||gr(e)||ir(e)},wrap:Boolean,fill:Boolean,fillRatio:{type:Number,default:100},size:{type:[String,Array,Number],values:Cd,validator:e=>gr(e)||mn(e)&&e.length===2&&e.every(gr)}}),Iye=xe({name:"ElSpace",props:Tye,setup(e,{slots:n}){const{classes:s,containerStyle:l,itemStyle:d}=Eye(e);function m(b,r="",E=[]){const{prefixCls:M}=e;return b.forEach((A,P)=>{r6(A)?mn(A.children)&&A.children.forEach((D,z)=>{r6(D)&&mn(D.children)?m(D.children,`${r+z}-`,E):E.push(st(bA,{style:d.value,prefixCls:M,key:`nested-${r+z}`},{default:()=>[D]},Cu.PROPS|Cu.STYLE,["style","prefixCls"]))}):lce(A)&&E.push(st(bA,{style:d.value,prefixCls:M,key:`LoopKey${r+P}`},{default:()=>[A]},Cu.PROPS|Cu.STYLE,["style","prefixCls"]))}),E}return()=>{var b;const{spacer:r,direction:E}=e,M=It(n,"default",{key:0},()=>[]);if(((b=M.children)!=null?b:[]).length===0)return null;if(mn(M.children)){let A=m(M.children);if(r){const P=A.length-1;A=A.reduce((D,z,F)=>{const N=[...D,z];return F!==P&&N.push(st("span",{style:[d.value,E==="vertical"?"width: 100%":null],key:F},[qs(r)?r:ei(r,Cu.TEXT)],Cu.STYLE)),N},[])}return st("div",{class:s.value,style:l.value},A,Cu.STYLE|Cu.CLASS)}return M.children}}}),kye=Gr(Iye),Mye=bn({decimalSeparator:{type:String,default:"."},groupSeparator:{type:String,default:","},precision:{type:Number,default:0},formatter:Function,value:{type:wt([Number,Object]),default:0},prefix:String,suffix:String,title:String,valueStyle:{type:wt([String,Object,Array])}}),Aye=xe({name:"ElStatistic"}),Rye=xe({...Aye,props:Mye,setup(e,{expose:n}){const s=e,l=dn("statistic"),d=se(()=>{const{value:m,formatter:b,precision:r,decimalSeparator:E,groupSeparator:M}=s;if(hr(b))return b(m);if(!gr(m)||Number.isNaN(m))return m;let[A,P=""]=String(m).split(".");return P=P.padEnd(r,"0").slice(0,r>0?r:0),A=A.replace(/\B(?=(\d{3})+(?!\d))/g,M),[A,P].join(P?E:"")});return n({displayValue:d}),(m,b)=>(Z(),ue("div",{class:ge(w(l).b())},[m.$slots.title||m.title?(Z(),ue("div",{key:0,class:ge(w(l).e("head"))},[It(m.$slots,"title",{},()=>[ei(gn(m.title),1)])],2)):At("v-if",!0),ae("div",{class:ge(w(l).e("content"))},[m.$slots.prefix||m.prefix?(Z(),ue("div",{key:0,class:ge(w(l).e("prefix"))},[It(m.$slots,"prefix",{},()=>[ae("span",null,gn(m.prefix),1)])],2)):At("v-if",!0),ae("span",{class:ge(w(l).e("number")),style:fr(m.valueStyle)},gn(w(d)),7),m.$slots.suffix||m.suffix?(Z(),ue("div",{key:1,class:ge(w(l).e("suffix"))},[It(m.$slots,"suffix",{},()=>[ae("span",null,gn(m.suffix),1)])],2)):At("v-if",!0)],2)],2))}});var Pye=En(Rye,[["__file","statistic.vue"]]);const Fz=Gr(Pye),Lye=bn({format:{type:String,default:"HH:mm:ss"},prefix:String,suffix:String,title:String,value:{type:wt([Number,Object]),default:0},valueStyle:{type:wt([String,Object,Array])}}),Oye={finish:()=>!0,[mi]:e=>gr(e)},Dye=[["Y",1e3*60*60*24*365],["M",1e3*60*60*24*30],["D",1e3*60*60*24],["H",1e3*60*60],["m",1e3*60],["s",1e3],["S",1]],wA=e=>gr(e)?new Date(e).getTime():e.valueOf(),SA=(e,n)=>{let s=e;const l=/\[([^\]]*)]/g;return Dye.reduce((m,[b,r])=>{const E=new RegExp(`${b}+(?![^\\[\\]]*\\])`,"g");if(E.test(m)){const M=Math.floor(s/r);return s-=M*r,m.replace(E,A=>String(M).padStart(A.length,"0"))}return m},n).replace(l,"$1")},zye=xe({name:"ElCountdown"}),Nye=xe({...zye,props:Lye,emits:Oye,setup(e,{expose:n,emit:s}){const l=e;let d;const m=Re(0),b=se(()=>SA(m.value,l.format)),r=A=>SA(A,l.format),E=()=>{d&&(jp(d),d=void 0)},M=()=>{const A=wA(l.value),P=()=>{let D=A-Date.now();s(mi,D),D<=0?(D=0,E(),s("finish")):d=Tf(P),m.value=D};d=Tf(P)};return Zr(()=>{m.value=wA(l.value)-Date.now(),on(()=>[l.value,l.format],()=>{E(),M()},{immediate:!0})}),Ls(()=>{E()}),n({displayValue:b}),(A,P)=>(Z(),Bt(w(Fz),{value:m.value,title:A.title,prefix:A.prefix,suffix:A.suffix,"value-style":A.valueStyle,formatter:r},cu({_:2},[Ei(A.$slots,(D,z)=>({name:z,fn:mt(()=>[It(A.$slots,z)])}))]),1032,["value","title","prefix","suffix","value-style"]))}});var Fye=En(Nye,[["__file","countdown.vue"]]);const Bye=Gr(Fye),Vye=bn({space:{type:[Number,String],default:""},active:{type:Number,default:0},direction:{type:String,default:"horizontal",values:["horizontal","vertical"]},alignCenter:{type:Boolean},simple:{type:Boolean},finishStatus:{type:String,values:["wait","process","finish","error","success"],default:"finish"},processStatus:{type:String,values:["wait","process","finish","error","success"],default:"process"}}),$ye={[mi]:(e,n)=>[e,n].every(gr)},Hye=xe({name:"ElSteps"}),Uye=xe({...Hye,props:Vye,emits:$ye,setup(e,{emit:n}){const s=e,l=dn("steps"),{children:d,addChild:m,removeChild:b}=c8(oi(),"ElStep");return on(d,()=>{d.value.forEach((r,E)=>{r.setIndex(E)})}),Ti("ElSteps",{props:s,steps:d,addStep:m,removeStep:b}),on(()=>s.active,(r,E)=>{n(mi,r,E)}),(r,E)=>(Z(),ue("div",{class:ge([w(l).b(),w(l).m(r.simple?"simple":r.direction)])},[It(r.$slots,"default")],2))}});var jye=En(Uye,[["__file","steps.vue"]]);const Gye=bn({title:{type:String,default:""},icon:{type:bs},description:{type:String,default:""},status:{type:String,values:["","wait","process","finish","error","success"],default:""}}),qye=xe({name:"ElStep"}),Wye=xe({...qye,props:Gye,setup(e){const n=e,s=dn("step"),l=Re(-1),d=Re({}),m=Re(""),b=Gn("ElSteps"),r=oi();Zr(()=>{on([()=>b.props.active,()=>b.props.processStatus,()=>b.props.finishStatus],([re])=>{Y(re)},{immediate:!0})}),Ls(()=>{b.removeStep(J.uid)});const E=se(()=>n.status||m.value),M=se(()=>{const re=b.steps.value[l.value-1];return re?re.currentStatus:"wait"}),A=se(()=>b.props.alignCenter),P=se(()=>b.props.direction==="vertical"),D=se(()=>b.props.simple),z=se(()=>b.steps.value.length),F=se(()=>{var re;return((re=b.steps.value[z.value-1])==null?void 0:re.uid)===r?.uid}),N=se(()=>D.value?"":b.props.space),q=se(()=>[s.b(),s.is(D.value?"simple":b.props.direction),s.is("flex",F.value&&!N.value&&!A.value),s.is("center",A.value&&!P.value&&!D.value)]),G=se(()=>{const re={flexBasis:gr(N.value)?`${N.value}px`:N.value?N.value:`${100/(z.value-(A.value?0:1))}%`};return P.value||F.value&&(re.maxWidth=`${100/z.value}%`),re}),ie=re=>{l.value=re},W=re=>{const he=re==="wait",fe={transitionDelay:`${he?"-":""}${150*l.value}ms`},ce=re===b.props.processStatus||he?0:100;fe.borderWidth=ce&&!D.value?"1px":0,fe[b.props.direction==="vertical"?"height":"width"]=`${ce}%`,d.value=fe},Y=re=>{re>l.value?m.value=b.props.finishStatus:re===l.value&&M.value!=="error"?m.value=b.props.processStatus:m.value="wait";const he=b.steps.value[l.value-1];he&&he.calcProgress(m.value)},J=ts({uid:r.uid,currentStatus:E,setIndex:ie,calcProgress:W});return b.addStep(J),(re,he)=>(Z(),ue("div",{style:fr(w(G)),class:ge(w(q))},[At(" icon & line "),ae("div",{class:ge([w(s).e("head"),w(s).is(w(E))])},[w(D)?At("v-if",!0):(Z(),ue("div",{key:0,class:ge(w(s).e("line"))},[ae("i",{class:ge(w(s).e("line-inner")),style:fr(d.value)},null,6)],2)),ae("div",{class:ge([w(s).e("icon"),w(s).is(re.icon||re.$slots.icon?"icon":"text")])},[It(re.$slots,"icon",{},()=>[re.icon?(Z(),Bt(w(rr),{key:0,class:ge(w(s).e("icon-inner"))},{default:mt(()=>[(Z(),Bt(si(re.icon)))]),_:1},8,["class"])):w(E)==="success"?(Z(),Bt(w(rr),{key:1,class:ge([w(s).e("icon-inner"),w(s).is("status")])},{default:mt(()=>[st(w(d0))]),_:1},8,["class"])):w(E)==="error"?(Z(),Bt(w(rr),{key:2,class:ge([w(s).e("icon-inner"),w(s).is("status")])},{default:mt(()=>[st(w(du))]),_:1},8,["class"])):w(D)?At("v-if",!0):(Z(),ue("div",{key:3,class:ge(w(s).e("icon-inner"))},gn(l.value+1),3))])],2)],2),At(" title & description "),ae("div",{class:ge(w(s).e("main"))},[ae("div",{class:ge([w(s).e("title"),w(s).is(w(E))])},[It(re.$slots,"title",{},()=>[ei(gn(re.title),1)])],2),w(D)?(Z(),ue("div",{key:0,class:ge(w(s).e("arrow"))},null,2)):(Z(),ue("div",{key:1,class:ge([w(s).e("description"),w(s).is(w(E))])},[It(re.$slots,"description",{},()=>[ei(gn(re.description),1)])],2))],2)],6))}});var Bz=En(Wye,[["__file","item.vue"]]);const Kye=Gr(jye,{Step:Bz}),Yye=ao(Bz),Vz=e=>["",...Cd].includes(e),Zye=bn({modelValue:{type:[Boolean,String,Number],default:!1},disabled:Boolean,loading:Boolean,size:{type:String,validator:Vz},width:{type:[String,Number],default:""},inlinePrompt:Boolean,inactiveActionIcon:{type:bs},activeActionIcon:{type:bs},activeIcon:{type:bs},inactiveIcon:{type:bs},activeText:{type:String,default:""},inactiveText:{type:String,default:""},activeValue:{type:[Boolean,String,Number],default:!0},inactiveValue:{type:[Boolean,String,Number],default:!1},name:{type:String,default:""},validateEvent:{type:Boolean,default:!0},beforeChange:{type:wt(Function)},id:String,tabindex:{type:[String,Number]},...Ta(["ariaLabel"])}),Xye={[Nr]:e=>Ts(e)||ir(e)||gr(e),[mi]:e=>Ts(e)||ir(e)||gr(e),[Go]:e=>Ts(e)||ir(e)||gr(e)},$z="ElSwitch",Jye=xe({name:$z}),Qye=xe({...Jye,props:Zye,emits:Xye,setup(e,{expose:n,emit:s}){const l=e,{formItem:d}=Fa(),m=Lo(),b=dn("switch"),{inputId:r}=Du(l,{formItemContext:d}),E=Ba(se(()=>l.loading)),M=Re(l.modelValue!==!1),A=Re(),P=Re(),D=se(()=>[b.b(),b.m(m.value),b.is("disabled",E.value),b.is("checked",G.value)]),z=se(()=>[b.e("label"),b.em("label","left"),b.is("active",!G.value)]),F=se(()=>[b.e("label"),b.em("label","right"),b.is("active",G.value)]),N=se(()=>({width:ho(l.width)}));on(()=>l.modelValue,()=>{M.value=!0});const q=se(()=>M.value?l.modelValue:!1),G=se(()=>q.value===l.activeValue);[l.activeValue,l.inactiveValue].includes(q.value)||(s(Nr,l.inactiveValue),s(mi,l.inactiveValue),s(Go,l.inactiveValue)),on(G,J=>{var re;A.value.checked=J,l.validateEvent&&((re=d?.validate)==null||re.call(d,"change").catch(he=>void 0))});const ie=()=>{const J=G.value?l.inactiveValue:l.activeValue;s(Nr,J),s(mi,J),s(Go,J),dr(()=>{A.value.checked=G.value})},W=()=>{if(E.value)return;const{beforeChange:J}=l;if(!J){ie();return}const re=J();[yv(re),Ts(re)].includes(!0)||No($z,"beforeChange must return type `Promise<boolean>` or `boolean`"),yv(re)?re.then(fe=>{fe&&ie()}).catch(fe=>{}):re&&ie()},Y=()=>{var J,re;(re=(J=A.value)==null?void 0:J.focus)==null||re.call(J)};return Zr(()=>{A.value.checked=G.value}),n({focus:Y,checked:G}),(J,re)=>(Z(),ue("div",{class:ge(w(D)),onClick:Er(W,["prevent"])},[ae("input",{id:w(r),ref_key:"input",ref:A,class:ge(w(b).e("input")),type:"checkbox",role:"switch","aria-checked":w(G),"aria-disabled":w(E),"aria-label":J.ariaLabel,name:J.name,"true-value":J.activeValue,"false-value":J.inactiveValue,disabled:w(E),tabindex:J.tabindex,onChange:ie,onKeydown:Ps(W,["enter"])},null,42,["id","aria-checked","aria-disabled","aria-label","name","true-value","false-value","disabled","tabindex","onKeydown"]),!J.inlinePrompt&&(J.inactiveIcon||J.inactiveText)?(Z(),ue("span",{key:0,class:ge(w(z))},[J.inactiveIcon?(Z(),Bt(w(rr),{key:0},{default:mt(()=>[(Z(),Bt(si(J.inactiveIcon)))]),_:1})):At("v-if",!0),!J.inactiveIcon&&J.inactiveText?(Z(),ue("span",{key:1,"aria-hidden":w(G)},gn(J.inactiveText),9,["aria-hidden"])):At("v-if",!0)],2)):At("v-if",!0),ae("span",{ref_key:"core",ref:P,class:ge(w(b).e("core")),style:fr(w(N))},[J.inlinePrompt?(Z(),ue("div",{key:0,class:ge(w(b).e("inner"))},[J.activeIcon||J.inactiveIcon?(Z(),Bt(w(rr),{key:0,class:ge(w(b).is("icon"))},{default:mt(()=>[(Z(),Bt(si(w(G)?J.activeIcon:J.inactiveIcon)))]),_:1},8,["class"])):J.activeText||J.inactiveText?(Z(),ue("span",{key:1,class:ge(w(b).is("text")),"aria-hidden":!w(G)},gn(w(G)?J.activeText:J.inactiveText),11,["aria-hidden"])):At("v-if",!0)],2)):At("v-if",!0),ae("div",{class:ge(w(b).e("action"))},[J.loading?(Z(),Bt(w(rr),{key:0,class:ge(w(b).is("loading"))},{default:mt(()=>[st(w(gc))]),_:1},8,["class"])):w(G)?It(J.$slots,"active-action",{key:1},()=>[J.activeActionIcon?(Z(),Bt(w(rr),{key:0},{default:mt(()=>[(Z(),Bt(si(J.activeActionIcon)))]),_:1})):At("v-if",!0)]):w(G)?At("v-if",!0):It(J.$slots,"inactive-action",{key:2},()=>[J.inactiveActionIcon?(Z(),Bt(w(rr),{key:0},{default:mt(()=>[(Z(),Bt(si(J.inactiveActionIcon)))]),_:1})):At("v-if",!0)])],2)],6),!J.inlinePrompt&&(J.activeIcon||J.activeText)?(Z(),ue("span",{key:1,class:ge(w(F))},[J.activeIcon?(Z(),Bt(w(rr),{key:0},{default:mt(()=>[(Z(),Bt(si(J.activeIcon)))]),_:1})):At("v-if",!0),!J.activeIcon&&J.activeText?(Z(),ue("span",{key:1,"aria-hidden":!w(G)},gn(J.activeText),9,["aria-hidden"])):At("v-if",!0)],2)):At("v-if",!0)],10,["onClick"]))}});var e1e=En(Qye,[["__file","switch.vue"]]);const t1e=Gr(e1e),m4=function(e){var n;return(n=e.target)==null?void 0:n.closest("td")},n1e=function(e,n,s,l,d){if(!n&&!l&&(!d||mn(d)&&!d.length))return e;ir(s)?s=s==="descending"?-1:1:s=s&&s<0?-1:1;const m=l?null:function(r,E){return d?(mn(d)||(d=[d]),d.map(M=>ir(M)?To(r,M):M(r,E,e))):(n!=="$key"&&Yr(r)&&"$value"in r&&(r=r.$value),[Yr(r)?To(r,n):r])},b=function(r,E){if(l)return l(r.value,E.value);for(let M=0,A=r.key.length;M<A;M++){if(r.key[M]<E.key[M])return-1;if(r.key[M]>E.key[M])return 1}return 0};return e.map((r,E)=>({value:r,index:E,key:m?m(r,E):null})).sort((r,E)=>{let M=b(r,E);return M||(M=r.index-E.index),M*+s}).map(r=>r.value)},Hz=function(e,n){let s=null;return e.columns.forEach(l=>{l.id===n&&(s=l)}),s},r1e=function(e,n){let s=null;for(let l=0;l<e.columns.length;l++){const d=e.columns[l];if(d.columnKey===n){s=d;break}}return s||No("ElTable",`No column matching with column-key: ${n}`),s},CA=function(e,n,s){const l=(n.className||"").match(new RegExp(`${s}-table_[^\\s]+`,"gm"));return l?Hz(e,l[0]):null},tl=(e,n)=>{if(!e)throw new Error("Row is required when get row identity");if(ir(n)){if(!n.includes("."))return`${e[n]}`;const s=n.split(".");let l=e;for(const d of s)l=l[d];return`${l}`}else if(hr(n))return n.call(null,e)},Ag=function(e,n,s=!1,l="children"){const d=e||[],m={};return d.forEach((b,r)=>{if(m[tl(b,n)]={row:b,index:r},s){const E=b[l];mn(E)&&Object.assign(m,Ag(E,n,!0,l))}}),m};function i1e(e,n){const s={};let l;for(l in e)s[l]=e[l];for(l in n)if(Wi(n,l)){const d=n[l];Li(d)||(s[l]=d)}return s}function z8(e){return e===""||Li(e)||(e=Number.parseInt(e,10),Number.isNaN(e)&&(e="")),e}function Uz(e){return e===""||Li(e)||(e=z8(e),Number.isNaN(e)&&(e=80)),e}function s1e(e){return gr(e)?e:ir(e)?/^\d+(?:px)?$/.test(e)?Number.parseInt(e,10):e:null}function o1e(...e){return e.length===0?n=>n:e.length===1?e[0]:e.reduce((n,s)=>(...l)=>n(s(...l)))}function jb(e,n,s,l,d,m){let b=m??0,r=!1;const E=e.indexOf(n),M=E!==-1,A=d?.call(null,n,b),P=z=>{z==="add"?e.push(n):e.splice(E,1),r=!0},D=z=>{let F=0;const N=l?.children&&z[l.children];return N&&mn(N)&&(F+=N.length,N.forEach(q=>{F+=D(q)})),F};return(!d||A)&&(Ts(s)?s&&!M?P("add"):!s&&M&&P("remove"):P(M?"remove":"add")),!l?.checkStrictly&&l?.children&&mn(n[l.children])&&n[l.children].forEach(z=>{const F=jb(e,z,s??!M,l,d,b+1);b+=D(z)+1,F&&(r=F)}),r}function a1e(e,n,s="children",l="hasChildren"){const d=b=>!(mn(b)&&b.length);function m(b,r,E){n(b,r,E),r.forEach(M=>{if(M[l]){n(M,null,E+1);return}const A=M[s];d(A)||m(M,A,E+1)})}e.forEach(b=>{if(b[l]){n(b,null,0);return}const r=b[s];d(r)||m(b,r,0)})}const l1e=(e,n,s,l)=>{const d={strategy:"fixed",...e.popperOptions},m=hr(l.tooltipFormatter)?l.tooltipFormatter({row:s,column:l,cellValue:fv(s,l.property).value}):void 0;return qs(m)?{slotContent:m,content:null,...e,popperOptions:d}:{slotContent:null,content:m??n,...e,popperOptions:d}};let zl=null;function u1e(e,n,s,l,d,m){const b=l1e(e,n,s,l),r={...b,slotContent:void 0};if(zl?.trigger===d){const z=zl.vm.component;VL(z.props,r),b.slotContent&&(z.slots.content=()=>[b.slotContent]);return}zl?.();const E=m?.refs.tableWrapper,M=E?.dataset.prefix,A=st(Na,{virtualTriggering:!0,virtualRef:d,appendTo:E,placement:"top",transition:"none",offset:0,hideAfter:0,...r},b.slotContent?{content:()=>b.slotContent}:void 0);A.appContext={...m.appContext,...m};const P=document.createElement("div");Cf(A,P),A.component.exposed.onOpen();const D=E?.querySelector(`.${M}-scrollbar__wrap`);zl=()=>{Cf(null,P),D?.removeEventListener("scroll",zl),zl=null},zl.trigger=d,zl.vm=A,D?.addEventListener("scroll",zl)}function jz(e){return e.children?lK(e.children,jz):[e]}function EA(e,n){return e+n.colSpan}const Gz=(e,n,s,l)=>{let d=0,m=e;const b=s.states.columns.value;if(l){const E=jz(l[e]);d=b.slice(0,b.indexOf(E[0])).reduce(EA,0),m=d+E.reduce(EA,0)-1}else d=e;let r;switch(n){case"left":m<s.states.fixedLeafColumnsLength.value&&(r="left");break;case"right":d>=b.length-s.states.rightFixedLeafColumnsLength.value&&(r="right");break;default:m<s.states.fixedLeafColumnsLength.value?r="left":d>=b.length-s.states.rightFixedLeafColumnsLength.value&&(r="right")}return r?{direction:r,start:d,after:m}:{}},N8=(e,n,s,l,d,m=0)=>{const b=[],{direction:r,start:E,after:M}=Gz(n,s,l,d);if(r){const A=r==="left";b.push(`${e}-fixed-column--${r}`),A&&M+m===l.states.fixedLeafColumnsLength.value-1?b.push("is-last-column"):!A&&E-m===l.states.columns.value.length-l.states.rightFixedLeafColumnsLength.value&&b.push("is-first-column")}return b};function TA(e,n){return e+(ry(n.realWidth)||Number.isNaN(n.realWidth)?Number(n.width):n.realWidth)}const F8=(e,n,s,l)=>{const{direction:d,start:m=0,after:b=0}=Gz(e,n,s,l);if(!d)return;const r={},E=d==="left",M=s.states.columns.value;return E?r.left=M.slice(0,m).reduce(TA,0):r.right=M.slice(b+1).reverse().reduce(TA,0),r},Xg=(e,n)=>{e&&(Number.isNaN(e[n])||(e[n]=`${e[n]}px`))};function c1e(e){const n=oi(),s=Re(!1),l=Re([]);return{updateExpandRows:()=>{const E=e.data.value||[],M=e.rowKey.value;if(s.value)l.value=E.slice();else if(M){const A=Ag(l.value,M);l.value=E.reduce((P,D)=>{const z=tl(D,M);return A[z]&&P.push(D),P},[])}else l.value=[]},toggleRowExpansion:(E,M)=>{jb(l.value,E,M)&&n.emit("expand-change",E,l.value.slice())},setExpandRowKeys:E=>{n.store.assertRowKey();const M=e.data.value||[],A=e.rowKey.value,P=Ag(M,A);l.value=E.reduce((D,z)=>{const F=P[z];return F&&D.push(F.row),D},[])},isRowExpanded:E=>{const M=e.rowKey.value;return M?!!Ag(l.value,M)[tl(E,M)]:l.value.includes(E)},states:{expandRows:l,defaultExpandAll:s}}}function d1e(e){const n=oi(),s=Re(null),l=Re(null),d=M=>{n.store.assertRowKey(),s.value=M,b(M)},m=()=>{s.value=null},b=M=>{const{data:A,rowKey:P}=e;let D=null;P.value&&(D=(w(A)||[]).find(z=>tl(z,P.value)===M)),l.value=D,n.emit("current-change",l.value,null)};return{setCurrentRowKey:d,restoreCurrentRowKey:m,setCurrentRowByKey:b,updateCurrentRow:M=>{const A=l.value;if(M&&M!==A){l.value=M,n.emit("current-change",l.value,A);return}!M&&A&&(l.value=null,n.emit("current-change",null,A))},updateCurrentRowData:()=>{const M=e.rowKey.value,A=e.data.value||[],P=l.value;if(!A.includes(P)&&P){if(M){const D=tl(P,M);b(D)}else l.value=null;ry(l.value)&&n.emit("current-change",null,P)}else s.value&&(b(s.value),m())},states:{_currentRowKey:s,currentRow:l}}}function h1e(e){const n=Re([]),s=Re({}),l=Re(16),d=Re(!1),m=Re({}),b=Re("hasChildren"),r=Re("children"),E=Re(!1),M=oi(),A=se(()=>{if(!e.rowKey.value)return{};const Y=e.data.value||[];return D(Y)}),P=se(()=>{const Y=e.rowKey.value,J=Object.keys(m.value),re={};return J.length&&J.forEach(he=>{if(m.value[he].length){const fe={children:[]};m.value[he].forEach(ce=>{const me=tl(ce,Y);fe.children.push(me),ce[b.value]&&!re[me]&&(re[me]={children:[]})}),re[he]=fe}}),re}),D=Y=>{const J=e.rowKey.value,re={};return a1e(Y,(he,fe,ce)=>{const me=tl(he,J);mn(fe)?re[me]={children:fe.map(we=>tl(we,J)),level:ce}:d.value&&(re[me]={children:[],lazy:!0,level:ce})},r.value,b.value),re},z=(Y=!1,J=(re=>(re=M.store)==null?void 0:re.states.defaultExpandAll.value)())=>{var re;const he=A.value,fe=P.value,ce=Object.keys(he),me={};if(ce.length){const we=w(s),ye=[],Ue=(Pe,ve)=>{if(Y)return n.value?J||n.value.includes(ve):!!(J||Pe?.expanded);{const $e=J||n.value&&n.value.includes(ve);return!!(Pe?.expanded||$e)}};ce.forEach(Pe=>{const ve=we[Pe],$e={...he[Pe]};if($e.expanded=Ue(ve,Pe),$e.lazy){const{loaded:Te=!1,loading:Ae=!1}=ve||{};$e.loaded=!!Te,$e.loading=!!Ae,ye.push(Pe)}me[Pe]=$e});const Ne=Object.keys(fe);d.value&&Ne.length&&ye.length&&Ne.forEach(Pe=>{const ve=we[Pe],$e=fe[Pe].children;if(ye.includes(Pe)){if(me[Pe].children.length!==0)throw new Error("[ElTable]children must be an empty array.");me[Pe].children=$e}else{const{loaded:Te=!1,loading:Ae=!1}=ve||{};me[Pe]={lazy:!0,loaded:!!Te,loading:!!Ae,expanded:Ue(ve,Pe),children:$e,level:""}}})}s.value=me,(re=M.store)==null||re.updateTableScrollY()};on(()=>n.value,()=>{z(!0)}),on(()=>A.value,()=>{z()}),on(()=>P.value,()=>{z()});const F=Y=>{n.value=Y,z()},N=Y=>d.value&&Y&&"loaded"in Y&&!Y.loaded,q=(Y,J)=>{M.store.assertRowKey();const re=e.rowKey.value,he=tl(Y,re),fe=he&&s.value[he];if(he&&fe&&"expanded"in fe){const ce=fe.expanded;J=Li(J)?!fe.expanded:J,s.value[he].expanded=J,ce!==J&&M.emit("expand-change",Y,J),N(fe)&&ie(Y,he,fe),M.store.updateTableScrollY()}},G=Y=>{M.store.assertRowKey();const J=e.rowKey.value,re=tl(Y,J),he=s.value[re];N(he)?ie(Y,re,he):q(Y,void 0)},ie=(Y,J,re)=>{const{load:he}=M.props;he&&!s.value[J].loaded&&(s.value[J].loading=!0,he(Y,re,fe=>{if(!mn(fe))throw new TypeError("[ElTable] data must be an array");s.value[J].loading=!1,s.value[J].loaded=!0,s.value[J].expanded=!0,fe.length&&(m.value[J]=fe),M.emit("expand-change",Y,!0)}))};return{loadData:ie,loadOrToggle:G,toggleTreeExpansion:q,updateTreeExpandKeys:F,updateTreeData:z,updateKeyChildren:(Y,J)=>{const{lazy:re,rowKey:he}=M.props;if(re){if(!he)throw new Error("[Table] rowKey is required in updateKeyChild");m.value[Y]&&(m.value[Y]=J)}},normalize:D,states:{expandRowKeys:n,treeData:s,indent:l,lazy:d,lazyTreeNodeMap:m,lazyColumnIdentifier:b,childrenColumnName:r,checkStrictly:E}}}const f1e=(e,n)=>{const s=n.sortingColumn;return!s||ir(s.sortable)?e:n1e(e,n.sortProp,n.sortOrder,s.sortMethod,s.sortBy)},eb=e=>{const n=[];return e.forEach(s=>{s.children&&s.children.length>0?n.push.apply(n,eb(s.children)):n.push(s)}),n};function p1e(){var e;const n=oi(),{size:s}=da((e=n.proxy)==null?void 0:e.$props),l=Re(null),d=Re([]),m=Re([]),b=Re(!1),r=Re([]),E=Re([]),M=Re([]),A=Re([]),P=Re([]),D=Re([]),z=Re([]),F=Re([]),N=[],q=Re(0),G=Re(0),ie=Re(0),W=Re(!1),Y=Re([]),J=Re(!1),re=Re(!1),he=Re(null),fe=Re({}),ce=Re(null),me=Re(null),we=Re(null),ye=Re(null),Ue=Re(null),Ne=se(()=>l.value?Ag(Y.value,l.value):void 0);on(d,()=>{var pr;n.state&&(Te(!1),n.props.tableLayout==="auto"&&((pr=n.refs.tableHeaderRef)==null||pr.updateFixedColumnStyle()))},{deep:!0});const Pe=()=>{if(!l.value)throw new Error("[ElTable] prop row-key is required")},ve=pr=>{var Fr;(Fr=pr.children)==null||Fr.forEach(vt=>{vt.fixed=pr.fixed,ve(vt)})},$e=()=>{var pr,Fr;r.value.forEach(vr=>{ve(vr)}),A.value=r.value.filter(vr=>vr.type!=="selection"&&[!0,"left"].includes(vr.fixed));let vt;if(((Fr=(pr=r.value)==null?void 0:pr[0])==null?void 0:Fr.type)==="selection"){const vr=r.value[0];vt=[!0,"left"].includes(vr.fixed)||A.value.length&&vr.fixed!=="right",vt&&A.value.unshift(vr)}P.value=r.value.filter(vr=>vr.fixed==="right");const yt=r.value.filter(vr=>(vt?vr.type!=="selection":!0)&&!vr.fixed);E.value=[].concat(A.value).concat(yt).concat(P.value);const it=eb(yt),ln=eb(A.value),Xn=eb(P.value);q.value=it.length,G.value=ln.length,ie.value=Xn.length,M.value=[].concat(ln).concat(it).concat(Xn),b.value=A.value.length>0||P.value.length>0},Te=(pr,Fr=!1)=>{pr&&$e(),Fr?n.state.doLayout():n.state.debouncedUpdateLayout()},Ae=pr=>Ne.value?!!Ne.value[tl(pr,l.value)]:Y.value.includes(pr),Ve=()=>{W.value=!1;const pr=Y.value;Y.value=[],pr.length&&n.emit("selection-change",[])},We=()=>{var pr,Fr;let vt;if(l.value){vt=[];const yt=(Fr=(pr=n?.store)==null?void 0:pr.states)==null?void 0:Fr.childrenColumnName.value,it=Ag(d.value,l.value,!0,yt);for(const ln in Ne.value)Wi(Ne.value,ln)&&!it[ln]&&vt.push(Ne.value[ln].row)}else vt=Y.value.filter(yt=>!d.value.includes(yt));if(vt.length){const yt=Y.value.filter(it=>!vt.includes(it));Y.value=yt,n.emit("selection-change",yt.slice())}},ft=()=>(Y.value||[]).slice(),at=(pr,Fr,vt=!0,yt=!1)=>{var it,ln,Xn,vr;const Ii={children:(ln=(it=n?.store)==null?void 0:it.states)==null?void 0:ln.childrenColumnName.value,checkStrictly:(vr=(Xn=n?.store)==null?void 0:Xn.states)==null?void 0:vr.checkStrictly.value};if(jb(Y.value,pr,Fr,Ii,yt?void 0:he.value,d.value.indexOf(pr))){const Qs=(Y.value||[]).slice();vt&&n.emit("select",Qs,pr),n.emit("selection-change",Qs)}},ct=()=>{var pr,Fr;const vt=re.value?!W.value:!(W.value||Y.value.length);W.value=vt;let yt=!1,it=0;const ln=(Fr=(pr=n?.store)==null?void 0:pr.states)==null?void 0:Fr.rowKey.value,{childrenColumnName:Xn}=n.store.states,vr={children:Xn.value,checkStrictly:!1};d.value.forEach((Ii,ds)=>{const Qs=ds+it;jb(Y.value,Ii,vt,vr,he.value,Qs)&&(yt=!0),it+=gt(tl(Ii,ln))}),yt&&n.emit("selection-change",Y.value?Y.value.slice():[]),n.emit("select-all",(Y.value||[]).slice())},Mt=()=>{d.value.forEach(pr=>{const Fr=tl(pr,l.value),vt=Ne.value[Fr];vt&&(Y.value[vt.index]=pr)})},Ct=()=>{var pr;if(((pr=d.value)==null?void 0:pr.length)===0){W.value=!1;return}const{childrenColumnName:Fr}=n.store.states;let vt=0,yt=0;const it=Xn=>{var vr;for(const Ii of Xn){const ds=he.value&&he.value.call(null,Ii,vt);if(Ae(Ii))yt++;else if(!he.value||ds)return!1;if(vt++,(vr=Ii[Fr.value])!=null&&vr.length&&!it(Ii[Fr.value]))return!1}return!0},ln=it(d.value||[]);W.value=yt===0?!1:ln},gt=pr=>{var Fr;if(!n||!n.store)return 0;const{treeData:vt}=n.store.states;let yt=0;const it=(Fr=vt.value[pr])==null?void 0:Fr.children;return it&&(yt+=it.length,it.forEach(ln=>{yt+=gt(ln)})),yt},Ke=(pr,Fr)=>{mn(pr)||(pr=[pr]);const vt={};return pr.forEach(yt=>{fe.value[yt.id]=Fr,vt[yt.columnKey||yt.id]=Fr}),vt},Lt=(pr,Fr,vt)=>{me.value&&me.value!==pr&&(me.value.order=null),me.value=pr,we.value=Fr,ye.value=vt},xn=()=>{let pr=w(m);Object.keys(fe.value).forEach(Fr=>{const vt=fe.value[Fr];if(!vt||vt.length===0)return;const yt=Hz({columns:M.value},Fr);yt&&yt.filterMethod&&(pr=pr.filter(it=>vt.some(ln=>yt.filterMethod.call(null,ln,it,yt))))}),ce.value=pr},Ht=()=>{d.value=f1e(ce.value,{sortingColumn:me.value,sortProp:we.value,sortOrder:ye.value})},le=(pr=void 0)=>{pr&&pr.filter||xn(),Ht()},nt=pr=>{const{tableHeaderRef:Fr}=n.refs;if(!Fr)return;const vt=Object.assign({},Fr.filterPanels),yt=Object.keys(vt);if(yt.length)if(ir(pr)&&(pr=[pr]),mn(pr)){const it=pr.map(ln=>r1e({columns:M.value},ln));yt.forEach(ln=>{const Xn=it.find(vr=>vr.id===ln);Xn&&(Xn.filteredValue=[])}),n.store.commit("filterChange",{column:it,values:[],silent:!0,multi:!0})}else yt.forEach(it=>{const ln=M.value.find(Xn=>Xn.id===it);ln&&(ln.filteredValue=[])}),fe.value={},n.store.commit("filterChange",{column:{},values:[],silent:!0})},Gt=()=>{me.value&&(Lt(null,null,null),n.store.commit("changeSortCondition",{silent:!0}))},{setExpandRowKeys:an,toggleRowExpansion:Qt,updateExpandRows:Zt,states:rn,isRowExpanded:bt}=c1e({data:d,rowKey:l}),{updateTreeExpandKeys:fn,toggleTreeExpansion:pn,updateTreeData:Vn,updateKeyChildren:Nn,loadOrToggle:Ot,states:Bn}=h1e({data:d,rowKey:l}),{updateCurrentRowData:Sr,updateCurrentRow:Ur,setCurrentRowKey:Kn,states:ui}=d1e({data:d,rowKey:l});return{assertRowKey:Pe,updateColumns:$e,scheduleLayout:Te,isSelected:Ae,clearSelection:Ve,cleanSelection:We,getSelectionRows:ft,toggleRowSelection:at,_toggleAllSelection:ct,toggleAllSelection:null,updateSelectionByRowKey:Mt,updateAllSelected:Ct,updateFilters:Ke,updateCurrentRow:Ur,updateSort:Lt,execFilter:xn,execSort:Ht,execQuery:le,clearFilter:nt,clearSort:Gt,toggleRowExpansion:Qt,setExpandRowKeysAdapter:pr=>{an(pr),fn(pr)},setCurrentRowKey:Kn,toggleRowExpansionAdapter:(pr,Fr)=>{M.value.some(({type:yt})=>yt==="expand")?Qt(pr,Fr):pn(pr,Fr)},isRowExpanded:bt,updateExpandRows:Zt,updateCurrentRowData:Sr,loadOrToggle:Ot,updateTreeData:Vn,updateKeyChildren:Nn,states:{tableSize:s,rowKey:l,data:d,_data:m,isComplex:b,_columns:r,originColumns:E,columns:M,fixedColumns:A,rightFixedColumns:P,leafColumns:D,fixedLeafColumns:z,rightFixedLeafColumns:F,updateOrderFns:N,leafColumnsLength:q,fixedLeafColumnsLength:G,rightFixedLeafColumnsLength:ie,isAllSelected:W,selection:Y,reserveSelection:J,selectOnIndeterminate:re,selectable:he,filters:fe,filteredData:ce,sortingColumn:me,sortProp:we,sortOrder:ye,hoverRow:Ue,...rn,...Bn,...ui}}}function k6(e,n){return e.map(s=>{var l;return s.id===n.id?n:((l=s.children)!=null&&l.length&&(s.children=k6(s.children,n)),s)})}function M6(e){e.forEach(n=>{var s,l;n.no=(s=n.getColumnIndex)==null?void 0:s.call(n),(l=n.children)!=null&&l.length&&M6(n.children)}),e.sort((n,s)=>n.no-s.no)}function m1e(){const e=oi(),n=p1e();return{ns:dn("table"),...n,mutations:{setData(b,r){const E=w(b._data)!==r;b.data.value=r,b._data.value=r,e.store.execQuery(),e.store.updateCurrentRowData(),e.store.updateExpandRows(),e.store.updateTreeData(e.store.states.defaultExpandAll.value),w(b.reserveSelection)?(e.store.assertRowKey(),e.store.updateSelectionByRowKey()):E?e.store.clearSelection():e.store.cleanSelection(),e.store.updateAllSelected(),e.$ready&&e.store.scheduleLayout()},insertColumn(b,r,E,M){const A=w(b._columns);let P=[];E?(E&&!E.children&&(E.children=[]),E.children.push(r),P=k6(A,E)):(A.push(r),P=A),M6(P),b._columns.value=P,b.updateOrderFns.push(M),r.type==="selection"&&(b.selectable.value=r.selectable,b.reserveSelection.value=r.reserveSelection),e.$ready&&(e.store.updateColumns(),e.store.scheduleLayout())},updateColumnOrder(b,r){var E;((E=r.getColumnIndex)==null?void 0:E.call(r))!==r.no&&(M6(b._columns.value),e.$ready&&e.store.updateColumns())},removeColumn(b,r,E,M){const A=w(b._columns)||[];if(E)E.children.splice(E.children.findIndex(D=>D.id===r.id),1),dr(()=>{var D;((D=E.children)==null?void 0:D.length)===0&&delete E.children}),b._columns.value=k6(A,E);else{const D=A.indexOf(r);D>-1&&(A.splice(D,1),b._columns.value=A)}const P=b.updateOrderFns.indexOf(M);P>-1&&b.updateOrderFns.splice(P,1),e.$ready&&(e.store.updateColumns(),e.store.scheduleLayout())},sort(b,r){const{prop:E,order:M,init:A}=r;if(E){const P=w(b.columns).find(D=>D.property===E);P&&(P.order=M,e.store.updateSort(P,E,M),e.store.commit("changeSortCondition",{init:A}))}},changeSortCondition(b,r){const{sortingColumn:E,sortProp:M,sortOrder:A}=b,P=w(E),D=w(M),z=w(A);ry(z)&&(b.sortingColumn.value=null,b.sortProp.value=null);const F={filter:!0};e.store.execQuery(F),(!r||!(r.silent||r.init))&&e.emit("sort-change",{column:P,prop:D,order:z}),e.store.updateTableScrollY()},filterChange(b,r){const{column:E,values:M,silent:A}=r,P=e.store.updateFilters(E,M);e.store.execQuery(),A||e.emit("filter-change",P),e.store.updateTableScrollY()},toggleAllSelection(){e.store.toggleAllSelection()},rowSelectedChanged(b,r){e.store.toggleRowSelection(r),e.store.updateAllSelected()},setHoverRow(b,r){b.hoverRow.value=r},setCurrentRow(b,r){e.store.updateCurrentRow(r)}},commit:function(b,...r){const E=e.store.mutations;if(E[b])E[b].apply(e,[e.store.states].concat(r));else throw new Error(`Action not found: ${b}`)},updateTableScrollY:function(){dr(()=>e.layout.updateScrollY.apply(e.layout))}}}const vv={rowKey:"rowKey",defaultExpandAll:"defaultExpandAll",selectOnIndeterminate:"selectOnIndeterminate",indent:"indent",lazy:"lazy",data:"data","treeProps.hasChildren":{key:"lazyColumnIdentifier",default:"hasChildren"},"treeProps.children":{key:"childrenColumnName",default:"children"},"treeProps.checkStrictly":{key:"checkStrictly",default:!1}};function g1e(e,n){if(!e)throw new Error("Table is required.");const s=m1e();return s.toggleAllSelection=Vl(s._toggleAllSelection,10),Object.keys(vv).forEach(l=>{qz(Wz(n,l),l,s)}),_1e(s,n),s}function _1e(e,n){Object.keys(vv).forEach(s=>{on(()=>Wz(n,s),l=>{qz(l,s,e)})})}function qz(e,n,s){let l=e,d=vv[n];Yr(vv[n])&&(d=d.key,l=l||vv[n].default),s.states[d].value=l}function Wz(e,n){if(n.includes(".")){const s=n.split(".");let l=e;return s.forEach(d=>{l=l[d]}),l}else return e[n]}class v1e{constructor(n){this.observers=[],this.table=null,this.store=null,this.columns=[],this.fit=!0,this.showHeader=!0,this.height=Re(null),this.scrollX=Re(!1),this.scrollY=Re(!1),this.bodyWidth=Re(null),this.fixedWidth=Re(null),this.rightFixedWidth=Re(null),this.gutterWidth=0;for(const s in n)Wi(n,s)&&(Hs(this[s])?this[s].value=n[s]:this[s]=n[s]);if(!this.table)throw new Error("Table is required for Table Layout");if(!this.store)throw new Error("Store is required for Table Layout")}updateScrollY(){const n=this.height.value;if(ry(n))return!1;const s=this.table.refs.scrollBarRef;if(this.table.vnode.el&&s?.wrapRef){let l=!0;const d=this.scrollY.value;return l=s.wrapRef.scrollHeight>s.wrapRef.clientHeight,this.scrollY.value=l,d!==l}return!1}setHeight(n,s="height"){if(!Pi)return;const l=this.table.vnode.el;if(n=s1e(n),this.height.value=Number(n),!l&&(n||n===0))return dr(()=>this.setHeight(n,s));gr(n)?(l.style[s]=`${n}px`,this.updateElsHeight()):ir(n)&&(l.style[s]=n,this.updateElsHeight())}setMaxHeight(n){this.setHeight(n,"max-height")}getFlattenColumns(){const n=[];return this.table.store.states.columns.value.forEach(l=>{l.isColumnGroup?n.push.apply(n,l.columns):n.push(l)}),n}updateElsHeight(){this.updateScrollY(),this.notifyObservers("scrollable")}headerDisplayNone(n){if(!n)return!0;let s=n;for(;s.tagName!=="DIV";){if(getComputedStyle(s).display==="none")return!0;s=s.parentElement}return!1}updateColumnsWidth(){if(!Pi)return;const n=this.fit,s=this.table.vnode.el.clientWidth;let l=0;const d=this.getFlattenColumns(),m=d.filter(E=>!gr(E.width));if(d.forEach(E=>{gr(E.width)&&E.realWidth&&(E.realWidth=null)}),m.length>0&&n){if(d.forEach(E=>{l+=Number(E.width||E.minWidth||80)}),l<=s){this.scrollX.value=!1;const E=s-l;if(m.length===1)m[0].realWidth=Number(m[0].minWidth||80)+E;else{const M=m.reduce((D,z)=>D+Number(z.minWidth||80),0),A=E/M;let P=0;m.forEach((D,z)=>{if(z===0)return;const F=Math.floor(Number(D.minWidth||80)*A);P+=F,D.realWidth=Number(D.minWidth||80)+F}),m[0].realWidth=Number(m[0].minWidth||80)+E-P}}else this.scrollX.value=!0,m.forEach(E=>{E.realWidth=Number(E.minWidth)});this.bodyWidth.value=Math.max(l,s),this.table.state.resizeState.value.width=this.bodyWidth.value}else d.forEach(E=>{!E.width&&!E.minWidth?E.realWidth=80:E.realWidth=Number(E.width||E.minWidth),l+=E.realWidth}),this.scrollX.value=l>s,this.bodyWidth.value=l;const b=this.store.states.fixedColumns.value;if(b.length>0){let E=0;b.forEach(M=>{E+=Number(M.realWidth||M.width)}),this.fixedWidth.value=E}const r=this.store.states.rightFixedColumns.value;if(r.length>0){let E=0;r.forEach(M=>{E+=Number(M.realWidth||M.width)}),this.rightFixedWidth.value=E}this.notifyObservers("columns")}addObserver(n){this.observers.push(n)}removeObserver(n){const s=this.observers.indexOf(n);s!==-1&&this.observers.splice(s,1)}notifyObservers(n){this.observers.forEach(l=>{var d,m;switch(n){case"columns":(d=l.state)==null||d.onColumnsChange(this);break;case"scrollable":(m=l.state)==null||m.onScrollableChange(this);break;default:throw new Error(`Table Layout don't have event ${n}.`)}})}}const{CheckboxGroup:y1e}=Ou,b1e=xe({name:"ElTableFilterPanel",components:{ElCheckbox:Ou,ElCheckboxGroup:y1e,ElScrollbar:Id,ElTooltip:Na,ElIcon:rr,ArrowDown:Ed,ArrowUp:xx},directives:{ClickOutside:yh},props:{placement:{type:String,default:"bottom-start"},store:{type:Object},column:{type:Object},upDataColumn:{type:Function},appendTo:Ao.appendTo},setup(e){const n=oi(),{t:s}=Oi(),l=dn("table-filter"),d=n?.parent;d.filterPanels.value[e.column.id]||(d.filterPanels.value[e.column.id]=n);const m=Re(!1),b=Re(null),r=se(()=>e.column&&e.column.filters),E=se(()=>e.column.filterClassName?`${l.b()} ${e.column.filterClassName}`:l.b()),M=se({get:()=>{var J;return(((J=e.column)==null?void 0:J.filteredValue)||[])[0]},set:J=>{A.value&&(Mu(J)?A.value.splice(0,1):A.value.splice(0,1,J))}}),A=se({get(){return e.column?e.column.filteredValue||[]:[]},set(J){e.column&&e.upDataColumn("filteredValue",J)}}),P=se(()=>e.column?e.column.filterMultiple:!0),D=J=>J.value===M.value,z=()=>{m.value=!1},F=J=>{J.stopPropagation(),m.value=!m.value},N=()=>{m.value=!1},q=()=>{W(A.value),z()},G=()=>{A.value=[],W(A.value),z()},ie=J=>{M.value=J,Mu(J)?W([]):W(A.value),z()},W=J=>{e.store.commit("filterChange",{column:e.column,values:J}),e.store.updateAllSelected()};on(m,J=>{e.column&&e.upDataColumn("filterOpened",J)},{immediate:!0});const Y=se(()=>{var J,re;return(re=(J=b.value)==null?void 0:J.popperRef)==null?void 0:re.contentRef});return{tooltipVisible:m,multiple:P,filterClassName:E,filteredValue:A,filterValue:M,filters:r,handleConfirm:q,handleReset:G,handleSelect:ie,isPropAbsent:Mu,isActive:D,t:s,ns:l,showFilterPanel:F,hideFilterPanel:N,popperPaneRef:Y,tooltip:b}}});function x1e(e,n,s,l,d,m){const b=fi("el-checkbox"),r=fi("el-checkbox-group"),E=fi("el-scrollbar"),M=fi("arrow-up"),A=fi("arrow-down"),P=fi("el-icon"),D=fi("el-tooltip"),z=ax("click-outside");return Z(),Bt(D,{ref:"tooltip",visible:e.tooltipVisible,offset:0,placement:e.placement,"show-arrow":!1,"stop-popper-mouse-event":!1,teleported:"",effect:"light",pure:"","popper-class":e.filterClassName,persistent:"","append-to":e.appendTo},{content:mt(()=>[e.multiple?(Z(),ue("div",{key:0},[ae("div",{class:ge(e.ns.e("content"))},[st(E,{"wrap-class":e.ns.e("wrap")},{default:mt(()=>[st(r,{modelValue:e.filteredValue,"onUpdate:modelValue":F=>e.filteredValue=F,class:ge(e.ns.e("checkbox-group"))},{default:mt(()=>[(Z(!0),ue(cr,null,Ei(e.filters,F=>(Z(),Bt(b,{key:F.value,value:F.value},{default:mt(()=>[ei(gn(F.text),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue","onUpdate:modelValue","class"])]),_:1},8,["wrap-class"])],2),ae("div",{class:ge(e.ns.e("bottom"))},[ae("button",{class:ge({[e.ns.is("disabled")]:e.filteredValue.length===0}),disabled:e.filteredValue.length===0,type:"button",onClick:e.handleConfirm},gn(e.t("el.table.confirmFilter")),11,["disabled","onClick"]),ae("button",{type:"button",onClick:e.handleReset},gn(e.t("el.table.resetFilter")),9,["onClick"])],2)])):(Z(),ue("ul",{key:1,class:ge(e.ns.e("list"))},[ae("li",{class:ge([e.ns.e("list-item"),{[e.ns.is("active")]:e.isPropAbsent(e.filterValue)}]),onClick:F=>e.handleSelect(null)},gn(e.t("el.table.clearFilter")),11,["onClick"]),(Z(!0),ue(cr,null,Ei(e.filters,F=>(Z(),ue("li",{key:F.value,class:ge([e.ns.e("list-item"),e.ns.is("active",e.isActive(F))]),label:F.value,onClick:N=>e.handleSelect(F.value)},gn(F.text),11,["label","onClick"]))),128))],2))]),default:mt(()=>[Wr((Z(),ue("span",{class:ge([`${e.ns.namespace.value}-table__column-filter-trigger`,`${e.ns.namespace.value}-none-outline`]),onClick:e.showFilterPanel},[st(P,null,{default:mt(()=>[It(e.$slots,"filter-icon",{},()=>[e.column.filterOpened?(Z(),Bt(M,{key:0})):(Z(),Bt(A,{key:1}))])]),_:3})],10,["onClick"])),[[z,e.hideFilterPanel,e.popperPaneRef]])]),_:3},8,["visible","placement","popper-class","append-to"])}var w1e=En(b1e,[["render",x1e],["__file","filter-panel.vue"]]);function B8(e){const n=oi();ox(()=>{s.value.addObserver(n)}),Zr(()=>{l(s.value),d(s.value)}),yc(()=>{l(s.value),d(s.value)}),Mf(()=>{s.value.removeObserver(n)});const s=se(()=>{const m=e.layout;if(!m)throw new Error("Can not find table layout.");return m}),l=m=>{var b;const r=((b=e.vnode.el)==null?void 0:b.querySelectorAll("colgroup > col"))||[];if(!r.length)return;const E=m.getFlattenColumns(),M={};E.forEach(A=>{M[A.id]=A});for(let A=0,P=r.length;A<P;A++){const D=r[A],z=D.getAttribute("name"),F=M[z];F&&D.setAttribute("width",F.realWidth||F.width)}},d=m=>{var b,r;const E=((b=e.vnode.el)==null?void 0:b.querySelectorAll("colgroup > col[name=gutter]"))||[];for(let A=0,P=E.length;A<P;A++)E[A].setAttribute("width",m.scrollY.value?m.gutterWidth:"0");const M=((r=e.vnode.el)==null?void 0:r.querySelectorAll("th.gutter"))||[];for(let A=0,P=M.length;A<P;A++){const D=M[A];D.style.width=m.scrollY.value?`${m.gutterWidth}px`:"0",D.style.display=m.scrollY.value?"":"none"}};return{tableLayout:s.value,onColumnsChange:l,onScrollableChange:d}}const Cc=Symbol("ElTable");function S1e(e,n){const s=oi(),l=Gn(Cc),d=N=>{N.stopPropagation()},m=(N,q)=>{!q.filters&&q.sortable?F(N,q,!1):q.filterable&&!q.sortable&&d(N),l?.emit("header-click",q,N)},b=(N,q)=>{l?.emit("header-contextmenu",q,N)},r=Re(null),E=Re(!1),M=Re({}),A=(N,q)=>{if(Pi&&!(q.children&&q.children.length>0)&&r.value&&e.border){E.value=!0;const G=l;n("set-drag-visible",!0);const W=(G?.vnode.el).getBoundingClientRect().left,Y=s.vnode.el.querySelector(`th.${q.id}`),J=Y.getBoundingClientRect(),re=J.left-W+30;Tu(Y,"noclick"),M.value={startMouseLeft:N.clientX,startLeft:J.right-W,startColumnLeft:J.left-W,tableLeft:W};const he=G?.refs.resizeProxy;he.style.left=`${M.value.startLeft}px`,document.onselectstart=function(){return!1},document.ondragstart=function(){return!1};const fe=me=>{const we=me.clientX-M.value.startMouseLeft,ye=M.value.startLeft+we;he.style.left=`${Math.max(re,ye)}px`},ce=()=>{if(E.value){const{startColumnLeft:me,startLeft:we}=M.value,Ue=Number.parseInt(he.style.left,10)-me;q.width=q.realWidth=Ue,G?.emit("header-dragend",q.width,we-me,q,N),requestAnimationFrame(()=>{e.store.scheduleLayout(!1,!0)}),document.body.style.cursor="",E.value=!1,r.value=null,M.value={},n("set-drag-visible",!1)}document.removeEventListener("mousemove",fe),document.removeEventListener("mouseup",ce),document.onselectstart=null,document.ondragstart=null,setTimeout(()=>{rl(Y,"noclick")},0)};document.addEventListener("mousemove",fe),document.addEventListener("mouseup",ce)}},P=(N,q)=>{var G;if(q.children&&q.children.length>0)return;const ie=N.target;if(!xl(ie))return;const W=ie?.closest("th");if(!(!q||!q.resizable||!W)&&!E.value&&e.border){const Y=W.getBoundingClientRect(),J=document.body.style,re=((G=W.parentNode)==null?void 0:G.lastElementChild)===W,he=e.allowDragLastColumn||!re;Y.width>12&&Y.right-N.clientX<8&&he?(J.cursor="col-resize",Nl(W,"is-sortable")&&(W.style.cursor="col-resize"),r.value=q):E.value||(J.cursor="",Nl(W,"is-sortable")&&(W.style.cursor="pointer"),r.value=null)}},D=()=>{Pi&&(document.body.style.cursor="")},z=({order:N,sortOrders:q})=>{if(N==="")return q[0];const G=q.indexOf(N||null);return q[G>q.length-2?0:G+1]},F=(N,q,G)=>{var ie;N.stopPropagation();const W=q.order===G?null:G||z(q),Y=(ie=N.target)==null?void 0:ie.closest("th");if(Y&&Nl(Y,"noclick")){rl(Y,"noclick");return}if(!q.sortable)return;const J=N.currentTarget;if(["ascending","descending"].some(me=>Nl(J,me)&&!q.sortOrders.includes(me)))return;const re=e.store.states;let he=re.sortProp.value,fe;const ce=re.sortingColumn.value;(ce!==q||ce===q&&ry(ce.order))&&(ce&&(ce.order=null),re.sortingColumn.value=q,he=q.property),W?fe=q.order=W:fe=q.order=null,re.sortProp.value=he,re.sortOrder.value=fe,l?.store.commit("changeSortCondition")};return{handleHeaderClick:m,handleHeaderContextMenu:b,handleMouseDown:A,handleMouseMove:P,handleMouseOut:D,handleSortClick:F,handleFilterClick:d}}function C1e(e){const n=Gn(Cc),s=dn("table");return{getHeaderRowStyle:r=>{const E=n?.props.headerRowStyle;return hr(E)?E.call(null,{rowIndex:r}):E},getHeaderRowClass:r=>{const E=[],M=n?.props.headerRowClassName;return ir(M)?E.push(M):hr(M)&&E.push(M.call(null,{rowIndex:r})),E.join(" ")},getHeaderCellStyle:(r,E,M,A)=>{var P;let D=(P=n?.props.headerCellStyle)!=null?P:{};hr(D)&&(D=D.call(null,{rowIndex:r,columnIndex:E,row:M,column:A}));const z=F8(E,A.fixed,e.store,M);return Xg(z,"left"),Xg(z,"right"),Object.assign({},D,z)},getHeaderCellClass:(r,E,M,A)=>{const P=N8(s.b(),E,A.fixed,e.store,M),D=[A.id,A.order,A.headerAlign,A.className,A.labelClassName,...P];A.children||D.push("is-leaf"),A.sortable&&D.push("is-sortable");const z=n?.props.headerCellClassName;return ir(z)?D.push(z):hr(z)&&D.push(z.call(null,{rowIndex:r,columnIndex:E,row:M,column:A})),D.push(s.e("cell")),D.filter(F=>!!F).join(" ")}}}const Kz=e=>{const n=[];return e.forEach(s=>{s.children?(n.push(s),n.push.apply(n,Kz(s.children))):n.push(s)}),n},Yz=e=>{let n=1;const s=(m,b)=>{if(b&&(m.level=b.level+1,n<m.level&&(n=m.level)),m.children){let r=0;m.children.forEach(E=>{s(E,m),r+=E.colSpan}),m.colSpan=r}else m.colSpan=1};e.forEach(m=>{m.level=1,s(m,void 0)});const l=[];for(let m=0;m<n;m++)l.push([]);return Kz(e).forEach(m=>{m.children?(m.rowSpan=1,m.children.forEach(b=>b.isSubColumn=!0)):m.rowSpan=n-m.level+1,l[m.level-1].push(m)}),l};function E1e(e){const n=Gn(Cc),s=se(()=>Yz(e.store.states.originColumns.value));return{isGroup:se(()=>{const m=s.value.length>1;return m&&n&&(n.state.isGroup.value=!0),m}),toggleAllSelection:m=>{m.stopPropagation(),n?.store.commit("toggleAllSelection")},columnRows:s}}var T1e=xe({name:"ElTableHeader",components:{ElCheckbox:Ou},props:{fixed:{type:String,default:""},store:{required:!0,type:Object},border:Boolean,defaultSort:{type:Object,default:()=>({prop:"",order:""})},appendFilterPanelTo:{type:String},allowDragLastColumn:{type:Boolean}},setup(e,{emit:n}){const s=oi(),l=Gn(Cc),d=dn("table"),m=Re({}),{onColumnsChange:b,onScrollableChange:r}=B8(l),E=l?.props.tableLayout==="auto",M=ts(new Map),A=Re(),P=()=>{setTimeout(()=>{M.size>0&&(M.forEach((me,we)=>{const ye=A.value.querySelector(`.${we.replace(/\s/g,".")}`);if(ye){const Ue=ye.getBoundingClientRect().width;me.width=Ue}}),M.clear())})};on(M,P),Zr(async()=>{await dr(),await dr();const{prop:me,order:we}=e.defaultSort;l?.store.commit("sort",{prop:me,order:we,init:!0}),P()});const{handleHeaderClick:D,handleHeaderContextMenu:z,handleMouseDown:F,handleMouseMove:N,handleMouseOut:q,handleSortClick:G,handleFilterClick:ie}=S1e(e,n),{getHeaderRowStyle:W,getHeaderRowClass:Y,getHeaderCellStyle:J,getHeaderCellClass:re}=C1e(e),{isGroup:he,toggleAllSelection:fe,columnRows:ce}=E1e(e);return s.state={onColumnsChange:b,onScrollableChange:r},s.filterPanels=m,{ns:d,filterPanels:m,onColumnsChange:b,onScrollableChange:r,columnRows:ce,getHeaderRowClass:Y,getHeaderRowStyle:W,getHeaderCellClass:re,getHeaderCellStyle:J,handleHeaderClick:D,handleHeaderContextMenu:z,handleMouseDown:F,handleMouseMove:N,handleMouseOut:q,handleSortClick:G,handleFilterClick:ie,isGroup:he,toggleAllSelection:fe,saveIndexSelection:M,isTableLayoutAuto:E,theadRef:A,updateFixedColumnStyle:P}},render(){const{ns:e,isGroup:n,columnRows:s,getHeaderCellStyle:l,getHeaderCellClass:d,getHeaderRowClass:m,getHeaderRowStyle:b,handleHeaderClick:r,handleHeaderContextMenu:E,handleMouseDown:M,handleMouseMove:A,handleSortClick:P,handleMouseOut:D,store:z,$parent:F,saveIndexSelection:N,isTableLayoutAuto:q}=this;let G=1;return xr("thead",{ref:"theadRef",class:{[e.is("group")]:n}},s.map((ie,W)=>xr("tr",{class:m(W),key:W,style:b(W)},ie.map((Y,J)=>{Y.rowSpan>G&&(G=Y.rowSpan);const re=d(W,J,ie,Y);return q&&Y.fixed&&N.set(re,Y),xr("th",{class:re,colspan:Y.colSpan,key:`${Y.id}-thead`,rowspan:Y.rowSpan,style:l(W,J,ie,Y),onClick:he=>{he.currentTarget.classList.contains("noclick")||r(he,Y)},onContextmenu:he=>E(he,Y),onMousedown:he=>M(he,Y),onMousemove:he=>A(he,Y),onMouseout:D},[xr("div",{class:["cell",Y.filteredValue&&Y.filteredValue.length>0?"highlight":""]},[Y.renderHeader?Y.renderHeader({column:Y,$index:J,store:z,_self:F}):Y.label,Y.sortable&&xr("span",{onClick:he=>P(he,Y),class:"caret-wrapper"},[xr("i",{onClick:he=>P(he,Y,"ascending"),class:"sort-caret ascending"}),xr("i",{onClick:he=>P(he,Y,"descending"),class:"sort-caret descending"})]),Y.filterable&&xr(w1e,{store:z,placement:Y.filterPlacement||"bottom-start",appendTo:F.appendFilterPanelTo,column:Y,upDataColumn:(he,fe)=>{Y[he]=fe}},{"filter-icon":()=>Y.renderFilterIcon?Y.renderFilterIcon({filterOpened:Y.filterOpened}):null})])])}))))}});function g4(e,n,s=.03){return e-n>s}function I1e(e){const n=Gn(Cc),s=Re(""),l=Re(xr("div")),d=(F,N,q)=>{var G;const ie=n,W=m4(F);let Y;const J=(G=ie?.vnode.el)==null?void 0:G.dataset.prefix;W&&(Y=CA({columns:e.store.states.columns.value},W,J),Y&&ie?.emit(`cell-${q}`,N,Y,W,F)),ie?.emit(`row-${q}`,N,Y,F)},m=(F,N)=>{d(F,N,"dblclick")},b=(F,N)=>{e.store.commit("setCurrentRow",N),d(F,N,"click")},r=(F,N)=>{d(F,N,"contextmenu")},E=Vl(F=>{e.store.commit("setHoverRow",F)},30),M=Vl(()=>{e.store.commit("setHoverRow",null)},30),A=F=>{const N=window.getComputedStyle(F,null),q=Number.parseInt(N.paddingLeft,10)||0,G=Number.parseInt(N.paddingRight,10)||0,ie=Number.parseInt(N.paddingTop,10)||0,W=Number.parseInt(N.paddingBottom,10)||0;return{left:q,right:G,top:ie,bottom:W}},P=(F,N,q)=>{let G=N.target.parentNode;for(;F>1&&(G=G?.nextSibling,!(!G||G.nodeName!=="TR"));)q(G,"hover-row hover-fixed-row"),F--};return{handleDoubleClick:m,handleClick:b,handleContextMenu:r,handleMouseEnter:E,handleMouseLeave:M,handleCellMouseEnter:(F,N,q)=>{var G,ie,W;const Y=n,J=m4(F),re=(G=Y?.vnode.el)==null?void 0:G.dataset.prefix;let he;if(J){he=CA({columns:e.store.states.columns.value},J,re),J.rowSpan>1&&P(J.rowSpan,F,Tu);const Ve=Y.hoverState={cell:J,column:he,row:N};Y?.emit("cell-mouse-enter",Ve.row,Ve.column,Ve.cell,F)}if(!q)return;const fe=F.target.querySelector(".cell");if(!(Nl(fe,`${re}-tooltip`)&&fe.childNodes.length))return;const ce=document.createRange();ce.setStart(fe,0),ce.setEnd(fe,fe.childNodes.length);const{width:me,height:we}=ce.getBoundingClientRect(),{width:ye,height:Ue}=fe.getBoundingClientRect(),{top:Ne,left:Pe,right:ve,bottom:$e}=A(fe),Te=Pe+ve,Ae=Ne+$e;g4(me+Te,ye)||g4(we+Ae,Ue)||g4(fe.scrollWidth,ye)?u1e(q,J.innerText||J.textContent,N,he,J,Y):((ie=zl)==null?void 0:ie.trigger)===J&&((W=zl)==null||W())},handleCellMouseLeave:F=>{const N=m4(F);if(!N)return;N.rowSpan>1&&P(N.rowSpan,F,rl);const q=n?.hoverState;n?.emit("cell-mouse-leave",q?.row,q?.column,q?.cell,F)},tooltipContent:s,tooltipTrigger:l}}function k1e(e){const n=Gn(Cc),s=dn("table");return{getRowStyle:(M,A)=>{const P=n?.props.rowStyle;return hr(P)?P.call(null,{row:M,rowIndex:A}):P||null},getRowClass:(M,A)=>{const P=[s.e("row")];n?.props.highlightCurrentRow&&M===e.store.states.currentRow.value&&P.push("current-row"),e.stripe&&A%2===1&&P.push(s.em("row","striped"));const D=n?.props.rowClassName;return ir(D)?P.push(D):hr(D)&&P.push(D.call(null,{row:M,rowIndex:A})),P},getCellStyle:(M,A,P,D)=>{const z=n?.props.cellStyle;let F=z??{};hr(z)&&(F=z.call(null,{rowIndex:M,columnIndex:A,row:P,column:D}));const N=F8(A,e?.fixed,e.store);return Xg(N,"left"),Xg(N,"right"),Object.assign({},F,N)},getCellClass:(M,A,P,D,z)=>{const F=N8(s.b(),A,e?.fixed,e.store,void 0,z),N=[D.id,D.align,D.className,...F],q=n?.props.cellClassName;return ir(q)?N.push(q):hr(q)&&N.push(q.call(null,{rowIndex:M,columnIndex:A,row:P,column:D})),N.push(s.e("cell")),N.filter(G=>!!G).join(" ")},getSpan:(M,A,P,D)=>{let z=1,F=1;const N=n?.props.spanMethod;if(hr(N)){const q=N({row:M,column:A,rowIndex:P,columnIndex:D});mn(q)?(z=q[0],F=q[1]):Yr(q)&&(z=q.rowspan,F=q.colspan)}return{rowspan:z,colspan:F}},getColspanRealWidth:(M,A,P)=>{if(A<1)return M[P].realWidth;const D=M.map(({realWidth:z,width:F})=>z||F).slice(P,P+A);return Number(D.reduce((z,F)=>Number(z)+Number(F),-1))}}}const M1e=xe({name:"TableTdWrapper"}),A1e=xe({...M1e,props:{colspan:{type:Number,default:1},rowspan:{type:Number,default:1}},setup(e){return(n,s)=>(Z(),ue("td",{colspan:e.colspan,rowspan:e.rowspan},[It(n.$slots,"default")],8,["colspan","rowspan"]))}});var R1e=En(A1e,[["__file","td-wrapper.vue"]]);function P1e(e){const n=Gn(Cc),s=dn("table"),{handleDoubleClick:l,handleClick:d,handleContextMenu:m,handleMouseEnter:b,handleMouseLeave:r,handleCellMouseEnter:E,handleCellMouseLeave:M,tooltipContent:A,tooltipTrigger:P}=I1e(e),{getRowStyle:D,getRowClass:z,getCellStyle:F,getCellClass:N,getSpan:q,getColspanRealWidth:G}=k1e(e),ie=se(()=>e.store.states.columns.value.findIndex(({type:he})=>he==="default")),W=(he,fe)=>{const ce=n.props.rowKey;return ce?tl(he,ce):fe},Y=(he,fe,ce,me=!1)=>{const{tooltipEffect:we,tooltipOptions:ye,store:Ue}=e,{indent:Ne,columns:Pe}=Ue.states,ve=z(he,fe);let $e=!0;return ce&&(ve.push(s.em("row",`level-${ce.level}`)),$e=ce.display),xr("tr",{style:[$e?null:{display:"none"},D(he,fe)],class:ve,key:W(he,fe),onDblclick:Ae=>l(Ae,he),onClick:Ae=>d(Ae,he),onContextmenu:Ae=>m(Ae,he),onMouseenter:()=>b(fe),onMouseleave:r},Pe.value.map((Ae,Ve)=>{const{rowspan:We,colspan:ft}=q(he,Ae,fe,Ve);if(!We||!ft)return null;const at=Object.assign({},Ae);at.realWidth=G(Pe.value,ft,Ve);const ct={store:e.store,_self:e.context||n,column:at,row:he,$index:fe,cellIndex:Ve,expanded:me};Ve===ie.value&&ce&&(ct.treeNode={indent:ce.level*Ne.value,level:ce.level},Ts(ce.expanded)&&(ct.treeNode.expanded=ce.expanded,"loading"in ce&&(ct.treeNode.loading=ce.loading),"noLazyChildren"in ce&&(ct.treeNode.noLazyChildren=ce.noLazyChildren)));const Mt=`${W(he,fe)},${Ve}`,Ct=at.columnKey||at.rawColumnKey||"",gt=Ae.showOverflowTooltip&&VL({effect:we},ye,Ae.showOverflowTooltip);return xr(R1e,{style:F(fe,Ve,he,Ae),class:N(fe,Ve,he,Ae,ft-1),key:`${Ct}${Mt}`,rowspan:We,colspan:ft,onMouseenter:Ke=>E(Ke,he,gt),onMouseleave:M},{default:()=>J(Ve,Ae,ct)})}))},J=(he,fe,ce)=>fe.renderCell(ce);return{wrappedRowRender:(he,fe)=>{const ce=e.store,{isRowExpanded:me,assertRowKey:we}=ce,{treeData:ye,lazyTreeNodeMap:Ue,childrenColumnName:Ne,rowKey:Pe}=ce.states,ve=ce.states.columns.value;if(ve.some(({type:Te})=>Te==="expand")){const Te=me(he),Ae=Y(he,fe,void 0,Te),Ve=n.renderExpanded;if(!Ve)return console.error("[Element Error]renderExpanded is required."),Ae;const We=[[Ae]];return(n.props.preserveExpandedContent||Te)&&We[0].push(xr("tr",{key:`expanded-row__${Ae.key}`,style:{display:Te?"":"none"}},[xr("td",{colspan:ve.length,class:`${s.e("cell")} ${s.e("expanded-cell")}`},[Ve({row:he,$index:fe,store:ce,expanded:Te})])])),We}else if(Object.keys(ye.value).length){we();const Te=tl(he,Pe.value);let Ae=ye.value[Te],Ve=null;Ae&&(Ve={expanded:Ae.expanded,level:Ae.level,display:!0},Ts(Ae.lazy)&&(Ts(Ae.loaded)&&Ae.loaded&&(Ve.noLazyChildren=!(Ae.children&&Ae.children.length)),Ve.loading=Ae.loading));const We=[Y(he,fe,Ve)];if(Ae){let ft=0;const at=(Mt,Ct)=>{Mt&&Mt.length&&Ct&&Mt.forEach(gt=>{const Ke={display:Ct.display&&Ct.expanded,level:Ct.level+1,expanded:!1,noLazyChildren:!1,loading:!1},Lt=tl(gt,Pe.value);if(Mu(Lt))throw new Error("For nested data item, row-key is required.");if(Ae={...ye.value[Lt]},Ae&&(Ke.expanded=Ae.expanded,Ae.level=Ae.level||Ke.level,Ae.display=!!(Ae.expanded&&Ke.display),Ts(Ae.lazy)&&(Ts(Ae.loaded)&&Ae.loaded&&(Ke.noLazyChildren=!(Ae.children&&Ae.children.length)),Ke.loading=Ae.loading)),ft++,We.push(Y(gt,fe+ft,Ke)),Ae){const xn=Ue.value[Lt]||gt[Ne.value];at(xn,Ae)}})};Ae.display=!0;const ct=Ue.value[Te]||he[Ne.value];at(ct,Ae)}return We}else return Y(he,fe,void 0)},tooltipContent:A,tooltipTrigger:P}}const L1e={store:{required:!0,type:Object},stripe:Boolean,tooltipEffect:String,tooltipOptions:{type:Object},context:{default:()=>({}),type:Object},rowClassName:[String,Function],rowStyle:[Object,Function],fixed:{type:String,default:""},highlight:Boolean};var O1e=xe({name:"ElTableBody",props:L1e,setup(e){const n=oi(),s=Gn(Cc),l=dn("table"),{wrappedRowRender:d,tooltipContent:m,tooltipTrigger:b}=P1e(e),{onColumnsChange:r,onScrollableChange:E}=B8(s),M=[];return on(e.store.states.hoverRow,(A,P)=>{var D;const z=n?.vnode.el,F=Array.from(z?.children||[]).filter(G=>G?.classList.contains(`${l.e("row")}`));let N=A;const q=(D=F[N])==null?void 0:D.childNodes;if(q?.length){let G=0;Array.from(q).reduce((W,Y,J)=>{var re,he;return((re=q[J])==null?void 0:re.colSpan)>1&&(G=(he=q[J])==null?void 0:he.colSpan),Y.nodeName!=="TD"&&G===0&&W.push(J),G>0&&G--,W},[]).forEach(W=>{var Y;for(N=A;N>0;){const J=(Y=F[N-1])==null?void 0:Y.childNodes;if(J[W]&&J[W].nodeName==="TD"&&J[W].rowSpan>1){Tu(J[W],"hover-cell"),M.push(J[W]);break}N--}})}else M.forEach(G=>rl(G,"hover-cell")),M.length=0;!e.store.states.isComplex.value||!Pi||Tf(()=>{const G=F[P],ie=F[A];G&&!G.classList.contains("hover-fixed-row")&&rl(G,"hover-row"),ie&&Tu(ie,"hover-row")})}),Mf(()=>{var A;(A=zl)==null||A()}),{ns:l,onColumnsChange:r,onScrollableChange:E,wrappedRowRender:d,tooltipContent:m,tooltipTrigger:b}},render(){const{wrappedRowRender:e,store:n}=this,s=n.states.data.value||[];return xr("tbody",{tabIndex:-1},[s.reduce((l,d)=>l.concat(e(d,l.length)),[])])}});function D1e(){const e=Gn(Cc),n=e?.store,s=se(()=>n.states.fixedLeafColumnsLength.value),l=se(()=>n.states.rightFixedColumns.value.length),d=se(()=>n.states.columns.value.length),m=se(()=>n.states.fixedColumns.value.length),b=se(()=>n.states.rightFixedColumns.value.length);return{leftFixedLeafCount:s,rightFixedLeafCount:l,columnsCount:d,leftFixedCount:m,rightFixedCount:b,columns:n.states.columns}}function z1e(e){const{columns:n}=D1e(),s=dn("table");return{getCellClasses:(m,b)=>{const r=m[b],E=[s.e("cell"),r.id,r.align,r.labelClassName,...N8(s.b(),b,r.fixed,e.store)];return r.className&&E.push(r.className),r.children||E.push(s.is("leaf")),E},getCellStyles:(m,b)=>{const r=F8(b,m.fixed,e.store);return Xg(r,"left"),Xg(r,"right"),r},columns:n}}var N1e=xe({name:"ElTableFooter",props:{fixed:{type:String,default:""},store:{required:!0,type:Object},summaryMethod:Function,sumText:String,border:Boolean,defaultSort:{type:Object,default:()=>({prop:"",order:""})}},setup(e){const n=Gn(Cc),s=dn("table"),{getCellClasses:l,getCellStyles:d,columns:m}=z1e(e),{onScrollableChange:b,onColumnsChange:r}=B8(n);return{ns:s,onScrollableChange:b,onColumnsChange:r,getCellClasses:l,getCellStyles:d,columns:m}},render(){const{columns:e,getCellStyles:n,getCellClasses:s,summaryMethod:l,sumText:d}=this,m=this.store.states.data.value;let b=[];return l?b=l({columns:e,data:m}):e.forEach((r,E)=>{if(E===0){b[E]=d;return}const M=m.map(z=>Number(z[r.property])),A=[];let P=!0;M.forEach(z=>{if(!Number.isNaN(+z)){P=!1;const F=`${z}`.split(".")[1];A.push(F?F.length:0)}});const D=Math.max.apply(null,A);P?b[E]="":b[E]=M.reduce((z,F)=>{const N=Number(F);return Number.isNaN(+N)?z:Number.parseFloat((z+F).toFixed(Math.min(D,20)))},0)}),xr(xr("tfoot",[xr("tr",{},[...e.map((r,E)=>xr("td",{key:E,colspan:r.colSpan,rowspan:r.rowSpan,class:s(e,E),style:n(r,E)},[xr("div",{class:["cell",r.labelClassName]},[b[E]])]))])]))}});function F1e(e){return{setCurrentRow:P=>{e.commit("setCurrentRow",P)},getSelectionRows:()=>e.getSelectionRows(),toggleRowSelection:(P,D,z=!0)=>{e.toggleRowSelection(P,D,!1,z),e.updateAllSelected()},clearSelection:()=>{e.clearSelection()},clearFilter:P=>{e.clearFilter(P)},toggleAllSelection:()=>{e.commit("toggleAllSelection")},toggleRowExpansion:(P,D)=>{e.toggleRowExpansionAdapter(P,D)},clearSort:()=>{e.clearSort()},sort:(P,D)=>{e.commit("sort",{prop:P,order:D})},updateKeyChildren:(P,D)=>{e.updateKeyChildren(P,D)}}}function B1e(e,n,s,l){const d=Re(!1),m=Re(null),b=Re(!1),r=Te=>{b.value=Te},E=Re({width:null,height:null,headerHeight:null}),M=Re(!1),A={display:"inline-block",verticalAlign:"middle"},P=Re(),D=Re(0),z=Re(0),F=Re(0),N=Re(0),q=Re(0);Da(()=>{n.setHeight(e.height)}),Da(()=>{n.setMaxHeight(e.maxHeight)}),on(()=>[e.currentRowKey,s.states.rowKey],([Te,Ae])=>{!w(Ae)||!w(Te)||s.setCurrentRowKey(`${Te}`)},{immediate:!0}),on(()=>e.data,Te=>{l.store.commit("setData",Te)},{immediate:!0,deep:!0}),Da(()=>{e.expandRowKeys&&s.setExpandRowKeysAdapter(e.expandRowKeys)});const G=()=>{l.store.commit("setHoverRow",null),l.hoverState&&(l.hoverState=null)},ie=(Te,Ae)=>{const{pixelX:Ve,pixelY:We}=Ae;Math.abs(Ve)>=Math.abs(We)&&(l.refs.bodyWrapper.scrollLeft+=Ae.pixelX/5)},W=se(()=>e.height||e.maxHeight||s.states.fixedColumns.value.length>0||s.states.rightFixedColumns.value.length>0),Y=se(()=>({width:n.bodyWidth.value?`${n.bodyWidth.value}px`:""})),J=()=>{W.value&&n.updateElsHeight(),n.updateColumnsWidth(),!(typeof window>"u")&&requestAnimationFrame(ce)};Zr(async()=>{await dr(),s.updateColumns(),me(),requestAnimationFrame(J);const Te=l.vnode.el,Ae=l.refs.headerWrapper;e.flexible&&Te&&Te.parentElement&&(Te.parentElement.style.minWidth="0"),E.value={width:P.value=Te.offsetWidth,height:Te.offsetHeight,headerHeight:e.showHeader&&Ae?Ae.offsetHeight:null},s.states.columns.value.forEach(Ve=>{Ve.filteredValue&&Ve.filteredValue.length&&l.store.commit("filterChange",{column:Ve,values:Ve.filteredValue,silent:!0})}),l.$ready=!0});const re=(Te,Ae)=>{if(!Te)return;const Ve=Array.from(Te.classList).filter(We=>!We.startsWith("is-scrolling-"));Ve.push(n.scrollX.value?Ae:"is-scrolling-none"),Te.className=Ve.join(" ")},he=Te=>{const{tableWrapper:Ae}=l.refs;re(Ae,Te)},fe=Te=>{const{tableWrapper:Ae}=l.refs;return!!(Ae&&Ae.classList.contains(Te))},ce=function(){if(!l.refs.scrollBarRef)return;if(!n.scrollX.value){const Mt="is-scrolling-none";fe(Mt)||he(Mt);return}const Te=l.refs.scrollBarRef.wrapRef;if(!Te)return;const{scrollLeft:Ae,offsetWidth:Ve,scrollWidth:We}=Te,{headerWrapper:ft,footerWrapper:at}=l.refs;ft&&(ft.scrollLeft=Ae),at&&(at.scrollLeft=Ae);const ct=We-Ve-1;Ae>=ct?he("is-scrolling-right"):he(Ae===0?"is-scrolling-left":"is-scrolling-middle")},me=()=>{l.refs.scrollBarRef&&(l.refs.scrollBarRef.wrapRef&&Is(l.refs.scrollBarRef.wrapRef,"scroll",ce,{passive:!0}),e.fit?so(l.vnode.el,we):Is(window,"resize",we),so(l.refs.bodyWrapper,()=>{var Te,Ae;we(),(Ae=(Te=l.refs)==null?void 0:Te.scrollBarRef)==null||Ae.update()}))},we=()=>{var Te,Ae,Ve,We;const ft=l.vnode.el;if(!l.$ready||!ft)return;let at=!1;const{width:ct,height:Mt,headerHeight:Ct}=E.value,gt=P.value=ft.offsetWidth;ct!==gt&&(at=!0);const Ke=ft.offsetHeight;(e.height||W.value)&&Mt!==Ke&&(at=!0);const Lt=e.tableLayout==="fixed"?l.refs.headerWrapper:(Te=l.refs.tableHeaderRef)==null?void 0:Te.$el;e.showHeader&&Lt?.offsetHeight!==Ct&&(at=!0),D.value=((Ae=l.refs.tableWrapper)==null?void 0:Ae.scrollHeight)||0,F.value=Lt?.scrollHeight||0,N.value=((Ve=l.refs.footerWrapper)==null?void 0:Ve.offsetHeight)||0,q.value=((We=l.refs.appendWrapper)==null?void 0:We.offsetHeight)||0,z.value=D.value-F.value-N.value-q.value,at&&(E.value={width:gt,height:Ke,headerHeight:e.showHeader&&Lt?.offsetHeight||0},J())},ye=Lo(),Ue=se(()=>{const{bodyWidth:Te,scrollY:Ae,gutterWidth:Ve}=n;return Te.value?`${Te.value-(Ae.value?Ve:0)}px`:""}),Ne=se(()=>e.maxHeight?"fixed":e.tableLayout),Pe=se(()=>{if(e.data&&e.data.length)return null;let Te="100%";e.height&&z.value&&(Te=`${z.value}px`);const Ae=P.value;return{width:Ae?`${Ae}px`:"",height:Te}}),ve=se(()=>e.height?{height:"100%"}:e.maxHeight?Number.isNaN(Number(e.maxHeight))?{maxHeight:`calc(${e.maxHeight} - ${F.value+N.value}px)`}:{maxHeight:`${e.maxHeight-F.value-N.value}px`}:{});return{isHidden:d,renderExpanded:m,setDragVisible:r,isGroup:M,handleMouseLeave:G,handleHeaderFooterMousewheel:ie,tableSize:ye,emptyBlockStyle:Pe,handleFixedMousewheel:(Te,Ae)=>{const Ve=l.refs.bodyWrapper;if(Math.abs(Ae.spinY)>0){const We=Ve.scrollTop;Ae.pixelY<0&&We!==0&&Te.preventDefault(),Ae.pixelY>0&&Ve.scrollHeight-Ve.clientHeight>We&&Te.preventDefault(),Ve.scrollTop+=Math.ceil(Ae.pixelY/5)}else Ve.scrollLeft+=Math.ceil(Ae.pixelX/5)},resizeProxyVisible:b,bodyWidth:Ue,resizeState:E,doLayout:J,tableBodyStyles:Y,tableLayout:Ne,scrollbarViewStyle:A,scrollbarStyle:ve}}function V1e(e){const n=Re(),s=()=>{const d=e.vnode.el.querySelector(".hidden-columns"),m={childList:!0,subtree:!0},b=e.store.states.updateOrderFns;n.value=new MutationObserver(()=>{b.forEach(r=>r())}),n.value.observe(d,m)};Zr(()=>{s()}),Mf(()=>{var l;(l=n.value)==null||l.disconnect()})}var $1e={data:{type:Array,default:()=>[]},size:Fo,width:[String,Number],height:[String,Number],maxHeight:[String,Number],fit:{type:Boolean,default:!0},stripe:Boolean,border:Boolean,rowKey:[String,Function],showHeader:{type:Boolean,default:!0},showSummary:Boolean,sumText:String,summaryMethod:Function,rowClassName:[String,Function],rowStyle:[Object,Function],cellClassName:[String,Function],cellStyle:[Object,Function],headerRowClassName:[String,Function],headerRowStyle:[Object,Function],headerCellClassName:[String,Function],headerCellStyle:[Object,Function],highlightCurrentRow:Boolean,currentRowKey:[String,Number],emptyText:String,expandRowKeys:Array,defaultExpandAll:Boolean,defaultSort:Object,tooltipEffect:String,tooltipOptions:Object,spanMethod:Function,selectOnIndeterminate:{type:Boolean,default:!0},indent:{type:Number,default:16},treeProps:{type:Object,default:()=>({hasChildren:"hasChildren",children:"children",checkStrictly:!1})},lazy:Boolean,load:Function,style:{type:Object,default:()=>({})},className:{type:String,default:""},tableLayout:{type:String,default:"fixed"},scrollbarAlwaysOn:Boolean,flexible:Boolean,showOverflowTooltip:[Boolean,Object],tooltipFormatter:Function,appendFilterPanelTo:String,scrollbarTabindex:{type:[Number,String],default:void 0},allowDragLastColumn:{type:Boolean,default:!0},preserveExpandedContent:{type:Boolean,default:!1}};function Zz(e){const n=e.tableLayout==="auto";let s=e.columns||[];n&&s.every(({width:d})=>Li(d))&&(s=[]);const l=d=>{const m={key:`${e.tableLayout}_${d.id}`,style:{},name:void 0};return n?m.style={width:`${d.width}px`}:m.name=d.id,m};return xr("colgroup",{},s.map(d=>xr("col",l(d))))}Zz.props=["columns","tableLayout"];const H1e=()=>{const e=Re(),n=(m,b)=>{const r=e.value;r&&r.scrollTo(m,b)},s=(m,b)=>{const r=e.value;r&&gr(b)&&["Top","Left"].includes(m)&&r[`setScroll${m}`](b)};return{scrollBarRef:e,scrollTo:n,setScrollTop:m=>s("Top",m),setScrollLeft:m=>s("Left",m)}};var IA=!1,kp,A6,R6,tb,nb,Xz,rb,P6,L6,O6,Jz,D6,z6,Qz,e9;function Ll(){if(!IA){IA=!0;var e=navigator.userAgent,n=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(e),s=/(Mac OS X)|(Windows)|(Linux)/.exec(e);if(D6=/\b(iPhone|iP[ao]d)/.exec(e),z6=/\b(iP[ao]d)/.exec(e),O6=/Android/i.exec(e),Qz=/FBAN\/\w+;/i.exec(e),e9=/Mobile/i.exec(e),Jz=!!/Win64/.exec(e),n){kp=n[1]?parseFloat(n[1]):n[5]?parseFloat(n[5]):NaN,kp&&document&&document.documentMode&&(kp=document.documentMode);var l=/(?:Trident\/(\d+.\d+))/.exec(e);Xz=l?parseFloat(l[1])+4:kp,A6=n[2]?parseFloat(n[2]):NaN,R6=n[3]?parseFloat(n[3]):NaN,tb=n[4]?parseFloat(n[4]):NaN,tb?(n=/(?:Chrome\/(\d+\.\d+))/.exec(e),nb=n&&n[1]?parseFloat(n[1]):NaN):nb=NaN}else kp=A6=R6=nb=tb=NaN;if(s){if(s[1]){var d=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(e);rb=d?parseFloat(d[1].replace("_",".")):!0}else rb=!1;P6=!!s[2],L6=!!s[3]}else rb=P6=L6=!1}}var N6={ie:function(){return Ll()||kp},ieCompatibilityMode:function(){return Ll()||Xz>kp},ie64:function(){return N6.ie()&&Jz},firefox:function(){return Ll()||A6},opera:function(){return Ll()||R6},webkit:function(){return Ll()||tb},safari:function(){return N6.webkit()},chrome:function(){return Ll()||nb},windows:function(){return Ll()||P6},osx:function(){return Ll()||rb},linux:function(){return Ll()||L6},iphone:function(){return Ll()||D6},mobile:function(){return Ll()||D6||z6||O6||e9},nativeApp:function(){return Ll()||Qz},android:function(){return Ll()||O6},ipad:function(){return Ll()||z6}},U1e=N6,j1e=!!(typeof window<"u"&&window.document&&window.document.createElement),G1e={canUseDOM:j1e},t9=G1e,n9;t9.canUseDOM&&(n9=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0);function q1e(e,n){if(!t9.canUseDOM||n&&!("addEventListener"in document))return!1;var s="on"+e,l=s in document;if(!l){var d=document.createElement("div");d.setAttribute(s,"return;"),l=typeof d[s]=="function"}return!l&&n9&&e==="wheel"&&(l=document.implementation.hasFeature("Events.wheel","3.0")),l}var W1e=q1e,kA=10,MA=40,AA=800;function r9(e){var n=0,s=0,l=0,d=0;return"detail"in e&&(s=e.detail),"wheelDelta"in e&&(s=-e.wheelDelta/120),"wheelDeltaY"in e&&(s=-e.wheelDeltaY/120),"wheelDeltaX"in e&&(n=-e.wheelDeltaX/120),"axis"in e&&e.axis===e.HORIZONTAL_AXIS&&(n=s,s=0),l=n*kA,d=s*kA,"deltaY"in e&&(d=e.deltaY),"deltaX"in e&&(l=e.deltaX),(l||d)&&e.deltaMode&&(e.deltaMode==1?(l*=MA,d*=MA):(l*=AA,d*=AA)),l&&!n&&(n=l<1?-1:1),d&&!s&&(s=d<1?-1:1),{spinX:n,spinY:s,pixelX:l,pixelY:d}}r9.getEventType=function(){return U1e.firefox()?"DOMMouseScroll":W1e("wheel")?"wheel":"mousewheel"};var K1e=r9;/**
* Checks if an event is supported in the current execution environment.
*
* NOTE: This will not work correctly for non-generic events such as `change`,
* `reset`, `load`, `error`, and `select`.
*
* Borrows from Modernizr.
*
* @param {string} eventNameSuffix Event name, e.g. "click".
* @param {?boolean} capture Check if the capture phase is supported.
* @return {boolean} True if the event is supported.
* @internal
* @license Modernizr 3.0.0pre (Custom Build) | MIT
*/const Y1e=function(e,n){if(e&&e.addEventListener){const s=function(l){const d=K1e(l);n&&Reflect.apply(n,this,[l,d])};e.addEventListener("wheel",s,{passive:!0})}},Z1e={beforeMount(e,n){Y1e(e,n.value)}};let X1e=1;const J1e=xe({name:"ElTable",directives:{Mousewheel:Z1e},components:{TableHeader:T1e,TableBody:O1e,TableFooter:N1e,ElScrollbar:Id,hColgroup:Zz},props:$1e,emits:["select","select-all","selection-change","cell-mouse-enter","cell-mouse-leave","cell-contextmenu","cell-click","cell-dblclick","row-click","row-contextmenu","row-dblclick","header-click","header-contextmenu","sort-change","filter-change","current-change","header-dragend","expand-change","scroll"],setup(e){const{t:n}=Oi(),s=dn("table"),l=oi();Ti(Cc,l);const d=g1e(l,e);l.store=d;const m=new v1e({store:l.store,table:l,fit:e.fit,showHeader:e.showHeader});l.layout=m;const b=se(()=>(d.states.data.value||[]).length===0),{setCurrentRow:r,getSelectionRows:E,toggleRowSelection:M,clearSelection:A,clearFilter:P,toggleAllSelection:D,toggleRowExpansion:z,clearSort:F,sort:N,updateKeyChildren:q}=F1e(d),{isHidden:G,renderExpanded:ie,setDragVisible:W,isGroup:Y,handleMouseLeave:J,handleHeaderFooterMousewheel:re,tableSize:he,emptyBlockStyle:fe,handleFixedMousewheel:ce,resizeProxyVisible:me,bodyWidth:we,resizeState:ye,doLayout:Ue,tableBodyStyles:Ne,tableLayout:Pe,scrollbarViewStyle:ve,scrollbarStyle:$e}=B1e(e,m,d,l),{scrollBarRef:Te,scrollTo:Ae,setScrollLeft:Ve,setScrollTop:We}=H1e(),ft=Vl(Ue,50),at=`${s.namespace.value}-table_${X1e++}`;l.tableId=at,l.state={isGroup:Y,resizeState:ye,doLayout:Ue,debouncedUpdateLayout:ft};const ct=se(()=>{var gt;return(gt=e.sumText)!=null?gt:n("el.table.sumText")}),Mt=se(()=>{var gt;return(gt=e.emptyText)!=null?gt:n("el.table.emptyText")}),Ct=se(()=>Yz(d.states.originColumns.value)[0]);return V1e(l),Ls(()=>{ft.cancel()}),{ns:s,layout:m,store:d,columns:Ct,handleHeaderFooterMousewheel:re,handleMouseLeave:J,tableId:at,tableSize:he,isHidden:G,isEmpty:b,renderExpanded:ie,resizeProxyVisible:me,resizeState:ye,isGroup:Y,bodyWidth:we,tableBodyStyles:Ne,emptyBlockStyle:fe,debouncedUpdateLayout:ft,handleFixedMousewheel:ce,setCurrentRow:r,getSelectionRows:E,toggleRowSelection:M,clearSelection:A,clearFilter:P,toggleAllSelection:D,toggleRowExpansion:z,clearSort:F,doLayout:Ue,sort:N,updateKeyChildren:q,t:n,setDragVisible:W,context:l,computedSumText:ct,computedEmptyText:Mt,tableLayout:Pe,scrollbarViewStyle:ve,scrollbarStyle:$e,scrollBarRef:Te,scrollTo:Ae,setScrollLeft:Ve,setScrollTop:We,allowDragLastColumn:e.allowDragLastColumn}}});function Q1e(e,n,s,l,d,m){const b=fi("hColgroup"),r=fi("table-header"),E=fi("table-body"),M=fi("table-footer"),A=fi("el-scrollbar"),P=ax("mousewheel");return Z(),ue("div",{ref:"tableWrapper",class:ge([{[e.ns.m("fit")]:e.fit,[e.ns.m("striped")]:e.stripe,[e.ns.m("border")]:e.border||e.isGroup,[e.ns.m("hidden")]:e.isHidden,[e.ns.m("group")]:e.isGroup,[e.ns.m("fluid-height")]:e.maxHeight,[e.ns.m("scrollable-x")]:e.layout.scrollX.value,[e.ns.m("scrollable-y")]:e.layout.scrollY.value,[e.ns.m("enable-row-hover")]:!e.store.states.isComplex.value,[e.ns.m("enable-row-transition")]:(e.store.states.data.value||[]).length!==0&&(e.store.states.data.value||[]).length<100,"has-footer":e.showSummary},e.ns.m(e.tableSize),e.className,e.ns.b(),e.ns.m(`layout-${e.tableLayout}`)]),style:fr(e.style),"data-prefix":e.ns.namespace.value,onMouseleave:e.handleMouseLeave},[ae("div",{class:ge(e.ns.e("inner-wrapper"))},[ae("div",{ref:"hiddenColumns",class:"hidden-columns"},[It(e.$slots,"default")],512),e.showHeader&&e.tableLayout==="fixed"?Wr((Z(),ue("div",{key:0,ref:"headerWrapper",class:ge(e.ns.e("header-wrapper"))},[ae("table",{ref:"tableHeader",class:ge(e.ns.e("header")),style:fr(e.tableBodyStyles),border:"0",cellpadding:"0",cellspacing:"0"},[st(b,{columns:e.store.states.columns.value,"table-layout":e.tableLayout},null,8,["columns","table-layout"]),st(r,{ref:"tableHeaderRef",border:e.border,"default-sort":e.defaultSort,store:e.store,"append-filter-panel-to":e.appendFilterPanelTo,"allow-drag-last-column":e.allowDragLastColumn,onSetDragVisible:e.setDragVisible},null,8,["border","default-sort","store","append-filter-panel-to","allow-drag-last-column","onSetDragVisible"])],6)],2)),[[P,e.handleHeaderFooterMousewheel]]):At("v-if",!0),ae("div",{ref:"bodyWrapper",class:ge(e.ns.e("body-wrapper"))},[st(A,{ref:"scrollBarRef","view-style":e.scrollbarViewStyle,"wrap-style":e.scrollbarStyle,always:e.scrollbarAlwaysOn,tabindex:e.scrollbarTabindex,onScroll:D=>e.$emit("scroll",D)},{default:mt(()=>[ae("table",{ref:"tableBody",class:ge(e.ns.e("body")),cellspacing:"0",cellpadding:"0",border:"0",style:fr({width:e.bodyWidth,tableLayout:e.tableLayout})},[st(b,{columns:e.store.states.columns.value,"table-layout":e.tableLayout},null,8,["columns","table-layout"]),e.showHeader&&e.tableLayout==="auto"?(Z(),Bt(r,{key:0,ref:"tableHeaderRef",class:ge(e.ns.e("body-header")),border:e.border,"default-sort":e.defaultSort,store:e.store,"append-filter-panel-to":e.appendFilterPanelTo,onSetDragVisible:e.setDragVisible},null,8,["class","border","default-sort","store","append-filter-panel-to","onSetDragVisible"])):At("v-if",!0),st(E,{context:e.context,highlight:e.highlightCurrentRow,"row-class-name":e.rowClassName,"tooltip-effect":e.tooltipEffect,"tooltip-options":e.tooltipOptions,"row-style":e.rowStyle,store:e.store,stripe:e.stripe},null,8,["context","highlight","row-class-name","tooltip-effect","tooltip-options","row-style","store","stripe"]),e.showSummary&&e.tableLayout==="auto"?(Z(),Bt(M,{key:1,class:ge(e.ns.e("body-footer")),border:e.border,"default-sort":e.defaultSort,store:e.store,"sum-text":e.computedSumText,"summary-method":e.summaryMethod},null,8,["class","border","default-sort","store","sum-text","summary-method"])):At("v-if",!0)],6),e.isEmpty?(Z(),ue("div",{key:0,ref:"emptyBlock",style:fr(e.emptyBlockStyle),class:ge(e.ns.e("empty-block"))},[ae("span",{class:ge(e.ns.e("empty-text"))},[It(e.$slots,"empty",{},()=>[ei(gn(e.computedEmptyText),1)])],2)],6)):At("v-if",!0),e.$slots.append?(Z(),ue("div",{key:1,ref:"appendWrapper",class:ge(e.ns.e("append-wrapper"))},[It(e.$slots,"append")],2)):At("v-if",!0)]),_:3},8,["view-style","wrap-style","always","tabindex","onScroll"])],2),e.showSummary&&e.tableLayout==="fixed"?Wr((Z(),ue("div",{key:1,ref:"footerWrapper",class:ge(e.ns.e("footer-wrapper"))},[ae("table",{class:ge(e.ns.e("footer")),cellspacing:"0",cellpadding:"0",border:"0",style:fr(e.tableBodyStyles)},[st(b,{columns:e.store.states.columns.value,"table-layout":e.tableLayout},null,8,["columns","table-layout"]),st(M,{border:e.border,"default-sort":e.defaultSort,store:e.store,"sum-text":e.computedSumText,"summary-method":e.summaryMethod},null,8,["border","default-sort","store","sum-text","summary-method"])],6)],2)),[[Ki,!e.isEmpty],[P,e.handleHeaderFooterMousewheel]]):At("v-if",!0),e.border||e.isGroup?(Z(),ue("div",{key:2,class:ge(e.ns.e("border-left-patch"))},null,2)):At("v-if",!0)],2),Wr(ae("div",{ref:"resizeProxy",class:ge(e.ns.e("column-resize-proxy"))},null,2),[[Ki,e.resizeProxyVisible]])],46,["data-prefix","onMouseleave"])}var e2e=En(J1e,[["render",Q1e],["__file","table.vue"]]);const t2e={selection:"table-column--selection",expand:"table__expand-column"},n2e={default:{order:""},selection:{width:48,minWidth:48,realWidth:48,order:""},expand:{width:48,minWidth:48,realWidth:48,order:""},index:{width:48,minWidth:48,realWidth:48,order:""}},r2e=e=>t2e[e]||"",i2e={selection:{renderHeader({store:e,column:n}){function s(){return e.states.data.value&&e.states.data.value.length===0}return xr(Ou,{disabled:s(),size:e.states.tableSize.value,indeterminate:e.states.selection.value.length>0&&!e.states.isAllSelected.value,"onUpdate:modelValue":e.toggleAllSelection,modelValue:e.states.isAllSelected.value,ariaLabel:n.label})},renderCell({row:e,column:n,store:s,$index:l}){return xr(Ou,{disabled:n.selectable?!n.selectable.call(null,e,l):!1,size:s.states.tableSize.value,onChange:()=>{s.commit("rowSelectedChanged",e)},onClick:d=>d.stopPropagation(),modelValue:s.isSelected(e),ariaLabel:n.label})},sortable:!1,resizable:!1},index:{renderHeader({column:e}){return e.label||"#"},renderCell({column:e,$index:n}){let s=n+1;const l=e.index;return gr(l)?s=n+l:hr(l)&&(s=l(n)),xr("div",{},[s])},sortable:!1},expand:{renderHeader({column:e}){return e.label||""},renderCell({row:e,store:n,expanded:s}){const{ns:l}=n,d=[l.e("expand-icon")];return s&&d.push(l.em("expand-icon","expanded")),xr("div",{class:d,onClick:function(b){b.stopPropagation(),n.toggleRowExpansion(e)}},{default:()=>[xr(rr,null,{default:()=>[xr(il)]})]})},sortable:!1,resizable:!1}};function s2e({row:e,column:n,$index:s}){var l;const d=n.property,m=d&&fv(e,d).value;return n&&n.formatter?n.formatter(e,n,m,s):((l=m?.toString)==null?void 0:l.call(m))||""}function o2e({row:e,treeNode:n,store:s},l=!1){const{ns:d}=s;if(!n)return l?[xr("span",{class:d.e("placeholder")})]:null;const m=[],b=function(r){r.stopPropagation(),!n.loading&&s.loadOrToggle(e)};if(n.indent&&m.push(xr("span",{class:d.e("indent"),style:{"padding-left":`${n.indent}px`}})),Ts(n.expanded)&&!n.noLazyChildren){const r=[d.e("expand-icon"),n.expanded?d.em("expand-icon","expanded"):""];let E=il;n.loading&&(E=gc),m.push(xr("div",{class:r,onClick:b},{default:()=>[xr(rr,{class:{[d.is("loading")]:n.loading}},{default:()=>[xr(E)]})]}))}else m.push(xr("span",{class:d.e("placeholder")}));return m}function RA(e,n){return e.reduce((s,l)=>(s[l]=l,s),n)}function a2e(e,n){const s=oi();return{registerComplexWatchers:()=>{const m=["fixed"],b={realWidth:"width",realMinWidth:"minWidth"},r=RA(m,b);Object.keys(r).forEach(E=>{const M=b[E];Wi(n,M)&&on(()=>n[M],A=>{let P=A;M==="width"&&E==="realWidth"&&(P=z8(A)),M==="minWidth"&&E==="realMinWidth"&&(P=Uz(A)),s.columnConfig.value[M]=P,s.columnConfig.value[E]=P;const D=M==="fixed";e.value.store.scheduleLayout(D)})})},registerNormalWatchers:()=>{const m=["label","filters","filterMultiple","filteredValue","sortable","index","formatter","className","labelClassName","filterClassName","showOverflowTooltip","tooltipFormatter"],b={property:"prop",align:"realAlign",headerAlign:"realHeaderAlign"},r=RA(m,b);Object.keys(r).forEach(E=>{const M=b[E];Wi(n,M)&&on(()=>n[M],A=>{s.columnConfig.value[E]=A})})}}}function l2e(e,n,s){const l=oi(),d=Re(""),m=Re(!1),b=Re(),r=Re(),E=dn("table");Da(()=>{b.value=e.align?`is-${e.align}`:null,b.value}),Da(()=>{r.value=e.headerAlign?`is-${e.headerAlign}`:b.value,r.value});const M=se(()=>{let Y=l.vnode.vParent||l.parent;for(;Y&&!Y.tableId&&!Y.columnId;)Y=Y.vnode.vParent||Y.parent;return Y}),A=se(()=>{const{store:Y}=l.parent;if(!Y)return!1;const{treeData:J}=Y.states,re=J.value;return re&&Object.keys(re).length>0}),P=Re(z8(e.width)),D=Re(Uz(e.minWidth)),z=Y=>(P.value&&(Y.width=P.value),D.value&&(Y.minWidth=D.value),!P.value&&D.value&&(Y.width=void 0),Y.minWidth||(Y.minWidth=80),Y.realWidth=Number(Li(Y.width)?Y.minWidth:Y.width),Y),F=Y=>{const J=Y.type,re=i2e[J]||{};Object.keys(re).forEach(fe=>{const ce=re[fe];fe!=="className"&&!Li(ce)&&(Y[fe]=ce)});const he=r2e(J);if(he){const fe=`${w(E.namespace)}-${he}`;Y.className=Y.className?`${Y.className} ${fe}`:fe}return Y},N=Y=>{mn(Y)?Y.forEach(re=>J(re)):J(Y);function J(re){var he;((he=re?.type)==null?void 0:he.name)==="ElTableColumn"&&(re.vParent=l)}};return{columnId:d,realAlign:b,isSubColumn:m,realHeaderAlign:r,columnOrTableParent:M,setColumnWidth:z,setColumnForcedProps:F,setColumnRenders:Y=>{e.renderHeader||Y.type!=="selection"&&(Y.renderHeader=re=>(l.columnConfig.value.label,It(n,"header",re,()=>[Y.label]))),n["filter-icon"]&&(Y.renderFilterIcon=re=>It(n,"filter-icon",re));let J=Y.renderCell;return Y.type==="expand"?(Y.renderCell=re=>xr("div",{class:"cell"},[J(re)]),s.value.renderExpanded=re=>n.default?n.default(re):n.default):(J=J||s2e,Y.renderCell=re=>{let he=null;if(n.default){const Ue=n.default(re);he=Ue.some(Ne=>Ne.type!==Qo)?Ue:J(re)}else he=J(re);const{columns:fe}=s.value.store.states,ce=fe.value.findIndex(Ue=>Ue.type==="default"),me=A.value&&re.cellIndex===ce,we=o2e(re,me),ye={class:"cell",style:{}};return Y.showOverflowTooltip&&(ye.class=`${ye.class} ${w(E.namespace)}-tooltip`,ye.style={width:`${(re.column.realWidth||Number(re.column.width))-1}px`}),N(he),xr("div",ye,[we,he])}),Y},getPropsData:(...Y)=>Y.reduce((J,re)=>(mn(re)&&re.forEach(he=>{J[he]=e[he]}),J),{}),getColumnElIndex:(Y,J)=>Array.prototype.indexOf.call(Y,J),updateColumnOrder:()=>{s.value.store.commit("updateColumnOrder",l.columnConfig.value)}}}var u2e={type:{type:String,default:"default"},label:String,className:String,labelClassName:String,property:String,prop:String,width:{type:[String,Number],default:""},minWidth:{type:[String,Number],default:""},renderHeader:Function,sortable:{type:[Boolean,String],default:!1},sortMethod:Function,sortBy:[String,Function,Array],resizable:{type:Boolean,default:!0},columnKey:String,align:String,headerAlign:String,showOverflowTooltip:{type:[Boolean,Object],default:void 0},tooltipFormatter:Function,fixed:[Boolean,String],formatter:Function,selectable:Function,reserveSelection:Boolean,filterMethod:Function,filteredValue:Array,filters:Array,filterPlacement:String,filterMultiple:{type:Boolean,default:!0},filterClassName:String,index:[Number,Function],sortOrders:{type:Array,default:()=>["ascending","descending",null],validator:e=>e.every(n=>["ascending","descending",null].includes(n))}};let c2e=1;var i9=xe({name:"ElTableColumn",components:{ElCheckbox:Ou},props:u2e,setup(e,{slots:n}){const s=oi(),l=Re({}),d=se(()=>{let W=s.parent;for(;W&&!W.tableId;)W=W.parent;return W}),{registerNormalWatchers:m,registerComplexWatchers:b}=a2e(d,e),{columnId:r,isSubColumn:E,realHeaderAlign:M,columnOrTableParent:A,setColumnWidth:P,setColumnForcedProps:D,setColumnRenders:z,getPropsData:F,getColumnElIndex:N,realAlign:q,updateColumnOrder:G}=l2e(e,n,d),ie=A.value;r.value=`${ie.tableId||ie.columnId}_column_${c2e++}`,ox(()=>{E.value=d.value!==ie;const W=e.type||"default",Y=e.sortable===""?!0:e.sortable,J=W==="selection"?!1:Li(e.showOverflowTooltip)?ie.props.showOverflowTooltip:e.showOverflowTooltip,re=Li(e.tooltipFormatter)?ie.props.tooltipFormatter:e.tooltipFormatter,he={...n2e[W],id:r.value,type:W,property:e.prop||e.property,align:q,headerAlign:M,showOverflowTooltip:J,tooltipFormatter:re,filterable:e.filters||e.filterMethod,filteredValue:[],filterPlacement:"",filterClassName:"",isColumnGroup:!1,isSubColumn:!1,filterOpened:!1,sortable:Y,index:e.index,rawColumnKey:s.vnode.key};let ye=F(["columnKey","label","className","labelClassName","type","renderHeader","formatter","fixed","resizable"],["sortMethod","sortBy","sortOrders"],["selectable","reserveSelection"],["filterMethod","filters","filterMultiple","filterOpened","filteredValue","filterPlacement","filterClassName"]);ye=i1e(he,ye),ye=o1e(z,P,D)(ye),l.value=ye,m(),b()}),Zr(()=>{var W;const Y=A.value,J=E.value?Y.vnode.el.children:(W=Y.refs.hiddenColumns)==null?void 0:W.children,re=()=>N(J||[],s.vnode.el);l.value.getColumnIndex=re,re()>-1&&d.value.store.commit("insertColumn",l.value,E.value?Y.columnConfig.value:null,G)}),Ls(()=>{const W=l.value.getColumnIndex;(W?W():-1)>-1&&d.value.store.commit("removeColumn",l.value,E.value?ie.columnConfig.value:null,G)}),s.columnId=r.value,s.columnConfig=l},render(){var e,n,s;try{const l=(n=(e=this.$slots).default)==null?void 0:n.call(e,{row:{},column:{},$index:-1}),d=[];if(mn(l))for(const b of l)((s=b.type)==null?void 0:s.name)==="ElTableColumn"||b.shapeFlag&2?d.push(b):b.type===cr&&mn(b.children)&&b.children.forEach(r=>{r?.patchFlag!==1024&&!ir(r?.children)&&d.push(r)});return xr("div",d)}catch{return xr("div",[])}}});const d2e=Gr(e2e,{TableColumn:i9}),h2e=ao(i9);var Uv=(e=>(e.ASC="asc",e.DESC="desc",e))(Uv||{}),jv=(e=>(e.CENTER="center",e.RIGHT="right",e))(jv||{}),s9=(e=>(e.LEFT="left",e.RIGHT="right",e))(s9||{});const F6={asc:"desc",desc:"asc"},Gv=Symbol("placeholder"),f2e=(e,n,s)=>{var l;const d={flexGrow:0,flexShrink:0,...s?{}:{flexGrow:e.flexGrow||0,flexShrink:e.flexShrink||1}};s||(d.flexShrink=1);const m={...(l=e.style)!=null?l:{},...d,flexBasis:"auto",width:e.width};return n||(e.maxWidth&&(m.maxWidth=e.maxWidth),e.minWidth&&(m.minWidth=e.minWidth)),m};function p2e(e,n,s){const l=se(()=>w(n).map((q,G)=>{var ie,W;return{...q,key:(W=(ie=q.key)!=null?ie:q.dataKey)!=null?W:G}})),d=se(()=>w(l).filter(q=>!q.hidden)),m=se(()=>w(d).filter(q=>q.fixed==="left"||q.fixed===!0)),b=se(()=>w(d).filter(q=>q.fixed==="right")),r=se(()=>w(d).filter(q=>!q.fixed)),E=se(()=>{const q=[];return w(m).forEach(G=>{q.push({...G,placeholderSign:Gv})}),w(r).forEach(G=>{q.push(G)}),w(b).forEach(G=>{q.push({...G,placeholderSign:Gv})}),q}),M=se(()=>w(m).length||w(b).length),A=se(()=>w(l).reduce((q,G)=>(q[G.key]=f2e(G,w(s),e.fixed),q),{})),P=se(()=>w(d).reduce((q,G)=>q+G.width,0)),D=q=>w(l).find(G=>G.key===q),z=q=>w(A)[q],F=(q,G)=>{q.width=G};function N(q){var G;const{key:ie}=q.currentTarget.dataset;if(!ie)return;const{sortState:W,sortBy:Y}=e;let J=Uv.ASC;Yr(W)?J=F6[W[ie]]:J=F6[Y.order],(G=e.onColumnSort)==null||G.call(e,{column:D(ie),key:ie,order:J})}return{columns:l,columnsStyles:A,columnsTotalWidth:P,fixedColumnsOnLeft:m,fixedColumnsOnRight:b,hasFixedColumns:M,mainColumns:E,normalColumns:r,visibleColumns:d,getColumn:D,getColumnStyle:z,updateColumnWidth:F,onColumnSorted:N}}const m2e=(e,{mainTableRef:n,leftTableRef:s,rightTableRef:l,onMaybeEndReached:d})=>{const m=Re({scrollLeft:0,scrollTop:0});function b(z){var F,N,q;const{scrollTop:G}=z;(F=n.value)==null||F.scrollTo(z),(N=s.value)==null||N.scrollToTop(G),(q=l.value)==null||q.scrollToTop(G)}function r(z){m.value=z,b(z)}function E(z){m.value.scrollTop=z,b(w(m))}function M(z){var F,N;m.value.scrollLeft=z,(N=(F=n.value)==null?void 0:F.scrollTo)==null||N.call(F,w(m))}function A(z){var F;r(z),(F=e.onScroll)==null||F.call(e,z)}function P({scrollTop:z}){const{scrollTop:F}=w(m);z!==F&&E(z)}function D(z,F="auto"){var N;(N=n.value)==null||N.scrollToRow(z,F)}return on(()=>w(m).scrollTop,(z,F)=>{z>F&&d()}),{scrollPos:m,scrollTo:r,scrollToLeft:M,scrollToTop:E,scrollToRow:D,onScroll:A,onVerticalScroll:P}},g2e=(e,{mainTableRef:n,leftTableRef:s,rightTableRef:l,tableInstance:d,ns:m,isScrolling:b})=>{const r=oi(),{emit:E}=r,M=Zs(!1),A=Re(e.defaultExpandedRowKeys||[]),P=Re(-1),D=Zs(null),z=Re({}),F=Re({}),N=Zs({}),q=Zs({}),G=Zs({}),ie=se(()=>gr(e.estimatedRowHeight));function W(me){var we;(we=e.onRowsRendered)==null||we.call(e,me),me.rowCacheEnd>w(P)&&(P.value=me.rowCacheEnd)}function Y({hovered:me,rowKey:we}){if(b.value)return;d.vnode.el.querySelectorAll(`[rowkey="${String(we)}"]`).forEach(Ne=>{me?Ne.classList.add(m.is("hovered")):Ne.classList.remove(m.is("hovered"))})}function J({expanded:me,rowData:we,rowIndex:ye,rowKey:Ue}){var Ne,Pe;const ve=[...w(A)],$e=ve.indexOf(Ue);me?$e===-1&&ve.push(Ue):$e>-1&&ve.splice($e,1),A.value=ve,E("update:expandedRowKeys",ve),(Ne=e.onRowExpand)==null||Ne.call(e,{expanded:me,rowData:we,rowIndex:ye,rowKey:Ue}),(Pe=e.onExpandedRowsChange)==null||Pe.call(e,ve)}const re=Vl(()=>{var me,we,ye,Ue;M.value=!0,z.value={...w(z),...w(F)},he(w(D),!1),F.value={},D.value=null,(me=n.value)==null||me.forceUpdate(),(we=s.value)==null||we.forceUpdate(),(ye=l.value)==null||ye.forceUpdate(),(Ue=r.proxy)==null||Ue.$forceUpdate(),M.value=!1},0);function he(me,we=!1){w(ie)&&[n,s,l].forEach(ye=>{const Ue=w(ye);Ue&&Ue.resetAfterRowIndex(me,we)})}function fe(me,we,ye){const Ue=w(D);(Ue===null||Ue>ye)&&(D.value=ye),F.value[me]=we}function ce({rowKey:me,height:we,rowIndex:ye},Ue){Ue?Ue===s9.RIGHT?G.value[me]=we:N.value[me]=we:q.value[me]=we;const Ne=Math.max(...[N,G,q].map(Pe=>Pe.value[me]||0));w(z)[me]!==Ne&&(fe(me,Ne,ye),re())}return{expandedRowKeys:A,lastRenderedRowIndex:P,isDynamic:ie,isResetting:M,rowHeights:z,resetAfterIndex:he,onRowExpanded:J,onRowHovered:Y,onRowsRendered:W,onRowHeightChange:ce}},_2e=(e,{expandedRowKeys:n,lastRenderedRowIndex:s,resetAfterIndex:l})=>{const d=Re({}),m=se(()=>{const r={},{data:E,rowKey:M}=e,A=w(n);if(!A||!A.length)return E;const P=[],D=new Set;A.forEach(F=>D.add(F));let z=E.slice();for(z.forEach(F=>r[F[M]]=0);z.length>0;){const F=z.shift();P.push(F),D.has(F[M])&&mn(F.children)&&F.children.length>0&&(z=[...F.children,...z],F.children.forEach(N=>r[N[M]]=r[F[M]]+1))}return d.value=r,P}),b=se(()=>{const{data:r,expandColumnKey:E}=e;return E?w(m):r});return on(b,(r,E)=>{r!==E&&(s.value=-1,l(0,!0))}),{data:b,depthMap:d}},v2e=(e,n)=>e+n,ib=e=>mn(e)?e.reduce(v2e,0):e,qp=(e,n,s={})=>hr(e)?e(n):e??s,vf=e=>(["width","maxWidth","minWidth","height"].forEach(n=>{e[n]=ho(e[n])}),e),o9=e=>qs(e)?n=>xr(e,n):e,y2e=(e,{columnsTotalWidth:n,rowsHeight:s,fixedColumnsOnLeft:l,fixedColumnsOnRight:d})=>{const m=se(()=>{const{fixed:ie,width:W,vScrollbarSize:Y}=e,J=W-Y;return ie?Math.max(Math.round(w(n)),J):J}),b=se(()=>w(m)+e.vScrollbarSize),r=se(()=>{const{height:ie=0,maxHeight:W=0,footerHeight:Y,hScrollbarSize:J}=e;if(W>0){const re=w(z),he=w(s),ce=w(D)+re+he+J;return Math.min(ce,W-Y)}return ie-Y}),E=se(()=>{const{maxHeight:ie}=e,W=w(r);if(gr(ie)&&ie>0)return W;const Y=w(s)+w(D)+w(z);return Math.min(W,Y)}),M=ie=>ie.width,A=se(()=>ib(w(l).map(M))),P=se(()=>ib(w(d).map(M))),D=se(()=>ib(e.headerHeight)),z=se(()=>{var ie;return(((ie=e.fixedData)==null?void 0:ie.length)||0)*e.rowHeight}),F=se(()=>w(r)-w(D)-w(z)),N=se(()=>{const{style:ie={},height:W,width:Y}=e;return vf({...ie,height:W,width:Y})}),q=se(()=>vf({height:e.footerHeight})),G=se(()=>({top:ho(w(D)),bottom:ho(e.footerHeight),width:ho(e.width)}));return{bodyWidth:m,fixedTableHeight:E,mainTableHeight:r,leftTableWidth:A,rightTableWidth:P,headerWidth:b,windowHeight:F,footerHeight:q,emptyStyle:G,rootStyle:N,headerHeight:D}};function b2e(e){const n=Re(),s=Re(),l=Re(),{columns:d,columnsStyles:m,columnsTotalWidth:b,fixedColumnsOnLeft:r,fixedColumnsOnRight:E,hasFixedColumns:M,mainColumns:A,onColumnSorted:P}=p2e(e,cs(e,"columns"),cs(e,"fixed")),{scrollTo:D,scrollToLeft:z,scrollToTop:F,scrollToRow:N,onScroll:q,onVerticalScroll:G,scrollPos:ie}=m2e(e,{mainTableRef:n,leftTableRef:s,rightTableRef:l,onMaybeEndReached:Gt}),W=dn("table-v2"),Y=oi(),J=Zs(!1),{expandedRowKeys:re,lastRenderedRowIndex:he,isDynamic:fe,isResetting:ce,rowHeights:me,resetAfterIndex:we,onRowExpanded:ye,onRowHeightChange:Ue,onRowHovered:Ne,onRowsRendered:Pe}=g2e(e,{mainTableRef:n,leftTableRef:s,rightTableRef:l,tableInstance:Y,ns:W,isScrolling:J}),{data:ve,depthMap:$e}=_2e(e,{expandedRowKeys:re,lastRenderedRowIndex:he,resetAfterIndex:we}),Te=se(()=>{const{estimatedRowHeight:an,rowHeight:Qt}=e,Zt=w(ve);return gr(an)?Object.values(w(me)).reduce((rn,bt)=>rn+bt,0):Zt.length*Qt}),{bodyWidth:Ae,fixedTableHeight:Ve,mainTableHeight:We,leftTableWidth:ft,rightTableWidth:at,headerWidth:ct,windowHeight:Mt,footerHeight:Ct,emptyStyle:gt,rootStyle:Ke,headerHeight:Lt}=y2e(e,{columnsTotalWidth:b,fixedColumnsOnLeft:r,fixedColumnsOnRight:E,rowsHeight:Te}),xn=Re(),Ht=se(()=>{const an=w(ve).length===0;return mn(e.fixedData)?e.fixedData.length===0&&an:an});function le(an){const{estimatedRowHeight:Qt,rowHeight:Zt,rowKey:rn}=e;return Qt?w(me)[w(ve)[an][rn]]||Qt:Zt}const nt=Re(!1);function Gt(){const{onEndReached:an}=e;if(!an)return;const{scrollTop:Qt}=w(ie),Zt=w(Te),rn=w(Mt),bt=Zt-(Qt+rn)+e.hScrollbarSize;!nt.value&&w(he)>=0&&Zt<=Qt+w(We)-w(Lt)?(nt.value=!0,an(bt)):nt.value=!1}return on(()=>w(Te),()=>nt.value=!1),on(()=>e.expandedRowKeys,an=>re.value=an,{deep:!0}),{columns:d,containerRef:xn,mainTableRef:n,leftTableRef:s,rightTableRef:l,isDynamic:fe,isResetting:ce,isScrolling:J,hasFixedColumns:M,columnsStyles:m,columnsTotalWidth:b,data:ve,expandedRowKeys:re,depthMap:$e,fixedColumnsOnLeft:r,fixedColumnsOnRight:E,mainColumns:A,bodyWidth:Ae,emptyStyle:gt,rootStyle:Ke,headerWidth:ct,footerHeight:Ct,mainTableHeight:We,fixedTableHeight:Ve,leftTableWidth:ft,rightTableWidth:at,showEmpty:Ht,getRowHeight:le,onColumnSorted:P,onRowHovered:Ne,onRowExpanded:ye,onRowsRendered:Pe,onRowHeightChange:Ue,scrollTo:D,scrollToLeft:z,scrollToTop:F,scrollToRow:N,onScroll:q,onVerticalScroll:G}}const V8=Symbol("tableV2"),a9=String,dy={type:wt(Array),required:!0},$8={type:wt(Array)},l9={...$8,required:!0},x2e=String,PA={type:wt(Array),default:()=>oo([])},Mp={type:Number,required:!0},u9={type:wt([String,Number,Symbol]),default:"id"},LA={type:wt(Object)},Lp=bn({class:String,columns:dy,columnsStyles:{type:wt(Object),required:!0},depth:Number,expandColumnKey:x2e,estimatedRowHeight:{...Fp.estimatedRowHeight,default:void 0},isScrolling:Boolean,onRowExpand:{type:wt(Function)},onRowHover:{type:wt(Function)},onRowHeightChange:{type:wt(Function)},rowData:{type:wt(Object),required:!0},rowEventHandlers:{type:wt(Object)},rowIndex:{type:Number,required:!0},rowKey:u9,style:{type:wt(Object)}}),_4={type:Number,required:!0},H8=bn({class:String,columns:dy,fixedHeaderData:{type:wt(Array)},headerData:{type:wt(Array),required:!0},headerHeight:{type:wt([Number,Array]),default:50},rowWidth:_4,rowHeight:{type:Number,default:50},height:_4,width:_4}),sb=bn({columns:dy,data:l9,fixedData:$8,estimatedRowHeight:Lp.estimatedRowHeight,width:Mp,height:Mp,headerWidth:Mp,headerHeight:H8.headerHeight,bodyWidth:Mp,rowHeight:Mp,cache:Az.cache,useIsScrolling:Boolean,scrollbarAlwaysOn:Fp.scrollbarAlwaysOn,scrollbarStartGap:Fp.scrollbarStartGap,scrollbarEndGap:Fp.scrollbarEndGap,class:a9,style:LA,containerStyle:LA,getRowHeight:{type:wt(Function),required:!0},rowKey:Lp.rowKey,onRowsRendered:{type:wt(Function)},onScroll:{type:wt(Function)}}),w2e=bn({cache:sb.cache,estimatedRowHeight:Lp.estimatedRowHeight,rowKey:u9,headerClass:{type:wt([String,Function])},headerProps:{type:wt([Object,Function])},headerCellProps:{type:wt([Object,Function])},headerHeight:H8.headerHeight,footerHeight:{type:Number,default:0},rowClass:{type:wt([String,Function])},rowProps:{type:wt([Object,Function])},rowHeight:{type:Number,default:50},cellProps:{type:wt([Object,Function])},columns:dy,data:l9,dataGetter:{type:wt(Function)},fixedData:$8,expandColumnKey:Lp.expandColumnKey,expandedRowKeys:PA,defaultExpandedRowKeys:PA,class:a9,fixed:Boolean,style:{type:wt(Object)},width:Mp,height:Mp,maxHeight:Number,useIsScrolling:Boolean,indentSize:{type:Number,default:12},iconSize:{type:Number,default:12},hScrollbarSize:Fp.hScrollbarSize,vScrollbarSize:Fp.vScrollbarSize,scrollbarAlwaysOn:Lz.alwaysOn,sortBy:{type:wt(Object),default:()=>({})},sortState:{type:wt(Object),default:void 0},onColumnSort:{type:wt(Function)},onExpandedRowsChange:{type:wt(Function)},onEndReached:{type:wt(Function)},onRowExpand:Lp.onRowExpand,onScroll:sb.onScroll,onRowsRendered:sb.onRowsRendered,rowEventHandlers:Lp.rowEventHandlers}),S2e="ElTableV2Header",C2e=xe({name:S2e,props:H8,setup(e,{slots:n,expose:s}){const l=dn("table-v2"),d=Gn("tableV2GridScrollLeft"),m=Re(),b=se(()=>vf({width:e.width,height:e.height})),r=se(()=>vf({width:e.rowWidth,height:e.height})),E=se(()=>el(w(e.headerHeight))),M=D=>{const z=w(m);dr(()=>{z?.scroll&&z.scroll({left:D})})},A=()=>{const D=l.e("fixed-header-row"),{columns:z,fixedHeaderData:F,rowHeight:N}=e;return F?.map((q,G)=>{var ie;const W=vf({height:N,width:"100%"});return(ie=n.fixed)==null?void 0:ie.call(n,{class:D,columns:z,rowData:q,rowIndex:-(G+1),style:W})})},P=()=>{const D=l.e("dynamic-header-row"),{columns:z}=e;return w(E).map((F,N)=>{var q;const G=vf({width:"100%",height:F});return(q=n.dynamic)==null?void 0:q.call(n,{class:D,columns:z,headerIndex:N,style:G})})};return yc(()=>{d?.value&&M(d.value)}),s({scrollToLeft:M}),()=>{if(!(e.height<=0))return st("div",{ref:m,class:e.class,style:w(b),role:"rowgroup"},[st("div",{style:w(r),class:l.e("header")},[P(),A()])])}}});var E2e=C2e;const T2e=({atXEndEdge:e,atXStartEdge:n,atYEndEdge:s,atYStartEdge:l},d)=>{let m=null,b=0,r=0;const E=(A,P)=>{const D=A<=0&&n.value||A>=0&&e.value,z=P<=0&&l.value||P>=0&&s.value;return D&&z};return{hasReachedEdge:E,onWheel:A=>{jp(m);let P=A.deltaX,D=A.deltaY;Math.abs(P)>Math.abs(D)?D=0:P=0,A.shiftKey&&D!==0&&(P=D,D=0),!(E(b,r)&&E(b+P,r+D))&&(b+=P,r+=D,A.preventDefault(),m=Tf(()=>{d(b,r),b=0,r=0}))}}},c9=({name:e,clearCache:n,getColumnPosition:s,getColumnStartIndexForOffset:l,getColumnStopIndexForStartIndex:d,getEstimatedTotalHeight:m,getEstimatedTotalWidth:b,getColumnOffset:r,getRowOffset:E,getRowPosition:M,getRowStartIndexForOffset:A,getRowStopIndexForStartIndex:P,initCache:D,injectToInstance:z,validateProps:F})=>xe({name:e??"ElVirtualList",props:Fp,emits:[Fb,Bb],setup(N,{emit:q,expose:G,slots:ie}){const W=dn("vl");F(N);const Y=oi(),J=Re(D(N,Y));z?.(Y,J);const re=Re(),he=Re(),fe=Re(),ce=Re(null),me=Re({isScrolling:!1,scrollLeft:gr(N.initScrollLeft)?N.initScrollLeft:0,scrollTop:gr(N.initScrollTop)?N.initScrollTop:0,updateRequested:!1,xAxisScrollDir:_g,yAxisScrollDir:_g}),we=Iz(),ye=se(()=>Number.parseInt(`${N.height}`,10)),Ue=se(()=>Number.parseInt(`${N.width}`,10)),Ne=se(()=>{const{totalColumn:Zt,totalRow:rn,columnCache:bt}=N,{isScrolling:fn,xAxisScrollDir:pn,scrollLeft:Vn}=w(me);if(Zt===0||rn===0)return[0,0,0,0];const Nn=l(N,Vn,w(J)),Ot=d(N,Nn,Vn,w(J)),Bn=!fn||pn===Vb?Math.max(1,bt):1,Sr=!fn||pn===_g?Math.max(1,bt):1;return[Math.max(0,Nn-Bn),Math.max(0,Math.min(Zt-1,Ot+Sr)),Nn,Ot]}),Pe=se(()=>{const{totalColumn:Zt,totalRow:rn,rowCache:bt}=N,{isScrolling:fn,yAxisScrollDir:pn,scrollTop:Vn}=w(me);if(Zt===0||rn===0)return[0,0,0,0];const Nn=A(N,Vn,w(J)),Ot=P(N,Nn,Vn,w(J)),Bn=!fn||pn===Vb?Math.max(1,bt):1,Sr=!fn||pn===_g?Math.max(1,bt):1;return[Math.max(0,Nn-Bn),Math.max(0,Math.min(rn-1,Ot+Sr)),Nn,Ot]}),ve=se(()=>m(N,w(J))),$e=se(()=>b(N,w(J))),Te=se(()=>{var Zt;return[{position:"relative",overflow:"hidden",WebkitOverflowScrolling:"touch",willChange:"transform"},{direction:N.direction,height:gr(N.height)?`${N.height}px`:N.height,width:gr(N.width)?`${N.width}px`:N.width},(Zt=N.style)!=null?Zt:{}]}),Ae=se(()=>{const Zt=`${w($e)}px`;return{height:`${w(ve)}px`,pointerEvents:w(me).isScrolling?"none":void 0,width:Zt}}),Ve=()=>{const{totalColumn:Zt,totalRow:rn}=N;if(Zt>0&&rn>0){const[Ot,Bn,Sr,Ur]=w(Ne),[Kn,ui,wr,Tr]=w(Pe);q(Fb,{columnCacheStart:Ot,columnCacheEnd:Bn,rowCacheStart:Kn,rowCacheEnd:ui,columnVisibleStart:Sr,columnVisibleEnd:Ur,rowVisibleStart:wr,rowVisibleEnd:Tr})}const{scrollLeft:bt,scrollTop:fn,updateRequested:pn,xAxisScrollDir:Vn,yAxisScrollDir:Nn}=w(me);q(Bb,{xAxisScrollDir:Vn,scrollLeft:bt,yAxisScrollDir:Nn,scrollTop:fn,updateRequested:pn})},We=Zt=>{const{clientHeight:rn,clientWidth:bt,scrollHeight:fn,scrollLeft:pn,scrollTop:Vn,scrollWidth:Nn}=Zt.currentTarget,Ot=w(me);if(Ot.scrollTop===Vn&&Ot.scrollLeft===pn)return;let Bn=pn;if(_A(N.direction))switch(Hb()){case $v:Bn=-pn;break;case D8:Bn=Nn-bt-pn;break}me.value={...Ot,isScrolling:!0,scrollLeft:Bn,scrollTop:Math.max(0,Math.min(Vn,fn-rn)),updateRequested:!0,xAxisScrollDir:Pp(Ot.scrollLeft,Bn),yAxisScrollDir:Pp(Ot.scrollTop,Vn)},dr(()=>Ke()),Lt(),Ve()},ft=(Zt,rn)=>{const bt=w(ye),fn=(ve.value-bt)/rn*Zt;Mt({scrollTop:Math.min(ve.value-bt,fn)})},at=(Zt,rn)=>{const bt=w(Ue),fn=($e.value-bt)/rn*Zt;Mt({scrollLeft:Math.min($e.value-bt,fn)})},{onWheel:ct}=T2e({atXStartEdge:se(()=>me.value.scrollLeft<=0),atXEndEdge:se(()=>me.value.scrollLeft>=$e.value-w(Ue)),atYStartEdge:se(()=>me.value.scrollTop<=0),atYEndEdge:se(()=>me.value.scrollTop>=ve.value-w(ye))},(Zt,rn)=>{var bt,fn,pn,Vn;(fn=(bt=he.value)==null?void 0:bt.onMouseUp)==null||fn.call(bt),(Vn=(pn=fe.value)==null?void 0:pn.onMouseUp)==null||Vn.call(pn);const Nn=w(Ue),Ot=w(ye);Mt({scrollLeft:Math.min(me.value.scrollLeft+Zt,$e.value-Nn),scrollTop:Math.min(me.value.scrollTop+rn,ve.value-Ot)})});Is(re,"wheel",ct,{passive:!1});const Mt=({scrollLeft:Zt=me.value.scrollLeft,scrollTop:rn=me.value.scrollTop})=>{Zt=Math.max(Zt,0),rn=Math.max(rn,0);const bt=w(me);rn===bt.scrollTop&&Zt===bt.scrollLeft||(me.value={...bt,xAxisScrollDir:Pp(bt.scrollLeft,Zt),yAxisScrollDir:Pp(bt.scrollTop,rn),scrollLeft:Zt,scrollTop:rn,updateRequested:!0},dr(()=>Ke()),Lt(),Ve())},Ct=(Zt=0,rn=0,bt=Iu)=>{const fn=w(me);rn=Math.max(0,Math.min(rn,N.totalColumn-1)),Zt=Math.max(0,Math.min(Zt,N.totalRow-1));const pn=rO(W.namespace.value),Vn=w(J),Nn=m(N,Vn),Ot=b(N,Vn);Mt({scrollLeft:r(N,rn,bt,fn.scrollLeft,Vn,Ot>N.width?pn:0),scrollTop:E(N,Zt,bt,fn.scrollTop,Vn,Nn>N.height?pn:0)})},gt=(Zt,rn)=>{const{columnWidth:bt,direction:fn,rowHeight:pn}=N,Vn=we.value(n&&bt,n&&pn,n&&fn),Nn=`${Zt},${rn}`;if(Wi(Vn,Nn))return Vn[Nn];{const[,Ot]=s(N,rn,w(J)),Bn=w(J),Sr=_A(fn),[Ur,Kn]=M(N,Zt,Bn),[ui]=s(N,rn,Bn);return Vn[Nn]={position:"absolute",left:Sr?void 0:`${Ot}px`,right:Sr?`${Ot}px`:void 0,top:`${Kn}px`,height:`${Ur}px`,width:`${ui}px`},Vn[Nn]}},Ke=()=>{me.value.isScrolling=!1,dr(()=>{we.value(-1,null,null)})};Zr(()=>{if(!Pi)return;const{initScrollLeft:Zt,initScrollTop:rn}=N,bt=w(re);bt&&(gr(Zt)&&(bt.scrollLeft=Zt),gr(rn)&&(bt.scrollTop=rn)),Ve()});const Lt=()=>{const{direction:Zt}=N,{scrollLeft:rn,scrollTop:bt,updateRequested:fn}=w(me),pn=w(re);if(fn&&pn){if(Zt===Mg)switch(Hb()){case $v:{pn.scrollLeft=-rn;break}case O8:{pn.scrollLeft=rn;break}default:{const{clientWidth:Vn,scrollWidth:Nn}=pn;pn.scrollLeft=Nn-Vn-rn;break}}else pn.scrollLeft=Math.max(0,rn);pn.scrollTop=Math.max(0,bt)}},{resetAfterColumnIndex:xn,resetAfterRowIndex:Ht,resetAfter:le}=Y.proxy;G({windowRef:re,innerRef:ce,getItemStyleCache:we,scrollTo:Mt,scrollToItem:Ct,states:me,resetAfterColumnIndex:xn,resetAfterRowIndex:Ht,resetAfter:le});const nt=()=>{const{scrollbarAlwaysOn:Zt,scrollbarStartGap:rn,scrollbarEndGap:bt,totalColumn:fn,totalRow:pn}=N,Vn=w(Ue),Nn=w(ye),Ot=w($e),Bn=w(ve),{scrollLeft:Sr,scrollTop:Ur}=w(me),Kn=xr(I6,{ref:he,alwaysOn:Zt,startGap:rn,endGap:bt,class:W.e("horizontal"),clientSize:Vn,layout:"horizontal",onScroll:at,ratio:Vn*100/Ot,scrollFrom:Sr/(Ot-Vn),total:pn,visible:!0}),ui=xr(I6,{ref:fe,alwaysOn:Zt,startGap:rn,endGap:bt,class:W.e("vertical"),clientSize:Nn,layout:"vertical",onScroll:ft,ratio:Nn*100/Bn,scrollFrom:Ur/(Bn-Nn),total:fn,visible:!0});return{horizontalScrollbar:Kn,verticalScrollbar:ui}},Gt=()=>{var Zt;const[rn,bt]=w(Ne),[fn,pn]=w(Pe),{data:Vn,totalColumn:Nn,totalRow:Ot,useIsScrolling:Bn,itemKey:Sr}=N,Ur=[];if(Ot>0&&Nn>0)for(let Kn=fn;Kn<=pn;Kn++)for(let ui=rn;ui<=bt;ui++){const wr=Sr({columnIndex:ui,data:Vn,rowIndex:Kn});Ur.push(xr(cr,{key:wr},(Zt=ie.default)==null?void 0:Zt.call(ie,{columnIndex:ui,data:Vn,isScrolling:Bn?w(me).isScrolling:void 0,style:gt(Kn,ui),rowIndex:Kn})))}return Ur},an=()=>{const Zt=si(N.innerElement),rn=Gt();return[xr(Zt,{style:w(Ae),ref:ce},ir(Zt)?rn:{default:()=>rn})]};return()=>{const Zt=si(N.containerElement),{horizontalScrollbar:rn,verticalScrollbar:bt}=nt(),fn=an();return xr("div",{key:0,class:W.e("wrapper"),role:N.role},[xr(Zt,{class:N.className,style:w(Te),onScroll:We,ref:re},ir(Zt)?fn:{default:()=>fn}),rn,bt])}}}),{max:Gb,min:d9,floor:h9}=Math,I2e={column:"columnWidth",row:"rowHeight"},B6={column:"lastVisitedColumnIndex",row:"lastVisitedRowIndex"},nh=(e,n,s,l)=>{const[d,m,b]=[s[l],e[I2e[l]],s[B6[l]]];if(n>b){let r=0;if(b>=0){const E=d[b];r=E.offset+E.size}for(let E=b+1;E<=n;E++){const M=m(E);d[E]={offset:r,size:M},r+=M}s[B6[l]]=n}return d[n]},f9=(e,n,s,l,d,m)=>{for(;s<=l;){const b=s+h9((l-s)/2),r=nh(e,b,n,m).offset;if(r===d)return b;r<d?s=b+1:l=b-1}return Gb(0,s-1)},k2e=(e,n,s,l,d)=>{const m=d==="column"?e.totalColumn:e.totalRow;let b=1;for(;s<m&&nh(e,s,n,d).offset<l;)s+=b,b*=2;return f9(e,n,h9(s/2),d9(s,m-1),l,d)},OA=(e,n,s,l)=>{const[d,m]=[n[l],n[B6[l]]];return(m>0?d[m].offset:0)>=s?f9(e,n,0,m,s,l):k2e(e,n,Gb(0,m),s,l)},p9=({totalRow:e},{estimatedRowHeight:n,lastVisitedRowIndex:s,row:l})=>{let d=0;if(s>=e&&(s=e-1),s>=0){const r=l[s];d=r.offset+r.size}const b=(e-s-1)*n;return d+b},m9=({totalColumn:e},{column:n,estimatedColumnWidth:s,lastVisitedColumnIndex:l})=>{let d=0;if(l>e&&(l=e-1),l>=0){const r=n[l];d=r.offset+r.size}const b=(e-l-1)*s;return d+b},M2e={column:m9,row:p9},DA=(e,n,s,l,d,m,b)=>{const[r,E]=[m==="row"?e.height:e.width,M2e[m]],M=nh(e,n,d,m),A=E(e,d),P=Gb(0,d9(A-r,M.offset)),D=Gb(0,M.offset-r+b+M.size);switch(s===zx&&(l>=D-r&&l<=P+r?s=Iu:s=md),s){case Bv:return P;case Vv:return D;case md:return Math.round(D+(P-D)/2);case Iu:default:return l>=D&&l<=P?l:D>P||l<D?D:P}},A2e=c9({name:"ElDynamicSizeGrid",getColumnPosition:(e,n,s)=>{const l=nh(e,n,s,"column");return[l.size,l.offset]},getRowPosition:(e,n,s)=>{const l=nh(e,n,s,"row");return[l.size,l.offset]},getColumnOffset:(e,n,s,l,d,m)=>DA(e,n,s,l,d,"column",m),getRowOffset:(e,n,s,l,d,m)=>DA(e,n,s,l,d,"row",m),getColumnStartIndexForOffset:(e,n,s)=>OA(e,s,n,"column"),getColumnStopIndexForStartIndex:(e,n,s,l)=>{const d=nh(e,n,l,"column"),m=s+e.width;let b=d.offset+d.size,r=n;for(;r<e.totalColumn-1&&b<m;)r++,b+=nh(e,n,l,"column").size;return r},getEstimatedTotalHeight:p9,getEstimatedTotalWidth:m9,getRowStartIndexForOffset:(e,n,s)=>OA(e,s,n,"row"),getRowStopIndexForStartIndex:(e,n,s,l)=>{const{totalRow:d,height:m}=e,b=nh(e,n,l,"row"),r=s+m;let E=b.size+b.offset,M=n;for(;M<d-1&&E<r;)M++,E+=nh(e,M,l,"row").size;return M},injectToInstance:(e,n)=>{const s=({columnIndex:m,rowIndex:b},r)=>{var E,M;r=Li(r)?!0:r,gr(m)&&(n.value.lastVisitedColumnIndex=Math.min(n.value.lastVisitedColumnIndex,m-1)),gr(b)&&(n.value.lastVisitedRowIndex=Math.min(n.value.lastVisitedRowIndex,b-1)),(E=e.exposed)==null||E.getItemStyleCache.value(-1,null,null),r&&((M=e.proxy)==null||M.$forceUpdate())},l=(m,b)=>{s({columnIndex:m},b)},d=(m,b)=>{s({rowIndex:m},b)};Object.assign(e.proxy,{resetAfterColumnIndex:l,resetAfterRowIndex:d,resetAfter:s})},initCache:({estimatedColumnWidth:e=x6,estimatedRowHeight:n=x6})=>({column:{},estimatedColumnWidth:e,estimatedRowHeight:n,lastVisitedColumnIndex:-1,lastVisitedRowIndex:-1,row:{}}),clearCache:!1,validateProps:({columnWidth:e,rowHeight:n})=>{}}),R2e=c9({name:"ElFixedSizeGrid",getColumnPosition:({columnWidth:e},n)=>[e,n*e],getRowPosition:({rowHeight:e},n)=>[e,n*e],getEstimatedTotalHeight:({totalRow:e,rowHeight:n})=>n*e,getEstimatedTotalWidth:({totalColumn:e,columnWidth:n})=>n*e,getColumnOffset:({totalColumn:e,columnWidth:n,width:s},l,d,m,b,r)=>{s=Number(s);const E=Math.max(0,e*n-s),M=Math.min(E,l*n),A=Math.max(0,l*n-s+r+n);switch(d==="smart"&&(m>=A-s&&m<=M+s?d=Iu:d=md),d){case Bv:return M;case Vv:return A;case md:{const P=Math.round(A+(M-A)/2);return P<Math.ceil(s/2)?0:P>E+Math.floor(s/2)?E:P}case Iu:default:return m>=A&&m<=M?m:A>M||m<A?A:M}},getRowOffset:({rowHeight:e,height:n,totalRow:s},l,d,m,b,r)=>{n=Number(n);const E=Math.max(0,s*e-n),M=Math.min(E,l*e),A=Math.max(0,l*e-n+r+e);switch(d===zx&&(m>=A-n&&m<=M+n?d=Iu:d=md),d){case Bv:return M;case Vv:return A;case md:{const P=Math.round(A+(M-A)/2);return P<Math.ceil(n/2)?0:P>E+Math.floor(n/2)?E:P}case Iu:default:return m>=A&&m<=M?m:A>M||m<A?A:M}},getColumnStartIndexForOffset:({columnWidth:e,totalColumn:n},s)=>Math.max(0,Math.min(n-1,Math.floor(s/e))),getColumnStopIndexForStartIndex:({columnWidth:e,totalColumn:n,width:s},l,d)=>{const m=l*e,b=Math.ceil((s+d-m)/e);return Math.max(0,Math.min(n-1,l+b-1))},getRowStartIndexForOffset:({rowHeight:e,totalRow:n},s)=>Math.max(0,Math.min(n-1,Math.floor(s/e))),getRowStopIndexForStartIndex:({rowHeight:e,totalRow:n,height:s},l,d)=>{const m=l*e,b=Math.ceil((s+d-m)/e);return Math.max(0,Math.min(n-1,l+b-1))},initCache:()=>{},clearCache:!0,validateProps:({columnWidth:e,rowHeight:n})=>{}}),P2e="ElTableV2Grid",L2e=e=>{const n=Re(),s=Re(),l=Re(0),d=se(()=>{const{data:q,rowHeight:G,estimatedRowHeight:ie}=e;if(!ie)return q.length*G}),m=se(()=>{const{fixedData:q,rowHeight:G}=e;return(q?.length||0)*G}),b=se(()=>ib(e.headerHeight)),r=se(()=>{const{height:q}=e;return Math.max(0,q-w(b)-w(m))}),E=se(()=>w(b)+w(m)>0),M=({data:q,rowIndex:G})=>q[G][e.rowKey];function A({rowCacheStart:q,rowCacheEnd:G,rowVisibleStart:ie,rowVisibleEnd:W}){var Y;(Y=e.onRowsRendered)==null||Y.call(e,{rowCacheStart:q,rowCacheEnd:G,rowVisibleStart:ie,rowVisibleEnd:W})}function P(q,G){var ie;(ie=s.value)==null||ie.resetAfterRowIndex(q,G)}function D(q,G){const ie=w(n),W=w(s);Yr(q)?(ie?.scrollToLeft(q.scrollLeft),l.value=q.scrollLeft,W?.scrollTo(q)):(ie?.scrollToLeft(q),l.value=q,W?.scrollTo({scrollLeft:q,scrollTop:G}))}function z(q){var G;(G=w(s))==null||G.scrollTo({scrollTop:q})}function F(q,G){var ie;(ie=w(s))==null||ie.scrollToItem(q,1,G)}function N(){var q,G;(q=w(s))==null||q.$forceUpdate(),(G=w(n))==null||G.$forceUpdate()}return on(()=>e.bodyWidth,()=>{var q;gr(e.estimatedRowHeight)&&((q=s.value)==null||q.resetAfter({columnIndex:0},!1))}),{bodyRef:s,forceUpdate:N,fixedRowHeight:m,gridHeight:r,hasHeader:E,headerHeight:b,headerRef:n,totalHeight:d,itemKey:M,onItemRendered:A,resetAfterRowIndex:P,scrollTo:D,scrollToTop:z,scrollToRow:F,scrollLeft:l}},O2e=xe({name:P2e,props:sb,setup(e,{slots:n,expose:s}){const{ns:l}=Gn(V8),{bodyRef:d,fixedRowHeight:m,gridHeight:b,hasHeader:r,headerRef:E,headerHeight:M,totalHeight:A,forceUpdate:P,itemKey:D,onItemRendered:z,resetAfterRowIndex:F,scrollTo:N,scrollToTop:q,scrollToRow:G,scrollLeft:ie}=L2e(e);Ti("tableV2GridScrollLeft",ie),s({forceUpdate:P,totalHeight:A,scrollTo:N,scrollToTop:q,scrollToRow:G,resetAfterRowIndex:F});const W=()=>e.bodyWidth;return()=>{const{cache:Y,columns:J,data:re,fixedData:he,useIsScrolling:fe,scrollbarAlwaysOn:ce,scrollbarEndGap:me,scrollbarStartGap:we,style:ye,rowHeight:Ue,bodyWidth:Ne,estimatedRowHeight:Pe,headerWidth:ve,height:$e,width:Te,getRowHeight:Ae,onScroll:Ve}=e,We=gr(Pe),ft=We?A2e:R2e,at=w(M);return st("div",{role:"table",class:[l.e("table"),e.class],style:ye},[st(ft,{ref:d,data:re,useIsScrolling:fe,itemKey:D,columnCache:0,columnWidth:We?W:Ne,totalColumn:1,totalRow:re.length,rowCache:Y,rowHeight:We?Ae:Ue,width:Te,height:w(b),class:l.e("body"),role:"rowgroup",scrollbarStartGap:we,scrollbarEndGap:me,scrollbarAlwaysOn:ce,onScroll:Ve,onItemRendered:z,perfMode:!1},{default:ct=>{var Mt;const Ct=re[ct.rowIndex];return(Mt=n.row)==null?void 0:Mt.call(n,{...ct,columns:J,rowData:Ct})}}),w(r)&&st(E2e,{ref:E,class:l.e("header-wrapper"),columns:J,headerData:re,headerHeight:e.headerHeight,fixedHeaderData:he,rowWidth:ve,rowHeight:Ue,width:Te,height:Math.min(at+w(m),$e)},{dynamic:n.header,fixed:n.row})])}}});var U8=O2e;function D2e(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!qs(e)}const z2e=(e,{slots:n})=>{const{mainTableRef:s,...l}=e;return st(U8,pi({ref:s},l),D2e(n)?n:{default:()=>[n]})};var N2e=z2e;function F2e(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!qs(e)}const B2e=(e,{slots:n})=>{if(!e.columns.length)return;const{leftTableRef:s,...l}=e;return st(U8,pi({ref:s},l),F2e(n)?n:{default:()=>[n]})};var V2e=B2e;function $2e(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!qs(e)}const H2e=(e,{slots:n})=>{if(!e.columns.length)return;const{rightTableRef:s,...l}=e;return st(U8,pi({ref:s},l),$2e(n)?n:{default:()=>[n]})};var U2e=H2e;const j2e=e=>{const{isScrolling:n}=Gn(V8),s=Re(!1),l=Re(),d=se(()=>gr(e.estimatedRowHeight)&&e.rowIndex>=0),m=(E=!1)=>{const M=w(l);if(!M)return;const{columns:A,onRowHeightChange:P,rowKey:D,rowIndex:z,style:F}=e,{height:N}=M.getBoundingClientRect();s.value=!0,dr(()=>{if(E||N!==Number.parseInt(F.height)){const q=A[0],G=q?.placeholderSign===Gv;P?.({rowKey:D,height:N,rowIndex:z},q&&!G&&q.fixed)}})},b=se(()=>{const{rowData:E,rowIndex:M,rowKey:A,onRowHover:P}=e,D=e.rowEventHandlers||{},z={};return Object.entries(D).forEach(([F,N])=>{hr(N)&&(z[F]=q=>{N({event:q,rowData:E,rowIndex:M,rowKey:A})})}),P&&[{name:"onMouseleave",hovered:!1},{name:"onMouseenter",hovered:!0}].forEach(({name:F,hovered:N})=>{const q=z[F];z[F]=G=>{P({event:G,hovered:N,rowData:E,rowIndex:M,rowKey:A}),q?.(G)}}),z}),r=E=>{const{onRowExpand:M,rowData:A,rowIndex:P,rowKey:D}=e;M?.({expanded:E,rowData:A,rowIndex:P,rowKey:D})};return Zr(()=>{w(d)&&m(!0)}),{isScrolling:n,measurable:d,measured:s,rowRef:l,eventHandlers:b,onExpand:r}},G2e="ElTableV2TableRow",q2e=xe({name:G2e,props:Lp,setup(e,{expose:n,slots:s,attrs:l}){const{eventHandlers:d,isScrolling:m,measurable:b,measured:r,rowRef:E,onExpand:M}=j2e(e);return n({onExpand:M}),()=>{const{columns:A,columnsStyles:P,expandColumnKey:D,depth:z,rowData:F,rowIndex:N,style:q}=e;let G=A.map((ie,W)=>{const Y=mn(F.children)&&F.children.length>0&&ie.key===D;return s.cell({column:ie,columns:A,columnIndex:W,depth:z,style:P[ie.key],rowData:F,rowIndex:N,isScrolling:w(m),expandIconProps:Y?{rowData:F,rowIndex:N,onExpand:M}:void 0})});if(s.row&&(G=s.row({cells:G.map(ie=>mn(ie)&&ie.length===1?ie[0]:ie),style:q,columns:A,depth:z,rowData:F,rowIndex:N,isScrolling:w(m)})),w(b)){const{height:ie,...W}=q||{},Y=w(r);return st("div",pi({ref:E,class:e.class,style:Y?q:W,role:"row"},l,w(d)),[G])}return st("div",pi(l,{ref:E,class:e.class,style:q,role:"row"},w(d)),[G])}}});var W2e=q2e;function K2e(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!qs(e)}const Y2e=(e,{slots:n})=>{const{columns:s,columnsStyles:l,depthMap:d,expandColumnKey:m,expandedRowKeys:b,estimatedRowHeight:r,hasFixedColumns:E,rowData:M,rowIndex:A,style:P,isScrolling:D,rowProps:z,rowClass:F,rowKey:N,rowEventHandlers:q,ns:G,onRowHovered:ie,onRowExpanded:W}=e,Y=qp(F,{columns:s,rowData:M,rowIndex:A},""),J=qp(z,{columns:s,rowData:M,rowIndex:A}),re=M[N],he=d[re]||0,fe=!!m,ce=A<0,me=[G.e("row"),Y,{[G.e(`row-depth-${he}`)]:fe&&A>=0,[G.is("expanded")]:fe&&b.includes(re),[G.is("fixed")]:!he&&ce,[G.is("customized")]:!!n.row}],we=E?ie:void 0,ye={...J,columns:s,columnsStyles:l,class:me,depth:he,expandColumnKey:m,estimatedRowHeight:ce?void 0:r,isScrolling:D,rowIndex:A,rowData:M,rowKey:re,rowEventHandlers:q,style:P};return st(W2e,pi(ye,{onRowExpand:W,onMouseenter:Pe=>{we?.({hovered:!0,rowKey:re,event:Pe,rowData:M,rowIndex:A})},onMouseleave:Pe=>{we?.({hovered:!1,rowKey:re,event:Pe,rowData:M,rowIndex:A})},rowkey:re}),K2e(n)?n:{default:()=>[n]})};var Z2e=Y2e;const j8=(e,{slots:n})=>{var s;const{cellData:l,style:d}=e,m=((s=l?.toString)==null?void 0:s.call(l))||"",b=It(n,"default",e,()=>[m]);return st("div",{class:e.class,title:m,style:d},[b])};j8.displayName="ElTableV2Cell";j8.inheritAttrs=!1;var X2e=j8;const J2e=e=>{const{expanded:n,expandable:s,onExpand:l,style:d,size:m}=e,b={onClick:s?()=>l(!n):void 0,class:e.class};return st(rr,pi(b,{size:m,style:d}),{default:()=>[st(il,null,null)]})};var Q2e=J2e;const g9=({columns:e,column:n,columnIndex:s,depth:l,expandIconProps:d,isScrolling:m,rowData:b,rowIndex:r,style:E,expandedRowKeys:M,ns:A,cellProps:P,expandColumnKey:D,indentSize:z,iconSize:F,rowKey:N},{slots:q})=>{const G=vf(E);if(n.placeholderSign===Gv)return st("div",{class:A.em("row-cell","placeholder"),style:G},null);const{cellRenderer:ie,dataKey:W,dataGetter:Y}=n,J=hr(Y)?Y({columns:e,column:n,columnIndex:s,rowData:b,rowIndex:r}):To(b,W??""),re=qp(P,{cellData:J,columns:e,column:n,columnIndex:s,rowIndex:r,rowData:b}),he={class:A.e("cell-text"),columns:e,column:n,columnIndex:s,cellData:J,isScrolling:m,rowData:b,rowIndex:r},fe=o9(ie),ce=fe?fe(he):It(q,"default",he,()=>[st(X2e,he,null)]),me=[A.e("row-cell"),n.class,n.align===jv.CENTER&&A.is("align-center"),n.align===jv.RIGHT&&A.is("align-right")],we=r>=0&&D&&n.key===D,ye=r>=0&&M.includes(b[N]);let Ue;const Ne=`margin-inline-start: ${l*z}px;`;return we&&(Yr(d)?Ue=st(Q2e,pi(d,{class:[A.e("expand-icon"),A.is("expanded",ye)],size:F,expanded:ye,style:Ne,expandable:!0}),null):Ue=st("div",{style:[Ne,`width: ${F}px; height: ${F}px;`].join(" ")},null)),st("div",pi({class:me,style:G},re,{role:"cell"}),[Ue,ce])};g9.inheritAttrs=!1;var zA=g9;const ebe=bn({class:String,columns:dy,columnsStyles:{type:wt(Object),required:!0},headerIndex:Number,style:{type:wt(Object)}}),tbe=xe({name:"ElTableV2HeaderRow",props:ebe,setup(e,{slots:n}){return()=>{const{columns:s,columnsStyles:l,headerIndex:d,style:m}=e;let b=s.map((r,E)=>n.cell({columns:s,column:r,columnIndex:E,headerIndex:d,style:l[r.key]}));return n.header&&(b=n.header({cells:b.map(r=>mn(r)&&r.length===1?r[0]:r),columns:s,headerIndex:d})),st("div",{class:e.class,style:m,role:"row"},[b])}}});var nbe=tbe;function rbe(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!qs(e)}const ibe=({columns:e,columnsStyles:n,headerIndex:s,style:l,headerClass:d,headerProps:m,ns:b},{slots:r})=>{const E={columns:e,headerIndex:s},M=[b.e("header-row"),qp(d,E,""),{[b.is("customized")]:!!r.header}],A={...qp(m,E),columnsStyles:n,class:M,columns:e,headerIndex:s,style:l};return st(nbe,A,rbe(r)?r:{default:()=>[r]})};var sbe=ibe;const G8=(e,{slots:n})=>It(n,"default",e,()=>{var s,l;return[st("div",{class:e.class,title:(s=e.column)==null?void 0:s.title},[(l=e.column)==null?void 0:l.title])]});G8.displayName="ElTableV2HeaderCell";G8.inheritAttrs=!1;var obe=G8;const abe=e=>{const{sortOrder:n}=e;return st(rr,{size:14,class:e.class},{default:()=>[n===Uv.ASC?st(SO,null,null):st(wO,null,null)]})};var lbe=abe;const ube=(e,{slots:n})=>{const{column:s,ns:l,style:d,onColumnSorted:m}=e,b=vf(d);if(s.placeholderSign===Gv)return st("div",{class:l.em("header-row-cell","placeholder"),style:b},null);const{headerCellRenderer:r,headerClass:E,sortable:M}=s,A={...e,class:l.e("header-cell-text")},P=o9(r),D=P?P(A):It(n,"default",A,()=>[st(obe,A,null)]),{sortBy:z,sortState:F,headerCellProps:N}=e;let q,G;if(F){const Y=F[s.key];q=!!F6[Y],G=q?Y:Uv.ASC}else q=s.key===z.key,G=q?z.order:Uv.ASC;const ie=[l.e("header-cell"),qp(E,e,""),s.align===jv.CENTER&&l.is("align-center"),s.align===jv.RIGHT&&l.is("align-right"),M&&l.is("sortable")],W={...qp(N,e),onClick:s.sortable?m:void 0,class:ie,style:b,"data-key":s.key};return st("div",pi(W,{role:"columnheader"}),[D,M&&st(lbe,{class:[l.e("sort-icon"),q&&l.is("sorting")],sortOrder:G},null)])};var NA=ube;const _9=(e,{slots:n})=>{var s;return st("div",{class:e.class,style:e.style},[(s=n.default)==null?void 0:s.call(n)])};_9.displayName="ElTableV2Footer";var cbe=_9;const v9=(e,{slots:n})=>{const s=It(n,"default",{},()=>[st(hz,null,null)]);return st("div",{class:e.class,style:e.style},[s])};v9.displayName="ElTableV2Empty";var dbe=v9;const y9=(e,{slots:n})=>{var s;return st("div",{class:e.class,style:e.style},[(s=n.default)==null?void 0:s.call(n)])};y9.displayName="ElTableV2Overlay";var hbe=y9;function Y_(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!qs(e)}const fbe="ElTableV2",pbe=xe({name:fbe,props:w2e,setup(e,{slots:n,expose:s}){const l=dn("table-v2"),{columnsStyles:d,fixedColumnsOnLeft:m,fixedColumnsOnRight:b,mainColumns:r,mainTableHeight:E,fixedTableHeight:M,leftTableWidth:A,rightTableWidth:P,data:D,depthMap:z,expandedRowKeys:F,hasFixedColumns:N,mainTableRef:q,leftTableRef:G,rightTableRef:ie,isDynamic:W,isResetting:Y,isScrolling:J,bodyWidth:re,emptyStyle:he,rootStyle:fe,headerWidth:ce,footerHeight:me,showEmpty:we,scrollTo:ye,scrollToLeft:Ue,scrollToTop:Ne,scrollToRow:Pe,getRowHeight:ve,onColumnSorted:$e,onRowHeightChange:Te,onRowHovered:Ae,onRowExpanded:Ve,onRowsRendered:We,onScroll:ft,onVerticalScroll:at}=b2e(e);return s({scrollTo:ye,scrollToLeft:Ue,scrollToTop:Ne,scrollToRow:Pe}),Ti(V8,{ns:l,isResetting:Y,isScrolling:J}),()=>{const{cache:ct,cellProps:Mt,estimatedRowHeight:Ct,expandColumnKey:gt,fixedData:Ke,headerHeight:Lt,headerClass:xn,headerProps:Ht,headerCellProps:le,sortBy:nt,sortState:Gt,rowHeight:an,rowClass:Qt,rowEventHandlers:Zt,rowKey:rn,rowProps:bt,scrollbarAlwaysOn:fn,indentSize:pn,iconSize:Vn,useIsScrolling:Nn,vScrollbarSize:Ot,width:Bn}=e,Sr=w(D),Ur={cache:ct,class:l.e("main"),columns:w(r),data:Sr,fixedData:Ke,estimatedRowHeight:Ct,bodyWidth:w(re)+Ot,headerHeight:Lt,headerWidth:w(ce),height:w(E),mainTableRef:q,rowKey:rn,rowHeight:an,scrollbarAlwaysOn:fn,scrollbarStartGap:2,scrollbarEndGap:Ot,useIsScrolling:Nn,width:Bn,getRowHeight:ve,onRowsRendered:We,onScroll:ft},Kn=w(A),ui=w(M),wr={cache:ct,class:l.e("left"),columns:w(m),data:Sr,fixedData:Ke,estimatedRowHeight:Ct,leftTableRef:G,rowHeight:an,bodyWidth:Kn,headerWidth:Kn,headerHeight:Lt,height:ui,rowKey:rn,scrollbarAlwaysOn:fn,scrollbarStartGap:2,scrollbarEndGap:Ot,useIsScrolling:Nn,width:Kn,getRowHeight:ve,onScroll:at},pr=w(P)+Ot,Fr={cache:ct,class:l.e("right"),columns:w(b),data:Sr,fixedData:Ke,estimatedRowHeight:Ct,rightTableRef:ie,rowHeight:an,bodyWidth:pr,headerWidth:pr,headerHeight:Lt,height:ui,rowKey:rn,scrollbarAlwaysOn:fn,scrollbarStartGap:2,scrollbarEndGap:Ot,width:pr,style:`--${w(l.namespace)}-table-scrollbar-size: ${Ot}px`,useIsScrolling:Nn,getRowHeight:ve,onScroll:at},vt=w(d),yt={ns:l,depthMap:w(z),columnsStyles:vt,expandColumnKey:gt,expandedRowKeys:w(F),estimatedRowHeight:Ct,hasFixedColumns:w(N),rowProps:bt,rowClass:Qt,rowKey:rn,rowEventHandlers:Zt,onRowHovered:Ae,onRowExpanded:Ve,onRowHeightChange:Te},it={cellProps:Mt,expandColumnKey:gt,indentSize:pn,iconSize:Vn,rowKey:rn,expandedRowKeys:w(F),ns:l},ln={ns:l,headerClass:xn,headerProps:Ht,columnsStyles:vt},Xn={ns:l,sortBy:nt,sortState:Gt,headerCellProps:le,onColumnSorted:$e},vr={row:Qs=>st(Z2e,pi(Qs,yt),{row:n.row,cell:Xs=>{let ks;return n.cell?st(zA,pi(Xs,it,{style:vt[Xs.column.key]}),Y_(ks=n.cell(Xs))?ks:{default:()=>[ks]}):st(zA,pi(Xs,it,{style:vt[Xs.column.key]}),null)}}),header:Qs=>st(sbe,pi(Qs,ln),{header:n.header,cell:Xs=>{let ks;return n["header-cell"]?st(NA,pi(Xs,Xn,{style:vt[Xs.column.key]}),Y_(ks=n["header-cell"](Xs))?ks:{default:()=>[ks]}):st(NA,pi(Xs,Xn,{style:vt[Xs.column.key]}),null)}})},Ii=[e.class,l.b(),l.e("root"),{[l.is("dynamic")]:w(W)}],ds={class:l.e("footer"),style:w(me)};return st("div",{class:Ii,style:w(fe)},[st(N2e,Ur,Y_(vr)?vr:{default:()=>[vr]}),st(V2e,wr,Y_(vr)?vr:{default:()=>[vr]}),st(U2e,Fr,Y_(vr)?vr:{default:()=>[vr]}),n.footer&&st(cbe,ds,{default:n.footer}),w(we)&&st(dbe,{class:l.e("empty"),style:w(he)},{default:n.empty}),n.overlay&&st(hbe,{class:l.e("overlay")},{default:n.overlay})])}}});var mbe=pbe;const gbe=bn({disableWidth:Boolean,disableHeight:Boolean,onResize:{type:wt(Function)}}),_be=e=>{const n=Re(),s=Re(0),l=Re(0);let d;return Zr(()=>{d=so(n,([m])=>{const{width:b,height:r}=m.contentRect,{paddingLeft:E,paddingRight:M,paddingTop:A,paddingBottom:P}=getComputedStyle(m.target),D=Number.parseInt(E)||0,z=Number.parseInt(M)||0,F=Number.parseInt(A)||0,N=Number.parseInt(P)||0;s.value=b-D-z,l.value=r-F-N}).stop}),Ls(()=>{d?.()}),on([s,l],([m,b])=>{var r;(r=e.onResize)==null||r.call(e,{width:m,height:b})}),{sizer:n,width:s,height:l}},vbe=xe({name:"ElAutoResizer",props:gbe,setup(e,{slots:n}){const s=dn("auto-resizer"),{height:l,width:d,sizer:m}=_be(e),b={width:"100%",height:"100%"};return()=>{var r;return st("div",{ref:m,class:s.b(),style:b},[(r=n.default)==null?void 0:r.call(n,{height:l.value,width:d.value})])}}});var ybe=vbe;const bbe=Gr(mbe),xbe=Gr(ybe),Nx=Symbol("tabsRootContextKey"),wbe=bn({tabs:{type:wt(Array),default:()=>oo([])}}),b9="ElTabBar",Sbe=xe({name:b9}),Cbe=xe({...Sbe,props:wbe,setup(e,{expose:n}){const s=e,l=oi(),d=Gn(Nx);d||No(b9,"<el-tabs><el-tab-bar /></el-tabs>");const m=dn("tabs"),b=Re(),r=Re(),E=()=>{let z=0,F=0;const N=["top","bottom"].includes(d.props.tabPosition)?"width":"height",q=N==="width"?"x":"y",G=q==="x"?"left":"top";return s.tabs.every(ie=>{var W,Y;const J=(Y=(W=l.parent)==null?void 0:W.refs)==null?void 0:Y[`tab-${ie.uid}`];if(!J)return!1;if(!ie.active)return!0;z=J[`offset${fd(G)}`],F=J[`client${fd(N)}`];const re=window.getComputedStyle(J);return N==="width"&&(F-=Number.parseFloat(re.paddingLeft)+Number.parseFloat(re.paddingRight),z+=Number.parseFloat(re.paddingLeft)),!1}),{[N]:`${F}px`,transform:`translate${fd(q)}(${z}px)`}},M=()=>r.value=E(),A=[],P=()=>{var z;A.forEach(N=>N.stop()),A.length=0;const F=(z=l.parent)==null?void 0:z.refs;if(F){for(const N in F)if(N.startsWith("tab-")){const q=F[N];q&&A.push(so(q,M))}}};on(()=>s.tabs,async()=>{await dr(),M(),P()},{immediate:!0});const D=so(b,()=>M());return Ls(()=>{A.forEach(z=>z.stop()),A.length=0,D.stop()}),n({ref:b,update:M}),(z,F)=>(Z(),ue("div",{ref_key:"barRef",ref:b,class:ge([w(m).e("active-bar"),w(m).is(w(d).props.tabPosition)]),style:fr(r.value)},null,6))}});var Ebe=En(Cbe,[["__file","tab-bar.vue"]]);const Tbe=bn({panes:{type:wt(Array),default:()=>oo([])},currentName:{type:[String,Number],default:""},editable:Boolean,type:{type:String,values:["card","border-card",""],default:""},stretch:Boolean}),Ibe={tabClick:(e,n,s)=>s instanceof Event,tabRemove:(e,n)=>n instanceof Event},FA="ElTabNav",kbe=xe({name:FA,props:Tbe,emits:Ibe,setup(e,{expose:n,emit:s}){const l=Gn(Nx);l||No(FA,"<el-tabs><tab-nav /></el-tabs>");const d=dn("tabs"),m=qK(),b=iY(),r=Re(),E=Re(),M=Re(),A=Re(),P=Re(!1),D=Re(0),z=Re(!1),F=Re(!0),N=se(()=>["top","bottom"].includes(l.props.tabPosition)?"width":"height"),q=se(()=>({transform:`translate${N.value==="width"?"X":"Y"}(-${D.value}px)`})),G=()=>{if(!r.value)return;const fe=r.value[`offset${fd(N.value)}`],ce=D.value;if(!ce)return;const me=ce>fe?ce-fe:0;D.value=me},ie=()=>{if(!r.value||!E.value)return;const fe=E.value[`offset${fd(N.value)}`],ce=r.value[`offset${fd(N.value)}`],me=D.value;if(fe-me<=ce)return;const we=fe-me>ce*2?me+ce:fe-ce;D.value=we},W=async()=>{const fe=E.value;if(!P.value||!M.value||!r.value||!fe)return;await dr();const ce=M.value.querySelector(".is-active");if(!ce)return;const me=r.value,we=["top","bottom"].includes(l.props.tabPosition),ye=ce.getBoundingClientRect(),Ue=me.getBoundingClientRect(),Ne=we?fe.offsetWidth-Ue.width:fe.offsetHeight-Ue.height,Pe=D.value;let ve=Pe;we?(ye.left<Ue.left&&(ve=Pe-(Ue.left-ye.left)),ye.right>Ue.right&&(ve=Pe+ye.right-Ue.right)):(ye.top<Ue.top&&(ve=Pe-(Ue.top-ye.top)),ye.bottom>Ue.bottom&&(ve=Pe+(ye.bottom-Ue.bottom))),ve=Math.max(ve,0),D.value=Math.min(ve,Ne)},Y=()=>{var fe;if(!E.value||!r.value)return;e.stretch&&((fe=A.value)==null||fe.update());const ce=E.value[`offset${fd(N.value)}`],me=r.value[`offset${fd(N.value)}`],we=D.value;me<ce?(P.value=P.value||{},P.value.prev=we,P.value.next=we+me<ce,ce-we<me&&(D.value=ce-me)):(P.value=!1,we>0&&(D.value=0))},J=fe=>{let ce=0;switch(fe.code){case Un.left:case Un.up:ce=-1;break;case Un.right:case Un.down:ce=1;break;default:return}const me=Array.from(fe.currentTarget.querySelectorAll("[role=tab]:not(.is-disabled)"));let ye=me.indexOf(fe.target)+ce;ye<0?ye=me.length-1:ye>=me.length&&(ye=0),me[ye].focus({preventScroll:!0}),me[ye].click(),re()},re=()=>{F.value&&(z.value=!0)},he=()=>z.value=!1;return on(m,fe=>{fe==="hidden"?F.value=!1:fe==="visible"&&setTimeout(()=>F.value=!0,50)}),on(b,fe=>{fe?setTimeout(()=>F.value=!0,50):F.value=!1}),so(M,Y),Zr(()=>setTimeout(()=>W(),0)),yc(()=>Y()),n({scrollToActiveTab:W,removeFocus:he}),()=>{const fe=P.value?[st("span",{class:[d.e("nav-prev"),d.is("disabled",!P.value.prev)],onClick:G},[st(rr,null,{default:()=>[st(ph,null,null)]})]),st("span",{class:[d.e("nav-next"),d.is("disabled",!P.value.next)],onClick:ie},[st(rr,null,{default:()=>[st(il,null,null)]})])]:null,ce=e.panes.map((me,we)=>{var ye,Ue,Ne,Pe;const ve=me.uid,$e=me.props.disabled,Te=(Ue=(ye=me.props.name)!=null?ye:me.index)!=null?Ue:`${we}`,Ae=!$e&&(me.isClosable||e.editable);me.index=`${we}`;const Ve=Ae?st(rr,{class:"is-icon-close",onClick:at=>s("tabRemove",me,at)},{default:()=>[st(du,null,null)]}):null,We=((Pe=(Ne=me.slots).label)==null?void 0:Pe.call(Ne))||me.props.label,ft=!$e&&me.active?0:-1;return st("div",{ref:`tab-${ve}`,class:[d.e("item"),d.is(l.props.tabPosition),d.is("active",me.active),d.is("disabled",$e),d.is("closable",Ae),d.is("focus",z.value)],id:`tab-${Te}`,key:`tab-${ve}`,"aria-controls":`pane-${Te}`,role:"tab","aria-selected":me.active,tabindex:ft,onFocus:()=>re(),onBlur:()=>he(),onClick:at=>{he(),s("tabClick",me,Te,at)},onKeydown:at=>{Ae&&(at.code===Un.delete||at.code===Un.backspace)&&s("tabRemove",me,at)}},[We,Ve])});return st("div",{ref:M,class:[d.e("nav-wrap"),d.is("scrollable",!!P.value),d.is(l.props.tabPosition)]},[fe,st("div",{class:d.e("nav-scroll"),ref:r},[st("div",{class:[d.e("nav"),d.is(l.props.tabPosition),d.is("stretch",e.stretch&&["top","bottom"].includes(l.props.tabPosition))],ref:E,style:q.value,role:"tablist",onKeydown:J},[e.type?null:st(Ebe,{ref:A,tabs:[...e.panes]},null),ce])])])}}}),Mbe=bn({type:{type:String,values:["card","border-card",""],default:""},closable:Boolean,addable:Boolean,modelValue:{type:[String,Number]},editable:Boolean,tabPosition:{type:String,values:["top","right","bottom","left"],default:"top"},beforeLeave:{type:wt(Function),default:()=>!0},stretch:Boolean}),v4=e=>ir(e)||gr(e),Abe={[Nr]:e=>v4(e),tabClick:(e,n)=>n instanceof Event,tabChange:e=>v4(e),edit:(e,n)=>["remove","add"].includes(n),tabRemove:e=>v4(e),tabAdd:()=>!0},Rbe=xe({name:"ElTabs",props:Mbe,emits:Abe,setup(e,{emit:n,slots:s,expose:l}){var d;const m=dn("tabs"),b=se(()=>["left","right"].includes(e.tabPosition)),{children:r,addChild:E,removeChild:M}=c8(oi(),"ElTabPane"),A=Re(),P=Re((d=e.modelValue)!=null?d:"0"),D=async(G,ie=!1)=>{var W,Y;if(!(P.value===G||Li(G)))try{let J;if(e.beforeLeave){const re=e.beforeLeave(G,P.value);J=re instanceof Promise?await re:re}else J=!0;J!==!1&&(P.value=G,ie&&(n(Nr,G),n("tabChange",G)),(Y=(W=A.value)==null?void 0:W.removeFocus)==null||Y.call(W))}catch{}},z=(G,ie,W)=>{G.props.disabled||(n("tabClick",G,W),D(ie,!0))},F=(G,ie)=>{G.props.disabled||Li(G.props.name)||(ie.stopPropagation(),n("edit",G.props.name,"remove"),n("tabRemove",G.props.name))},N=()=>{n("edit",void 0,"add"),n("tabAdd")};on(()=>e.modelValue,G=>D(G)),on(P,async()=>{var G;await dr(),(G=A.value)==null||G.scrollToActiveTab()}),Ti(Nx,{props:e,currentName:P,registerPane:G=>{r.value.push(G)},sortPane:E,unregisterPane:M}),l({currentName:P});const q=({render:G})=>G();return()=>{const G=s["add-icon"],ie=e.editable||e.addable?st("div",{class:[m.e("new-tab"),b.value&&m.e("new-tab-vertical")],tabindex:"0",onClick:N,onKeydown:J=>{[Un.enter,Un.numpadEnter].includes(J.code)&&N()}},[G?It(s,"add-icon"):st(rr,{class:m.is("icon-plus")},{default:()=>[st(jS,null,null)]})]):null,W=st("div",{class:[m.e("header"),b.value&&m.e("header-vertical"),m.is(e.tabPosition)]},[st(q,{render:()=>{const J=r.value.some(re=>re.slots.label);return st(kbe,{ref:A,currentName:P.value,editable:e.editable,type:e.type,panes:r.value,stretch:e.stretch,onTabClick:z,onTabRemove:F},{$stable:!J})}},null),ie]),Y=st("div",{class:m.e("content")},[It(s,"default")]);return st("div",{class:[m.b(),m.m(e.tabPosition),{[m.m("card")]:e.type==="card",[m.m("border-card")]:e.type==="border-card"}]},[Y,W])}}});var Pbe=Rbe;const Lbe=bn({label:{type:String,default:""},name:{type:[String,Number]},closable:Boolean,disabled:Boolean,lazy:Boolean}),x9="ElTabPane",Obe=xe({name:x9}),Dbe=xe({...Obe,props:Lbe,setup(e){const n=e,s=oi(),l=qo(),d=Gn(Nx);d||No(x9,"usage: <el-tabs><el-tab-pane /></el-tabs/>");const m=dn("tab-pane"),b=Re(),r=se(()=>n.closable||d.props.closable),E=kb(()=>{var z;return d.currentName.value===((z=n.name)!=null?z:b.value)}),M=Re(E.value),A=se(()=>{var z;return(z=n.name)!=null?z:b.value}),P=kb(()=>!n.lazy||M.value||E.value);on(E,z=>{z&&(M.value=!0)});const D=ts({uid:s.uid,slots:l,props:n,paneName:A,active:E,index:b,isClosable:r});return d.registerPane(D),Zr(()=>{d.sortPane(D)}),Mf(()=>{d.unregisterPane(D.uid)}),(z,F)=>w(P)?Wr((Z(),ue("div",{key:0,id:`pane-${w(A)}`,class:ge(w(m).b()),role:"tabpanel","aria-hidden":!w(E),"aria-labelledby":`tab-${w(A)}`},[It(z.$slots,"default")],10,["id","aria-hidden","aria-labelledby"])),[[Ki,w(E)]]):At("v-if",!0)}});var w9=En(Dbe,[["__file","tab-pane.vue"]]);const zbe=Gr(Pbe,{TabPane:w9}),Nbe=ao(w9),Fbe=bn({type:{type:String,values:["primary","success","info","warning","danger",""],default:""},size:{type:String,values:Cd,default:""},truncated:Boolean,lineClamp:{type:[String,Number]},tag:{type:String,default:"span"}}),Bbe=xe({name:"ElText"}),Vbe=xe({...Bbe,props:Fbe,setup(e){const n=e,s=Re(),l=Lo(),d=dn("text"),m=se(()=>[d.b(),d.m(n.type),d.m(l.value),d.is("truncated",n.truncated),d.is("line-clamp",!Li(n.lineClamp))]),b=wh().title,r=()=>{var E,M,A,P,D;if(b)return;let z=!1;const F=((E=s.value)==null?void 0:E.textContent)||"";if(n.truncated){const N=(M=s.value)==null?void 0:M.offsetWidth,q=(A=s.value)==null?void 0:A.scrollWidth;N&&q&&q>N&&(z=!0)}else if(!Li(n.lineClamp)){const N=(P=s.value)==null?void 0:P.offsetHeight,q=(D=s.value)==null?void 0:D.scrollHeight;N&&q&&q>N&&(z=!0)}z?s.value.setAttribute("title",F):s.value.removeAttribute("title")};return Zr(r),yc(r),(E,M)=>(Z(),Bt(si(E.tag),{ref_key:"textRef",ref:s,class:ge(w(m)),style:fr({"-webkit-line-clamp":E.lineClamp})},{default:mt(()=>[It(E.$slots,"default")]),_:3},8,["class","style"]))}});var $be=En(Vbe,[["__file","text.vue"]]);const q8=Gr($be),Hbe=bn({format:{type:String,default:"HH:mm"},modelValue:String,disabled:Boolean,editable:{type:Boolean,default:!0},effect:{type:wt(String),default:"light"},clearable:{type:Boolean,default:!0},size:Fo,placeholder:String,start:{type:String,default:"09:00"},end:{type:String,default:"18:00"},step:{type:String,default:"00:30"},minTime:String,maxTime:String,includeEndTime:{type:Boolean,default:!1},name:String,prefixIcon:{type:wt([String,Object]),default:()=>US},clearIcon:{type:wt([String,Object]),default:()=>Td},...c0}),oh=e=>{const n=(e||"").split(":");if(n.length>=2){let s=Number.parseInt(n[0],10);const l=Number.parseInt(n[1],10),d=e.toUpperCase();return d.includes("AM")&&s===12?s=0:d.includes("PM")&&s!==12&&(s+=12),{hours:s,minutes:l}}return null},y4=(e,n)=>{const s=oh(e);if(!s)return-1;const l=oh(n);if(!l)return-1;const d=s.minutes+s.hours*60,m=l.minutes+l.hours*60;return d===m?0:d>m?1:-1},BA=e=>`${e}`.padStart(2,"0"),pg=e=>`${BA(e.hours)}:${BA(e.minutes)}`,Ube=(e,n)=>{const s=oh(e);if(!s)return"";const l=oh(n);if(!l)return"";const d={hours:s.hours,minutes:s.minutes};return d.minutes+=l.minutes,d.hours+=l.hours,d.hours+=Math.floor(d.minutes/60),d.minutes=d.minutes%60,pg(d)},jbe=xe({name:"ElTimeSelect"}),Gbe=xe({...jbe,props:Hbe,emits:[mi,"blur","focus","clear",Nr],setup(e,{expose:n}){const s=e;jr.extend(p8);const{Option:l}=Gp,d=dn("input"),m=Re(),b=Ba(),{lang:r}=Oi(),E=se(()=>s.modelValue),M=se(()=>{const G=oh(s.start);return G?pg(G):null}),A=se(()=>{const G=oh(s.end);return G?pg(G):null}),P=se(()=>{const G=oh(s.step);return G?pg(G):null}),D=se(()=>{const G=oh(s.minTime||"");return G?pg(G):null}),z=se(()=>{const G=oh(s.maxTime||"");return G?pg(G):null}),F=se(()=>{var G;const ie=[],W=(Y,J)=>{ie.push({value:Y,disabled:y4(J,D.value||"-1:-1")<=0||y4(J,z.value||"100:100")>=0})};if(s.start&&s.end&&s.step){let Y=M.value,J;for(;Y&&A.value&&y4(Y,A.value)<=0;)J=jr(Y,"HH:mm").locale(r.value).format(s.format),W(J,Y),Y=Ube(Y,P.value);if(s.includeEndTime&&A.value&&((G=ie[ie.length-1])==null?void 0:G.value)!==A.value){const re=jr(A.value,"HH:mm").locale(r.value).format(s.format);W(re,A.value)}}return ie});return n({blur:()=>{var G,ie;(ie=(G=m.value)==null?void 0:G.blur)==null||ie.call(G)},focus:()=>{var G,ie;(ie=(G=m.value)==null?void 0:G.focus)==null||ie.call(G)}}),(G,ie)=>(Z(),Bt(w(Gp),{ref_key:"select",ref:m,"model-value":w(E),disabled:w(b),clearable:G.clearable,"clear-icon":G.clearIcon,size:G.size,effect:G.effect,placeholder:G.placeholder,"default-first-option":"",filterable:G.editable,"empty-values":G.emptyValues,"value-on-clear":G.valueOnClear,"onUpdate:modelValue":W=>G.$emit(w(Nr),W),onChange:W=>G.$emit(w(mi),W),onBlur:W=>G.$emit("blur",W),onFocus:W=>G.$emit("focus",W),onClear:()=>G.$emit("clear")},{prefix:mt(()=>[G.prefixIcon?(Z(),Bt(w(rr),{key:0,class:ge(w(d).e("prefix-icon"))},{default:mt(()=>[(Z(),Bt(si(G.prefixIcon)))]),_:1},8,["class"])):At("v-if",!0)]),default:mt(()=>[(Z(!0),ue(cr,null,Ei(w(F),W=>(Z(),Bt(w(l),{key:W.value,label:W.value,value:W.value,disabled:W.disabled},null,8,["label","value","disabled"]))),128))]),_:1},8,["model-value","disabled","clearable","clear-icon","size","effect","placeholder","filterable","empty-values","value-on-clear","onUpdate:modelValue","onChange","onBlur","onFocus","onClear"]))}});var qbe=En(Gbe,[["__file","time-select.vue"]]);const Wbe=Gr(qbe),Kbe=xe({name:"ElTimeline",setup(e,{slots:n}){const s=dn("timeline");return Ti("timeline",n),()=>xr("ul",{class:[s.b()]},[It(n,"default")])}}),Ybe=bn({timestamp:{type:String,default:""},hideTimestamp:Boolean,center:Boolean,placement:{type:String,values:["top","bottom"],default:"bottom"},type:{type:String,values:["primary","success","warning","danger","info"],default:""},color:{type:String,default:""},size:{type:String,values:["normal","large"],default:"normal"},icon:{type:bs},hollow:Boolean}),Zbe=xe({name:"ElTimelineItem"}),Xbe=xe({...Zbe,props:Ybe,setup(e){const n=e,s=dn("timeline-item"),l=se(()=>[s.e("node"),s.em("node",n.size||""),s.em("node",n.type||""),s.is("hollow",n.hollow)]);return(d,m)=>(Z(),ue("li",{class:ge([w(s).b(),{[w(s).e("center")]:d.center}])},[ae("div",{class:ge(w(s).e("tail"))},null,2),d.$slots.dot?At("v-if",!0):(Z(),ue("div",{key:0,class:ge(w(l)),style:fr({backgroundColor:d.color})},[d.icon?(Z(),Bt(w(rr),{key:0,class:ge(w(s).e("icon"))},{default:mt(()=>[(Z(),Bt(si(d.icon)))]),_:1},8,["class"])):At("v-if",!0)],6)),d.$slots.dot?(Z(),ue("div",{key:1,class:ge(w(s).e("dot"))},[It(d.$slots,"dot")],2)):At("v-if",!0),ae("div",{class:ge(w(s).e("wrapper"))},[!d.hideTimestamp&&d.placement==="top"?(Z(),ue("div",{key:0,class:ge([w(s).e("timestamp"),w(s).is("top")])},gn(d.timestamp),3)):At("v-if",!0),ae("div",{class:ge(w(s).e("content"))},[It(d.$slots,"default")],2),!d.hideTimestamp&&d.placement==="bottom"?(Z(),ue("div",{key:1,class:ge([w(s).e("timestamp"),w(s).is("bottom")])},gn(d.timestamp),3)):At("v-if",!0)],2)],2))}});var S9=En(Xbe,[["__file","timeline-item.vue"]]);const Jbe=Gr(Kbe,{TimelineItem:S9}),Qbe=ao(S9),C9=bn({nowrap:Boolean});var E9=(e=>(e.top="top",e.bottom="bottom",e.left="left",e.right="right",e))(E9||{});const exe=Object.values(E9),W8=bn({width:{type:Number,default:10},height:{type:Number,default:10},style:{type:wt(Object),default:null}}),txe=bn({side:{type:wt(String),values:exe,required:!0}}),nxe=["absolute","fixed"],rxe=["top-start","top-end","top","bottom-start","bottom-end","bottom","left-start","left-end","left","right-start","right-end","right"],K8=bn({arrowPadding:{type:wt(Number),default:5},effect:{type:wt(String),default:"light"},contentClass:String,placement:{type:wt(String),values:rxe,default:"bottom"},reference:{type:wt(Object),default:null},offset:{type:Number,default:8},strategy:{type:wt(String),values:nxe,default:"absolute"},showArrow:Boolean,...Ta(["ariaLabel"])}),Y8=bn({delayDuration:{type:Number,default:300},defaultOpen:Boolean,open:{type:Boolean,default:void 0},onOpenChange:{type:wt(Function)},"onUpdate:open":{type:wt(Function)}}),ug={type:wt(Function)},Z8=bn({onBlur:ug,onClick:ug,onFocus:ug,onMouseDown:ug,onMouseEnter:ug,onMouseLeave:ug}),ixe=bn({...Y8,...W8,...Z8,...K8,alwaysOn:Boolean,fullTransition:Boolean,transitionProps:{type:wt(Object),default:null},teleported:Boolean,to:{type:wt(String),default:"body"}}),Fx=Symbol("tooltipV2"),T9=Symbol("tooltipV2Content"),b4="tooltip_v2.open",sxe=xe({name:"ElTooltipV2Root"}),oxe=xe({...sxe,props:Y8,setup(e,{expose:n}){const s=e,l=Re(s.defaultOpen),d=Re(null),m=se({get:()=>Mu(s.open)?l.value:s.open,set:q=>{var G;l.value=q,(G=s["onUpdate:open"])==null||G.call(s,q)}}),b=se(()=>gr(s.delayDuration)&&s.delayDuration>0),{start:r,stop:E}=Up(()=>{m.value=!0},se(()=>s.delayDuration),{immediate:!1}),M=dn("tooltip-v2"),A=Ea(),P=()=>{E(),m.value=!0},D=()=>{w(b)?r():P()},z=P,F=()=>{E(),m.value=!1};return on(m,q=>{var G;q&&(document.dispatchEvent(new CustomEvent(b4)),z()),(G=s.onOpenChange)==null||G.call(s,q)}),Zr(()=>{document.addEventListener(b4,F)}),Ls(()=>{E(),document.removeEventListener(b4,F)}),Ti(Fx,{contentId:A,triggerRef:d,ns:M,onClose:F,onDelayOpen:D,onOpen:z}),n({onOpen:z,onClose:F}),(q,G)=>It(q.$slots,"default",{open:w(m)})}});var axe=En(oxe,[["__file","root.vue"]]);const lxe=xe({name:"ElTooltipV2Arrow"}),uxe=xe({...lxe,props:{...W8,...txe},setup(e){const n=e,{ns:s}=Gn(Fx),{arrowRef:l}=Gn(T9),d=se(()=>{const{style:m,width:b,height:r}=n,E=s.namespace.value;return{[`--${E}-tooltip-v2-arrow-width`]:`${b}px`,[`--${E}-tooltip-v2-arrow-height`]:`${r}px`,[`--${E}-tooltip-v2-arrow-border-width`]:`${b/2}px`,[`--${E}-tooltip-v2-arrow-cover-width`]:b/2-1,...m||{}}});return(m,b)=>(Z(),ue("span",{ref_key:"arrowRef",ref:l,style:fr(w(d)),class:ge(w(s).e("arrow"))},null,6))}});var VA=En(uxe,[["__file","arrow.vue"]]);const Jg=Math.min,Bp=Math.max,qb=Math.round,I2=Math.floor,_d=e=>({x:e,y:e}),cxe={left:"right",right:"left",bottom:"top",top:"bottom"},dxe={start:"end",end:"start"};function V6(e,n,s){return Bp(e,Jg(n,s))}function hy(e,n){return typeof e=="function"?e(n):e}function Wp(e){return e.split("-")[0]}function fy(e){return e.split("-")[1]}function I9(e){return e==="x"?"y":"x"}function X8(e){return e==="y"?"height":"width"}const hxe=new Set(["top","bottom"]);function yf(e){return hxe.has(Wp(e))?"y":"x"}function J8(e){return I9(yf(e))}function fxe(e,n,s){s===void 0&&(s=!1);const l=fy(e),d=J8(e),m=X8(d);let b=d==="x"?l===(s?"end":"start")?"right":"left":l==="start"?"bottom":"top";return n.reference[m]>n.floating[m]&&(b=Wb(b)),[b,Wb(b)]}function pxe(e){const n=Wb(e);return[$6(e),n,$6(n)]}function $6(e){return e.replace(/start|end/g,n=>dxe[n])}const $A=["left","right"],HA=["right","left"],mxe=["top","bottom"],gxe=["bottom","top"];function _xe(e,n,s){switch(e){case"top":case"bottom":return s?n?HA:$A:n?$A:HA;case"left":case"right":return n?mxe:gxe;default:return[]}}function vxe(e,n,s,l){const d=fy(e);let m=_xe(Wp(e),s==="start",l);return d&&(m=m.map(b=>b+"-"+d),n&&(m=m.concat(m.map($6)))),m}function Wb(e){return e.replace(/left|right|bottom|top/g,n=>cxe[n])}function yxe(e){return{top:0,right:0,bottom:0,left:0,...e}}function k9(e){return typeof e!="number"?yxe(e):{top:e,right:e,bottom:e,left:e}}function Kb(e){const{x:n,y:s,width:l,height:d}=e;return{width:l,height:d,top:s,left:n,right:n+l,bottom:s+d,x:n,y:s}}function UA(e,n,s){let{reference:l,floating:d}=e;const m=yf(n),b=J8(n),r=X8(b),E=Wp(n),M=m==="y",A=l.x+l.width/2-d.width/2,P=l.y+l.height/2-d.height/2,D=l[r]/2-d[r]/2;let z;switch(E){case"top":z={x:A,y:l.y-d.height};break;case"bottom":z={x:A,y:l.y+l.height};break;case"right":z={x:l.x+l.width,y:P};break;case"left":z={x:l.x-d.width,y:P};break;default:z={x:l.x,y:l.y}}switch(fy(n)){case"start":z[b]-=D*(s&&M?-1:1);break;case"end":z[b]+=D*(s&&M?-1:1);break}return z}const bxe=async(e,n,s)=>{const{placement:l="bottom",strategy:d="absolute",middleware:m=[],platform:b}=s,r=m.filter(Boolean),E=await(b.isRTL==null?void 0:b.isRTL(n));let M=await b.getElementRects({reference:e,floating:n,strategy:d}),{x:A,y:P}=UA(M,l,E),D=l,z={},F=0;for(let N=0;N<r.length;N++){const{name:q,fn:G}=r[N],{x:ie,y:W,data:Y,reset:J}=await G({x:A,y:P,initialPlacement:l,placement:D,strategy:d,middlewareData:z,rects:M,platform:b,elements:{reference:e,floating:n}});A=ie??A,P=W??P,z={...z,[q]:{...z[q],...Y}},J&&F<=50&&(F++,typeof J=="object"&&(J.placement&&(D=J.placement),J.rects&&(M=J.rects===!0?await b.getElementRects({reference:e,floating:n,strategy:d}):J.rects),{x:A,y:P}=UA(M,D,E)),N=-1)}return{x:A,y:P,placement:D,strategy:d,middlewareData:z}};async function Q8(e,n){var s;n===void 0&&(n={});const{x:l,y:d,platform:m,rects:b,elements:r,strategy:E}=e,{boundary:M="clippingAncestors",rootBoundary:A="viewport",elementContext:P="floating",altBoundary:D=!1,padding:z=0}=hy(n,e),F=k9(z),q=r[D?P==="floating"?"reference":"floating":P],G=Kb(await m.getClippingRect({element:(s=await(m.isElement==null?void 0:m.isElement(q)))==null||s?q:q.contextElement||await(m.getDocumentElement==null?void 0:m.getDocumentElement(r.floating)),boundary:M,rootBoundary:A,strategy:E})),ie=P==="floating"?{x:l,y:d,width:b.floating.width,height:b.floating.height}:b.reference,W=await(m.getOffsetParent==null?void 0:m.getOffsetParent(r.floating)),Y=await(m.isElement==null?void 0:m.isElement(W))?await(m.getScale==null?void 0:m.getScale(W))||{x:1,y:1}:{x:1,y:1},J=Kb(m.convertOffsetParentRelativeRectToViewportRelativeRect?await m.convertOffsetParentRelativeRectToViewportRelativeRect({elements:r,rect:ie,offsetParent:W,strategy:E}):ie);return{top:(G.top-J.top+F.top)/Y.y,bottom:(J.bottom-G.bottom+F.bottom)/Y.y,left:(G.left-J.left+F.left)/Y.x,right:(J.right-G.right+F.right)/Y.x}}const xxe=e=>({name:"arrow",options:e,async fn(n){const{x:s,y:l,placement:d,rects:m,platform:b,elements:r,middlewareData:E}=n,{element:M,padding:A=0}=hy(e,n)||{};if(M==null)return{};const P=k9(A),D={x:s,y:l},z=J8(d),F=X8(z),N=await b.getDimensions(M),q=z==="y",G=q?"top":"left",ie=q?"bottom":"right",W=q?"clientHeight":"clientWidth",Y=m.reference[F]+m.reference[z]-D[z]-m.floating[F],J=D[z]-m.reference[z],re=await(b.getOffsetParent==null?void 0:b.getOffsetParent(M));let he=re?re[W]:0;(!he||!await(b.isElement==null?void 0:b.isElement(re)))&&(he=r.floating[W]||m.floating[F]);const fe=Y/2-J/2,ce=he/2-N[F]/2-1,me=Jg(P[G],ce),we=Jg(P[ie],ce),ye=me,Ue=he-N[F]-we,Ne=he/2-N[F]/2+fe,Pe=V6(ye,Ne,Ue),ve=!E.arrow&&fy(d)!=null&&Ne!==Pe&&m.reference[F]/2-(Ne<ye?me:we)-N[F]/2<0,$e=ve?Ne<ye?Ne-ye:Ne-Ue:0;return{[z]:D[z]+$e,data:{[z]:Pe,centerOffset:Ne-Pe-$e,...ve&&{alignmentOffset:$e}},reset:ve}}}),wxe=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(n){var s,l;const{placement:d,middlewareData:m,rects:b,initialPlacement:r,platform:E,elements:M}=n,{mainAxis:A=!0,crossAxis:P=!0,fallbackPlacements:D,fallbackStrategy:z="bestFit",fallbackAxisSideDirection:F="none",flipAlignment:N=!0,...q}=hy(e,n);if((s=m.arrow)!=null&&s.alignmentOffset)return{};const G=Wp(d),ie=yf(r),W=Wp(r)===r,Y=await(E.isRTL==null?void 0:E.isRTL(M.floating)),J=D||(W||!N?[Wb(r)]:pxe(r)),re=F!=="none";!D&&re&&J.push(...vxe(r,N,F,Y));const he=[r,...J],fe=await Q8(n,q),ce=[];let me=((l=m.flip)==null?void 0:l.overflows)||[];if(A&&ce.push(fe[G]),P){const Ne=fxe(d,b,Y);ce.push(fe[Ne[0]],fe[Ne[1]])}if(me=[...me,{placement:d,overflows:ce}],!ce.every(Ne=>Ne<=0)){var we,ye;const Ne=(((we=m.flip)==null?void 0:we.index)||0)+1,Pe=he[Ne];if(Pe&&(!(P==="alignment"?ie!==yf(Pe):!1)||me.every(Te=>Te.overflows[0]>0&&yf(Te.placement)===ie)))return{data:{index:Ne,overflows:me},reset:{placement:Pe}};let ve=(ye=me.filter($e=>$e.overflows[0]<=0).sort(($e,Te)=>$e.overflows[1]-Te.overflows[1])[0])==null?void 0:ye.placement;if(!ve)switch(z){case"bestFit":{var Ue;const $e=(Ue=me.filter(Te=>{if(re){const Ae=yf(Te.placement);return Ae===ie||Ae==="y"}return!0}).map(Te=>[Te.placement,Te.overflows.filter(Ae=>Ae>0).reduce((Ae,Ve)=>Ae+Ve,0)]).sort((Te,Ae)=>Te[1]-Ae[1])[0])==null?void 0:Ue[0];$e&&(ve=$e);break}case"initialPlacement":ve=r;break}if(d!==ve)return{reset:{placement:ve}}}return{}}}},Sxe=new Set(["left","top"]);async function Cxe(e,n){const{placement:s,platform:l,elements:d}=e,m=await(l.isRTL==null?void 0:l.isRTL(d.floating)),b=Wp(s),r=fy(s),E=yf(s)==="y",M=Sxe.has(b)?-1:1,A=m&&E?-1:1,P=hy(n,e);let{mainAxis:D,crossAxis:z,alignmentAxis:F}=typeof P=="number"?{mainAxis:P,crossAxis:0,alignmentAxis:null}:{mainAxis:P.mainAxis||0,crossAxis:P.crossAxis||0,alignmentAxis:P.alignmentAxis};return r&&typeof F=="number"&&(z=r==="end"?F*-1:F),E?{x:z*A,y:D*M}:{x:D*M,y:z*A}}const Exe=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(n){var s,l;const{x:d,y:m,placement:b,middlewareData:r}=n,E=await Cxe(n,e);return b===((s=r.offset)==null?void 0:s.placement)&&(l=r.arrow)!=null&&l.alignmentOffset?{}:{x:d+E.x,y:m+E.y,data:{...E,placement:b}}}}},Txe=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(n){const{x:s,y:l,placement:d}=n,{mainAxis:m=!0,crossAxis:b=!1,limiter:r={fn:q=>{let{x:G,y:ie}=q;return{x:G,y:ie}}},...E}=hy(e,n),M={x:s,y:l},A=await Q8(n,E),P=yf(Wp(d)),D=I9(P);let z=M[D],F=M[P];if(m){const q=D==="y"?"top":"left",G=D==="y"?"bottom":"right",ie=z+A[q],W=z-A[G];z=V6(ie,z,W)}if(b){const q=P==="y"?"top":"left",G=P==="y"?"bottom":"right",ie=F+A[q],W=F-A[G];F=V6(ie,F,W)}const N=r.fn({...n,[D]:z,[P]:F});return{...N,data:{x:N.x-s,y:N.y-l,enabled:{[D]:m,[P]:b}}}}}};function Bx(){return typeof window<"u"}function g0(e){return M9(e)?(e.nodeName||"").toLowerCase():"#document"}function uu(e){var n;return(e==null||(n=e.ownerDocument)==null?void 0:n.defaultView)||window}function kd(e){var n;return(n=(M9(e)?e.ownerDocument:e.document)||window.document)==null?void 0:n.documentElement}function M9(e){return Bx()?e instanceof Node||e instanceof uu(e).Node:!1}function _c(e){return Bx()?e instanceof Element||e instanceof uu(e).Element:!1}function Sd(e){return Bx()?e instanceof HTMLElement||e instanceof uu(e).HTMLElement:!1}function jA(e){return!Bx()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof uu(e).ShadowRoot}const Ixe=new Set(["inline","contents"]);function py(e){const{overflow:n,overflowX:s,overflowY:l,display:d}=vc(e);return/auto|scroll|overlay|hidden|clip/.test(n+l+s)&&!Ixe.has(d)}const kxe=new Set(["table","td","th"]);function Mxe(e){return kxe.has(g0(e))}const Axe=[":popover-open",":modal"];function Vx(e){return Axe.some(n=>{try{return e.matches(n)}catch{return!1}})}const Rxe=["transform","translate","scale","rotate","perspective"],Pxe=["transform","translate","scale","rotate","perspective","filter"],Lxe=["paint","layout","strict","content"];function eC(e){const n=tC(),s=_c(e)?vc(e):e;return Rxe.some(l=>s[l]?s[l]!=="none":!1)||(s.containerType?s.containerType!=="normal":!1)||!n&&(s.backdropFilter?s.backdropFilter!=="none":!1)||!n&&(s.filter?s.filter!=="none":!1)||Pxe.some(l=>(s.willChange||"").includes(l))||Lxe.some(l=>(s.contain||"").includes(l))}function Oxe(e){let n=kf(e);for(;Sd(n)&&!Qg(n);){if(eC(n))return n;if(Vx(n))return null;n=kf(n)}return null}function tC(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const Dxe=new Set(["html","body","#document"]);function Qg(e){return Dxe.has(g0(e))}function vc(e){return uu(e).getComputedStyle(e)}function $x(e){return _c(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function kf(e){if(g0(e)==="html")return e;const n=e.assignedSlot||e.parentNode||jA(e)&&e.host||kd(e);return jA(n)?n.host:n}function A9(e){const n=kf(e);return Qg(n)?e.ownerDocument?e.ownerDocument.body:e.body:Sd(n)&&py(n)?n:A9(n)}function qv(e,n,s){var l;n===void 0&&(n=[]),s===void 0&&(s=!0);const d=A9(e),m=d===((l=e.ownerDocument)==null?void 0:l.body),b=uu(d);if(m){const r=H6(b);return n.concat(b,b.visualViewport||[],py(d)?d:[],r&&s?qv(r):[])}return n.concat(d,qv(d,[],s))}function H6(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function R9(e){const n=vc(e);let s=parseFloat(n.width)||0,l=parseFloat(n.height)||0;const d=Sd(e),m=d?e.offsetWidth:s,b=d?e.offsetHeight:l,r=qb(s)!==m||qb(l)!==b;return r&&(s=m,l=b),{width:s,height:l,$:r}}function nC(e){return _c(e)?e:e.contextElement}function Rg(e){const n=nC(e);if(!Sd(n))return _d(1);const s=n.getBoundingClientRect(),{width:l,height:d,$:m}=R9(n);let b=(m?qb(s.width):s.width)/l,r=(m?qb(s.height):s.height)/d;return(!b||!Number.isFinite(b))&&(b=1),(!r||!Number.isFinite(r))&&(r=1),{x:b,y:r}}const zxe=_d(0);function P9(e){const n=uu(e);return!tC()||!n.visualViewport?zxe:{x:n.visualViewport.offsetLeft,y:n.visualViewport.offsetTop}}function Nxe(e,n,s){return n===void 0&&(n=!1),!s||n&&s!==uu(e)?!1:n}function Kp(e,n,s,l){n===void 0&&(n=!1),s===void 0&&(s=!1);const d=e.getBoundingClientRect(),m=nC(e);let b=_d(1);n&&(l?_c(l)&&(b=Rg(l)):b=Rg(e));const r=Nxe(m,s,l)?P9(m):_d(0);let E=(d.left+r.x)/b.x,M=(d.top+r.y)/b.y,A=d.width/b.x,P=d.height/b.y;if(m){const D=uu(m),z=l&&_c(l)?uu(l):l;let F=D,N=H6(F);for(;N&&l&&z!==F;){const q=Rg(N),G=N.getBoundingClientRect(),ie=vc(N),W=G.left+(N.clientLeft+parseFloat(ie.paddingLeft))*q.x,Y=G.top+(N.clientTop+parseFloat(ie.paddingTop))*q.y;E*=q.x,M*=q.y,A*=q.x,P*=q.y,E+=W,M+=Y,F=uu(N),N=H6(F)}}return Kb({width:A,height:P,x:E,y:M})}function rC(e,n){const s=$x(e).scrollLeft;return n?n.left+s:Kp(kd(e)).left+s}function L9(e,n,s){s===void 0&&(s=!1);const l=e.getBoundingClientRect(),d=l.left+n.scrollLeft-(s?0:rC(e,l)),m=l.top+n.scrollTop;return{x:d,y:m}}function Fxe(e){let{elements:n,rect:s,offsetParent:l,strategy:d}=e;const m=d==="fixed",b=kd(l),r=n?Vx(n.floating):!1;if(l===b||r&&m)return s;let E={scrollLeft:0,scrollTop:0},M=_d(1);const A=_d(0),P=Sd(l);if((P||!P&&!m)&&((g0(l)!=="body"||py(b))&&(E=$x(l)),Sd(l))){const z=Kp(l);M=Rg(l),A.x=z.x+l.clientLeft,A.y=z.y+l.clientTop}const D=b&&!P&&!m?L9(b,E,!0):_d(0);return{width:s.width*M.x,height:s.height*M.y,x:s.x*M.x-E.scrollLeft*M.x+A.x+D.x,y:s.y*M.y-E.scrollTop*M.y+A.y+D.y}}function Bxe(e){return Array.from(e.getClientRects())}function Vxe(e){const n=kd(e),s=$x(e),l=e.ownerDocument.body,d=Bp(n.scrollWidth,n.clientWidth,l.scrollWidth,l.clientWidth),m=Bp(n.scrollHeight,n.clientHeight,l.scrollHeight,l.clientHeight);let b=-s.scrollLeft+rC(e);const r=-s.scrollTop;return vc(l).direction==="rtl"&&(b+=Bp(n.clientWidth,l.clientWidth)-d),{width:d,height:m,x:b,y:r}}function $xe(e,n){const s=uu(e),l=kd(e),d=s.visualViewport;let m=l.clientWidth,b=l.clientHeight,r=0,E=0;if(d){m=d.width,b=d.height;const M=tC();(!M||M&&n==="fixed")&&(r=d.offsetLeft,E=d.offsetTop)}return{width:m,height:b,x:r,y:E}}const Hxe=new Set(["absolute","fixed"]);function Uxe(e,n){const s=Kp(e,!0,n==="fixed"),l=s.top+e.clientTop,d=s.left+e.clientLeft,m=Sd(e)?Rg(e):_d(1),b=e.clientWidth*m.x,r=e.clientHeight*m.y,E=d*m.x,M=l*m.y;return{width:b,height:r,x:E,y:M}}function GA(e,n,s){let l;if(n==="viewport")l=$xe(e,s);else if(n==="document")l=Vxe(kd(e));else if(_c(n))l=Uxe(n,s);else{const d=P9(e);l={x:n.x-d.x,y:n.y-d.y,width:n.width,height:n.height}}return Kb(l)}function O9(e,n){const s=kf(e);return s===n||!_c(s)||Qg(s)?!1:vc(s).position==="fixed"||O9(s,n)}function jxe(e,n){const s=n.get(e);if(s)return s;let l=qv(e,[],!1).filter(r=>_c(r)&&g0(r)!=="body"),d=null;const m=vc(e).position==="fixed";let b=m?kf(e):e;for(;_c(b)&&!Qg(b);){const r=vc(b),E=eC(b);!E&&r.position==="fixed"&&(d=null),(m?!E&&!d:!E&&r.position==="static"&&!!d&&Hxe.has(d.position)||py(b)&&!E&&O9(e,b))?l=l.filter(A=>A!==b):d=r,b=kf(b)}return n.set(e,l),l}function Gxe(e){let{element:n,boundary:s,rootBoundary:l,strategy:d}=e;const b=[...s==="clippingAncestors"?Vx(n)?[]:jxe(n,this._c):[].concat(s),l],r=b[0],E=b.reduce((M,A)=>{const P=GA(n,A,d);return M.top=Bp(P.top,M.top),M.right=Jg(P.right,M.right),M.bottom=Jg(P.bottom,M.bottom),M.left=Bp(P.left,M.left),M},GA(n,r,d));return{width:E.right-E.left,height:E.bottom-E.top,x:E.left,y:E.top}}function qxe(e){const{width:n,height:s}=R9(e);return{width:n,height:s}}function Wxe(e,n,s){const l=Sd(n),d=kd(n),m=s==="fixed",b=Kp(e,!0,m,n);let r={scrollLeft:0,scrollTop:0};const E=_d(0);function M(){E.x=rC(d)}if(l||!l&&!m)if((g0(n)!=="body"||py(d))&&(r=$x(n)),l){const z=Kp(n,!0,m,n);E.x=z.x+n.clientLeft,E.y=z.y+n.clientTop}else d&&M();m&&!l&&d&&M();const A=d&&!l&&!m?L9(d,r):_d(0),P=b.left+r.scrollLeft-E.x-A.x,D=b.top+r.scrollTop-E.y-A.y;return{x:P,y:D,width:b.width,height:b.height}}function x4(e){return vc(e).position==="static"}function qA(e,n){if(!Sd(e)||vc(e).position==="fixed")return null;if(n)return n(e);let s=e.offsetParent;return kd(e)===s&&(s=s.ownerDocument.body),s}function D9(e,n){const s=uu(e);if(Vx(e))return s;if(!Sd(e)){let d=kf(e);for(;d&&!Qg(d);){if(_c(d)&&!x4(d))return d;d=kf(d)}return s}let l=qA(e,n);for(;l&&Mxe(l)&&x4(l);)l=qA(l,n);return l&&Qg(l)&&x4(l)&&!eC(l)?s:l||Oxe(e)||s}const Kxe=async function(e){const n=this.getOffsetParent||D9,s=this.getDimensions,l=await s(e.floating);return{reference:Wxe(e.reference,await n(e.floating),e.strategy),floating:{x:0,y:0,width:l.width,height:l.height}}};function Yxe(e){return vc(e).direction==="rtl"}const Zxe={convertOffsetParentRelativeRectToViewportRelativeRect:Fxe,getDocumentElement:kd,getClippingRect:Gxe,getOffsetParent:D9,getElementRects:Kxe,getClientRects:Bxe,getDimensions:qxe,getScale:Rg,isElement:_c,isRTL:Yxe};function z9(e,n){return e.x===n.x&&e.y===n.y&&e.width===n.width&&e.height===n.height}function Xxe(e,n){let s=null,l;const d=kd(e);function m(){var r;clearTimeout(l),(r=s)==null||r.disconnect(),s=null}function b(r,E){r===void 0&&(r=!1),E===void 0&&(E=1),m();const M=e.getBoundingClientRect(),{left:A,top:P,width:D,height:z}=M;if(r||n(),!D||!z)return;const F=I2(P),N=I2(d.clientWidth-(A+D)),q=I2(d.clientHeight-(P+z)),G=I2(A),W={rootMargin:-F+"px "+-N+"px "+-q+"px "+-G+"px",threshold:Bp(0,Jg(1,E))||1};let Y=!0;function J(re){const he=re[0].intersectionRatio;if(he!==E){if(!Y)return b();he?b(!1,he):l=setTimeout(()=>{b(!1,1e-7)},1e3)}he===1&&!z9(M,e.getBoundingClientRect())&&b(),Y=!1}try{s=new IntersectionObserver(J,{...W,root:d.ownerDocument})}catch{s=new IntersectionObserver(J,W)}s.observe(e)}return b(!0),m}function Jxe(e,n,s,l){l===void 0&&(l={});const{ancestorScroll:d=!0,ancestorResize:m=!0,elementResize:b=typeof ResizeObserver=="function",layoutShift:r=typeof IntersectionObserver=="function",animationFrame:E=!1}=l,M=nC(e),A=d||m?[...M?qv(M):[],...qv(n)]:[];A.forEach(G=>{d&&G.addEventListener("scroll",s,{passive:!0}),m&&G.addEventListener("resize",s)});const P=M&&r?Xxe(M,s):null;let D=-1,z=null;b&&(z=new ResizeObserver(G=>{let[ie]=G;ie&&ie.target===M&&z&&(z.unobserve(n),cancelAnimationFrame(D),D=requestAnimationFrame(()=>{var W;(W=z)==null||W.observe(n)})),s()}),M&&!E&&z.observe(M),z.observe(n));let F,N=E?Kp(e):null;E&&q();function q(){const G=Kp(e);N&&!z9(N,G)&&s(),N=G,F=requestAnimationFrame(q)}return s(),()=>{var G;A.forEach(ie=>{d&&ie.removeEventListener("scroll",s),m&&ie.removeEventListener("resize",s)}),P?.(),(G=z)==null||G.disconnect(),z=null,E&&cancelAnimationFrame(F)}}const Qxe=Q8,N9=Exe,ewe=Txe,twe=wxe,F9=xxe,B9=(e,n,s)=>{const l=new Map,d={platform:Zxe,...s},m={...d.platform,_c:l};return bxe(e,n,{...d,platform:m})},nwe=bn({style:{type:wt([String,Object,Array]),default:()=>({})}}),rwe=xe({name:"ElVisuallyHidden"}),iwe=xe({...rwe,props:nwe,setup(e){const n=e,s=se(()=>[n.style,{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}]);return(l,d)=>(Z(),ue("span",pi(l.$attrs,{style:w(s)}),[It(l.$slots,"default")],16))}});var swe=En(iwe,[["__file","visual-hidden.vue"]]);bn({});const owe=e=>{if(!Pi)return;if(!e)return e;const n=bl(e);return n||(Hs(e)?n:e)},awe=({middleware:e,placement:n,strategy:s})=>{const l=Re(),d=Re(),m=Re(),b=Re(),r=Re({}),E={x:m,y:b,placement:n,strategy:s,middlewareData:r},M=async()=>{if(!Pi)return;const A=owe(l),P=bl(d);if(!A||!P)return;const D=await B9(A,P,{placement:w(n),strategy:w(s),middleware:w(e)});$g(E).forEach(z=>{E[z].value=D[z]})};return Zr(()=>{Da(()=>{M()})}),{...E,update:M,referenceRef:l,contentRef:d}},lwe=({arrowRef:e,padding:n})=>({name:"arrow",options:{element:e,padding:n},fn(s){const l=w(e);return l?F9({element:l,padding:n}).fn(s):{}}}),uwe=xe({name:"ElTooltipV2Content"}),cwe=xe({...uwe,props:{...K8,...C9},setup(e){const n=e,{triggerRef:s,contentId:l}=Gn(Fx),d=Re(n.placement),m=Re(n.strategy),b=Re(null),{referenceRef:r,contentRef:E,middlewareData:M,x:A,y:P,update:D}=awe({placement:d,strategy:m,middleware:se(()=>{const W=[N9(n.offset)];return n.showArrow&&W.push(lwe({arrowRef:b})),W})}),z=u0().nextZIndex(),F=dn("tooltip-v2"),N=se(()=>d.value.split("-")[0]),q=se(()=>({position:w(m),top:`${w(P)||0}px`,left:`${w(A)||0}px`,zIndex:z})),G=se(()=>{if(!n.showArrow)return{};const{arrow:W}=w(M);return{[`--${F.namespace.value}-tooltip-v2-arrow-x`]:`${W?.x}px`||"",[`--${F.namespace.value}-tooltip-v2-arrow-y`]:`${W?.y}px`||""}}),ie=se(()=>[F.e("content"),F.is("dark",n.effect==="dark"),F.is(w(m)),n.contentClass]);return on(b,()=>D()),on(()=>n.placement,W=>d.value=W),Zr(()=>{on(()=>n.reference||s.value,W=>{r.value=W||void 0},{immediate:!0})}),Ti(T9,{arrowRef:b}),(W,Y)=>(Z(),ue("div",{ref_key:"contentRef",ref:E,style:fr(w(q)),"data-tooltip-v2-root":""},[W.nowrap?At("v-if",!0):(Z(),ue("div",{key:0,"data-side":w(N),class:ge(w(ie))},[It(W.$slots,"default",{contentStyle:w(q),contentClass:w(ie)}),st(w(swe),{id:w(l),role:"tooltip"},{default:mt(()=>[W.ariaLabel?(Z(),ue(cr,{key:0},[ei(gn(W.ariaLabel),1)],64)):It(W.$slots,"default",{key:1})]),_:3},8,["id"]),It(W.$slots,"arrow",{style:fr(w(G)),side:w(N)})],10,["data-side"]))],4))}});var WA=En(cwe,[["__file","content.vue"]]);const dwe=bn({setRef:{type:wt(Function),required:!0},onlyChild:Boolean});var hwe=xe({props:dwe,setup(e,{slots:n}){const s=Re(),l=Lx(s,d=>{d?e.setRef(d.nextElementSibling):e.setRef(null)});return()=>{var d;const[m]=((d=n.default)==null?void 0:d.call(n))||[],b=e.onlyChild?cce(m.children):m.children;return st(cr,{ref:l},[b])}}});const fwe=xe({name:"ElTooltipV2Trigger"}),pwe=xe({...fwe,props:{...C9,...Z8},setup(e){const n=e,{onClose:s,onOpen:l,onDelayOpen:d,triggerRef:m,contentId:b}=Gn(Fx);let r=!1;const E=ie=>{m.value=ie},M=()=>{r=!1},A=_o(n.onMouseEnter,d),P=_o(n.onMouseLeave,s),D=_o(n.onMouseDown,()=>{s(),r=!0,document.addEventListener("mouseup",M,{once:!0})}),z=_o(n.onFocus,()=>{r||l()}),F=_o(n.onBlur,s),N=_o(n.onClick,ie=>{ie.detail===0&&s()}),q={blur:F,click:N,focus:z,mousedown:D,mouseenter:A,mouseleave:P},G=(ie,W,Y)=>{ie&&Object.entries(W).forEach(([J,re])=>{ie[Y](J,re)})};return on(m,(ie,W)=>{G(ie,q,"addEventListener"),G(W,q,"removeEventListener"),ie&&ie.setAttribute("aria-describedby",b.value)}),Ls(()=>{G(m.value,q,"removeEventListener"),document.removeEventListener("mouseup",M)}),(ie,W)=>ie.nowrap?(Z(),Bt(w(hwe),{key:0,"set-ref":E,"only-child":""},{default:mt(()=>[It(ie.$slots,"default")]),_:3})):(Z(),ue("button",pi({key:1,ref_key:"triggerRef",ref:m},ie.$attrs),[It(ie.$slots,"default")],16))}});var mwe=En(pwe,[["__file","trigger.vue"]]);const gwe=xe({name:"ElTooltipV2"}),_we=xe({...gwe,props:ixe,setup(e){const s=da(e),l=ts(cc(s,Object.keys(W8))),d=ts(cc(s,Object.keys(K8))),m=ts(cc(s,Object.keys(Y8))),b=ts(cc(s,Object.keys(Z8)));return(r,E)=>(Z(),Bt(axe,iu(vd(m)),{default:mt(({open:M})=>[st(mwe,pi(b,{nowrap:""}),{default:mt(()=>[It(r.$slots,"trigger")]),_:3},16),st(w(f0),{to:r.to,disabled:!r.teleported},{default:mt(()=>[r.fullTransition?(Z(),Bt(ha,iu(pi({key:0},r.transitionProps)),{default:mt(()=>[r.alwaysOn||M?(Z(),Bt(WA,iu(pi({key:0},d)),{arrow:mt(({style:A,side:P})=>[r.showArrow?(Z(),Bt(VA,pi({key:0},l,{style:A,side:P}),null,16,["style","side"])):At("v-if",!0)]),default:mt(()=>[It(r.$slots,"default")]),_:3},16)):At("v-if",!0)]),_:2},1040)):(Z(),ue(cr,{key:1},[r.alwaysOn||M?(Z(),Bt(WA,iu(pi({key:0},d)),{arrow:mt(({style:A,side:P})=>[r.showArrow?(Z(),Bt(VA,pi({key:0},l,{style:A,side:P}),null,16,["style","side"])):At("v-if",!0)]),default:mt(()=>[It(r.$slots,"default")]),_:3},16)):At("v-if",!0)],64))]),_:2},1032,["to","disabled"])]),_:3},16))}});var vwe=En(_we,[["__file","tooltip.vue"]]);const ywe=Gr(vwe),V9="left-check-change",$9="right-check-change",mg=bn({data:{type:wt(Array),default:()=>[]},titles:{type:wt(Array),default:()=>[]},buttonTexts:{type:wt(Array),default:()=>[]},filterPlaceholder:String,filterMethod:{type:wt(Function)},leftDefaultChecked:{type:wt(Array),default:()=>[]},rightDefaultChecked:{type:wt(Array),default:()=>[]},renderContent:{type:wt(Function)},modelValue:{type:wt(Array),default:()=>[]},format:{type:wt(Object),default:()=>({})},filterable:Boolean,props:{type:wt(Object),default:()=>oo({label:"label",key:"key",disabled:"disabled"})},targetOrder:{type:String,values:["original","push","unshift"],default:"original"},validateEvent:{type:Boolean,default:!0}}),U6=(e,n)=>[e,n].every(mn)||mn(e)&&ea(n),bwe={[mi]:(e,n,s)=>[e,s].every(mn)&&["left","right"].includes(n),[Nr]:e=>mn(e),[V9]:U6,[$9]:U6},j6="checked-change",xwe=bn({data:mg.data,optionRender:{type:wt(Function)},placeholder:String,title:String,filterable:Boolean,format:mg.format,filterMethod:mg.filterMethod,defaultChecked:mg.leftDefaultChecked,props:mg.props}),wwe={[j6]:U6},my=e=>{const n={label:"label",key:"key",disabled:"disabled"};return se(()=>({...n,...e.props}))},Swe=(e,n,s)=>{const l=my(e),d=se(()=>e.data.filter(A=>hr(e.filterMethod)?e.filterMethod(n.query,A):String(A[l.value.label]||A[l.value.key]).toLowerCase().includes(n.query.toLowerCase()))),m=se(()=>d.value.filter(A=>!A[l.value.disabled])),b=se(()=>{const A=n.checked.length,P=e.data.length,{noChecked:D,hasChecked:z}=e.format;return D&&z?A>0?z.replace(/\${checked}/g,A.toString()).replace(/\${total}/g,P.toString()):D.replace(/\${total}/g,P.toString()):`${A}/${P}`}),r=se(()=>{const A=n.checked.length;return A>0&&A<m.value.length}),E=()=>{const A=m.value.map(P=>P[l.value.key]);n.allChecked=A.length>0&&A.every(P=>n.checked.includes(P))},M=A=>{n.checked=A?m.value.map(P=>P[l.value.key]):[]};return on(()=>n.checked,(A,P)=>{if(E(),n.checkChangeByUser){const D=A.concat(P).filter(z=>!A.includes(z)||!P.includes(z));s(j6,A,D)}else s(j6,A),n.checkChangeByUser=!0}),on(m,()=>{E()}),on(()=>e.data,()=>{const A=[],P=d.value.map(D=>D[l.value.key]);n.checked.forEach(D=>{P.includes(D)&&A.push(D)}),n.checkChangeByUser=!1,n.checked=A}),on(()=>e.defaultChecked,(A,P)=>{if(P&&A.length===P.length&&A.every(F=>P.includes(F)))return;const D=[],z=m.value.map(F=>F[l.value.key]);A.forEach(F=>{z.includes(F)&&D.push(F)}),n.checkChangeByUser=!1,n.checked=D},{immediate:!0}),{filteredData:d,checkableData:m,checkedSummary:b,isIndeterminate:r,updateAllChecked:E,handleAllCheckedChange:M}},Cwe=xe({name:"ElTransferPanel"}),Ewe=xe({...Cwe,props:xwe,emits:wwe,setup(e,{expose:n,emit:s}){const l=e,d=qo(),m=({option:W})=>W,{t:b}=Oi(),r=dn("transfer"),E=ts({checked:[],allChecked:!1,query:"",checkChangeByUser:!0}),M=my(l),{filteredData:A,checkedSummary:P,isIndeterminate:D,handleAllCheckedChange:z}=Swe(l,E,s),F=se(()=>!ru(E.query)&&ru(A.value)),N=se(()=>!ru(d.default()[0].children)),{checked:q,allChecked:G,query:ie}=da(E);return n({query:ie}),(W,Y)=>(Z(),ue("div",{class:ge(w(r).b("panel"))},[ae("p",{class:ge(w(r).be("panel","header"))},[st(w(Ou),{modelValue:w(G),"onUpdate:modelValue":J=>Hs(G)?G.value=J:null,indeterminate:w(D),"validate-event":!1,onChange:w(z)},{default:mt(()=>[ei(gn(W.title)+" ",1),ae("span",null,gn(w(P)),1)]),_:1},8,["modelValue","onUpdate:modelValue","indeterminate","onChange"])],2),ae("div",{class:ge([w(r).be("panel","body"),w(r).is("with-footer",w(N))])},[W.filterable?(Z(),Bt(w(nl),{key:0,modelValue:w(ie),"onUpdate:modelValue":J=>Hs(ie)?ie.value=J:null,class:ge(w(r).be("panel","filter")),size:"default",placeholder:W.placeholder,"prefix-icon":w(xO),clearable:"","validate-event":!1},null,8,["modelValue","onUpdate:modelValue","class","placeholder","prefix-icon"])):At("v-if",!0),Wr(st(w(xD),{modelValue:w(q),"onUpdate:modelValue":J=>Hs(q)?q.value=J:null,"validate-event":!1,class:ge([w(r).is("filterable",W.filterable),w(r).be("panel","list")])},{default:mt(()=>[(Z(!0),ue(cr,null,Ei(w(A),J=>(Z(),Bt(w(Ou),{key:J[w(M).key],class:ge(w(r).be("panel","item")),value:J[w(M).key],disabled:J[w(M).disabled],"validate-event":!1},{default:mt(()=>{var re;return[st(m,{option:(re=W.optionRender)==null?void 0:re.call(W,J)},null,8,["option"])]}),_:2},1032,["class","value","disabled"]))),128))]),_:1},8,["modelValue","onUpdate:modelValue","class"]),[[Ki,!w(F)&&!w(ru)(W.data)]]),Wr(ae("div",{class:ge(w(r).be("panel","empty"))},[It(W.$slots,"empty",{},()=>[ei(gn(w(F)?w(b)("el.transfer.noMatch"):w(b)("el.transfer.noData")),1)])],2),[[Ki,w(F)||w(ru)(W.data)]])],2),w(N)?(Z(),ue("p",{key:0,class:ge(w(r).be("panel","footer"))},[It(W.$slots,"default")],2)):At("v-if",!0)],2))}});var KA=En(Ewe,[["__file","transfer-panel.vue"]]);const Twe=e=>{const n=my(e),s=se(()=>e.data.reduce((m,b)=>(m[b[n.value.key]]=b)&&m,{})),l=se(()=>e.data.filter(m=>!e.modelValue.includes(m[n.value.key]))),d=se(()=>e.targetOrder==="original"?e.data.filter(m=>e.modelValue.includes(m[n.value.key])):e.modelValue.reduce((m,b)=>{const r=s.value[b];return r&&m.push(r),m},[]));return{sourceData:l,targetData:d}},Iwe=(e,n,s)=>{const l=my(e),d=(r,E,M)=>{s(Nr,r),s(mi,r,E,M)};return{addToLeft:()=>{const r=e.modelValue.slice();n.rightChecked.forEach(E=>{const M=r.indexOf(E);M>-1&&r.splice(M,1)}),d(r,"left",n.rightChecked)},addToRight:()=>{let r=e.modelValue.slice();const E=e.data.filter(M=>{const A=M[l.value.key];return n.leftChecked.includes(A)&&!e.modelValue.includes(A)}).map(M=>M[l.value.key]);r=e.targetOrder==="unshift"?E.concat(r):r.concat(E),e.targetOrder==="original"&&(r=e.data.filter(M=>r.includes(M[l.value.key])).map(M=>M[l.value.key])),d(r,"right",n.leftChecked)}}},kwe=(e,n)=>({onSourceCheckedChange:(d,m)=>{e.leftChecked=d,m&&n(V9,d,m)},onTargetCheckedChange:(d,m)=>{e.rightChecked=d,m&&n($9,d,m)}}),Mwe=xe({name:"ElTransfer"}),Awe=xe({...Mwe,props:mg,emits:bwe,setup(e,{expose:n,emit:s}){const l=e,d=qo(),{t:m}=Oi(),b=dn("transfer"),{formItem:r}=Fa(),E=ts({leftChecked:[],rightChecked:[]}),M=my(l),{sourceData:A,targetData:P}=Twe(l),{onSourceCheckedChange:D,onTargetCheckedChange:z}=kwe(E,s),{addToLeft:F,addToRight:N}=Iwe(l,E,s),q=Re(),G=Re(),ie=fe=>{switch(fe){case"left":q.value.query="";break;case"right":G.value.query="";break}},W=se(()=>l.buttonTexts.length===2),Y=se(()=>l.titles[0]||m("el.transfer.titles.0")),J=se(()=>l.titles[1]||m("el.transfer.titles.1")),re=se(()=>l.filterPlaceholder||m("el.transfer.filterPlaceholder"));on(()=>l.modelValue,()=>{var fe;l.validateEvent&&((fe=r?.validate)==null||fe.call(r,"change").catch(ce=>void 0))});const he=se(()=>fe=>{var ce;if(l.renderContent)return l.renderContent(xr,fe);const me=(((ce=d.default)==null?void 0:ce.call(d,{option:fe}))||[]).filter(we=>we.type!==Qo);return me.length?me:xr("span",fe[M.value.label]||fe[M.value.key])});return n({clearQuery:ie,leftPanel:q,rightPanel:G}),(fe,ce)=>(Z(),ue("div",{class:ge(w(b).b())},[st(KA,{ref_key:"leftPanel",ref:q,data:w(A),"option-render":w(he),placeholder:w(re),title:w(Y),filterable:fe.filterable,format:fe.format,"filter-method":fe.filterMethod,"default-checked":fe.leftDefaultChecked,props:l.props,onCheckedChange:w(D)},{empty:mt(()=>[It(fe.$slots,"left-empty")]),default:mt(()=>[It(fe.$slots,"left-footer")]),_:3},8,["data","option-render","placeholder","title","filterable","format","filter-method","default-checked","props","onCheckedChange"]),ae("div",{class:ge(w(b).e("buttons"))},[st(w(ua),{type:"primary",class:ge([w(b).e("button"),w(b).is("with-texts",w(W))]),disabled:w(ru)(E.rightChecked),onClick:w(F)},{default:mt(()=>[st(w(rr),null,{default:mt(()=>[st(w(ph))]),_:1}),w(Li)(fe.buttonTexts[0])?At("v-if",!0):(Z(),ue("span",{key:0},gn(fe.buttonTexts[0]),1))]),_:1},8,["class","disabled","onClick"]),st(w(ua),{type:"primary",class:ge([w(b).e("button"),w(b).is("with-texts",w(W))]),disabled:w(ru)(E.leftChecked),onClick:w(N)},{default:mt(()=>[w(Li)(fe.buttonTexts[1])?At("v-if",!0):(Z(),ue("span",{key:0},gn(fe.buttonTexts[1]),1)),st(w(rr),null,{default:mt(()=>[st(w(il))]),_:1})]),_:1},8,["class","disabled","onClick"])],2),st(KA,{ref_key:"rightPanel",ref:G,data:w(P),"option-render":w(he),placeholder:w(re),filterable:fe.filterable,format:fe.format,"filter-method":fe.filterMethod,title:w(J),"default-checked":fe.rightDefaultChecked,props:l.props,onCheckedChange:w(z)},{empty:mt(()=>[It(fe.$slots,"right-empty")]),default:mt(()=>[It(fe.$slots,"right-footer")]),_:3},8,["data","option-render","placeholder","filterable","format","filter-method","title","default-checked","props","onCheckedChange"])],2))}});var Rwe=En(Awe,[["__file","transfer.vue"]]);const Pwe=Gr(Rwe),Pg="$treeNodeId",YA=function(e,n){!n||n[Pg]||Object.defineProperty(n,Pg,{value:e.id,enumerable:!1,configurable:!1,writable:!1})},iC=(e,n)=>n?.[e||Pg],G6=(e,n,s)=>{const l=e.value.currentNode;s();const d=e.value.currentNode;l!==d&&n("current-change",d?d.data:null,d)},q6=e=>{let n=!0,s=!0,l=!0;for(let d=0,m=e.length;d<m;d++){const b=e[d];(b.checked!==!0||b.indeterminate)&&(n=!1,b.disabled||(l=!1)),(b.checked!==!1||b.indeterminate)&&(s=!1)}return{all:n,none:s,allWithoutDisable:l,half:!n&&!s}},tv=function(e){if(e.childNodes.length===0||e.loading)return;const{all:n,none:s,half:l}=q6(e.childNodes);n?(e.checked=!0,e.indeterminate=!1):l?(e.checked=!1,e.indeterminate=!0):s&&(e.checked=!1,e.indeterminate=!1);const d=e.parent;!d||d.level===0||e.store.checkStrictly||tv(d)},k2=function(e,n){const s=e.store.props,l=e.data||{},d=s[n];if(hr(d))return d(l,e);if(ir(d))return l[d];if(Li(d)){const m=l[n];return Li(m)?"":m}};let Lwe=0,W6=class ob{constructor(n){this.id=Lwe++,this.text=null,this.checked=!1,this.indeterminate=!1,this.data=null,this.expanded=!1,this.parent=null,this.visible=!0,this.isCurrent=!1,this.canFocus=!1;for(const s in n)Wi(n,s)&&(this[s]=n[s]);this.level=0,this.loaded=!1,this.childNodes=[],this.loading=!1,this.parent&&(this.level=this.parent.level+1)}initialize(){const n=this.store;if(!n)throw new Error("[Node]store is required!");n.registerNode(this);const s=n.props;if(s&&typeof s.isLeaf<"u"){const m=k2(this,"isLeaf");Ts(m)&&(this.isLeafByUser=m)}if(n.lazy!==!0&&this.data?(this.setData(this.data),n.defaultExpandAll&&(this.expanded=!0,this.canFocus=!0)):this.level>0&&n.lazy&&n.defaultExpandAll&&!this.isLeafByUser&&this.expand(),mn(this.data)||YA(this,this.data),!this.data)return;const l=n.defaultExpandedKeys,d=n.key;d&&l&&l.includes(this.key)&&this.expand(null,n.autoExpandParent),d&&n.currentNodeKey!==void 0&&this.key===n.currentNodeKey&&(n.currentNode=this,n.currentNode.isCurrent=!0),n.lazy&&n._initDefaultCheckedNode(this),this.updateLeafState(),this.parent&&(this.level===1||this.parent.expanded===!0)&&(this.canFocus=!0)}setData(n){mn(n)||YA(this,n),this.data=n,this.childNodes=[];let s;this.level===0&&mn(this.data)?s=this.data:s=k2(this,"children")||[];for(let l=0,d=s.length;l<d;l++)this.insertChild({data:s[l]})}get label(){return k2(this,"label")}get key(){const n=this.store.key;return this.data?this.data[n]:null}get disabled(){return k2(this,"disabled")}get nextSibling(){const n=this.parent;if(n){const s=n.childNodes.indexOf(this);if(s>-1)return n.childNodes[s+1]}return null}get previousSibling(){const n=this.parent;if(n){const s=n.childNodes.indexOf(this);if(s>-1)return s>0?n.childNodes[s-1]:null}return null}contains(n,s=!0){return(this.childNodes||[]).some(l=>l===n||s&&l.contains(n))}remove(){const n=this.parent;n&&n.removeChild(this)}insertChild(n,s,l){if(!n)throw new Error("InsertChild error: child is required.");if(!(n instanceof ob)){if(!l){const d=this.getChildren(!0);d.includes(n.data)||(Li(s)||s<0?d.push(n.data):d.splice(s,0,n.data))}Object.assign(n,{parent:this,store:this.store}),n=ts(new ob(n)),n instanceof ob&&n.initialize()}n.level=this.level+1,Li(s)||s<0?this.childNodes.push(n):this.childNodes.splice(s,0,n),this.updateLeafState()}insertBefore(n,s){let l;s&&(l=this.childNodes.indexOf(s)),this.insertChild(n,l)}insertAfter(n,s){let l;s&&(l=this.childNodes.indexOf(s),l!==-1&&(l+=1)),this.insertChild(n,l)}removeChild(n){const s=this.getChildren()||[],l=s.indexOf(n.data);l>-1&&s.splice(l,1);const d=this.childNodes.indexOf(n);d>-1&&(this.store&&this.store.deregisterNode(n),n.parent=null,this.childNodes.splice(d,1)),this.updateLeafState()}removeChildByData(n){let s=null;for(let l=0;l<this.childNodes.length;l++)if(this.childNodes[l].data===n){s=this.childNodes[l];break}s&&this.removeChild(s)}expand(n,s){const l=()=>{if(s){let d=this.parent;for(;d.level>0;)d.expanded=!0,d=d.parent}this.expanded=!0,n&&n(),this.childNodes.forEach(d=>{d.canFocus=!0})};this.shouldLoadData()?this.loadData(d=>{mn(d)&&(this.checked?this.setChecked(!0,!0):this.store.checkStrictly||tv(this),l())}):l()}doCreateChildren(n,s={}){n.forEach(l=>{this.insertChild(Object.assign({data:l},s),void 0,!0)})}collapse(){this.expanded=!1,this.childNodes.forEach(n=>{n.canFocus=!1})}shouldLoadData(){return this.store.lazy===!0&&this.store.load&&!this.loaded}updateLeafState(){if(this.store.lazy===!0&&this.loaded!==!0&&typeof this.isLeafByUser<"u"){this.isLeaf=this.isLeafByUser;return}const n=this.childNodes;if(!this.store.lazy||this.store.lazy===!0&&this.loaded===!0){this.isLeaf=!n||n.length===0;return}this.isLeaf=!1}setChecked(n,s,l,d){if(this.indeterminate=n==="half",this.checked=n===!0,this.store.checkStrictly)return;if(!(this.shouldLoadData()&&!this.store.checkDescendants)){const{all:b,allWithoutDisable:r}=q6(this.childNodes);!this.isLeaf&&!b&&r&&(this.checked=!1,n=!1);const E=()=>{if(s){const M=this.childNodes;for(let D=0,z=M.length;D<z;D++){const F=M[D];d=d||n!==!1;const N=F.disabled?F.checked:d;F.setChecked(N,s,!0,d)}const{half:A,all:P}=q6(M);P||(this.checked=P,this.indeterminate=A)}};if(this.shouldLoadData()){this.loadData(()=>{E(),tv(this)},{checked:n!==!1});return}else E()}const m=this.parent;!m||m.level===0||l||tv(m)}getChildren(n=!1){if(this.level===0)return this.data;const s=this.data;if(!s)return null;const l=this.store.props;let d="children";return l&&(d=l.children||"children"),Li(s[d])&&(s[d]=null),n&&!s[d]&&(s[d]=[]),s[d]}updateChildren(){const n=this.getChildren()||[],s=this.childNodes.map(m=>m.data),l={},d=[];n.forEach((m,b)=>{const r=m[Pg];!!r&&s.findIndex(M=>M[Pg]===r)>=0?l[r]={index:b,data:m}:d.push({index:b,data:m})}),this.store.lazy||s.forEach(m=>{l[m[Pg]]||this.removeChildByData(m)}),d.forEach(({index:m,data:b})=>{this.insertChild({data:b},m)}),this.updateLeafState()}loadData(n,s={}){if(this.store.lazy===!0&&this.store.load&&!this.loaded&&(!this.loading||Object.keys(s).length)){this.loading=!0;const l=m=>{this.childNodes=[],this.doCreateChildren(m,s),this.loaded=!0,this.loading=!1,this.updateLeafState(),n&&n.call(this,m)},d=()=>{this.loading=!1};this.store.load(this,l,d)}else n&&n.call(this)}eachNode(n){const s=[this];for(;s.length;){const l=s.shift();s.unshift(...l.childNodes),n(l)}}reInitChecked(){this.store.checkStrictly||tv(this)}};class Owe{constructor(n){this.currentNode=null,this.currentNodeKey=null;for(const s in n)Wi(n,s)&&(this[s]=n[s]);this.nodesMap={}}initialize(){if(this.root=new W6({data:this.data,store:this}),this.root.initialize(),this.lazy&&this.load){const n=this.load;n(this.root,s=>{this.root.doCreateChildren(s),this._initDefaultCheckedNodes()})}else this._initDefaultCheckedNodes()}filter(n){const s=this.filterNodeMethod,l=this.lazy,d=async function(m){const b=m.root?m.root.childNodes:m.childNodes;for(const[r,E]of b.entries())E.visible=s.call(E,n,E.data,E),r%80===0&&r>0&&await dr(),await d(E);if(!m.visible&&b.length){let r=!0;r=!b.some(E=>E.visible),m.root?m.root.visible=r===!1:m.visible=r===!1}n&&m.visible&&!m.isLeaf&&(!l||m.loaded)&&m.expand()};d(this)}setData(n){n!==this.root.data?(this.nodesMap={},this.root.setData(n),this._initDefaultCheckedNodes(),this.setCurrentNodeKey(this.currentNodeKey)):this.root.updateChildren()}getNode(n){if(n instanceof W6)return n;const s=Yr(n)?iC(this.key,n):n;return this.nodesMap[s]||null}insertBefore(n,s){const l=this.getNode(s);l.parent.insertBefore({data:n},l)}insertAfter(n,s){const l=this.getNode(s);l.parent.insertAfter({data:n},l)}remove(n){const s=this.getNode(n);s&&s.parent&&(s===this.currentNode&&(this.currentNode=null),s.parent.removeChild(s))}append(n,s){const l=Mu(s)?this.root:this.getNode(s);l&&l.insertChild({data:n})}_initDefaultCheckedNodes(){const n=this.defaultCheckedKeys||[],s=this.nodesMap;n.forEach(l=>{const d=s[l];d&&d.setChecked(!0,!this.checkStrictly)})}_initDefaultCheckedNode(n){(this.defaultCheckedKeys||[]).includes(n.key)&&n.setChecked(!0,!this.checkStrictly)}setDefaultCheckedKey(n){n!==this.defaultCheckedKeys&&(this.defaultCheckedKeys=n,this._initDefaultCheckedNodes())}registerNode(n){const s=this.key;!n||!n.data||(s?n.key!==void 0&&(this.nodesMap[n.key]=n):this.nodesMap[n.id]=n)}deregisterNode(n){!this.key||!n||!n.data||(n.childNodes.forEach(l=>{this.deregisterNode(l)}),delete this.nodesMap[n.key])}getCheckedNodes(n=!1,s=!1){const l=[],d=function(m){(m.root?m.root.childNodes:m.childNodes).forEach(r=>{(r.checked||s&&r.indeterminate)&&(!n||n&&r.isLeaf)&&l.push(r.data),d(r)})};return d(this),l}getCheckedKeys(n=!1){return this.getCheckedNodes(n).map(s=>(s||{})[this.key])}getHalfCheckedNodes(){const n=[],s=function(l){(l.root?l.root.childNodes:l.childNodes).forEach(m=>{m.indeterminate&&n.push(m.data),s(m)})};return s(this),n}getHalfCheckedKeys(){return this.getHalfCheckedNodes().map(n=>(n||{})[this.key])}_getAllNodes(){const n=[],s=this.nodesMap;for(const l in s)Wi(s,l)&&n.push(s[l]);return n}updateChildren(n,s){const l=this.nodesMap[n];if(!l)return;const d=l.childNodes;for(let m=d.length-1;m>=0;m--){const b=d[m];this.remove(b.data)}for(let m=0,b=s.length;m<b;m++){const r=s[m];this.append(r,l.data)}}_setCheckedKeys(n,s=!1,l){const d=this._getAllNodes().sort((E,M)=>E.level-M.level),m=Object.create(null),b=Object.keys(l);d.forEach(E=>E.setChecked(!1,!1));const r=E=>{E.childNodes.forEach(M=>{var A;m[M.data[n]]=!0,(A=M.childNodes)!=null&&A.length&&r(M)})};for(let E=0,M=d.length;E<M;E++){const A=d[E],P=A.data[n].toString();if(!b.includes(P)){A.checked&&!m[P]&&A.setChecked(!1,!1);continue}if(A.childNodes.length&&r(A),A.isLeaf||this.checkStrictly){A.setChecked(!0,!1);continue}if(A.setChecked(!0,!0),s){A.setChecked(!1,!1);const z=function(F){F.childNodes.forEach(q=>{q.isLeaf||q.setChecked(!1,!1),z(q)})};z(A)}}}setCheckedNodes(n,s=!1){const l=this.key,d={};n.forEach(m=>{d[(m||{})[l]]=!0}),this._setCheckedKeys(l,s,d)}setCheckedKeys(n,s=!1){this.defaultCheckedKeys=n;const l=this.key,d={};n.forEach(m=>{d[m]=!0}),this._setCheckedKeys(l,s,d)}setDefaultExpandedKeys(n){n=n||[],this.defaultExpandedKeys=n,n.forEach(s=>{const l=this.getNode(s);l&&l.expand(null,this.autoExpandParent)})}setChecked(n,s,l){const d=this.getNode(n);d&&d.setChecked(!!s,l)}getCurrentNode(){return this.currentNode}setCurrentNode(n){const s=this.currentNode;s&&(s.isCurrent=!1),this.currentNode=n,this.currentNode.isCurrent=!0}setUserCurrentNode(n,s=!0){const l=n[this.key],d=this.nodesMap[l];this.setCurrentNode(d),s&&this.currentNode.level>1&&this.currentNode.parent.expand(null,!0)}setCurrentNodeKey(n,s=!0){if(this.currentNodeKey=n,Mu(n)){this.currentNode&&(this.currentNode.isCurrent=!1),this.currentNode=null;return}const l=this.getNode(n);l&&(this.setCurrentNode(l),s&&this.currentNode.level>1&&this.currentNode.parent.expand(null,!0))}}const Dwe=xe({name:"ElTreeNodeContent",props:{node:{type:Object,required:!0},renderContent:Function},setup(e){const n=dn("tree"),s=Gn("NodeInstance"),l=Gn("RootTree");return()=>{const d=e.node,{data:m,store:b}=d;return e.renderContent?e.renderContent(xr,{_self:s,node:d,data:m,store:b}):It(l.ctx.slots,"default",{node:d,data:m},()=>[xr(q8,{tag:"span",truncated:!0,class:n.be("node","label")},()=>[d.label])])}}});var zwe=En(Dwe,[["__file","tree-node-content.vue"]]);function H9(e){const n=Gn("TreeNodeMap",null),s={treeNodeExpand:l=>{e.node!==l&&e.node.collapse()},children:[]};return n&&n.children.push(s),Ti("TreeNodeMap",s),{broadcastExpanded:l=>{if(e.accordion)for(const d of s.children)d.treeNodeExpand(l)}}}const U9=Symbol("dragEvents");function Nwe({props:e,ctx:n,el$:s,dropIndicator$:l,store:d}){const m=dn("tree"),b=Re({showDropIndicator:!1,draggingNode:null,dropNode:null,allowDrop:!0,dropType:null});return Ti(U9,{treeNodeDragStart:({event:A,treeNode:P})=>{if(hr(e.allowDrag)&&!e.allowDrag(P.node))return A.preventDefault(),!1;A.dataTransfer.effectAllowed="move";try{A.dataTransfer.setData("text/plain","")}catch{}b.value.draggingNode=P,n.emit("node-drag-start",P.node,A)},treeNodeDragOver:({event:A,treeNode:P})=>{const D=P,z=b.value.dropNode;z&&z.node.id!==D.node.id&&rl(z.$el,m.is("drop-inner"));const F=b.value.draggingNode;if(!F||!D)return;let N=!0,q=!0,G=!0,ie=!0;hr(e.allowDrop)&&(N=e.allowDrop(F.node,D.node,"prev"),ie=q=e.allowDrop(F.node,D.node,"inner"),G=e.allowDrop(F.node,D.node,"next")),A.dataTransfer.dropEffect=q||N||G?"move":"none",(N||q||G)&&z?.node.id!==D.node.id&&(z&&n.emit("node-drag-leave",F.node,z.node,A),n.emit("node-drag-enter",F.node,D.node,A)),N||q||G?b.value.dropNode=D:b.value.dropNode=null,D.node.nextSibling===F.node&&(G=!1),D.node.previousSibling===F.node&&(N=!1),D.node.contains(F.node,!1)&&(q=!1),(F.node===D.node||F.node.contains(D.node))&&(N=!1,q=!1,G=!1);const W=D.$el.querySelector(`.${m.be("node","content")}`).getBoundingClientRect(),Y=s.value.getBoundingClientRect();let J;const re=N?q?.25:G?.45:1:-1,he=G?q?.75:N?.55:0:1;let fe=-9999;const ce=A.clientY-W.top;ce<W.height*re?J="before":ce>W.height*he?J="after":q?J="inner":J="none";const me=D.$el.querySelector(`.${m.be("node","expand-icon")}`).getBoundingClientRect(),we=l.value;J==="before"?fe=me.top-Y.top:J==="after"&&(fe=me.bottom-Y.top),we.style.top=`${fe}px`,we.style.left=`${me.right-Y.left}px`,J==="inner"?Tu(D.$el,m.is("drop-inner")):rl(D.$el,m.is("drop-inner")),b.value.showDropIndicator=J==="before"||J==="after",b.value.allowDrop=b.value.showDropIndicator||ie,b.value.dropType=J,n.emit("node-drag-over",F.node,D.node,A)},treeNodeDragEnd:A=>{const{draggingNode:P,dropType:D,dropNode:z}=b.value;if(A.preventDefault(),A.dataTransfer&&(A.dataTransfer.dropEffect="move"),P&&z){const F={data:P.node.data};D!=="none"&&P.node.remove(),D==="before"?z.node.parent.insertBefore(F,z.node):D==="after"?z.node.parent.insertAfter(F,z.node):D==="inner"&&z.node.insertChild(F),D!=="none"&&(d.value.registerNode(F),d.value.key&&P.node.eachNode(N=>{var q;(q=d.value.nodesMap[N.data[d.value.key]])==null||q.setChecked(N.checked,!d.value.checkStrictly)})),rl(z.$el,m.is("drop-inner")),n.emit("node-drag-end",P.node,z.node,D,A),D!=="none"&&n.emit("node-drop",P.node,z.node,D,A)}P&&!z&&n.emit("node-drag-end",P.node,null,D,A),b.value.showDropIndicator=!1,b.value.draggingNode=null,b.value.dropNode=null,b.value.allowDrop=!0}}),{dragState:b}}const Fwe=xe({name:"ElTreeNode",components:{ElCollapseTransition:Rx,ElCheckbox:Ou,NodeContent:zwe,ElIcon:rr,Loading:gc},props:{node:{type:W6,default:()=>({})},props:{type:Object,default:()=>({})},accordion:Boolean,renderContent:Function,renderAfterExpand:Boolean,showCheckbox:{type:Boolean,default:!1}},emits:["node-expand"],setup(e,n){const s=dn("tree"),{broadcastExpanded:l}=H9(e),d=Gn("RootTree"),m=Re(!1),b=Re(!1),r=Re(),E=Re(),M=Re(),A=Gn(U9),P=oi();Ti("NodeInstance",P),e.node.expanded&&(m.value=!0,b.value=!0);const D=d.props.props.children||"children";on(()=>{var ce;const me=(ce=e.node.data)==null?void 0:ce[D];return me&&[...me]},()=>{e.node.updateChildren()}),on(()=>e.node.indeterminate,ce=>{N(e.node.checked,ce)}),on(()=>e.node.checked,ce=>{N(ce,e.node.indeterminate)}),on(()=>e.node.childNodes.length,()=>e.node.reInitChecked()),on(()=>e.node.expanded,ce=>{dr(()=>m.value=ce),ce&&(b.value=!0)});const z=ce=>iC(d.props.nodeKey,ce.data),F=ce=>{const me=e.props.class;if(!me)return{};let we;if(hr(me)){const{data:ye}=ce;we=me(ye,ce)}else we=me;return ir(we)?{[we]:!0}:we},N=(ce,me)=>{(r.value!==ce||E.value!==me)&&d.ctx.emit("check-change",e.node.data,ce,me),r.value=ce,E.value=me},q=ce=>{G6(d.store,d.ctx.emit,()=>{var me;if((me=d?.props)==null?void 0:me.nodeKey){const ye=z(e.node);d.store.value.setCurrentNodeKey(ye)}else d.store.value.setCurrentNode(e.node)}),d.currentNode.value=e.node,d.props.expandOnClickNode&&ie(),(d.props.checkOnClickNode||e.node.isLeaf&&d.props.checkOnClickLeaf&&e.showCheckbox)&&!e.node.disabled&&W(!e.node.checked),d.ctx.emit("node-click",e.node.data,e.node,P,ce)},G=ce=>{var me;(me=d.instance.vnode.props)!=null&&me.onNodeContextmenu&&(ce.stopPropagation(),ce.preventDefault()),d.ctx.emit("node-contextmenu",ce,e.node.data,e.node,P)},ie=()=>{e.node.isLeaf||(m.value?(d.ctx.emit("node-collapse",e.node.data,e.node,P),e.node.collapse()):e.node.expand(()=>{n.emit("node-expand",e.node.data,e.node,P)}))},W=ce=>{e.node.setChecked(ce,!d?.props.checkStrictly),dr(()=>{const me=d.store.value;d.ctx.emit("check",e.node.data,{checkedNodes:me.getCheckedNodes(),checkedKeys:me.getCheckedKeys(),halfCheckedNodes:me.getHalfCheckedNodes(),halfCheckedKeys:me.getHalfCheckedKeys()})})};return{ns:s,node$:M,tree:d,expanded:m,childNodeRendered:b,oldChecked:r,oldIndeterminate:E,getNodeKey:z,getNodeClass:F,handleSelectChange:N,handleClick:q,handleContextMenu:G,handleExpandIconClick:ie,handleCheckChange:W,handleChildNodeExpand:(ce,me,we)=>{l(me),d.ctx.emit("node-expand",ce,me,we)},handleDragStart:ce=>{d.props.draggable&&A.treeNodeDragStart({event:ce,treeNode:e})},handleDragOver:ce=>{ce.preventDefault(),d.props.draggable&&A.treeNodeDragOver({event:ce,treeNode:{$el:M.value,node:e.node}})},handleDrop:ce=>{ce.preventDefault()},handleDragEnd:ce=>{d.props.draggable&&A.treeNodeDragEnd(ce)},CaretRight:HS}}});function Bwe(e,n,s,l,d,m){const b=fi("el-icon"),r=fi("el-checkbox"),E=fi("loading"),M=fi("node-content"),A=fi("el-tree-node"),P=fi("el-collapse-transition");return Wr((Z(),ue("div",{ref:"node$",class:ge([e.ns.b("node"),e.ns.is("expanded",e.expanded),e.ns.is("current",e.node.isCurrent),e.ns.is("hidden",!e.node.visible),e.ns.is("focusable",!e.node.disabled),e.ns.is("checked",!e.node.disabled&&e.node.checked),e.getNodeClass(e.node)]),role:"treeitem",tabindex:"-1","aria-expanded":e.expanded,"aria-disabled":e.node.disabled,"aria-checked":e.node.checked,draggable:e.tree.props.draggable,"data-key":e.getNodeKey(e.node),onClick:Er(e.handleClick,["stop"]),onContextmenu:e.handleContextMenu,onDragstart:Er(e.handleDragStart,["stop"]),onDragover:Er(e.handleDragOver,["stop"]),onDragend:Er(e.handleDragEnd,["stop"]),onDrop:Er(e.handleDrop,["stop"])},[ae("div",{class:ge(e.ns.be("node","content")),style:fr({paddingLeft:(e.node.level-1)*e.tree.props.indent+"px"})},[e.tree.props.icon||e.CaretRight?(Z(),Bt(b,{key:0,class:ge([e.ns.be("node","expand-icon"),e.ns.is("leaf",e.node.isLeaf),{expanded:!e.node.isLeaf&&e.expanded}]),onClick:Er(e.handleExpandIconClick,["stop"])},{default:mt(()=>[(Z(),Bt(si(e.tree.props.icon||e.CaretRight)))]),_:1},8,["class","onClick"])):At("v-if",!0),e.showCheckbox?(Z(),Bt(r,{key:1,"model-value":e.node.checked,indeterminate:e.node.indeterminate,disabled:!!e.node.disabled,onClick:Er(()=>{},["stop"]),onChange:e.handleCheckChange},null,8,["model-value","indeterminate","disabled","onClick","onChange"])):At("v-if",!0),e.node.loading?(Z(),Bt(b,{key:2,class:ge([e.ns.be("node","loading-icon"),e.ns.is("loading")])},{default:mt(()=>[st(E)]),_:1},8,["class"])):At("v-if",!0),st(M,{node:e.node,"render-content":e.renderContent},null,8,["node","render-content"])],6),st(P,null,{default:mt(()=>[!e.renderAfterExpand||e.childNodeRendered?Wr((Z(),ue("div",{key:0,class:ge(e.ns.be("node","children")),role:"group","aria-expanded":e.expanded,onClick:Er(()=>{},["stop"])},[(Z(!0),ue(cr,null,Ei(e.node.childNodes,D=>(Z(),Bt(A,{key:e.getNodeKey(D),"render-content":e.renderContent,"render-after-expand":e.renderAfterExpand,"show-checkbox":e.showCheckbox,node:D,accordion:e.accordion,props:e.props,onNodeExpand:e.handleChildNodeExpand},null,8,["render-content","render-after-expand","show-checkbox","node","accordion","props","onNodeExpand"]))),128))],10,["aria-expanded","onClick"])),[[Ki,e.expanded]]):At("v-if",!0)]),_:1})],42,["aria-expanded","aria-disabled","aria-checked","draggable","data-key","onClick","onContextmenu","onDragstart","onDragover","onDragend","onDrop"])),[[Ki,e.node.visible]])}var Vwe=En(Fwe,[["render",Bwe],["__file","tree-node.vue"]]);function $we({el$:e},n){const s=dn("tree");Zr(()=>{d()}),yc(()=>{Array.from(e.value.querySelectorAll("input[type=checkbox]")).forEach(b=>{b.setAttribute("tabindex","-1")})}),Is(e,"keydown",m=>{const b=m.target;if(!b.className.includes(s.b("node")))return;const r=m.code,E=Array.from(e.value.querySelectorAll(`.${s.is("focusable")}[role=treeitem]`)),M=E.indexOf(b);let A;if([Un.up,Un.down].includes(r)){if(m.preventDefault(),r===Un.up){A=M===-1?0:M!==0?M-1:E.length-1;const D=A;for(;!n.value.getNode(E[A].dataset.key).canFocus;){if(A--,A===D){A=-1;break}A<0&&(A=E.length-1)}}else{A=M===-1?0:M<E.length-1?M+1:0;const D=A;for(;!n.value.getNode(E[A].dataset.key).canFocus;){if(A++,A===D){A=-1;break}A>=E.length&&(A=0)}}A!==-1&&E[A].focus()}[Un.left,Un.right].includes(r)&&(m.preventDefault(),b.click());const P=b.querySelector('[type="checkbox"]');[Un.enter,Un.numpadEnter,Un.space].includes(r)&&P&&(m.preventDefault(),P.click())});const d=()=>{var m;const b=Array.from(e.value.querySelectorAll(`.${s.is("focusable")}[role=treeitem]`));Array.from(e.value.querySelectorAll("input[type=checkbox]")).forEach(M=>{M.setAttribute("tabindex","-1")});const E=e.value.querySelectorAll(`.${s.is("checked")}[role=treeitem]`);if(E.length){E[0].setAttribute("tabindex","0");return}(m=b[0])==null||m.setAttribute("tabindex","0")}}const Hwe=xe({name:"ElTree",components:{ElTreeNode:Vwe},props:{data:{type:Array,default:()=>[]},emptyText:{type:String},renderAfterExpand:{type:Boolean,default:!0},nodeKey:String,checkStrictly:Boolean,defaultExpandAll:Boolean,expandOnClickNode:{type:Boolean,default:!0},checkOnClickNode:Boolean,checkOnClickLeaf:{type:Boolean,default:!0},checkDescendants:{type:Boolean,default:!1},autoExpandParent:{type:Boolean,default:!0},defaultCheckedKeys:Array,defaultExpandedKeys:Array,currentNodeKey:[String,Number],renderContent:Function,showCheckbox:{type:Boolean,default:!1},draggable:{type:Boolean,default:!1},allowDrag:Function,allowDrop:Function,props:{type:Object,default:()=>({children:"children",label:"label",disabled:"disabled"})},lazy:{type:Boolean,default:!1},highlightCurrent:Boolean,load:Function,filterNodeMethod:Function,accordion:Boolean,indent:{type:Number,default:18},icon:{type:bs}},emits:["check-change","current-change","node-click","node-contextmenu","node-collapse","node-expand","check","node-drag-start","node-drag-end","node-drop","node-drag-leave","node-drag-enter","node-drag-over"],setup(e,n){const{t:s}=Oi(),l=dn("tree"),d=Gn(m0,null),m=Re(new Owe({key:e.nodeKey,data:e.data,lazy:e.lazy,props:e.props,load:e.load,currentNodeKey:e.currentNodeKey,checkStrictly:e.checkStrictly,checkDescendants:e.checkDescendants,defaultCheckedKeys:e.defaultCheckedKeys,defaultExpandedKeys:e.defaultExpandedKeys,autoExpandParent:e.autoExpandParent,defaultExpandAll:e.defaultExpandAll,filterNodeMethod:e.filterNodeMethod}));m.value.initialize();const b=Re(m.value.root),r=Re(null),E=Re(null),M=Re(null),{broadcastExpanded:A}=H9(e),{dragState:P}=Nwe({props:e,ctx:n,el$:E,dropIndicator$:M,store:m});$we({el$:E},m);const D=se(()=>{const{childNodes:Te}=b.value,Ae=d?d.hasFilteredOptions!==0:!1;return(!Te||Te.length===0||Te.every(({visible:Ve})=>!Ve))&&!Ae});on(()=>e.currentNodeKey,Te=>{m.value.setCurrentNodeKey(Te)}),on(()=>e.defaultCheckedKeys,Te=>{m.value.setDefaultCheckedKey(Te)}),on(()=>e.defaultExpandedKeys,Te=>{m.value.setDefaultExpandedKeys(Te)}),on(()=>e.data,Te=>{m.value.setData(Te)},{deep:!0}),on(()=>e.checkStrictly,Te=>{m.value.checkStrictly=Te});const z=Te=>{if(!e.filterNodeMethod)throw new Error("[Tree] filterNodeMethod is required when filter");m.value.filter(Te)},F=Te=>iC(e.nodeKey,Te.data),N=Te=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in getNodePath");const Ae=m.value.getNode(Te);if(!Ae)return[];const Ve=[Ae.data];let We=Ae.parent;for(;We&&We!==b.value;)Ve.push(We.data),We=We.parent;return Ve.reverse()},q=(Te,Ae)=>m.value.getCheckedNodes(Te,Ae),G=Te=>m.value.getCheckedKeys(Te),ie=()=>{const Te=m.value.getCurrentNode();return Te?Te.data:null},W=()=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in getCurrentKey");const Te=ie();return Te?Te[e.nodeKey]:null},Y=(Te,Ae)=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in setCheckedNodes");m.value.setCheckedNodes(Te,Ae)},J=(Te,Ae)=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in setCheckedKeys");m.value.setCheckedKeys(Te,Ae)},re=(Te,Ae,Ve)=>{m.value.setChecked(Te,Ae,Ve)},he=()=>m.value.getHalfCheckedNodes(),fe=()=>m.value.getHalfCheckedKeys(),ce=(Te,Ae=!0)=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in setCurrentNode");G6(m,n.emit,()=>{A(Te),m.value.setUserCurrentNode(Te,Ae)})},me=(Te,Ae=!0)=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in setCurrentKey");G6(m,n.emit,()=>{A(),m.value.setCurrentNodeKey(Te,Ae)})},we=Te=>m.value.getNode(Te),ye=Te=>{m.value.remove(Te)},Ue=(Te,Ae)=>{m.value.append(Te,Ae)},Ne=(Te,Ae)=>{m.value.insertBefore(Te,Ae)},Pe=(Te,Ae)=>{m.value.insertAfter(Te,Ae)},ve=(Te,Ae,Ve)=>{A(Ae),n.emit("node-expand",Te,Ae,Ve)},$e=(Te,Ae)=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in updateKeyChild");m.value.updateChildren(Te,Ae)};return Ti("RootTree",{ctx:n,props:e,store:m,root:b,currentNode:r,instance:oi()}),Ti(xd,void 0),{ns:l,store:m,root:b,currentNode:r,dragState:P,el$:E,dropIndicator$:M,isEmpty:D,filter:z,getNodeKey:F,getNodePath:N,getCheckedNodes:q,getCheckedKeys:G,getCurrentNode:ie,getCurrentKey:W,setCheckedNodes:Y,setCheckedKeys:J,setChecked:re,getHalfCheckedNodes:he,getHalfCheckedKeys:fe,setCurrentNode:ce,setCurrentKey:me,t:s,getNode:we,remove:ye,append:Ue,insertBefore:Ne,insertAfter:Pe,handleNodeExpand:ve,updateKeyChildren:$e}}});function Uwe(e,n,s,l,d,m){const b=fi("el-tree-node");return Z(),ue("div",{ref:"el$",class:ge([e.ns.b(),e.ns.is("dragging",!!e.dragState.draggingNode),e.ns.is("drop-not-allow",!e.dragState.allowDrop),e.ns.is("drop-inner",e.dragState.dropType==="inner"),{[e.ns.m("highlight-current")]:e.highlightCurrent}]),role:"tree"},[(Z(!0),ue(cr,null,Ei(e.root.childNodes,r=>(Z(),Bt(b,{key:e.getNodeKey(r),node:r,props:e.props,accordion:e.accordion,"render-after-expand":e.renderAfterExpand,"show-checkbox":e.showCheckbox,"render-content":e.renderContent,onNodeExpand:e.handleNodeExpand},null,8,["node","props","accordion","render-after-expand","show-checkbox","render-content","onNodeExpand"]))),128)),e.isEmpty?(Z(),ue("div",{key:0,class:ge(e.ns.e("empty-block"))},[It(e.$slots,"empty",{},()=>{var r;return[ae("span",{class:ge(e.ns.e("empty-text"))},gn((r=e.emptyText)!=null?r:e.t("el.tree.emptyText")),3)]})],2)):At("v-if",!0),Wr(ae("div",{ref:"dropIndicator$",class:ge(e.ns.e("drop-indicator"))},null,2),[[Ki,e.dragState.showDropIndicator]])],2)}var jwe=En(Hwe,[["render",Uwe],["__file","tree.vue"]]);const Yb=Gr(jwe),Gwe=(e,{attrs:n,emit:s},{select:l,tree:d,key:m})=>{const b=dn("tree-select");return on(()=>e.data,()=>{e.filterable&&dr(()=>{var E,M;(M=d.value)==null||M.filter((E=l.value)==null?void 0:E.states.inputValue)})},{flush:"post"}),{...cc(da(e),Object.keys(Gp.props)),...n,class:se(()=>n.class),style:se(()=>n.style),"onUpdate:modelValue":E=>s(Nr,E),valueKey:m,popperClass:se(()=>{const E=[b.e("popper")];return e.popperClass&&E.push(e.popperClass),E.join(" ")}),filterMethod:(E="")=>{var M;e.filterMethod?e.filterMethod(E):e.remoteMethod?e.remoteMethod(E):(M=d.value)==null||M.filter(E)}}},qwe=xe({extends:Nb,setup(e,n){const s=Nb.setup(e,n);delete s.selectOptionClick;const l=oi().proxy;return dr(()=>{s.select.states.cachedOptions.get(l.value)||s.select.onOptionCreate(l)}),on(()=>n.attrs.visible,d=>{dr(()=>{s.states.visible=d})},{immediate:!0}),s},methods:{selectOptionClick(){this.$el.parentElement.click()}}});function K6(e){return e||e===0}function sC(e){return mn(e)&&e.length}function cg(e){return mn(e)?e:K6(e)?[e]:[]}function ab(e,n,s,l,d){for(let m=0;m<e.length;m++){const b=e[m];if(n(b,m,e,d))return l?l(b,m,e,d):b;{const r=s(b);if(sC(r)){const E=ab(r,n,s,l,b);if(E)return E}}}}function lb(e,n,s,l){for(let d=0;d<e.length;d++){const m=e[d];n(m,d,e,l);const b=s(m);sC(b)&&lb(b,n,s,m)}}const Wwe=(e,{attrs:n,slots:s,emit:l},{select:d,tree:m,key:b})=>{on(()=>e.modelValue,()=>{e.showCheckbox&&dr(()=>{const D=m.value;D&&!la(D.getCheckedKeys(),cg(e.modelValue))&&D.setCheckedKeys(cg(e.modelValue))})},{immediate:!0,deep:!0});const r=se(()=>({value:b.value,label:"label",children:"children",disabled:"disabled",isLeaf:"isLeaf",...e.props})),E=(D,z)=>{var F;const N=r.value[D];return hr(N)?N(z,(F=m.value)==null?void 0:F.getNode(E("value",z))):z[N]},M=cg(e.modelValue).map(D=>ab(e.data||[],z=>E("value",z)===D,z=>E("children",z),(z,F,N,q)=>q&&E("value",q))).filter(D=>K6(D)),A=se(()=>{if(!e.renderAfterExpand&&!e.lazy)return[];const D=[];return lb(e.data.concat(e.cacheData),z=>{const F=E("value",z);D.push({value:F,currentLabel:E("label",z),isDisabled:E("disabled",z)})},z=>E("children",z)),D}),P=()=>{var D;return(D=m.value)==null?void 0:D.getCheckedKeys().filter(z=>{var F;const N=(F=m.value)==null?void 0:F.getNode(z);return!ea(N)&&ru(N.childNodes)})};return{...cc(da(e),Object.keys(Yb.props)),...n,nodeKey:b,expandOnClickNode:se(()=>!e.checkStrictly&&e.expandOnClickNode),defaultExpandedKeys:se(()=>e.defaultExpandedKeys?e.defaultExpandedKeys.concat(M):M),renderContent:(D,{node:z,data:F,store:N})=>D(qwe,{value:E("value",F),label:E("label",F),disabled:E("disabled",F),visible:z.visible},e.renderContent?()=>e.renderContent(D,{node:z,data:F,store:N}):s.default?()=>s.default({node:z,data:F,store:N}):void 0),filterNodeMethod:(D,z,F)=>e.filterNodeMethod?e.filterNodeMethod(D,z,F):D?new RegExp(h8(D),"i").test(E("label",z)||""):!0,onNodeClick:(D,z,F)=>{var N,q,G,ie;if((N=n.onNodeClick)==null||N.call(n,D,z,F),!(e.showCheckbox&&e.checkOnClickNode)){if(!e.showCheckbox&&(e.checkStrictly||z.isLeaf)){if(!E("disabled",D)){const W=(q=d.value)==null?void 0:q.states.options.get(E("value",D));(G=d.value)==null||G.handleOptionSelect(W)}}else e.expandOnClickNode&&F.proxy.handleExpandIconClick();(ie=d.value)==null||ie.focus()}},onCheck:(D,z)=>{var F;if(!e.showCheckbox)return;const N=E("value",D),q={};lb([m.value.store.root],Y=>q[Y.key]=Y,Y=>Y.childNodes);const G=z.checkedKeys,ie=e.multiple?cg(e.modelValue).filter(Y=>!(Y in q)&&!G.includes(Y)):[],W=ie.concat(G);if(e.checkStrictly)l(Nr,e.multiple?W:W.includes(N)?N:void 0);else if(e.multiple){const Y=P();l(Nr,ie.concat(Y))}else{const Y=ab([D],he=>!sC(E("children",he))&&!E("disabled",he),he=>E("children",he)),J=Y?E("value",Y):void 0,re=K6(e.modelValue)&&!!ab([D],he=>E("value",he)===e.modelValue,he=>E("children",he));l(Nr,J===e.modelValue||re?void 0:J)}dr(()=>{var Y;const J=cg(e.modelValue);m.value.setCheckedKeys(J),(Y=n.onCheck)==null||Y.call(n,D,{checkedKeys:m.value.getCheckedKeys(),checkedNodes:m.value.getCheckedNodes(),halfCheckedKeys:m.value.getHalfCheckedKeys(),halfCheckedNodes:m.value.getHalfCheckedNodes()})}),(F=d.value)==null||F.focus()},onNodeExpand:(D,z,F)=>{var N;(N=n.onNodeExpand)==null||N.call(n,D,z,F),dr(()=>{if(!e.checkStrictly&&e.lazy&&e.multiple&&z.checked){const q={},G=m.value.getCheckedKeys();lb([m.value.store.root],Y=>q[Y.key]=Y,Y=>Y.childNodes);const ie=cg(e.modelValue).filter(Y=>!(Y in q)&&!G.includes(Y)),W=P();l(Nr,ie.concat(W))}})},cacheOptions:A}};var Kwe=xe({props:{data:{type:Array,default:()=>[]}},setup(e){const n=Gn(m0);return on(()=>e.data,()=>{var s;e.data.forEach(d=>{n.states.cachedOptions.has(d.value)||n.states.cachedOptions.set(d.value,d)});const l=((s=n.selectRef)==null?void 0:s.querySelectorAll("input"))||[];Pi&&!Array.from(l).includes(document.activeElement)&&n.setSelected()},{flush:"post",immediate:!0}),()=>{}}});const Ywe=xe({name:"ElTreeSelect",inheritAttrs:!1,props:{...Gp.props,...Yb.props,cacheData:{type:Array,default:()=>[]}},setup(e,n){const{slots:s,expose:l}=n,d=Re(),m=Re(),b=se(()=>e.nodeKey||e.valueKey||"value"),r=Gwe(e,n,{select:d,tree:m,key:b}),{cacheOptions:E,...M}=Wwe(e,n,{select:d,tree:m,key:b}),A=ts({});return l(A),Zr(()=>{Object.assign(A,{...cc(m.value,["filter","updateKeyChildren","getCheckedNodes","setCheckedNodes","getCheckedKeys","setCheckedKeys","setChecked","getHalfCheckedNodes","getHalfCheckedKeys","getCurrentKey","getCurrentNode","setCurrentKey","setCurrentNode","getNode","remove","append","insertBefore","insertAfter"]),...cc(d.value,["focus","blur","selectedLabel"])})}),()=>xr(Gp,ts({...r,ref:P=>d.value=P}),{...s,default:()=>[xr(Kwe,{data:E.value}),xr(Yb,ts({...M,ref:P=>m.value=P}))]})}});var Zwe=En(Ywe,[["__file","tree-select.vue"]]);const Xwe=Gr(Zwe),oC=Symbol(),Jwe={key:-1,level:-1,data:{}};var nv=(e=>(e.KEY="id",e.LABEL="label",e.CHILDREN="children",e.DISABLED="disabled",e.CLASS="",e))(nv||{}),Y6=(e=>(e.ADD="add",e.DELETE="delete",e))(Y6||{});const j9={type:Number,default:26},Qwe=bn({data:{type:wt(Array),default:()=>oo([])},emptyText:{type:String},height:{type:Number,default:200},props:{type:wt(Object),default:()=>oo({children:"children",label:"label",disabled:"disabled",value:"id",class:""})},highlightCurrent:{type:Boolean,default:!1},showCheckbox:{type:Boolean,default:!1},defaultCheckedKeys:{type:wt(Array),default:()=>oo([])},checkStrictly:{type:Boolean,default:!1},defaultExpandedKeys:{type:wt(Array),default:()=>oo([])},indent:{type:Number,default:16},itemSize:j9,icon:{type:bs},expandOnClickNode:{type:Boolean,default:!0},checkOnClickNode:{type:Boolean,default:!1},checkOnClickLeaf:{type:Boolean,default:!0},currentNodeKey:{type:wt([String,Number])},accordion:{type:Boolean,default:!1},filterMethod:{type:wt(Function)},perfMode:{type:Boolean,default:!0}}),e3e=bn({node:{type:wt(Object),default:()=>oo(Jwe)},expanded:{type:Boolean,default:!1},checked:{type:Boolean,default:!1},indeterminate:{type:Boolean,default:!1},showCheckbox:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},current:{type:Boolean,default:!1},hiddenExpandIcon:{type:Boolean,default:!1},itemSize:j9}),t3e=bn({node:{type:wt(Object),required:!0}}),G9="node-click",q9="node-drop",W9="node-expand",K9="node-collapse",Y9="current-change",Z9="check",X9="check-change",J9="node-contextmenu",n3e={[G9]:(e,n,s)=>e&&n&&s,[q9]:(e,n,s)=>e&&n&&s,[W9]:(e,n)=>e&&n,[K9]:(e,n)=>e&&n,[Y9]:(e,n)=>e&&n,[Z9]:(e,n)=>e&&n,[X9]:(e,n)=>e&&Ts(n),[J9]:(e,n,s)=>e&&n&&s},r3e={click:(e,n)=>!!(e&&n),drop:(e,n)=>!!(e&&n),toggle:e=>!!e,check:(e,n)=>e&&Ts(n)};function i3e(e,n){const s=Re(new Set),l=Re(new Set),{emit:d}=oi();on([()=>n.value,()=>e.defaultCheckedKeys],()=>dr(()=>{ie(e.defaultCheckedKeys)}),{immediate:!0});const m=()=>{if(!n.value||!e.showCheckbox||e.checkStrictly)return;const{levelTreeNodeMap:W,maxLevel:Y}=n.value,J=s.value,re=new Set;for(let he=Y-1;he>=1;--he){const fe=W.get(he);fe&&fe.forEach(ce=>{const me=ce.children;if(me){let we=!0,ye=!1;for(const Ue of me){const Ne=Ue.key;if(J.has(Ne))ye=!0;else if(re.has(Ne)){we=!1,ye=!0;break}else we=!1}we?J.add(ce.key):ye?(re.add(ce.key),J.delete(ce.key)):(J.delete(ce.key),re.delete(ce.key))}})}l.value=re},b=W=>s.value.has(W.key),r=W=>l.value.has(W.key),E=(W,Y,J=!0,re=!0)=>{const he=s.value,fe=(ce,me)=>{he[me?Y6.ADD:Y6.DELETE](ce.key);const we=ce.children;!e.checkStrictly&&we&&we.forEach(ye=>{ye.disabled||fe(ye,me)})};fe(W,Y),re&&m(),J&&M(W,Y)},M=(W,Y)=>{const{checkedNodes:J,checkedKeys:re}=F(),{halfCheckedNodes:he,halfCheckedKeys:fe}=N();d(Z9,W.data,{checkedKeys:re,checkedNodes:J,halfCheckedKeys:fe,halfCheckedNodes:he}),d(X9,W.data,Y)};function A(W=!1){return F(W).checkedKeys}function P(W=!1){return F(W).checkedNodes}function D(){return N().halfCheckedKeys}function z(){return N().halfCheckedNodes}function F(W=!1){const Y=[],J=[];if(n?.value&&e.showCheckbox){const{treeNodeMap:re}=n.value;s.value.forEach(he=>{const fe=re.get(he);fe&&(!W||W&&fe.isLeaf)&&(J.push(he),Y.push(fe.data))})}return{checkedKeys:J,checkedNodes:Y}}function N(){const W=[],Y=[];if(n?.value&&e.showCheckbox){const{treeNodeMap:J}=n.value;l.value.forEach(re=>{const he=J.get(re);he&&(Y.push(re),W.push(he.data))})}return{halfCheckedNodes:W,halfCheckedKeys:Y}}function q(W){s.value.clear(),l.value.clear(),dr(()=>{ie(W)})}function G(W,Y){if(n?.value&&e.showCheckbox){const J=n.value.treeNodeMap.get(W);J&&E(J,Y,!1)}}function ie(W){if(n?.value){const{treeNodeMap:Y}=n.value;if(e.showCheckbox&&Y&&W?.length>0){for(const J of W){const re=Y.get(J);re&&!b(re)&&E(re,!0,!1,!1)}m()}}}return{updateCheckedKeys:m,toggleCheckbox:E,isChecked:b,isIndeterminate:r,getCheckedKeys:A,getCheckedNodes:P,getHalfCheckedKeys:D,getHalfCheckedNodes:z,setChecked:G,setCheckedKeys:q}}function s3e(e,n){const s=Re(new Set([])),l=Re(new Set([])),d=se(()=>hr(e.filterMethod));function m(r){var E;if(!d.value)return;const M=new Set,A=l.value,P=s.value,D=[],z=((E=n.value)==null?void 0:E.treeNodes)||[],F=e.filterMethod;P.clear();function N(q){q.forEach(G=>{D.push(G),F?.(r,G.data,G)?D.forEach(W=>{M.add(W.key)}):G.isLeaf&&P.add(G.key);const ie=G.children;if(ie&&N(ie),!G.isLeaf){if(!M.has(G.key))P.add(G.key);else if(ie){let W=!0;for(const Y of ie)if(!P.has(Y.key)){W=!1;break}W?A.add(G.key):A.delete(G.key)}}D.pop()})}return N(z),M}function b(r){return l.value.has(r.key)}return{hiddenExpandIconKeySet:l,hiddenNodeKeySet:s,doFilter:m,isForceHiddenExpandIcon:b}}function o3e(e,n){const s=Re(new Set(e.defaultExpandedKeys)),l=Re(),d=Zs(),m=Re();on(()=>e.currentNodeKey,le=>{l.value=le},{immediate:!0}),on(()=>e.data,le=>{Ke(le)},{immediate:!0});const{isIndeterminate:b,isChecked:r,toggleCheckbox:E,getCheckedKeys:M,getCheckedNodes:A,getHalfCheckedKeys:P,getHalfCheckedNodes:D,setChecked:z,setCheckedKeys:F}=i3e(e,d),{doFilter:N,hiddenNodeKeySet:q,isForceHiddenExpandIcon:G}=s3e(e,d),ie=se(()=>{var le;return((le=e.props)==null?void 0:le.value)||nv.KEY}),W=se(()=>{var le;return((le=e.props)==null?void 0:le.children)||nv.CHILDREN}),Y=se(()=>{var le;return((le=e.props)==null?void 0:le.disabled)||nv.DISABLED}),J=se(()=>{var le;return((le=e.props)==null?void 0:le.label)||nv.LABEL}),re=se(()=>{var le;const nt=s.value,Gt=q.value,an=[],Qt=((le=d.value)==null?void 0:le.treeNodes)||[],Zt=[];for(let rn=Qt.length-1;rn>=0;--rn)Zt.push(Qt[rn]);for(;Zt.length;){const rn=Zt.pop();if(!Gt.has(rn.key)&&(an.push(rn),rn.children&&nt.has(rn.key)))for(let bt=rn.children.length-1;bt>=0;--bt)Zt.push(rn.children[bt])}return an}),he=se(()=>re.value.length>0);function fe(le){const nt=new Map,Gt=new Map;let an=1;function Qt(rn,bt=1,fn=void 0){var pn;const Vn=[];for(const Nn of rn){const Ot=we(Nn),Bn={level:bt,key:Ot,data:Nn};Bn.label=Ue(Nn),Bn.parent=fn;const Sr=me(Nn);Bn.disabled=ye(Nn),Bn.isLeaf=!Sr||Sr.length===0,Sr&&Sr.length&&(Bn.children=Qt(Sr,bt+1,Bn)),Vn.push(Bn),nt.set(Ot,Bn),Gt.has(bt)||Gt.set(bt,[]),(pn=Gt.get(bt))==null||pn.push(Bn)}return bt>an&&(an=bt),Vn}const Zt=Qt(le);return{treeNodeMap:nt,levelTreeNodeMap:Gt,maxLevel:an,treeNodes:Zt}}function ce(le){const nt=N(le);nt&&(s.value=nt)}function me(le){return le[W.value]}function we(le){return le?le[ie.value]:""}function ye(le){return le[Y.value]}function Ue(le){return le[J.value]}function Ne(le){s.value.has(le.key)?We(le):Ve(le)}function Pe(le){const nt=new Set,Gt=d.value.treeNodeMap;le.forEach(an=>{let Qt=Gt.get(an);for(;Qt&&!nt.has(Qt.key);)nt.add(Qt.key),Qt=Qt.parent}),s.value=nt}function ve(le,nt){n(G9,le.data,le,nt),Te(le),e.expandOnClickNode&&Ne(le),e.showCheckbox&&(e.checkOnClickNode||le.isLeaf&&e.checkOnClickLeaf)&&!le.disabled&&E(le,!r(le),!0)}function $e(le,nt){n(q9,le.data,le,nt)}function Te(le){ct(le)||(l.value=le.key,n(Y9,le.data,le))}function Ae(le,nt){E(le,nt)}function Ve(le){const nt=s.value;if(d.value&&e.accordion){const{treeNodeMap:Gt}=d.value;nt.forEach(an=>{const Qt=Gt.get(an);le&&le.level===Qt?.level&&nt.delete(an)})}nt.add(le.key),n(W9,le.data,le)}function We(le){s.value.delete(le.key),n(K9,le.data,le)}function ft(le){return s.value.has(le.key)}function at(le){return!!le.disabled}function ct(le){const nt=l.value;return nt!==void 0&&nt===le.key}function Mt(){var le,nt;if(l.value)return(nt=(le=d.value)==null?void 0:le.treeNodeMap.get(l.value))==null?void 0:nt.data}function Ct(){return l.value}function gt(le){l.value=le}function Ke(le){dr(()=>d.value=fe(le))}function Lt(le){var nt;const Gt=Yr(le)?we(le):le;return(nt=d.value)==null?void 0:nt.treeNodeMap.get(Gt)}function xn(le,nt="auto"){const Gt=Lt(le);Gt&&m.value&&m.value.scrollToItem(re.value.indexOf(Gt),nt)}function Ht(le){var nt;(nt=m.value)==null||nt.scrollTo(le)}return{tree:d,flattenTree:re,isNotEmpty:he,listRef:m,getKey:we,getChildren:me,toggleExpand:Ne,toggleCheckbox:E,isExpanded:ft,isChecked:r,isIndeterminate:b,isDisabled:at,isCurrent:ct,isForceHiddenExpandIcon:G,handleNodeClick:ve,handleNodeDrop:$e,handleNodeCheck:Ae,getCurrentNode:Mt,getCurrentKey:Ct,setCurrentKey:gt,getCheckedKeys:M,getCheckedNodes:A,getHalfCheckedKeys:P,getHalfCheckedNodes:D,setChecked:z,setCheckedKeys:F,filter:ce,setData:Ke,getNode:Lt,expandNode:Ve,collapseNode:We,setExpandedKeys:Pe,scrollToNode:xn,scrollTo:Ht}}var a3e=xe({name:"ElTreeNodeContent",props:t3e,setup(e){const n=Gn(oC),s=dn("tree");return()=>{const l=e.node,{data:d}=l;return n?.ctx.slots.default?n.ctx.slots.default({node:l,data:d}):xr(q8,{tag:"span",truncated:!0,class:s.be("node","label")},()=>[l?.label])}}});const l3e=xe({name:"ElTreeNode"}),u3e=xe({...l3e,props:e3e,emits:r3e,setup(e,{emit:n}){const s=e,l=Gn(oC),d=dn("tree"),m=se(()=>{var z;return(z=l?.props.indent)!=null?z:16}),b=se(()=>{var z;return(z=l?.props.icon)!=null?z:HS}),r=z=>{const F=l?.props.props.class;if(!F)return{};let N;if(hr(F)){const{data:q}=z;N=F(q,z)}else N=F;return ir(N)?{[N]:!0}:N},E=z=>{n("click",s.node,z)},M=z=>{n("drop",s.node,z)},A=()=>{n("toggle",s.node)},P=z=>{n("check",s.node,z)},D=z=>{var F,N,q,G;(q=(N=(F=l?.instance)==null?void 0:F.vnode)==null?void 0:N.props)!=null&&q.onNodeContextmenu&&(z.stopPropagation(),z.preventDefault()),l?.ctx.emit(J9,z,(G=s.node)==null?void 0:G.data,s.node)};return(z,F)=>{var N,q,G;return Z(),ue("div",{ref:"node$",class:ge([w(d).b("node"),w(d).is("expanded",z.expanded),w(d).is("current",z.current),w(d).is("focusable",!z.disabled),w(d).is("checked",!z.disabled&&z.checked),r(z.node)]),role:"treeitem",tabindex:"-1","aria-expanded":z.expanded,"aria-disabled":z.disabled,"aria-checked":z.checked,"data-key":(N=z.node)==null?void 0:N.key,onClick:Er(E,["stop"]),onContextmenu:D,onDragover:Er(()=>{},["prevent"]),onDragenter:Er(()=>{},["prevent"]),onDrop:Er(M,["stop"])},[ae("div",{class:ge(w(d).be("node","content")),style:fr({paddingLeft:`${(z.node.level-1)*w(m)}px`,height:z.itemSize+"px"})},[w(b)?(Z(),Bt(w(rr),{key:0,class:ge([w(d).is("leaf",!!((q=z.node)!=null&&q.isLeaf)),w(d).is("hidden",z.hiddenExpandIcon),{expanded:!((G=z.node)!=null&&G.isLeaf)&&z.expanded},w(d).be("node","expand-icon")]),onClick:Er(A,["stop"])},{default:mt(()=>[(Z(),Bt(si(w(b))))]),_:1},8,["class","onClick"])):At("v-if",!0),z.showCheckbox?(Z(),Bt(w(Ou),{key:1,"model-value":z.checked,indeterminate:z.indeterminate,disabled:z.disabled,onChange:P,onClick:Er(()=>{},["stop"])},null,8,["model-value","indeterminate","disabled","onClick"])):At("v-if",!0),st(w(a3e),{node:z.node},null,8,["node"])],6)],42,["aria-expanded","aria-disabled","aria-checked","data-key","onClick","onDragover","onDragenter","onDrop"])}}});var c3e=En(u3e,[["__file","tree-node.vue"]]);const d3e=xe({name:"ElTreeV2"}),h3e=xe({...d3e,props:Qwe,emits:n3e,setup(e,{expose:n,emit:s}){const l=e,d=qo(),m=se(()=>l.itemSize);Ti(oC,{ctx:{emit:s,slots:d},props:l,instance:oi()}),Ti(xd,void 0);const{t:b}=Oi(),r=dn("tree"),{flattenTree:E,isNotEmpty:M,listRef:A,toggleExpand:P,isExpanded:D,isIndeterminate:z,isChecked:F,isDisabled:N,isCurrent:q,isForceHiddenExpandIcon:G,handleNodeClick:ie,handleNodeDrop:W,handleNodeCheck:Y,toggleCheckbox:J,getCurrentNode:re,getCurrentKey:he,setCurrentKey:fe,getCheckedKeys:ce,getCheckedNodes:me,getHalfCheckedKeys:we,getHalfCheckedNodes:ye,setChecked:Ue,setCheckedKeys:Ne,filter:Pe,setData:ve,getNode:$e,expandNode:Te,collapseNode:Ae,setExpandedKeys:Ve,scrollToNode:We,scrollTo:ft}=o3e(l,s);return n({toggleCheckbox:J,getCurrentNode:re,getCurrentKey:he,setCurrentKey:fe,getCheckedKeys:ce,getCheckedNodes:me,getHalfCheckedKeys:we,getHalfCheckedNodes:ye,setChecked:Ue,setCheckedKeys:Ne,filter:Pe,setData:ve,getNode:$e,expandNode:Te,collapseNode:Ae,setExpandedKeys:Ve,scrollToNode:We,scrollTo:ft}),(at,ct)=>(Z(),ue("div",{class:ge([w(r).b(),{[w(r).m("highlight-current")]:at.highlightCurrent}]),role:"tree"},[w(M)?(Z(),Bt(w(Dz),{key:0,ref_key:"listRef",ref:A,"class-name":w(r).b("virtual-list"),data:w(E),total:w(E).length,height:at.height,"item-size":w(m),"perf-mode":at.perfMode},{default:mt(({data:Mt,index:Ct,style:gt})=>[(Z(),Bt(c3e,{key:Mt[Ct].key,style:fr(gt),node:Mt[Ct],expanded:w(D)(Mt[Ct]),"show-checkbox":at.showCheckbox,checked:w(F)(Mt[Ct]),indeterminate:w(z)(Mt[Ct]),"item-size":w(m),disabled:w(N)(Mt[Ct]),current:w(q)(Mt[Ct]),"hidden-expand-icon":w(G)(Mt[Ct]),onClick:w(ie),onToggle:w(P),onCheck:w(Y),onDrop:w(W)},null,8,["style","node","expanded","show-checkbox","checked","indeterminate","item-size","disabled","current","hidden-expand-icon","onClick","onToggle","onCheck","onDrop"]))]),_:1},8,["class-name","data","total","height","item-size","perf-mode"])):(Z(),ue("div",{key:1,class:ge(w(r).e("empty-block"))},[It(at.$slots,"empty",{},()=>{var Mt;return[ae("span",{class:ge(w(r).e("empty-text"))},gn((Mt=at.emptyText)!=null?Mt:w(b)("el.tree.emptyText")),3)]})],2))],2))}});var f3e=En(h3e,[["__file","tree.vue"]]);const p3e=Gr(f3e),Q9=Symbol("uploadContextKey"),m3e="ElUpload";class g3e extends Error{constructor(n,s,l,d){super(n),this.name="UploadAjaxError",this.status=s,this.method=l,this.url=d}}function ZA(e,n,s){let l;return s.response?l=`${s.response.error||s.response}`:s.responseText?l=`${s.responseText}`:l=`fail to ${n.method} ${e} ${s.status}`,new g3e(l,s.status,n.method,e)}function _3e(e){const n=e.responseText||e.response;if(!n)return n;try{return JSON.parse(n)}catch{return n}}const v3e=e=>{typeof XMLHttpRequest>"u"&&No(m3e,"XMLHttpRequest is undefined");const n=new XMLHttpRequest,s=e.action;n.upload&&n.upload.addEventListener("progress",m=>{const b=m;b.percent=m.total>0?m.loaded/m.total*100:0,e.onProgress(b)});const l=new FormData;if(e.data)for(const[m,b]of Object.entries(e.data))mn(b)&&b.length?l.append(m,...b):l.append(m,b);l.append(e.filename,e.file,e.file.name),n.addEventListener("error",()=>{e.onError(ZA(s,e,n))}),n.addEventListener("load",()=>{if(n.status<200||n.status>=300)return e.onError(ZA(s,e,n));e.onSuccess(_3e(n))}),n.open(e.method,s,!0),e.withCredentials&&"withCredentials"in n&&(n.withCredentials=!0);const d=e.headers||{};if(d instanceof Headers)d.forEach((m,b)=>n.setRequestHeader(b,m));else for(const[m,b]of Object.entries(d))ea(b)||n.setRequestHeader(m,String(b));return n.send(l),n},eN=["text","picture","picture-card"];let y3e=1;const Z6=()=>Date.now()+y3e++,tN=bn({action:{type:String,default:"#"},headers:{type:wt(Object)},method:{type:String,default:"post"},data:{type:wt([Object,Function,Promise]),default:()=>oo({})},multiple:Boolean,name:{type:String,default:"file"},drag:Boolean,withCredentials:Boolean,showFileList:{type:Boolean,default:!0},accept:{type:String,default:""},fileList:{type:wt(Array),default:()=>oo([])},autoUpload:{type:Boolean,default:!0},listType:{type:String,values:eN,default:"text"},httpRequest:{type:wt(Function),default:v3e},disabled:Boolean,limit:Number}),b3e=bn({...tN,beforeUpload:{type:wt(Function),default:ys},beforeRemove:{type:wt(Function)},onRemove:{type:wt(Function),default:ys},onChange:{type:wt(Function),default:ys},onPreview:{type:wt(Function),default:ys},onSuccess:{type:wt(Function),default:ys},onProgress:{type:wt(Function),default:ys},onError:{type:wt(Function),default:ys},onExceed:{type:wt(Function),default:ys},crossorigin:{type:wt(String)}}),x3e=bn({files:{type:wt(Array),default:()=>oo([])},disabled:{type:Boolean,default:!1},handlePreview:{type:wt(Function),default:ys},listType:{type:String,values:eN,default:"text"},crossorigin:{type:wt(String)}}),w3e={remove:e=>!!e},S3e=xe({name:"ElUploadList"}),C3e=xe({...S3e,props:x3e,emits:w3e,setup(e,{emit:n}){const s=e,{t:l}=Oi(),d=dn("upload"),m=dn("icon"),b=dn("list"),r=Ba(),E=Re(!1),M=se(()=>[d.b("list"),d.bm("list",s.listType),d.is("disabled",s.disabled)]),A=P=>{n("remove",P)};return(P,D)=>(Z(),Bt(TP,{tag:"ul",class:ge(w(M)),name:w(b).b()},{default:mt(()=>[(Z(!0),ue(cr,null,Ei(P.files,(z,F)=>(Z(),ue("li",{key:z.uid||z.name,class:ge([w(d).be("list","item"),w(d).is(z.status),{focusing:E.value}]),tabindex:"0",onKeydown:Ps(N=>!w(r)&&A(z),["delete"]),onFocus:N=>E.value=!0,onBlur:N=>E.value=!1,onClick:N=>E.value=!1},[It(P.$slots,"default",{file:z,index:F},()=>[P.listType==="picture"||z.status!=="uploading"&&P.listType==="picture-card"?(Z(),ue("img",{key:0,class:ge(w(d).be("list","item-thumbnail")),src:z.url,crossorigin:P.crossorigin,alt:""},null,10,["src","crossorigin"])):At("v-if",!0),z.status==="uploading"||P.listType!=="picture-card"?(Z(),ue("div",{key:1,class:ge(w(d).be("list","item-info"))},[ae("a",{class:ge(w(d).be("list","item-name")),onClick:Er(N=>P.handlePreview(z),["prevent"])},[st(w(rr),{class:ge(w(m).m("document"))},{default:mt(()=>[st(w(dO))]),_:1},8,["class"]),ae("span",{class:ge(w(d).be("list","item-file-name")),title:z.name},gn(z.name),11,["title"])],10,["onClick"]),z.status==="uploading"?(Z(),Bt(w(Ez),{key:0,type:P.listType==="picture-card"?"circle":"line","stroke-width":P.listType==="picture-card"?6:2,percentage:Number(z.percentage),style:fr(P.listType==="picture-card"?"":"margin-top: 0.5rem")},null,8,["type","stroke-width","percentage","style"])):At("v-if",!0)],2)):At("v-if",!0),ae("label",{class:ge(w(d).be("list","item-status-label"))},[P.listType==="text"?(Z(),Bt(w(rr),{key:0,class:ge([w(m).m("upload-success"),w(m).m("circle-check")])},{default:mt(()=>[st(w(wx))]),_:1},8,["class"])):["picture-card","picture"].includes(P.listType)?(Z(),Bt(w(rr),{key:1,class:ge([w(m).m("upload-success"),w(m).m("check")])},{default:mt(()=>[st(w(d0))]),_:1},8,["class"])):At("v-if",!0)],2),w(r)?At("v-if",!0):(Z(),Bt(w(rr),{key:2,class:ge(w(m).m("close")),onClick:N=>A(z)},{default:mt(()=>[st(w(du))]),_:2},1032,["class","onClick"])),At(" Due to close btn only appears when li gets focused disappears after li gets blurred, thus keyboard navigation can never reach close btn"),At(" This is a bug which needs to be fixed "),At(" TODO: Fix the incorrect navigation interaction "),w(r)?At("v-if",!0):(Z(),ue("i",{key:3,class:ge(w(m).m("close-tip"))},gn(w(l)("el.upload.deleteTip")),3)),P.listType==="picture-card"?(Z(),ue("span",{key:4,class:ge(w(d).be("list","item-actions"))},[ae("span",{class:ge(w(d).be("list","item-preview")),onClick:N=>P.handlePreview(z)},[st(w(rr),{class:ge(w(m).m("zoom-in"))},{default:mt(()=>[st(w(qS))]),_:1},8,["class"])],10,["onClick"]),w(r)?At("v-if",!0):(Z(),ue("span",{key:0,class:ge(w(d).be("list","item-delete")),onClick:N=>A(z)},[st(w(rr),{class:ge(w(m).m("delete"))},{default:mt(()=>[st(w(cO))]),_:1},8,["class"])],10,["onClick"]))],2)):At("v-if",!0)])],42,["onKeydown","onFocus","onBlur","onClick"]))),128)),It(P.$slots,"append")]),_:3},8,["class","name"]))}});var XA=En(C3e,[["__file","upload-list.vue"]]);const E3e=bn({disabled:{type:Boolean,default:!1}}),T3e={file:e=>mn(e)},nN="ElUploadDrag",I3e=xe({name:nN}),k3e=xe({...I3e,props:E3e,emits:T3e,setup(e,{emit:n}){Gn(Q9)||No(nN,"usage: <el-upload><el-upload-dragger /></el-upload>");const l=dn("upload"),d=Re(!1),m=Ba(),b=E=>{if(m.value)return;d.value=!1,E.stopPropagation();const M=Array.from(E.dataTransfer.files),A=E.dataTransfer.items||[];M.forEach((P,D)=>{var z;const F=A[D],N=(z=F?.webkitGetAsEntry)==null?void 0:z.call(F);N&&(P.isDirectory=N.isDirectory)}),n("file",M)},r=()=>{m.value||(d.value=!0)};return(E,M)=>(Z(),ue("div",{class:ge([w(l).b("dragger"),w(l).is("dragover",d.value)]),onDrop:Er(b,["prevent"]),onDragover:Er(r,["prevent"]),onDragleave:Er(A=>d.value=!1,["prevent"])},[It(E.$slots,"default")],42,["onDrop","onDragover","onDragleave"]))}});var M3e=En(k3e,[["__file","upload-dragger.vue"]]);const A3e=bn({...tN,beforeUpload:{type:wt(Function),default:ys},onRemove:{type:wt(Function),default:ys},onStart:{type:wt(Function),default:ys},onSuccess:{type:wt(Function),default:ys},onProgress:{type:wt(Function),default:ys},onError:{type:wt(Function),default:ys},onExceed:{type:wt(Function),default:ys}}),R3e=xe({name:"ElUploadContent",inheritAttrs:!1}),P3e=xe({...R3e,props:A3e,setup(e,{expose:n}){const s=e,l=dn("upload"),d=Ba(),m=Zs({}),b=Zs(),r=N=>{if(N.length===0)return;const{autoUpload:q,limit:G,fileList:ie,multiple:W,onStart:Y,onExceed:J}=s;if(G&&ie.length+N.length>G){J(N,ie);return}W||(N=N.slice(0,1));for(const re of N){const he=re;he.uid=Z6(),Y(he),q&&E(he)}},E=async N=>{if(b.value.value="",!s.beforeUpload)return A(N);let q,G={};try{const W=s.data,Y=s.beforeUpload(N);G=bv(s.data)?Ib(s.data):s.data,q=await Y,bv(s.data)&&la(W,G)&&(G=Ib(s.data))}catch{q=!1}if(q===!1){s.onRemove(N);return}let ie=N;q instanceof Blob&&(q instanceof File?ie=q:ie=new File([q],N.name,{type:N.type})),A(Object.assign(ie,{uid:N.uid}),G)},M=async(N,q)=>hr(N)?N(q):N,A=async(N,q)=>{const{headers:G,data:ie,method:W,withCredentials:Y,name:J,action:re,onProgress:he,onSuccess:fe,onError:ce,httpRequest:me}=s;try{q=await M(q??ie,N)}catch{s.onRemove(N);return}const{uid:we}=N,ye={headers:G||{},withCredentials:Y,file:N,data:q,method:W,filename:J,action:re,onProgress:Ne=>{he(Ne,N)},onSuccess:Ne=>{fe(Ne,N),delete m.value[we]},onError:Ne=>{ce(Ne,N),delete m.value[we]}},Ue=me(ye);m.value[we]=Ue,Ue instanceof Promise&&Ue.then(ye.onSuccess,ye.onError)},P=N=>{const q=N.target.files;q&&r(Array.from(q))},D=()=>{d.value||(b.value.value="",b.value.click())},z=()=>{D()};return n({abort:N=>{eO(m.value).filter(N?([G])=>String(N.uid)===G:()=>!0).forEach(([G,ie])=>{ie instanceof XMLHttpRequest&&ie.abort(),delete m.value[G]})},upload:E}),(N,q)=>(Z(),ue("div",{class:ge([w(l).b(),w(l).m(N.listType),w(l).is("drag",N.drag),w(l).is("disabled",w(d))]),tabindex:w(d)?"-1":"0",onClick:D,onKeydown:Ps(Er(z,["self"]),["enter","space"])},[N.drag?(Z(),Bt(M3e,{key:0,disabled:w(d),onFile:r},{default:mt(()=>[It(N.$slots,"default")]),_:3},8,["disabled"])):It(N.$slots,"default",{key:1}),ae("input",{ref_key:"inputRef",ref:b,class:ge(w(l).e("input")),name:N.name,disabled:w(d),multiple:N.multiple,accept:N.accept,type:"file",onChange:P,onClick:Er(()=>{},["stop"])},null,42,["name","disabled","multiple","accept","onClick"])],42,["tabindex","onKeydown"]))}});var JA=En(P3e,[["__file","upload-content.vue"]]);const QA="ElUpload",eR=e=>{var n;(n=e.url)!=null&&n.startsWith("blob:")&&URL.revokeObjectURL(e.url)},L3e=(e,n)=>{const s=qL(e,"fileList",void 0,{passive:!0}),l=z=>s.value.find(F=>F.uid===z.uid);function d(z){var F;(F=n.value)==null||F.abort(z)}function m(z=["ready","uploading","success","fail"]){s.value=s.value.filter(F=>!z.includes(F.status))}function b(z){s.value=s.value.filter(F=>F.uid!==z.uid)}const r=(z,F)=>{const N=l(F);N&&(console.error(z),N.status="fail",b(N),e.onError(z,N,s.value),e.onChange(N,s.value))},E=(z,F)=>{const N=l(F);N&&(e.onProgress(z,N,s.value),N.status="uploading",N.percentage=Math.round(z.percent))},M=(z,F)=>{const N=l(F);N&&(N.status="success",N.response=z,e.onSuccess(z,N,s.value),e.onChange(N,s.value))},A=z=>{ea(z.uid)&&(z.uid=Z6());const F={name:z.name,percentage:0,status:"ready",size:z.size,raw:z,uid:z.uid};if(e.listType==="picture-card"||e.listType==="picture")try{F.url=URL.createObjectURL(z)}catch(N){N.message,e.onError(N,F,s.value)}s.value=[...s.value,F],e.onChange(F,s.value)},P=async z=>{const F=z instanceof File?l(z):z;F||No(QA,"file to be removed not found");const N=q=>{d(q),b(q),e.onRemove(q,s.value),eR(q)};e.beforeRemove?await e.beforeRemove(F,s.value)!==!1&&N(F):N(F)};function D(){s.value.filter(({status:z})=>z==="ready").forEach(({raw:z})=>{var F;return z&&((F=n.value)==null?void 0:F.upload(z))})}return on(()=>e.listType,z=>{z!=="picture-card"&&z!=="picture"||(s.value=s.value.map(F=>{const{raw:N,url:q}=F;if(!q&&N)try{F.url=URL.createObjectURL(N)}catch(G){e.onError(G,F,s.value)}return F}))}),on(s,z=>{for(const F of z)F.uid||(F.uid=Z6()),F.status||(F.status="success")},{immediate:!0,deep:!0}),{uploadFiles:s,abort:d,clearFiles:m,handleError:r,handleProgress:E,handleStart:A,handleSuccess:M,handleRemove:P,submit:D,revokeFileObjectURL:eR}},O3e=xe({name:"ElUpload"}),D3e=xe({...O3e,props:b3e,setup(e,{expose:n}){const s=e,l=Ba(),d=Zs(),{abort:m,submit:b,clearFiles:r,uploadFiles:E,handleStart:M,handleError:A,handleRemove:P,handleSuccess:D,handleProgress:z,revokeFileObjectURL:F}=L3e(s,d),N=se(()=>s.listType==="picture-card"),q=se(()=>({...s,fileList:E.value,onStart:M,onProgress:z,onSuccess:D,onError:A,onRemove:P}));return Ls(()=>{E.value.forEach(F)}),Ti(Q9,{accept:cs(s,"accept")}),n({abort:m,submit:b,clearFiles:r,handleStart:M,handleRemove:P}),(G,ie)=>(Z(),ue("div",null,[w(N)&&G.showFileList?(Z(),Bt(XA,{key:0,disabled:w(l),"list-type":G.listType,files:w(E),crossorigin:G.crossorigin,"handle-preview":G.onPreview,onRemove:w(P)},cu({append:mt(()=>[st(JA,pi({ref_key:"uploadRef",ref:d},w(q)),{default:mt(()=>[G.$slots.trigger?It(G.$slots,"trigger",{key:0}):At("v-if",!0),!G.$slots.trigger&&G.$slots.default?It(G.$slots,"default",{key:1}):At("v-if",!0)]),_:3},16)]),_:2},[G.$slots.file?{name:"default",fn:mt(({file:W,index:Y})=>[It(G.$slots,"file",{file:W,index:Y})])}:void 0]),1032,["disabled","list-type","files","crossorigin","handle-preview","onRemove"])):At("v-if",!0),!w(N)||w(N)&&!G.showFileList?(Z(),Bt(JA,pi({key:1,ref_key:"uploadRef",ref:d},w(q)),{default:mt(()=>[G.$slots.trigger?It(G.$slots,"trigger",{key:0}):At("v-if",!0),!G.$slots.trigger&&G.$slots.default?It(G.$slots,"default",{key:1}):At("v-if",!0)]),_:3},16)):At("v-if",!0),G.$slots.trigger?It(G.$slots,"default",{key:2}):At("v-if",!0),It(G.$slots,"tip"),!w(N)&&G.showFileList?(Z(),Bt(XA,{key:3,disabled:w(l),"list-type":G.listType,files:w(E),crossorigin:G.crossorigin,"handle-preview":G.onPreview,onRemove:w(P)},cu({_:2},[G.$slots.file?{name:"default",fn:mt(({file:W,index:Y})=>[It(G.$slots,"file",{file:W,index:Y})])}:void 0]),1032,["disabled","list-type","files","crossorigin","handle-preview","onRemove"])):At("v-if",!0)]))}});var z3e=En(D3e,[["__file","upload.vue"]]);const N3e=Gr(z3e),F3e=bn({zIndex:{type:Number,default:9},rotate:{type:Number,default:-22},width:Number,height:Number,image:String,content:{type:wt([String,Array]),default:"Element Plus"},font:{type:wt(Object)},gap:{type:wt(Array),default:()=>[100,100]},offset:{type:wt(Array)}});function B3e(e){return e.replace(/([A-Z])/g,"-$1").toLowerCase()}function V3e(e){return Object.keys(e).map(n=>`${B3e(n)}: ${e[n]};`).join(" ")}function $3e(){return window.devicePixelRatio||1}const H3e=(e,n)=>{let s=!1;return e.removedNodes.length&&n&&(s=Array.from(e.removedNodes).includes(n)),e.type==="attributes"&&e.target===n&&(s=!0),s},rN=3;function w4(e,n,s=1){const l=document.createElement("canvas"),d=l.getContext("2d"),m=e*s,b=n*s;return l.setAttribute("width",`${m}px`),l.setAttribute("height",`${b}px`),d.save(),[d,l,m,b]}function U3e(){function e(n,s,l,d,m,b,r,E){const[M,A,P,D]=w4(d,m,l);if(n instanceof HTMLImageElement)M.drawImage(n,0,0,P,D);else{const{color:We,fontSize:ft,fontStyle:at,fontWeight:ct,fontFamily:Mt,textAlign:Ct,textBaseline:gt}=b,Ke=Number(ft)*l;M.font=`${at} normal ${ct} ${Ke}px/${m}px ${Mt}`,M.fillStyle=We,M.textAlign=Ct,M.textBaseline=gt;const Lt=mn(n)?n:[n];Lt?.forEach((xn,Ht)=>{M.fillText(xn??"",P/2,Ht*(Ke+rN*l))})}const z=Math.PI/180*Number(s),F=Math.max(d,m),[N,q,G]=w4(F,F,l);N.translate(G/2,G/2),N.rotate(z),P>0&&D>0&&N.drawImage(A,-P/2,-D/2);function ie(We,ft){const at=We*Math.cos(z)-ft*Math.sin(z),ct=We*Math.sin(z)+ft*Math.cos(z);return[at,ct]}let W=0,Y=0,J=0,re=0;const he=P/2,fe=D/2;[[0-he,0-fe],[0+he,0-fe],[0+he,0+fe],[0-he,0+fe]].forEach(([We,ft])=>{const[at,ct]=ie(We,ft);W=Math.min(W,at),Y=Math.max(Y,at),J=Math.min(J,ct),re=Math.max(re,ct)});const me=W+G/2,we=J+G/2,ye=Y-W,Ue=re-J,Ne=r*l,Pe=E*l,ve=(ye+Ne)*2,$e=Ue+Pe,[Te,Ae]=w4(ve,$e);function Ve(We=0,ft=0){Te.drawImage(q,me,we,ye,Ue,We,ft,ye,Ue)}return Ve(),Ve(ye+Ne,-Ue/2-Pe/2),Ve(ye+Ne,+Ue/2+Pe/2),[Ae.toDataURL(),ve/l,$e/l]}return e}const j3e=xe({name:"ElWatermark"}),G3e=xe({...j3e,props:F3e,setup(e){const n=e,s={position:"relative"},l=se(()=>{var me,we;return(we=(me=n.font)==null?void 0:me.color)!=null?we:"rgba(0,0,0,.15)"}),d=se(()=>{var me,we;return(we=(me=n.font)==null?void 0:me.fontSize)!=null?we:16}),m=se(()=>{var me,we;return(we=(me=n.font)==null?void 0:me.fontWeight)!=null?we:"normal"}),b=se(()=>{var me,we;return(we=(me=n.font)==null?void 0:me.fontStyle)!=null?we:"normal"}),r=se(()=>{var me,we;return(we=(me=n.font)==null?void 0:me.fontFamily)!=null?we:"sans-serif"}),E=se(()=>{var me,we;return(we=(me=n.font)==null?void 0:me.textAlign)!=null?we:"center"}),M=se(()=>{var me,we;return(we=(me=n.font)==null?void 0:me.textBaseline)!=null?we:"hanging"}),A=se(()=>n.gap[0]),P=se(()=>n.gap[1]),D=se(()=>A.value/2),z=se(()=>P.value/2),F=se(()=>{var me,we;return(we=(me=n.offset)==null?void 0:me[0])!=null?we:D.value}),N=se(()=>{var me,we;return(we=(me=n.offset)==null?void 0:me[1])!=null?we:z.value}),q=()=>{const me={zIndex:n.zIndex,position:"absolute",left:0,top:0,width:"100%",height:"100%",pointerEvents:"none",backgroundRepeat:"repeat"};let we=F.value-D.value,ye=N.value-z.value;return we>0&&(me.left=`${we}px`,me.width=`calc(100% - ${we}px)`,we=0),ye>0&&(me.top=`${ye}px`,me.height=`calc(100% - ${ye}px)`,ye=0),me.backgroundPosition=`${we}px ${ye}px`,me},G=Zs(null),ie=Zs(),W=Re(!1),Y=()=>{ie.value&&(ie.value.remove(),ie.value=void 0)},J=(me,we)=>{var ye;G.value&&ie.value&&(W.value=!0,ie.value.setAttribute("style",V3e({...q(),backgroundImage:`url('${me}')`,backgroundSize:`${Math.floor(we)}px`})),(ye=G.value)==null||ye.append(ie.value),setTimeout(()=>{W.value=!1}))},re=me=>{let we=120,ye=64;const{image:Ue,content:Ne,width:Pe,height:ve,rotate:$e}=n;if(!Ue&&me.measureText){me.font=`${Number(d.value)}px ${r.value}`;const Te=mn(Ne)?Ne:[Ne];let Ae=0,Ve=0;Te.forEach(at=>{const{width:ct,fontBoundingBoxAscent:Mt,fontBoundingBoxDescent:Ct,actualBoundingBoxAscent:gt,actualBoundingBoxDescent:Ke}=me.measureText(at),Lt=Li(Mt)?gt+Ke:Mt+Ct;ct>Ae&&(Ae=Math.ceil(ct)),Lt>Ve&&(Ve=Math.ceil(Lt))}),we=Ae,ye=Ve*Te.length+(Te.length-1)*rN;const We=Math.PI/180*Number($e),ft=Math.ceil(Math.abs(Math.sin(We)*ye)/2);we+=ft}return[Pe??we,ve??ye]},he=U3e(),fe=()=>{const we=document.createElement("canvas").getContext("2d"),ye=n.image,Ue=n.content,Ne=n.rotate;if(we){ie.value||(ie.value=document.createElement("div"));const Pe=$3e(),[ve,$e]=re(we),Te=Ae=>{const[Ve,We]=he(Ae||"",Ne,Pe,ve,$e,{color:l.value,fontSize:d.value,fontStyle:b.value,fontWeight:m.value,fontFamily:r.value,textAlign:E.value,textBaseline:M.value},A.value,P.value);J(Ve,We)};if(ye){const Ae=new Image;Ae.onload=()=>{Te(Ae)},Ae.onerror=()=>{Te(Ue)},Ae.crossOrigin="anonymous",Ae.referrerPolicy="no-referrer",Ae.src=ye}else Te(Ue)}};return Zr(()=>{fe()}),on(()=>n,()=>{fe()},{deep:!0,flush:"post"}),Ls(()=>{Y()}),GL(G,me=>{W.value||me.forEach(we=>{H3e(we,ie.value)&&(Y(),fe())})},{attributes:!0,subtree:!0,childList:!0}),(me,we)=>(Z(),ue("div",{ref_key:"containerRef",ref:G,style:fr([s])},[It(me.$slots,"default")],4))}});var q3e=En(G3e,[["__file","watermark.vue"]]);const W3e=Gr(q3e),K3e=bn({zIndex:{type:Number,default:1001},visible:Boolean,fill:{type:String,default:"rgba(0,0,0,0.5)"},pos:{type:wt(Object)},targetAreaClickable:{type:Boolean,default:!0}}),Y3e=(e,n,s,l,d)=>{const m=Re(null),b=()=>{let P;return ir(e.value)?P=document.querySelector(e.value):hr(e.value)?P=e.value():P=e.value,P},r=()=>{const P=b();if(!P||!n.value){m.value=null;return}Z3e(P)||P.scrollIntoView(d.value);const{left:D,top:z,width:F,height:N}=P.getBoundingClientRect();m.value={left:D,top:z,width:F,height:N,radius:0}};Zr(()=>{on([n,e],()=>{r()},{immediate:!0}),window.addEventListener("resize",r)}),Ls(()=>{window.removeEventListener("resize",r)});const E=P=>{var D;return(D=mn(s.value.offset)?s.value.offset[P]:s.value.offset)!=null?D:6},M=se(()=>{var P;if(!m.value)return m.value;const D=E(0),z=E(1),F=((P=s.value)==null?void 0:P.radius)||2;return{left:m.value.left-D,top:m.value.top-z,width:m.value.width+D*2,height:m.value.height+z*2,radius:F}}),A=se(()=>{const P=b();return!l.value||!P||!window.DOMRect?P||void 0:{getBoundingClientRect(){var D,z,F,N;return window.DOMRect.fromRect({width:((D=M.value)==null?void 0:D.width)||0,height:((z=M.value)==null?void 0:z.height)||0,x:((F=M.value)==null?void 0:F.left)||0,y:((N=M.value)==null?void 0:N.top)||0})}}});return{mergedPosInfo:M,triggerTarget:A}},Hx=Symbol("ElTour");function Z3e(e){const n=window.innerWidth||document.documentElement.clientWidth,s=window.innerHeight||document.documentElement.clientHeight,{top:l,right:d,bottom:m,left:b}=e.getBoundingClientRect();return l>=0&&b>=0&&d<=n&&m<=s}const X3e=(e,n,s,l,d,m,b,r)=>{const E=Re(),M=Re(),A=Re({}),P={x:E,y:M,placement:l,strategy:d,middlewareData:A},D=se(()=>{const G=[N9(w(m)),twe(),ewe(),J3e()];return w(r)&&w(s)&&G.push(F9({element:w(s)})),G}),z=async()=>{if(!Pi)return;const G=w(e),ie=w(n);if(!G||!ie)return;const W=await B9(G,ie,{placement:w(l),strategy:w(d),middleware:w(D)});$g(P).forEach(Y=>{P[Y].value=W[Y]})},F=se(()=>{if(!w(e))return{position:"fixed",top:"50%",left:"50%",transform:"translate3d(-50%, -50%, 0)",maxWidth:"100vw",zIndex:w(b)};const{overflow:G}=w(A);return{position:w(d),zIndex:w(b),top:w(M)!=null?`${w(M)}px`:"",left:w(E)!=null?`${w(E)}px`:"",maxWidth:G?.maxWidth?`${G?.maxWidth}px`:""}}),N=se(()=>{if(!w(r))return{};const{arrow:G}=w(A);return{left:G?.x!=null?`${G?.x}px`:"",top:G?.y!=null?`${G?.y}px`:""}});let q;return Zr(()=>{const G=w(e),ie=w(n);G&&ie&&(q=Jxe(G,ie,z)),Da(()=>{z()})}),Ls(()=>{q&&q()}),{update:z,contentStyle:F,arrowStyle:N}},J3e=()=>({name:"overflow",async fn(e){const n=await Qxe(e);let s=0;return n.left>0&&(s=n.left),n.right>0&&(s=n.right),{data:{maxWidth:e.rects.floating.width-s}}}}),Q3e=xe({name:"ElTourMask",inheritAttrs:!1}),e4e=xe({...Q3e,props:K3e,setup(e){const n=e,{ns:s}=Gn(Hx),l=se(()=>{var r,E;return(E=(r=n.pos)==null?void 0:r.radius)!=null?E:2}),d=se(()=>{const r=l.value,E=`a${r},${r} 0 0 1`;return{topRight:`${E} ${r},${r}`,bottomRight:`${E} ${-r},${r}`,bottomLeft:`${E} ${-r},${-r}`,topLeft:`${E} ${r},${-r}`}}),m=se(()=>{const r=window.innerWidth,E=window.innerHeight,M=d.value,A=`M${r},0 L0,0 L0,${E} L${r},${E} L${r},0 Z`,P=l.value;return n.pos?`${A} M${n.pos.left+P},${n.pos.top} h${n.pos.width-P*2} ${M.topRight} v${n.pos.height-P*2} ${M.bottomRight} h${-n.pos.width+P*2} ${M.bottomLeft} v${-n.pos.height+P*2} ${M.topLeft} z`:A}),b=se(()=>({fill:n.fill,pointerEvents:"auto",cursor:"auto"}));return C8(cs(n,"visible"),{ns:s}),(r,E)=>r.visible?(Z(),ue("div",pi({key:0,class:w(s).e("mask"),style:{position:"fixed",left:0,right:0,top:0,bottom:0,zIndex:r.zIndex,pointerEvents:r.pos&&r.targetAreaClickable?"none":"auto"}},r.$attrs),[(Z(),ue("svg",{style:{width:"100%",height:"100%"}},[ae("path",{class:ge(w(s).e("hollow")),style:fr(w(b)),d:w(m)},null,14,["d"])]))],16)):At("v-if",!0)}});var t4e=En(e4e,[["__file","mask.vue"]]);const n4e=["absolute","fixed"],r4e=["top-start","top-end","top","bottom-start","bottom-end","bottom","left-start","left-end","left","right-start","right-end","right"],aC=bn({placement:{type:wt(String),values:r4e,default:"bottom"},reference:{type:wt(Object),default:null},strategy:{type:wt(String),values:n4e,default:"absolute"},offset:{type:Number,default:10},showArrow:Boolean,zIndex:{type:Number,default:2001}}),i4e={close:()=>!0},s4e=xe({name:"ElTourContent"}),o4e=xe({...s4e,props:aC,emits:i4e,setup(e,{emit:n}){const s=e,l=Re(s.placement),d=Re(s.strategy),m=Re(null),b=Re(null);on(()=>s.placement,()=>{l.value=s.placement});const{contentStyle:r,arrowStyle:E}=X3e(cs(s,"reference"),m,b,l,d,cs(s,"offset"),cs(s,"zIndex"),cs(s,"showArrow")),M=se(()=>l.value.split("-")[0]),{ns:A}=Gn(Hx),P=()=>{n("close")},D=z=>{z.detail.focusReason==="pointer"&&z.preventDefault()};return(z,F)=>(Z(),ue("div",{ref_key:"contentRef",ref:m,style:fr(w(r)),class:ge(w(A).e("content")),"data-side":w(M),tabindex:"-1"},[st(w(h0),{loop:"",trapped:"","focus-start-el":"container","focus-trap-el":m.value||void 0,onReleaseRequested:P,onFocusoutPrevented:D},{default:mt(()=>[It(z.$slots,"default")]),_:3},8,["focus-trap-el"]),z.showArrow?(Z(),ue("span",{key:0,ref_key:"arrowRef",ref:b,style:fr(w(E)),class:ge(w(A).e("arrow"))},null,6)):At("v-if",!0)],14,["data-side"]))}});var a4e=En(o4e,[["__file","content.vue"]]),l4e=xe({name:"ElTourSteps",props:{current:{type:Number,default:0}},emits:["update-total"],setup(e,{slots:n,emit:s}){let l=0;return()=>{var d,m;const b=(d=n.default)==null?void 0:d.call(n),r=[];let E=0;function M(A){mn(A)&&A.forEach(P=>{var D;((D=P?.type||{})==null?void 0:D.name)==="ElTourStep"&&(r.push(P),E+=1)})}return b.length&&M(ah((m=b[0])==null?void 0:m.children)),l!==E&&(l=E,s("update-total",E)),r.length?r[e.current]:null}}});const u4e=bn({modelValue:Boolean,current:{type:Number,default:0},showArrow:{type:Boolean,default:!0},showClose:{type:Boolean,default:!0},closeIcon:{type:bs},placement:aC.placement,contentStyle:{type:wt([Object])},mask:{type:wt([Boolean,Object]),default:!0},gap:{type:wt(Object),default:()=>({offset:6,radius:2})},zIndex:{type:Number},scrollIntoViewOptions:{type:wt([Boolean,Object]),default:()=>({block:"center"})},type:{type:wt(String)},appendTo:{type:Ax.to.type,default:"body"},closeOnPressEscape:{type:Boolean,default:!0},targetAreaClickable:{type:Boolean,default:!0}}),c4e={[Nr]:e=>Ts(e),"update:current":e=>gr(e),close:e=>gr(e),finish:()=>!0,change:e=>gr(e)},d4e=xe({name:"ElTour"}),h4e=xe({...d4e,props:u4e,emits:c4e,setup(e,{emit:n}){const s=e,l=dn("tour"),d=Re(0),m=Re(),b=qL(s,"current",n,{passive:!0}),r=se(()=>{var ce;return(ce=m.value)==null?void 0:ce.target}),E=se(()=>[l.b(),q.value==="primary"?l.m("primary"):""]),M=se(()=>{var ce;return((ce=m.value)==null?void 0:ce.placement)||s.placement}),A=se(()=>{var ce,me;return(me=(ce=m.value)==null?void 0:ce.contentStyle)!=null?me:s.contentStyle}),P=se(()=>{var ce,me;return(me=(ce=m.value)==null?void 0:ce.mask)!=null?me:s.mask}),D=se(()=>!!P.value&&s.modelValue),z=se(()=>Ts(P.value)?void 0:P.value),F=se(()=>{var ce,me;return!!r.value&&((me=(ce=m.value)==null?void 0:ce.showArrow)!=null?me:s.showArrow)}),N=se(()=>{var ce,me;return(me=(ce=m.value)==null?void 0:ce.scrollIntoViewOptions)!=null?me:s.scrollIntoViewOptions}),q=se(()=>{var ce,me;return(me=(ce=m.value)==null?void 0:ce.type)!=null?me:s.type}),{nextZIndex:G}=u0(),ie=G(),W=se(()=>{var ce;return(ce=s.zIndex)!=null?ce:ie}),{mergedPosInfo:Y,triggerTarget:J}=Y3e(r,cs(s,"modelValue"),cs(s,"gap"),P,N);on(()=>s.modelValue,ce=>{ce||(b.value=0)});const re=()=>{s.closeOnPressEscape&&(n(Nr,!1),n("close",b.value))},he=ce=>{d.value=ce},fe=qo();return Ti(Hx,{currentStep:m,current:b,total:d,showClose:cs(s,"showClose"),closeIcon:cs(s,"closeIcon"),mergedType:q,ns:l,slots:fe,updateModelValue(ce){n(Nr,ce)},onClose(){n("close",b.value)},onFinish(){n("finish")},onChange(){n(mi,b.value)}}),(ce,me)=>(Z(),ue(cr,null,[st(w(f0),{to:ce.appendTo},{default:mt(()=>{var we,ye;return[ae("div",pi({class:w(E)},ce.$attrs),[st(t4e,{visible:w(D),fill:(we=w(z))==null?void 0:we.color,style:fr((ye=w(z))==null?void 0:ye.style),pos:w(Y),"z-index":w(W),"target-area-clickable":ce.targetAreaClickable},null,8,["visible","fill","style","pos","z-index","target-area-clickable"]),ce.modelValue?(Z(),Bt(a4e,{key:w(b),reference:w(J),placement:w(M),"show-arrow":w(F),"z-index":w(W),style:fr(w(A)),onClose:re},{default:mt(()=>[st(w(l4e),{current:w(b),onUpdateTotal:he},{default:mt(()=>[It(ce.$slots,"default")]),_:3},8,["current"])]),_:3},8,["reference","placement","show-arrow","z-index","style"])):At("v-if",!0)],16)]}),_:3},8,["to"]),At(" just for IDE "),At("v-if",!0)],64))}});var f4e=En(h4e,[["__file","tour.vue"]]);const p4e=bn({target:{type:wt([String,Object,Function])},title:String,description:String,showClose:{type:Boolean,default:void 0},closeIcon:{type:bs},showArrow:{type:Boolean,default:void 0},placement:aC.placement,mask:{type:wt([Boolean,Object]),default:void 0},contentStyle:{type:wt([Object])},prevButtonProps:{type:wt(Object)},nextButtonProps:{type:wt(Object)},scrollIntoViewOptions:{type:wt([Boolean,Object]),default:void 0},type:{type:wt(String)}}),m4e={close:()=>!0},g4e=xe({name:"ElTourStep"}),_4e=xe({...g4e,props:p4e,emits:m4e,setup(e,{emit:n}){const s=e,{Close:l}=IO,{t:d}=Oi(),{currentStep:m,current:b,total:r,showClose:E,closeIcon:M,mergedType:A,ns:P,slots:D,updateModelValue:z,onClose:F,onFinish:N,onChange:q}=Gn(Hx);on(s,fe=>{m.value=fe},{immediate:!0});const G=se(()=>{var fe;return(fe=s.showClose)!=null?fe:E.value}),ie=se(()=>{var fe,ce;return(ce=(fe=s.closeIcon)!=null?fe:M.value)!=null?ce:l}),W=fe=>{if(fe)return _K(fe,["children","onClick"])},Y=()=>{var fe,ce;b.value-=1,(fe=s.prevButtonProps)!=null&&fe.onClick&&((ce=s.prevButtonProps)==null||ce.onClick()),q()},J=()=>{var fe;b.value>=r.value-1?re():b.value+=1,(fe=s.nextButtonProps)!=null&&fe.onClick&&s.nextButtonProps.onClick(),q()},re=()=>{he(),N()},he=()=>{z(!1),F(),n("close")};return(fe,ce)=>(Z(),ue(cr,null,[w(G)?(Z(),ue("button",{key:0,"aria-label":"Close",class:ge(w(P).e("closebtn")),type:"button",onClick:he},[st(w(rr),{class:ge(w(P).e("close"))},{default:mt(()=>[(Z(),Bt(si(w(ie))))]),_:1},8,["class"])],2)):At("v-if",!0),ae("header",{class:ge([w(P).e("header"),{"show-close":w(E)}])},[It(fe.$slots,"header",{},()=>[ae("span",{role:"heading",class:ge(w(P).e("title"))},gn(fe.title),3)])],2),ae("div",{class:ge(w(P).e("body"))},[It(fe.$slots,"default",{},()=>[ae("span",null,gn(fe.description),1)])],2),ae("footer",{class:ge(w(P).e("footer"))},[ae("div",{class:ge(w(P).b("indicators"))},[w(D).indicators?(Z(),Bt(si(w(D).indicators),{key:0,current:w(b),total:w(r)},null,8,["current","total"])):(Z(!0),ue(cr,{key:1},Ei(w(r),(me,we)=>(Z(),ue("span",{key:me,class:ge([w(P).b("indicator"),we===w(b)?"is-active":""])},null,2))),128))],2),ae("div",{class:ge(w(P).b("buttons"))},[w(b)>0?(Z(),Bt(w(ua),pi({key:0,size:"small",type:w(A)},W(fe.prevButtonProps),{onClick:Y}),{default:mt(()=>{var me,we;return[ei(gn((we=(me=fe.prevButtonProps)==null?void 0:me.children)!=null?we:w(d)("el.tour.previous")),1)]}),_:1},16,["type"])):At("v-if",!0),w(b)<=w(r)-1?(Z(),Bt(w(ua),pi({key:1,size:"small",type:w(A)==="primary"?"default":"primary"},W(fe.nextButtonProps),{onClick:J}),{default:mt(()=>{var me,we;return[ei(gn((we=(me=fe.nextButtonProps)==null?void 0:me.children)!=null?we:w(b)===w(r)-1?w(d)("el.tour.finish"):w(d)("el.tour.next")),1)]}),_:1},16,["type"])):At("v-if",!0)],2)],2)],64))}});var iN=En(_4e,[["__file","step.vue"]]);const v4e=Gr(f4e,{TourStep:iN}),y4e=ao(iN),b4e=bn({container:{type:wt([String,Object])},offset:{type:Number,default:0},bound:{type:Number,default:15},duration:{type:Number,default:300},marker:{type:Boolean,default:!0},type:{type:wt(String),default:"default"},direction:{type:wt(String),default:"vertical"},selectScrollTop:{type:Boolean,default:!1}}),x4e={change:e=>ir(e),click:(e,n)=>e instanceof MouseEvent&&(ir(n)||Li(n))},sN=Symbol("anchor"),M2=e=>{if(!Pi||e==="")return null;if(ir(e))try{return document.querySelector(e)}catch{return null}return e};function w4e(e){let n=0;const s=(...l)=>{n&&jp(n),n=Tf(()=>{e(...l),n=0})};return s.cancel=()=>{jp(n),n=0},s}const S4e=xe({name:"ElAnchor"}),C4e=xe({...S4e,props:b4e,emits:x4e,setup(e,{expose:n,emit:s}){const l=e,d=Re(""),m=Re(null),b=Re(null),r=Re(),E={};let M=!1,A=0;const P=dn("anchor"),D=se(()=>[P.b(),l.type==="underline"?P.m("underline"):"",P.m(l.direction)]),z=fe=>{E[fe.href]=fe.el},F=fe=>{delete E[fe]},N=fe=>{d.value!==fe&&(d.value=fe,s(mi,fe))};let q=null;const G=fe=>{if(!r.value)return;const ce=M2(fe);if(!ce)return;q&&q(),M=!0;const me=tM(ce,r.value),we=a6(ce,me),ye=me.scrollHeight-me.clientHeight,Ue=Math.min(we-l.offset,ye);q=bY(r.value,A,Ue,l.duration,()=>{setTimeout(()=>{M=!1},20)})},ie=fe=>{fe&&(N(fe),G(fe))},W=(fe,ce)=>{s("click",fe,ce),ie(ce)},Y=w4e(()=>{r.value&&(A=nM(r.value));const fe=J();M||Li(fe)||N(fe)}),J=()=>{if(!r.value)return;const fe=nM(r.value),ce=[];for(const me of Object.keys(E)){const we=M2(me);if(!we)continue;const ye=tM(we,r.value),Ue=a6(we,ye);ce.push({top:Ue-l.offset-l.bound,href:me})}ce.sort((me,we)=>me.top-we.top);for(let me=0;me<ce.length;me++){const we=ce[me],ye=ce[me+1];if(me===0&&fe===0)return l.selectScrollTop?we.href:"";if(we.top<=fe&&(!ye||ye.top>fe))return we.href}},re=()=>{const fe=M2(l.container);!fe||_x(fe)?r.value=window:r.value=fe};Is(r,"scroll",Y);const he=se(()=>{if(!m.value||!b.value||!d.value)return{};const fe=E[d.value];if(!fe)return{};const ce=m.value.getBoundingClientRect(),me=b.value.getBoundingClientRect(),we=fe.getBoundingClientRect();return l.direction==="horizontal"?{left:`${we.left-ce.left}px`,width:`${we.width}px`,opacity:1}:{top:`${we.top-ce.top+(we.height-me.height)/2}px`,opacity:1}});return Zr(()=>{re();const fe=decodeURIComponent(window.location.hash);M2(fe)?ie(fe):Y()}),on(()=>l.container,()=>{re()}),Ti(sN,{ns:P,direction:l.direction,currentAnchor:d,addLink:z,removeLink:F,handleClick:W}),n({scrollTo:ie}),(fe,ce)=>(Z(),ue("div",{ref_key:"anchorRef",ref:m,class:ge(w(D))},[fe.marker?(Z(),ue("div",{key:0,ref_key:"markerRef",ref:b,class:ge(w(P).e("marker")),style:fr(w(he))},null,6)):At("v-if",!0),ae("div",{class:ge(w(P).e("list"))},[It(fe.$slots,"default")],2)],2))}});var E4e=En(C4e,[["__file","anchor.vue"]]);const T4e=bn({title:String,href:String}),I4e=xe({name:"ElAnchorLink"}),k4e=xe({...I4e,props:T4e,setup(e){const n=e,s=Re(null),{ns:l,direction:d,currentAnchor:m,addLink:b,removeLink:r,handleClick:E}=Gn(sN),M=se(()=>[l.e("link"),l.is("active",m.value===n.href)]),A=P=>{E(P,n.href)};return on(()=>n.href,(P,D)=>{dr(()=>{D&&r(D),P&&b({href:P,el:s.value})})}),Zr(()=>{const{href:P}=n;P&&b({href:P,el:s.value})}),Ls(()=>{const{href:P}=n;P&&r(P)}),(P,D)=>(Z(),ue("div",{class:ge(w(l).e("item"))},[ae("a",{ref_key:"linkRef",ref:s,class:ge(w(M)),href:P.href,onClick:A},[It(P.$slots,"default",{},()=>[ei(gn(P.title),1)])],10,["href"]),P.$slots["sub-link"]&&w(d)==="vertical"?(Z(),ue("div",{key:0,class:ge(w(l).e("list"))},[It(P.$slots,"sub-link")],2)):At("v-if",!0)],2))}});var oN=En(k4e,[["__file","anchor-link.vue"]]);const M4e=Gr(E4e,{AnchorLink:oN}),A4e=ao(oN),aN={label:"label",value:"value",disabled:"disabled"},R4e=bn({direction:{type:wt(String),default:"horizontal"},options:{type:wt(Array),default:()=>[]},modelValue:{type:[String,Number,Boolean],default:void 0},props:{type:wt(Object),default:()=>aN},block:Boolean,size:Fo,disabled:Boolean,validateEvent:{type:Boolean,default:!0},id:String,name:String,...Ta(["ariaLabel"])}),P4e={[Nr]:e=>ir(e)||gr(e)||Ts(e),[mi]:e=>ir(e)||gr(e)||Ts(e)},L4e=xe({name:"ElSegmented"}),O4e=xe({...L4e,props:R4e,emits:P4e,setup(e,{emit:n}){const s=e,l=dn("segmented"),d=Ea(),m=Lo(),b=Ba(),{formItem:r}=Fa(),{inputId:E,isLabeledByFormItem:M}=Du(s,{formItemContext:r}),A=Re(null),P=UK(),D=ts({isInit:!1,width:0,height:0,translateX:0,translateY:0,focusVisible:!1}),z=me=>{const we=N(me);n(Nr,we),n(mi,we)},F=se(()=>({...aN,...s.props})),N=me=>Yr(me)?me[F.value.value]:me,q=me=>Yr(me)?me[F.value.label]:me,G=me=>!!(b.value||Yr(me)&&me[F.value.disabled]),ie=me=>s.modelValue===N(me),W=me=>s.options.find(we=>N(we)===me),Y=me=>[l.e("item"),l.is("selected",ie(me)),l.is("disabled",G(me))],J=()=>{if(!A.value)return;const me=A.value.querySelector(".is-selected"),we=A.value.querySelector(".is-selected input");if(!me||!we){D.width=0,D.height=0,D.translateX=0,D.translateY=0,D.focusVisible=!1;return}const ye=me.getBoundingClientRect();D.isInit=!0,s.direction==="vertical"?(D.height=ye.height,D.translateY=me.offsetTop):(D.width=ye.width,D.translateX=me.offsetLeft);try{D.focusVisible=we.matches(":focus-visible")}catch{}},re=se(()=>[l.b(),l.m(m.value),l.is("block",s.block)]),he=se(()=>({width:s.direction==="vertical"?"100%":`${D.width}px`,height:s.direction==="vertical"?`${D.height}px`:"100%",transform:s.direction==="vertical"?`translateY(${D.translateY}px)`:`translateX(${D.translateX}px)`,display:D.isInit?"block":"none"})),fe=se(()=>[l.e("item-selected"),l.is("disabled",G(W(s.modelValue))),l.is("focus-visible",D.focusVisible)]),ce=se(()=>s.name||d.value);return so(A,J),on(P,J),on(()=>s.modelValue,()=>{var me;J(),s.validateEvent&&((me=r?.validate)==null||me.call(r,"change").catch(we=>void 0))},{flush:"post"}),(me,we)=>me.options.length?(Z(),ue("div",{key:0,id:w(E),ref_key:"segmentedRef",ref:A,class:ge(w(re)),role:"radiogroup","aria-label":w(M)?void 0:me.ariaLabel||"segmented","aria-labelledby":w(M)?w(r).labelId:void 0},[ae("div",{class:ge([w(l).e("group"),w(l).m(s.direction)])},[ae("div",{style:fr(w(he)),class:ge(w(fe))},null,6),(Z(!0),ue(cr,null,Ei(me.options,(ye,Ue)=>(Z(),ue("label",{key:Ue,class:ge(Y(ye))},[ae("input",{class:ge(w(l).e("item-input")),type:"radio",name:w(ce),disabled:G(ye),checked:ie(ye),onChange:Ne=>z(ye)},null,42,["name","disabled","checked","onChange"]),ae("div",{class:ge(w(l).e("item-label"))},[It(me.$slots,"default",{item:ye},()=>[ei(gn(q(ye)),1)])],2)],2))),128))],2)],10,["id","aria-label","aria-labelledby"])):At("v-if",!0)}});var D4e=En(O4e,[["__file","segmented.vue"]]);const z4e=Gr(D4e),N4e=(e,n)=>{const s=e.toLowerCase();return(n.label||n.value).toLowerCase().includes(s)},F4e=(e,n,s)=>{const{selectionEnd:l}=e;if(l===null)return;const d=e.value,m=el(n);let b=-1,r;for(let E=l-1;E>=0;--E){const M=d[E];if(M===s||M===`
`||M==="\r"){b=E;continue}if(m.includes(M)){const A=b===-1?l:b;r={pattern:d.slice(E+1,A),start:E+1,end:A,prefix:M,prefixIndex:E,splitIndex:b,selectionEnd:l};break}}return r},B4e=(e,n={debug:!1,useSelectionEnd:!1})=>{const s=e.selectionStart!==null?e.selectionStart:0,l=e.selectionEnd!==null?e.selectionEnd:0,d=n.useSelectionEnd?l:s,m=["direction","boxSizing","width","height","overflowX","overflowY","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","borderStyle","paddingTop","paddingRight","paddingBottom","paddingLeft","fontStyle","fontVariant","fontWeight","fontStretch","fontSize","fontSizeAdjust","lineHeight","fontFamily","textAlign","textTransform","textIndent","textDecoration","letterSpacing","wordSpacing","tabSize","MozTabSize"];if(n.debug){const D=document.querySelector("#input-textarea-caret-position-mirror-div");D?.parentNode&&D.parentNode.removeChild(D)}const b=document.createElement("div");b.id="input-textarea-caret-position-mirror-div",document.body.appendChild(b);const r=b.style,E=window.getComputedStyle(e),M=e.nodeName==="INPUT";r.whiteSpace=M?"nowrap":"pre-wrap",M||(r.wordWrap="break-word"),r.position="absolute",n.debug||(r.visibility="hidden"),m.forEach(D=>{if(M&&D==="lineHeight")if(E.boxSizing==="border-box"){const z=Number.parseInt(E.height),F=Number.parseInt(E.paddingTop)+Number.parseInt(E.paddingBottom)+Number.parseInt(E.borderTopWidth)+Number.parseInt(E.borderBottomWidth),N=F+Number.parseInt(E.lineHeight);z>N?r.lineHeight=`${z-F}px`:z===N?r.lineHeight=E.lineHeight:r.lineHeight="0"}else r.lineHeight=E.height;else r[D]=E[D]}),Tx()?e.scrollHeight>Number.parseInt(E.height)&&(r.overflowY="scroll"):r.overflow="hidden",b.textContent=e.value.slice(0,Math.max(0,d)),M&&b.textContent&&(b.textContent=b.textContent.replace(/\s/g,""));const A=document.createElement("span");A.textContent=e.value.slice(Math.max(0,d))||".",A.style.position="relative",A.style.left=`${-e.scrollLeft}px`,A.style.top=`${-e.scrollTop}px`,b.appendChild(A);const P={top:A.offsetTop+Number.parseInt(E.borderTopWidth),left:A.offsetLeft+Number.parseInt(E.borderLeftWidth),height:Number.parseInt(E.fontSize)*1.5};return n.debug?A.style.backgroundColor="#aaa":document.body.removeChild(b),P.left>=e.clientWidth&&(P.left=e.clientWidth),P},V4e=bn({...KS,options:{type:wt(Array),default:()=>[]},prefix:{type:wt([String,Array]),default:"@",validator:e=>ir(e)?e.length===1:e.every(n=>ir(n)&&n.length===1)},split:{type:String,default:" ",validator:e=>e.length===1},filterOption:{type:wt([Boolean,Function]),default:()=>N4e,validator:e=>e===!1?!0:hr(e)},placement:{type:wt(String),default:"bottom"},showArrow:Boolean,offset:{type:Number,default:0},whole:Boolean,checkIsWhole:{type:wt(Function)},modelValue:String,loading:Boolean,popperClass:{type:String,default:""},popperOptions:{type:wt(Object),default:()=>({})}}),$4e={[Nr]:e=>ir(e),input:e=>ir(e),search:(e,n)=>ir(e)&&ir(n),select:(e,n)=>ir(e.value)&&ir(n),focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent},H4e=bn({options:{type:wt(Array),default:()=>[]},loading:Boolean,disabled:Boolean,contentId:String,ariaLabel:String}),U4e={select:e=>ir(e.value)},j4e=xe({name:"ElMentionDropdown"}),G4e=xe({...j4e,props:H4e,emits:U4e,setup(e,{expose:n,emit:s}){const l=e,d=dn("mention"),{t:m}=Oi(),b=Re(-1),r=Re(),E=Re(),M=Re(),A=(W,Y)=>[d.be("dropdown","item"),d.is("hovering",b.value===Y),d.is("disabled",W.disabled||l.disabled)],P=W=>{W.disabled||l.disabled||s("select",W)},D=W=>{b.value=W},z=se(()=>l.disabled||l.options.every(W=>W.disabled)),F=se(()=>l.options[b.value]),N=()=>{F.value&&s("select",F.value)},q=W=>{const{options:Y}=l;if(Y.length===0||z.value)return;W==="next"?(b.value++,b.value===Y.length&&(b.value=0)):W==="prev"&&(b.value--,b.value<0&&(b.value=Y.length-1));const J=Y[b.value];if(J.disabled){q(W);return}dr(()=>G(J))},G=W=>{var Y,J,re,he;const{options:fe}=l,ce=fe.findIndex(we=>we.value===W.value),me=(Y=E.value)==null?void 0:Y[ce];if(me){const we=(re=(J=M.value)==null?void 0:J.querySelector)==null?void 0:re.call(J,`.${d.be("dropdown","wrap")}`);we&&$S(we,me)}(he=r.value)==null||he.handleScroll()};return on(()=>l.options,()=>{z.value||l.options.length===0?b.value=-1:b.value=0},{immediate:!0}),n({hoveringIndex:b,navigateOptions:q,selectHoverOption:N,hoverOption:F}),(W,Y)=>(Z(),ue("div",{ref_key:"dropdownRef",ref:M,class:ge(w(d).b("dropdown"))},[W.$slots.header?(Z(),ue("div",{key:0,class:ge(w(d).be("dropdown","header"))},[It(W.$slots,"header")],2)):At("v-if",!0),Wr(st(w(Id),{id:W.contentId,ref_key:"scrollbarRef",ref:r,tag:"ul","wrap-class":w(d).be("dropdown","wrap"),"view-class":w(d).be("dropdown","list"),role:"listbox","aria-label":W.ariaLabel,"aria-orientation":"vertical"},{default:mt(()=>[(Z(!0),ue(cr,null,Ei(W.options,(J,re)=>(Z(),ue("li",{id:`${W.contentId}-${re}`,ref_for:!0,ref_key:"optionRefs",ref:E,key:re,class:ge(A(J,re)),role:"option","aria-disabled":J.disabled||W.disabled||void 0,"aria-selected":b.value===re,onMousemove:he=>D(re),onClick:Er(he=>P(J),["stop"])},[It(W.$slots,"label",{item:J,index:re},()=>{var he;return[ae("span",null,gn((he=J.label)!=null?he:J.value),1)]})],42,["id","aria-disabled","aria-selected","onMousemove","onClick"]))),128))]),_:3},8,["id","wrap-class","view-class","aria-label"]),[[Ki,W.options.length>0&&!W.loading]]),W.loading?(Z(),ue("div",{key:1,class:ge(w(d).be("dropdown","loading"))},[It(W.$slots,"loading",{},()=>[ei(gn(w(m)("el.mention.loading")),1)])],2)):At("v-if",!0),W.$slots.footer?(Z(),ue("div",{key:2,class:ge(w(d).be("dropdown","footer"))},[It(W.$slots,"footer")],2)):At("v-if",!0)],2))}});var q4e=En(G4e,[["__file","mention-dropdown.vue"]]);const W4e=xe({name:"ElMention",inheritAttrs:!1}),K4e=xe({...W4e,props:V4e,emits:$4e,setup(e,{expose:n,emit:s}){const l=e,d=se(()=>cc(l,Object.keys(KS))),m=dn("mention"),b=Ba(),r=Ea(),E=Re(),M=Re(),A=Re(),P=Re(!1),D=Re(),z=Re(),F=se(()=>l.showArrow?l.placement:`${l.placement}-start`),N=se(()=>l.showArrow?["bottom","top"]:["bottom-start","top-start"]),q=se(()=>{const{filterOption:ye,options:Ue}=l;return!z.value||!ye?Ue:Ue.filter(Ne=>ye(z.value.pattern,Ne))}),G=se(()=>P.value&&(!!q.value.length||l.loading)),ie=se(()=>{var ye;return`${r.value}-${(ye=A.value)==null?void 0:ye.hoveringIndex}`}),W=ye=>{s(Nr,ye),s(Go,ye),ce()},Y=ye=>{var Ue,Ne,Pe,ve;if(!(!("code"in ye)||(Ue=E.value)!=null&&Ue.isComposing))switch(ye.code){case Un.left:case Un.right:ce();break;case Un.up:case Un.down:if(!P.value)return;ye.preventDefault(),(Ne=A.value)==null||Ne.navigateOptions(ye.code===Un.up?"prev":"next");break;case Un.enter:case Un.numpadEnter:if(!P.value)return;ye.preventDefault(),(Pe=A.value)!=null&&Pe.hoverOption?(ve=A.value)==null||ve.selectHoverOption():P.value=!1;break;case Un.esc:if(!P.value)return;ye.preventDefault(),P.value=!1;break;case Un.backspace:if(l.whole&&z.value){const{splitIndex:$e,selectionEnd:Te,pattern:Ae,prefixIndex:Ve,prefix:We}=z.value,ft=fe();if(!ft)return;const at=ft.value,ct=l.options.find(Ct=>Ct.value===Ae);if((hr(l.checkIsWhole)?l.checkIsWhole(Ae,We):ct)&&$e!==-1&&$e+1===Te){ye.preventDefault();const Ct=at.slice(0,Ve)+at.slice($e+1);s(Nr,Ct);const gt=Ve;dr(()=>{ft.selectionStart=gt,ft.selectionEnd=gt,we()})}}}},{wrapperRef:J}=Pf(E,{beforeFocus(){return b.value},afterFocus(){ce()},beforeBlur(ye){var Ue;return(Ue=M.value)==null?void 0:Ue.isFocusInsideContent(ye)},afterBlur(){P.value=!1}}),re=()=>{ce()},he=ye=>{if(!z.value)return;const Ue=fe();if(!Ue)return;const Ne=Ue.value,{split:Pe}=l,ve=Ne.slice(z.value.end),$e=ve.startsWith(Pe),Te=`${ye.value}${$e?"":Pe}`,Ae=Ne.slice(0,z.value.start)+Te+ve;s(Nr,Ae),s(Go,Ae),s("select",ye,z.value.prefix);const Ve=z.value.start+Te.length+($e?1:0);dr(()=>{Ue.selectionStart=Ve,Ue.selectionEnd=Ve,Ue.focus(),we()})},fe=()=>{var ye,Ue;return l.type==="textarea"?(ye=E.value)==null?void 0:ye.textarea:(Ue=E.value)==null?void 0:Ue.input},ce=()=>{setTimeout(()=>{me(),we(),dr(()=>{var ye;return(ye=M.value)==null?void 0:ye.updatePopper()})},0)},me=()=>{const ye=fe();if(!ye)return;const Ue=B4e(ye),Ne=ye.getBoundingClientRect(),Pe=E.value.$el.getBoundingClientRect();D.value={position:"absolute",width:0,height:`${Ue.height}px`,left:`${Ue.left+Ne.left-Pe.left}px`,top:`${Ue.top+Ne.top-Pe.top}px`}},we=()=>{const ye=fe();if(document.activeElement!==ye){P.value=!1;return}const{prefix:Ue,split:Ne}=l;if(z.value=F4e(ye,Ue,Ne),z.value&&z.value.splitIndex===-1){P.value=!0,s("search",z.value.pattern,z.value.prefix);return}P.value=!1};return n({input:E,tooltip:M,dropdownVisible:G}),(ye,Ue)=>(Z(),ue("div",{ref_key:"wrapperRef",ref:J,class:ge(w(m).b())},[st(w(nl),pi(pi(w(d),ye.$attrs),{ref_key:"elInputRef",ref:E,"model-value":ye.modelValue,disabled:w(b),role:w(G)?"combobox":void 0,"aria-activedescendant":w(G)?w(ie)||"":void 0,"aria-controls":w(G)?w(r):void 0,"aria-expanded":w(G)||void 0,"aria-label":ye.ariaLabel,"aria-autocomplete":w(G)?"none":void 0,"aria-haspopup":w(G)?"listbox":void 0,onInput:W,onKeydown:Y,onMousedown:re}),cu({_:2},[Ei(ye.$slots,(Ne,Pe)=>({name:Pe,fn:mt(ve=>[It(ye.$slots,Pe,iu(vd(ve)))])}))]),1040,["model-value","disabled","role","aria-activedescendant","aria-controls","aria-expanded","aria-label","aria-autocomplete","aria-haspopup"]),st(w(Na),{ref_key:"tooltipRef",ref:M,visible:w(G),"popper-class":[w(m).e("popper"),ye.popperClass],"popper-options":ye.popperOptions,placement:w(F),"fallback-placements":w(N),effect:"light",pure:"",offset:ye.offset,"show-arrow":ye.showArrow},{default:mt(()=>[ae("div",{style:fr(D.value)},null,4)]),content:mt(()=>{var Ne;return[st(q4e,{ref_key:"dropdownRef",ref:A,options:w(q),disabled:w(b),loading:ye.loading,"content-id":w(r),"aria-label":ye.ariaLabel,onSelect:he,onClick:Er((Ne=E.value)==null?void 0:Ne.focus,["stop"])},cu({_:2},[Ei(ye.$slots,(Pe,ve)=>({name:ve,fn:mt($e=>[It(ye.$slots,ve,iu(vd($e)))])}))]),1032,["options","disabled","loading","content-id","aria-label","onClick"])]}),_:3},8,["visible","popper-class","popper-options","placement","fallback-placements","offset","show-arrow"])],2))}});var Y4e=En(K4e,[["__file","mention.vue"]]);const Z4e=Gr(Y4e);var X4e=[EY,$se,Lle,xbe,Ble,qle,rD,iue,sue,ua,cD,Que,ice,xce,wce,wde,AD,kde,Ou,zce,xD,Lde,Yde,Zde,Rx,whe,Ehe,Nhe,Fhe,Bhe,Vhe,$he,hpe,wpe,Spe,Dpe,rz,Gpe,Ome,Dme,zme,hz,Dge,zge,rr,Wge,mz,nl,gz,l0e,p0e,L0e,O0e,D0e,z0e,H0e,L_e,B_e,K_e,QO,Ez,kD,Yce,Kce,ive,uve,gve,Id,Gp,Nb,f_e,Kve,rye,iye,Sye,kye,Fz,Bye,Kye,Yye,t1e,d2e,h2e,bbe,zbe,Nbe,Wg,q8,Pfe,Wbe,Jbe,Qbe,Na,ywe,Pwe,Yb,Xwe,p3e,N3e,W3e,v4e,y4e,M4e,A4e,z4e,Z4e];const Eu="ElInfiniteScroll",J4e=50,Q4e=200,e6e=0,t6e={delay:{type:Number,default:Q4e},distance:{type:Number,default:e6e},disabled:{type:Boolean,default:!1},immediate:{type:Boolean,default:!0}},lC=(e,n)=>Object.entries(t6e).reduce((s,[l,d])=>{var m,b;const{type:r,default:E}=d,M=e.getAttribute(`infinite-scroll-${l}`);let A=(b=(m=n[M])!=null?m:M)!=null?b:E;return A=A==="false"?!1:A,A=r(A),s[l]=Number.isNaN(A)?E:A,s},{}),lN=e=>{const{observer:n}=e[Eu];n&&(n.disconnect(),delete e[Eu].observer)},n6e=(e,n)=>{const{container:s,containerEl:l,instance:d,observer:m,lastScrollTop:b}=e[Eu],{disabled:r,distance:E}=lC(e,d),{clientHeight:M,scrollHeight:A,scrollTop:P}=l,D=P-b;if(e[Eu].lastScrollTop=P,m||r||D<0)return;let z=!1;if(s===e)z=A-(M+P)<=E;else{const{clientTop:F,scrollHeight:N}=e,q=a6(e,l);z=P+M>=q+F+N-E}z&&n.call(d)};function S4(e,n){const{containerEl:s,instance:l}=e[Eu],{disabled:d}=lC(e,l);d||s.clientHeight===0||(s.scrollHeight<=s.clientHeight?n.call(l):lN(e))}const r6e={async mounted(e,n){const{instance:s,value:l}=n;hr(l)||No(Eu,"'v-infinite-scroll' binding value must be a function"),await dr();const{delay:d,immediate:m}=lC(e,s),b=VS(e,!0),r=b===window?document.documentElement:b,E=zp(n6e.bind(null,e,l),d);if(b){if(e[Eu]={instance:s,container:b,containerEl:r,delay:d,cb:l,onScroll:E,lastScrollTop:r.scrollTop},m){const M=new MutationObserver(zp(S4.bind(null,e,l),J4e));e[Eu].observer=M,M.observe(e,{childList:!0,subtree:!0}),S4(e,l)}b.addEventListener("scroll",E)}},unmounted(e){if(!e[Eu])return;const{container:n,onScroll:s}=e[Eu];n?.removeEventListener("scroll",s),lN(e)},async updated(e){if(!e[Eu])await dr();else{const{containerEl:n,cb:s,observer:l}=e[Eu];n.clientHeight&&l&&S4(e,s)}}},X6=r6e;X6.install=e=>{e.directive("InfiniteScroll",X6)};const i6e=X6;function s6e(e){let n;const s=Re(!1),l=ts({...e,originalPosition:"",originalOverflow:"",visible:!1});function d(D){l.text=D}function m(){const D=l.parent,z=P.ns;if(!D.vLoadingAddClassList){let F=D.getAttribute("loading-number");F=Number.parseInt(F)-1,F?D.setAttribute("loading-number",F.toString()):(rl(D,z.bm("parent","relative")),D.removeAttribute("loading-number")),rl(D,z.bm("parent","hidden"))}b(),A.unmount()}function b(){var D,z;(z=(D=P.$el)==null?void 0:D.parentNode)==null||z.removeChild(P.$el)}function r(){var D;e.beforeClose&&!e.beforeClose()||(s.value=!0,clearTimeout(n),n=setTimeout(E,400),l.visible=!1,(D=e.closed)==null||D.call(e))}function E(){if(!s.value)return;const D=l.parent;s.value=!1,D.vLoadingAddClassList=void 0,m()}const A=RP(xe({name:"ElLoading",setup(D,{expose:z}){const{ns:F,zIndex:N}=bx("loading");return z({ns:F,zIndex:N}),()=>{const q=l.spinner||l.svg,G=xr("svg",{class:"circular",viewBox:l.svgViewBox?l.svgViewBox:"0 0 50 50",...q?{innerHTML:q}:{}},[xr("circle",{class:"path",cx:"25",cy:"25",r:"20",fill:"none"})]),ie=l.text?xr("p",{class:F.b("text")},[l.text]):void 0;return xr(ha,{name:F.b("fade"),onAfterLeave:E},{default:mt(()=>[Wr(st("div",{style:{backgroundColor:l.background||""},class:[F.b("mask"),l.customClass,l.fullscreen?"is-fullscreen":""]},[xr("div",{class:F.b("spinner")},[G,ie])]),[[Ki,l.visible]])])})}}})),P=A.mount(document.createElement("div"));return{...da(l),setText:d,removeElLoadingChild:b,close:r,handleAfterLeave:E,vm:P,get $el(){return P.$el}}}let A2;const J6=function(e={}){if(!Pi)return;const n=o6e(e);if(n.fullscreen&&A2)return A2;const s=s6e({...n,closed:()=>{var d;(d=n.closed)==null||d.call(n),n.fullscreen&&(A2=void 0)}});a6e(n,n.parent,s),tR(n,n.parent,s),n.parent.vLoadingAddClassList=()=>tR(n,n.parent,s);let l=n.parent.getAttribute("loading-number");return l?l=`${Number.parseInt(l)+1}`:l="1",n.parent.setAttribute("loading-number",l),n.parent.appendChild(s.$el),dr(()=>s.visible.value=n.visible),n.fullscreen&&(A2=s),s},o6e=e=>{var n,s,l,d;let m;return ir(e.target)?m=(n=document.querySelector(e.target))!=null?n:document.body:m=e.target||document.body,{parent:m===document.body||e.body?document.body:m,background:e.background||"",svg:e.svg||"",svgViewBox:e.svgViewBox||"",spinner:e.spinner||!1,text:e.text||"",fullscreen:m===document.body&&((s=e.fullscreen)!=null?s:!0),lock:(l=e.lock)!=null?l:!1,customClass:e.customClass||"",visible:(d=e.visible)!=null?d:!0,beforeClose:e.beforeClose,closed:e.closed,target:m}},a6e=async(e,n,s)=>{const{nextZIndex:l}=s.vm.zIndex||s.vm._.exposed.zIndex,d={};if(e.fullscreen)s.originalPosition.value=sh(document.body,"position"),s.originalOverflow.value=sh(document.body,"overflow"),d.zIndex=l();else if(e.parent===document.body){s.originalPosition.value=sh(document.body,"position"),await dr();for(const m of["top","left"]){const b=m==="top"?"scrollTop":"scrollLeft";d[m]=`${e.target.getBoundingClientRect()[m]+document.body[b]+document.documentElement[b]-Number.parseInt(sh(document.body,`margin-${m}`),10)}px`}for(const m of["height","width"])d[m]=`${e.target.getBoundingClientRect()[m]}px`}else s.originalPosition.value=sh(n,"position");for(const[m,b]of Object.entries(d))s.$el.style[m]=b},tR=(e,n,s)=>{const l=s.vm.ns||s.vm._.exposed.ns;["absolute","fixed","sticky"].includes(s.originalPosition.value)?rl(n,l.bm("parent","relative")):Tu(n,l.bm("parent","relative")),e.fullscreen&&e.lock?Tu(n,l.bm("parent","hidden")):rl(n,l.bm("parent","hidden"))},ub=Symbol("ElLoading"),nR=(e,n)=>{var s,l,d,m;const b=n.instance,r=D=>Yr(n.value)?n.value[D]:void 0,E=D=>{const z=ir(D)&&b?.[D]||D;return z&&Re(z)},M=D=>E(r(D)||e.getAttribute(`element-loading-${bh(D)}`)),A=(s=r("fullscreen"))!=null?s:n.modifiers.fullscreen,P={text:M("text"),svg:M("svg"),svgViewBox:M("svgViewBox"),spinner:M("spinner"),background:M("background"),customClass:M("customClass"),fullscreen:A,target:(l=r("target"))!=null?l:A?void 0:e,body:(d=r("body"))!=null?d:n.modifiers.body,lock:(m=r("lock"))!=null?m:n.modifiers.lock};e[ub]={options:P,instance:J6(P)}},l6e=(e,n)=>{for(const s of Object.keys(n))Hs(n[s])&&(n[s].value=e[s])},rR={mounted(e,n){n.value&&nR(e,n)},updated(e,n){const s=e[ub];n.oldValue!==n.value&&(n.value&&!n.oldValue?nR(e,n):n.value&&n.oldValue?Yr(n.value)&&l6e(n.value,s.options):s?.instance.close())},unmounted(e){var n;(n=e[ub])==null||n.instance.close(),e[ub]=null}},u6e={install(e){e.directive("loading",rR),e.config.globalProperties.$loading=J6},directive:rR,service:J6},uN=["success","info","warning","error"],gl=oo({customClass:"",dangerouslyUseHTMLString:!1,duration:3e3,icon:void 0,id:"",message:"",onClose:void 0,showClose:!1,type:"info",plain:!1,offset:16,zIndex:0,grouping:!1,repeatNum:1,appendTo:Pi?document.body:void 0}),c6e=bn({customClass:{type:String,default:gl.customClass},dangerouslyUseHTMLString:{type:Boolean,default:gl.dangerouslyUseHTMLString},duration:{type:Number,default:gl.duration},icon:{type:bs,default:gl.icon},id:{type:String,default:gl.id},message:{type:wt([String,Object,Function]),default:gl.message},onClose:{type:wt(Function),default:gl.onClose},showClose:{type:Boolean,default:gl.showClose},type:{type:String,values:uN,default:gl.type},plain:{type:Boolean,default:gl.plain},offset:{type:Number,default:gl.offset},zIndex:{type:Number,default:gl.zIndex},grouping:{type:Boolean,default:gl.grouping},repeatNum:{type:Number,default:gl.repeatNum}}),d6e={destroy:()=>!0},dc=IR([]),h6e=e=>{const n=dc.findIndex(d=>d.id===e),s=dc[n];let l;return n>0&&(l=dc[n-1]),{current:s,prev:l}},f6e=e=>{const{prev:n}=h6e(e);return n?n.vm.exposed.bottom.value:0},p6e=(e,n)=>dc.findIndex(l=>l.id===e)>0?16:n,m6e=xe({name:"ElMessage"}),g6e=xe({...m6e,props:c6e,emits:d6e,setup(e,{expose:n,emit:s}){const l=e,{Close:d}=WS,m=Re(!1),{ns:b,zIndex:r}=bx("message"),{currentZIndex:E,nextZIndex:M}=r,A=Re(),P=Re(!1),D=Re(0);let z;const F=se(()=>l.type?l.type==="error"?"danger":l.type:"info"),N=se(()=>{const ce=l.type;return{[b.bm("icon",ce)]:ce&&If[ce]}}),q=se(()=>l.icon||If[l.type]||""),G=se(()=>f6e(l.id)),ie=se(()=>p6e(l.id,l.offset)+G.value),W=se(()=>D.value+ie.value),Y=se(()=>({top:`${ie.value}px`,zIndex:E.value}));function J(){l.duration!==0&&({stop:z}=Up(()=>{he()},l.duration))}function re(){z?.()}function he(){P.value=!1,dr(()=>{var ce;m.value||((ce=l.onClose)==null||ce.call(l),s("destroy"))})}function fe({code:ce}){ce===Un.esc&&he()}return Zr(()=>{J(),M(),P.value=!0}),on(()=>l.repeatNum,()=>{re(),J()}),Is(document,"keydown",fe),so(A,()=>{D.value=A.value.getBoundingClientRect().height}),n({visible:P,bottom:W,close:he}),(ce,me)=>(Z(),Bt(ha,{name:w(b).b("fade"),onBeforeEnter:we=>m.value=!0,onBeforeLeave:ce.onClose,onAfterLeave:we=>ce.$emit("destroy"),persisted:""},{default:mt(()=>[Wr(ae("div",{id:ce.id,ref_key:"messageRef",ref:A,class:ge([w(b).b(),{[w(b).m(ce.type)]:ce.type},w(b).is("closable",ce.showClose),w(b).is("plain",ce.plain),ce.customClass]),style:fr(w(Y)),role:"alert",onMouseenter:re,onMouseleave:J},[ce.repeatNum>1?(Z(),Bt(w(rD),{key:0,value:ce.repeatNum,type:w(F),class:ge(w(b).e("badge"))},null,8,["value","type","class"])):At("v-if",!0),w(q)?(Z(),Bt(w(rr),{key:1,class:ge([w(b).e("icon"),w(N)])},{default:mt(()=>[(Z(),Bt(si(w(q))))]),_:1},8,["class"])):At("v-if",!0),It(ce.$slots,"default",{},()=>[ce.dangerouslyUseHTMLString?(Z(),ue(cr,{key:1},[At(" Caution here, message could've been compromised, never use user's input as message "),ae("p",{class:ge(w(b).e("content")),innerHTML:ce.message},null,10,["innerHTML"])],2112)):(Z(),ue("p",{key:0,class:ge(w(b).e("content"))},gn(ce.message),3))]),ce.showClose?(Z(),Bt(w(rr),{key:2,class:ge(w(b).e("closeBtn")),onClick:Er(he,["stop"])},{default:mt(()=>[st(w(d))]),_:1},8,["class","onClick"])):At("v-if",!0)],46,["id"]),[[Ki,P.value]])]),_:3},8,["name","onBeforeEnter","onBeforeLeave","onAfterLeave"]))}});var _6e=En(g6e,[["__file","message.vue"]]);let v6e=1;const cN=e=>{const n=!e||ir(e)||qs(e)||hr(e)?{message:e}:e,s={...gl,...n};if(!s.appendTo)s.appendTo=document.body;else if(ir(s.appendTo)){let l=document.querySelector(s.appendTo);xl(l)||(l=document.body),s.appendTo=l}return Ts(lc.grouping)&&!s.grouping&&(s.grouping=lc.grouping),gr(lc.duration)&&s.duration===3e3&&(s.duration=lc.duration),gr(lc.offset)&&s.offset===16&&(s.offset=lc.offset),Ts(lc.showClose)&&!s.showClose&&(s.showClose=lc.showClose),s},y6e=e=>{const n=dc.indexOf(e);if(n===-1)return;dc.splice(n,1);const{handler:s}=e;s.close()},b6e=({appendTo:e,...n},s)=>{const l=`message_${v6e++}`,d=n.onClose,m=document.createElement("div"),b={...n,id:l,onClose:()=>{d?.(),y6e(A)},onDestroy:()=>{Cf(null,m)}},r=st(_6e,b,hr(b.message)||qs(b.message)?{default:hr(b.message)?b.message:()=>b.message}:null);r.appContext=s||e0._context,Cf(r,m),e.appendChild(m.firstElementChild);const E=r.component,A={id:l,vnode:r,vm:E,handler:{close:()=>{E.exposed.close()}},props:r.component.props};return A},e0=(e={},n)=>{if(!Pi)return{close:()=>{}};const s=cN(e);if(s.grouping&&dc.length){const d=dc.find(({vnode:m})=>{var b;return((b=m.props)==null?void 0:b.message)===s.message});if(d)return d.props.repeatNum+=1,d.props.type=s.type,d.handler}if(gr(lc.max)&&dc.length>=lc.max)return{close:()=>{}};const l=b6e(s,n);return dc.push(l),l.handler};uN.forEach(e=>{e0[e]=(n={},s)=>{const l=cN(n);return e0({...l,type:e},s)}});function x6e(e){const n=[...dc];for(const s of n)(!e||e===s.props.type)&&s.handler.close()}e0.closeAll=x6e;e0._context=null;const w6e=sO(e0,"$message"),Q6="_trap-focus-children",Op=[],iR=e=>{if(Op.length===0)return;const n=Op[Op.length-1][Q6];if(n.length>0&&e.code===Un.tab){if(n.length===1){e.preventDefault(),document.activeElement!==n[0]&&n[0].focus();return}const s=e.shiftKey,l=e.target===n[0],d=e.target===n[n.length-1];l&&s&&(e.preventDefault(),n[n.length-1].focus()),d&&!s&&(e.preventDefault(),n[0].focus())}},S6e={beforeMount(e){e[Q6]=oM(e),Op.push(e),Op.length<=1&&document.addEventListener("keydown",iR)},updated(e){dr(()=>{e[Q6]=oM(e)})},unmounted(){Op.shift(),Op.length===0&&document.removeEventListener("keydown",iR)}},C6e=xe({name:"ElMessageBox",directives:{TrapFocus:S6e},components:{ElButton:ua,ElFocusTrap:h0,ElInput:nl,ElOverlay:S8,ElIcon:rr,...WS},inheritAttrs:!1,props:{buttonSize:{type:String,validator:Vz},modal:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},showClose:{type:Boolean,default:!0},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},closeOnHashChange:{type:Boolean,default:!0},center:Boolean,draggable:Boolean,overflow:Boolean,roundButton:{default:!1,type:Boolean},container:{type:String,default:"body"},boxType:{type:String,default:""}},emits:["vanish","action"],setup(e,{emit:n}){const{locale:s,zIndex:l,ns:d,size:m}=bx("message-box",se(()=>e.buttonSize)),{t:b}=s,{nextZIndex:r}=l,E=Re(!1),M=ts({autofocus:!0,beforeClose:null,callback:null,cancelButtonText:"",cancelButtonClass:"",confirmButtonText:"",confirmButtonClass:"",customClass:"",customStyle:{},dangerouslyUseHTMLString:!1,distinguishCancelAndClose:!1,icon:"",closeIcon:"",inputPattern:null,inputPlaceholder:"",inputType:"text",inputValue:"",inputValidator:void 0,inputErrorMessage:"",message:"",modalFade:!0,modalClass:"",showCancelButton:!1,showConfirmButton:!0,type:"",title:void 0,showInput:!1,action:"",confirmButtonLoading:!1,cancelButtonLoading:!1,confirmButtonLoadingIcon:lh(gc),cancelButtonLoadingIcon:lh(gc),confirmButtonDisabled:!1,editorErrorMessage:"",validateError:!1,zIndex:r()}),A=se(()=>{const ve=M.type;return{[d.bm("icon",ve)]:ve&&If[ve]}}),P=Ea(),D=Ea(),z=se(()=>{const ve=M.type;return M.icon||ve&&If[ve]||""}),F=se(()=>!!M.message),N=Re(),q=Re(),G=Re(),ie=Re(),W=Re(),Y=se(()=>M.confirmButtonClass);on(()=>M.inputValue,async ve=>{await dr(),e.boxType==="prompt"&&ve&&ye()},{immediate:!0}),on(()=>E.value,ve=>{var $e,Te;ve&&(e.boxType!=="prompt"&&(M.autofocus?G.value=(Te=($e=W.value)==null?void 0:$e.$el)!=null?Te:N.value:G.value=N.value),M.zIndex=r()),e.boxType==="prompt"&&(ve?dr().then(()=>{var Ae;ie.value&&ie.value.$el&&(M.autofocus?G.value=(Ae=Ue())!=null?Ae:N.value:G.value=N.value)}):(M.editorErrorMessage="",M.validateError=!1))});const J=se(()=>e.draggable),re=se(()=>e.overflow);QD(N,q,J,re),Zr(async()=>{await dr(),e.closeOnHashChange&&window.addEventListener("hashchange",he)}),Ls(()=>{e.closeOnHashChange&&window.removeEventListener("hashchange",he)});function he(){E.value&&(E.value=!1,dr(()=>{M.action&&n("action",M.action)}))}const fe=()=>{e.closeOnClickModal&&we(M.distinguishCancelAndClose?"close":"cancel")},ce=w8(fe),me=ve=>{if(M.inputType!=="textarea")return ve.preventDefault(),we("confirm")},we=ve=>{var $e;e.boxType==="prompt"&&ve==="confirm"&&!ye()||(M.action=ve,M.beforeClose?($e=M.beforeClose)==null||$e.call(M,ve,M,he):he())},ye=()=>{if(e.boxType==="prompt"){const ve=M.inputPattern;if(ve&&!ve.test(M.inputValue||""))return M.editorErrorMessage=M.inputErrorMessage||b("el.messagebox.error"),M.validateError=!0,!1;const $e=M.inputValidator;if(hr($e)){const Te=$e(M.inputValue);if(Te===!1)return M.editorErrorMessage=M.inputErrorMessage||b("el.messagebox.error"),M.validateError=!0,!1;if(ir(Te))return M.editorErrorMessage=Te,M.validateError=!0,!1}}return M.editorErrorMessage="",M.validateError=!1,!0},Ue=()=>{var ve,$e;const Te=(ve=ie.value)==null?void 0:ve.$refs;return($e=Te?.input)!=null?$e:Te?.textarea},Ne=()=>{we("close")},Pe=()=>{e.closeOnPressEscape&&Ne()};return e.lockScroll&&C8(E),{...da(M),ns:d,overlayEvent:ce,visible:E,hasMessage:F,typeClass:A,contentId:P,inputId:D,btnSize:m,iconComponent:z,confirmButtonClasses:Y,rootRef:N,focusStartRef:G,headerRef:q,inputRef:ie,confirmRef:W,doClose:he,handleClose:Ne,onCloseRequested:Pe,handleWrapperClick:fe,handleInputEnter:me,handleAction:we,t:b}}});function E6e(e,n,s,l,d,m){const b=fi("el-icon"),r=fi("el-input"),E=fi("el-button"),M=fi("el-focus-trap"),A=fi("el-overlay");return Z(),Bt(ha,{name:"fade-in-linear",onAfterLeave:P=>e.$emit("vanish"),persisted:""},{default:mt(()=>[Wr(st(A,{"z-index":e.zIndex,"overlay-class":[e.ns.is("message-box"),e.modalClass],mask:e.modal},{default:mt(()=>[ae("div",{role:"dialog","aria-label":e.title,"aria-modal":"true","aria-describedby":e.showInput?void 0:e.contentId,class:ge(`${e.ns.namespace.value}-overlay-message-box`),onClick:e.overlayEvent.onClick,onMousedown:e.overlayEvent.onMousedown,onMouseup:e.overlayEvent.onMouseup},[st(M,{loop:"",trapped:e.visible,"focus-trap-el":e.rootRef,"focus-start-el":e.focusStartRef,onReleaseRequested:e.onCloseRequested},{default:mt(()=>[ae("div",{ref:"rootRef",class:ge([e.ns.b(),e.customClass,e.ns.is("draggable",e.draggable),{[e.ns.m("center")]:e.center}]),style:fr(e.customStyle),tabindex:"-1",onClick:Er(()=>{},["stop"])},[e.title!==null&&e.title!==void 0?(Z(),ue("div",{key:0,ref:"headerRef",class:ge([e.ns.e("header"),{"show-close":e.showClose}])},[ae("div",{class:ge(e.ns.e("title"))},[e.iconComponent&&e.center?(Z(),Bt(b,{key:0,class:ge([e.ns.e("status"),e.typeClass])},{default:mt(()=>[(Z(),Bt(si(e.iconComponent)))]),_:1},8,["class"])):At("v-if",!0),ae("span",null,gn(e.title),1)],2),e.showClose?(Z(),ue("button",{key:0,type:"button",class:ge(e.ns.e("headerbtn")),"aria-label":e.t("el.messagebox.close"),onClick:P=>e.handleAction(e.distinguishCancelAndClose?"close":"cancel"),onKeydown:Ps(Er(P=>e.handleAction(e.distinguishCancelAndClose?"close":"cancel"),["prevent"]),["enter"])},[st(b,{class:ge(e.ns.e("close"))},{default:mt(()=>[(Z(),Bt(si(e.closeIcon||"close")))]),_:1},8,["class"])],42,["aria-label","onClick","onKeydown"])):At("v-if",!0)],2)):At("v-if",!0),ae("div",{id:e.contentId,class:ge(e.ns.e("content"))},[ae("div",{class:ge(e.ns.e("container"))},[e.iconComponent&&!e.center&&e.hasMessage?(Z(),Bt(b,{key:0,class:ge([e.ns.e("status"),e.typeClass])},{default:mt(()=>[(Z(),Bt(si(e.iconComponent)))]),_:1},8,["class"])):At("v-if",!0),e.hasMessage?(Z(),ue("div",{key:1,class:ge(e.ns.e("message"))},[It(e.$slots,"default",{},()=>[e.dangerouslyUseHTMLString?(Z(),Bt(si(e.showInput?"label":"p"),{key:1,for:e.showInput?e.inputId:void 0,innerHTML:e.message},null,8,["for","innerHTML"])):(Z(),Bt(si(e.showInput?"label":"p"),{key:0,for:e.showInput?e.inputId:void 0},{default:mt(()=>[ei(gn(e.dangerouslyUseHTMLString?"":e.message),1)]),_:1},8,["for"]))])],2)):At("v-if",!0)],2),Wr(ae("div",{class:ge(e.ns.e("input"))},[st(r,{id:e.inputId,ref:"inputRef",modelValue:e.inputValue,"onUpdate:modelValue":P=>e.inputValue=P,type:e.inputType,placeholder:e.inputPlaceholder,"aria-invalid":e.validateError,class:ge({invalid:e.validateError}),onKeydown:Ps(e.handleInputEnter,["enter"])},null,8,["id","modelValue","onUpdate:modelValue","type","placeholder","aria-invalid","class","onKeydown"]),ae("div",{class:ge(e.ns.e("errormsg")),style:fr({visibility:e.editorErrorMessage?"visible":"hidden"})},gn(e.editorErrorMessage),7)],2),[[Ki,e.showInput]])],10,["id"]),ae("div",{class:ge(e.ns.e("btns"))},[e.showCancelButton?(Z(),Bt(E,{key:0,loading:e.cancelButtonLoading,"loading-icon":e.cancelButtonLoadingIcon,class:ge([e.cancelButtonClass]),round:e.roundButton,size:e.btnSize,onClick:P=>e.handleAction("cancel"),onKeydown:Ps(Er(P=>e.handleAction("cancel"),["prevent"]),["enter"])},{default:mt(()=>[ei(gn(e.cancelButtonText||e.t("el.messagebox.cancel")),1)]),_:1},8,["loading","loading-icon","class","round","size","onClick","onKeydown"])):At("v-if",!0),Wr(st(E,{ref:"confirmRef",type:"primary",loading:e.confirmButtonLoading,"loading-icon":e.confirmButtonLoadingIcon,class:ge([e.confirmButtonClasses]),round:e.roundButton,disabled:e.confirmButtonDisabled,size:e.btnSize,onClick:P=>e.handleAction("confirm"),onKeydown:Ps(Er(P=>e.handleAction("confirm"),["prevent"]),["enter"])},{default:mt(()=>[ei(gn(e.confirmButtonText||e.t("el.messagebox.confirm")),1)]),_:1},8,["loading","loading-icon","class","round","disabled","size","onClick","onKeydown"]),[[Ki,e.showConfirmButton]])],2)],14,["onClick"])]),_:3},8,["trapped","focus-trap-el","focus-start-el","onReleaseRequested"])],42,["aria-label","aria-describedby","onClick","onMousedown","onMouseup"])]),_:3},8,["z-index","overlay-class","mask"]),[[Ki,e.visible]])]),_:3},8,["onAfterLeave"])}var T6e=En(C6e,[["render",E6e],["__file","index.vue"]]);const Wv=new Map,I6e=e=>{let n=document.body;return e.appendTo&&(ir(e.appendTo)&&(n=document.querySelector(e.appendTo)),xl(e.appendTo)&&(n=e.appendTo),xl(n)||(n=document.body)),n},k6e=(e,n,s=null)=>{const l=st(T6e,e,hr(e.message)||qs(e.message)?{default:hr(e.message)?e.message:()=>e.message}:null);return l.appContext=s,Cf(l,n),I6e(e).appendChild(n.firstElementChild),l.component},M6e=()=>document.createElement("div"),A6e=(e,n)=>{const s=M6e();e.onVanish=()=>{Cf(null,s),Wv.delete(d)},e.onAction=m=>{const b=Wv.get(d);let r;e.showInput?r={value:d.inputValue,action:m}:r=m,e.callback?e.callback(r,l.proxy):m==="cancel"||m==="close"?e.distinguishCancelAndClose&&m!=="cancel"?b.reject("close"):b.reject("cancel"):b.resolve(r)};const l=k6e(e,s,n),d=l.proxy;for(const m in e)Wi(e,m)&&!Wi(d.$props,m)&&(m==="closeIcon"&&Yr(e[m])?d[m]=lh(e[m]):d[m]=e[m]);return d.visible=!0,d};function _0(e,n=null){if(!Pi)return Promise.reject();let s;return ir(e)||qs(e)?e={message:e}:s=e.callback,new Promise((l,d)=>{const m=A6e(e,n??_0._context);Wv.set(m,{options:e,callback:s,resolve:l,reject:d})})}const R6e=["alert","confirm","prompt"],P6e={alert:{closeOnPressEscape:!1,closeOnClickModal:!1},confirm:{showCancelButton:!0},prompt:{showCancelButton:!0,showInput:!0}};R6e.forEach(e=>{_0[e]=L6e(e)});function L6e(e){return(n,s,l,d)=>{let m="";return Yr(s)?(l=s,m=""):Li(s)?m="":m=s,_0(Object.assign({title:m,message:n,type:"",...P6e[e]},l,{boxType:e}),d)}}_0.close=()=>{Wv.forEach((e,n)=>{n.doClose()}),Wv.clear()};_0._context=null;const hf=_0;hf.install=e=>{hf._context=e._context,e.config.globalProperties.$msgbox=hf,e.config.globalProperties.$messageBox=hf,e.config.globalProperties.$alert=hf.alert,e.config.globalProperties.$confirm=hf.confirm,e.config.globalProperties.$prompt=hf.prompt};const O6e=hf,dN=["success","info","warning","error"],D6e=bn({customClass:{type:String,default:""},dangerouslyUseHTMLString:Boolean,duration:{type:Number,default:4500},icon:{type:bs},id:{type:String,default:""},message:{type:wt([String,Object,Function]),default:""},offset:{type:Number,default:0},onClick:{type:wt(Function),default:()=>{}},onClose:{type:wt(Function),required:!0},position:{type:String,values:["top-right","top-left","bottom-right","bottom-left"],default:"top-right"},showClose:{type:Boolean,default:!0},title:{type:String,default:""},type:{type:String,values:[...dN,""],default:""},zIndex:Number,closeIcon:{type:bs,default:du}}),z6e={destroy:()=>!0},N6e=xe({name:"ElNotification"}),F6e=xe({...N6e,props:D6e,emits:z6e,setup(e,{expose:n}){const s=e,{ns:l,zIndex:d}=bx("notification"),{nextZIndex:m,currentZIndex:b}=d,r=Re(!1);let E;const M=se(()=>{const ie=s.type;return ie&&If[s.type]?l.m(ie):""}),A=se(()=>s.type&&If[s.type]||s.icon),P=se(()=>s.position.endsWith("right")?"right":"left"),D=se(()=>s.position.startsWith("top")?"top":"bottom"),z=se(()=>{var ie;return{[D.value]:`${s.offset}px`,zIndex:(ie=s.zIndex)!=null?ie:b.value}});function F(){s.duration>0&&({stop:E}=Up(()=>{r.value&&q()},s.duration))}function N(){E?.()}function q(){r.value=!1}function G({code:ie}){ie===Un.delete||ie===Un.backspace?N():ie===Un.esc?r.value&&q():F()}return Zr(()=>{F(),m(),r.value=!0}),Is(document,"keydown",G),n({visible:r,close:q}),(ie,W)=>(Z(),Bt(ha,{name:w(l).b("fade"),onBeforeLeave:ie.onClose,onAfterLeave:Y=>ie.$emit("destroy"),persisted:""},{default:mt(()=>[Wr(ae("div",{id:ie.id,class:ge([w(l).b(),ie.customClass,w(P)]),style:fr(w(z)),role:"alert",onMouseenter:N,onMouseleave:F,onClick:ie.onClick},[w(A)?(Z(),Bt(w(rr),{key:0,class:ge([w(l).e("icon"),w(M)])},{default:mt(()=>[(Z(),Bt(si(w(A))))]),_:1},8,["class"])):At("v-if",!0),ae("div",{class:ge(w(l).e("group"))},[ae("h2",{class:ge(w(l).e("title")),textContent:gn(ie.title)},null,10,["textContent"]),Wr(ae("div",{class:ge(w(l).e("content")),style:fr(ie.title?void 0:{margin:0})},[It(ie.$slots,"default",{},()=>[ie.dangerouslyUseHTMLString?(Z(),ue(cr,{key:1},[At(" Caution here, message could've been compromised, never use user's input as message "),ae("p",{innerHTML:ie.message},null,8,["innerHTML"])],2112)):(Z(),ue("p",{key:0},gn(ie.message),1))])],6),[[Ki,ie.message]]),ie.showClose?(Z(),Bt(w(rr),{key:0,class:ge(w(l).e("closeBtn")),onClick:Er(q,["stop"])},{default:mt(()=>[(Z(),Bt(si(ie.closeIcon)))]),_:1},8,["class","onClick"])):At("v-if",!0)],2)],46,["id","onClick"]),[[Ki,r.value]])]),_:3},8,["name","onBeforeLeave","onAfterLeave"]))}});var B6e=En(F6e,[["__file","notification.vue"]]);const Zb={"top-left":[],"top-right":[],"bottom-left":[],"bottom-right":[]},eS=16;let V6e=1;const t0=function(e={},n){if(!Pi)return{close:()=>{}};(ir(e)||qs(e))&&(e={message:e});const s=e.position||"top-right";let l=e.offset||0;Zb[s].forEach(({vm:A})=>{var P;l+=(((P=A.el)==null?void 0:P.offsetHeight)||0)+eS}),l+=eS;const d=`notification_${V6e++}`,m=e.onClose,b={...e,offset:l,id:d,onClose:()=>{$6e(d,s,m)}};let r=document.body;xl(e.appendTo)?r=e.appendTo:ir(e.appendTo)&&(r=document.querySelector(e.appendTo)),xl(r)||(r=document.body);const E=document.createElement("div"),M=st(B6e,b,hr(b.message)?b.message:qs(b.message)?()=>b.message:null);return M.appContext=Li(n)?t0._context:n,M.props.onDestroy=()=>{Cf(null,E)},Cf(M,E),Zb[s].push({vm:M}),r.appendChild(E.firstElementChild),{close:()=>{M.component.exposed.visible.value=!1}}};dN.forEach(e=>{t0[e]=(n={},s)=>((ir(n)||qs(n))&&(n={message:n}),t0({...n,type:e},s))});function $6e(e,n,s){const l=Zb[n],d=l.findIndex(({vm:M})=>{var A;return((A=M.component)==null?void 0:A.props.id)===e});if(d===-1)return;const{vm:m}=l[d];if(!m)return;s?.(m);const b=m.el.offsetHeight,r=n.split("-")[0];l.splice(d,1);const E=l.length;if(!(E<1))for(let M=d;M<E;M++){const{el:A,component:P}=l[M].vm,D=Number.parseInt(A.style[r],10)-b-eS;P.props.offset=D}}function H6e(){for(const e of Object.values(Zb))e.forEach(({vm:n})=>{n.component.exposed.visible.value=!1})}t0.closeAll=H6e;t0._context=null;const U6e=sO(t0,"$notify");var j6e=[i6e,u6e,w6e,O6e,U6e,Cz],G6e=mY([...X4e,...j6e]),q6e={name:"zh-cn",el:{breadcrumb:{label:""},colorpicker:{confirm:"",clear:"",defaultLabel:"",description:" {color} Enter ",alphaLabel:""},datepicker:{now:"",today:"",cancel:"",clear:"",confirm:"",dateTablePrompt:" Enter ",monthTablePrompt:" Enter ",yearTablePrompt:" Enter ",selectedDate:"",selectDate:"",selectTime:"",startDate:"",startTime:"",endDate:"",endTime:"",prevYear:"",nextYear:"",prevMonth:"",nextMonth:"",year:"",month1:"1 ",month2:"2 ",month3:"3 ",month4:"4 ",month5:"5 ",month6:"6 ",month7:"7 ",month8:"8 ",month9:"9 ",month10:"10 ",month11:"11 ",month12:"12 ",weeks:{sun:"",mon:"",tue:"",wed:"",thu:"",fri:"",sat:""},weeksFull:{sun:"",mon:"",tue:"",wed:"",thu:"",fri:"",sat:""},months:{jan:"",feb:"",mar:"",apr:"",may:"",jun:"",jul:"",aug:"",sep:"",oct:"",nov:"",dec:""}},inputNumber:{decrease:"",increase:""},select:{loading:"",noMatch:"",noData:"",placeholder:""},dropdown:{toggleDropdown:""},mention:{loading:""},cascader:{noMatch:"",loading:"",placeholder:"",noData:""},pagination:{goto:"",pagesize:"/",total:" {total} ",pageClassifier:"",page:"",prev:"",next:"",currentPage:" {pager} ",prevPages:" {pager} ",nextPages:" {pager} ",deprecationWarning:" el-pagination "},dialog:{close:""},drawer:{close:""},messagebox:{title:"",confirm:"",cancel:"",error:"!",close:""},upload:{deleteTip:" Delete ",delete:"",preview:"",continue:""},slider:{defaultLabel:" {min}  {max}",defaultRangeStartLabel:"",defaultRangeEndLabel:""},table:{emptyText:"",confirmFilter:"",resetFilter:"",clearFilter:"",sumText:""},tour:{next:"",previous:"",finish:""},tree:{emptyText:""},transfer:{noMatch:"",noData:"",titles:[" 1"," 2"],filterPlaceholder:"",noCheckedFormat:" {total} ",hasCheckedFormat:" {checked}/{total} "},image:{error:""},pageHeader:{title:""},popconfirm:{confirmButtonText:"",cancelButtonText:""},carousel:{leftArrow:"",rightArrow:"",indicator:" {index}"}}};const uC=RP(eU);uC.use(G6e,{locale:q6e});for(const[e,n]of Object.entries(Ose))uC.component(e,n);uC.mount("#app")});export default W6e();
